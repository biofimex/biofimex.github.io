<!DOCTYPE html>
<html>

<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=5814634947805184&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:10:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <title>Wheels On The Bus - Sing Along</title>
    <link rel="icon" type="image/x-icon" href="../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/promo/icons/128x128.png" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <!-- Use this metatag when Apple fixes their IOS 9
    <meta name="viewport" content="width=device-width,height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, minimal-ui"/>
    -->
    <!--Temporary fix for IOS 9-->
    <meta name="viewport" content="initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no, minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script type="text/javascript" src="../whitelabel-cdn.marketjs.com/jquery.min.js"></script>
    <script type="text/javascript" src="webaudio-context-patch.html"></script>
<style>html,body{background-color:#000;margin:0;padding:0;position:relative;font-family:"dimbo";width:100%}#pause{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:99999;display:none;font-size:2em;text-align:center;background:rgba(0,0,0,0.2);color:#fff}#game{position:absolute;left:0;top:0;z-index:0}#ajaxbar{background:url('../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/loading/ajax-loader.gif') center no-repeat}#canvas{position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1);z-index:1}#orientate{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:10002;display:none}#orientate img{position:absolute;float:left;width:100%;height:100%}.play{position:absolute;float:left;width:100%;height:100%;z-index:1000;background-color:#fff;left:0;top:0;display:none}.play img{position:absolute;float:left;width:100%;height:100%;z-index:1000;left:0;top:0}#nohtml5{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1002;visibility:hidden}#nohtml5 img{position:absolute;width:100%;height:100%}#nohtml5-bubble{position:absolute;bottom:20px;left:50px;width:380px;height:100px;z-index:1002;color:#000;background:rgba(255,255,255,0.75);-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#nohtml5-text{padding:10px}@font-face{font-family:'dimbo';src:url('http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/fonts/Dimbo Regular.woff') format('woff'),url('http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/fonts/Dimbo Regular.ttf')}@font-face{font-family:'kgini';src:url('http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/fonts/KGInimitableOriginal.woff') format('woff'),url('http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/fonts/KGInimitableOriginal.ttf')}.horizontal-seperator{height:10px;width:100%}.preloadText{position:absolute;top:-1000;left:-1000;display:none;z-index:-1}.ig_debug{position:fixed;left:0;bottom:0;width:100%;background-color:#000;border-top:2px solid #f57401;font-size:12px;color:#fff;z-index:1000;-webkit-user-select:none;display:none}.ig_debug_panel_menu{height:28px;background:#222;background:-webkit-gradient(linear,left bottom,left top,color-stop(0,#000),color-stop(1,#333));background:-moz-linear-gradient(center bottom,#000 0,#333 100%);background:-o-linear-gradient(#333,#000)}.ig_debug_panel_menu div{float:left;height:22px;padding:6px 8px 0 8px;border-right:1px solid #333}.ig_debug_panel_menu .ig_debug_head{font-weight:bold;color:#888}.ig_debug_menu_item:hover{cursor:pointer;background-color:#fff;color:#000}.ig_debug_menu_item.active,.ig_debug_menu_item.active:hover{background-color:#000;color:#fff}.ig_debug_stats{position:absolute;right:0;top:0;float:right;color:#888;border-left:1px solid #333;text-align:right}.ig_debug_stats span{width:3em;display:inline-block;color:#fff !important;margin-right:.2em;margin-left:.3em;font-family:bitstream vera sans mono,courier new;white-space:nowrap}.ig_debug_panel{height:152px;overflow:auto;position:relative}.ig_debug_panel canvas{border-bottom:1px solid #444}.ig_debug_panel .ig_debug_panel{padding:8px;height:auto;float:left;background-color:#000;border-right:2px solid #222}.ig_debug_option{padding:2px 0 2px 8px;cursor:pointer}.ig_debug_option:first-child{margin-top:8px}.ig_debug_option:hover{background-color:#111}.ig_debug_graph_mark{position:absolute;color:#888;left:4px;font-size:10px;margin-top:-12px}.ig_debug_legend{color:#ccc}.ig_debug_label_mark{display:inline-block;width:10px;height:10px;margin-right:4px;-webkit-transition:.1s linear;-moz-transition:.1s linear}.ig_debug_legend_color{display:inline-block;width:6px;height:10px;margin-right:4px;margin-left:16px}.ig_debug_legend_number{width:3em;display:inline-block;text-align:right;font-family:bitstream vera sans mono,courier new;color:#fff;margin-right:.2em}.ig_debug_map_container{position:relative;overflow:hidden;border:1px solid #888}.ig_debug_map_container canvas{position:absolute}.ig_debug_map_screen{position:absolute;border:1px solid #f0f}</style>
<!-- APICode -->
<!-- In Game Preroll Structure Template here --><div id='AdInGamePreroll'><div id='AdInGamePreroll-Box'><div id='AdInGamePreroll-Box-Header'></div><a id='AdInGamePreroll-Box-Close' onclick='AdInGamePreroll.Close();'></a><div id='AdInGamePreroll-Box-Body'><center></center></div><div id='AdInGamePreroll-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div>
<script type='text/javascript'>// Setup
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

var mjs_game_id = getQueryVariable('game_id')
var mjs_portal_id = getQueryVariable('portal_id')
var mjs_branding_id = getQueryVariable('branding_id')
var mjs_ad_id = getQueryVariable('ad_id')

console.log('mjs_game_id:',mjs_game_id)
console.log('mjs_portal_id:',mjs_portal_id)
console.log('mjs_branding_id:',mjs_branding_id)
console.log('mjs_ad_id:',mjs_ad_id)

//Base structure in script form
var css = "";
css+= "html,body,#sticky-container{margin:0;height:100%;color:#000;background:#e3f2fc;font-size:1.2em;font-family:Helvetica,Arial,sans-serif}#sticky-container{height:auto;min-height:100%}#sticky-footer{clear:both;position:relative;z-index:10}h1{padding:0;margin:0}h2{font-size:1.2em;padding:0;margin:0}h3{font-size:.8em;padding:0;margin:0}a{color:#128ccb}a.hover{color:#128ccb}.button{font-size:1em;font-weight:normal;-moz-border-radius:.5em;-webkit-border-radius:.5em;border-radius:.5em;padding:.5em 1em;text-decoration:none;color:#fff;background-color:#fbd305;display:inline-block}.button:hover{background-color:#fbd305;color:#fff;text-decoration:none !important}.button:active{position:relative;top:.05em}.button-large{font-size:2em}input[type=submit]{border:0}.valid{font-size:.8em;color:#1bdc24}.error{font-size:.8em;color:#ea1313;margin-top:.2em;margin-bottom:.5em;display:block}.tip{color:#ccc;font-size:.8em}.borderless{border:none !important}.pull-right{text-align:right}.padding-side{padding:0 1em 0 1em}.padding-side-small{padding:0 .5em 0 .5em}.padding-side-medium{padding:0 1.5em 0 1.5em}.container{clear:both;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-left:0 solid #ccc;border-right:0 solid #ccc;min-height:100%}.container-shadow{-webkit-box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc;box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc}.overlay-container-basic{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10004;display:none}.overlay-container{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10005;display:none}.overlay-container img{position:fixed;top:50%;left:50%}.horizontal-seperator{height:1em;width:100%}.horizontal-seperator-small{height:.5em;width:100%}.horizontal-seperator-line{width:100%;border-bottom:1px solid #ccc;margin-top:.2em;margin-bottom:.2em}.section{clear:both;margin:0}.inner_section{clear:both;margin:0}.col{display:block;float:left;margin:0}.col:first-child{margin-left:0}.group:before,.group:after{content:'';display:table}.group:after{clear:both}.group{zoom:1}.span_4_of_4{width:100%}.span_3_of_4{width:74.6%}.span_2_of_4{width:49.2%}.span_1_of_4{width:23.8%}.span_3_of_3{width:100%}.span_2_of_3{width:76.1%}.span_1_of_3{width:20.2%}.span_10_of_10{width:100%}.span_9_of_10{width:89.84%}.span_8_of_10{width:79.68%}.span_7_of_10{width:69.52%}.span_6_of_10{width:59.36%}.span_5_of_10{width:49.2%}.span_4_of_10{width:39.04%}.span_3_of_10{width:28.88%}.span_2_of_10{width:18.72%}.span_1_of_10{width:8.56%}.span_8_of_8{width:100%}.span_7_of_8{width:87.3%}.span_6_of_8{width:74.6%}.span_5_of_8{width:61.9%}.span_4_of_8{width:49.2%}.span_3_of_8{width:36.5%}.span_2_of_8{width:23.8%}.span_1_of_8{width:11.1%}.span_6_of_6{width:100%}.span_5_of_6{width:83.06%}.span_4_of_6{width:66.13%}.span_3_of_6{width:49.2%}.span_2_of_6{width:33.00%}.span_1_of_6{width:16.00%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:32.26%}.overlay_span_side{width:32.26%}@media only screen and (max-width:480px){.col{margin:1% 0 1% 0}.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_4_of_4{width:100%}.span_3_of_4{width:100%}.span_2_of_4{width:100%}.span_1_of_4{width:100%}.span_2_of_6{width:100%}.span_1_of_6{width:33%}.span_10_of_10{width:100%}.span_9_of_10{width:100%}.span_8_of_10{width:100%}.span_7_of_10{width:100%}.span_6_of_10{width:100%}.span_5_of_10{width:100%}.span_4_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_10{width:100%}.span_1_of_10{width:100%}.overlay_span_middle{width:100%}.overlay_span_side{width:100%}.container{margin:0}.navigation{line-height:1.8em;font-size:.8em}.css_btn_class{font-size:2em}.right_bar_module_span_2_of_6{width:100%}.box-action{margin:.2em}.featured-short-description{display:none}.box-more-games{height:140px !important}}@media only screen and (min-width:480px) and (max-width:768px){.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_6_of_10{width:50.0%}.span_4_of_10{width:50.0%}.span_7_of_10{width:100%}.span_2_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_6{width:50%}.navigation{line-height:2em}.right_bar_module_span_2_of_6{width:50%}.span_1_of_4{width:100%}.span_3_of_4{width:100%}.overlay_span_middle{width:50%}.overlay_span_side{width:25%}}@media only screen and (min-width :768px) and (max-width:1152px){.tablet-left{width:60%}.tablet-right{width:40%}.span_3_of_4{width:65%}.span_1_of_4{width:33%}.span_2_of_6{width:50.00%}.span_1_of_6{width:19.7%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:45%}.overlay_span_side{width:27.5%}.container{margin:0}.navigation{line-height:1.8em}.box-embed{width:92%}}@media only screen and (max-width:1165px){.AdPortalLeaderboard{display:none}}@media only screen and (max-width:1280px){.container{margin:0}.AdPortalSkyscraperLeft{display:none}.AdPortalSkyscraperRight{display:none}}@media only screen and (min-device-width :320px) and (max-device-width :568px) and (orientation :landscape){.span_6_of_10{width:60.0%}.span_4_of_10{width:40.0%}}";
css+= "/*BRANDING_IN_GAME_MENUBAR_THEME*/"; //can't fit in one line. Do we minify and remove all spaces?
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_LOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_UNLOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGIN_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_REGISTER_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGOUT_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LEADERBOARD_THEME*/";
css+= "/*BRANDING_CHANGE_USERNAME_THEME*/";
css+= "#AdInGamePreroll{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGamePreroll-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGamePreroll-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGamePreroll-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGamePreroll-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGamePreroll-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";
css+= "#AdInGameEndgame{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGameEndgame-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGameEndgame-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGameEndgame-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGameEndgame-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGameEndgame-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";

var html = "";
html+= "<!--BRANDING_IN_GAME_MENUBAR_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGIN_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_REGISTER_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGOUT_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LEADERBOARD_STRUCTURE-->";
html+= "<!--BRANDING_CHANGE_USERNAME_STRUCTURE-->";
html+= "<!--AD_IN_GAME_PREROLL_STRUCTURE-->";
html+= "<!--AD_IN_GAME_ENDGAME_STRUCTURE-->";

$('head').append("<style>"+css+"</style>");
$('html').append(html);

//Base script contains all that important juice (language.jsvalidate,forms,validate extra,etc)

var _CONFIG={LOGGING:!0};var Language=new function(){this.en={Validation:{urlshort:"Please enter a valid url: Eg: mysite.com",alphanumeric:"Letters, numbers, and dashes only please",lettersonly:"Letters only please",letterswithbasicpunc:"Letters or punctuation only please",letterswithwhitespace:"Letters with white spaces only please",alphanumericnodash:"Letters and numbers only please",alphanumericwhitespace:"Letters and numbers only please",nowhitespace:"No white space please",ziprange:"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx",
integer:"A positive or negative non-decimal number please",vinUS:"The specified vehicle identification number (VIN) is invalid",dateITA:"Please enter a correct date","user-password-retype":"Please type in the same password",maxWords:"Please enter {0} words or less",minWords:"Please enter at least {0} words",rangeWords:"Please enter between {0} and {1} words",valueNotEquals:"Value must not equal arg",required:"This field is required",remote:"Please fix this field",email:"Valid email address required",
url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",accept:"Please enter a value with a valid extension",maxlength:"Please enter no more than {0} characters",minlength:"Please enter at least {0} characters",rangelength:"Please enter a value between {0} and {1} characters long",range:"Please enter a value between {0} and {1}",
max:"Please enter a value less than or equal to {0}",min:"Please enter a value greater than or equal to {0}"}};this.zh={}},Localization=Language.en;(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&a.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(a){function f(){if(c.settings.submitHandler){if(c.submitButton)var a=b("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&a.remove();return!1}return!0}c.settings.debug&&a.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,f();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):f();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var a=!0,c=b(this[0].form).validate();this.each(function(){a&=c.element(this)});return a},removeAttrs:function(a){var c={},d=this;b.each(a.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(a,c){var d=this[0];if(a){var f=b.data(d.form,"validator").settings,g=f.rules,r=b.validator.staticRules(d);switch(a){case "add":b.extend(r,b.validator.normalizeRule(c));g[d.name]=r;c.messages&&(f.messages[d.name]=b.extend(f.messages[d.name],c.messages));break;case "remove":if(!c)return delete g[d.name],
r;var u={};b.each(c.split(/\s/),function(a,b){u[b]=r[b];delete r[b]});return u}}d=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(d),b.validator.classRules(d),b.validator.attributeRules(d),b.validator.staticRules(d)),d);d.required&&(f=d.required,delete d.required,d=b.extend({required:f},d));return d}});b.extend(b.expr[":"],{blank:function(a){return!b.trim(""+a.value)},filled:function(a){return!!b.trim(""+a.value)},unchecked:function(a){return!a.checked}});b.validator=function(a,c){this.settings=
b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1==arguments.length)return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=b.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);b.each(c,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in
this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).addClass(c).removeClass(d):b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).removeClass(c).addClass(d):b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:Localization.Validation.required,
remote:Localization.Validation.remote,email:Localization.Validation.email,url:Localization.Validation.url,date:Localization.Validation.date,dateISO:Localization.Validation.dateISO,number:Localization.Validation.number,digits:Localization.Validation.digits,creditcard:Localization.Validation.creditcard,equalTo:Localization.Validation.equalTo,accept:Localization.Validation.accept,maxlength:b.validator.format(Localization.Validation.maxlength),minlength:b.validator.format(Localization.Validation.minlength),
rangelength:b.validator.format(Localization.Validation.rangelength),range:b.validator.format(Localization.Validation.range),max:b.validator.format(Localization.Validation.max),min:b.validator.format(Localization.Validation.min)},autoCreateRanges:!1,prototype:{init:function(){function a(a){var c=b.data(this[0].form,"validator"),d="on"+a.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],a)}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&
this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};b.each(this.settings.groups,function(a,d){b.each(d.split(/\s/),function(b,d){c[d]=a})});var d=this.settings.rules;b.each(d,function(a,c){d[a]=b.validator.normalizeRule(c)});b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",a);this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=
this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=b(a);var c=this.check(a);c?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(a){if(a){b.extend(this.errorMap,a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});
this.successList=b.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;
return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==b.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=
this,c={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!a.objectLength(b(this).rules())?!1:c[this.name]=!0})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=
[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var c=b(a).rules(),d=!1,f;for(f in c){var g={method:f,parameters:c[f]};try{var r=b.validator.methods[f].call(this,a.value.replace(/\r/g,""),a,g.parameters);if("dependency-mismatch"==r)d=!0;else{d=!1;if("pending"==
r){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!r)return this.formatAndAdd(a,g),!1}}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+a.id+", check the '"+g.method+"' method",u),u;}}if(!d)return this.objectLength(c)&&this.successList.push(a),!0},customMetaMessage:function(a,c){if(b.metadata){var d=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,
b){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,c),this.customMetaMessage(a,c),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),f=/\$?\{(\d+)\}/g;
"function"==typeof d?d=d.call(this,b.parameters,a):f.test(d)&&(d=jQuery.format(d.replace(f,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);
this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},
invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(a,c){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||
(this.settings.errorPlacement?this.settings.errorPlacement(d,b(a)):d.insertAfter(a)));!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var c=this.idOrName(a);return this.errors().filter(function(){return b(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&
(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var c=this.currentForm;return b(document.getElementsByName(a)).map(function(b,f){return f.form==c&&f.name==a&&f||null})},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,
b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!b.validator.methods.required.call(this,b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=
0);delete this.pending[a.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!c&&(0==this.pendingRequest&&this.formSubmitted)&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},
dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor==String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c={};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={};a=b(a);for(var d in b.validator.methods){var f;
(f="required"===d&&"function"===typeof b.fn.prop?a.prop(d):a.attr(d))?c[d]=f:a[0].getAttribute("type")===d&&(c[d]=!0)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(a){if(!b.metadata)return{};var c=b.data(a.form,"validator").settings.meta;return c?b(a).metadata()[c]:b(a).metadata()},staticRules:function(a){var c={},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,
c){b.each(a,function(d,f){if(!1===f)delete a[d];else if(f.param||f.depends){var g=!0;switch(typeof f.depends){case "string":g=!!b(f.depends,c.form).length;break;case "function":g=f.depends.call(c,c)}g?a[d]=void 0!==f.param?f.param:!0:delete a[d]}});b.each(a,function(d,f){a[d]=b.isFunction(f)?f(c):f});b.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});b.validator.autoCreateRanges&&
(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!=d?d:b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},
methods:{required:function(a,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(a=b(c).val())&&0<a.length;case "input":if(this.checkable(c))return 0<this.getLength(a,c);default:return 0<b.trim(a).length}},remote:function(a,c,d){if(this.optional(c))return"dependency-mismatch";var f=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=
f.message;d="string"==typeof d&&{url:d}||d;if(this.pending[c.name])return"pending";if(f.old===a)return f.valid;f.old=a;var g=this;this.startRequest(c);var r={};r[c.name]=a;b.ajax(b.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:r,success:function(d){g.settings.messages[c.name].remote=f.originalMessage;var n=!0===d;if(n){var s=g.formSubmitted;g.prepareElement(c);g.formSubmitted=s;g.successList.push(c);g.showErrors()}else s={},d=d||g.defaultMessage(c,"remote"),s[c.name]=f.message=
b.isFunction(d)?d(a):d,g.showErrors(s);f.valid=n;g.stopRequest(c,n)}},d));return"pending"},minlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)>=d},maxlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)<=d},rangelength:function(a,c,d){a=this.getLength(b.trim(a),c);return this.optional(c)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||
a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var d=0,f=0,g=!1;a=a.replace(/\D/g,"");for(var r=a.length-1;0<=r;r--){f=
a.charAt(r);f=parseInt(f,10);if(g&&9<(f*=2))f-=9;d+=f;g=!g}return 0==d%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+d+")$","i"))},equalTo:function(a,c,d){d=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid()});return a==d.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(b,c,g){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=g)});else{var c=b.ajax;b.ajax=function(d){var f=("port"in d?d:b.ajaxSettings).port;return"abort"==("mode"in d?d:b.ajaxSettings).mode?(a[f]&&a[f].abort(),a[f]=c.apply(this,arguments)):c.apply(this,arguments)}}})(jQuery);
(function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(a,c){function d(a){a=b.event.fix(a);a.type=c;return b.event.handle.call(this,a)}b.event.special[c]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(a){arguments[0]=b.event.fix(a);arguments[0].type=c;return b.event.handle.apply(this,arguments)}}});b.extend(b.fn,{validateDelegate:function(a,
c,d){return this.bind(c,function(c){var g=b(c.target);if(g.is(a))return d.apply(g,arguments)})}})})(jQuery);(function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,"")}jQuery.validator.addMethod("maxWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<d},jQuery.validator.format(Localization.Validation.maxWords));jQuery.validator.addMethod("minWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},jQuery.validator.format(Localization.Validation.minWords));jQuery.validator.addMethod("rangeWords",
function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d[0]&&a.match(/bw+b/g).length<d[1]},jQuery.validator.format(Localization.Validation.rangeWords))})();jQuery.validator.addMethod("valueNotEquals",function(b,a,c){return c!=b},Localization.Validation.valueNotEquals);jQuery.validator.addMethod("filesize",function(b,a,c){return this.optional(a)||a.files[0].size<=c});
jQuery.validator.addMethod("urlshort",function(b,a){"http://"!=b.substr(0,7)&&(b="http://"+b);"/"!=b.substr(b.length-1,1)&&(b+="/");return this.optional(a)||/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(b)},"Not valid url.");jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z-.,?!()'\"\s]+$/i.test(b)},Localization.Validation.letterswithbasicpunc);
jQuery.validator.addMethod("alphanumericnodash",function(b,a){return this.optional(a)||/^[\sa-zA-Z0-9]+$/i.test(b)},Localization.Validation.alphanumericnodash);jQuery.validator.addMethod("alphanumericwhitespace",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-\s]+$/i.test(b)},Localization.Validation.alphanumericwhitespace);jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-]+$/i.test(b)},Localization.Validation.alphanumeric);
jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},Localization.Validation.lettersonly);jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},Localization.Validation.nowhitespace);jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2}-\d{4}$/.test(b)},Localization.Validation.ziprange);
jQuery.validator.addMethod("integer",function(b,a){return this.optional(a)||/^-?\d+$/.test(b)},Localization.Validation.integer);
jQuery.validator.addMethod("vinUS",function(b){if(17!=b.length)return!1;var a,c,d,f,g,r="ABCDEFGHJKLMNPRSTUVWXYZ".split(""),u=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],n=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],s=0;for(a=0;17>a;a++){f=n[a];d=b.slice(a,a+1);8==a&&(g=d);if(isNaN(d))for(c=0;c<r.length;c++){if(d.toUpperCase()===r[c]){d=u[c];d*=f;isNaN(g)&&8==c&&(g=r[c]);break}}else d*=f;s+=d}b=s%11;10==b&&(b="X");return b==g?!0:!1},Localization.Validation.vinUS);
jQuery.validator.addMethod("dateITA",function(b,a){var c=!1;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(b))var d=b.split("index.html"),c=parseInt(d[0],10),f=parseInt(d[1],10),d=parseInt(d[2],10),g=new Date(d,f-1,c),c=g.getFullYear()==d&&g.getMonth()==f-1&&g.getDate()==c?!0:!1;else c=!1;return this.optional(a)||c},Localization.Validation.dateITA);!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(b){function a(a){var c=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(c))}function c(a){var c=a.target,d=b(c);if(!d.is("[type=submit],[type=image]")){c=d.closest("[type=submit]");if(0===c.length)return;c=c[0]}var e=this;if(e.clk=c,"image"==c.type)void 0!==a.offsetX?(e.clk_x=a.offsetX,e.clk_y=a.offsetY):"function"==typeof b.fn.offset?(d=d.offset(),
e.clk_x=a.pageX-d.left,e.clk_y=a.pageY-d.top):(e.clk_x=a.pageX-c.offsetLeft,e.clk_y=a.pageY-c.offsetTop);setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)}function d(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var f,g;f=void 0!==b("<input type='file'/>").get(0).files;g=void 0!==window.FormData;var r=!!b.fn.prop;b.fn.attr2=function(){if(!r)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function c(e){function f(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(e){d("cannot get iframe.contentDocument: "+e),b=a.document}return b}function g(){function a(){try{var b=f(z).readyState;d("state = "+
b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(c){d("Server abort: ",c," (",c.name,")"),k(C),F&&clearTimeout(F),F=void 0}}var c=p.attr2("target"),e=p.attr2("action"),u=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";w.setAttribute("target",l);(!s||/post/i.test(s))&&w.setAttribute("method","POST");e!=h.url&&w.setAttribute("action",h.url);h.skipEncodingOverride||s&&!/post/i.test(s)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});h.timeout&&(F=setTimeout(function(){y=
!0;k(G)},h.timeout));var j=[];try{if(h.extraData)for(var n in h.extraData)h.extraData.hasOwnProperty(n)&&j.push(b.isPlainObject(h.extraData[n])&&h.extraData[n].hasOwnProperty("name")&&h.extraData[n].hasOwnProperty("value")?b('<input type="hidden" name="'+h.extraData[n].name+'">').val(h.extraData[n].value).appendTo(w)[0]:b('<input type="hidden" name="'+n+'">').val(h.extraData[n]).appendTo(w)[0]);h.iframeTarget||m.appendTo("body");z.attachEvent?z.attachEvent("onload",k):z.addEventListener("load",k,
!1);setTimeout(a,15);try{w.submit()}catch(t){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",e),w.setAttribute("enctype",u),c?w.setAttribute("target",c):p.removeAttr("target"),b(j).remove()}}function k(a){if(!j.aborted&&!E){if(v=f(z),v||(d("cannot access response document"),a=C),a===G&&j)return j.abort("timeout"),void A.reject(j,"timeout");if(a==C&&j)return j.abort("server abort"),void A.reject(j,"error","server abort");if(v&&v.location.href!=h.iframeSrc||y){z.detachEvent?
z.detachEvent("onload",k):z.removeEventListener("load",k,!1);var c;a="success";try{if(y)throw"timeout";var e="xml"==h.dataType||v.XMLDocument||b.isXMLDoc(v);if(d("isXml="+e),!e&&window.opera&&(null===v.body||!v.body.innerHTML)&&--H)return d("requeing onLoad callback, DOM not available"),void setTimeout(k,250);var u=v.body?v.body:v.documentElement;j.responseText=u?u.innerHTML:null;j.responseXML=v.XMLDocument?v.XMLDocument:v;e&&(h.dataType="xml");j.getResponseHeader=function(a){return{"content-type":h.dataType}[a.toLowerCase()]};
u&&(j.status=Number(u.getAttribute("status"))||j.status,j.statusText=u.getAttribute("statusText")||j.statusText);var n=(h.dataType||"").toLowerCase(),s=/(json|script|text)/.test(n);if(s||h.textarea){var p=v.getElementsByTagName("textarea")[0];if(p)j.responseText=p.value,j.status=Number(p.getAttribute("status"))||j.status,j.statusText=p.getAttribute("statusText")||j.statusText;else if(s){var g=v.getElementsByTagName("pre")[0],l=v.getElementsByTagName("body")[0];g?j.responseText=g.textContent?g.textContent:
g.innerText:l&&(j.responseText=l.textContent?l.textContent:l.innerText)}}else"xml"==n&&!j.responseXML&&j.responseText&&(j.responseXML=I(j.responseText));try{var e=j,u=h,q=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&0<=q.indexOf("xml"),B=r?e.responseXML:e.responseText;D=(r&&"parsererror"===B.documentElement.nodeName&&b.error&&b.error("parsererror"),u&&u.dataFilter&&(B=u.dataFilter(B,n)),"string"==typeof B&&("json"===n||!n&&0<=q.indexOf("json")?B=J(B):("script"===n||!n&&0<=q.indexOf("javascript"))&&
b.globalEval(B)),B)}catch(w){a="parsererror",j.error=c=w||a}}catch(x){d("error caught: ",x),a="error",j.error=c=x||a}j.aborted&&(d("upload aborted"),a=null);j.status&&(a=200<=j.status&&300>j.status||304===j.status?"success":"error");"success"===a?(h.success&&h.success.call(h.context,D,"success",j),A.resolve(j.responseText,"success",j),t&&b.event.trigger("ajaxSuccess",[j,h])):a&&(void 0===c&&(c=j.statusText),h.error&&h.error.call(h.context,j,a,c),A.reject(j,"error",c),t&&b.event.trigger("ajaxError",
[j,h,c]));t&&b.event.trigger("ajaxComplete",[j,h]);t&&!--b.active&&b.event.trigger("ajaxStop");h.complete&&h.complete.call(h.context,j,a);E=!0;h.timeout&&clearTimeout(F);setTimeout(function(){h.iframeTarget?m.attr("src",h.iframeSrc):m.remove();j.responseXML=null},100)}}}var n,h,t,l,m,z,j,x,y,F,w=p[0],A=b.Deferred();if(A.abort=function(a){j.abort(a)},e)for(n=0;n<q.length;n++)e=b(q[n]),r?e.prop("disabled",!1):e.removeAttr("disabled");if(h=b.extend(!0,{},b.ajaxSettings,a),h.context=h.context||h,l="jqFormIO"+
(new Date).getTime(),h.iframeTarget?(m=b(h.iframeTarget),x=m.attr2("name"),x?l=x:m.attr2("name",l)):(m=b('<iframe name="'+l+'" src="'+h.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),z=m[0],j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";d("aborting upload... "+c);this.aborted=1;try{z.contentWindow.document.execCommand&&
z.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",h.iframeSrc);j.error=c;h.error&&h.error.call(h.context,j,c,a);t&&b.event.trigger("ajaxError",[j,h,c]);h.complete&&h.complete.call(h.context,j,c)}},t=h.global,t&&0===b.active++&&b.event.trigger("ajaxStart"),t&&b.event.trigger("ajaxSend",[j,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,j,h))return h.global&&b.active--,A.reject(),A;if(j.aborted)return A.reject(),A;(e=w.clk)&&(x=e.name,x&&!e.disabled&&(h.extraData=h.extraData||{},
h.extraData[x]=e.value,"image"==e.type&&(h.extraData[x+".x"]=w.clk_x,h.extraData[x+".y"]=w.clk_y)));var G=1,C=2;x=b("meta[name=csrf-token]").attr("content");(e=b("meta[name=csrf-param]").attr("content"))&&x&&(h.extraData=h.extraData||{},h.extraData[e]=x);h.forceSync?g():setTimeout(g,10);var D,v,E,H=50,I=b.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=
b.documentElement.nodeName?b:null},J=b.parseJSON||function(a){return window.eval("("+a+")")};return A}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var s,e,p=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});s=a.type||this.attr2("method");e=a.url||this.attr2("action");(e=(e="string"==typeof e?b.trim(e):"")||window.location.href||"")&&(e=(e.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:e,success:b.ajaxSettings.success,type:s||b.ajaxSettings.type,
iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);e={};if(this.trigger("form-pre-serialize",[this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var t=a.traditional;void 0===t&&(t=b.ajaxSettings.traditional);var k,q=[],l=this.formToArray(a.semantic,q);if(a.data&&(a.extraData=a.data,k=b.param(a.data,
t)),a.beforeSubmit&&!1===a.beforeSubmit(l,this,a))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;e=b.param(l,t);k&&(e=e?e+"&"+k:k);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+e,a.data=null):a.data=e;var m=[];if(a.resetForm&&m.push(function(){p.resetForm()}),a.clearForm&&m.push(function(){p.clearForm(a.includeHidden)}),
!a.dataType&&a.target){var G=a.success||function(){};m.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(G,arguments)})}else a.success&&m.push(a.success);if(a.success=function(b,c,d){for(var e=a.context||this,f=0,h=m.length;h>f;f++)m[f].apply(e,[b,c,d||p,p])},a.error){var y=a.error;a.error=function(b,c,d){y.apply(a.context||this,[b,c,d,p])}}if(a.complete){var I=a.complete;a.complete=function(b,c){I.apply(a.context||this,[b,c,p])}}k=0<b("input[type=file]:enabled",this).filter(function(){return""!==
b(this).val()}).length;e="multipart/form-data"==p.attr("enctype")||"multipart/form-data"==p.attr("encoding");t=f&&g;d("fileAPI :"+t);var C;if(!1!==a.iframe&&(a.iframe||(k||e)&&!t))a.closeKeepAlive?b.get(a.closeKeepAlive,function(){C=c(l)}):C=c(l);else{if((k||e)&&t){var E=new FormData;for(e=0;e<l.length;e++)E.append(l[e].name,l[e].value);if(a.extraData){var D=b.param(a.extraData,a.traditional).split("&"),J=D.length;k=[];for(e=0;J>e;e++)D[e]=D[e].replace(/\+/g," "),t=D[e].split("="),k.push([decodeURIComponent(t[0]),
decodeURIComponent(t[1])]);for(e=0;e<k.length;e++)k[e]&&E.append(k[e][0],k[e][1])}a.data=null;k=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});a.uploadProgress&&(k.xhr=function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){var c=0,d=b.loaded||b.position,e=b.total;b.lengthComputable&&(c=Math.ceil(100*(d/e)));a.uploadProgress(b,d,e,c)},!1),c});k.data=null;var H=k.beforeSend;k=(k.beforeSend=function(b,c){c.data=
a.formData?a.formData:E;H&&H.call(this,b,c)},b.ajax(k))}else k=b.ajax(a);C=k}p.removeData("jqxhr").data("jqxhr",C);for(k=0;k<q.length;k++)q[k]=null;return this.trigger("form-submit-notify",[this,a]),this};b.fn.ajaxForm=function(f){if(f=f||{},f.delegation=f.delegation&&b.isFunction(b.fn.on),!f.delegation&&0===this.length){var n=this.selector,s=this.context;return!b.isReady&&n?(d("DOM not ready, queuing ajaxForm"),b(function(){b(n,s).ajaxForm(f)}),this):(d("terminating; zero elements found by selector"+
(b.isReady?"":" (DOM not ready)")),this)}return f.delegation?(b(document).off("submit.form-plugin",this.selector,a).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,f,a).on("click.form-plugin",this.selector,f,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",f,a).bind("click.form-plugin",f,c)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,c){var d=[];if(0===this.length)return d;var e,p=this[0],
g=this.attr("id"),k=a?p.getElementsByTagName("*"):p.elements;if(k&&!/MSIE [678]/.test(navigator.userAgent)&&(k=b(k).get()),g&&(e=b(':input[form="'+g+'"]').get(),e.length&&(k=(k||[]).concat(e))),!k||!k.length)return d;var q,l,m,r,y;e=0;for(r=k.length;r>e;e++)if(m=k[e],q=m.name,q&&!m.disabled)if(a&&p.clk&&"image"==m.type)p.clk==m&&(d.push({name:q,value:b(m).val(),type:m.type}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y}));else if(l=b.fieldValue(m,!0),l&&l.constructor==Array){c&&c.push(m);
g=0;for(y=l.length;y>g;g++)d.push({name:q,value:l[g]})}else if(f&&"file"==m.type)if(c&&c.push(m),y=m.files,y.length)for(g=0;g<y.length;g++)d.push({name:q,value:y[g],type:m.type});else d.push({name:q,value:"",type:m.type});else null!==l&&"undefined"!=typeof l&&(c&&c.push(m),d.push({name:q,value:l,type:m.type,required:m.required}));!a&&p.clk&&(k=b(p.clk),l=k[0],(q=l.name)&&!l.disabled&&"image"==l.type&&(d.push({name:q,value:k.val()}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y})));
return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var c=[];return this.each(function(){var d=this.name;if(d){var e=b.fieldValue(this,a);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),b.param(c)};b.fn.fieldValue=function(a){for(var c=[],d=0,e=this.length;e>d;d++){var f=b.fieldValue(this[d],a);null===f||"undefined"==typeof f||f.constructor==
Array&&!f.length||(f.constructor==Array?b.merge(c,f):c.push(f))}return c};b.fieldValue=function(a,c){var d=a.name,e=a.type,f=a.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||a.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!a.checked||("submit"==e||"image"==e)&&a.form&&a.form.clk!=a||"select"==f&&-1==a.selectedIndex))return null;if("select"==f){var g=a.selectedIndex;if(0>g)return null;for(var d=[],f=a.options,k=(e="select-one"==e)?g+1:f.length,g=e?g:0;k>g;g++){var q=f[g];if(q.selected){var l=
q.value;if(l||(l=q.attributes&&q.attributes.value&&!q.attributes.value.specified?q.text:q.value),e)return l;d.push(l)}}return d}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value=
"":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(d)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=
!a})};b.fn.selected=function(a){return void 0===a&&(a=!0),this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=a:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),a&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});


var InGameMenubarAuth = {
	checkIfLoggedIn:function(token_id){
		$.ajax({
	        type: 'GET',
	        dataType: 'json',
			url: 'http://smartfun.club' + '/api/login/check/' + token_id + '',
            beforeSend:function (){
				console.log('InGameMenubarAuth.checkIfLoggedIn: beforeSend')
			},			
		}).done(function(response){
			console.log(response)								
			$('#in-game-menubar-user-panel').html(response.data.template);	
			
			if(response.status.code==200){				
				if(mjs_user_token_id){
					// Update portal domain
					var old_href = 'index.html';
					console.log('old_href:',old_href);
					
					$('#in-game-menubar-main-portal-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString());				

					// Update header
					$('#in-game-menubar-header-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString())					
				}

			}
		});			
	},	
}

// GLOBAL
var mjs_user_token_id;

// getQueryVariable
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

// In Game Menubar Script Template here
var InGameMenubar = {
	enabled:eval('false'),
	
	activateLeaderboard:function(){
		$('#in-game-menubar-main').hide()
		$('#in-game-menubar-leaderboard').show();		
	},
	
	showActivator:function(){
		$('#in-game-menubar-activator').show();
	},
	activate: function(){
		// Resolve in pixels
		var height = $('#in-game-menubar-main').css('height')
		if(height=='0px'){
			console.log('weird bug with 0px ... forcing something')
			$('#in-game-menubar-main').css('height',window.innerHeight*0.6)
		}
		
		$('#in-game-menubar-activator').hide(200);
		//$('#in-game-menubar-main').css('top',$('#in-game-menubar-activator').css('top'))
		$('#in-game-menubar-main').show(200);
	},		
	deactivate: function(){
		$('#in-game-menubar-activator').show(200);
		$('#in-game-menubar-main').hide(200);
	},
}

var Cookie = {
	IsEnabled: function(){
		return navigator.cookieEnabled ||
	        ('cookie' in document && (document.cookie.length > 0 ||
	        (document.cookie = 'mjstestcookie').indexOf.call(document.cookie, 'mjstestcookie') > -1));	
	},	
	DoesExist: function(cname) {
	    var name = cname + '=';
	    var ca = document.cookie.split(';');
		var value;
	    for(var i=0; i<ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1);
	        if (c.indexOf(name) == 0){
				return true;
			} 
	    }
	    return false;
	},
	// TEST
	SetFiveSecondCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (5*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetHourlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetDailyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
 	SetMonthlyCookie: function(cname) { // averages to 30 days
	    var d = new Date();
	    d.setTime(d.getTime() + (1*30*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},		
	SetYearlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*365*24*60*60*1000)); // averages to 365 days
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},			
}

var MarketJS = {
	Log:{
		Game:function(metric_name){ // Eg: MarketJS.Log.Game('Initialize'), MarketJS.Log.Game('EndGame'), MarketJS.Log.Game('LaunchGame)
			console.log('MarketJS API Log Game Event: ',metric_name)
			$.ajax({
		        type: 'GET',
				dataType:'json',
				url: 'http://smartfun.club/api/log/game/' + metric_name + '/' + mjs_game_id + '?mjs_user_token_id=' + mjs_user_token_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		Portal:function(metric_name){ // Eg: MarketJS.Log.Portal('UserLogin'), MarketJS.Log.Portal('UserRegister')
			console.log('MarketJS API Log Portal Event: ',metric_name)
			$.ajax({
		        type: 'POST',
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		TimeSpent:function(metric_value){
			console.log('MarketJS API Log Time Spent: ',metric_value)
			var metric_name = 'TimeSpent';
			$.ajax({
		        type: 'POST',
				data:{'metric_value':metric_value},
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},	
		// Specially developed
		UniqueVisitor:function(){
			console.log('MarketJS API Log Unique Visitor Event')

			// if unique_visitor_params[xxxx] = 'True', means it will be logged in the server			
			var unique_visitor_params = {
				'singular':'True', // to invoke singular counter increments. Special case
				'hourly':'False',
				'daily':'False',
				'monthly':'False',
				'yearly':'False',
			}
			
			var submit_hourly_cookie = false;
			var submit_daily_cookie = false;
			var submit_monthly_cookie = false;
			var submit_yearly_cookie = false;
			
			if(Cookie.IsEnabled()){
				/*
				if(!Cookie.DoesExist('mjstest')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetFiveSecondCookie('mjstest');
					submit_hourly_cookie = true;
				}*/
				
				if(!Cookie.DoesExist('mjshourly')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetHourlyCookie('mjshourly');
					submit_hourly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsdaily')){
					unique_visitor_params['daily'] = 'True';
					Cookie.SetDailyCookie('mjsdaily');
					submit_daily_cookie = true;
				}

				if(!Cookie.DoesExist('mjsmonthly')){
					unique_visitor_params['monthly'] = 'True';
					Cookie.SetMonthlyCookie('mjsmonthly');					
					submit_monthly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsyearly')){
					unique_visitor_params['yearly'] = 'True';
					Cookie.SetYearlyCookie('mjsyearly');
					submit_yearly_cookie = true;
				}																
			}	

			/* SAMPLE:
			unique_visitor_params:{
				hourly:hourly, // 'True'
				daily:daily,	// 'False'
				monthly:monthly, // 'False'
				yearly:yearly, // 'False'
			},
			*/						
			if(submit_hourly_cookie || submit_daily_cookie || submit_monthly_cookie || submit_yearly_cookie){
				console.log('Submitting ...')
				$.ajax({
			        type: 'POST',
					dataType:'json',
					data:unique_visitor_params,
					url: 'http://smartfun.club/api/log/portal/' + 'UniqueVisitor' + '/' + mjs_portal_id,
				}).done(function(response){
					console.log(response.status.code);							
				});					
			}else{
				console.log('Not submitting ... all data is current')
			}					
		},
	},
	
	Leaderboard:{
		SubmitScore:function(points){ // (token_id,game_id,points)
			// what's the drawback? users can post as often as they want, but we have a filter for frequency and value
			if(!mjs_user_token_id){
				console.log('No user session detected. No score submitted')
				return
			}
			$.ajax({
		        type: 'POST',
				data:{
					'token_id':mjs_user_token_id,//token_id,
					'game_id':mjs_game_id,//game_id,
					'points':points,
				},
		        dataType: 'json',
				url: 'http://smartfun.club/leaderboard/write',		
			}).done(function(response){
				console.log(response);
				if(response.status.code==200){
					console.log('SUCCESSFUL')
				}else{
					console.log('FAILED')
				}							
			});			
		},			
	}
}

// Steps

// Good thing we only have mobile and non-mobile
function isMobile(){
	var userAgent = navigator.userAgent;
	var list = ['iPhone','iPad','android','Android','Windows Phone','Silk','BB10','PlayBook'];
	for(i=0;i<list.length;i++){
		if(userAgent.indexOf(list[i])!=-1){
			return true
		}
	}
	return false;
}

// ENABLER
// temporaryly use localStorage, instead of jStorage
$(document).ready(function(){
	if(isMobile() && InGameMenubar.enabled){
		InGameMenubar.showActivator();
	}
	
	mjs_user_token_id = getQueryVariable('mjs_user_token_id');
	if(mjs_user_token_id){
		console.log('mjs_user_token_id found in url param')

		if(isMobile() && InGameMenubar.enabled){
			InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id);
		}		
	}else{
		if(localStorage){
			mjs_user_token_id = localStorage.getItem('mjs_user_token_id')
			
			if(isMobile() && InGameMenubar.enabled){
				if(mjs_user_token_id){
					console.log('mjs_user_token_id found in localStorage');
					InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id)
				}else{
					console.log('No user token id found in localStorage ... perform a dummy check')
					InGameMenubarAuth.checkIfLoggedIn('12345678') // SOMEHOW THIS NEEDS TO BE HERE
				}				
			}			
			
		}else{
			console.log('no localstorage found')
		}
	}	
});

/* OBSOLETE
// Record TimeSpent
var TimeSpent = 0;
window.setInterval(function () {TimeSpent+=1}, 1000);
var isSmartphone = eval('false');
var isTablet = eval('false');
var isDesktop;
if(isSmartphone || isTablet){
	isDesktop = false;
}else{
	isDesktop = true;
}
if(!isDesktop){
	window.setInterval(function () {
		MarketJS.Log.TimeSpent(TimeSpent); // NEEDS TO BE OPTIMIZED, TO REDUCE LOAD
		TimeSpent = 0;					
	}, 31000);	
}
*/


var BrandingSplashScreen={enabled:eval('true'),}
function InitializeSplashScreen(){if(BrandingSplashScreen.enabled){this.START_BRANDING_SPLASH;ig.module('plugins.branding.splash').requires('impact.impact','impact.entity').defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0);}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},splash:new ig.Image('http://lh3.googleusercontent.com/YADmEGMQG8Rabw_t5RDwpddpX7r0VqS8lIQj6R65PozZt1KyTX_NvlOK5UBYqZOE6pwsXlxdOI7UWcHy6sz51525x82aH1fXLq_1Og=s480'),init:function(x,y,settings){this.parent(x,y,settings); if(ig.system.width<=320){this.size.x=320;this.size.y=200;}else{this.size.x=480;this.size.y=240;} 
this.pos.x=(ig.system.width-this.size.x)/2;this.pos.y=-this.size.y-200; this.endPosY=(ig.system.height-this.size.y)/2;var tween1=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});var tween2=this.tween({},eval('3')-0.5,{onComplete:function(){ ig.game.director.loadLevel(ig.game.director.currentLevel);}});tween1.chain(tween2);tween1.start();this.currentAnim=this.anims.idle;},createClickableLayer:function(){ console.log('Build clickable layer')
this.checkClickableLayer('branding-splash','SPLASH_SCREEN_CLICKABLE_LOGO_URL',true);},doesClickableLayerExist:function(id){for(k in dynamicClickableEntityDivs){if(k==id)return true;}
return false;},checkClickableLayer:function(divID,outboundLink,open_new_window){if(typeof(wm)=='undefined'){ if(this.doesClickableLayerExist(divID)){ ig.game.showOverlay([divID]); $('#'+divID).find('[href]').attr('href',outboundLink);}else{this.createClickableOutboundLayer(divID,outboundLink,'static/test/images/branding/splash_screen/invisible.png',open_new_window);}}}, createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window){ var div=ig.$new('div');div.id=id;document.body.appendChild(div); $('#'+div.id).css('float','left');$('#'+div.id).css('position','absolute');if(ig.ua.mobile){var heightRatio=window.innerHeight/mobileHeight;var widthRatio=window.innerWidth/mobileWidth;$('#'+div.id).css('left',this.pos.x*widthRatio);$('#'+div.id).css('top',this.pos.y*heightRatio);$('#'+div.id).css('width',this.size.x*widthRatio);$('#'+div.id).css('height',this.size.y*heightRatio);}else{ var reference={x:(w/2)-(destW/2),y:(h/2)-(destH/2),}
console.log(reference.x,reference.y);$('#'+div.id).css('left',reference.x+this.pos.x*multiplier);$('#'+div.id).css('top',reference.y+this.pos.y*multiplier);$('#'+div.id).css('width',this.size.x*multiplier);$('#'+div.id).css('height',this.size.y*multiplier);} 
if(open_new_window){$('#'+div.id).html('<a target=\'_blank\' href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}else{$('#'+div.id).html('<a href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');} 
dynamicClickableEntityDivs[id]={};dynamicClickableEntityDivs[id]['width']=this.size.x*multiplier;dynamicClickableEntityDivs[id]['height']=this.size.y*multiplier;dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;},draw:function(){ig.system.context.fillStyle='#ffffff';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.parent();if(this.splash)
{ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y);}}});});this.END_BRANDING_SPLASH;}}

//BRANDING_IN_GAME_MENUBAR_LOGIN_SCRIPT

//BRANDING_IN_GAME_MENUBAR_REGISTER_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LOGOUT_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LEADERBOARD_SCRIPT

//BRANDING_CHANGE_USERNAME_SCRIPT


var AdInGamePreroll={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGamePreroll disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGamePreroll']={'box-width':AdInGamePreroll.ad_width+2,'box-height':AdInGamePreroll.ad_height+20,}}
this.selectedOverlayName='AdInGamePreroll'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGamePreroll.boxContents.header.text(AdInGamePreroll.ready_in+' '+i+'...');AdInGamePreroll.boxContents.footer.text(AdInGamePreroll.loading);i--;if(i<0){clearInterval(inter);AdInGamePreroll.boxContents.close.css('left',AdInGamePreroll.boxContents.body.width()-23);AdInGamePreroll.boxContents.close.show();AdInGamePreroll.boxContents.header.html(AdInGamePreroll.close);AdInGamePreroll.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};



var AdInGameEndgame={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGameEndgame disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGameEndgame']={'box-width':AdInGameEndgame.ad_width+2,'box-height':AdInGameEndgame.ad_height+20,}}
this.selectedOverlayName='AdInGameEndgame'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGameEndgame.boxContents.header.text(AdInGameEndgame.ready_in+' '+i+'...');AdInGameEndgame.boxContents.footer.text(AdInGameEndgame.loading);i--;if(i<0){clearInterval(inter);AdInGameEndgame.boxContents.close.css('left',AdInGameEndgame.boxContents.body.width()-23);AdInGameEndgame.boxContents.close.show();AdInGameEndgame.boxContents.header.html(AdInGameEndgame.close);AdInGameEndgame.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};

//BRANDING_FACEBOOK_SCRIPT


var BrandingInGameMoreGames={enabled:eval('true'),url:'http://smartfun.club',}

//PORTAL_ANALYTICS_CODE</script> 
<script type='text/javascript'>var _STRINGS={"Ad":{"Mobile":{"Preroll":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"Header":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"End":{"ReadyIn":"Advertisement ends in ","Loading":"Please wait ...","Close":"Close",},},},"Splash":{"Loading":"Loading ...","LogoLine1":"Some text here","LogoLine2":"powered by MarketJS","LogoLine3":"none",},"Game":{"SelectPlayer":"Select Player","Win":"You win!","Lose":"You lose!","Score":"Score","Time":"Time","Settings":"Settings","Pause":"Pause","End":"End of Trip!",},"Song":{"Verse0":"","Verse1":"The wheels on the bus","Verse2":"go round and round ","Verse3":"round and round ","Verse4":"round and round ","Verse5":"The wheels on the bus","Verse6":"go round and round ","Verse7":"all through the town ","Verse8":"The horn on the bus","Verse9":"goes Beep, beep, beep","Verse10":"Beep, beep, beep","Verse11":"Beep, beep, beep","Verse12":"The horn on the bus","Verse13":"goes Beep, beep, beep ","Verse14":"all through the town ","Verse15":"The baby on the bus","Verse16":"goes Wah, wah, wah","Verse17":"Wah, wah, wah","Verse18":"Wah, wah, wah","Verse19":"The baby on the bus","Verse20":"goes Wah, wah, wah","Verse21":"all through the town ","Verse22":"The mommy on the bus","Verse23":"goes Shush, shush, shush","Verse24":"Shush, shush, shush","Verse25":"Shush, shush, shush","Verse26":"The mommy on the bus","Verse27":"goes Shush, shush, shush","Verse28":"all through the town",},"Wrap":{"Wrap0":"","Wrap1":"The\nwheels\non\nthe\nbus","Wrap2":"go\nround\nand\nround,","Wrap3":"round\nand\nround,","Wrap4":"round\nand\nround.","Wrap5":"The\nwheels\non\nthe\nbus","Wrap6":"go\nround\nand\nround,","Wrap7":"all\nthrough\nthe\ntown.","Wrap8":"The\nhorn\non\nthe\nbus",},"Karaoke":{"K1":['','The','wheels','on','the','bus','go','round','and','round ','round','and','round ','round','and','round ','The','wheels','on','the','bus','go','round','and','round','all','through','the','town ','The','horn','on','the','bus','goes','Beep,','beep,','beep ','Beep,','beep,','beep','Beep,','beep,','beep','The','horn','on','the','bus','goes','Beep,','beep,','beep ','all','through','the','town','','The','baby','on','the','bus','goes','Wah,','wah,','wah','Wah,','wah,','wah','Wah,','wah,','wah','The','baby','on','the','bus','goes','Wah,','wah,','wah','all','through','the','town','The','mommy','on','the','bus','goes','Shush,','shush,','shush','Shush,','shush,','shush','Shush,','shush,','shush','The','mommy','on','the','bus','goes','Shush,','shush,','shush','all','through','the','town ',''],},"Results":{"Title":"High score",},};
var _SETTINGS={DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!0,Link:"http://google.com",LinkEnabled:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:BrandingSplashScreen.enabled},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,Width:166,Height:61}},MoreGames:{Enabled:BrandingInGameMoreGames.enabled,Link:BrandingInGameMoreGames.url,NewWindow:!0}};!function(c,d){"object"==typeof module&&"object"==typeof module.exports?module.exports=c.document?d(c,!0):function(c){if(!c.document)throw Error("jQuery requires a window with a document");return d(c)}:d(c)}("undefined"!=typeof window?window:this,function(c,d){function e(c,d){d=d||B;var e=d.createElement("script");e.text=c;d.head.appendChild(e).parentNode.removeChild(e)}function f(c){var d=!!c&&"length"in c&&c.length,e=l.type(c);return"function"!==e&&!l.isWindow(c)&&("array"===e||0===d||"number"==
typeof d&&0<d&&d-1 in c)}function g(c,d){return c.nodeName&&c.nodeName.toLowerCase()===d.toLowerCase()}function m(c,d,e){return l.isFunction(d)?l.grep(c,function(c,y){return!!d.call(c,y,c)!==e}):d.nodeType?l.grep(c,function(c){return c===d!==e}):"string"!=typeof d?l.grep(c,function(c){return-1<Da.call(d,c)!==e}):Dc.test(d)?l.filter(d,c,e):(d=l.filter(d,c),l.grep(c,function(c){return-1<Da.call(d,c)!==e&&1===c.nodeType}))}function r(c,d){for(;(c=c[d])&&1!==c.nodeType;);return c}function s(c){return c}
function j(c){throw c;}function n(c,d,e,D){var j;try{c&&l.isFunction(j=c.promise)?j.call(c).done(d).fail(e):c&&l.isFunction(j=c.then)?j.call(c,d,e):d.apply(void 0,[c].slice(D))}catch(f){e.apply(void 0,[f])}}function p(){B.removeEventListener("DOMContentLoaded",p);c.removeEventListener("load",p);l.ready()}function q(){this.expando=l.expando+q.uid++}function t(c,d,e){var D;if(void 0===e&&1===c.nodeType)if(D="data-"+d.replace(Ec,"-$&").toLowerCase(),e=c.getAttribute(D),"string"==typeof e){try{e="true"===
e||"false"!==e&&("null"===e?null:e===+e+""?+e:Fc.test(e)?JSON.parse(e):e)}catch(j){}R.set(c,d,e)}else e=void 0;return e}function x(c,d,e,D){var j,f=1,g=20,n=D?function(){return D.cur()}:function(){return l.css(c,d,"")},p=n(),m=e&&e[3]||(l.cssNumber[d]?"":"px"),q=(l.cssNumber[d]||"px"!==m&&+p)&&Fa.exec(l.css(c,d));if(q&&q[3]!==m){m=m||q[3];e=e||[];q=+p||1;do f=f||".5",q/=f,l.style(c,d,q+m);while(f!==(f=n()/p)&&1!==f&&--g)}return e&&(q=+q||+p||0,j=e[1]?q+(e[1]+1)*e[2]:+e[2],D&&(D.unit=m,D.start=q,D.end=
j)),j}function u(c,d){for(var e,D,j=[],f=0,g=c.length;f<g;f++)if(D=c[f],D.style)if(e=D.style.display,d){if("none"===e&&(j[f]=E.get(D,"display")||null,j[f]||(D.style.display="")),""===D.style.display&&Na(D)){e=j;var n=f,p,m=void 0;p=D.ownerDocument;var q=D.nodeName;p=(D=Bb[q])?D:(m=p.body.appendChild(p.createElement(q)),D=l.css(m,"display"),m.parentNode.removeChild(m),"none"===D&&(D="block"),Bb[q]=D,D);e[n]=p}}else"none"!==e&&(j[f]="none",E.set(D,"display",e));for(f=0;f<g;f++)null!=j[f]&&(c[f].style.display=
j[f]);return c}function z(c,d){var e;return e="undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(d||"*"):"undefined"!=typeof c.querySelectorAll?c.querySelectorAll(d||"*"):[],void 0===d||d&&g(c,d)?l.merge([c],e):e}function I(c,d){for(var e=0,D=c.length;e<D;e++)E.set(c[e],"globalEval",!d||E.get(d[e],"globalEval"))}function G(c,d,e,D,j){for(var f,g,n,p,m=d.createDocumentFragment(),q=[],s=0,t=c.length;s<t;s++)if(f=c[s],f||0===f)if("object"===l.type(f))l.merge(q,f.nodeType?[f]:f);else if(Gc.test(f)){g=
g||m.appendChild(d.createElement("div"));n=(Cb.exec(f)||["",""])[1].toLowerCase();n=U[n]||U._default;g.innerHTML=n[1]+l.htmlPrefilter(f)+n[2];for(n=n[0];n--;)g=g.lastChild;l.merge(q,g.childNodes);g=m.firstChild;g.textContent=""}else q.push(d.createTextNode(f));m.textContent="";for(s=0;f=q[s++];)if(D&&-1<l.inArray(f,D))j&&j.push(f);else if(p=l.contains(f.ownerDocument,f),g=z(m.appendChild(f),"script"),p&&I(g),e)for(n=0;f=g[n++];)Db.test(f.type||"")&&e.push(f);return m}function L(){return!0}function V(){return!1}
function ma(){try{return B.activeElement}catch(c){}}function Q(c,d,e,D,j,f){var g,n;if("object"==typeof d){"string"!=typeof e&&(D=D||e,e=void 0);for(n in d)Q(c,n,e,D,d[n],f);return c}if(null==D&&null==j?(j=e,D=e=void 0):null==j&&("string"==typeof e?(j=D,D=void 0):(j=D,D=e,e=void 0)),!1===j)j=V;else if(!j)return c;return 1===f&&(g=j,j=function(c){return l().off(c),g.apply(this,arguments)},j.guid=g.guid||(g.guid=l.guid++)),c.each(function(){l.event.add(this,d,j,D,e)})}function Eb(c,d){return g(c,"table")&&
g(11!==d.nodeType?d:d.firstChild,"tr")?l(">tbody",c)[0]||c:c}function Hc(c){return c.type=(null!==c.getAttribute("type"))+"/"+c.type,c}function Ic(c){var d=Jc.exec(c.type);return d?c.type=d[1]:c.removeAttribute("type"),c}function Fb(c,d){var e,D,j,f,g,n;if(1===d.nodeType){if(E.hasData(c)&&(e=E.access(c),D=E.set(d,e),n=e.events))for(j in delete D.handle,D.events={},n){e=0;for(D=n[j].length;e<D;e++)l.event.add(d,j,n[j][e])}R.hasData(c)&&(f=R.access(c),g=l.extend({},f),R.set(d,g))}}function xa(c,d,H,
j){d=Gb.apply([],d);var f,g,n,p,m=0,q=c.length,s=q-1,t=d[0],r=l.isFunction(t);if(r||1<q&&"string"==typeof t&&!J.checkClone&&Kc.test(t))return c.each(function(e){var l=c.eq(e);r&&(d[0]=t.call(this,e,l.html()));xa(l,d,H,j)});if(q&&(f=G(d,c[0].ownerDocument,!1,c,j),g=f.firstChild,1===f.childNodes.length&&(f=g),g||j)){g=l.map(z(f,"script"),Hc);for(n=g.length;m<q;m++)p=f,m!==s&&(p=l.clone(p,!0,!0),n&&l.merge(g,z(p,"script"))),H.call(c[m],p,m);if(n){f=g[g.length-1].ownerDocument;l.map(g,Ic);for(m=0;m<n;m++)p=
g[m],Db.test(p.type||"")&&!E.access(p,"globalEval")&&l.contains(f,p)&&(p.src?l._evalUrl&&l._evalUrl(p.src):e(p.textContent.replace(Mc,""),f))}}return c}function Hb(c,d,e){for(var j=d?l.filter(d,c):c,f=0;null!=(d=j[f]);f++)e||1!==d.nodeType||l.cleanData(z(d)),d.parentNode&&(e&&l.contains(d.ownerDocument,d)&&I(z(d,"script")),d.parentNode.removeChild(d));return c}function Ga(c,d,e){var j,f,g,n,p=c.style;return e=e||Oa(c),e&&(n=e.getPropertyValue(d)||e[d],""!==n||l.contains(c.ownerDocument,c)||(n=l.style(c,
d)),!J.pixelMarginRight()&&hb.test(n)&&Ib.test(d)&&(j=p.width,f=p.minWidth,g=p.maxWidth,p.minWidth=p.maxWidth=p.width=n,n=e.width,p.width=j,p.minWidth=f,p.maxWidth=g)),void 0!==n?n+"":n}function Jb(c,d){return{get:function(){return c()?void delete this.get:(this.get=d).apply(this,arguments)}}}function Kb(c){var d=l.cssProps[c];if(!d){var d=l.cssProps,e;a:if(e=c,!(e in Lb)){for(var j=e[0].toUpperCase()+e.slice(1),f=Mb.length;f--;)if(e=Mb[f]+j,e in Lb)break a;e=void 0}d=d[c]=e||c}return d}function Nb(c,
d,e){return(c=Fa.exec(d))?Math.max(0,c[2]-(e||0))+(c[3]||"px"):d}function Ob(c,d,e,j,f){var g=0;for(d=e===(j?"border":"content")?4:"width"===d?1:0;4>d;d+=2)"margin"===e&&(g+=l.css(c,e+na[d],!0,f)),j?("content"===e&&(g-=l.css(c,"padding"+na[d],!0,f)),"margin"!==e&&(g-=l.css(c,"border"+na[d]+"Width",!0,f))):(g+=l.css(c,"padding"+na[d],!0,f),"padding"!==e&&(g+=l.css(c,"border"+na[d]+"Width",!0,f)));return g}function Pb(c,d,e){var j,f=Oa(c),g=Ga(c,d,f),n="border-box"===l.css(c,"boxSizing",!1,f);return hb.test(g)?
g:(j=n&&(J.boxSizingReliable()||g===c.style[d]),"auto"===g&&(g=c["offset"+d[0].toUpperCase()+d.slice(1)]),g=parseFloat(g)||0,g+Ob(c,d,e||(n?"border":"content"),j,f)+"px")}function S(c,d,e,j,f){return new S.prototype.init(c,d,e,j,f)}function ib(){Pa&&(!1===B.hidden&&c.requestAnimationFrame?c.requestAnimationFrame(ib):c.setTimeout(ib,l.fx.interval),l.fx.tick())}function Qb(){return c.setTimeout(function(){ya=void 0}),ya=l.now()}function Qa(c,d){var e,j=0,f={height:c};for(d=d?1:0;4>j;j+=2-d)e=na[j],
f["margin"+e]=f["padding"+e]=c;return d&&(f.opacity=f.width=c),f}function Rb(c,d,e){for(var j,f=(aa.tweeners[d]||[]).concat(aa.tweeners["*"]),l=0,g=f.length;l<g;l++)if(j=f[l].call(e,d,c))return j}function aa(c,d,e){var j,f,g=0,n=aa.prefilters.length,p=l.Deferred().always(function(){delete m.elem}),m=function(){if(f)return!1;for(var d=ya||Qb(),d=Math.max(0,q.startTime+q.duration-d),e=1-(d/q.duration||0),A=0,j=q.tweens.length;A<j;A++)q.tweens[A].run(e);return p.notifyWith(c,[q,e,d]),1>e&&j?d:(j||p.notifyWith(c,
[q,1,0]),p.resolveWith(c,[q]),!1)},q=p.promise({elem:c,props:l.extend({},d),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},e),originalProperties:d,originalOptions:e,startTime:ya||Qb(),duration:e.duration,tweens:[],createTween:function(d,e){var A=l.Tween(c,q.opts,d,e,q.opts.specialEasing[d]||q.opts.easing);return q.tweens.push(A),A},stop:function(d){var e=0,A=d?q.tweens.length:0;if(f)return this;for(f=!0;e<A;e++)q.tweens[e].run(1);return d?(p.notifyWith(c,[q,1,0]),p.resolveWith(c,[q,
d])):p.rejectWith(c,[q,d]),this}});d=q.props;e=q.opts.specialEasing;var s,t,r,x;for(j in d)if(s=l.camelCase(j),t=e[s],r=d[j],Array.isArray(r)&&(t=r[1],r=d[j]=r[0]),j!==s&&(d[s]=r,delete d[j]),x=l.cssHooks[s],x&&"expand"in x)for(j in r=x.expand(r),delete d[s],r)j in d||(d[j]=r[j],e[j]=t);else e[s]=t;for(;g<n;g++)if(j=aa.prefilters[g].call(q,c,d,q.opts))return l.isFunction(j.stop)&&(l._queueHooks(q.elem,q.opts.queue).stop=l.proxy(j.stop,j)),j;return l.map(d,Rb,q),l.isFunction(q.opts.start)&&q.opts.start.call(c,
q),q.progress(q.opts.progress).done(q.opts.done,q.opts.complete).fail(q.opts.fail).always(q.opts.always),l.fx.timer(l.extend(m,{elem:c,anim:q,queue:q.opts.queue})),q}function oa(c){return(c.match(W)||[]).join(" ")}function pa(c){return c.getAttribute&&c.getAttribute("class")||""}function jb(c,d,e,j){var f;if(Array.isArray(d))l.each(d,function(d,A){e||Nc.test(c)?j(c,A):jb(c+"["+("object"==typeof A&&null!=A?d:"")+"]",A,e,j)});else if(e||"object"!==l.type(d))j(c,d);else for(f in d)jb(c+"["+f+"]",d[f],
e,j)}function Sb(c){return function(d,e){"string"!=typeof d&&(e=d,d="*");var j,f=0,g=d.toLowerCase().match(W)||[];if(l.isFunction(e))for(;j=g[f++];)"+"===j[0]?(j=j.slice(1)||"*",(c[j]=c[j]||[]).unshift(e)):(c[j]=c[j]||[]).push(e)}}function Tb(c,d,e,j){function f(p){var m;return g[p]=!0,l.each(c[p]||[],function(c,y){var l=y(d,e,j);return"string"!=typeof l||n||g[l]?n?!(m=l):void 0:(d.dataTypes.unshift(l),f(l),!1)}),m}var g={},n=c===kb;return f(d.dataTypes[0])||!g["*"]&&f("*")}function lb(c,d){var e,
j,f=l.ajaxSettings.flatOptions||{};for(e in d)void 0!==d[e]&&((f[e]?c:j||(j={}))[e]=d[e]);return j&&l.extend(!0,c,j),c}var qa=[],B=c.document,Oc=Object.getPrototypeOf,ra=qa.slice,Gb=qa.concat,mb=qa.push,Da=qa.indexOf,Ra={},Ub=Ra.toString,Sa=Ra.hasOwnProperty,Vb=Sa.toString,Pc=Vb.call(Object),J={},l=function(c,d){return new l.fn.init(c,d)},Qc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Rc=/^-ms-/,Sc=/-([a-z])/g,Tc=function(c,d){return d.toUpperCase()};l.fn=l.prototype={jquery:"3.2.1",constructor:l,length:0,
toArray:function(){return ra.call(this)},get:function(c){return null==c?ra.call(this):0>c?this[c+this.length]:this[c]},pushStack:function(c){c=l.merge(this.constructor(),c);return c.prevObject=this,c},each:function(c){return l.each(this,c)},map:function(c){return this.pushStack(l.map(this,function(d,e){return c.call(d,e,d)}))},slice:function(){return this.pushStack(ra.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(c){var d=this.length;c=
+c+(0>c?d:0);return this.pushStack(0<=c&&c<d?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:mb,sort:qa.sort,splice:qa.splice};l.extend=l.fn.extend=function(){var c,d,e,j,f,g,n=arguments[0]||{},p=1,m=arguments.length,q=!1;"boolean"==typeof n&&(q=n,n=arguments[p]||{},p++);"object"==typeof n||l.isFunction(n)||(n={});for(p===m&&(n=this,p--);p<m;p++)if(null!=(c=arguments[p]))for(d in c)e=n[d],j=c[d],n!==j&&(q&&j&&(l.isPlainObject(j)||(f=Array.isArray(j)))?(f?(f=!1,g=e&&
Array.isArray(e)?e:[]):g=e&&l.isPlainObject(e)?e:{},n[d]=l.extend(q,g,j)):void 0!==j&&(n[d]=j));return n};l.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(c){throw Error(c);},noop:function(){},isFunction:function(c){return"function"===l.type(c)},isWindow:function(c){return null!=c&&c===c.window},isNumeric:function(c){var d=l.type(c);return("number"===d||"string"===d)&&!isNaN(c-parseFloat(c))},isPlainObject:function(c){var d,e;return!(!c||"[object Object]"!==
Ub.call(c))&&(!(d=Oc(c))||(e=Sa.call(d,"constructor")&&d.constructor,"function"==typeof e&&Vb.call(e)===Pc))},isEmptyObject:function(c){for(var d in c)return!1;return!0},type:function(c){return null==c?c+"":"object"==typeof c||"function"==typeof c?Ra[Ub.call(c)]||"object":typeof c},globalEval:function(c){e(c)},camelCase:function(c){return c.replace(Rc,"ms-").replace(Sc,Tc)},each:function(c,d){var e,j=0;if(f(c))for(e=c.length;j<e&&!1!==d.call(c[j],j,c[j]);j++);else for(j in c)if(!1===d.call(c[j],j,
c[j]))break;return c},trim:function(c){return null==c?"":(c+"").replace(Qc,"")},makeArray:function(c,d){var e=d||[];return null!=c&&(f(Object(c))?l.merge(e,"string"==typeof c?[c]:c):mb.call(e,c)),e},inArray:function(c,d,e){return null==d?-1:Da.call(d,c,e)},merge:function(c,d){for(var e=+d.length,j=0,f=c.length;j<e;j++)c[f++]=d[j];return c.length=f,c},grep:function(c,d,e){for(var j=[],f=0,l=c.length,g=!e;f<l;f++)e=!d(c[f],f),e!==g&&j.push(c[f]);return j},map:function(c,d,e){var j,l,g=0,n=[];if(f(c))for(j=
c.length;g<j;g++)l=d(c[g],g,e),null!=l&&n.push(l);else for(g in c)l=d(c[g],g,e),null!=l&&n.push(l);return Gb.apply([],n)},guid:1,proxy:function(c,d){var e,j,f;if("string"==typeof d&&(e=c[d],d=c,c=e),l.isFunction(c))return j=ra.call(arguments,2),f=function(){return c.apply(d||this,j.concat(ra.call(arguments)))},f.guid=c.guid=c.guid||l.guid++,f},now:Date.now,support:J});"function"==typeof Symbol&&(l.fn[Symbol.iterator]=qa[Symbol.iterator]);l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(c,d){Ra["[object "+d+"]"]=d.toLowerCase()});var ia,nb=c,F=function(c,d,e,j){var f,l,g,n,p,m=d&&d.ownerDocument,q=d?d.nodeType:9;if(e=e||[],"string"!=typeof c||!c||1!==q&&9!==q&&11!==q)return e;if(!j&&((d?d.ownerDocument||d:X)!==K&&ja(d),d=d||K,Y)){if(11!==q&&(n=Uc.exec(c)))if(f=n[1])if(9===q){if(!(l=d.getElementById(f)))return e;if(l.id===f)return e.push(l),e}else{if(m&&(l=m.getElementById(f))&&Ha(d,l)&&l.id===f)return e.push(l),e}else{if(n[2])return ka.apply(e,d.getElementsByTagName(c)),
e;if((f=n[3])&&N.getElementsByClassName&&d.getElementsByClassName)return ka.apply(e,d.getElementsByClassName(f)),e}if(N.qsa&&!Ta[c+" "]&&(!P||!P.test(c))){if(1!==q)m=d,p=c;else if("object"!==d.nodeName.toLowerCase()){(g=d.getAttribute("id"))?g=g.replace(Wb,Xb):d.setAttribute("id",g=O);l=Ia(c);for(f=l.length;f--;)l[f]="#"+g+" "+Ua(l[f]);p=l.join(",");m=ob.test(c)&&pb(d.parentNode)||d}if(p)try{return ka.apply(e,m.querySelectorAll(p)),e}catch(s){}finally{g===O&&d.removeAttribute("id")}}}return Yb(c.replace(Va,
"$1"),d,e,j)},qb=function(){function c(e,j){return d.push(e+" ")>C.cacheLength&&delete c[d.shift()],c[e+" "]=j}var d=[];return c},ba=function(c){return c[O]=!0,c},da=function(c){var d=K.createElement("fieldset");try{return!!c(d)}catch(e){return!1}finally{d.parentNode&&d.parentNode.removeChild(d)}},rb=function(c,d){for(var e=c.split("|"),j=e.length;j--;)C.attrHandle[e[j]]=d},Zb=function(c,d){var e=d&&c,j=e&&1===c.nodeType&&1===d.nodeType&&c.sourceIndex-d.sourceIndex;if(j)return j;if(e)for(;e=e.nextSibling;)if(e===
d)return-1;return c?1:-1},Vc=function(c){return function(d){return"input"===d.nodeName.toLowerCase()&&d.type===c}},Wc=function(c){return function(d){var e=d.nodeName.toLowerCase();return("input"===e||"button"===e)&&d.type===c}},$b=function(c){return function(d){return"form"in d?d.parentNode&&!1===d.disabled?"label"in d?"label"in d.parentNode?d.parentNode.disabled===c:d.disabled===c:d.isDisabled===c||d.isDisabled!==!c&&Xc(d)===c:d.disabled===c:"label"in d&&d.disabled===c}},sa=function(c){return ba(function(d){return d=
+d,ba(function(e,j){for(var f,l=c([],e.length,d),g=l.length;g--;)e[f=l[g]]&&(e[f]=!(j[f]=e[f]))})})},pb=function(c){return c&&"undefined"!=typeof c.getElementsByTagName&&c},ac=function(){},Ua=function(c){for(var d=0,e=c.length,j="";d<e;d++)j+=c[d].value;return j},Wa=function(c,d,e){var j=d.dir,f=d.next,l=f||j,g=e&&"parentNode"===l,n=Yc++;return d.first?function(d,e,A){for(;d=d[j];)if(1===d.nodeType||g)return c(d,e,A);return!1}:function(d,e,A){var H,p,m,q=[ea,n];if(A)for(;d=d[j];){if((1===d.nodeType||
g)&&c(d,e,A))return!0}else for(;d=d[j];)if(1===d.nodeType||g)if(m=d[O]||(d[O]={}),p=m[d.uniqueID]||(m[d.uniqueID]={}),f&&f===d.nodeName.toLowerCase())d=d[j]||d;else{if((H=p[l])&&H[0]===ea&&H[1]===n)return q[2]=H[2];if(p[l]=q,q[2]=c(d,e,A))return!0}return!1}},sb=function(c){return 1<c.length?function(d,e,j){for(var f=c.length;f--;)if(!c[f](d,e,j))return!1;return!0}:c[0]},Xa=function(c,d,e,j,f){for(var l,g=[],n=0,p=c.length,m=null!=d;n<p;n++)(l=c[n])&&(e&&!e(l,j,f)||(g.push(l),m&&d.push(n)));return g},
tb=function(c,d,e,j,f,l){return j&&!j[O]&&(j=tb(j)),f&&!f[O]&&(f=tb(f,l)),ba(function(l,g,n,p){var m,q,Ea=[],s=[],t=g.length,r;if(!(r=l)){r=d||"*";for(var x=n.nodeType?[n]:n,u=[],z=0,E=x.length;z<E;z++)F(r,x[z],u);r=u}r=!c||!l&&d?r:Xa(r,Ea,c,n,p);x=e?f||(l?c:t||j)?[]:g:r;if(e&&e(r,x,n,p),j){m=Xa(x,s);j(m,[],n,p);for(n=m.length;n--;)(q=m[n])&&(x[s[n]]=!(r[s[n]]=q))}if(l){if(f||c){if(f){m=[];for(n=x.length;n--;)(q=x[n])&&m.push(r[n]=q);f(null,x=[],m,p)}for(n=x.length;n--;)(q=x[n])&&-1<(m=f?ta(l,q):
Ea[n])&&(l[m]=!(g[m]=q))}}else x=Xa(x===g?x.splice(t,x.length):x),f?f(null,g,x,p):ka.apply(g,x)})},ub=function(c){var d,e,j,f=c.length,l=C.relative[c[0].type];e=l||C.relative[" "];for(var g=l?1:0,n=Wa(function(c){return c===d},e,!0),p=Wa(function(c){return-1<ta(d,c)},e,!0),m=[function(c,e,y){c=!l&&(y||e!==Ya)||((d=e).nodeType?n(c,e,y):p(c,e,y));return d=null,c}];g<f;g++)if(e=C.relative[c[g].type])m=[Wa(sb(m),e)];else{if(e=C.filter[c[g].type].apply(null,c[g].matches),e[O]){for(j=++g;j<f&&!C.relative[c[j].type];j++);
return tb(1<g&&sb(m),1<g&&Ua(c.slice(0,g-1).concat({value:" "===c[g-2].type?"*":""})).replace(Va,"$1"),e,g<j&&ub(c.slice(g,j)),j<f&&ub(c=c.slice(j)),j<f&&Ua(c))}m.push(e)}return sb(m)},za,N,C,Za,bc,Ia,vb,Yb,Ya,la,Aa,ja,K,Z,Y,P,ua,$a,Ha,O="sizzle"+1*new Date,X=nb.document,ea=0,Yc=0,cc=qb(),dc=qb(),Ta=qb(),wb=function(c,d){return c===d&&(Aa=!0),0},Zc={}.hasOwnProperty,va=[],$c=va.pop,ad=va.push,ka=va.push,ec=va.slice,ta=function(c,d){for(var e=0,j=c.length;e<j;e++)if(c[e]===d)return e;return-1},bd=
/[\x20\t\r\n\f]+/g,Va=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,cd=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,dd=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ed=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,fd=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
gd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,ab={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},hd=/^(?:input|select|textarea|button)$/i,id=/^h\d$/i,Ja=/^[^{]+\{\s*\[native \w/,Uc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ob=/[+~]/,fa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ga=function(c,d,e){c="0x"+d-65536;return c!==c||e?d:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,1023&c|56320)},Wb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Xb=function(c,d){return d?"\x00"===c?"\ufffd":c.slice(0,-1)+"\\"+c.charCodeAt(c.length-1).toString(16)+" ":"\\"+c},fc=function(){ja()},
Xc=Wa(function(c){return!0===c.disabled&&("form"in c||"label"in c)},{dir:"parentNode",next:"legend"});try{ka.apply(va=ec.call(X.childNodes),X.childNodes),va[X.childNodes.length].nodeType}catch(Ld){ka={apply:va.length?function(c,d){ad.apply(c,ec.call(d))}:function(c,d){for(var e=c.length,j=0;c[e++]=d[j++];);c.length=e-1}}}N=F.support={};bc=F.isXML=function(c){c=c&&(c.ownerDocument||c).documentElement;return!!c&&"HTML"!==c.nodeName};ja=F.setDocument=function(c){var d,e;c=c?c.ownerDocument||c:X;return c!==
K&&9===c.nodeType&&c.documentElement?(K=c,Z=K.documentElement,Y=!bc(K),X!==K&&(e=K.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",fc,!1):e.attachEvent&&e.attachEvent("onunload",fc)),N.attributes=da(function(c){return c.className="i",!c.getAttribute("className")}),N.getElementsByTagName=da(function(c){return c.appendChild(K.createComment("")),!c.getElementsByTagName("*").length}),N.getElementsByClassName=Ja.test(K.getElementsByClassName),N.getById=da(function(c){return Z.appendChild(c).id=
O,!K.getElementsByName||!K.getElementsByName(O).length}),N.getById?(C.filter.ID=function(c){var d=c.replace(fa,ga);return function(c){return c.getAttribute("id")===d}},C.find.ID=function(c,d){if("undefined"!=typeof d.getElementById&&Y){var e=d.getElementById(c);return e?[e]:[]}}):(C.filter.ID=function(c){var d=c.replace(fa,ga);return function(c){return(c="undefined"!=typeof c.getAttributeNode&&c.getAttributeNode("id"))&&c.value===d}},C.find.ID=function(c,d){if("undefined"!=typeof d.getElementById&&
Y){var e,y,j,A=d.getElementById(c);if(A){if(e=A.getAttributeNode("id"),e&&e.value===c)return[A];j=d.getElementsByName(c);for(y=0;A=j[y++];)if(e=A.getAttributeNode("id"),e&&e.value===c)return[A]}return[]}}),C.find.TAG=N.getElementsByTagName?function(c,d){return"undefined"!=typeof d.getElementsByTagName?d.getElementsByTagName(c):N.qsa?d.querySelectorAll(c):void 0}:function(c,d){var e,y=[],j=0,A=d.getElementsByTagName(c);if("*"===c){for(;e=A[j++];)1===e.nodeType&&y.push(e);return y}return A},C.find.CLASS=
N.getElementsByClassName&&function(c,d){if("undefined"!=typeof d.getElementsByClassName&&Y)return d.getElementsByClassName(c)},ua=[],P=[],(N.qsa=Ja.test(K.querySelectorAll))&&(da(function(c){Z.appendChild(c).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\r\\' msallowcapture=''><option selected=''></option></select>";c.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");c.querySelectorAll("[selected]").length||P.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
c.querySelectorAll("[id~="+O+"-]").length||P.push("~=");c.querySelectorAll(":checked").length||P.push(":checked");c.querySelectorAll("a#"+O+"+*").length||P.push(".#.+[+~]")}),da(function(c){c.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var d=K.createElement("input");d.setAttribute("type","hidden");c.appendChild(d).setAttribute("name","D");c.querySelectorAll("[name=d]").length&&P.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==c.querySelectorAll(":enabled").length&&
P.push(":enabled",":disabled");Z.appendChild(c).disabled=!0;2!==c.querySelectorAll(":disabled").length&&P.push(":enabled",":disabled");c.querySelectorAll("*,:x");P.push(",.*:")})),(N.matchesSelector=Ja.test($a=Z.matches||Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector||Z.msMatchesSelector))&&da(function(c){N.disconnectedMatch=$a.call(c,"*");$a.call(c,"[s!='']:x");ua.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
P=P.length&&RegExp(P.join("|")),ua=ua.length&&RegExp(ua.join("|")),d=Ja.test(Z.compareDocumentPosition),Ha=d||Ja.test(Z.contains)?function(c,d){var e=9===c.nodeType?c.documentElement:c,y=d&&d.parentNode;return c===y||!(!y||1!==y.nodeType||!(e.contains?e.contains(y):c.compareDocumentPosition&&16&c.compareDocumentPosition(y)))}:function(c,d){if(d)for(;d=d.parentNode;)if(d===c)return!0;return!1},wb=d?function(c,d){if(c===d)return Aa=!0,0;var e=!c.compareDocumentPosition-!d.compareDocumentPosition;return e?
e:(e=(c.ownerDocument||c)===(d.ownerDocument||d)?c.compareDocumentPosition(d):1,1&e||!N.sortDetached&&d.compareDocumentPosition(c)===e?c===K||c.ownerDocument===X&&Ha(X,c)?-1:d===K||d.ownerDocument===X&&Ha(X,d)?1:la?ta(la,c)-ta(la,d):0:4&e?-1:1)}:function(c,d){if(c===d)return Aa=!0,0;var e,y=0;e=c.parentNode;var j=d.parentNode,A=[c],f=[d];if(!e||!j)return c===K?-1:d===K?1:e?-1:j?1:la?ta(la,c)-ta(la,d):0;if(e===j)return Zb(c,d);for(e=c;e=e.parentNode;)A.unshift(e);for(e=d;e=e.parentNode;)f.unshift(e);
for(;A[y]===f[y];)y++;return y?Zb(A[y],f[y]):A[y]===X?-1:f[y]===X?1:0},K):K};F.matches=function(c,d){return F(c,null,null,d)};F.matchesSelector=function(c,d){if((c.ownerDocument||c)!==K&&ja(c),d=d.replace(ed,"='$1']"),N.matchesSelector&&Y&&!Ta[d+" "]&&(!ua||!ua.test(d))&&(!P||!P.test(d)))try{var e=$a.call(c,d);if(e||N.disconnectedMatch||c.document&&11!==c.document.nodeType)return e}catch(j){}return 0<F(d,K,null,[c]).length};F.contains=function(c,d){return(c.ownerDocument||c)!==K&&ja(c),Ha(c,d)};F.attr=
function(c,d){(c.ownerDocument||c)!==K&&ja(c);var e=C.attrHandle[d.toLowerCase()],e=e&&Zc.call(C.attrHandle,d.toLowerCase())?e(c,d,!Y):void 0;return void 0!==e?e:N.attributes||!Y?c.getAttribute(d):(e=c.getAttributeNode(d))&&e.specified?e.value:null};F.escape=function(c){return(c+"").replace(Wb,Xb)};F.error=function(c){throw Error("Syntax error, unrecognized expression: "+c);};F.uniqueSort=function(c){var d,e=[],j=0,f=0;if(Aa=!N.detectDuplicates,la=!N.sortStable&&c.slice(0),c.sort(wb),Aa){for(;d=c[f++];)d===
c[f]&&(j=e.push(f));for(;j--;)c.splice(e[j],1)}return la=null,c};Za=F.getText=function(c){var d,e="",j=0;if(d=c.nodeType)if(1===d||9===d||11===d){if("string"==typeof c.textContent)return c.textContent;for(c=c.firstChild;c;c=c.nextSibling)e+=Za(c)}else{if(3===d||4===d)return c.nodeValue}else for(;d=c[j++];)e+=Za(d);return e};C=F.selectors={cacheLength:50,createPseudo:ba,match:ab,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},
"~":{dir:"previousSibling"}},preFilter:{ATTR:function(c){return c[1]=c[1].replace(fa,ga),c[3]=(c[3]||c[4]||c[5]||"").replace(fa,ga),"~="===c[2]&&(c[3]=" "+c[3]+" "),c.slice(0,4)},CHILD:function(c){return c[1]=c[1].toLowerCase(),"nth"===c[1].slice(0,3)?(c[3]||F.error(c[0]),c[4]=+(c[4]?c[5]+(c[6]||1):2*("even"===c[3]||"odd"===c[3])),c[5]=+(c[7]+c[8]||"odd"===c[3])):c[3]&&F.error(c[0]),c},PSEUDO:function(c){var d,e=!c[6]&&c[2];return ab.CHILD.test(c[0])?null:(c[3]?c[2]=c[4]||c[5]||"":e&&fd.test(e)&&
(d=Ia(e,!0))&&(d=e.indexOf(")",e.length-d)-e.length)&&(c[0]=c[0].slice(0,d),c[2]=e.slice(0,d)),c.slice(0,3))}},filter:{TAG:function(c){var d=c.replace(fa,ga).toLowerCase();return"*"===c?function(){return!0}:function(c){return c.nodeName&&c.nodeName.toLowerCase()===d}},CLASS:function(c){var d=cc[c+" "];return d||(d=RegExp("(^|[\\x20\\t\\r\\n\\f])"+c+"([\\x20\\t\\r\\n\\f]|$)"))&&cc(c,function(c){return d.test("string"==typeof c.className&&c.className||"undefined"!=typeof c.getAttribute&&c.getAttribute("class")||
"")})},ATTR:function(c,d,e){return function(j){j=F.attr(j,c);return null==j?"!="===d:!d||(j+="","="===d?j===e:"!="===d?j!==e:"^="===d?e&&0===j.indexOf(e):"*="===d?e&&-1<j.indexOf(e):"$="===d?e&&j.slice(-e.length)===e:"~="===d?-1<(" "+j.replace(bd," ")+" ").indexOf(e):"|="===d&&(j===e||j.slice(0,e.length+1)===e+"-"))}},CHILD:function(c,d,e,j,f){var l="nth"!==c.slice(0,3),g="last"!==c.slice(-4),n="of-type"===d;return 1===j&&0===f?function(c){return!!c.parentNode}:function(d,e,A){var H,p,m,q,s,t;e=l!==
g?"nextSibling":"previousSibling";var r=d.parentNode,x=n&&d.nodeName.toLowerCase();A=!A&&!n;var u=!1;if(r){if(l){for(;e;){for(q=d;q=q[e];)if(n?q.nodeName.toLowerCase()===x:1===q.nodeType)return!1;t=e="only"===c&&!t&&"nextSibling"}return!0}if(t=[g?r.firstChild:r.lastChild],g&&A){q=r;m=q[O]||(q[O]={});p=m[q.uniqueID]||(m[q.uniqueID]={});H=p[c]||[];u=(s=H[0]===ea&&H[1])&&H[2];for(q=s&&r.childNodes[s];q=++s&&q&&q[e]||(u=s=0)||t.pop();)if(1===q.nodeType&&++u&&q===d){p[c]=[ea,s,u];break}}else if(A&&(q=
d,m=q[O]||(q[O]={}),p=m[q.uniqueID]||(m[q.uniqueID]={}),H=p[c]||[],s=H[0]===ea&&H[1],u=s),!1===u)for(;(q=++s&&q&&q[e]||(u=s=0)||t.pop())&&(!(n?q.nodeName.toLowerCase()===x:1===q.nodeType)||!++u||!(A&&(m=q[O]||(q[O]={}),p=m[q.uniqueID]||(m[q.uniqueID]={}),p[c]=[ea,u]),q===d)););return u-=f,u===j||0===u%j&&0<=u/j}}},PSEUDO:function(c,d){var e,j=C.pseudos[c]||C.setFilters[c.toLowerCase()]||F.error("unsupported pseudo: "+c);return j[O]?j(d):1<j.length?(e=[c,c,"",d],C.setFilters.hasOwnProperty(c.toLowerCase())?
ba(function(c,e){for(var y,f=j(c,d),l=f.length;l--;)y=ta(c,f[l]),c[y]=!(e[y]=f[l])}):function(c){return j(c,0,e)}):j}},pseudos:{not:ba(function(c){var d=[],e=[],j=vb(c.replace(Va,"$1"));return j[O]?ba(function(c,d,e,y){var A;e=j(c,null,y,[]);for(y=c.length;y--;)(A=e[y])&&(c[y]=!(d[y]=A))}):function(c,y,f){return d[0]=c,j(d,null,f,e),d[0]=null,!e.pop()}}),has:ba(function(c){return function(d){return 0<F(c,d).length}}),contains:ba(function(c){return c=c.replace(fa,ga),function(d){return-1<(d.textContent||
d.innerText||Za(d)).indexOf(c)}}),lang:ba(function(c){return gd.test(c||"")||F.error("unsupported lang: "+c),c=c.replace(fa,ga).toLowerCase(),function(d){var e;do if(e=Y?d.lang:d.getAttribute("xml:lang")||d.getAttribute("lang"))return e=e.toLowerCase(),e===c||0===e.indexOf(c+"-");while((d=d.parentNode)&&1===d.nodeType);return!1}}),target:function(c){var d=nb.location&&nb.location.hash;return d&&d.slice(1)===c.id},root:function(c){return c===Z},focus:function(c){return c===K.activeElement&&(!K.hasFocus||
K.hasFocus())&&!(!c.type&&!c.href&&!~c.tabIndex)},enabled:$b(!1),disabled:$b(!0),checked:function(c){var d=c.nodeName.toLowerCase();return"input"===d&&!!c.checked||"option"===d&&!!c.selected},selected:function(c){return c.parentNode&&c.parentNode.selectedIndex,!0===c.selected},empty:function(c){for(c=c.firstChild;c;c=c.nextSibling)if(6>c.nodeType)return!1;return!0},parent:function(c){return!C.pseudos.empty(c)},header:function(c){return id.test(c.nodeName)},input:function(c){return hd.test(c.nodeName)},
button:function(c){var d=c.nodeName.toLowerCase();return"input"===d&&"button"===c.type||"button"===d},text:function(c){var d;return"input"===c.nodeName.toLowerCase()&&"text"===c.type&&(null==(d=c.getAttribute("type"))||"text"===d.toLowerCase())},first:sa(function(){return[0]}),last:sa(function(c,d){return[d-1]}),eq:sa(function(c,d,e){return[0>e?e+d:e]}),even:sa(function(c,d){for(var e=0;e<d;e+=2)c.push(e);return c}),odd:sa(function(c,d){for(var e=1;e<d;e+=2)c.push(e);return c}),lt:sa(function(c,d,
e){for(d=0>e?e+d:e;0<=--d;)c.push(d);return c}),gt:sa(function(c,d,e){for(e=0>e?e+d:e;++e<d;)c.push(e);return c})}};C.pseudos.nth=C.pseudos.eq;for(za in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[za]=Vc(za);for(za in{submit:!0,reset:!0})C.pseudos[za]=Wc(za);ac.prototype=C.filters=C.pseudos;C.setFilters=new ac;Ia=F.tokenize=function(c,d){var e,j,f,l,g,n,p;if(g=dc[c+" "])return d?0:g.slice(0);g=c;n=[];for(p=C.preFilter;g;){e&&!(j=cd.exec(g))||(j&&(g=g.slice(j[0].length)||g),n.push(f=
[]));e=!1;(j=dd.exec(g))&&(e=j.shift(),f.push({value:e,type:j[0].replace(Va," ")}),g=g.slice(e.length));for(l in C.filter)!(j=ab[l].exec(g))||p[l]&&!(j=p[l](j))||(e=j.shift(),f.push({value:e,type:l,matches:j}),g=g.slice(e.length));if(!e)break}return d?g.length:g?F.error(c):dc(c,n).slice(0)};ia=(vb=F.compile=function(c,d){var e,j=[],f=[],l=Ta[c+" "];if(!l){d||(d=Ia(c));for(e=d.length;e--;)l=ub(d[e]),l[O]?j.push(l):f.push(l);e=Ta;var g=0<j.length,n=0<f.length,l=function(c,d,e,y,l){var A,H,p,m=0,q="0",
s=c&&[],t=[],Ea=Ya,r=c||n&&C.find.TAG("*",l),x=ea+=null==Ea?1:Math.random()||0.1,u=r.length;for(l&&(Ya=d===K||d||l);q!==u&&null!=(A=r[q]);q++){if(n&&A){H=0;for(d||A.ownerDocument===K||(ja(A),e=!Y);p=f[H++];)if(p(A,d||K,e)){y.push(A);break}l&&(ea=x)}g&&((A=!p&&A)&&m--,c&&s.push(A))}if(m+=q,g&&q!==m){for(H=0;p=j[H++];)p(s,t,d,e);if(c){if(0<m)for(;q--;)s[q]||t[q]||(t[q]=$c.call(y));t=Xa(t)}ka.apply(y,t);l&&!c&&0<t.length&&1<m+j.length&&F.uniqueSort(y)}return l&&(ea=x,Ya=Ea),s},l=g?ba(l):l,l=e(c,l);l.selector=
c}return l},Yb=F.select=function(c,d,e,j){var f,l,g,n,p,q="function"==typeof c&&c,m=!j&&Ia(c=q.selector||c);if(e=e||[],1===m.length){if(l=m[0]=m[0].slice(0),2<l.length&&"ID"===(g=l[0]).type&&9===d.nodeType&&Y&&C.relative[l[1].type]){if(d=(C.find.ID(g.matches[0].replace(fa,ga),d)||[])[0],!d)return e;q&&(d=d.parentNode);c=c.slice(l.shift().value.length)}for(f=ab.needsContext.test(c)?0:l.length;f--&&!(g=l[f],C.relative[n=g.type]);)if((p=C.find[n])&&(j=p(g.matches[0].replace(fa,ga),ob.test(l[0].type)&&
pb(d.parentNode)||d))){if(l.splice(f,1),c=j.length&&Ua(l),!c)return ka.apply(e,j),e;break}}return(q||vb(c,m))(j,d,!Y,e,!d||ob.test(c)&&pb(d.parentNode)||d),e},N.sortStable=O.split("").sort(wb).join("")===O,N.detectDuplicates=!!Aa,ja(),N.sortDetached=da(function(c){return 1&c.compareDocumentPosition(K.createElement("fieldset"))}),da(function(c){return c.innerHTML="<a href='#'></a>","#"===c.firstChild.getAttribute("href")})||rb("type|href|height|width",function(c,d,e){if(!e)return c.getAttribute(d,
"type"===d.toLowerCase()?1:2)}),N.attributes&&da(function(c){return c.innerHTML="<input/>",c.firstChild.setAttribute("value",""),""===c.firstChild.getAttribute("value")})||rb("value",function(c,d,e){if(!e&&"input"===c.nodeName.toLowerCase())return c.defaultValue}),da(function(c){return null==c.getAttribute("disabled")})||rb("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(c,d,e){var j;if(!e)return!0===c[d]?d.toLowerCase():
(j=c.getAttributeNode(d))&&j.specified?j.value:null}),F);l.find=ia;l.expr=ia.selectors;l.expr[":"]=l.expr.pseudos;l.uniqueSort=l.unique=ia.uniqueSort;l.text=ia.getText;l.isXMLDoc=ia.isXML;l.contains=ia.contains;l.escapeSelector=ia.escape;var Ba=function(c,d,e){for(var j=[],f=void 0!==e;(c=c[d])&&9!==c.nodeType;)if(1===c.nodeType){if(f&&l(c).is(e))break;j.push(c)}return j},gc=function(c,d){for(var e=[];c;c=c.nextSibling)1===c.nodeType&&c!==d&&e.push(c);return e},hc=l.expr.match.needsContext,ic=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Dc=/^.[^:#\[\.,]*$/;l.filter=function(c,d,e){var j=d[0];return e&&(c=":not("+c+")"),1===d.length&&1===j.nodeType?l.find.matchesSelector(j,c)?[j]:[]:l.find.matches(c,l.grep(d,function(c){return 1===c.nodeType}))};l.fn.extend({find:function(c){var d,e,j=this.length,f=this;if("string"!=typeof c)return this.pushStack(l(c).filter(function(){for(d=0;d<j;d++)if(l.contains(f[d],this))return!0}));e=this.pushStack([]);for(d=0;d<j;d++)l.find(c,f[d],e);return 1<j?l.uniqueSort(e):e},filter:function(c){return this.pushStack(m(this,
c||[],!1))},not:function(c){return this.pushStack(m(this,c||[],!0))},is:function(c){return!!m(this,"string"==typeof c&&hc.test(c)?l(c):c||[],!1).length}});var jc,jd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(l.fn.init=function(c,d,e){var j,f;if(!c)return this;if(e=e||jc,"string"==typeof c){if(j="<"===c[0]&&">"===c[c.length-1]&&3<=c.length?[null,c,null]:jd.exec(c),!j||!j[1]&&d)return!d||d.jquery?(d||e).find(c):this.constructor(d).find(c);if(j[1]){if(d=d instanceof l?d[0]:d,l.merge(this,l.parseHTML(j[1],
d&&d.nodeType?d.ownerDocument||d:B,!0)),ic.test(j[1])&&l.isPlainObject(d))for(j in d)l.isFunction(this[j])?this[j](d[j]):this.attr(j,d[j]);return this}return f=B.getElementById(j[2]),f&&(this[0]=f,this.length=1),this}return c.nodeType?(this[0]=c,this.length=1,this):l.isFunction(c)?void 0!==e.ready?e.ready(c):c(l):l.makeArray(c,this)}).prototype=l.fn;jc=l(B);var kd=/^(?:parents|prev(?:Until|All))/,ld={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(c){var d=l(c,this),e=d.length;
return this.filter(function(){for(var c=0;c<e;c++)if(l.contains(this,d[c]))return!0})},closest:function(c,d){var e,j=0,f=this.length,g=[],n="string"!=typeof c&&l(c);if(!hc.test(c))for(;j<f;j++)for(e=this[j];e&&e!==d;e=e.parentNode)if(11>e.nodeType&&(n?-1<n.index(e):1===e.nodeType&&l.find.matchesSelector(e,c))){g.push(e);break}return this.pushStack(1<g.length?l.uniqueSort(g):g)},index:function(c){return c?"string"==typeof c?Da.call(l(c),this[0]):Da.call(this,c.jquery?c[0]:c):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(c,d){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(c,d))))},addBack:function(c){return this.add(null==c?this.prevObject:this.prevObject.filter(c))}});l.each({parent:function(c){return(c=c.parentNode)&&11!==c.nodeType?c:null},parents:function(c){return Ba(c,"parentNode")},parentsUntil:function(c,d,e){return Ba(c,"parentNode",e)},next:function(c){return r(c,"nextSibling")},prev:function(c){return r(c,"previousSibling")},nextAll:function(c){return Ba(c,
"nextSibling")},prevAll:function(c){return Ba(c,"previousSibling")},nextUntil:function(c,d,e){return Ba(c,"nextSibling",e)},prevUntil:function(c,d,e){return Ba(c,"previousSibling",e)},siblings:function(c){return gc((c.parentNode||{}).firstChild,c)},children:function(c){return gc(c.firstChild)},contents:function(c){return g(c,"iframe")?c.contentDocument:(g(c,"template")&&(c=c.content||c),l.merge([],c.childNodes))}},function(c,d){l.fn[c]=function(e,j){var f=l.map(this,d,e);return"Until"!==c.slice(-5)&&
(j=e),j&&"string"==typeof j&&(f=l.filter(j,f)),1<this.length&&(ld[c]||l.uniqueSort(f),kd.test(c)&&f.reverse()),this.pushStack(f)}});var W=/[^\x20\t\r\n\f]+/g;l.Callbacks=function(c){var d;if("string"==typeof c){var e={};d=(l.each(c.match(W)||[],function(c,d){e[d]=!0}),e)}else d=l.extend({},c);c=d;var j,f,g,n,p=[],q=[],m=-1,s=function(){n=n||c.once;for(g=j=!0;q.length;m=-1)for(f=q.shift();++m<p.length;)!1===p[m].apply(f[0],f[1])&&c.stopOnFalse&&(m=p.length,f=!1);c.memory||(f=!1);j=!1;n&&(p=f?[]:"")},
t={add:function(){return p&&(f&&!j&&(m=p.length-1,q.push(f)),function Lc(d){l.each(d,function(d,e){l.isFunction(e)?c.unique&&t.has(e)||p.push(e):e&&e.length&&"string"!==l.type(e)&&Lc(e)})}(arguments),f&&!j&&s()),this},remove:function(){return l.each(arguments,function(c,d){for(var e;-1<(e=l.inArray(d,p,e));)p.splice(e,1),e<=m&&m--}),this},has:function(c){return c?-1<l.inArray(c,p):0<p.length},empty:function(){return p&&(p=[]),this},disable:function(){return n=q=[],p=f="",this},disabled:function(){return!p},
lock:function(){return n=q=[],f||j||(p=f=""),this},locked:function(){return!!n},fireWith:function(c,d){return n||(d=d||[],d=[c,d.slice?d.slice():d],q.push(d),j||s()),this},fire:function(){return t.fireWith(this,arguments),this},fired:function(){return!!g}};return t};l.extend({Deferred:function(d){var e=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),
l.Callbacks("once memory"),1,"rejected"]],f="pending",g={state:function(){return f},always:function(){return n.done(arguments).fail(arguments),this},"catch":function(c){return g.then(null,c)},pipe:function(){var c=arguments;return l.Deferred(function(d){l.each(e,function(e,j){var y=l.isFunction(c[j[4]])&&c[j[4]];n[j[1]](function(){var c=y&&y.apply(this,arguments);c&&l.isFunction(c.promise)?c.promise().progress(d.notify).done(d.resolve).fail(d.reject):d[j[0]+"With"](this,y?[c]:arguments)})});c=null}).promise()},
then:function(d,y,f){function g(d,e,y,f){return function(){var A=this,p=arguments,H=function(){var c,H;if(!(d<n)){if(c=y.apply(A,p),c===e.promise())throw new TypeError("Thenable self-resolution");H=c&&("object"==typeof c||"function"==typeof c)&&c.then;l.isFunction(H)?f?H.call(c,g(n,e,s,f),g(n,e,j,f)):(n++,H.call(c,g(n,e,s,f),g(n,e,j,f),g(n,e,s,e.notifyWith))):(y!==s&&(A=void 0,p=[c]),(f||e.resolveWith)(A,p))}},q=f?H:function(){try{H()}catch(c){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(c,
q.stackTrace),d+1>=n&&(y!==j&&(A=void 0,p=[c]),e.rejectWith(A,p))}};d?q():(l.Deferred.getStackHook&&(q.stackTrace=l.Deferred.getStackHook()),c.setTimeout(q))}}var n=0;return l.Deferred(function(c){e[0][3].add(g(0,c,l.isFunction(f)?f:s,c.notifyWith));e[1][3].add(g(0,c,l.isFunction(d)?d:s));e[2][3].add(g(0,c,l.isFunction(y)?y:j))}).promise()},promise:function(c){return null!=c?l.extend(c,g):g}},n={};return l.each(e,function(c,d){var j=d[2],y=d[5];g[d[1]]=j.add;y&&j.add(function(){f=y},e[3-c][2].disable,
e[0][2].lock);j.add(d[3].fire);n[d[0]]=function(){return n[d[0]+"With"](this===n?void 0:this,arguments),this};n[d[0]+"With"]=j.fireWith}),g.promise(n),d&&d.call(n,n),n},when:function(c){var d=arguments.length,e=d,j=Array(e),f=ra.call(arguments),g=l.Deferred(),p=function(c){return function(e){j[c]=this;f[c]=1<arguments.length?ra.call(arguments):e;--d||g.resolveWith(j,f)}};if(1>=d&&(n(c,g.done(p(e)).resolve,g.reject,!d),"pending"===g.state()||l.isFunction(f[e]&&f[e].then)))return g.then();for(;e--;)n(f[e],
p(e),g.reject);return g.promise()}});var md=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(d,e){c.console&&c.console.warn&&d&&md.test(d.name)&&c.console.warn("jQuery.Deferred exception: "+d.message,d.stack,e)};l.readyException=function(d){c.setTimeout(function(){throw d;})};var xb=l.Deferred();l.fn.ready=function(c){return xb.then(c)["catch"](function(c){l.readyException(c)}),this};l.extend({isReady:!1,readyWait:1,ready:function(c){(!0===c?--l.readyWait:
l.isReady)||(l.isReady=!0,!0!==c&&0<--l.readyWait||xb.resolveWith(B,[l]))}});l.ready.then=xb.then;"complete"===B.readyState||"loading"!==B.readyState&&!B.documentElement.doScroll?c.setTimeout(l.ready):(B.addEventListener("DOMContentLoaded",p),c.addEventListener("load",p));var ha=function(c,d,e,j,f,g,n){var p=0,q=c.length,m=null==e;if("object"===l.type(e))for(p in f=!0,e)ha(c,d,p,e[p],!0,g,n);else if(void 0!==j&&(f=!0,l.isFunction(j)||(n=!0),m&&(n?(d.call(c,j),d=null):(m=d,d=function(c,d,e){return m.call(l(c),
e)})),d))for(;p<q;p++)d(c[p],e,n?j:j.call(c[p],p,d(c[p],e)));return f?c:m?d.call(c):q?d(c[0],e):g},bb=function(c){return 1===c.nodeType||9===c.nodeType||!+c.nodeType};q.uid=1;q.prototype={cache:function(c){var d=c[this.expando];return d||(d={},bb(c)&&(c.nodeType?c[this.expando]=d:Object.defineProperty(c,this.expando,{value:d,configurable:!0}))),d},set:function(c,d,e){var j;c=this.cache(c);if("string"==typeof d)c[l.camelCase(d)]=e;else for(j in d)c[l.camelCase(j)]=d[j];return c},get:function(c,d){return void 0===
d?this.cache(c):c[this.expando]&&c[this.expando][l.camelCase(d)]},access:function(c,d,e){return void 0===d||d&&"string"==typeof d&&void 0===e?this.get(c,d):(this.set(c,d,e),void 0!==e?e:d)},remove:function(c,d){var e,j=c[this.expando];if(void 0!==j){if(void 0!==d){Array.isArray(d)?d=d.map(l.camelCase):(d=l.camelCase(d),d=d in j?[d]:d.match(W)||[]);for(e=d.length;e--;)delete j[d[e]]}(void 0===d||l.isEmptyObject(j))&&(c.nodeType?c[this.expando]=void 0:delete c[this.expando])}},hasData:function(c){c=
c[this.expando];return void 0!==c&&!l.isEmptyObject(c)}};var E=new q,R=new q,Fc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ec=/[A-Z]/g;l.extend({hasData:function(c){return R.hasData(c)||E.hasData(c)},data:function(c,d,e){return R.access(c,d,e)},removeData:function(c,d){R.remove(c,d)},_data:function(c,d,e){return E.access(c,d,e)},_removeData:function(c,d){E.remove(c,d)}});l.fn.extend({data:function(c,d){var e,j,f,g=this[0],n=g&&g.attributes;if(void 0===c){if(this.length&&(f=R.get(g),1===g.nodeType&&!E.get(g,
"hasDataAttrs"))){for(e=n.length;e--;)n[e]&&(j=n[e].name,0===j.indexOf("data-")&&(j=l.camelCase(j.slice(5)),t(g,j,f[j])));E.set(g,"hasDataAttrs",!0)}return f}return"object"==typeof c?this.each(function(){R.set(this,c)}):ha(this,function(d){var e;if(g&&void 0===d){if((e=R.get(g,c),void 0!==e)||(e=t(g,c),void 0!==e))return e}else this.each(function(){R.set(this,c,d)})},null,d,1<arguments.length,null,!0)},removeData:function(c){return this.each(function(){R.remove(this,c)})}});l.extend({queue:function(c,
d,e){var j;if(c)return d=(d||"fx")+"queue",j=E.get(c,d),e&&(!j||Array.isArray(e)?j=E.access(c,d,l.makeArray(e)):j.push(e)),j||[]},dequeue:function(c,d){d=d||"fx";var e=l.queue(c,d),j=e.length,f=e.shift(),g=l._queueHooks(c,d),n=function(){l.dequeue(c,d)};"inprogress"===f&&(f=e.shift(),j--);f&&("fx"===d&&e.unshift("inprogress"),delete g.stop,f.call(c,n,g));!j&&g&&g.empty.fire()},_queueHooks:function(c,d){var e=d+"queueHooks";return E.get(c,e)||E.access(c,e,{empty:l.Callbacks("once memory").add(function(){E.remove(c,
[d+"queue",e])})})}});l.fn.extend({queue:function(c,d){var e=2;return"string"!=typeof c&&(d=c,c="fx",e--),arguments.length<e?l.queue(this[0],c):void 0===d?this:this.each(function(){var e=l.queue(this,c,d);l._queueHooks(this,c);"fx"===c&&"inprogress"!==e[0]&&l.dequeue(this,c)})},dequeue:function(c){return this.each(function(){l.dequeue(this,c)})},clearQueue:function(c){return this.queue(c||"fx",[])},promise:function(c,d){var e,j=1,f=l.Deferred(),g=this,n=this.length,p=function(){--j||f.resolveWith(g,
[g])};"string"!=typeof c&&(d=c,c=void 0);for(c=c||"fx";n--;)(e=E.get(g[n],c+"queueHooks"))&&e.empty&&(j++,e.empty.add(p));return p(),f.promise(d)}});var kc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fa=RegExp("^(?:([+-])=|)("+kc+")([a-z%]*)$","i"),na=["Top","Right","Bottom","Left"],Na=function(c,d){return c=d||c,"none"===c.style.display||""===c.style.display&&l.contains(c.ownerDocument,c)&&"none"===l.css(c,"display")},lc=function(c,d,e,j){var f,l={};for(f in d)l[f]=c.style[f],c.style[f]=d[f];e=
e.apply(c,j||[]);for(f in d)c.style[f]=l[f];return e},Bb={};l.fn.extend({show:function(){return u(this,!0)},hide:function(){return u(this)},toggle:function(c){return"boolean"==typeof c?c?this.show():this.hide():this.each(function(){Na(this)?l(this).show():l(this).hide()})}});var mc=/^(?:checkbox|radio)$/i,Cb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Db=/^$|\/(?:java|ecma)script/i,U={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};U.optgroup=U.option;U.tbody=U.tfoot=U.colgroup=U.caption=U.thead;U.th=U.td;var Gc=/<|&#?\w+;/,cb=B.createDocumentFragment().appendChild(B.createElement("div")),db=B.createElement("input");db.setAttribute("type","radio");db.setAttribute("checked","checked");db.setAttribute("name","t");cb.appendChild(db);J.checkClone=cb.cloneNode(!0).cloneNode(!0).lastChild.checked;cb.innerHTML="<textarea>x</textarea>";
J.noCloneChecked=!!cb.cloneNode(!0).lastChild.defaultValue;!0;var eb=B.documentElement,nd=/^key/,od=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nc=/^([^.]*)(?:\.(.+)|)/;l.event={global:{},add:function(c,d,e,j,f){var g,n,p,q,m,s,t,r,x,u;if(m=E.get(c)){e.handler&&(g=e,e=g.handler,f=g.selector);f&&l.find.matchesSelector(eb,f);e.guid||(e.guid=l.guid++);(q=m.events)||(q=m.events={});(n=m.handle)||(n=m.handle=function(d){return"undefined"!=typeof l&&l.event.triggered!==d.type?l.event.dispatch.apply(c,
arguments):void 0});d=(d||"").match(W)||[""];for(m=d.length;m--;)p=nc.exec(d[m])||[],x=u=p[1],p=(p[2]||"").split(".").sort(),x&&(t=l.event.special[x]||{},x=(f?t.delegateType:t.bindType)||x,t=l.event.special[x]||{},s=l.extend({type:x,origType:u,data:j,handler:e,guid:e.guid,selector:f,needsContext:f&&l.expr.match.needsContext.test(f),namespace:p.join(".")},g),(r=q[x])||(r=q[x]=[],r.delegateCount=0,t.setup&&!1!==t.setup.call(c,j,p,n)||c.addEventListener&&c.addEventListener(x,n)),t.add&&(t.add.call(c,
s),s.handler.guid||(s.handler.guid=e.guid)),f?r.splice(r.delegateCount++,0,s):r.push(s),l.event.global[x]=!0)}},remove:function(c,d,e,j,f){var g,n,p,m,q,s,t,r,x,u,z,C=E.hasData(c)&&E.get(c);if(C&&(m=C.events)){d=(d||"").match(W)||[""];for(q=d.length;q--;)if(p=nc.exec(d[q])||[],x=z=p[1],u=(p[2]||"").split(".").sort(),x){t=l.event.special[x]||{};x=(j?t.delegateType:t.bindType)||x;r=m[x]||[];p=p[2]&&RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(n=g=r.length;g--;)s=r[g],!f&&z!==s.origType||
e&&e.guid!==s.guid||p&&!p.test(s.namespace)||j&&j!==s.selector&&("**"!==j||!s.selector)||(r.splice(g,1),s.selector&&r.delegateCount--,t.remove&&t.remove.call(c,s));n&&!r.length&&(t.teardown&&!1!==t.teardown.call(c,u,C.handle)||l.removeEvent(c,x,C.handle),delete m[x])}else for(x in m)l.event.remove(c,x+d[q],e,j,!0);l.isEmptyObject(m)&&E.remove(c,"handle events")}},dispatch:function(c){var d=l.event.fix(c),e,j,f,g,n,p,m=Array(arguments.length);j=(E.get(this,"events")||{})[d.type]||[];var q=l.event.special[d.type]||
{};m[0]=d;for(e=1;e<arguments.length;e++)m[e]=arguments[e];if(d.delegateTarget=this,!q.preDispatch||!1!==q.preDispatch.call(this,d)){p=l.event.handlers.call(this,d,j);for(e=0;(g=p[e++])&&!d.isPropagationStopped();){d.currentTarget=g.elem;for(j=0;(n=g.handlers[j++])&&!d.isImmediatePropagationStopped();)d.rnamespace&&!d.rnamespace.test(n.namespace)||(d.handleObj=n,d.data=n.data,f=((l.event.special[n.origType]||{}).handle||n.handler).apply(g.elem,m),void 0!==f&&!1===(d.result=f)&&(d.preventDefault(),
d.stopPropagation()))}return q.postDispatch&&q.postDispatch.call(this,d),d.result}},handlers:function(c,d){var e,j,f,g,n,p=[],m=d.delegateCount,q=c.target;if(m&&q.nodeType&&!("click"===c.type&&1<=c.button))for(;q!==this;q=q.parentNode||this)if(1===q.nodeType&&("click"!==c.type||!0!==q.disabled)){g=[];n={};for(e=0;e<m;e++)j=d[e],f=j.selector+" ",void 0===n[f]&&(n[f]=j.needsContext?-1<l(f,this).index(q):l.find(f,this,null,[q]).length),n[f]&&g.push(j);g.length&&p.push({elem:q,handlers:g})}return q=this,
m<d.length&&p.push({elem:q,handlers:d.slice(m)}),p},addProp:function(c,d){Object.defineProperty(l.Event.prototype,c,{enumerable:!0,configurable:!0,get:l.isFunction(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[c]},set:function(d){Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:d})}})},fix:function(c){return c[l.expando]?c:new l.Event(c)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
ma()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ma()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g(this,"input"))return this.click(),!1},_default:function(c){return g(c.target,"a")}},beforeunload:{postDispatch:function(c){void 0!==c.result&&c.originalEvent&&(c.originalEvent.returnValue=c.result)}}}};l.removeEvent=function(c,d,e){c.removeEventListener&&c.removeEventListener(d,
e)};l.Event=function(c,d){return this instanceof l.Event?(c&&c.type?(this.originalEvent=c,this.type=c.type,this.isDefaultPrevented=c.defaultPrevented||void 0===c.defaultPrevented&&!1===c.returnValue?L:V,this.target=c.target&&3===c.target.nodeType?c.target.parentNode:c.target,this.currentTarget=c.currentTarget,this.relatedTarget=c.relatedTarget):this.type=c,d&&l.extend(this,d),this.timeStamp=c&&c.timeStamp||l.now(),void(this[l.expando]=!0)):new l.Event(c,d)};l.Event.prototype={constructor:l.Event,
isDefaultPrevented:V,isPropagationStopped:V,isImmediatePropagationStopped:V,isSimulated:!1,preventDefault:function(){var c=this.originalEvent;this.isDefaultPrevented=L;c&&!this.isSimulated&&c.preventDefault()},stopPropagation:function(){var c=this.originalEvent;this.isPropagationStopped=L;c&&!this.isSimulated&&c.stopPropagation()},stopImmediatePropagation:function(){var c=this.originalEvent;this.isImmediatePropagationStopped=L;c&&!this.isSimulated&&c.stopImmediatePropagation();this.stopPropagation()}};
l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(c){var d=c.button;return null==c.which&&nd.test(c.type)?null!=c.charCode?c.charCode:c.keyCode:!c.which&&void 0!==d&&od.test(c.type)?1&d?1:2&d?3:4&
d?2:0:c.which}},l.event.addProp);l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(c,d){l.event.special[c]={delegateType:d,bindType:d,handle:function(c){var e,j=c.relatedTarget,f=c.handleObj;return j&&(j===this||l.contains(this,j))||(c.type=f.origType,e=f.handler.apply(this,arguments),c.type=d),e}}});l.fn.extend({on:function(c,d,e,j){return Q(this,c,d,e,j)},one:function(c,d,e,j){return Q(this,c,d,e,j,1)},off:function(c,d,e){var j,f;
if(c&&c.preventDefault&&c.handleObj)return j=c.handleObj,l(c.delegateTarget).off(j.namespace?j.origType+"."+j.namespace:j.origType,j.selector,j.handler),this;if("object"==typeof c){for(f in c)this.off(f,d,c[f]);return this}return!1!==d&&"function"!=typeof d||(e=d,d=void 0),!1===e&&(e=V),this.each(function(){l.event.remove(this,c,e,d)})}});var pd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qd=/<script|<style|<link/i,Kc=/checked\s*(?:[^=]|=\s*.checked.)/i,
Jc=/^true\/(.*)/,Mc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;l.extend({htmlPrefilter:function(c){return c.replace(pd,"<$1></$2>")},clone:function(c,d,e){var j,f,g,n,p=c.cloneNode(!0),q=l.contains(c.ownerDocument,c);if(!J.noCloneChecked&&!(1!==c.nodeType&&11!==c.nodeType||l.isXMLDoc(c))){n=z(p);g=z(c);j=0;for(f=g.length;j<f;j++){var m=g[j],s=n[j],t=s.nodeName.toLowerCase();"input"===t&&mc.test(m.type)?s.checked=m.checked:"input"!==t&&"textarea"!==t||(s.defaultValue=m.defaultValue)}}if(d)if(e){g=
g||z(c);n=n||z(p);j=0;for(f=g.length;j<f;j++)Fb(g[j],n[j])}else Fb(c,p);return n=z(p,"script"),0<n.length&&I(n,!q&&z(c,"script")),p},cleanData:function(c){for(var d,e,j,f=l.event.special,g=0;void 0!==(e=c[g]);g++)if(bb(e)){if(d=e[E.expando]){if(d.events)for(j in d.events)f[j]?l.event.remove(e,j):l.removeEvent(e,j,d.handle);e[E.expando]=void 0}e[R.expando]&&(e[R.expando]=void 0)}}});l.fn.extend({detach:function(c){return Hb(this,c,!0)},remove:function(c){return Hb(this,c)},text:function(c){return ha(this,
function(c){return void 0===c?l.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=c)})},null,c,arguments.length)},append:function(){return xa(this,arguments,function(c){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&Eb(this,c).appendChild(c)})},prepend:function(){return xa(this,arguments,function(c){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=Eb(this,c);d.insertBefore(c,d.firstChild)}})},before:function(){return xa(this,
arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this)})},after:function(){return xa(this,arguments,function(c){this.parentNode&&this.parentNode.insertBefore(c,this.nextSibling)})},empty:function(){for(var c,d=0;null!=(c=this[d]);d++)1===c.nodeType&&(l.cleanData(z(c,!1)),c.textContent="");return this},clone:function(c,d){return c=null!=c&&c,d=null==d?c:d,this.map(function(){return l.clone(this,c,d)})},html:function(c){return ha(this,function(c){var d=this[0]||{},e=0,j=this.length;
if(void 0===c&&1===d.nodeType)return d.innerHTML;if("string"==typeof c&&!qd.test(c)&&!U[(Cb.exec(c)||["",""])[1].toLowerCase()]){c=l.htmlPrefilter(c);try{for(;e<j;e++)d=this[e]||{},1===d.nodeType&&(l.cleanData(z(d,!1)),d.innerHTML=c);d=0}catch(f){}}d&&this.empty().append(c)},null,c,arguments.length)},replaceWith:function(){var c=[];return xa(this,arguments,function(d){var e=this.parentNode;0>l.inArray(this,c)&&(l.cleanData(z(this)),e&&e.replaceChild(d,this))},c)}});l.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(c,d){l.fn[c]=function(c){for(var e=[],j=l(c),f=j.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),l(j[g])[d](c),mb.apply(e,c.get());return this.pushStack(e)}});var Ib=/^margin/,hb=RegExp("^("+kc+")(?!px)[a-z%]+$","i"),Oa=function(d){var e=d.ownerDocument.defaultView;return e&&e.opener||(e=c),e.getComputedStyle(d)},gb=function(){if(ca){ca.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
ca.innerHTML="";eb.appendChild(fb);var d=c.getComputedStyle(ca);oc="1%"!==d.top;pc="2px"===d.marginLeft;qc="4px"===d.width;ca.style.marginRight="50%";rc="4px"===d.marginRight;eb.removeChild(fb);ca=null}},oc,qc,rc,pc,fb=B.createElement("div"),ca=B.createElement("div");ca.style&&(ca.style.backgroundClip="content-box",ca.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===ca.style.backgroundClip,fb.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
fb.appendChild(ca),l.extend(J,{pixelPosition:function(){return gb(),oc},boxSizingReliable:function(){return gb(),qc},pixelMarginRight:function(){return gb(),rc},reliableMarginLeft:function(){return gb(),pc}}));!0;var rd=/^(none|table(?!-c[ea]).+)/,sc=/^--/,sd={position:"absolute",visibility:"hidden",display:"block"},tc={letterSpacing:"0",fontWeight:"400"},Mb=["Webkit","Moz","ms"],Lb=B.createElement("div").style;l.extend({cssHooks:{opacity:{get:function(c,d){if(d){var e=Ga(c,"opacity");return""===
e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(c,d,e,j){if(c&&3!==c.nodeType&&8!==c.nodeType&&c.style){var f,g,n,p=l.camelCase(d),q=sc.test(d),m=c.style;return q||(d=Kb(p)),n=l.cssHooks[d]||l.cssHooks[p],void 0===e?n&&"get"in n&&void 0!==(f=n.get(c,!1,j))?f:m[d]:(g=typeof e,"string"===g&&(f=Fa.exec(e))&&f[1]&&
(e=x(c,d,f),g="number"),null!=e&&e===e&&("number"===g&&(e+=f&&f[3]||(l.cssNumber[p]?"":"px")),J.clearCloneStyle||""!==e||0!==d.indexOf("background")||(m[d]="inherit"),n&&"set"in n&&void 0===(e=n.set(c,e,j))||(q?m.setProperty(d,e):m[d]=e)),void 0)}},css:function(c,d,e,j){var f,g,n,p=l.camelCase(d);return sc.test(d)||(d=Kb(p)),n=l.cssHooks[d]||l.cssHooks[p],n&&"get"in n&&(f=n.get(c,!0,e)),void 0===f&&(f=Ga(c,d,j)),"normal"===f&&d in tc&&(f=tc[d]),""===e||e?(g=parseFloat(f),!0===e||isFinite(g)?g||0:
f):f}});l.each(["height","width"],function(c,d){l.cssHooks[d]={get:function(c,e,j){if(e)return!rd.test(l.css(c,"display"))||c.getClientRects().length&&c.getBoundingClientRect().width?Pb(c,d,j):lc(c,sd,function(){return Pb(c,d,j)})},set:function(c,e,j){var f,g=j&&Oa(c);j=j&&Ob(c,d,j,"border-box"===l.css(c,"boxSizing",!1,g),g);return j&&(f=Fa.exec(e))&&"px"!==(f[3]||"px")&&(c.style[d]=e,e=l.css(c,d)),Nb(c,e,j)}}});l.cssHooks.marginLeft=Jb(J.reliableMarginLeft,function(c,d){if(d)return(parseFloat(Ga(c,
"marginLeft"))||c.getBoundingClientRect().left-lc(c,{marginLeft:0},function(){return c.getBoundingClientRect().left}))+"px"});l.each({margin:"",padding:"",border:"Width"},function(c,d){l.cssHooks[c+d]={expand:function(e){var j=0,f={};for(e="string"==typeof e?e.split(" "):[e];4>j;j++)f[c+na[j]+d]=e[j]||e[j-2]||e[0];return f}};Ib.test(c)||(l.cssHooks[c+d].set=Nb)});l.fn.extend({css:function(c,d){return ha(this,function(c,d,e){var j,f={},g=0;if(Array.isArray(d)){e=Oa(c);for(j=d.length;g<j;g++)f[d[g]]=
l.css(c,d[g],!1,e);return f}return void 0!==e?l.style(c,d,e):l.css(c,d)},c,d,1<arguments.length)}});l.Tween=S;S.prototype={constructor:S,init:function(c,d,e,j,f,g){this.elem=c;this.prop=e;this.easing=f||l.easing._default;this.options=d;this.start=this.now=this.cur();this.end=j;this.unit=g||(l.cssNumber[e]?"":"px")},cur:function(){var c=S.propHooks[this.prop];return c&&c.get?c.get(this):S.propHooks._default.get(this)},run:function(c){var d,e=S.propHooks[this.prop];return this.options.duration?this.pos=
d=l.easing[this.easing](c,this.options.duration*c,0,1,this.options.duration):this.pos=d=c,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),e&&e.set?e.set(this):S.propHooks._default.set(this),this}};S.prototype.init.prototype=S.prototype;S.propHooks={_default:{get:function(c){var d;return 1!==c.elem.nodeType||null!=c.elem[c.prop]&&null==c.elem.style[c.prop]?c.elem[c.prop]:(d=l.css(c.elem,c.prop,""),d&&"auto"!==d?d:0)},set:function(c){l.fx.step[c.prop]?
l.fx.step[c.prop](c):1!==c.elem.nodeType||null==c.elem.style[l.cssProps[c.prop]]&&!l.cssHooks[c.prop]?c.elem[c.prop]=c.now:l.style(c.elem,c.prop,c.now+c.unit)}}};S.propHooks.scrollTop=S.propHooks.scrollLeft={set:function(c){c.elem.nodeType&&c.elem.parentNode&&(c.elem[c.prop]=c.now)}};l.easing={linear:function(c){return c},swing:function(c){return 0.5-Math.cos(c*Math.PI)/2},_default:"swing"};l.fx=S.prototype.init;l.fx.step={};var ya,Pa,td=/^(?:toggle|show|hide)$/,ud=/queueHooks$/;l.Animation=l.extend(aa,
{tweeners:{"*":[function(c,d){var e=this.createTween(c,d);return x(e.elem,c,Fa.exec(d),e),e}]},tweener:function(c,d){l.isFunction(c)?(d=c,c=["*"]):c=c.match(W);for(var e,j=0,f=c.length;j<f;j++)e=c[j],aa.tweeners[e]=aa.tweeners[e]||[],aa.tweeners[e].unshift(d)},prefilters:[function(c,d,e){var j,f,g,n,p,q,m,s,t="width"in d||"height"in d,r=this,x={},z=c.style,C=c.nodeType&&Na(c),B=E.get(c,"fxshow");e.queue||(n=l._queueHooks(c,"fx"),null==n.unqueued&&(n.unqueued=0,p=n.empty.fire,n.empty.fire=function(){n.unqueued||
p()}),n.unqueued++,r.always(function(){r.always(function(){n.unqueued--;l.queue(c,"fx").length||n.empty.fire()})}));for(j in d)if(f=d[j],td.test(f)){if(delete d[j],g=g||"toggle"===f,f===(C?"hide":"show")){if("show"!==f||!B||void 0===B[j])continue;C=!0}x[j]=B&&B[j]||l.style(c,j)}if(q=!l.isEmptyObject(d),q||!l.isEmptyObject(x))for(j in t&&1===c.nodeType&&(e.overflow=[z.overflow,z.overflowX,z.overflowY],m=B&&B.display,null==m&&(m=E.get(c,"display")),s=l.css(c,"display"),"none"===s&&(m?s=m:(u([c],!0),
m=c.style.display||m,s=l.css(c,"display"),u([c]))),("inline"===s||"inline-block"===s&&null!=m)&&"none"===l.css(c,"float")&&(q||(r.done(function(){z.display=m}),null==m&&(s=z.display,m="none"===s?"":s)),z.display="inline-block")),e.overflow&&(z.overflow="hidden",r.always(function(){z.overflow=e.overflow[0];z.overflowX=e.overflow[1];z.overflowY=e.overflow[2]})),q=!1,x)q||(B?"hidden"in B&&(C=B.hidden):B=E.access(c,"fxshow",{display:m}),g&&(B.hidden=!C),C&&u([c],!0),r.done(function(){C||u([c]);E.remove(c,
"fxshow");for(j in x)l.style(c,j,x[j])})),q=Rb(C?B[j]:0,j,r),j in B||(B[j]=q.start,C&&(q.end=q.start,q.start=0))}],prefilter:function(c,d){d?aa.prefilters.unshift(c):aa.prefilters.push(c)}});l.speed=function(c,d,e){var j=c&&"object"==typeof c?l.extend({},c):{complete:e||!e&&d||l.isFunction(c)&&c,duration:c,easing:e&&d||d&&!l.isFunction(d)&&d};return l.fx.off?j.duration=0:"number"!=typeof j.duration&&(j.duration in l.fx.speeds?j.duration=l.fx.speeds[j.duration]:j.duration=l.fx.speeds._default),null!=
j.queue&&!0!==j.queue||(j.queue="fx"),j.old=j.complete,j.complete=function(){l.isFunction(j.old)&&j.old.call(this);j.queue&&l.dequeue(this,j.queue)},j};l.fn.extend({fadeTo:function(c,d,e,j){return this.filter(Na).css("opacity",0).show().end().animate({opacity:d},c,e,j)},animate:function(c,d,e,j){var f=l.isEmptyObject(c),g=l.speed(d,e,j);d=function(){var d=aa(this,l.extend({},c),g);(f||E.get(this,"finish"))&&d.stop(!0)};return d.finish=d,f||!1===g.queue?this.each(d):this.queue(g.queue,d)},stop:function(c,
d,e){var j=function(c){var d=c.stop;delete c.stop;d(e)};return"string"!=typeof c&&(e=d,d=c,c=void 0),d&&!1!==c&&this.queue(c||"fx",[]),this.each(function(){var d=!0,f=null!=c&&c+"queueHooks",g=l.timers,n=E.get(this);if(f)n[f]&&n[f].stop&&j(n[f]);else for(f in n)n[f]&&n[f].stop&&ud.test(f)&&j(n[f]);for(f=g.length;f--;)g[f].elem!==this||null!=c&&g[f].queue!==c||(g[f].anim.stop(e),d=!1,g.splice(f,1));!d&&e||l.dequeue(this,c)})},finish:function(c){return!1!==c&&(c=c||"fx"),this.each(function(){var d,
e=E.get(this),j=e[c+"queue"];d=e[c+"queueHooks"];var f=l.timers,g=j?j.length:0;e.finish=!0;l.queue(this,c,[]);d&&d.stop&&d.stop.call(this,!0);for(d=f.length;d--;)f[d].elem===this&&f[d].queue===c&&(f[d].anim.stop(!0),f.splice(d,1));for(d=0;d<g;d++)j[d]&&j[d].finish&&j[d].finish.call(this);delete e.finish})}});l.each(["toggle","show","hide"],function(c,d){var e=l.fn[d];l.fn[d]=function(c,j,f){return null==c||"boolean"==typeof c?e.apply(this,arguments):this.animate(Qa(d,!0),c,j,f)}});l.each({slideDown:Qa("show"),
slideUp:Qa("hide"),slideToggle:Qa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(c,d){l.fn[c]=function(c,e,j){return this.animate(d,c,e,j)}});l.timers=[];l.fx.tick=function(){var c,d=0,e=l.timers;for(ya=l.now();d<e.length;d++)c=e[d],c()||e[d]!==c||e.splice(d--,1);e.length||l.fx.stop();ya=void 0};l.fx.timer=function(c){l.timers.push(c);l.fx.start()};l.fx.interval=13;l.fx.start=function(){Pa||(Pa=!0,ib())};l.fx.stop=function(){Pa=null};l.fx.speeds=
{slow:600,fast:200,_default:400};l.fn.delay=function(d,e){return d=l.fx?l.fx.speeds[d]||d:d,e=e||"fx",this.queue(e,function(e,j){var f=c.setTimeout(e,d);j.stop=function(){c.clearTimeout(f)}})};var Ca=B.createElement("input"),vd=B.createElement("select").appendChild(B.createElement("option"));Ca.type="checkbox";J.checkOn=""!==Ca.value;J.optSelected=vd.selected;Ca=B.createElement("input");Ca.value="t";Ca.type="radio";J.radioValue="t"===Ca.value;var uc,Ka=l.expr.attrHandle;l.fn.extend({attr:function(c,
d){return ha(this,l.attr,c,d,1<arguments.length)},removeAttr:function(c){return this.each(function(){l.removeAttr(this,c)})}});l.extend({attr:function(c,d,e){var j,f,g=c.nodeType;if(3!==g&&8!==g&&2!==g)return"undefined"==typeof c.getAttribute?l.prop(c,d,e):(1===g&&l.isXMLDoc(c)||(f=l.attrHooks[d.toLowerCase()]||(l.expr.match.bool.test(d)?uc:void 0)),void 0!==e?null===e?void l.removeAttr(c,d):f&&"set"in f&&void 0!==(j=f.set(c,e,d))?j:(c.setAttribute(d,e+""),e):f&&"get"in f&&null!==(j=f.get(c,d))?j:
(j=l.find.attr(c,d),null==j?void 0:j))},attrHooks:{type:{set:function(c,d){if(!J.radioValue&&"radio"===d&&g(c,"input")){var e=c.value;return c.setAttribute("type",d),e&&(c.value=e),d}}}},removeAttr:function(c,d){var e,j=0,f=d&&d.match(W);if(f&&1===c.nodeType)for(;e=f[j++];)c.removeAttribute(e)}});uc={set:function(c,d,e){return!1===d?l.removeAttr(c,e):c.setAttribute(e,e),e}};l.each(l.expr.match.bool.source.match(/\w+/g),function(c,d){var e=Ka[d]||l.find.attr;Ka[d]=function(c,d,j){var f,g,l=d.toLowerCase();
return j||(g=Ka[l],Ka[l]=f,f=null!=e(c,d,j)?l:null,Ka[l]=g),f}});var wd=/^(?:input|select|textarea|button)$/i,xd=/^(?:a|area)$/i;l.fn.extend({prop:function(c,d){return ha(this,l.prop,c,d,1<arguments.length)},removeProp:function(c){return this.each(function(){delete this[l.propFix[c]||c]})}});l.extend({prop:function(c,d,e){var j,f,g=c.nodeType;if(3!==g&&8!==g&&2!==g)return 1===g&&l.isXMLDoc(c)||(d=l.propFix[d]||d,f=l.propHooks[d]),void 0!==e?f&&"set"in f&&void 0!==(j=f.set(c,e,d))?j:c[d]=e:f&&"get"in
f&&null!==(j=f.get(c,d))?j:c[d]},propHooks:{tabIndex:{get:function(c){var d=l.find.attr(c,"tabindex");return d?parseInt(d,10):wd.test(c.nodeName)||xd.test(c.nodeName)&&c.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});J.optSelected||(l.propHooks.selected={get:function(c){c=c.parentNode;return c&&c.parentNode&&c.parentNode.selectedIndex,null},set:function(c){c=c.parentNode;c&&(c.selectedIndex,c.parentNode&&c.parentNode.selectedIndex)}});l.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){l.propFix[this.toLowerCase()]=this});l.fn.extend({addClass:function(c){var d,e,j,f,g,n,p=0;if(l.isFunction(c))return this.each(function(d){l(this).addClass(c.call(this,d,pa(this)))});if("string"==typeof c&&c)for(d=c.match(W)||[];e=this[p++];)if(f=pa(e),j=1===e.nodeType&&" "+oa(f)+" "){for(n=0;g=d[n++];)0>j.indexOf(" "+g+" ")&&(j+=g+" ");j=oa(j);f!==j&&e.setAttribute("class",j)}return this},removeClass:function(c){var d,e,j,f,g,n,p=0;if(l.isFunction(c))return this.each(function(d){l(this).removeClass(c.call(this,
d,pa(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof c&&c)for(d=c.match(W)||[];e=this[p++];)if(f=pa(e),j=1===e.nodeType&&" "+oa(f)+" "){for(n=0;g=d[n++];)for(;-1<j.indexOf(" "+g+" ");)j=j.replace(" "+g+" "," ");j=oa(j);f!==j&&e.setAttribute("class",j)}return this},toggleClass:function(c,d){var e=typeof c;return"boolean"==typeof d&&"string"===e?d?this.addClass(c):this.removeClass(c):l.isFunction(c)?this.each(function(e){l(this).toggleClass(c.call(this,e,pa(this),d),
d)}):this.each(function(){var d,j,f,g;if("string"===e){j=0;f=l(this);for(g=c.match(W)||[];d=g[j++];)f.hasClass(d)?f.removeClass(d):f.addClass(d)}else void 0!==c&&"boolean"!==e||(d=pa(this),d&&E.set(this,"__className__",d),this.setAttribute&&this.setAttribute("class",d||!1===c?"":E.get(this,"__className__")||""))})},hasClass:function(c){var d,e=0;for(c=" "+c+" ";d=this[e++];)if(1===d.nodeType&&-1<(" "+oa(pa(d))+" ").indexOf(c))return!0;return!1}});var yd=/\r/g;l.fn.extend({val:function(c){var d,e,
j,f=this[0];if(arguments.length)return j=l.isFunction(c),this.each(function(e){var f;1===this.nodeType&&(f=j?c.call(this,e,l(this).val()):c,null==f?f="":"number"==typeof f?f+="":Array.isArray(f)&&(f=l.map(f,function(c){return null==c?"":c+""})),d=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&void 0!==d.set(this,f,"value")||(this.value=f))});if(f)return d=l.valHooks[f.type]||l.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&void 0!==(e=d.get(f,"value"))?e:(e=f.value,
"string"==typeof e?e.replace(yd,""):null==e?"":e)}});l.extend({valHooks:{option:{get:function(c){var d=l.find.attr(c,"value");return null!=d?d:oa(l.text(c))}},select:{get:function(c){var d,e,j=c.options,f=c.selectedIndex,n="select-one"===c.type,p=n?null:[],q=n?f+1:j.length;for(e=0>f?q:n?f:0;e<q;e++)if(d=j[e],(d.selected||e===f)&&!d.disabled&&(!d.parentNode.disabled||!g(d.parentNode,"optgroup"))){if(c=l(d).val(),n)return c;p.push(c)}return p},set:function(c,d){for(var e,j,f=c.options,g=l.makeArray(d),
n=f.length;n--;)j=f[n],(j.selected=-1<l.inArray(l.valHooks.option.get(j),g))&&(e=!0);return e||(c.selectedIndex=-1),g}}}});l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(c,d){if(Array.isArray(d))return c.checked=-1<l.inArray(l(c).val(),d)}};J.checkOn||(l.valHooks[this].get=function(c){return null===c.getAttribute("value")?"on":c.value})});var vc=/^(?:focusinfocus|focusoutblur)$/;l.extend(l.event,{trigger:function(d,e,j,f){var g,n,p,q,m,s,t,r=[j||B],x=Sa.call(d,"type")?d.type:
d;g=Sa.call(d,"namespace")?d.namespace.split("."):[];if(n=p=j=j||B,3!==j.nodeType&&8!==j.nodeType&&!vc.test(x+l.event.triggered)&&(-1<x.indexOf(".")&&(g=x.split("."),x=g.shift(),g.sort()),m=0>x.indexOf(":")&&"on"+x,d=d[l.expando]?d:new l.Event(x,"object"==typeof d&&d),d.isTrigger=f?2:3,d.namespace=g.join("."),d.rnamespace=d.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=j),e=null==e?[d]:l.makeArray(e,[d]),t=l.event.special[x]||{},f||!t.trigger||
!1!==t.trigger.apply(j,e))){if(!f&&!t.noBubble&&!l.isWindow(j)){q=t.delegateType||x;for(vc.test(q+x)||(n=n.parentNode);n;n=n.parentNode)r.push(n),p=n;p===(j.ownerDocument||B)&&r.push(p.defaultView||p.parentWindow||c)}for(g=0;(n=r[g++])&&!d.isPropagationStopped();)d.type=1<g?q:t.bindType||x,(s=(E.get(n,"events")||{})[d.type]&&E.get(n,"handle"))&&s.apply(n,e),(s=m&&n[m])&&s.apply&&bb(n)&&(d.result=s.apply(n,e),!1===d.result&&d.preventDefault());return d.type=x,f||d.isDefaultPrevented()||t._default&&
!1!==t._default.apply(r.pop(),e)||!bb(j)||m&&l.isFunction(j[x])&&!l.isWindow(j)&&(p=j[m],p&&(j[m]=null),l.event.triggered=x,j[x](),l.event.triggered=void 0,p&&(j[m]=p)),d.result}},simulate:function(c,d,e){c=l.extend(new l.Event,e,{type:c,isSimulated:!0});l.event.trigger(c,null,d)}});l.fn.extend({trigger:function(c,d){return this.each(function(){l.event.trigger(c,d,this)})},triggerHandler:function(c,d){var e=this[0];if(e)return l.event.trigger(c,d,e,!0)}});l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(c,d){l.fn[d]=function(c,e){return 0<arguments.length?this.on(d,null,c,e):this.trigger(d)}});l.fn.extend({hover:function(c,d){return this.mouseenter(c).mouseleave(d||c)}});J.focusin="onfocusin"in c;J.focusin||l.each({focus:"focusin",blur:"focusout"},function(c,d){var e=function(c){l.event.simulate(d,c.target,l.event.fix(c))};l.event.special[d]={setup:function(){var j=this.ownerDocument||this,f=E.access(j,d);f||j.addEventListener(c,e,!0);E.access(j,d,(f||0)+1)},teardown:function(){var j=this.ownerDocument||
this,f=E.access(j,d)-1;f?E.access(j,d,f):(j.removeEventListener(c,e,!0),E.remove(j,d))}}});var La=c.location,wc=l.now(),yb=/\?/;l.parseXML=function(d){var e;if(!d||"string"!=typeof d)return null;try{e=(new c.DOMParser).parseFromString(d,"text/xml")}catch(j){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||l.error("Invalid XML: "+d),e};var Nc=/\[\]$/,xc=/\r?\n/g,zd=/^(?:submit|button|image|reset|file)$/i,Ad=/^(?:input|select|textarea|keygen)/i;l.param=function(c,d){var e,j=[],f=function(c,
d){var e=l.isFunction(d)?d():d;j[j.length]=encodeURIComponent(c)+"="+encodeURIComponent(null==e?"":e)};if(Array.isArray(c)||c.jquery&&!l.isPlainObject(c))l.each(c,function(){f(this.name,this.value)});else for(e in c)jb(e,c[e],d,f);return j.join("&")};l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var c=l.prop(this,"elements");return c?l.makeArray(c):this}).filter(function(){var c=this.type;return this.name&&!l(this).is(":disabled")&&
Ad.test(this.nodeName)&&!zd.test(c)&&(this.checked||!mc.test(c))}).map(function(c,d){var e=l(this).val();return null==e?null:Array.isArray(e)?l.map(e,function(c){return{name:d.name,value:c.replace(xc,"\r\n")}}):{name:d.name,value:e.replace(xc,"\r\n")}}).get()}});var Bd=/%20/g,Cd=/#.*$/,Dd=/([?&])_=[^&]*/,Ed=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fd=/^(?:GET|HEAD)$/,Gd=/^\/\//,yc={},kb={},zc="*/".concat("*"),zb=B.createElement("a");zb.href=La.href;l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:La.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(La.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(c,d){return d?lb(lb(c,l.ajaxSettings),d):lb(l.ajaxSettings,c)},ajaxPrefilter:Sb(yc),ajaxTransport:Sb(kb),ajax:function(d,e){function j(d,e,p,q){var r,x,y,A,H=e;if(!s){s=!0;m&&c.clearTimeout(m);f=void 0;n=q||"";M.readyState=0<d?4:0;q=200<=d&&300>d||304===d;if(p){y=u;for(var wa=M,B,I,G,F,O=y.contents,J=y.dataTypes;"*"===J[0];)J.shift(),void 0===B&&(B=y.mimeType||wa.getResponseHeader("Content-Type"));if(B)for(I in O)if(O[I]&&
O[I].test(B)){J.unshift(I);break}if(J[0]in p)G=J[0];else{for(I in p){if(!J[0]||y.converters[I+" "+J[0]]){G=I;break}F||(F=I)}G=G||F}p=G?(G!==J[0]&&J.unshift(G),p[G]):void 0;y=p}var N;a:{p=u;B=y;I=M;G=q;var T,Q,P;y={};wa=p.dataTypes.slice();if(wa[1])for(T in p.converters)y[T.toLowerCase()]=p.converters[T];for(F=wa.shift();F;)if(p.responseFields[F]&&(I[p.responseFields[F]]=B),!P&&G&&p.dataFilter&&(B=p.dataFilter(B,p.dataType)),P=F,F=wa.shift())if("*"===F)F=P;else if("*"!==P&&P!==F){if(T=y[P+" "+F]||
y["* "+F],!T)for(N in y)if(Q=N.split(" "),Q[1]===F&&(T=y[P+" "+Q[0]]||y["* "+Q[0]])){!0===T?T=y[N]:!0!==y[N]&&(F=Q[0],wa.unshift(Q[1]));break}if(!0!==T)if(T&&p["throws"])B=T(B);else try{B=T(B)}catch(R){N={state:"parsererror",error:T?R:"No conversion from "+P+" to "+F};break a}}N={state:"success",data:B}}y=N;q?(u.ifModified&&(A=M.getResponseHeader("Last-Modified"),A&&(l.lastModified[g]=A),A=M.getResponseHeader("etag"),A&&(l.etag[g]=A)),204===d||"HEAD"===u.type?H="nocontent":304===d?H="notmodified":
(H=y.state,r=y.data,x=y.error,q=!x)):(x=H,!d&&H||(H="error",0>d&&(d=0)));M.status=d;M.statusText=(e||H)+"";q?E.resolveWith(z,[r,H,M]):E.rejectWith(z,[M,H,x]);M.statusCode(L);L=void 0;t&&C.trigger(q?"ajaxSuccess":"ajaxError",[M,u,q?r:x]);K.fireWith(z,[M,H]);t&&(C.trigger("ajaxComplete",[M,u]),--l.active||l.event.trigger("ajaxStop"))}}"object"==typeof d&&(e=d,d=void 0);e=e||{};var f,g,n,p,m,q,s,t,r,x,u=l.ajaxSetup({},e),z=u.context||u,C=u.context&&(z.nodeType||z.jquery)?l(z):l.event,E=l.Deferred(),
K=l.Callbacks("once memory"),L=u.statusCode||{},I={},G={},F="canceled",M={readyState:0,getResponseHeader:function(c){var d;if(s){if(!p)for(p={};d=Ed.exec(n);)p[d[1].toLowerCase()]=d[2];d=p[c.toLowerCase()]}return null==d?null:d},getAllResponseHeaders:function(){return s?n:null},setRequestHeader:function(c,d){return null==s&&(c=G[c.toLowerCase()]=G[c.toLowerCase()]||c,I[c]=d),this},overrideMimeType:function(c){return null==s&&(u.mimeType=c),this},statusCode:function(c){var d;if(c)if(s)M.always(c[M.status]);
else for(d in c)L[d]=[L[d],c[d]];return this},abort:function(c){c=c||F;return f&&f.abort(c),j(0,c),this}};if(E.promise(M),u.url=((d||u.url||La.href)+"").replace(Gd,La.protocol+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(W)||[""],null==u.crossDomain){q=B.createElement("a");try{q.href=u.url,q.href=q.href,u.crossDomain=zb.protocol+"//"+zb.host!=q.protocol+"//"+q.host}catch(J){u.crossDomain=!0}}if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=
l.param(u.data,u.traditional)),Tb(yc,u,e,M),s)return M;(t=l.event&&u.global)&&0===l.active++&&l.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!Fd.test(u.type);g=u.url.replace(Cd,"");u.hasContent?u.data&&u.processData&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&(u.data=u.data.replace(Bd,"+")):(x=u.url.slice(g.length),u.data&&(g+=(yb.test(g)?"&":"?")+u.data,delete u.data),!1===u.cache&&(g=g.replace(Dd,"$1"),x=(yb.test(g)?"&":"?")+"_="+wc++ +x),u.url=
g+x);u.ifModified&&(l.lastModified[g]&&M.setRequestHeader("If-Modified-Since",l.lastModified[g]),l.etag[g]&&M.setRequestHeader("If-None-Match",l.etag[g]));(u.data&&u.hasContent&&!1!==u.contentType||e.contentType)&&M.setRequestHeader("Content-Type",u.contentType);M.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+zc+"; q=0.01":""):u.accepts["*"]);for(r in u.headers)M.setRequestHeader(r,u.headers[r]);if(u.beforeSend&&(!1===u.beforeSend.call(z,
M,u)||s))return M.abort();if(F="abort",K.add(u.complete),M.done(u.success),M.fail(u.error),f=Tb(kb,u,e,M)){if(M.readyState=1,t&&C.trigger("ajaxSend",[M,u]),s)return M;u.async&&0<u.timeout&&(m=c.setTimeout(function(){M.abort("timeout")},u.timeout));try{s=!1,f.send(I,j)}catch(O){if(s)throw O;j(-1,O)}}else j(-1,"No Transport");return M},getJSON:function(c,d,e){return l.get(c,d,e,"json")},getScript:function(c,d){return l.get(c,void 0,d,"script")}});l.each(["get","post"],function(c,d){l[d]=function(c,
e,j,f){return l.isFunction(e)&&(f=f||j,j=e,e=void 0),l.ajax(l.extend({url:c,type:d,dataType:f,data:e,success:j},l.isPlainObject(c)&&c))}});l._evalUrl=function(c){return l.ajax({url:c,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};l.fn.extend({wrapAll:function(c){var d;return this[0]&&(l.isFunction(c)&&(c=c.call(this[0])),d=l(c,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var c=this;c.firstElementChild;)c=c.firstElementChild;
return c}).append(this)),this},wrapInner:function(c){return l.isFunction(c)?this.each(function(d){l(this).wrapInner(c.call(this,d))}):this.each(function(){var d=l(this),e=d.contents();e.length?e.wrapAll(c):d.append(c)})},wrap:function(c){var d=l.isFunction(c);return this.each(function(e){l(this).wrapAll(d?c.call(this,e):c)})},unwrap:function(c){return this.parent(c).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}});l.expr.pseudos.hidden=function(c){return!l.expr.pseudos.visible(c)};
l.expr.pseudos.visible=function(c){return!(!c.offsetWidth&&!c.offsetHeight&&!c.getClientRects().length)};l.ajaxSettings.xhr=function(){try{return new c.XMLHttpRequest}catch(d){}};var Hd={"0":200,1223:204},Ma=l.ajaxSettings.xhr();J.cors=!!Ma&&"withCredentials"in Ma;J.ajax=Ma=!!Ma;l.ajaxTransport(function(d){var e,j;if(J.cors||Ma&&!d.crossDomain)return{send:function(f,g){var l,n=d.xhr();if(n.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(l in d.xhrFields)n[l]=d.xhrFields[l];d.mimeType&&
n.overrideMimeType&&n.overrideMimeType(d.mimeType);d.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");for(l in f)n.setRequestHeader(l,f[l]);e=function(c){return function(){e&&(e=j=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===c?n.abort():"error"===c?"number"!=typeof n.status?g(0,"error"):g(n.status,n.statusText):g(Hd[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},
n.getAllResponseHeaders()))}};n.onload=e();j=n.onerror=e("error");void 0!==n.onabort?n.onabort=j:n.onreadystatechange=function(){4===n.readyState&&c.setTimeout(function(){e&&j()})};e=e("abort");try{n.send(d.hasContent&&d.data||null)}catch(p){if(e)throw p;}},abort:function(){e&&e()}}});l.ajaxPrefilter(function(c){c.crossDomain&&(c.contents.script=!1)});l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},
converters:{"text script":function(c){return l.globalEval(c),c}}});l.ajaxPrefilter("script",function(c){void 0===c.cache&&(c.cache=!1);c.crossDomain&&(c.type="GET")});l.ajaxTransport("script",function(c){if(c.crossDomain){var d,e;return{send:function(j,f){d=l("<script>").prop({charset:c.scriptCharset,src:c.url}).on("load error",e=function(c){d.remove();e=null;c&&f("error"===c.type?404:200,c.type)});B.head.appendChild(d[0])},abort:function(){e&&e()}}}});var Ac=[],Ab=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var c=Ac.pop()||l.expando+"_"+wc++;return this[c]=!0,c}});l.ajaxPrefilter("json jsonp",function(d,e,j){var f,g,n,p=!1!==d.jsonp&&(Ab.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ab.test(d.data)&&"data");if(p||"jsonp"===d.dataTypes[0])return f=d.jsonpCallback=l.isFunction(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,p?d[p]=d[p].replace(Ab,"$1"+f):!1!==d.jsonp&&(d.url+=(yb.test(d.url)?"&":"?")+d.jsonp+
"="+f),d.converters["script json"]=function(){return n||l.error(f+" was not called"),n[0]},d.dataTypes[0]="json",g=c[f],c[f]=function(){n=arguments},j.always(function(){void 0===g?l(c).removeProp(f):c[f]=g;d[f]&&(d.jsonpCallback=e.jsonpCallback,Ac.push(f));n&&l.isFunction(g)&&g(n[0]);n=g=void 0}),"script"});var Id=J,Bc,Cc=B.implementation.createHTMLDocument("").body;Bc=(Cc.innerHTML="<form></form><form></form>",2===Cc.childNodes.length);Id.createHTMLDocument=Bc;l.parseHTML=function(c,d,e){if("string"!=
typeof c)return[];"boolean"==typeof d&&(e=d,d=!1);var j,f,g;return d||(J.createHTMLDocument?(d=B.implementation.createHTMLDocument(""),j=d.createElement("base"),j.href=B.location.href,d.head.appendChild(j)):d=B),f=ic.exec(c),g=!e&&[],f?[d.createElement(f[1])]:(f=G([c],d,g),g&&g.length&&l(g).remove(),l.merge([],f.childNodes))};l.fn.load=function(c,d,e){var j,f,g,n=this,p=c.indexOf(" ");return-1<p&&(j=oa(c.slice(p)),c=c.slice(0,p)),l.isFunction(d)?(e=d,d=void 0):d&&"object"==typeof d&&(f="POST"),0<
n.length&&l.ajax({url:c,type:f||"GET",dataType:"html",data:d}).done(function(c){g=arguments;n.html(j?l("<div>").append(l.parseHTML(c)).find(j):c)}).always(e&&function(c,d){n.each(function(){e.apply(this,g||[c.responseText,d,c])})}),this};l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(c,d){l.fn[d]=function(c){return this.on(d,c)}});l.expr.pseudos.animated=function(c){return l.grep(l.timers,function(d){return c===d.elem}).length};l.offset={setOffset:function(c,
d,e){var j,f,g,n,p,q,m=l.css(c,"position"),s=l(c),t={};"static"===m&&(c.style.position="relative");p=s.offset();g=l.css(c,"top");q=l.css(c,"left");("absolute"===m||"fixed"===m)&&-1<(g+q).indexOf("auto")?(j=s.position(),n=j.top,f=j.left):(n=parseFloat(g)||0,f=parseFloat(q)||0);l.isFunction(d)&&(d=d.call(c,e,l.extend({},p)));null!=d.top&&(t.top=d.top-p.top+n);null!=d.left&&(t.left=d.left-p.left+f);"using"in d?d.using.call(c,t):s.css(t)}};l.fn.extend({offset:function(c){if(arguments.length)return void 0===
c?this:this.each(function(d){l.offset.setOffset(this,c,d)});var d,e,j,f,g=this[0];if(g)return g.getClientRects().length?(j=g.getBoundingClientRect(),d=g.ownerDocument,e=d.documentElement,f=d.defaultView,{top:j.top+f.pageYOffset-e.clientTop,left:j.left+f.pageXOffset-e.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var c,d,e=this[0],j={top:0,left:0};return"fixed"===l.css(e,"position")?d=e.getBoundingClientRect():(c=this.offsetParent(),d=this.offset(),g(c[0],"html")||(j=c.offset()),j={top:j.top+
l.css(c[0],"borderTopWidth",!0),left:j.left+l.css(c[0],"borderLeftWidth",!0)}),{top:d.top-j.top-l.css(e,"marginTop",!0),left:d.left-j.left-l.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent;c&&"static"===l.css(c,"position");)c=c.offsetParent;return c||eb})}});l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var e="pageYOffset"===d;l.fn[c]=function(j){return ha(this,function(c,j,f){var g;return l.isWindow(c)?g=c:9===c.nodeType&&
(g=c.defaultView),void 0===f?g?g[d]:c[j]:void(g?g.scrollTo(e?g.pageXOffset:f,e?f:g.pageYOffset):c[j]=f)},c,j,arguments.length)}});l.each(["top","left"],function(c,d){l.cssHooks[d]=Jb(J.pixelPosition,function(c,e){if(e)return e=Ga(c,d),hb.test(e)?l(c).position()[d]+"px":e})});l.each({Height:"height",Width:"width"},function(c,d){l.each({padding:"inner"+c,content:d,"":"outer"+c},function(e,j){l.fn[j]=function(f,g){var n=arguments.length&&(e||"boolean"!=typeof f),p=e||(!0===f||!0===g?"margin":"border");
return ha(this,function(d,e,f){var g;return l.isWindow(d)?0===j.indexOf("outer")?d["inner"+c]:d.document.documentElement["client"+c]:9===d.nodeType?(g=d.documentElement,Math.max(d.body["scroll"+c],g["scroll"+c],d.body["offset"+c],g["offset"+c],g["client"+c])):void 0===f?l.css(d,e,p):l.style(d,e,f,p)},d,n?f:void 0,n)}})});l.fn.extend({bind:function(c,d,e){return this.on(c,null,d,e)},unbind:function(c,d){return this.off(c,null,d)},delegate:function(c,d,e,j){return this.on(d,c,e,j)},undelegate:function(c,
d,e){return 1===arguments.length?this.off(c,"**"):this.off(d,c||"**",e)}});l.holdReady=function(c){c?l.readyWait++:l.ready(!0)};l.isArray=Array.isArray;l.parseJSON=JSON.parse;l.nodeName=g;"function"==typeof define&&define.amd&&define("jquery",[],function(){return l});var Jd=c.jQuery,Kd=c.$;return l.noConflict=function(d){return c.$===l&&(c.$=Kd),d&&c.jQuery===l&&(c.jQuery=Jd),l},d||(c.jQuery=c.$=l),l});function getInternetExplorerVersion(){var c=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(c=parseFloat(RegExp.$1));return c}var ie=getInternetExplorerVersion();function getQueryVariable(c){for(var d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(decodeURIComponent(f[0])==c)return decodeURIComponent(f[1])}};this.jukebox={};
jukebox.Player=function(c,d){this.id=++jukebox.__jukeboxId;this.origin=d||null;this.settings={};for(var e in this.defaults)this.settings[e]=this.defaults[e];if("[object Object]"===Object.prototype.toString.call(c))for(var f in c)this.settings[f]=c[f];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||
null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var c=this,d=this.settings,e={},f;jukebox.Manager&&void 0!==jukebox.Manager.features&&(e=jukebox.Manager.features);if(!0===e.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var g=function(d){c.__addToManager(d)};
this.context.addEventListener("canplaythrough",g,!0);window.setTimeout(function(){c.context.removeEventListener("canplaythrough",g,!0);g("timeout")},d.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(f in this.HTML5API)this[f]=this.HTML5API[f];1<e.channels?!0===d.autoplay?this.context.autoplay=!0:void 0!==d.spritemap[d.autoplay]&&this.play(d.autoplay):1===e.channels&&void 0!==d.spritemap[d.autoplay]&&(this.backgroundMusic=d.spritemap[d.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(d.autoplay));1==e.channels&&!0!==d.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==c.isPlaying&&(c.pause(),c.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){c.__wasAutoPaused&&(c.resume(),delete c._wasAutoPaused)}))}else if(!0===e.flashaudio){for(f in this.FLASHAPI)this[f]=this.FLASHAPI[f];e=["id=jukebox-flashstream-"+this.id,"autoplay="+d.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(e);
!0===d.autoplay?this.play(0):d.spritemap[d.autoplay]&&this.play(d.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(c){var d,e=this.settings.flashMediaElement,f,g={flashvars:c.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){d=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(d);var m=document.createElement("object");
m.id="jukebox-flashstream-"+this.id;m.setAttribute("type","application/x-shockwave-flash");m.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");m.setAttribute("width","0");m.setAttribute("height","0");g.movie=e+"?x="+(Date.now?Date.now():+new Date);g.flashvars=c.join("&amp;");for(f in g)c=document.createElement("param"),c.setAttribute("name",f),c.setAttribute("value",g[f]),m.appendChild(c);d.outerHTML=m.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{d=
document.createElement("embed");d.id="jukebox-flashstream-"+this.id;d.setAttribute("type","application/x-shockwave-flash");d.setAttribute("width","100");d.setAttribute("height","100");g.play=!1;g.loop=!1;g.src=e+"?x="+(Date.now?Date.now():+new Date);for(f in g)d.setAttribute(f,g[f]);document.getElementsByTagName("body")[0].appendChild(d);this.context=d}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var c=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
c,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(c-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(c,d){if(null!==this.isPlaying&&!0!==d)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(c,this.id);else{var e=this.settings.spritemap,f;if(void 0!==e[c])f=e[c].start;else if("number"===typeof c){f=c;for(var g in e)if(f>=e[g].start&&f<=
e[g].end){c=g;break}}void 0!==f&&"[object Object]"===Object.prototype.toString.call(e[c])&&(this.isPlaying=this.settings.spritemap[c],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(f))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(c){c="number"===
typeof c?c:this.__lastPosition;if(null!==c)return this.play(c),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(c){this.context.volume=c;return 1E-4>Math.abs(this.context.volume-c)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(c){try{return this.context.currentTime=c,!0}catch(d){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(c){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(c),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(c){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(c):!1}}};
if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(c){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var d in this.defaults)this.settings[d]=this.defaults[d];if("[object Object]"===Object.prototype.toString.call(c))for(var e in c)this.settings[e]=c[e];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var c=window.Audio&&new Audio;if(c&&c.canPlayType&&!1===this.settings.useFlash){for(var d=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
e,f,g=0,m=d.length;g<m;g++)if(f=d[g].e,d[g].m.length&&"object"===typeof d[g].m)for(var r=0,s=d[g].m.length;r<s;r++)if(e=d[g].m[r],""!==c.canPlayType(e)){this.codecs[f]=e;break}else this.codecs[f]||(this.codecs[f]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;c.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(c.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(j){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(c){return this.__players&&void 0!==this.__players[c]?this.__players[c]:null},__getClone:function(c,d){for(var e in this.__clones){var f=this.__clones[e];if(null===f.isPlaying&&f.origin===c)return f}if("[object Object]"===Object.prototype.toString.call(d)){e={};for(var g in d)e[g]=d[g];e.autoplay=!1;g=new jukebox.Player(e,c);g.isClone=!0;g.wasReady=!1;return this.__clones[g.id]=g}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var c=this.__queue[0],d=this.__getPlayerById(c.origin);if(null!==d){var e=this.__getClone(c.origin,d.settings);null!==e&&(!0===this.features.volume&&(d=this.__players[c.origin])&&e.setVolume(d.getVolume()),this.add(e),e.play(c.pointer,!0))}this.__queue.splice(0,1)}else for(e in this.__queue.length&&1===this.features.channels&&(c=this.__queue[0],d=this.__getPlayerById(c.origin),null!==d&&d.play(c.pointer,!0),this.__queue.splice(0,1)),this.__players)c=this.__players[e],
d=c.getCurrentTime()||0,c.isPlaying&&!1===c.wasReady?c.wasReady=c.setCurrentTime(c.isPlaying.start):c.isPlaying&&!0===c.wasReady?d>c.isPlaying.end&&(!0===c.isPlaying.loop?c.play(c.isPlaying.start,!0):c.stop()):c.isClone&&null===c.isPlaying?this.remove(c):void 0!==c.backgroundMusic&&null===c.isPlaying&&d>c.backgroundMusic.end&&c.backgroundHackForiOS()},getPlayableResource:function(c){"[object Array]"!==Object.prototype.toString.call(c)&&(c=[c]);for(var d=0,e=c.length;d<e;d++){var f=c[d],g=f.match(/\.([^\.]*)$/)[1];
if(g&&this.codecs[g])return f}return null},add:function(c){return c instanceof jukebox.Player&&void 0===this.__players[c.id]?(this.__playersLength++,this.__players[c.id]=c,!0):!1},remove:function(c){return c instanceof jukebox.Player&&void 0!==this.__players[c.id]?(this.__playersLength--,delete this.__players[c.id],!0):!1},addToQueue:function(c,d){return("string"===typeof c||"number"===typeof c)&&void 0!==this.__players[d]?(this.__queue.push({pointer:c,origin:d}),!0):!1}};(function(){var c=function(){this.init()};c.prototype={init:function(){var c=this||d;c._codecs={};c._howls=[];c._muted=!1;c._volume=1;c._canPlayEvent="canplaythrough";c._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null;c.masterGain=null;c.noAudio=!1;c.usingWebAudio=!0;c.autoSuspend=!0;c.ctx=null;c.mobileAutoEnable=!0;c._setup();return c},volume:function(c){var e=this||d;c=parseFloat(c);e.ctx||s();if("undefined"!==typeof c&&0<=c&&1>=c){e._volume=c;if(e._muted)return e;
e.usingWebAudio&&(e.masterGain.gain.value=c);for(var f=0;f<e._howls.length;f++)if(!e._howls[f]._webAudio)for(var g=e._howls[f]._getSoundIds(),m=0;m<g.length;m++){var r=e._howls[f]._soundById(g[m]);r&&r._node&&(r._node.volume=r._volume*c)}return e}return e._volume},mute:function(c){var e=this||d;e.ctx||s();e._muted=c;e.usingWebAudio&&(e.masterGain.gain.value=c?0:e._volume);for(var f=0;f<e._howls.length;f++)if(!e._howls[f]._webAudio)for(var g=e._howls[f]._getSoundIds(),m=0;m<g.length;m++){var r=e._howls[f]._soundById(g[m]);
r&&r._node&&(r._node.muted=c?!0:r._muted)}return e},unload:function(){for(var c=this||d,e=c._howls.length-1;0<=e;e--)c._howls[e].unload();c.usingWebAudio&&(c.ctx&&"undefined"!==typeof c.ctx.close)&&(c.ctx.close(),c.ctx=null,s());return c},codecs:function(c){return(this||d)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||d;c.state=c.ctx?c.ctx.state||"running":"running";c._autoSuspend();if(!c.usingWebAudio)if("undefined"!==typeof Audio)try{var e=new Audio;"undefined"===typeof e.oncanplaythrough&&
(c._canPlayEvent="canplay")}catch(f){c.noAudio=!0}else c.noAudio=!0;try{e=new Audio,e.muted&&(c.noAudio=!0)}catch(g){}c.noAudio||c._setupCodecs();return c},_setupCodecs:function(){var c=this||d,e=null;try{e="undefined"!==typeof Audio?new Audio:null}catch(f){return c}if(!e||"function"!==typeof e.canPlayType)return c;var g=e.canPlayType("audio/mpeg;").replace(/^no$/,""),m=c._navigator&&c._navigator.userAgent.match(/OPR\/([0-6].)/g),m=m&&33>parseInt(m[0].split("index.html")[1],10);c._codecs={mp3:!(m||!g&&!e.canPlayType("audio/mp3;").replace(/^no$/,
"")),mpeg:!!g,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,
""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")};return c},_enableMobileAudio:function(){var c=this||d,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(c._navigator&&
c._navigator.userAgent),f=!!("ontouchend"in window||c._navigator&&0<c._navigator.maxTouchPoints||c._navigator&&0<c._navigator.msMaxTouchPoints);if(!c._mobileEnabled&&c.ctx&&(e||f)){c._mobileEnabled=!1;!c._mobileUnloaded&&44100!==c.ctx.sampleRate&&(c._mobileUnloaded=!0,c.unload());c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var g=function(){var d=c.ctx.createBufferSource();d.buffer=c._scratchBuffer;d.connect(c.ctx.destination);"undefined"===typeof d.start?d.noteOn(0):d.start(0);d.onended=function(){d.disconnect(0);
c._mobileEnabled=!0;c.mobileAutoEnable=!1;document.removeEventListener("touchend",g,!0)}};document.addEventListener("touchend",g,!0);return c}},_autoSuspend:function(){var c=this;if(c.autoSuspend&&c.ctx&&"undefined"!==typeof c.ctx.suspend&&d.usingWebAudio){for(var e=0;e<c._howls.length;e++)if(c._howls[e]._webAudio)for(var f=0;f<c._howls[e]._sounds.length;f++)if(!c._howls[e]._sounds[f]._paused)return c;c._suspendTimer&&clearTimeout(c._suspendTimer);c._suspendTimer=setTimeout(function(){c.autoSuspend&&
(c._suspendTimer=null,c.state="suspending",c.ctx.suspend().then(function(){c.state="suspended";c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())}))},3E4);return c}},_autoResume:function(){var c=this;if(c.ctx&&"undefined"!==typeof c.ctx.resume&&d.usingWebAudio)return"running"===c.state&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):"suspended"===c.state?(c.state="resuming",c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),
c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):"suspending"===c.state&&(c._resumeAfterSuspend=!0),c}};var d=new c,e=function(c){!c.src||0===c.src.length?console.error("An array of source files must be passed with any new Howl."):this.init(c)};e.prototype={init:function(c){var e=this;d.ctx||s();e._autoplay=c.autoplay||!1;e._format="string"!==typeof c.format?c.format:[c.format];e._html5=c.html5||!1;e._muted=c.mute||!1;e._loop=c.loop||!1;e._pool=c.pool||5;e._preload="boolean"===
typeof c.preload?c.preload:!0;e._rate=c.rate||1;e._sprite=c.sprite||{};e._src="string"!==typeof c.src?c.src:[c.src];e._volume=void 0!==c.volume?c.volume:1;e._duration=0;e._state="unloaded";e._sounds=[];e._endTimers={};e._queue=[];e._onend=c.onend?[{fn:c.onend}]:[];e._onfade=c.onfade?[{fn:c.onfade}]:[];e._onload=c.onload?[{fn:c.onload}]:[];e._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[];e._onpause=c.onpause?[{fn:c.onpause}]:[];e._onplay=c.onplay?[{fn:c.onplay}]:[];e._onstop=c.onstop?[{fn:c.onstop}]:
[];e._onmute=c.onmute?[{fn:c.onmute}]:[];e._onvolume=c.onvolume?[{fn:c.onvolume}]:[];e._onrate=c.onrate?[{fn:c.onrate}]:[];e._onseek=c.onseek?[{fn:c.onseek}]:[];e._onresume=[];e._webAudio=d.usingWebAudio&&!e._html5;"undefined"!==typeof d.ctx&&(d.ctx&&d.mobileAutoEnable)&&d._enableMobileAudio();d._howls.push(e);e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}});e._preload&&e.load();return e},load:function(){var c=null;if(d.noAudio)this._emit("loaderror",null,"No audio support.");
else{"string"===typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var p,q;if(this._format&&this._format[e])p=this._format[e];else{q=this._src[e];if("string"!==typeof q){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(p=/^data:audio\/([^;,]+);/i.exec(q))||(p=/\.([^.]+)$/.exec(q.split("?",1)[0]));p&&(p=p[1].toLowerCase())}if(d.codecs(p)){c=this._src[e];break}}if(c){this._src=c;this._state="loading";"https:"===window.location.protocol&&
"http:"===c.slice(0,5)&&(this._html5=!0,this._webAudio=!1);new f(this);if(this._webAudio){var s=this,x=s._src;if(g[x])s._duration=g[x].duration,r(s);else if(/^data:[^;]+;base64,/.test(x)){c=atob(x.split(",")[1]);e=new Uint8Array(c.length);for(p=0;p<c.length;++p)e[p]=c.charCodeAt(p);m(e.buffer,s)}else{var u=new XMLHttpRequest;u.open("GET.html",x,!0);u.responseType="arraybuffer";u.onload=function(){var c=(u.status+"")[0];"0"!==c&&"2"!==c&&"3"!==c?s._emit("loaderror",null,"Failed loading audio file with status: "+
u.status+"."):m(u.response,s)};u.onerror=function(){s._webAudio&&(s._html5=!0,s._webAudio=!1,s._sounds=[],delete g[x],s.load())};try{u.send()}catch(z){u.onerror()}}}return this}this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(c,e){var f=this,g=null;if("number"===typeof c)g=c,c=null;else{if("string"===typeof c&&"loaded"===f._state&&!f._sprite[c])return null;if("undefined"===typeof c){c="__default";for(var m=0,s=0;s<f._sounds.length;s++)f._sounds[s]._paused&&
!f._sounds[s]._ended&&(m++,g=f._sounds[s]._id);1===m?c=null:g=null}}var r=g?f._soundById(g):f._inactiveSound();if(!r)return null;g&&!c&&(c=r._sprite||"__default");if("loaded"!==f._state&&!f._sprite[c])return f._queue.push({event:"play",action:function(){f.play(f._soundById(r._id)?r._id:void 0)}}),r._id;if(g&&!r._paused)return e||setTimeout(function(){f._emit("play",r._id)},0),r._id;f._webAudio&&d._autoResume();var z=Math.max(0,0<r._seek?r._seek:f._sprite[c][0]/1E3),I=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/
1E3-z),G=1E3*I/Math.abs(r._rate);r._paused=!1;r._ended=!1;r._sprite=c;r._seek=z;r._start=f._sprite[c][0]/1E3;r._stop=(f._sprite[c][0]+f._sprite[c][1])/1E3;r._loop=!(!r._loop&&!f._sprite[c][2]);var L=r._node;if(f._webAudio)g=function(){f._refreshBuffer(r);L.gain.setValueAtTime(r._muted||f._muted?0:r._volume,d.ctx.currentTime);r._playStart=d.ctx.currentTime;"undefined"===typeof L.bufferSource.start?r._loop?L.bufferSource.noteGrainOn(0,z,86400):L.bufferSource.noteGrainOn(0,z,I):r._loop?L.bufferSource.start(0,
z,86400):L.bufferSource.start(0,z,I);Infinity!==G&&(f._endTimers[r._id]=setTimeout(f._ended.bind(f,r),G));e||setTimeout(function(){f._emit("play",r._id)},0)},m="running"===d.state,"loaded"===f._state&&m?g():(f.once(m?"load":"resume",g,m?r._id:null),f._clearTimer(r._id));else{var V=function(){L.currentTime=z;L.muted=r._muted||f._muted||d._muted||L.muted;L.volume=r._volume*d.volume();L.playbackRate=r._rate;setTimeout(function(){L.play();Infinity!==G&&(f._endTimers[r._id]=setTimeout(f._ended.bind(f,
r),G));e||f._emit("play",r._id)},0)},g="loaded"===f._state&&(window&&window.ejecta||!L.readyState&&d._navigator.isCocoonJS);if(4===L.readyState||g)V();else{var ma=function(){V();L.removeEventListener(d._canPlayEvent,ma,!1)};L.addEventListener(d._canPlayEvent,ma,!1);f._clearTimer(r._id)}}return r._id},pause:function(c,d){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(c)}}),e;for(var f=e._getSoundIds(c),g=0;g<f.length;g++){e._clearTimer(f[g]);var m=e._soundById(f[g]);
if(m&&!m._paused&&(m._seek=e.seek(f[g]),m._rateSeek=0,m._paused=!0,e._stopFade(f[g]),m._node))if(e._webAudio){if(!m._node.bufferSource)break;"undefined"===typeof m._node.bufferSource.stop?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0);e._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||Infinity===m._node.duration)&&m._node.pause();d||e._emit("pause",m?m._id:null)}return e},stop:function(c,d){var e=this;if("loaded"!==e._state)return e._queue.push({event:"stop",action:function(){e.stop(c)}}),
e;for(var f=e._getSoundIds(c),g=0;g<f.length;g++){e._clearTimer(f[g]);var m=e._soundById(f[g]);if(m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,e._stopFade(f[g]),m._node))if(e._webAudio){if(!m._node.bufferSource){d||e._emit("stop",m._id);break}"undefined"===typeof m._node.bufferSource.stop?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0);e._cleanBuffer(m._node)}else if(!isNaN(m._node.duration)||Infinity===m._node.duration)m._node.currentTime=m._start||0,m._node.pause();
m&&!d&&e._emit("stop",m._id)}return e},mute:function(c,e){var f=this;if("loaded"!==f._state)return f._queue.push({event:"mute",action:function(){f.mute(c,e)}}),f;if("undefined"===typeof e)if("boolean"===typeof c)f._muted=c;else return f._muted;for(var g=f._getSoundIds(e),m=0;m<g.length;m++){var s=f._soundById(g[m]);s&&(s._muted=c,f._webAudio&&s._node?s._node.gain.setValueAtTime(c?0:s._volume,d.ctx.currentTime):s._node&&(s._node.muted=d._muted?!0:c),f._emit("mute",s._id))}return f},volume:function(){var c=
this,e=arguments,f,g;if(0===e.length)return c._volume;1===e.length||2===e.length&&"undefined"===typeof e[1]?0<=c._getSoundIds().indexOf(e[0])?g=parseInt(e[0],10):f=parseFloat(e[0]):2<=e.length&&(f=parseFloat(e[0]),g=parseInt(e[1],10));var m;if("undefined"!==typeof f&&0<=f&&1>=f){if("loaded"!==c._state)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,e)}}),c;"undefined"===typeof g&&(c._volume=f);g=c._getSoundIds(g);for(var s=0;s<g.length;s++)if(m=c._soundById(g[s]))m._volume=
f,e[2]||c._stopFade(g[s]),c._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(f,d.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=f*d.volume()),c._emit("volume",m._id)}else return(m=g?c._soundById(g):c._sounds[0])?m._volume:0;return c},fade:function(c,e,f,g){var m=this,s=Math.abs(c-e),r=c>e?"out":"in",z=s/0.01,s=0<z?f/z:f;4>s&&(z=Math.ceil(z/(4/s)),s=4);if("loaded"!==m._state)return m._queue.push({event:"fade",action:function(){m.fade(c,e,f,g)}}),m;m.volume(c,g);for(var I=m._getSoundIds(g),
G=0;G<I.length;G++){var L=m._soundById(I[G]);if(L){g||m._stopFade(I[G]);if(m._webAudio&&!L._muted){var V=d.ctx.currentTime,ma=V+f/1E3;L._volume=c;L._node.gain.setValueAtTime(c,V);L._node.gain.linearRampToValueAtTime(e,ma)}var Q=c;L._interval=setInterval(function(c,d){0<z&&(Q+="in"===r?0.01:-0.01);Q=Math.max(0,Q);Q=Math.min(1,Q);Q=Math.round(100*Q)/100;m._webAudio?("undefined"===typeof g&&(m._volume=Q),d._volume=Q):m.volume(Q,c,!0);Q===e&&(clearInterval(d._interval),d._interval=null,m.volume(Q,c),
m._emit("fade",c))}.bind(m,I[G],L),s)}}return m},_stopFade:function(c){var e=this._soundById(c);e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(d.ctx.currentTime),clearInterval(e._interval),e._interval=null,this._emit("fade",c));return this},loop:function(){var c=arguments,d,e;if(0===c.length)return this._loop;if(1===c.length)if("boolean"===typeof c[0])this._loop=d=c[0];else return(c=this._soundById(parseInt(c[0],10)))?c._loop:!1;else 2===c.length&&(d=c[0],e=parseInt(c[1],10));
e=this._getSoundIds(e);for(var f=0;f<e.length;f++)if(c=this._soundById(e[f]))if(c._loop=d,this._webAudio&&(c._node&&c._node.bufferSource)&&(c._node.bufferSource.loop=d))c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop;return this},rate:function(){var c=this,e=arguments,f,g;0===e.length?g=c._sounds[0]._id:1===e.length?0<=c._getSoundIds().indexOf(e[0])?g=parseInt(e[0],10):f=parseFloat(e[0]):2===e.length&&(f=parseFloat(e[0]),g=parseInt(e[1],10));var m;if("number"===typeof f){if("loaded"!==
c._state)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,e)}}),c;"undefined"===typeof g&&(c._rate=f);g=c._getSoundIds(g);for(var s=0;s<g.length;s++)if(m=c._soundById(g[s])){m._rateSeek=c.seek(g[s]);m._playStart=c._webAudio?d.ctx.currentTime:m._playStart;m._rate=f;c._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.value=f:m._node&&(m._node.playbackRate=f);var r=c.seek(g[s]),r=1E3*((c._sprite[m._sprite][0]+c._sprite[m._sprite][1])/1E3-r)/Math.abs(m._rate);
if(c._endTimers[g[s]]||!m._paused)c._clearTimer(g[s]),c._endTimers[g[s]]=setTimeout(c._ended.bind(c,m),r);c._emit("rate",m._id)}}else return(m=c._soundById(g))?m._rate:c._rate;return c},seek:function(){var c=this,e=arguments,f,g;0===e.length?g=c._sounds[0]._id:1===e.length?0<=c._getSoundIds().indexOf(e[0])?g=parseInt(e[0],10):(g=c._sounds[0]._id,f=parseFloat(e[0])):2===e.length&&(f=parseFloat(e[0]),g=parseInt(e[1],10));if("undefined"===typeof g)return c;if("loaded"!==c._state)return c._queue.push({event:"seek",
action:function(){c.seek.apply(c,e)}}),c;var m=c._soundById(g);if(m)if("number"===typeof f&&0<=f){var s=c.playing(g);s&&c.pause(g,!0);m._seek=f;m._ended=!1;c._clearTimer(g);s&&c.play(g,!0);!c._webAudio&&m._node&&(m._node.currentTime=f);c._emit("seek",g)}else return c._webAudio?(f=c.playing(g)?d.ctx.currentTime-m._playStart:0,m._seek+((m._rateSeek?m._rateSeek-m._seek:0)+f*Math.abs(m._rate))):m._node.currentTime;return c},playing:function(c){if("number"===typeof c)return(c=this._soundById(c))?!c._paused:
!1;for(c=0;c<this._sounds.length;c++)if(!this._sounds[c]._paused)return!0;return!1},duration:function(c){var d=this._duration;(c=this._soundById(c))&&(d=this._sprite[c._sprite][1]/1E3);return d},state:function(){return this._state},unload:function(){for(var c=this._sounds,e=0;e<c.length;e++){c[e]._paused||(this.stop(c[e]._id),this._emit("end",c[e]._id));this._webAudio||(c[e]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",c[e]._node.removeEventListener("error",
c[e]._errorFn,!1),c[e]._node.removeEventListener(d._canPlayEvent,c[e]._loadFn,!1));delete c[e]._node;this._clearTimer(c[e]._id);var f=d._howls.indexOf(this);0<=f&&d._howls.splice(f,1)}c=!0;for(e=0;e<d._howls.length;e++)if(d._howls[e]._src===this._src){c=!1;break}g&&c&&delete g[this._src];d.noAudio=!1;this._state="unloaded";this._sounds=[];return null},on:function(c,d,e,f){c=this["_on"+c];"function"===typeof d&&c.push(f?{id:e,fn:d,once:f}:{id:e,fn:d});return this},off:function(c,d,e){var f=this["_on"+
c],g=0;if(d)for(g=0;g<f.length;g++){if(d===f[g].fn&&e===f[g].id){f.splice(g,1);break}}else if(c)this["_on"+c]=[];else{c=Object.keys(this);for(g=0;g<c.length;g++)0===c[g].indexOf("_on")&&Array.isArray(this[c[g]])&&(this[c[g]]=[])}return this},once:function(c,d,e){this.on(c,d,e,1);return this},_emit:function(c,d,e){for(var f=this["_on"+c],g=f.length-1;0<=g;g--)if(!f[g].id||f[g].id===d||"load"===c)setTimeout(function(c){c.call(this,d,e)}.bind(this,f[g].fn),0),f[g].once&&this.off(c,f[g].fn,f[g].id);return this},
_loadQueue:function(){var c=this;if(0<c._queue.length){var d=c._queue[0];c.once(d.event,function(){c._queue.shift();c._loadQueue()});d.action()}return c},_ended:function(c){var e=c._sprite,e=!(!c._loop&&!this._sprite[e][2]);this._emit("end",c._id);!this._webAudio&&e&&this.stop(c._id,!0).play(c._id);if(this._webAudio&&e){this._emit("play",c._id);c._seek=c._start||0;c._rateSeek=0;c._playStart=d.ctx.currentTime;var f=1E3*(c._stop-c._start)/Math.abs(c._rate);this._endTimers[c._id]=setTimeout(this._ended.bind(this,
c),f)}this._webAudio&&!e&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,this._clearTimer(c._id),this._cleanBuffer(c._node),d._autoSuspend());!this._webAudio&&!e&&this.stop(c._id);return this},_clearTimer:function(c){this._endTimers[c]&&(clearTimeout(this._endTimers[c]),delete this._endTimers[c]);return this},_soundById:function(c){for(var d=0;d<this._sounds.length;d++)if(c===this._sounds[d]._id)return this._sounds[d];return null},_inactiveSound:function(){this._drain();for(var c=0;c<
this._sounds.length;c++)if(this._sounds[c]._ended)return this._sounds[c].reset();return new f(this)},_drain:function(){var c=this._pool,d=0,e=0;if(!(this._sounds.length<c)){for(e=0;e<this._sounds.length;e++)this._sounds[e]._ended&&d++;for(e=this._sounds.length-1;0<=e&&!(d<=c);e--)this._sounds[e]._ended&&(this._webAudio&&this._sounds[e]._node&&this._sounds[e]._node.disconnect(0),this._sounds.splice(e,1),d--)}},_getSoundIds:function(c){if("undefined"===typeof c){c=[];for(var d=0;d<this._sounds.length;d++)c.push(this._sounds[d]._id);
return c}return[c]},_refreshBuffer:function(c){c._node.bufferSource=d.ctx.createBufferSource();c._node.bufferSource.buffer=g[this._src];c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node);if(c._node.bufferSource.loop=c._loop)c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop;c._node.bufferSource.playbackRate.value=c._rate;return this},_cleanBuffer:function(c){if(this._scratchBuffer){c.bufferSource.onended=null;c.bufferSource.disconnect(0);
try{c.bufferSource.buffer=this._scratchBuffer}catch(d){}}c.bufferSource=null;return this}};var f=function(c){this._parent=c;this.init()};f.prototype={init:function(){var c=this._parent;this._muted=c._muted;this._loop=c._loop;this._volume=c._volume;this._muted=c._muted;this._rate=c._rate;this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=Math.round(Date.now()*Math.random());c._sounds.push(this);this.create();return this},create:function(){var c=this._parent,e=d._muted||this._muted||
this._parent._muted?0:this._volume;c._webAudio?(this._node="undefined"===typeof d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),this._node.gain.setValueAtTime(e,d.ctx.currentTime),this._node.paused=!0,this._node.connect(d.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(d._canPlayEvent,this._loadFn,!1),this._node.src=c._src,this._node.preload=
"auto",this._node.volume=e*d.volume(),this._node.load());return this},reset:function(){var c=this._parent;this._muted=c._muted;this._loop=c._loop;this._volume=c._volume;this._muted=c._muted;this._rate=c._rate;this._rateSeek=this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=Math.round(Date.now()*Math.random());return this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorListener,
!1)},_loadListener:function(){var c=this._parent;c._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(c._sprite).length&&(c._sprite={__default:[0,1E3*c._duration]});"loaded"!==c._state&&(c._state="loaded",c._emit("load"),c._loadQueue());this._node.removeEventListener(d._canPlayEvent,this._loadFn,!1)}};var g={},m=function(c,e){d.ctx.decodeAudioData(c,function(c){c&&0<e._sounds.length&&(g[e._src]=c,r(e,c))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},r=function(c,
d){d&&!c._duration&&(c._duration=d.duration);0===Object.keys(c._sprite).length&&(c._sprite={__default:[0,1E3*c._duration]});"loaded"!==c._state&&(c._state="loaded",c._emit("load"),c._loadQueue())},s=function(){try{"undefined"!==typeof AudioContext?d.ctx=new AudioContext:"undefined"!==typeof webkitAudioContext?d.ctx=new webkitAudioContext:d.usingWebAudio=!1}catch(c){d.usingWebAudio=!1}var e=/iP(hone|od|ad)/.test(d._navigator&&d._navigator.platform),f=d._navigator&&d._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
f=f?parseInt(f[1],10):null;if(e&&(f&&9>f)&&(e=/safari/.test(d._navigator&&d._navigator.userAgent.toLowerCase()),d._navigator&&d._navigator.standalone&&!e||d._navigator&&!d._navigator.standalone&&!e))d.usingWebAudio=!1;d.usingWebAudio&&(d.masterGain="undefined"===typeof d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),d.masterGain.gain.value=1,d.masterGain.connect(d.ctx.destination));d._setup()};"function"===typeof define&&define.amd&&define([],function(){return{Howler:d,Howl:e}});"undefined"!==
typeof exports&&(exports.Howler=d,exports.Howl=e);"undefined"!==typeof window?(window.HowlerGlobal=c,window.Howler=d,window.Howl=e,window.Sound=f):"undefined"!==typeof global&&(global.HowlerGlobal=c,global.Howler=d,global.Howl=e,global.Sound=f)})();
(function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(c){if(!this.ctx||!this.ctx.listener)return this;for(var d=this._howls.length-1;0<=d;d--)this._howls[d].stereo(c);return this};HowlerGlobal.prototype.pos=function(c,d,e){if(!this.ctx||!this.ctx.listener)return this;d="number"!==typeof d?this._pos[1]:d;e="number"!==typeof e?this._pos[2]:e;if("number"===typeof c)this._pos=[c,d,e],this.ctx.listener.setPosition(this._pos[0],
this._pos[1],this._pos[2]);else return this._pos;return this};HowlerGlobal.prototype.orientation=function(c,d,e,f,j,n){if(!this.ctx||!this.ctx.listener)return this;var p=this._orientation;d="number"!==typeof d?p[1]:d;e="number"!==typeof e?p[2]:e;f="number"!==typeof f?p[3]:f;j="number"!==typeof j?p[4]:j;n="number"!==typeof n?p[5]:n;if("number"===typeof c)this._orientation=[c,d,e,f,j,n],this.ctx.listener.setOrientation(c,d,e,f,j,n);else return p;return this};var c=Howl.prototype.init;Howl.prototype.init=
function(d){this._orientation=d.orientation||[1,0,0];this._stereo=d.stereo||null;this._pos=d.pos||null;this._pannerAttr={coneInnerAngle:"undefined"!==typeof d.coneInnerAngle?d.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof d.coneOuterAngle?d.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof d.coneOuterGain?d.coneOuterGain:0,distanceModel:"undefined"!==typeof d.distanceModel?d.distanceModel:"inverse",maxDistance:"undefined"!==typeof d.maxDistance?d.maxDistance:1E4,panningModel:"undefined"!==
typeof d.panningModel?d.panningModel:"HRTF",refDistance:"undefined"!==typeof d.refDistance?d.refDistance:1,rolloffFactor:"undefined"!==typeof d.rolloffFactor?d.rolloffFactor:1};this._onstereo=d.onstereo?[{fn:d.onstereo}]:[];this._onpos=d.onpos?[{fn:d.onpos}]:[];this._onorientation=d.onorientation?[{fn:d.onorientation}]:[];return c.call(this,d)};Howl.prototype.stereo=function(c,d){var e=this;if(!e._webAudio)return e;if("loaded"!==e._state)return e._queue.push({event:"stereo",action:function(){e.stereo(c,
d)}}),e;var s="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof d)if("number"===typeof c)e._stereo=c,e._pos=[c,0,0];else return e._stereo;for(var j=e._getSoundIds(d),n=0;n<j.length;n++){var p=e._soundById(j[n]);if(p)if("number"===typeof c)p._stereo=c,p._pos=[c,0,0],p._node&&(p._pannerAttr.panningModel="equalpower",(!p._panner||!p._panner.pan)&&f(p,s),"spatial"===s?p._panner.setPosition(c,0,0):p._panner.pan.value=c),e._emit("stereo",p._id);else return p._stereo}return e};
Howl.prototype.pos=function(c,d,e,s){var j=this;if(!j._webAudio)return j;if("loaded"!==j._state)return j._queue.push({event:"pos",action:function(){j.pos(c,d,e,s)}}),j;d="number"!==typeof d?0:d;e="number"!==typeof e?-0.5:e;if("undefined"===typeof s)if("number"===typeof c)j._pos=[c,d,e];else return j._pos;for(var n=j._getSoundIds(s),p=0;p<n.length;p++){var q=j._soundById(n[p]);if(q)if("number"===typeof c)q._pos=[c,d,e],q._node&&((!q._panner||q._panner.pan)&&f(q,"spatial"),q._panner.setPosition(c,d,
e)),j._emit("pos",q._id);else return q._pos}return j};Howl.prototype.orientation=function(c,d,e,s){var j=this;if(!j._webAudio)return j;if("loaded"!==j._state)return j._queue.push({event:"orientation",action:function(){j.orientation(c,d,e,s)}}),j;d="number"!==typeof d?j._orientation[1]:d;e="number"!==typeof e?j._orientation[2]:e;if("undefined"===typeof s)if("number"===typeof c)j._orientation=[c,d,e];else return j._orientation;for(var n=j._getSoundIds(s),p=0;p<n.length;p++){var q=j._soundById(n[p]);
if(q)if("number"===typeof c)q._orientation=[c,d,e],q._node&&(q._panner||(q._pos||(q._pos=j._pos||[0,0,-0.5]),f(q,"spatial")),q._panner.setOrientation(c,d,e)),j._emit("orientation",q._id);else return q._orientation}return j};Howl.prototype.pannerAttr=function(){var c=arguments,d,e;if(!this._webAudio)return this;if(0===c.length)return this._pannerAttr;if(1===c.length)if("object"===typeof c[0])d=c[0],"undefined"===typeof e&&(this._pannerAttr={coneInnerAngle:"undefined"!==typeof d.coneInnerAngle?d.coneInnerAngle:
this._coneInnerAngle,coneOuterAngle:"undefined"!==typeof d.coneOuterAngle?d.coneOuterAngle:this._coneOuterAngle,coneOuterGain:"undefined"!==typeof d.coneOuterGain?d.coneOuterGain:this._coneOuterGain,distanceModel:"undefined"!==typeof d.distanceModel?d.distanceModel:this._distanceModel,maxDistance:"undefined"!==typeof d.maxDistance?d.maxDistance:this._maxDistance,panningModel:"undefined"!==typeof d.panningModel?d.panningModel:this._panningModel,refDistance:"undefined"!==typeof d.refDistance?d.refDistance:
this._refDistance,rolloffFactor:"undefined"!==typeof d.rolloffFactor?d.rolloffFactor:this._rolloffFactor});else return(c=this._soundById(parseInt(c[0],10)))?c._pannerAttr:this._pannerAttr;else 2===c.length&&(d=c[0],e=parseInt(c[1],10));e=this._getSoundIds(e);for(var s=0;s<e.length;s++)if(c=this._soundById(e[s])){var j=c._pannerAttr,j={coneInnerAngle:"undefined"!==typeof d.coneInnerAngle?d.coneInnerAngle:j.coneInnerAngle,coneOuterAngle:"undefined"!==typeof d.coneOuterAngle?d.coneOuterAngle:j.coneOuterAngle,
coneOuterGain:"undefined"!==typeof d.coneOuterGain?d.coneOuterGain:j.coneOuterGain,distanceModel:"undefined"!==typeof d.distanceModel?d.distanceModel:j.distanceModel,maxDistance:"undefined"!==typeof d.maxDistance?d.maxDistance:j.maxDistance,panningModel:"undefined"!==typeof d.panningModel?d.panningModel:j.panningModel,refDistance:"undefined"!==typeof d.refDistance?d.refDistance:j.refDistance,rolloffFactor:"undefined"!==typeof d.rolloffFactor?d.rolloffFactor:j.rolloffFactor},n=c._panner;n?(n.coneInnerAngle=
j.coneInnerAngle,n.coneOuterAngle=j.coneOuterAngle,n.coneOuterGain=j.coneOuterGain,n.distanceModel=j.distanceModel,n.maxDistance=j.maxDistance,n.panningModel=j.panningModel,n.refDistance=j.refDistance,n.rolloffFactor=j.rolloffFactor):(c._pos||(c._pos=this._pos||[0,0,-0.5]),f(c,"spatial"))}return this};var d=Sound.prototype.init;Sound.prototype.init=function(){var c=this._parent;this._orientation=c._orientation;this._stereo=c._stereo;this._pos=c._pos;this._pannerAttr=c._pannerAttr;d.call(this);this._stereo?
c.stereo(this._stereo):this._pos&&c.pos(this._pos[0],this._pos[1],this._pos[2],this._id)};var e=Sound.prototype.reset;Sound.prototype.reset=function(){var c=this._parent;this._orientation=c._orientation;this._pos=c._pos;this._pannerAttr=c._pannerAttr;return e.call(this)};var f=function(c,d){"spatial"===(d||"spatial")?(c._panner=Howler.ctx.createPanner(),c._panner.coneInnerAngle=c._pannerAttr.coneInnerAngle,c._panner.coneOuterAngle=c._pannerAttr.coneOuterAngle,c._panner.coneOuterGain=c._pannerAttr.coneOuterGain,
c._panner.distanceModel=c._pannerAttr.distanceModel,c._panner.maxDistance=c._pannerAttr.maxDistance,c._panner.panningModel=c._pannerAttr.panningModel,c._panner.refDistance=c._pannerAttr.refDistance,c._panner.rolloffFactor=c._pannerAttr.rolloffFactor,c._panner.setPosition(c._pos[0],c._pos[1],c._pos[2]),c._panner.setOrientation(c._orientation[0],c._orientation[1],c._orientation[2])):(c._panner=Howler.ctx.createStereoPanner(),c._panner.pan.value=c._stereo);c._panner.connect(c._node);c._paused||c._parent.pause(c._id,
!0).play(c._id)}})();(function(c){Number.prototype.map=function(c,d,e,f){return e+(f-e)*((this-c)/(d-c))};Number.prototype.limit=function(c,d){return Math.min(d,Math.max(c,this))};Number.prototype.round=function(c){c=Math.pow(10,c||0);return Math.round(this*c)/c};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(c){for(var d=this.length;d--;)this[d]===c&&this.splice(d,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(c){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),e=this,f=function(){},g=function(){return e.apply(this instanceof f&&c?
this:c,d.concat(Array.prototype.slice.call(arguments)))};f.prototype=this.prototype;g.prototype=new f;return g};c.ig={game:null,debug:null,version:"1.23",global:c,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:c.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(c){return"#"==c.charAt(0)?document.getElementById(c.substr(1)):document.getElementsByTagName(c)},$new:function(c){return document.createElement(c)},copy:function(c){if(!c||"object"!=typeof c||
c instanceof HTMLElement||c instanceof ig.Class)return c;if(c instanceof Array)for(var d=[],e=0,f=c.length;e<f;e++)d[e]=ig.copy(c[e]);else for(e in d={},c)d[e]=ig.copy(c[e]);return d},merge:function(c,d){for(var e in d){var f=d[e];if("object"!=typeof f||f instanceof HTMLElement||f instanceof ig.Class||null===f)c[e]=f;else{if(!c[e]||"object"!=typeof c[e])c[e]=f instanceof Array?[]:{};ig.merge(c[e],f)}}return c},ksort:function(c){if(!c||"object"!=typeof c)return[];var d=[],e=[],f;for(f in c)d.push(f);
d.sort();for(f=0;f<d.length;f++)e.push(c[d[f]]);return e},setVendorAttribute:function(c,d,e){var f=d.charAt(0).toUpperCase()+d.substr(1);c[d]="undefined"!==typeof c.imageSmoothingEnabled?c["ms"+f]=c["moz"+f]=c["o"+f]=e:c["ms"+f]=c["moz"+f]=c["webkit"+f]=c["o"+f]=e},getVendorAttribute:function(c,d){var e=d.charAt(0).toUpperCase()+d.substr(1);return"undefined"!==typeof c.imageSmoothingEnabled?c[d]||c["ms"+e]||c["moz"+e]||c["o"+e]:c[d]||c["ms"+e]||c["moz"+e]||c["webkit"+e]||c["o"+e]},normalizeVendorAttribute:function(c,
d){var e=ig.getVendorAttribute(c,d);!c[d]&&e&&(c[d]=e)},getImagePixels:function(c,d,e,f,g){var m=ig.$new("canvas");m.width=c.width;m.height=c.height;var r=m.getContext("2d");ig.System.SCALE.CRISP(m,r);var u=ig.getVendorAttribute(r,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(r,"getImageDataHD");var z=c.width/u,I=c.height/u;m.width=Math.ceil(z);m.height=Math.ceil(I);r.drawImage(c,0,0,z,I);return 1===u?r.getImageData(d,e,f,g):r.getImageDataHD(d,e,f,g)},module:function(c){if(ig._current)throw"Module '"+
ig._current.name+"' defines nothing";if(ig.modules[c]&&ig.modules[c].body)throw"Module '"+c+"' is already defined";ig._current={name:c,requires:[],loaded:!1,body:null};ig.modules[c]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(c){ig._current.body=c;ig._current=null;ig._initDOMReady()},addResource:function(c){ig.resources.push(c)},setNocache:function(c){ig.nocache=c?"?"+Date.now():""},
log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(c,d){ig.modules[c]={name:c,requires:[],loaded:!1,body:null};ig._waitForOnload++;var e=ig.prefix+ig.lib+c.replace(/\./g,"index.html")+".js"+ig.nocache,f=ig.$new("script");f.type="text/javascript";f.src=e;f.onload=function(){ig._waitForOnload--;ig._execModules()};f.onerror=function(){throw"Failed to load module "+c+" at "+e+" required from "+d;};ig.$("head")[0].appendChild(f)},_execModules:function(){for(var c=!1,d=
0;d<ig._loadQueue.length;d++){for(var e=ig._loadQueue[d],f=!0,g=0;g<e.requires.length;g++){var m=e.requires[g];ig.modules[m]?ig.modules[m].loaded||(f=!1):(f=!1,ig._loadScript(m,e.name))}f&&e.body&&(ig._loadQueue.splice(d,1),e.loaded=!0,e.body(),c=!0,d--)}if(c)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){c=[];for(d=0;d<ig._loadQueue.length;d++){f=[];m=ig._loadQueue[d].requires;for(g=0;g<m.length;g++)e=ig.modules[m[g]],(!e||!e.loaded)&&f.push(m[g]);c.push(ig._loadQueue[d].name+
" (requires: "+f.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+c.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=
c.devicePixelRatio||1;ig.ua.viewport={width:c.innerWidth,height:c.innerHeight};ig.ua.screen={width:c.screen.availWidth*ig.ua.pixelRatio,height:c.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
c||c.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),c.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(c,"requestAnimationFrame");
if(c.requestAnimationFrame){var d=1,e={};c.ig.setAnimation=function(f,g){var m=d++;e[m]=!0;var p=function(){e[m]&&(c.requestAnimationFrame(p,g),f())};c.requestAnimationFrame(p,g);return m};c.ig.clearAnimation=function(c){delete e[c]}}else c.ig.setAnimation=function(d){return c.setInterval(d,1E3/60)},c.ig.clearAnimation=function(d){c.clearInterval(d)};var f=!1,g=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,m=0;c.ig.Class=function(){};var r=function(c){var d=this.prototype,e={},f;for(f in c)"function"==
typeof c[f]&&"function"==typeof d[f]&&g.test(c[f])?(e[f]=d[f],d[f]=function(c,d){return function(){var f=this.parent;this.parent=e[c];var g=d.apply(this,arguments);this.parent=f;return g}}(f,c[f])):d[f]=c[f]};c.ig.Class.extend=function(d){function e(){if(!f){if(this.staticInstantiate){var c=this.staticInstantiate.apply(this,arguments);if(c)return c}for(var d in this)"object"==typeof this[d]&&(this[d]=ig.copy(this[d]));this.init&&this.init.apply(this,arguments)}return this}var n=this.prototype;f=!0;
var p=new this;f=!1;for(var q in d)p[q]="function"==typeof d[q]&&"function"==typeof n[q]&&g.test(d[q])?function(c,d){return function(){var e=this.parent;this.parent=n[c];var f=d.apply(this,arguments);this.parent=e;return f}}(q,d[q]):d[q];e.prototype=p;e.prototype.constructor=e;e.extend=c.ig.Class.extend;e.inject=r;e.classId=p.classId=++m;return e};c.ImpactMixin&&ig.merge(ig,c.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(c){return ig.Image.cache[c]||null},init:function(c){this.path=c;this.load()},load:function(c){this.loaded?c&&c(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=c||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(c){var d=ig.getImagePixels(this.data,0,0,this.width,
this.height),e=this.width*c,f=this.height*c,g=ig.$new("canvas");g.width=e;g.height=f;for(var m=g.getContext("2d"),r=m.getImageData(0,0,e,f),s=0;s<f;s++)for(var j=0;j<e;j++){var n=4*(Math.floor(s/c)*this.width+Math.floor(j/c)),p=4*(s*e+j);r.data[p]=d.data[n];r.data[p+1]=d.data[n+1];r.data[p+2]=d.data[n+2];r.data[p+3]=d.data[n+3]}m.putImageData(r,0,0);this.data=g},draw:function(c,d,e,f,g,m){if(this.loaded){var r=ig.system.scale;g=(g?g:this.width)*r;m=(m?m:this.height)*r;ig.system.context.drawImage(this.data,
e?e*r:0,f?f*r:0,g,m,ig.system.getDrawPos(c),ig.system.getDrawPos(d),g,m);ig.Image.drawCount++}},drawTile:function(c,d,e,f,g,m,r){g=g?g:f;if(this.loaded&&!(f>this.width||g>this.height)){var s=ig.system.scale,j=Math.floor(f*s),n=Math.floor(g*s),p=m?-1:1,q=r?-1:1;if(m||r)ig.system.context.save(),ig.system.context.scale(p,q);ig.system.context.drawImage(this.data,Math.floor(e*f)%this.width*s,Math.floor(e*f/this.width)*g*s,j,n,ig.system.getDrawPos(c)*p-(m?j:0),ig.system.getDrawPos(d)*q-(r?n:0),j,n);(m||
r)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var c in ig.Image.cache)ig.Image.cache[c].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(c){this._loadMetrics(this.data);this.parent(c)},widthForString:function(c){if(-1!==c.indexOf("\n")){c=c.split("\n");for(var d=0,e=0;e<c.length;e++)d=Math.max(d,this._widthForLine(c[e]));return d}return this._widthForLine(c)},_widthForLine:function(c){for(var d=0,e=0;e<c.length;e++)d+=this.widthMap[c.charCodeAt(e)-this.firstChar]+
this.letterSpacing;return d},heightForString:function(c){return c.split("\n").length*(this.height+this.lineSpacing)},draw:function(c,d,e,f){"string"!=typeof c&&(c=c.toString());if(-1!==c.indexOf("\n")){c=c.split("\n");for(var g=this.height+this.lineSpacing,m=0;m<c.length;m++)this.draw(c[m],d,e+m*g,f)}else{if(f==ig.Font.ALIGN.RIGHT||f==ig.Font.ALIGN.CENTER)m=this._widthForLine(c),d-=f==ig.Font.ALIGN.CENTER?m/2:m;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(m=0;m<c.length;m++)f=c.charCodeAt(m),
d+=this._drawChar(f-this.firstChar,d,e);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=c.length}},_drawChar:function(c,d,e){if(!this.loaded||0>c||c>=this.indices.length)return 0;var f=ig.system.scale,g=this.widthMap[c]*f,m=(this.height-2)*f;ig.system.context.drawImage(this.data,this.indices[c]*f,0,g,m,ig.system.getDrawPos(d),ig.system.getDrawPos(e),g,m);return this.widthMap[c]+this.letterSpacing},_loadMetrics:function(c){this.height=c.height-1;this.widthMap=[];this.indices=
[];for(var d=ig.getImagePixels(c,0,c.height-1,c.width,1),e=0,f=0,g=0;g<c.width;g++){var m=4*g+3;127<d.data[m]?f++:128>d.data[m]&&f&&(this.widthMap.push(f),this.indices.push(g-f),e++,f=0)}this.widthMap.push(f);this.indices.push(g-f)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var c=new Audio,d=0;d<ig.Sound.use.length;d++){var e=ig.Sound.use[d];if(c.canPlayType(e.mime)){this.format=e;break}}this.format||(ig.Sound.enabled=!1)}},load:function(c,d,e){var f=ig.prefix+c.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[c]){if(d&&this.clips[c].length<ig.Sound.channels)for(d=this.clips[c].length;d<
ig.Sound.channels;d++){var g=new Audio(f);g.load();this.clips[c].push(g)}return this.clips[c][0]}var m=new Audio(f);e&&(m.addEventListener("canplaythrough",function s(d){m.removeEventListener("canplaythrough",s,!1);e(c,!0,d)},!1),m.addEventListener("error",function(d){e(c,!1,d)},!1));m.preload="auto";m.load();this.clips[c]=[m];if(d)for(d=1;d<ig.Sound.channels;d++)g=new Audio(f),g.load(),this.clips[c].push(g);return m},get:function(c){c=this.clips[c];for(var d=0,e;e=c[d++];)if(e.paused||e.ended)return e.ended&&
(e.currentTime=0),e;c[0].pause();c[0].currentTime=0;return c[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):
this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(c,d){if(ig.Sound.enabled){var e=ig.soundManager.load(c instanceof ig.Sound?c.path:c,!1);e.loop=this._loop;e.volume=this._volume;e.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(e);d&&(this.namedTracks[d]=e);this.currentTrack||
(this.currentTrack=e)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(c){if(c&&this.namedTracks[c])c=this.namedTracks[c],c!=this.currentTrack&&(this.stop(),
this.currentTrack=c);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(c){this._loop=c;for(var d in this.tracks)this.tracks[d].loop=c},getVolume:function(){return this._volume},setVolume:function(c){this._volume=c.limit(0,1);for(var d in this.tracks)this.tracks[d].volume=this._volume},fadeOut:function(c){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(c),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var c=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=c?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=c},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(c,d){this.path=c;this.multiChannel=!1!==d;this.load()},load:function(c){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,c):ig.addResource(this):c&&c(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(c,d){this.gameClass=c;this.resources=d;this._loadCallbackBound=this._loadCallback.bind(this);for(var e=0;e<this.resources.length;e++)this._unloaded.push(this.resources[e].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var c=
0;c<this.resources.length;c++)this.loadResource(this.resources[c]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(c){c.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(c,d){if(d)this._unloaded.erase(c);else throw"Failed to load resource: "+c;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(c){this.last=this.base=ig.Timer.time;this.target=c||0},set:function(c){this.target=c||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var c=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:c},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var c=Date.now();ig.Timer.time+=Math.min((c-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=c}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(c,d,e,f,g){this.fps=d;this.clock=new ig.Timer;this.canvas=ig.$(c);this.resize(e,f,g);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(c,d,e){this.width=c;this.height=d;this.scale=e||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(c){this.running?this.newGameClass=c:this.setGameNow(c)},setGameNow:function(c){ig.game=new c;ig.system.setDelegate(ig.game)},setDelegate:function(c){if("function"==typeof c.run)this.delegate=c,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(c){this.context.fillStyle=c;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});
ig.System.DRAW={AUTHENTIC:function(c){return Math.round(c)*this.scale},SMOOTH:function(c){return Math.round(c*this.scale)},SUBPIXEL:function(c){return c*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(c,d){ig.setVendorAttribute(d,"imageSmoothingEnabled",!1);c.style.imageRendering="-moz-crisp-edges";c.style.imageRendering="-o-crisp-edges";c.style.imageRendering="-webkit-optimize-contrast";c.style.imageRendering="crisp-edges";c.style.msInterpolationMode="nearest-neighbor"},
SMOOTH:function(c,d){ig.setVendorAttribute(d,"imageSmoothingEnabled",!0);c.style.imageRendering="";c.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var c=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",c,!1);ig.system.canvas.addEventListener("DOMMouseScroll",c,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(c){var d=this.bindings[0<(c.wheelDelta?c.wheelDelta:-1*c.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];d&&(this.actions[d]=!0,this.presses[d]=!0,this.delayedKeyup[d]=!0,c.stopPropagation(),c.preventDefault())},mousemove:function(c){var d=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(d=ig.system.realWidth);var d=ig.system.scale*(d/ig.system.realWidth),e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());c=c.touches?c.touches[0]:c;this.mouse.x=(c.clientX-e.left)/d;this.mouse.y=(c.clientY-e.top)/d},contextmenu:function(c){this.bindings[ig.KEY.MOUSE2]&&(c.stopPropagation(),c.preventDefault())},keydown:function(c){var d=c.target.tagName;if(!("INPUT"==d||"TEXTAREA"==
d))if(d="keydown"==c.type?c.keyCode:2==c.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,("touchstart"==c.type||"mousedown"==c.type)&&this.mousemove(c),d=this.bindings[d])this.actions[d]=!0,this.locks[d]||(this.presses[d]=!0,this.locks[d]=!0),c.stopPropagation(),c.preventDefault()},keyup:function(c){var d=c.target.tagName;if(!("INPUT"==d||"TEXTAREA"==d))if(d=this.bindings["keyup"==c.type?c.keyCode:2==c.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[d]=!0,c.stopPropagation(),c.preventDefault()},devicemotion:function(c){this.accel=
c.accelerationIncludingGravity},bind:function(c,d){0>c?this.initMouse():0<c&&this.initKeyboard();this.bindings[c]=d},bindTouch:function(c,d){var e=ig.$(c),f=this;e.addEventListener("touchstart",function(c){f.touchStart(c,d)},!1);e.addEventListener("touchend",function(c){f.touchEnd(c,d)},!1);e.addEventListener("MSPointerDown",function(c){f.touchStart(c,d)},!1);e.addEventListener("MSPointerUp",function(c){f.touchEnd(c,d)},!1)},unbind:function(c){this.delayedKeyup[this.bindings[c]]=!0;this.bindings[c]=
null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(c){return this.actions[c]},pressed:function(c){return this.presses[c]},released:function(c){return!!this.delayedKeyup[c]},clearPressed:function(){for(var c in this.delayedKeyup)this.actions[c]=!1,this.locks[c]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(c,d){this.actions[d]=!0;this.presses[d]=!0;c.stopPropagation();c.preventDefault();return!1},touchEnd:function(c,
d){this.delayedKeyup[d]=!0;c.stopPropagation();c.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(c,d,e,f,g,m,r){ig.system=new ig.System(c,e,f,g,m||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (r||ig.Loader)(d,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(c,d,e){this.width=d;this.height=e;this.image=new ig.Image(c)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(c,d,e,f){this.sheet=c;this.pivot={x:c.width/2,y:c.height/2};this.timer=new ig.Timer;this.frameTime=d;this.sequence=e;
this.stop=!!f;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(c){this.timer.set(this.frameTime*-c-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var c=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(c/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:c%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(c,d){var e=Math.max(this.sheet.width,this.sheet.height);c>ig.system.width||(d>ig.system.height||0>c+e||0>d+e)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(c,d,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(c+this.pivot.x),ig.system.getDrawPos(d+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(c,
d,e){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=c;this.pos.y=this.last.y=d;ig.merge(this,e)},reset:function(c,d,e){var f=this.constructor.prototype;this.pos.x=c;this.pos.y=d;this.last.x=c;this.last.y=d;this.vel.x=f.vel.x;this.vel.y=f.vel.y;this.accel.x=f.accel.x;this.accel.y=f.accel.y;this.health=f.health;this._killed=f._killed;this.standing=f.standing;this.type=f.type;this.checkAgainst=f.checkAgainst;this.collides=f.collides;ig.merge(this,e)},addAnim:function(c,d,e,f){if(!this.animSheet)throw"No animSheet to add the animation "+
c+" to.";d=new ig.Animation(this.animSheet,d,e,f);this.anims[c]=d;this.currentAnim||(this.currentAnim=d);return d},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var c=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(c);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(c,d,e,f){return d?(c+d*ig.system.tick).limit(-f,f):e?(d=e*ig.system.tick,0<c-d?c-d:0>c+d?c+d:0):c.limit(-f,f)},handleMovementTrace:function(c){this.standing=!1;c.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));c.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(c.collision.slope){var d=c.collision.slope;if(0<this.bounciness){var e=this.vel.x*d.nx+this.vel.y*d.ny;this.vel.x=(this.vel.x-2*d.nx*e)*this.bounciness;this.vel.y=(this.vel.y-2*d.ny*e)*this.bounciness}else e=(this.vel.x*d.x+this.vel.y*d.y)/(d.x*d.x+d.y*d.y),this.vel.x=d.x*e,this.vel.y=d.y*e,d=Math.atan2(d.x,d.y),d>this.slopeStanding.min&&d<this.slopeStanding.max&&(this.standing=!0)}this.pos=c.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(c){this.health-=c;0>=this.health&&this.kill()},touches:function(c){return!(this.pos.x>=c.pos.x+c.size.x||this.pos.x+this.size.x<=c.pos.x||this.pos.y>=c.pos.y+c.size.y||this.pos.y+this.size.y<=c.pos.y)},distanceTo:function(c){var d=this.pos.x+this.size.x/2-(c.pos.x+c.size.x/2);c=this.pos.y+this.size.y/2-(c.pos.y+c.size.y/2);return Math.sqrt(d*d+c*c)},angleTo:function(c){return Math.atan2(c.pos.y+
c.size.y/2-(this.pos.y+this.size.y/2),c.pos.x+c.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(c,d){c.checkAgainst&d.type&&c.check(d);d.checkAgainst&c.type&&d.check(c);c.collides&&(d.collides&&c.collides+d.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(c,d)};ig.Entity.solveCollision=
function(c,d){var e=null;if(c.collides==ig.Entity.COLLIDES.LITE||d.collides==ig.Entity.COLLIDES.FIXED)e=c;else if(d.collides==ig.Entity.COLLIDES.LITE||c.collides==ig.Entity.COLLIDES.FIXED)e=d;c.last.x+c.size.x>d.last.x&&c.last.x<d.last.x+d.size.x?(c.last.y<d.last.y?ig.Entity.seperateOnYAxis(c,d,e):ig.Entity.seperateOnYAxis(d,c,e),c.collideWith(d,"y"),d.collideWith(c,"y")):c.last.y+c.size.y>d.last.y&&c.last.y<d.last.y+d.size.y&&(c.last.x<d.last.x?ig.Entity.seperateOnXAxis(c,d,e):ig.Entity.seperateOnXAxis(d,
c,e),c.collideWith(d,"x"),d.collideWith(c,"x"))};ig.Entity.seperateOnXAxis=function(c,d,e){var f=c.pos.x+c.size.x-d.pos.x;e?(e.vel.x=-e.vel.x*e.bounciness+(c===e?d:c).vel.x,d=ig.game.collisionMap.trace(e.pos.x,e.pos.y,e==c?-f:f,0,e.size.x,e.size.y),e.pos.x=d.pos.x):(e=(c.vel.x-d.vel.x)/2,c.vel.x=-e,d.vel.x=e,e=ig.game.collisionMap.trace(c.pos.x,c.pos.y,-f/2,0,c.size.x,c.size.y),c.pos.x=Math.floor(e.pos.x),c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,f/2,0,d.size.x,d.size.y),d.pos.x=Math.ceil(c.pos.x))};
ig.Entity.seperateOnYAxis=function(c,d,e){var f=c.pos.y+c.size.y-d.pos.y;if(e){d=c===e?d:c;e.vel.y=-e.vel.y*e.bounciness+d.vel.y;var g=0;e==c&&Math.abs(e.vel.y-d.vel.y)<e.minBounceVelocity&&(e.standing=!0,g=d.vel.x*ig.system.tick);c=ig.game.collisionMap.trace(e.pos.x,e.pos.y,g,e==c?-f:f,e.size.x,e.size.y);e.pos.y=c.pos.y;e.pos.x=c.pos.x}else ig.game.gravity&&(d.standing||0<c.vel.y)?(e=ig.game.collisionMap.trace(c.pos.x,c.pos.y,0,-(c.pos.y+c.size.y-d.pos.y),c.size.x,c.size.y),c.pos.y=e.pos.y,0<c.bounciness&&
c.vel.y>c.minBounceVelocity?c.vel.y*=-c.bounciness:(c.standing=!0,c.vel.y=0)):(e=(c.vel.y-d.vel.y)/2,c.vel.y=-e,d.vel.y=e,g=d.vel.x*ig.system.tick,e=ig.game.collisionMap.trace(c.pos.x,c.pos.y,g,-f/2,c.size.x,c.size.y),c.pos.y=e.pos.y,c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,0,f/2,d.size.x,d.size.y),d.pos.y=c.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(c,d){this.tilesize=c;this.data=d;this.height=d.length;this.width=d[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(c,d){var e=Math.floor(c/this.tilesize),f=Math.floor(d/this.tilesize);return 0<=e&&e<this.width&&0<=f&&f<this.height?this.data[f][e]:0},setTile:function(c,d,e){c=Math.floor(c/this.tilesize);d=Math.floor(d/
this.tilesize);0<=c&&c<this.width&&(0<=d&&d<this.height)&&(this.data[d][c]=e)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(c,d,g){this.parent(c,d);this.tiledef=g||ig.CollisionMap.defaultTileDef;for(var m in this.tiledef)m|0>this.lastSlope&&(this.lastSlope=m|0)},trace:function(c,d,g,m,r,s){var j={collision:{x:!1,y:!1,slope:!1},pos:{x:c,y:d},tile:{x:0,y:0}},n=Math.ceil(Math.max(Math.abs(g),Math.abs(m))/this.tilesize);if(1<n)for(var p=g/n,q=m/n,t=0;t<n&&(p||q)&&!(this._traceStep(j,
c,d,p,q,r,s,g,m,t),c=j.pos.x,d=j.pos.y,j.collision.x&&(g=p=0),j.collision.y&&(m=q=0),j.collision.slope);t++);else this._traceStep(j,c,d,g,m,r,s,g,m,0);return j},_traceStep:function(c,d,g,m,r,s,j,n,p,q){c.pos.x+=m;c.pos.y+=r;var t=0;if(m){var x=0<m?s:0,u=0>m?this.tilesize:0,t=Math.max(Math.floor(g/this.tilesize),0),z=Math.min(Math.ceil((g+j)/this.tilesize),this.height);m=Math.floor((c.pos.x+x)/this.tilesize);var I=Math.floor((d+x)/this.tilesize);if(0<q||m==I||0>I||I>=this.width)I=-1;if(0<=m&&m<this.width)for(var G=
t;G<z&&!(-1!=I&&(t=this.data[G][I],1<t&&t<=this.lastSlope&&this._checkTileDef(c,t,d,g,n,p,s,j,I,G)));G++)if(t=this.data[G][m],1==t||t>this.lastSlope||1<t&&this._checkTileDef(c,t,d,g,n,p,s,j,m,G)){if(1<t&&t<=this.lastSlope&&c.collision.slope)break;c.collision.x=!0;c.tile.x=t;d=c.pos.x=m*this.tilesize-x+u;n=0;break}}if(r){x=0<r?j:0;r=0>r?this.tilesize:0;t=Math.max(Math.floor(c.pos.x/this.tilesize),0);u=Math.min(Math.ceil((c.pos.x+s)/this.tilesize),this.width);G=Math.floor((c.pos.y+x)/this.tilesize);
z=Math.floor((g+x)/this.tilesize);if(0<q||G==z||0>z||z>=this.height)z=-1;if(0<=G&&G<this.height)for(m=t;m<u&&!(-1!=z&&(t=this.data[z][m],1<t&&t<=this.lastSlope&&this._checkTileDef(c,t,d,g,n,p,s,j,m,z)));m++)if(t=this.data[G][m],1==t||t>this.lastSlope||1<t&&this._checkTileDef(c,t,d,g,n,p,s,j,m,G)){if(1<t&&t<=this.lastSlope&&c.collision.slope)break;c.collision.y=!0;c.tile.y=t;c.pos.y=G*this.tilesize-x+r;break}}},_checkTileDef:function(c,d,g,m,r,s,j,n,p,q){var t=this.tiledef[d];if(!t)return!1;d=(t[2]-
t[0])*this.tilesize;var x=(t[3]-t[1])*this.tilesize,u=t[4];j=g+r+(0>x?j:0)-(p+t[0])*this.tilesize;n=m+s+(0<d?n:0)-(q+t[1])*this.tilesize;if(0<d*n-x*j){if(0>r*-x+s*d)return u;p=Math.sqrt(d*d+x*x);q=x/p;p=-d/p;var z=j*q+n*p,t=q*z,z=p*z;if(t*t+z*z>=r*r+s*s)return u||0.5>d*(n-s)-x*(j-r);c.pos.x=g+r-t;c.pos.y=m+s-z;c.collision.slope={x:d,y:x,nx:q,ny:p};return!0}return!1}});var c=1/3,d=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,d,!0],6:[0,d,1,c,!0],7:[0,c,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[d,1,1,0,!0],43:[c,1,d,0,!0],54:[0,1,c,0,!0],27:[0,0,1,c,!0],28:[0,c,1,d,!0],29:[0,d,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,c,1,!0],44:[c,0,d,1,!0],55:[d,0,1,1,!0],16:[1,c,0,0,!0],17:[1,d,0,c,!0],18:[1,1,0,d,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[c,1,0,0,!0],41:[d,1,c,0,!0],52:[1,1,d,0,!0],38:[1,d,0,1,!0],39:[1,c,0,d,!0],40:[1,0,
0,c,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,d,1,!0],42:[d,0,c,1,!0],53:[c,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(c,d,g,m){return{collision:{x:!1,y:!1,slope:!1},pos:{x:c+g,y:d+m},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(c,d,e){this.parent(c,d);this.setTileset(e)},setTileset:function(c){this.tilesetName=c instanceof ig.Image?c.path:c;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(c,
d){this.scroll.x=c/this.distance;this.scroll.y=d/this.distance},preRenderMapToChunks:function(){var c=this.width*this.tilesize*ig.system.scale,d=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(c,d),this.chunkSize);var e=Math.ceil(c/this.chunkSize),f=Math.ceil(d/this.chunkSize);this.preRenderedChunks=[];for(var g=0;g<f;g++){this.preRenderedChunks[g]=[];for(var m=0;m<e;m++)this.preRenderedChunks[g][m]=this.preRenderChunk(m,g,m==e-1?c-m*this.chunkSize:this.chunkSize,g==f-1?
d-g*this.chunkSize:this.chunkSize)}},preRenderChunk:function(c,d,e,f){var g=e/this.tilesize/ig.system.scale+1,m=f/this.tilesize/ig.system.scale+1,r=c*this.chunkSize/ig.system.scale%this.tilesize,s=d*this.chunkSize/ig.system.scale%this.tilesize;c=Math.floor(c*this.chunkSize/this.tilesize/ig.system.scale);d=Math.floor(d*this.chunkSize/this.tilesize/ig.system.scale);var j=ig.$new("canvas");j.width=e;j.height=f;j.retinaResolutionEnabled=!1;f=j.getContext("2d");ig.System.scaleMode(j,f);e=ig.system.context;
ig.system.context=f;for(f=0;f<g;f++)for(var n=0;n<m;n++)if(f+c<this.width&&n+d<this.height){var p=this.data[n+d][f+c];p&&this.tiles.drawTile(f*this.tilesize-r,n*this.tilesize-s,p-1,this.tilesize)}ig.system.context=e;return j},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var c=ig.system.getDrawPos(this.scroll.x),d=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var e=
this.width*this.tilesize*ig.system.scale,c=(c%e+e)%e,e=this.height*this.tilesize*ig.system.scale,d=(d%e+e)%e;var e=Math.max(Math.floor(c/this.chunkSize),0),f=Math.max(Math.floor(d/this.chunkSize),0),g=Math.ceil((c+ig.system.realWidth)/this.chunkSize),m=Math.ceil((d+ig.system.realHeight)/this.chunkSize),r=this.preRenderedChunks[0].length,s=this.preRenderedChunks.length;this.repeat||(g=Math.min(g,r),m=Math.min(m,s));for(var j=0;f<m;f++){for(var n=0,p=e;p<g;p++){var q=this.preRenderedChunks[f%s][p%r],
t=-c+p*this.chunkSize-n,x=-d+f*this.chunkSize-j;ig.system.context.drawImage(q,t,x);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(t,x,this.chunkSize,this.chunkSize));this.repeat&&(q.width<this.chunkSize&&t+q.width<ig.system.realWidth)&&(n+=this.chunkSize-q.width,g++)}this.repeat&&(q.height<this.chunkSize&&x+q.height<ig.system.realHeight)&&(j+=this.chunkSize-q.height,m++)}},drawTiled:function(){for(var c=0,d=null,e=(this.scroll.x/this.tilesize).toInt(),
f=(this.scroll.y/this.tilesize).toInt(),g=this.scroll.x%this.tilesize,m=this.scroll.y%this.tilesize,r=-g-this.tilesize,g=ig.system.width+this.tilesize-g,s=ig.system.height+this.tilesize-m,j=-1,m=-m-this.tilesize;m<s;j++,m+=this.tilesize){var n=j+f;if(n>=this.height||0>n){if(!this.repeat)continue;n=(n%this.height+this.height)%this.height}for(var p=-1,q=r;q<g;p++,q+=this.tilesize){c=p+e;if(c>=this.width||0>c){if(!this.repeat)continue;c=(c%this.width+this.width)%this.width}if(c=this.data[n][c])(d=this.anims[c-
1])?d.draw(q,m):this.tiles.drawTile(q,m,c-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(c){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var d=0;d<c.entities.length;d++){var e=c.entities[d];this.spawnEntity(e.type,e.x,e.y,e.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(d=0;d<c.layer.length;d++)if(e=c.layer[d],"collision"==e.name)this.collisionMap=new ig.CollisionMap(e.tilesize,e.data);else{var f=new ig.BackgroundMap(e.tilesize,e.data,e.tilesetName);f.anims=this.backgroundAnims[e.tilesetName]||
{};f.repeat=e.repeat;f.distance=e.distance;f.foreground=!!e.foreground;f.preRender=!!e.preRender;f.name=e.name;this.backgroundMaps.push(f)}for(d=0;d<this.entities.length;d++)this.entities[d].ready()},loadLevelDeferred:function(c){this._levelToLoad=c},getMapByName:function(c){if("collision"==c)return this.collisionMap;for(var d=0;d<this.backgroundMaps.length;d++)if(this.backgroundMaps[d].name==c)return this.backgroundMaps[d];return null},getEntityByName:function(c){return this.namedEntities[c]},getEntitiesByType:function(c){c=
"string"===typeof c?ig.global[c]:c;for(var d=[],e=0;e<this.entities.length;e++){var f=this.entities[e];f instanceof c&&!f._killed&&d.push(f)}return d},spawnEntity:function(c,d,e,f){var g="string"===typeof c?ig.global[c]:c;if(!g)throw"Can't spawn entity of type "+c;c=new g(d,e,f||{});this.entities.push(c);c.name&&(this.namedEntities[c.name]=c);return c},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(c){c.name&&
delete this.namedEntities[c.name];c._killed=!0;c.type=ig.Entity.TYPE.NONE;c.checkAgainst=ig.Entity.TYPE.NONE;c.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(c)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var c=0;c<this._deferredKill.length;c++)this._deferredKill[c].erase(),this.entities.erase(this._deferredKill[c]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var d in this.backgroundAnims){var c=this.backgroundAnims[d],e;for(e in c)c[e].update()}},updateEntities:function(){for(var c=0;c<this.entities.length;c++){var d=this.entities[c];d._killed||d.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var c;for(c=0;c<this.backgroundMaps.length;c++){var d=
this.backgroundMaps[c];if(d.foreground)break;d.setScreenPos(this.screen.x,this.screen.y);d.draw()}this.drawEntities();for(c;c<this.backgroundMaps.length;c++)d=this.backgroundMaps[c],d.setScreenPos(this.screen.x,this.screen.y),d.draw()},drawEntities:function(){for(var c=0;c<this.entities.length;c++)this.entities[c].draw()},checkEntities:function(){for(var c={},d=0;d<this.entities.length;d++){var e=this.entities[d];if(!(e.type==ig.Entity.TYPE.NONE&&e.checkAgainst==ig.Entity.TYPE.NONE&&e.collides==ig.Entity.COLLIDES.NEVER))for(var f=
{},g=Math.floor(e.pos.y/this.cellSize),m=Math.floor((e.pos.x+e.size.x)/this.cellSize)+1,r=Math.floor((e.pos.y+e.size.y)/this.cellSize)+1,s=Math.floor(e.pos.x/this.cellSize);s<m;s++)for(var j=g;j<r;j++)if(c[s])if(c[s][j]){for(var n=c[s][j],p=0;p<n.length;p++)e.touches(n[p])&&!f[n[p].id]&&(f[n[p].id]=!0,ig.Entity.checkPair(e,n[p]));n.push(e)}else c[s][j]=[e];else c[s]={},c[s][j]=[e]}}});ig.Game.SORT={Z_INDEX:function(c,d){return c.zIndex-d.zIndex},POS_X:function(c,d){return c.pos.x+c.size.x-(d.pos.x+
d.size.x)},POS_Y:function(c,d){return c.pos.y+c.size.y-(d.pos.y+d.size.y)}}});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(c,d){d.imageSmoothingEnabled=d.msImageSmoothingEnabled=d.mozImageSmoothingEnabled=d.oImageSmoothingEnabled=!1;c.style.imageRendering="-moz-crisp-edges";c.style.imageRendering="-o-crisp-edges";c.style.imageRendering="-webkit-optimize-contrast";c.style.imageRendering="crisp-edges";c.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(c,d){d.imageSmoothingEnabled=d.msImageSmoothingEnabled=
d.mozImageSmoothingEnabled=d.oImageSmoothingEnabled=!0;c.style.imageRendering="";c.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").defines(function(){var c=!1;try{c=window.self!==window.top,!1===c&&(c=0<window.frames.length)}catch(d){c=!0}ig.Input.inject({keydown:function(d){var f=d.target.tagName;if(!("INPUT"==f||"TEXTAREA"==f))if(f="keydown"==d.type?d.keyCode:2==d.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,c&&0>f&&window.focus(),("touchstart"==d.type||"mousedown"==d.type)&&this.mousemove(d),f=this.bindings[f])this.actions[f]=!0,this.locks[f]||(this.presses[f]=!0,this.locks[f]=
!0),d.stopPropagation(),d.preventDefault()}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(c,d,e,f){if(this.JQUERYAVAILABLE)c.on(d,e);else c.addEventListener(d,e,f)},create:function(c){return this.JQUERYAVAILABLE?$("<"+c+">"):ig.$new(c)},getElementByClass:function(c){return this.JQUERYAVAILABLE?$("."+c):document.getElementsByClassName(c)},
getElementById:function(c){return this.JQUERYAVAILABLE?0<$(c).length?$(c):null:ig.$(c)},appendChild:function(c,d){this.JQUERYAVAILABLE?c.append(d):c.appendChild(d)},appendToBody:function(c){this.JQUERYAVAILABLE?$("body").append(c):document.body.appendChild(c)},resize:function(c,d,e){if(this.JQUERYAVAILABLE)c.width(d.toFixed(2)),c.height(e.toFixed(2));else{var f=c.style.visibility;d="width:"+d.toFixed(2)+"px; height:"+e.toFixed(2)+"px;";this.attr(c,"style",d);c.style.visibility=f}},resizeOffsetLeft:function(c,
d,e,f){if(this.JQUERYAVAILABLE)c.width(d.toFixed(2)),c.height(e.toFixed(2)),c.css("left",f);else{var g=c.style.visibility;d="width:"+d.toFixed(2)+"px; height:"+e.toFixed(2)+"px; left: "+f.toFixed(2)+"px;";this.attr(c,"style",d);c.style.visibility=g}},resizeOffset:function(c,d,e,f,g){if(this.JQUERYAVAILABLE)c.width(d.toFixed(2)),c.height(e.toFixed(2)),c.css("left",f),c.css("top",g);else{var m=c.style.visibility;d="width:"+d.toFixed(2)+"px; height:"+e.toFixed(2)+"px; left: "+f.toFixed(2)+"px; top: "+
g.toFixed(2)+"px;";this.attr(c,"style",d);c.style.visibility=m}},css:function(c,d){if(this.JQUERYAVAILABLE)c.css(d);else{var e="",f;for(f in d)e+=f+":"+d[f]+";";this.attr(c,"style",e)}},getOffsets:function(c){return this.JQUERYAVAILABLE?(c=c.offset(),{left:c.left,top:c.top}):{left:c.offsetLeft,top:c.offsetTop}},attr:function(c,d,e){if("undefined"===typeof e)return this.JQUERYAVAILABLE?c.attr(d):c.getAttribute(d);this.JQUERYAVAILABLE?c.attr(d,e):c.setAttribute(d,e)},show:function(c){this.JQUERYAVAILABLE?
(c.show(),c.css("visibility","visible")):c&&(c.style?c.style.visibility="visible":c[0]&&(c[0].style.visibility="visible"))},hide:function(c){this.JQUERYAVAILABLE?(c.hide(),c.css("visibility","hidden")):c&&(c.style?c.style.visibility="hidden":c[0]&&(c[0].style.visibility="hidden"))},getQueryVariable:function(c){for(var d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(decodeURIComponent(f[0])==c)return decodeURIComponent(f[1])}},forcedDeviceDetection:function(){var c=
this.getQueryVariable("device");if(c)switch(c){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},forcedDeviceRotation:function(){var c=this.getQueryVariable("force-rotate");if(c)switch(c){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");
window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=function(c,d){this.x=c||0;this.y=d||0};Vector2.prototype={valType:"number",neg:function(){this.x=-this.x;this.y=-this.y;return this},row:function(c){typeof c===this.valType&&(this.y=c);return this.y},col:function(c){typeof c===this.valType&&(this.x=c);return this.x},add:function(c){c instanceof Vector2?(this.x+=c.x,this.y+=c.y):(this.x+=c,this.y+=c);return this},sub:function(c){c instanceof Vector2?(this.x-=c.x,this.y-=c.y):(this.x-=c,this.y-=
c);return this},mul:function(c){c instanceof Vector2?(this.x*=c.x,this.y*=c.y):(this.x*=c,this.y*=c);return this},div:function(c){c instanceof Vector2?(0!=c.x&&(this.x/=c.x),0!=c.y&&(this.y/=c.y)):0!=c&&(this.x/=c,this.y/=c);return this},equals:function(c){return this.x==c.x&&this.y==c.y},dot:function(c){return this.x*c.x+this.y*c.y},cross:function(c){return this.x*c.y-this.y*c.x},length:function(){return Math.sqrt(this.dot(this))},norm:function(){return this.divide(this.length())},min:function(){return Math.min(this.x,
this.y)},max:function(){return Math.max(this.x,this.y)},toAngles:function(){return-Math.atan2(-this.y,this.x)},angleTo:function(c){return Math.acos(this.dot(c)/(this.length()*c.length()))},toArray:function(c){return[this.x,this.y].slice(0,c||2)},clone:function(){return new Vector2(this.x,this.y)},set:function(c,d){this.x=c;this.y=d;return this},unit:function(){var c=this.length();if(0<c)return new Vector2(this.x/c,this.y/c);throw"Divide by 0 error in unitVector function of vector:"+this;},turnRight:function(){var c=
this.x;this.x=-this.y;this.y=c;return this},turnLeft:function(){var c=this.x;this.x=this.y;this.y=-c;return this},rotate:function(c){var d=this.clone();this.x=d.x*Math.cos(c)-d.y*Math.sin(c);this.y=d.x*Math.sin(c)+d.y*Math.cos(c);return this}};Vector2.negative=function(c){return new Vector2(-c.x,-c.y)};Vector2.add=function(c,d){return d instanceof Vector2?new Vector2(c.x+d.x,c.y+d.y):new Vector2(c.x+v,c.y+v)};Vector2.subtract=function(c,d){return d instanceof Vector2?new Vector2(c.x-d.x,c.y-d.y):
new Vector2(c.x-v,c.y-v)};Vector2.multiply=function(c,d){return d instanceof Vector2?new Vector2(c.x*d.x,c.y*d.y):new Vector2(c.x*v,c.y*v)};Vector2.divide=function(c,d){return d instanceof Vector2?new Vector2(c.x/d.x,c.y/d.y):new Vector2(c.x/v,c.y/v)};Vector2.equals=function(c,d){return c.x==d.x&&c.y==d.y};Vector2.dot=function(c,d){return c.x*d.x+c.y*d.y};Vector2.cross=function(c,d){return c.x*d.y-c.y*d.x}});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!1,disableStretchToFitOnMobileFlag:!1,enableStretchToFitOnAntiPortraitModeFlag:!0,enableScalingLimitsOnMobileFlag:!1,minScalingOnMobile:0,maxScalingOnMobile:1,enableStretchToFitOnDesktopFlag:!1,enableScalingLimitsOnDesktopFlag:!1,minScalingOnDesktop:0,maxScalingOnDesktop:1,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(960,
540)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(960,540)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate"],adsToResize:{},init:function(c){this.domHandler=c;if("undefined"===typeof c)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();
this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var c=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/c.x,this.mobile.actualSize.y/c.y);if(this.disableStretchToFitOnMobileFlag){var d=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.enableScalingLimitsOnMobileFlag&&
(d>this.maxScalingOnMobile&&(d=this.maxScalingOnMobile),d<this.maxScalingOnMobile&&(d=this.maxScalingOnMobile));this.mobile.actualSize.x=c.x*d;this.mobile.actualSize.y=c.y*d;this.scaleRatioMultiplier.x=d;this.scaleRatioMultiplier.y=d}else this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=1}else this.desktop.actualSize=new Vector2(window.innerWidth,window.innerHeight),c=new Vector2(this.desktop.actualResolution.x,
this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/c.x,this.desktop.actualSize.y/c.y),this.enableStretchToFitOnDesktopFlag?(this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=1):(d=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.enableScalingLimitsOnDesktopFlag&&(d>this.maxScalingOnDesktop&&(d=this.maxScalingOnDesktop),d<this.minScalingOnDesktop&&
(d=this.minScalingOnDesktop)),this.desktop.actualSize.x=c.x*d,this.desktop.actualSize.y=c.y*d,this.scaleRatioMultiplier.x=d,this.scaleRatioMultiplier.y=d)},resizeLayers:function(){for(var c=0;c<this.coreDivsToResize.length;c++){var d=ig.domHandler.getElementById(this.coreDivsToResize[c]);if(ig.ua.mobile)if(this.disableStretchToFitOnMobileFlag){var e=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.mobile.actualSize.x/2),f=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.mobile.actualSize.y/
2);0>e&&(e=0);0>f&&(f=0);ig.domHandler.resizeOffset(d,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y),e,f);var g=!1;if(g=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth)if(this.enableStretchToFitOnAntiPortraitModeFlag)ig.domHandler.resizeOffset(d,Math.floor(window.innerWidth),Math.floor(window.innerHeight),0,0);else{var g=new Vector2(window.innerWidth/this.mobile.actualResolution.y,window.innerHeight/this.mobile.actualResolution.x),
e=Math.min(g.x,g.y),g=this.mobile.actualResolution.y*e,m=this.mobile.actualResolution.x*e,e=Math.floor(ig.sizeHandler.windowSize.x/2-g/2),f=Math.floor(ig.sizeHandler.windowSize.y/2-m/2);0>e&&(e=0);0>f&&(f=0);ig.domHandler.resizeOffset(d,Math.floor(g),Math.floor(m),e,f)}}else ig.domHandler.resize(d,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y));else this.enableStretchToFitOnDesktopFlag?ig.domHandler.resize(d,Math.floor(ig.sizeHandler.desktop.actualSize.x),
Math.floor(ig.sizeHandler.desktop.actualSize.y)):(e=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2),f=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.desktop.actualSize.y/2),0>e&&(e=0),0>f&&(f=0),ig.domHandler.resizeOffset(d,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),e,f))}for(var r in this.adsToResize)c=ig.domHandler.getElementById("#"+r),d=ig.domHandler.getElementById("#"+r+"-Box"),g=(window.innerWidth-
this.adsToResize[r]["box-width"])/2+"px",e=(window.innerHeight-this.adsToResize[r]["box-height"])/2+"px",c&&ig.domHandler.css(c,{width:window.innerWidth,height:window.innerHeight}),d&&ig.domHandler.css(d,{left:g,top:e});for(r in this.dynamicClickableEntityDivs){c=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);d=ig.domHandler.getElementById("#"+r);if(ig.ua.mobile)var s=this.dynamicClickableEntityDivs[r].entity_pos_x,m=this.dynamicClickableEntityDivs[r].entity_pos_y,
e=this.dynamicClickableEntityDivs[r].width,g=this.dynamicClickableEntityDivs[r].height,f=Math.floor(s*this.scaleRatioMultiplier.x)+"px",m=Math.floor(m*this.scaleRatioMultiplier.y)+"px",e=Math.floor(e*this.scaleRatioMultiplier.x)+"px",g=Math.floor(g*this.scaleRatioMultiplier.y)+"px";else var g=ig.domHandler.getElementById("#canvas"),g=ig.domHandler.getOffsets(g),f=g.left,j=g.top,s=this.dynamicClickableEntityDivs[r].entity_pos_x,m=this.dynamicClickableEntityDivs[r].entity_pos_y,e=this.dynamicClickableEntityDivs[r].width,
g=this.dynamicClickableEntityDivs[r].height,f=Math.floor(f+s*c)+"px",m=Math.floor(j+m*c)+"px",e=Math.floor(e*c)+"px",g=Math.floor(g*c)+"px";ig.domHandler.css(d,{"float":"left",position:"absolute",left:f,top:m,width:e,height:g,"z-index":3});this.dynamicClickableEntityDivs[r]["font-size"]&&ig.domHandler.css(d,{"font-size":this.dynamicClickableEntityDivs[r]["font-size"]*c+"px"})}},resize:function(){this.sizeCalcs();this.resizeLayers()},reorient:function(){console.log("changing orientation ...");if(ig.ua.mobile){var c=
!1,c=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,d=this.domHandler.getElementById("#orientate"),e=this.domHandler.getElementById("#game");c?(this.domHandler.show(d),this.domHandler.hide(e),console.log("portrait"+window.innerWidth+","+window.innerHeight)):(this.domHandler.show(e),this.domHandler.hide(d),console.log("landscape"+window.innerWidth+","+window.innerHeight))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize()},resizeAds:function(){for(var c in this.adsToResize){var d=
ig.domHandler.getElementById("#"+c),e=ig.domHandler.getElementById("#"+c+"-Box"),f=(window.innerWidth-this.adsToResize[c]["box-width"])/2+"px",g=(window.innerHeight-this.adsToResize[c]["box-height"])/2+"px";d&&ig.domHandler.css(d,{width:window.innerWidth,height:window.innerHeight});e&&ig.domHandler.css(e,{left:f,top:g})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&
!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(c){c.preventDefault();return!1},!1),document.addEventListener("touchmove",function(c){c.preventDefault();return!1},!1),document.addEventListener("touchend",function(c){c.preventDefault();return!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&
(this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100));null==this.orientationTimeout&&(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2E3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),
window.addEventListener("resize",this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",this.orientationHandler.bind(this)),window.addEventListener("resize",this.orientationHandler.bind(this)));document.ontouchmove=function(c){window.scrollTo(0,1);c.preventDefault()}}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(){}})});ig.baked=!0;
ig.module("plugins.audio.sound-player").defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",stayMuteFlag:!1,debug:!1,init:function(){this.debug&&console.log(this.tagName)},play:function(c){this.debug&&console.log("play sound ",c)},stop:function(){this.debug&&console.log("stop sound ")},volume:function(){this.debug&&console.log("set volume")},mute:function(c){this.debug&&console.log("mute");"undefined"===typeof c?this.stayMuteFlag=!0:c&&(this.stayMuteFlag=!0)},unmute:function(c){this.debug&&
console.log("unmute");"undefined"===typeof c?this.stayMuteFlag=!1:c&&(this.stayMuteFlag=!1)}})});ig.baked=!0;
ig.module("plugins.audio.impact-music-player").requires("plugins.audio.sound-player").defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:!1,soundList:{},init:function(c,d){this.parent(c,d);for(var e in c)this.soundList[e]=e,ig.music.add(c[e].path+".*",e);d&&d.loop&&(ig.music.loop=d.loop)},play:function(c){this.stayMuteFlag||(this.bgmPlaying=!0,"undefined"===typeof c?ig.music.play(c):ig.music.play())},stop:function(){this.bgmPlaying=!1;ig.music.pause()},
volume:function(c){console.log("impactmusic:",c);ig.music.volume=0>c?0:isNaN(c)?1:1<c?1:c},getVolume:function(){return ig.music.volume},mute:function(c){this.parent(c);this.bgmPlaying&&this.stop()},unmute:function(c){this.parent(c);this.play()}})});ig.baked=!0;
ig.module("plugins.audio.impact-sound-player").requires("plugins.audio.sound-player").defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(c,d){this.parent(c,d);for(var e in c){var f=new ig.Sound(c[e].path+".*");this.soundList[e]=f}},play:function(c){this.stayMuteFlag||("object"===typeof c?(console.log(c+" exists"),c.play()):"string"===typeof c&&this.soundList[c].play())},stop:function(c){this.parent(c);c.stop()},volume:function(c){ig.soundManager.volume=
0>c?0:isNaN(c)?1:1<c?1:c},getVolume:function(){return ig.soundManager.volume},mute:function(c){this.parent(c);ig.Sound.enabled=!1},unmute:function(c){this.parent(c);ig.Sound.enabled=!0}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").requires("plugins.audio.sound-player").defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(c,d){this.parent(c,d);for(var e in c){var f=c[e].path,f=new Howl({src:[f+"."+ig.Sound.FORMAT.OGG.ext,f+"."+ig.Sound.FORMAT.MP3.ext]});this.soundList[e]=f}},play:function(c){this.stayMuteFlag||("object"===typeof c?c.play():"string"===typeof c&&this.soundList[c].play())},stop:function(c){this.parent(c);"object"===typeof c?
c.stop():"string"===typeof c&&this.soundList[c].stop()},volume:function(c){for(var d in this.soundList){if(0>c){this.soundList[d].volume(0);break}isNaN(c)?this.soundList[d].volume(1):1<c?this.soundList[d].volume(1):this.soundList[d].volume(c)}},getVolume:function(){for(var c in this.soundList)return this.soundList[c].volume()},mute:function(c){this.parent(c);Howler.mute(!0)},unmute:function(c){this.parent(c);Howler.mute(!1)}})});ig.baked=!0;
ig.module("plugins.audio.howler-music-player").requires("plugins.audio.sound-player").defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:!1,soundList:{},init:function(c,d){this.parent(c,d);for(var e in c){var f=c[e].path,f=new Howl({src:[f+"."+ig.Sound.FORMAT.OGG.ext,f+"."+ig.Sound.FORMAT.MP3.ext],loop:!0,autoplay:!1,onend:function(){}.bind(this)});this.soundList[e]=f}},play:function(c){if(!this.stayMuteFlag&&!this.bgmPlaying)if("object"===typeof c)this.bgmPlaying=
!0,c.play();else if("string"===typeof c)this.bgmPlaying=!0,this.soundList[c].play();else for(var d in this.soundList){this.soundList[d].play();this.bgmPlaying=!0;break}},stop:function(c){this.parent(c);if(this.bgmPlaying){for(var d in this.soundList)this.soundList[d].stop();this.bgmPlaying=!1}},volume:function(c){console.log("howler",c);for(var d in this.soundList){if(0>c){this.soundList[d].volume(0);break}isNaN(c)?this.soundList[d].volume(1):1<c?this.soundList[d].volume(1):this.soundList[d].volume(c)}},
getVolume:function(){for(var c in this.soundList)return this.soundList[c].volume()},mute:function(c){this.parent(c);Howler.mute(!0)},unmute:function(c){this.parent(c);Howler.mute(!1)}})});ig.baked=!0;
ig.module("plugins.audio.jukebox-player").requires("plugins.audio.sound-player").defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:!1,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:0.001,init:function(c,d){this.parent(c,d);for(var e in c){this.soundList[e]=e;var f=c[e].path;this.jukeboxPlayer=new jukebox.Player({resources:[f+"."+ig.Sound.FORMAT.OGG.ext,f+"."+ig.Sound.FORMAT.MP3.ext],autoplay:!1,spritemap:{music:{start:c[e].startMp3,
end:c[e].endMp3,loop:!0}}})}},play:function(){this.stayMuteFlag||(this.bgmPlaying=!0,this.pausePosition?(console.log("resume"),this.jukeboxPlayer.resume(this.pausePosition)):(console.log("play"),this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,!0)),this.premuteVolume=this.getVolume())},stop:function(){this.bgmPlaying=!1;this.pausePosition=this.jukeboxPlayer.pause()},volume:function(c){console.log("jukebox:",c);0>=c?this.jukeboxPlayer.setVolume(this.minVolume):isNaN(c)?this.jukeboxPlayer.setVolume(1):
1<c?this.jukeboxPlayer.setVolume(1):this.jukeboxPlayer.setVolume(c)},getVolume:function(){return this.jukeboxPlayer.getVolume()},mute:function(c){this.parent(c);this.bgmPlaying&&(console.log("jukebox",this.premuteVolume),this.stayMuteFlag||(this.premuteVolume=this.getVolume()),this.jukeboxPlayer.pause(),this.jukeboxPlayer.setVolume(this.minVolume))},unmute:function(c){this.parent(c);this.stayMuteFlag||(console.log("jukebox",this.premuteVolume),this.jukeboxPlayer.setVolume(this.premuteVolume),this.jukeboxPlayer.resume())}})});
ig.baked=!0;
ig.module("plugins.audio.webaudio-music-player").requires("plugins.audio.sound-player").defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({tagName:"WebaudioMusicPlayer",bgmPlaying:!1,isSupported:!1,muteFlag:!1,pausedTime:0,webaudio:null,useHTML5Audio:!1,audio:null,inactiveAudio:null,codecs:null,reinitOnPlay:!1,inputList:null,_volume:1,soundList:{},init:function(c){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{Howler&&Howler.ctx?this.webaudio.context=Howler.ctx:
ig&&ig.webaudio_ctx?this.webaudio.context=ig.webaudio_ctx:(this.AudioContext=window.AudioContext||window.webkitAudioContext,this.webaudio.context=new this.AudioContext,ig.webaudio_ctx=this.webaudio.context),this.isSupported=!0}catch(d){console.log("Web Audio API not supported in this browser."),this.webaudio=null,this.useHTML5Audio=!0}if(this.useHTML5Audio)if("undefined"!==typeof Audio)try{new Audio}catch(e){this.useHTML5Audio=!1}else this.useHTML5Audio=!1;this.useHTML5Audio&&(this.audio=new Audio,
this.isSupported=!0,this.initHTML5Audio(c));if(!this.isSupported)return null;this.webaudio&&(this.inputList=c,this.initWebAudio(c))},initWebAudio:function(c){ig.ua.iOS&&this.initIOSWebAudioUnlock();this.webaudio.gainNode=this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;this.webaudio.buffer=null;var d="start",e="stop",f=this.webaudio.context.createBufferSource();"function"!==typeof f.start&&(d="noteOn");
this.webaudio.compatibility.start=d;"function"!==typeof f.stop&&(e="noteOff");this.webaudio.compatibility.stop=e;for(var g in c){this.soundList[g]=g;var e=c[g].path,d=e+"."+ig.Sound.FORMAT.MP3.ext,m=e+"."+ig.Sound.FORMAT.OGG.ext;ig.ua.mobile?ig.ua.iOS&&(m=d):(e=navigator.userAgent.toLowerCase(),-1!=e.indexOf("safari")&&-1>=e.indexOf("chrome")&&(m=d),e.indexOf("win64")&&(m=d));var r=new XMLHttpRequest;r.open("GET.html",m,!0);r.responseType="arraybuffer";r.onload=function(){this.webaudio.context.decodeAudioData(r.response,
function(c){this.webaudio.buffer=c;this.webaudio.source_loop={};this.bgmPlaying?this.play(null,!0):this.stop()}.bind(this),function(){console.log('Error decoding audio "'+m+'".')})}.bind(this);r.send();if(4==r.readyState&&"undefined"!==typeof Audio){this.useHTML5Audio=!0;try{new Audio}catch(s){this.useHTML5Audio=!1}this.useHTML5Audio&&(console.log("Using HTML5 Audio"),this.webaudio=null,this.audio=new Audio,this.isSupported=!0,this.initHTML5Audio(c))}break}},initIOSWebAudioUnlock:function(){if(this.webaudio){webaudio=
this.webaudio;var c=function(){var d=webaudio.context,e=d.createBuffer(1,1,22050),f=d.createBufferSource();f.buffer=e;f.connect(d.destination);"undefined"===typeof f.start?f.noteOn(0):f.start(0);setTimeout(function(){(f.playbackState===f.PLAYING_STATE||f.playbackState===f.FINISHED_STATE)&&window.removeEventListener("touchend",c,!1)}.bind(this),0)};window.addEventListener("touchend",c,!1)}},initHTML5Audio:function(c){if(this.useHTML5Audio&&this.audio){var d=this.audio;this.codecs={};this.codecs={mp3:!!d.canPlayType("audio/mpeg;").replace(/^no$/,
""),opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!d.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,
"")};this.is={ff:Boolean(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)};this.playDelay=-60;this.stopDelay=30;this.is.chrome&&(this.playDelay=-25);this.is.chrome&&(this.stopDelay=25);this.is.ff&&(this.playDelay=-25);this.is.ff&&
(this.stopDelay=85);this.is.opera&&(this.playDelay=5);this.is.opera&&(this.stopDelay=0);for(var e in c){this.soundList[e]=e;var f=c[e].path,d=f+"."+ig.Sound.FORMAT.OGG.ext,f=f+"."+ig.Sound.FORMAT.MP3.ext,g=null;this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]?g=d:this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]&&(g=f);if(g){ig.ua.mobile?ig.ua.iOS&&(g=f):(c=navigator.userAgent.toLowerCase(),-1!=c.indexOf("safari")&&-1>=c.indexOf("chrome")&&(g=f));this.audio.addEventListener("error",function(){this.audio.error&&
4===this.audio.error.code&&(this.isSupported=!1)},!1);this.audio.src=g;this.audio._pos=0;this.audio.preload="auto";this.audio.volume=this._volume;this.inactiveAudio=new Audio;this.inactiveAudio.src=g;this.inactiveAudio._pos=0;this.inactiveAudio.preload="auto";this.inactiveAudio.volume=this._volume;this.inactiveAudio.load();var m=function(){this._duration=this.audio.duration;this._loaded||(this._loaded=!0);this.bgmPlaying?this.play(null,!0):this.stop();this.audio.removeEventListener("canplaythrough",
m,!1)}.bind(this);this.audio.addEventListener("canplaythrough",m,!1);this.audio.load();break}}}},play:function(c,d){if(this.isSupported)if(this.bgmPlaying=!0,this.webaudio){if(!d&&this.reinitOnPlay&&this.webaudio.source_loop.buffer==this.webaudio.buffer){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=
this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0);try{this.webaudio.context.close();this.webaudio.context=new this.AudioContext;this.webaudio.gainNode=this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;var e="start",f="stop",g=this.webaudio.context.createBufferSource();
"function"!==typeof g.start&&(e="noteOn");this.webaudio.compatibility.start=e;"function"!==typeof g.stop&&(f="noteOff");this.webaudio.compatibility.stop=f;this.webaudio.source_loop={};this.play(null,!0)}catch(m){}}if(this.webaudio.buffer){if(!this.muteFlag&&(this.bgmPlaying=!0,!this.webaudio.source_loop._playing)){this.webaudio.source_loop=this.webaudio.context.createBufferSource();this.webaudio.source_loop.buffer=this.webaudio.buffer;this.webaudio.source_loop.loop=!0;this.webaudio.source_loop.connect(this.webaudio.gainNode);
if(null==c||isNaN(c))c=0,this.pausedTime&&(c=this.pausedTime);this.webaudio.source_loop._startTime=this.webaudio.context.currentTime;if("noteOn"===this.webaudio.compatibility.start)this.webaudio.source_once=this.webaudio.context.createBufferSource(),this.webaudio.source_once.buffer=this.webaudio.buffer,this.webaudio.source_once.connect(this.webaudio.gainNode),this.webaudio.source_once.noteGrainOn(0,c,this.webaudio.buffer.duration-c),this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+
(this.webaudio.buffer.duration-c));else this.webaudio.source_loop[this.webaudio.compatibility.start](0,c);this.webaudio.source_loop._playing=!0}}else this.bgmPlaying=!0}else if(this.audio){var r=this.audio;if(!this.muteFlag)if(this.bgmPlaying=!0,isNaN(c)&&(c=0,this.pausedTime&&(c=this.pausedTime)),e=this._duration-c,this._onEndTimer&&(clearTimeout(this._onEndTimer),this._onEndTimer=null),this._onEndTimer=setTimeout(function(){this.audio.currentTime=0;this.audio.pause();this.pausedTime=0;if(this.inactiveAudio){var c=
this.audio;this.audio=this.inactiveAudio;this.inactiveAudio=c}this.play()}.bind(this),1E3*e+this.playDelay),4===r.readyState||!r.readyState&&navigator.isCocoonJS)r.readyState=4,r.currentTime=c,r.muted=this.muteFlag||r.muted,r.volume=this._volume,setTimeout(function(){r.play()},0);else{clearTimeout(this._onEndTimer);this._onEndTimer=null;var s=function(){typeof("function"==this.play)&&(this.play(),r.removeEventListener("canplaythrough",s,!1))}.bind(this);r.addEventListener("canplaythrough",s,!1)}}},
stop:function(){this.bgmPlaying=!1;if(this.isSupported)if(this.webaudio){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0)}else if(this.audio){var c=
this.audio;4==c.readyState&&(this.pausedTime=c.currentTime,c.currentTime=0,c.pause(),clearTimeout(this._onEndTimer),this._onEndTimer=null)}},volume:function(c){if(isNaN(c)||null==c)return this.getVolume();this.isSupported&&(this._volume=c,0>this._volume?this._volume=0:1<this._volume&&(this._volume=1),this.webaudio?this.webaudio.gainNode&&(this.webaudio.gainNode.gain.value=this._volume):this.audio&&(this.audio.volume=this._volume,this.inactiveAudio&&(this.inactiveAudio.volume=this._volume)))},getVolume:function(){return!this.isSupported?
0:this._volume},mute:function(c){this.parent(c);!1==this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying&&(this.stop(),this.bgmPlaying=!0))},unmute:function(c){this.parent(c);!this.stayMuteFlag&&!0==this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying&&this.play())}})});ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3"},sfx:{kittyopeningSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/kittyopening"},staticSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/static"},openingSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/opening"},busArriveSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bus-arrived"},popSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/pop"},rainSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/rainy"},
beepSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/honk"},birdSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bird"},elephantSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/elephant"},clickSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/pop"},peekSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/peek"},monkeySound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/monkey"},foxSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/fox"},tigerSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/tiger"},
headlightSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/headlight"},songSound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/song"},yeaySound:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/yeay"}},bgm:{background:{path:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/bgm",startOgg:0,endOgg:21.463,startMp3:0,endMp3:21.463}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.impact-music-player","plugins.audio.impact-sound-player","plugins.audio.howler-player","plugins.audio.howler-music-player","plugins.audio.jukebox-player","plugins.audio.webaudio-music-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:!1,soundInfo:new SoundInfo,init:function(){console.log("Initiating sound handler");this.initWindowHandler();ig.ua.mobile?
(this.initPowerButtonFix(),this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:!0}))):(this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:!0})));this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx)},checkBGM:function(){return this.bgmPlayer.stayMuteFlag},checkSFX:function(){return this.sfxPlayer.stayMuteFlag},
muteSFX:function(c){this.sfxPlayer&&this.sfxPlayer.mute(c)},muteBGM:function(c){this.bgmPlayer&&this.bgmPlayer.mute(c)},unmuteSFX:function(c){this.sfxPlayer&&this.sfxPlayer.unmute(c)},unmuteBGM:function(c){this.bgmPlayer&&this.bgmPlayer.unmute(c)},muteAll:function(c){this.muteSFX(c);this.muteBGM(c)},unmuteAll:function(c){this.unmuteSFX(c);this.unmuteBGM(c)},forceMuteAll:function(){this.focusBlurMute||this.muteAll(!1);this.focusBlurMute=!0},forceUnMuteAll:function(){this.focusBlurMute&&(this.unmuteAll(!1),
this.focusBlurMute=!1)},initWindowHandler:function(){"true"===ig.domHandler.getQueryVariable("webview")?($(window).focus(function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()}),$(window).blur(function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})):(window.onfocus=function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},window.onblur=function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})},initPowerButtonFix:function(){var c=this.getHiddenProp();c&&(c=c.replace(/[H|h]idden/,
"")+"visibilitychange",document.addEventListener(c,this.visChange));window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()},!1);window.addEventListener("pageshow",function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},!1)},getHiddenProp:function(){var c=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var d=0;d<c.length;d++)if(c[d]+"Hidden"in document)return c[d]+"Hidden";return null},isHidden:function(){var c=this.getHiddenProp();return!c?
!1:document[c]},visChange:function(){ig.soundHandler.isHidden()?ig.soundHandler&&ig.soundHandler.forceMuteAll():ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},saveVolume:function(){this.sfxPlayer&&ig.game.io.storageSet("soundVolume",this.sfxPlayer.getVolume());this.bgmPlayer&&ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume())},forceLoopBGM:function(){var c;if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying&&this.bgmPlayer){var d=this.bgmPlayer.jukeboxPlayer;if(d){null!=window.mozInnerScreenX&&
/firefox/.test(navigator.userAgent.toLowerCase());c=Boolean(window.chrome);!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase());var e=0.1;ig.ua.mobile&&(e=0.115,ig.ua.android&&(e=0.45,c&&(e=0.3)));d.settings.spritemap.music&&(c=d.settings.spritemap.music.end-e,d.getCurrentTime()>=c&&(c=d.settings.spritemap.music.start,ig.ua.android?this.forcelooped||(d.play(c,!0),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},e)):d.setCurrentTime(c)))}else"ImpactMusicPlayer"==
this.bgmPlayer.tagName&&(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),c=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase()),e=0.1,ig.ua.mobile&&(e=0.115,ig.ua.android&&(e=0.45,c&&(e=0.3))),d=0,"mp3"==ig.soundManager.format.ext&&(d=0.05),ig.music.currentTrack&&(c=ig.music.currentTrack.duration-e,ig.music.currentTrack.currentTime>=c&&(ig.ua.android?this.forcelooped||(ig.music.currentTrack.pause(),ig.music.currentTrack.currentTime=
d,ig.music.currentTrack.play(),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},e)):ig.music.currentTrack.currentTime=d)))}}})});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(c){return null!==this.get(c)},initUnset:function(c,d){null===this.get(c)&&this.set(c,d)},get:function(c){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(c))}catch(d){return window.localStorage.getItem(c)}},
getInt:function(c){return~~this.get(c)},getFloat:function(c){return parseFloat(this.get(c))},getBool:function(c){return!!this.get(c)},key:function(c){return this.isCapable()?window.localStorage.key(c):null},set:function(c,d){if(!this.isCapable())return null;try{window.localStorage.setItem(c,JSON.stringify(d))}catch(e){console.log(e)}},setHighest:function(c,d){d>this.getFloat(c)&&this.set(c,d)},remove:function(c){if(!this.isCapable())return null;window.localStorage.removeItem(c)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.io.mouse").defines(function(){Mouse=ig.Class.extend({bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var c in this.bindings){this[c]=c;for(var d=0;d<this.bindings[c].length;d++)ig.input.bind(this.bindings[c][d],c)}},getPos:function(){if(ig.ua.mobile){var c=ig.input.mouse.x/ig.sizeHandler.sizeRatio.x,d=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;return new Vector2(c/ig.sizeHandler.scaleRatioMultiplier.x,d/ig.sizeHandler.scaleRatioMultiplier.y)}c=ig.input.mouse.x/
ig.sizeHandler.sizeRatio.x;d=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;return new Vector2(c,d)}})});ig.baked=!0;ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{jump:[ig.KEY.W,ig.KEY.UP_ARROW],moveright:[ig.KEY.D,ig.KEY.RIGHT_ARROW],moveleft:[ig.KEY.A,ig.KEY.LEFT_ARROW],shoot:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var c in this.bindings){this[c]=c;for(var d=0;d<this.bindings[c].length;d++)ig.input.bind(this.bindings[c][d],c)}}})});
ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var c=navigator.getGamepads||navigator.webkitGetGamepads;c&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=c}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(c){return"object"==typeof c?c.pressed:
1==c},buttonDown:function(c){if(c=this.bindings[c])this.states[c]=!0,this.downLocks[c]||(this.presses[c]=!0,this.downLocks[c]=!0)},buttonUp:function(c){if((c=this.bindings[c])&&this.downLocks[c]&&!this.upLocks[c])this.states[c]=!1,this.releases[c]=!0,this.upLocks[c]=!0},clearPressed:function(){for(var c in this.releases)this.states[c]=!1,this.downLocks[c]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(c,d){this.bindings[c]=d},unbind:function(c){this.releases[this.bindings[c]]=
!0;this.bindings[c]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(c){return this.states[c]},pressed:function(c){return this.presses[c]},released:function(c){return this.releases[c]},clamp:function(c,d,e){return c<d?d:c>e?e:c},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var c in this.bindings){for(var d=
!1,e=0;e<this.list.length;e++){var f=this.list[e];if(f&&f.buttons&&this.buttonPressed(f.buttons[c])){d=!0;break}}d?this.buttonDown(c):this.buttonUp(c)}for(e=0;e<this.list.length;e++)if((f=this.list[e])&&f.axes){c=f.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var d=f.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],g=f.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],f=f.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(c)?0:c;this.leftStick.y+=isNaN(d)?0:d;this.rightStick.x+=isNaN(g)?0:g;this.rightStick.y+=
isNaN(f)?0:f}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var c in this.bindings)for(var d=0;d<this.bindings[c].length;d++)ig.gamepadInput.bind(this.bindings[c][d],c)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var c=[],d=0;d<ig.multitouchInput.touches.length;d++){var e=ig.multitouchInput.touches[d];c.push({x:e.x,y:e.y})}return c}return null}}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(c){if(ig.ua.touchDevice){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||
ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight);if(c.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<c.touches.length&&(this.multitouchCapable=!0);var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());for(var g=0;g<c.touches.length;g++){var m=c.touches[g];m&&this.touches.push({x:(m.clientX-f.left)/d,y:(m.clientY-f.top)/e})}}else this.windowMove(c)}},touchdown:function(c){var d=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(c);else if(ig.ua.touchDevice&&c.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<c.touches.length&&(this.multitouchCapable=!0);var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());
for(var g=0;g<c.touches.length;g++){var m=c.touches[g];m&&this.touches.push({x:(m.clientX-f.left)/d,y:(m.clientY-f.top)/e})}}},touchup:function(c){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;parseInt(ig.system.canvas.offsetHeight);d=ig.system.scale*(d/ig.system.realWidth);if(window.navigator.msPointerEnabled)this.windowKeyUp(c);else{this.lastEventUp=c;var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());if(ig.ua.touchDevice){c=
(c.changedTouches[0].clientX-e.left)/d;for(d=0;d<this.touches.length;d++)this.touches[d].x>=c-40&&this.touches[d].x<=c+40&&this.touches.splice(d,1)}}},windowKeyDown:function(c){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight);if(window.navigator.msPointerEnabled){var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());
c=c.changedTouches?c.changedTouches:[c];for(var g=0;g<c.length;++g){for(var m=c[g],r="undefined"!=typeof m.identifier?m.identifier:"undefined"!=typeof m.pointerId?m.pointerId:1,s=(m.clientX-f.left)/d,m=(m.clientY-f.top)/e,j=0;j<this.touches.length;++j)this.touches[j].identifier==r&&this.touches.splice(j,1);this.touches.push({x:s,y:m,identifier:r})}for(d=0;d<this.touches.length;d++);}},windowKeyUp:function(c){c="undefined"!=typeof c.identifier?c.identifier:"undefined"!=typeof c.pointerId?c.pointerId:
1;for(var d=0;d<this.touches.length;++d)this.touches[d].identifier==c&&this.touches.splice(d,1);for(;0<this.touches.length;)this.touches.pop()},windowMove:function(c){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight),f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());if(window.navigator.msPointerEnabled)for(var g=
"undefined"!=typeof c.identifier?c.identifier:"undefined"!=typeof c.pointerId?c.pointerId:1,m=0;m<this.touches.length;++m)if(this.touches[m].identifier==g){var r=(c.clientY-f.top)/e;this.touches[m].x=(c.clientX-f.left)/d;this.touches[m].y=r}}})});ig.baked=!0;
ig.module("plugins.io.fake-storage").requires("impact.game").defines(function(){ig.FakeStorage=ig.Class.extend({tempData:{},init:function(){ig.FakeStorage.instance=this},initUnset:function(c,d){null===this.get(c)&&this.set(c,d)},set:function(c,d){this.tempData[c]=JSON.stringify(d)},setHighest:function(c,d){d>this.getFloat(c)&&this.set(c,d)},get:function(c){return"undefined"==typeof this.tempData[c]?null:JSON.parse(this.tempData[c])},getInt:function(c){return~~this.get(c)},getFloat:function(c){return parseFloat(this.get(c))},
getBool:function(c){return!!this.get(c)},isSet:function(c){return null!==this.get(c)},remove:function(c){delete this.tempData[c]},clear:function(){this.tempData={}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input","plugins.io.fake-storage").defines(function(){IoManager=ig.Class.extend({storage:null,localStorageSupport:!1,mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();
this.initMouse();this.initKeyboard()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){try{window.localStorage.setItem("test","test"),this.storage=new ig.Storage}catch(c){console.log("using fake storage"),this.storage=new ig.FakeStorage}finally{window.localStorage.removeItem("test")}},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=
new Gamepad},press:function(c){return ig.input.pressed(c)||this.gamepad&&this.gamepad.press(c)?!0:!1},held:function(c){return ig.input.state(c)||this.gamepad&&this.gamepad.state(c)?!0:!1},release:function(c){return ig.input.released(c)||this.gamepad&&this.gamepad.released(c)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(c,d,e,f,g){return c.x>d+f||c.x<d||c.y>e+g||c.y<e?!1:!0},_supportsLocalStorage:function(){try{return localStorage.setItem("test",
"test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(c){return this.localStorageSupport}},storageIsSet:function(c){return!this.localStorageSupport?null:this.storage.isSet(c)},storageGet:function(c){return!this.localStorageSupport?null:this.storage.get(c)},storageSet:function(c,d){if(!this.localStorageSupport)return null;this.storage.set(c,d)},assert:function(c,d,e){if(d!==e)throw"actualValue:"+d+" not equal to testValue:"+e+" at "+
c;}})});ig.baked=!0;
ig.module("plugins.io.storage-manager").requires("impact.game","plugins.io.io-manager").defines(function(){ig.Game.prototype.name="MJS-Game";ig.Game.prototype.version="1.0";ig.Game.prototype.sessionData={};ig.Game.prototype.initData=function(){return this.sessionData={sound:0.5,music:0.5,level:1,score:0}};ig.Game.prototype.setupStorageManager=function(){"undefined"===typeof this.name?console.error("Cannot found Game Name, Storage Manager Cancelled."):"undefined"===typeof this.version?console.error("Cannot found Game Version, Storage Manager Cancelled."):
(this.io||(this.io=new IoManager,console.log("IO Manager doesn't existed. Initialize...")),console.log("Plug in Storage Manager"),this.storage=this.io.storage,this.storageName=this.name+"-v"+this.version,this.loadAll())};ig.Game.prototype.loadAll=function(){var c=this.storage.get(this.storageName);if(null===c||"undefined"===typeof c||this.isDataMismatch())c=this.initData();this.initData();for(var d in c)void 0!=c[d]&&(this.sessionData[d]=c[d]);this.storage.set(this.storageName,c)};ig.Game.prototype.isDataMismatch=
function(){var c=this.storage.get(this.storageName),d;for(d in this.sessionData)if(void 0===c[d])return!0;return!1};ig.Game.prototype.saveAll=function(){var c=this.storage.get(this.storageName),d;for(d in this.sessionData)c[d]=this.sessionData[d];this.storage.set(this.storageName,c)};ig.Game.prototype.load=function(c){return this.storage.get(this.storageName)[c]};ig.Game.prototype.save=function(c,d){var e=this.storage.get(this.storageName);e[c]=d;this.storage.set(this.storageName,e)}});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({splashDesktop:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/desktop/bg-loading.png"),splashMobile:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/desktop/bg-loading.png"),border:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/loading/border-loading.png"),bar:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/loading/bar-loading.png"),
barSize:{x:436,y:47},customAnim:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/bird-anim.png",71,96),resources:[new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/bgm.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/bgm.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/branding/splash/opening.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/branding/splash/opening.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/ching.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/ching.ogg"),
new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/kittyopening.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/kittyopening.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/opening.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/opening/opening.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bgm.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bgm.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bird.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bird.ogg"),
new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bus-arrived.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/bus-arrived.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/elephant.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/elephant.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/fox.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/fox.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/headlight.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/headlight.ogg"),
new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/honk.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/honk.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/monkey.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/monkey.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/peek.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/peek.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/pop.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/pop.ogg"),
new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/rainy.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/rainy.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/song.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/song.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/static.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/static.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/tiger.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/tiger.ogg"),
new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/yeay.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/play/yeay.ogg"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/start.mp3"),new ig.Sound("http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/audio/start.ogg"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/backgrounds/desktop/background.jpg"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/backgrounds/mobile/background.jpg"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bar-base.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-menu.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-polos.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-popup.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-continue.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-home-1.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-home.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-moregames.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-next.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-no.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-pause.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-replay-1.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-replay.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-settings.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-yes.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-orange.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-purple.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-red.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/bus.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/headlight-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/lamp.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/red-button-anim.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/shadow-bus.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/sirene-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/wheel-left-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/wheel-right-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/window-glass.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/wiper-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/124x140.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/132x178.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/bird-anim-11.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/bird-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/bird-clicked-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/elephant-clicked-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/elephant-idle-anim.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/elephant-shadow.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/fox-clicked-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/fox-idle-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/fox-shadow.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/monkey-clicked-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/monkey-idle-anim.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/monkey-shadow.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/rabbit-clicked-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/rabbit-idle-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/rabbit-shadow.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/sound-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/tiger-clicked-anim.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/tiger-idle-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/cloud-normal.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/cloud-rain.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/fence.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/grass.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/halte.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/hand-idle-anim.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/icon-music.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/icon-sound.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/rain-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/rambu.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/slider.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/sun-anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/title-1.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/title.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/tree1.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/tree2.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/tree3.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/volume.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/generic-ad/dark/close-button.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/generic-ad/light/close-button.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/misc/invisible.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/kitty.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/kittytitle.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/m_icon.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/shield.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/title.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/orientate/landscape.jpg"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/orientate/portrait.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/orientate/scroll_down.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/overlays/close-button.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/overlays/close-button2.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/desktop/bg-loading.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/loading/anim.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/loading/bar-loading.png"),
new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/loading/border-loading.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/loading/loading-frame.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/mobile/cover-start.png"),new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/sprites/btn_more_games.png")],init:function(c,d){this.parent(c,d);this.setupCustomAnimation();console.log("Checking for AdInGamePreroll ...");"undefined"!=typeof AdInGamePreroll&&AdInGamePreroll.Initialize();
console.log("Checking for BrandingSplashScreen ...");"undefined"!=typeof BrandingSplashScreen&&InitializeSplashScreen();ig.apiHandler.run("MJSPreroll");console.log("Injecting Loading Game API ...");try{console.log('enabled loading api13');}catch(e){console.log(e.message)}},end:function(){this.parent();if(ig.ua.mobile){var c=ig.domHandler.getElementById("#play");ig.domHandler.show(c)}ig.system.setGame(MyGame)},setupCustomAnimation:function(){this.animHeight=this.customAnim.height;this.animWidth=this.customAnim.width;
this.customAnim=new ig.Animation(this.customAnim,0.025,[0,1,2,3,4,5,6,7,8])},animate:function(){ig.Timer.step();this.customAnim.update()},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);var c=ig.system.scale,d,e,f;ig.ua.mobile?(d=432,e=0.5*ig.system.width-d/2,f=0.67*ig.system.height,this.splashMobile.draw(0,0)):(d=432,e=0.5*ig.system.width-d/2,f=0.67*ig.system.height,this.splashDesktop.draw(0,
0));ig.system.context.fillStyle="#ffffff";ig.system.context.font="16px dimbo";this.border.draw(ig.system.width/4,ig.system.height/2+100);this.bar.draw(ig.system.width/4+16,ig.system.height/2+112,0,0,this.barSize.x*this._drawStatus,this.barSize.y);this.animate();this.customAnim.draw(e*c+d*c*this._drawStatus-this.animWidth+20,f*c+c-0.5*this.animHeight-34)}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(c){for(var d=0;d<this.length;++d)if(this[d]===c)return d;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var c=[],d=0;d<this.tweens.length;d++)this.tweens[d].update(),this.tweens[d].complete||c.push(this.tweens[d]);this.tweens=
c}};ig.Entity.prototype.delayedCall=function(c,d,e){void 0===e&&(e=!0);c=new ig.Tween(this,{},c,{onComplete:d});this.tweens.push(c);e&&c.start();return c};ig.Entity.prototype.tween=function(c,d,e){c=new ig.Tween(this,c,d,e);this.tweens.push(c);return c};ig.Entity.prototype.pauseTweens=function(){for(var c=0;c<this.tweens.length;c++)this.tweens[c].pause()};ig.Entity.prototype.resumeTweens=function(){for(var c=0;c<this.tweens.length;c++)this.tweens[c].resume()};ig.Entity.prototype.stopTweens=function(c){for(var d=
0;d<this.tweens.length;d++)this.tweens[d].stop(c)};ig.Tween=function(c,d,e,f){var g={},m={},r={},s=0,j=!1,n=!1,p=!1;this.duration=e;this.paused=this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,f);this.loopNum=this.loopCount;this.chain=function(c){p=c};this.initEnd=function(c,d,e){if("object"!==typeof d[c])e[c]=d[c];else for(subprop in d[c])e[c]||(e[c]={}),this.initEnd(subprop,d[c],e[c])};this.initStart=function(c,
d,e,f){if("object"!==typeof e[c])"undefined"!==typeof d[c]&&(f[c]=e[c]);else for(subprop in e[c])f[c]||(f[c]={}),"undefined"!==typeof d[c]&&this.initStart(subprop,d[c],e[c],f[c])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;s=0;-1==c.tweens.indexOf(this)&&c.tweens.push(this);n=!0;j=new ig.Timer;for(var e in d)this.initEnd(e,d,m);for(e in m)this.initStart(e,m,c,g),this.initDelta(e,r,c,m)};this.initDelta=function(c,d,e,f){if("object"!==typeof f[c])d[c]=f[c]-e[c];else for(subprop in f[c])d[c]||
(d[c]={}),this.initDelta(subprop,d[c],e[c],f[c])};this.propUpdate=function(c,d,e,f,g){if("object"!==typeof e[c])d[c]="undefined"!=typeof e[c]?e[c]+f[c]*g:d[c];else for(subprop in e[c])this.propUpdate(subprop,d[c],e[c],f[c],g)};this.propSet=function(c,d,e){if("object"!==typeof d[c])e[c]=d[c];else for(subprop in d[c])e[c]||(e[c]={}),this.propSet(subprop,d[c],e[c])};this.update=function(){if(!n)return!1;if(this.delay){if(j.delta()<this.delay)return;this.delay=0;j.reset()}if(this.paused||this.complete)return!1;
var d=(j.delta()+s)/this.duration,d=1<d?1:d,e=this.easing(d);for(property in r)this.propUpdate(property,c,g,r,e);if(1<=d){if(0==this.loopNum||!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();p&&p.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in g)this.propSet(property,g,c);s=0;j.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){d={};e={};ig.merge(d,m);ig.merge(e,g);ig.merge(g,d);ig.merge(m,e);for(property in m)this.initDelta(property,
r,c,m);s=0;j.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;j&&j.delta&&(s+=j.delta())};this.resume=function(){this.paused=!1;j&&j.reset&&j.reset()};this.stop=function(c){c&&(this.loop=this.complete=this.paused=!1,s+=e,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(c){return c};
ig.Tween.Easing.Quadratic.EaseIn=function(c){return c*c};ig.Tween.Easing.Quadratic.EaseOut=function(c){return-c*(c-2)};ig.Tween.Easing.Quadratic.EaseInOut=function(c){return 1>(c*=2)?0.5*c*c:-0.5*(--c*(c-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(c){return c*c*c};ig.Tween.Easing.Cubic.EaseOut=function(c){return--c*c*c+1};ig.Tween.Easing.Cubic.EaseInOut=function(c){return 1>(c*=2)?0.5*c*c*c:0.5*((c-=2)*c*c+2)};ig.Tween.Easing.Quartic.EaseIn=function(c){return c*c*c*c};ig.Tween.Easing.Quartic.EaseOut=
function(c){return-(--c*c*c*c-1)};ig.Tween.Easing.Quartic.EaseInOut=function(c){return 1>(c*=2)?0.5*c*c*c*c:-0.5*((c-=2)*c*c*c-2)};ig.Tween.Easing.Quintic.EaseIn=function(c){return c*c*c*c*c};ig.Tween.Easing.Quintic.EaseOut=function(c){return(c-=1)*c*c*c*c+1};ig.Tween.Easing.Quintic.EaseInOut=function(c){return 1>(c*=2)?0.5*c*c*c*c*c:0.5*((c-=2)*c*c*c*c+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(c){return-Math.cos(c*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(c){return Math.sin(c*
Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(c){return-0.5*(Math.cos(Math.PI*c)-1)};ig.Tween.Easing.Exponential.EaseIn=function(c){return 0==c?0:Math.pow(2,10*(c-1))};ig.Tween.Easing.Exponential.EaseOut=function(c){return 1==c?1:-Math.pow(2,-10*c)+1};ig.Tween.Easing.Exponential.EaseInOut=function(c){return 0==c?0:1==c?1:1>(c*=2)?0.5*Math.pow(2,10*(c-1)):0.5*(-Math.pow(2,-10*(c-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(c){return-(Math.sqrt(1-c*c)-1)};ig.Tween.Easing.Circular.EaseOut=
function(c){return Math.sqrt(1- --c*c)};ig.Tween.Easing.Circular.EaseInOut=function(c){return 1>(c/=0.5)?-0.5*(Math.sqrt(1-c*c)-1):0.5*(Math.sqrt(1-(c-=2)*c)+1)};ig.Tween.Easing.Elastic.EaseIn=function(c){var d,e=0.1,f=0.4;if(0==c)return 0;if(1==c)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return-(e*Math.pow(2,10*(c-=1))*Math.sin((c-d)*2*Math.PI/f))};ig.Tween.Easing.Elastic.EaseOut=function(c){var d,e=0.1,f=0.4;if(0==c)return 0;if(1==c)return 1;f||(f=0.3);!e||1>e?(e=1,
d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return e*Math.pow(2,-10*c)*Math.sin((c-d)*2*Math.PI/f)+1};ig.Tween.Easing.Elastic.EaseInOut=function(c){var d,e=0.1,f=0.4;if(0==c)return 0;if(1==c)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return 1>(c*=2)?-0.5*e*Math.pow(2,10*(c-=1))*Math.sin((c-d)*2*Math.PI/f):0.5*e*Math.pow(2,-10*(c-=1))*Math.sin((c-d)*2*Math.PI/f)+1};ig.Tween.Easing.Back.EaseIn=function(c){return c*c*(2.70158*c-1.70158)};ig.Tween.Easing.Back.EaseOut=function(c){return(c-=
1)*c*(2.70158*c+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(c){return 1>(c*=2)?0.5*c*c*(3.5949095*c-2.5949095):0.5*((c-=2)*c*(3.5949095*c+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=function(c){return 1-ig.Tween.Easing.Bounce.EaseOut(1-c)};ig.Tween.Easing.Bounce.EaseOut=function(c){return(c/=1)<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+0.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+0.9375:7.5625*(c-=2.625/2.75)*c+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(c){return 0.5>c?0.5*ig.Tween.Easing.Bounce.EaseIn(2*
c):0.5*ig.Tween.Easing.Bounce.EaseOut(2*c-1)+0.5};ig.Tween.Interpolation={Linear:function(c,d){var e=c.length-1,f=e*d,g=Math.floor(f),m=TWEEN.Interpolation.Utils.Linear;return 0>d?m(c[0],c[1],f):1<d?m(c[e],c[e-1],e-f):m(c[g],c[g+1>e?e:g+1],f-g)}}});ig.baked=!0;
ig.module("plugins.patches.entity-patch").requires("impact.entity").defines(function(){ig.Entity.inject({handleMovementTrace:function(c){this.standing=!1;c.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));c.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(c.collision.slope){var d=c.collision.slope;if(0<this.bounciness){var e=
this.vel.x*d.nx+this.vel.y*d.ny;this.vel.x=(this.vel.x-2*d.nx*e)*this.bounciness;this.vel.y=(this.vel.y-2*d.ny*e)*this.bounciness}else e=(this.vel.x*d.x+this.vel.y*d.y)/(d.x*d.x+d.y*d.y),this.vel.x=d.x*e,this.vel.y=d.y*e,d=Math.atan2(d.x,d.y),d>this.slopeStanding.min&&d<this.slopeStanding.max&&(this.standing=!0)}this.pos.x=c.pos.x;this.pos.y=c.pos.y}})});ig.baked=!0;
ig.module("plugins.tweens-handler").requires("impact.entity","plugins.tween","plugins.patches.entity-patch").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(c){for(var e=0;e<this.length;++e)if(this[e]===c)return e;return-1});ig.TweensHandler=ig.Class.extend({_tweens:[],_systemPausedTweens:[],init:function(){},getAll:function(){return this._tweens},removeAll:function(){this._tweens=[]},add:function(c){this._tweens.push(c)},remove:function(c){c=this._tweens.indexOf(c);
-1!==c&&this._tweens.splice(c,1)},onSystemPause:function(){if(0===this._tweens.length)return!1;for(var c=0,e=null;c<this._tweens.length;)e=this._tweens[c],e._isPlaying&&(this._systemPausedTweens.push(e),e.pause()),c++;return!0},onSystemResume:function(){if(0===this._systemPausedTweens.length)return!1;for(var c=0;c<this._systemPausedTweens.length;)this._systemPausedTweens[c].resume(),c++;this._systemPausedTweens=[];return!0},update:function(c,e){if(0===this._tweens.length)return!1;var f=0;for(c=void 0!==
c?c:ig.game.tweens.now();f<this._tweens.length;)this._tweens[f].update(c)||e?f++:this._tweens.splice(f,1);return!0},now:function(){return Date.now()}});ig.TweenDef=ig.Class.extend({_ent:null,_valuesStart:{},_valuesEnd:{},_valuesStartRepeat:{},_duration:1E3,_repeat:0,_yoyo:!1,_isPlaying:!1,_reversed:!1,_delayTime:0,_startTime:null,_pauseTime:null,_easingFunction:ig.Tween.Easing.Linear.EaseNone,_interpolationFunction:ig.Tween.Interpolation.Linear,_chainedTweens:[],_onStartCallback:null,_onStartCallbackFired:!1,
_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallback:null,_onPauseCallback:null,_onResumeCallback:null,_currentElapsed:0,init:function(c){this._object=c},to:function(c,e){this._valuesEnd=c;void 0!==e&&(this._duration=e);return this},start:function(c){if(this._isPlaying)return this;ig.game.tweens.add(this);this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==c?c:ig.game.tweens.now();this._startTime+=this._delayTime;for(var e in this._valuesEnd){if(this._valuesEnd[e]instanceof
Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],!1===this._valuesStart[e]instanceof Array&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){if(!this._isPlaying)return this;ig.game.tweens.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object);this.stopChainedTweens();
return this},pause:function(){if(!this._isPlaying)return this;ig.game.tweens.remove(this);this._isPlaying=!1;this._pauseTime=ig.game.tweens.now();null!==this._onPauseCallback&&this._onPauseCallback.call(this._object,this._object);return this},resume:function(){if(this._isPlaying||!this._pauseTime)return this;var c=ig.game.tweens.now()-this._pauseTime;this._startTime+=c;ig.game.tweens.add(this);this._isPlaying=!0;null!==this._onResumeCallback&&this._onResumeCallback.call(this._object,this._object);
this._pauseTime=null;return this},end:function(){this.update(this._startTime+this._duration);return this},stopChainedTweens:function(){for(var c=0,e=this._chainedTweens.length;c<e;c++)this._chainedTweens[c].stop()},delay:function(c){this._delayTime=c;return this},repeat:function(c){this._repeat=c;return this},repeatDelay:function(c){this._repeatDelayTime=c;return this},yoyo:function(c){this._yoyo=c;return this},easing:function(c){this._easingFunction=c;return this},interpolation:function(c){this._interpolationFunction=
c;return this},chain:function(){this._chainedTweens=arguments;return this},onStart:function(c){this._onStartCallback=c;return this},onUpdate:function(c){this._onUpdateCallback=c;return this},onComplete:function(c){this._onCompleteCallback=c;return this},onStop:function(c){this._onStopCallback=c;return this},onPause:function(c){this._onPauseCallback=c;return this},onResume:function(c){this._onResumeCallback=c;return this},update:function(c){var e,f,g;if(c<this._startTime)return!0;!1===this._onStartCallbackFired&&
(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0);f=(c-this._startTime)/this._duration;this._currentElapsed=f=1<f?1:f;g=this._easingFunction(f);for(e in this._valuesEnd)if(void 0!==this._valuesStart[e]){var m=this._valuesStart[e]||0,r=this._valuesEnd[e];r instanceof Array?this._object[e]=this._interpolationFunction(r,g):("string"===typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?m+parseFloat(r):parseFloat(r)),"number"===typeof r&&
(this._object[e]=m+(r-m)*g))}null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,this._object,g);if(1===f)if(0<this._repeat){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat)"string"===typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=_valuesStartRepeat[e]+parseFloat(_valuesEnd[e])),this._yoyo&&(f=this._valuesStartRepeat[e],this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=f),this._valuesStart[e]=this._valuesStartRepeat[e];this._yoyo&&
(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?c+this._repeatDelayTime:c+this._delayTime}else{null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);c=0;for(e=this._chainedTweens.length;c<e;c++)this._chainedTweens[c].start(this._startTime+this._duration);return!1}return!0}});var c=[1];ig.Tween.Interpolation={Linear:function(c,e){var f=c.length-1,g=f*e,m=Math.floor(g),r=ig.Tween.Interpolation.Utils.Linear;return 0>e?r(c[0],c[1],g):
1<e?r(c[f],c[f-1],f-g):r(c[m],c[m+1>f?f:m+1],g-m)},Bezier:function(c,e){for(var f=0,g=c.length-1,m=Math.pow,r=ig.Tween.Interpolation.Utils.Bernstein,s=0;s<=g;s++)f+=m(1-e,g-s)*m(e,s)*c[s]*r(g,s);return f},CatmullRom:function(c,e){var f=c.length-1,g=f*e,m=Math.floor(g),r=ig.Tween.Interpolation.Utils.CatmullRom;return c[0]===c[f]?(0>e&&(m=Math.floor(g=f*(1+e))),r(c[(m-1+f)%f],c[m],c[(m+1)%f],c[(m+2)%f],g-m)):0>e?c[0]-(r(c[0],c[0],c[1],c[1],-g)-c[0]):1<e?c[f]-(r(c[f],c[f],c[f-1],c[f-1],g-f)-c[f]):r(c[m?
m-1:0],c[m],c[f<m+1?f:m+1],c[f<m+2?f:m+2],g-m)},Utils:{Linear:function(c,e,f){return(e-c)*f+c},Bernstein:function(c,e){var f=ig.Tween.Interpolation.Utils.Factorial;return f(c)/f(e)/f(c-e)},Factorial:function(d){var e=1;if(c[d])return c[d];for(var f=d;1<f;f--)e*=f;return c[d]=e},CatmullRom:function(c,e,f,g,m){c=0.5*(f-c);g=0.5*(g-e);var r=m*m;return(2*e-2*f+c+g)*m*r+(-3*e+3*f-2*c-g)*r+c*m+e}}}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var c=getQueryVariable("webview");if(c)switch(c){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(c=getQueryVariable("debug"))switch(c){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(c,d){this.game=c;this.levels=[];this.currentLevel=0;this.append(d)},loadLevel:function(c){for(var d in ig.sizeHandler.dynamicClickableEntityDivs){var e=ig.domHandler.getElementById("#"+d);ig.domHandler.hide(e)}this.currentLevel=c;this.game.loadLevel(this.levels[c]);return!0},loadLevelWithoutEntities:function(c){this.currentLevel=c;this.game.loadLevelWithoutEntities(this.levels[c]);return!0},
append:function(c){newLevels=[];return"object"===typeof c?(c.constructor===[].constructor?newLevels=c:newLevels[0]=c,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(c){var d=null;for(i=0;i<this.levels.length;i++)this.levels[i]==c&&(d=i);return 0<=d?this.loadLevel(d):!1},firstLevel:function(){return this.loadLevel(0)},
lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(c){return null!==this.get(c)},initUnset:function(c,d){null===this.get(c)&&this.set(c,d)},get:function(c){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(c))}catch(d){return window.localStorage.getItem(c)}},
getInt:function(c){return~~this.get(c)},getFloat:function(c){return parseFloat(this.get(c))},getBool:function(c){return!!this.get(c)},key:function(c){return this.isCapable()?window.localStorage.key(c):null},set:function(c,d){if(!this.isCapable())return null;try{window.localStorage.setItem(c,JSON.stringify(d))}catch(e){console.log(e)}},setHighest:function(c,d){d>this.getFloat(c)&&this.set(c,d)},remove:function(c){if(!this.isCapable())return null;window.localStorage.removeItem(c)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.math.random").defines(function(){ig.random={bool:function(){return 0.5>Math.random()},"int":function(c,d){return c+Math.floor((d-c+1)*Math.random())},"float":function(c,d){return c+(d-c)*Math.random()},string:function(c,d){void 0===d&&(d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");for(var e="",f=0;f<c;f++)e+=d.charAt(Random.int(0,d.length-1));return e},fromArray:function(c){return null!=c&&0<c.length?c[this.int(0,c.length-1)]:null},shuffle:function(c){if(null!=
c)for(var d=0;d<c.length;d++){var e=this.int(0,c.length-1),f=c[d];c[d]=c[e];c[e]=f}return c}}});ig.baked=!0;
ig.module("plugins.scale").requires("impact.entity").defines(function(){ig.Entity.inject({scale:{x:1,y:1},_offset:{x:0,y:0},_scale:{x:1,y:1},_size:{x:0,y:0},init:function(c,d,e){this.parent(c,d,e);this._offset.x=this.offset.x;this._offset.y=this.offset.y;this._size.x=this.size.x;this._size.y=this.size.y;this.setScale(this.scale.x,this.scale.y)},draw:function(){var c=ig.system.context;c.save();c.translate(ig.system.getDrawPos(this.pos.x.round()-this.offset.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y.round()-
this.offset.y-ig.game.screen.y));c.scale(this._scale.x,this._scale.y);null!=this.currentAnim&&this.currentAnim.draw(0,0);c.restore()},setScale:function(c,d){var e=this.size.x,f=this.size.y;this.scale.x=c||this.scale.x;this.scale.y=d||this.scale.y;this._scale.x=this.scale.x/ig.system.scale;this._scale.y=this.scale.y/ig.system.scale;this.offset.x=this._offset.x*this._scale.x;this.offset.y=this._offset.y*this._scale.y;this.size.x=this._size.x*this._scale.x;this.size.y=this._size.y*this._scale.y;this.pos.x+=
(e-this.size.x)/2;this.pos.y+=(f-this.size.y)/2}})});ig.baked=!0;
ig.module("plugins.fake-storage").requires("impact.game").defines(function(){ig.FakeStorage=ig.Class.extend({tempData:{},init:function(){ig.FakeStorage.instance=this},initUnset:function(c,d){null===this.get(c)&&this.set(c,d)},set:function(c,d){this.tempData[c]=JSON.stringify(d)},setHighest:function(c,d){d>this.getFloat(c)&&this.set(c,d)},get:function(c){return"undefined"==typeof this.tempData[c]?null:JSON.parse(this.tempData[c])},getInt:function(c){return~~this.get(c)},getFloat:function(c){return parseFloat(this.get(c))},
getBool:function(c){return!!this.get(c)},isSet:function(c){return null!==this.get(c)},remove:function(){delete this.tempData.key},clear:function(){this.tempData={}}})});ig.baked=!0;
ig.module("plugins.data.color-rgb").defines(function(){ColorRGB=function(c,d,e,f){this.r=c||0;this.g=d||0;this.b=e||0;this.a=f||0};ColorRGB.prototype={setRandomColor:function(){this.r=Math.round(255*Math.random());this.g=Math.round(255*Math.random());this.b=Math.round(255*Math.random())},getStyle:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},getHex:function(){for(var c=this.r.toString(16),d=this.g.toString(16),e=this.b.toString(16);2>c.length;)c="0"+c;for(;2>d.length;)d="0"+
d;for(;2>e.length;)e="0"+e;return"#"+c+d+e},getInvertedColor:function(){return new ColorRGB(255-this.r,255-this.g,255-this.b,255-this.a)},clone:function(){return new ColorRGB(this.r,this.g,this.b,this.a)}}});ig.baked=!0;
ig.module("game.entities.primary").requires("impact.entity").defines(function(){EntityPrimary=ig.Entity.extend({name:"primary",soundCheck:function(c){return ig.soundHandler.sfxPlayer.soundList[c]._sounds[0]._ended},shuffleArray2:function(c){for(var d=c.length,e,f;0!==d;)f=Math.floor(Math.random()*d),d-=1,e=c[d],c[d]=c[f],c[f]=e;return c},shuffleArray:function(c){for(var d=c.length,e,f;0<d;)f=Math.floor(Math.random()*d),d--,e=c[d],c[d]=c[f],c[f]=e;return c},fnGetAngleRad:function(c,d){return Math.atan2(d.y-
c.y,d.x-c.x)},fnGetDistance:function(c,d){var e=c.x-d.x,f=c.y-d.y;return Math.sqrt(e*e+f*f)},fnGetQuadrantContext:function(){var c=0.5*Math.PI;return{right:0,bottom:c,left:2*c,top:-1*c}},fnGetQuadrantAnimation:function(){var c=0.5*Math.PI;return{right:c,bottom:2*c,left:3*c,top:0}},fnCtxDot:function(c,d,e,f,g){g=g||2;c.fillStyle=f||"black";c.fillRect(d-g/2,e-g/2,g,g);c.restore()},fnDrawText:function(c,d,e,f,g,m,r){this.text=d;this.width=e;this.height=f;this.textcolor=g;this.textsize=m;c=ig.system.context;
c.font=this.textsize;c.textAlign=r||"center";c.fillStyle=this.textcolor;c.fillText(this.text,this.width,this.height)},wrapText:function(c,d,e,f,g,m){d=d.split("\n");for(var r="",s=0;s<d.length;s++)r=r+d[s]+" breakLine ";d=r.split(" ");r="";for(s=0;s<d.length;s++)if("breakLine"!=d[s]){var j=r+d[s]+" ";c.measureText(j).height>g&&0<s?(c.fillText(r,e,f),r=d[s]+" ",e+=m):r=j}else c.fillText(r,e,f),r="",e+=m;c.fillText(r,e,f)},totalDaysinMonth:function(){(new Date).getMonth()},daysInMonth:function(c,d){return(new Date(d,
c,0)).getDate()},weekAndDay:function(){for(var c=new Date,d=0,e=c.getTime(),f=c=c.getMonth();f==c;)d++,f=(new Date(e-6048E5*d)).getMonth();return d},getMonthString:function(){this.month=(new Date).getMonth();0==this.month?this.month="January":1==this.month?this.month="February":2==this.month?this.month="March":3==this.month?this.month="April":4==this.month?this.month="May":5==this.month?this.month="June":6==this.month?this.month="July":7==this.month?this.month="August":8==this.month?this.month="September":
9==this.month?this.month="October":10==this.month?this.month="November":11==this.month&&(this.month="December");return this.month},getFullToday:function(){this.objToday=new Date;weekday="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");dayOfWeek=weekday[this.objToday.getDay()];domEnder=function(){var c=this.objToday;if(/1/.test(parseInt((c+"").charAt(0))))return"th";c=parseInt((c+"").charAt(1));return 1==c?"st":2==c?"nd":3==c?"rd":"th"}();dayOfMonth=this.today+(10>this.objToday.getDate())?
"0"+this.objToday.getDate()+domEnder:this.objToday.getDate()+domEnder;months="January February March April May June July August September October November December".split(" ");curMonth=months[this.objToday.getMonth()];curYear=this.objToday.getFullYear();curHour=12<this.objToday.getHours()?this.objToday.getHours()-12:10>this.objToday.getHours()?"0"+this.objToday.getHours():this.objToday.getHours();curMinute=10>this.objToday.getMinutes()?"0"+this.objToday.getMinutes():this.objToday.getMinutes();curSeconds=
10>this.objToday.getSeconds()?"0"+this.objToday.getSeconds():this.objToday.getSeconds();curMeridiem=12<this.objToday.getHours()?"PM":"AM";this.today=curHour+":"+curMinute+"."+curSeconds+curMeridiem+" "+dayOfWeek+" "+dayOfMonth+" of "+curMonth+", "+curYear},checkHighScoreWeek:function(){this.high=Math.max(ig.game.firstweek[0],ig.game.firstweek[1],ig.game.firstweek[2],ig.game.firstweek[3],ig.game.firstweek[4],ig.game.firstweek[5],ig.game.firstweek[6]);ig.game.allweek[0]=this.high;ig.game.storage.set("plane-allweek",
ig.game.allweek);this.high=Math.max(ig.game.secondweek[0],ig.game.secondweek[1],ig.game.secondweek[2],ig.game.secondweek[3],ig.game.secondweek[4],ig.game.secondweek[5],ig.game.secondweek[6]);ig.game.allweek[1]=this.high;ig.game.storage.set("plane-allweek",ig.game.allweek);this.high=Math.max(ig.game.thirdweek[0],ig.game.thirdweek[1],ig.game.thirdweek[2],ig.game.thirdweek[3],ig.game.thirdweek[4],ig.game.thirdweek[5],ig.game.thirdweek[6]);ig.game.allweek[2]=this.high;ig.game.storage.set("plane-allweek",
ig.game.allweek);this.high=Math.max(ig.game.fourthweek[0],ig.game.fourthweek[1],ig.game.fourthweek[2],ig.game.fourthweek[3],ig.game.fourthweek[4],ig.game.fourthweek[5],ig.game.fourthweek[6]);ig.game.allweek[3]=this.high;ig.game.storage.set("plane-allweek",ig.game.allweek);this.high=Math.max(ig.game.fifthweek[0],ig.game.fifthweek[1],ig.game.fifthweek[2],ig.game.fifthweek[3],ig.game.fifthweek[4],ig.game.fifthweek[5],ig.game.fifthweek[6]);ig.game.allweek[4]=this.high;ig.game.storage.set("plane-allweek",
ig.game.allweek)},dateSet:function(c,d){this.date=(new Date).getDate();this.month=(new Date).getMonth();this.week&&(ig.game.dateweek1[d]=this.date,ig.game.storage.set("plane-dateweek1",ig.game.dateweek1));this.week&&(ig.game.dateweek2[d]=this.date,ig.game.storage.set("plane-dateweek2",ig.game.dateweek2));this.week&&(ig.game.dateweek3[d]=this.date,ig.game.storage.set("plane-dateweek3",ig.game.dateweek3));this.week&&(ig.game.dateweek4[d]=this.date,ig.game.storage.set("plane-dateweek4",ig.game.dateweek4));
this.week&&(ig.game.dateweek5[d]=this.date,ig.game.storage.set("plane-dateweek5",ig.game.dateweek5))}})});ig.baked=!0;
ig.module("game.entities.buttons.button").requires("game.entities.primary","plugins.data.vector").defines(function(){EntityButton=EntityPrimary.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:95E3,init:function(c,d,e){this.parent(c,d,e);!ig.global.wm&&!isNaN(e.zIndex)&&(this.zIndex=e.zIndex);c=Math.floor(256*Math.random());d=Math.floor(256*Math.random());e=Math.floor(256*Math.random());this.fillColor="rgba("+c+","+e+","+d+",1)"},clicked:function(){throw"no implementation on clicked()";
},clicking:function(){throw"no implementation on clicking()";},released:function(){throw"no implementation on released()";}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/misc/invisible.png",init:function(c){this.pos=new Vector2(c.pos.x,c.pos.y);this.size=new Vector2(c.size.x,c.size.y);var d="more-games",e="www.google.com",f=!1;c.div_layer_name&&(d=c.div_layer_name);c.link&&(e=c.link);c.newWindow&&(f=c.newWindow);this.createClickableLayer(d,
e,f)},createClickableLayer:function(c,d,e){this.identifier=c;var f=ig.domHandler.getElementById("#"+c);f?(ig.domHandler.show(f),ig.domHandler.attr(f,"href",d)):this.createClickableOutboundLayer(c,d,this.invisImagePath,e)},update:function(c,d){this.pos.x===c&&this.pos.y===d||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(c,d,e,f){var g=ig.domHandler.create("div");ig.domHandler.attr(g,"id",c);var m=ig.domHandler.create("a");f?(ig.domHandler.attr(m,"href",d),ig.domHandler.attr(m,"target","_blank")):ig.domHandler.attr(m,"href",d);d=ig.domHandler.create("img");ig.domHandler.css(d,{width:"100%",height:"100%"});ig.domHandler.attr(d,"src",e);e=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,
ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){f=ig.domHandler.getElementById("#canvas");f=ig.domHandler.getOffsets(f);var r=f.left,s=f.top;console.log(f.left);ig.sizeHandler.disableStretchToFitOnMobileFlag?(f=Math.floor(r+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",s=Math.floor(s+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",r=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",e=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(f=Math.floor(this.pos.x*
ig.sizeHandler.sizeRatio.x)+"px",s=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",r=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",e=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px")}else f=ig.domHandler.getElementById("#canvas"),f=ig.domHandler.getOffsets(f),r=f.left,s=f.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(f=Math.floor(r+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",s=Math.floor(s+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",r=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+
"px",e=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(f=Math.floor(r+this.pos.x*e)+"px",s=Math.floor(s+this.pos.y*e)+"px",r=Math.floor(this.size.x*e)+"px",e=Math.floor(this.size.y*e)+"px");ig.domHandler.css(g,{"float":"left",position:"absolute",left:f,top:s,width:r,height:e,"z-index":3});ig.domHandler.addEvent(g,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(m,d);ig.domHandler.appendChild(g,m);ig.domHandler.appendToBody(g);ig.sizeHandler.dynamicClickableEntityDivs[c]=
{};ig.sizeHandler.dynamicClickableEntityDivs[c].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[c].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[c].entity_pos_x=this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[c].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-moregames.png",79,79),size:{x:79,y:79},zIndex:6001,clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",name:"moregames",sfxPop:"popSound",scale:{x:0,y:0},init:function(c,d,e){this.parent(c,
d,e);this.btnTween();ig.global.wm||(this.div_layer_name=e.div_layer_name?e.div_layer_name:"more-games",_SETTINGS.MoreGames.Enabled?(this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow)):this.kill())},update:function(){this.parent();this.setScale(this.scale.x,this.scale.y);1==this.scale.x&&!ig.game.settings&&(this.clickableLayer=
new ClickableDivLayer(this))},show:function(){var c=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(c)},hide:function(){var c=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(c)},clicked:function(){},clicking:function(){},released:function(){},btnTween:function(){this.tween({scale:{x:1,y:1}},1,{easing:ig.Tween.Easing.Bounce.EaseOut,onComplete:function(){}.bind(this)}).start()}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/shield.png"),mIconImage:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/m_icon.png"),titleImage:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/title.png"),init:function(c,d,e){this.parent(c,d,e)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=
new ig.Timer(0.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(c){console.log(c)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateOriginalShieldOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&
0<this.initTimer.delta()&&(this.initTimer=null,this.sheildTimer=new ig.Timer(0.05));this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(0.001),this.mIconTimer=new ig.Timer(0.05),this.titleTimer=new ig.Timer(0.15)));this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=0.3,this.moveTimer.reset());this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):
this.mIconTimer=null);this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var c=ig.system.context;c.save();var d=ig.system.width/2,e=ig.system.height/2;c.translate(d,e);c.rotate(this.move*Math.PI/
180);c.beginPath();c.moveTo(0,0);for(var f=0,g=1;48>=g;g+=1)c.lineTo(0+800*Math.cos(2*g*Math.PI/48),0+800*Math.sin(2*g*Math.PI/48)),f++,2==f&&(f=0,c.lineTo(0,0));c.translate(-d,-e);d=c.createRadialGradient(d,e,100,d,e,250);d.addColorStop(0,"rgba(255,255,255,0.1)");d.addColorStop(1,"rgba(0,0,0,0)");c.fillStyle=d;c.fill();c.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768);this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/
2-70,this.mIconAnim,166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/opening/kittytitle.png"),soundKey:"kittyopeningSound",init:function(c,d,e){this.parent(c,d,e)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);
try{ig.soundHandler.sfxPlayer.play(this.soundKey)}catch(c){console.log(c)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateKittyOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=
new ig.Timer(0.15));this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var c=ig.system.context.createLinearGradient(0,0,0,ig.system.height);c.addColorStop(0,"#ffed94");c.addColorStop(1,"#ffcd85");ig.system.context.fillStyle=
c;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);0<=this.kittyAnim&&(this.kittyImage.drawTile(ig.system.width/2-this.kittyImage.width/8,ig.system.height/2-this.kittyImage.height/4,this.kittyAnim,218,325),this.kittyTitleImage.drawTile(ig.system.width/2-this.kittyTitleImage.width/2,ig.system.height/2+this.kittyImage.height/4+10,this.kittyAnim,380,37));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,size:new Vector2(1,1),isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5500,check:function(c){this.objectArray.push(c)},clickObject:function(c){this.isFirstPressed&&"function"==typeof c.clicked&&(c.clicked(),this.addToClickedObjectList(c));this.isPressed&&!this.isReleased&&
"function"==typeof c.clicking&&c.clicking();this.isReleased&&"function"==typeof c.released&&(c.released(),this.removeFromClickedObjectList(c))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var c=null,d=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>d&&(d=this.objectArray[a].zIndex,c=this.objectArray[a]);if(null!=c)null!=this.hoveringItem?this.hoveringItem!=c&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),
"function"==typeof c.over&&c.over()):"function"==typeof c.over&&c.over(),this.hoveringItem=c,this.clickObject(c),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(c=0;c<this.clickedObjectList.length;c++)d=this.clickedObjectList[c],"function"==typeof d.releasedOutside&&d.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");
this.isPressed=ig.input.state("click")},addToClickedObjectList:function(c){this.clickedObjectList.push(c)},removeFromClickedObjectList:function(c){for(var d=[],e=0;e<this.clickedObjectList.length;e++){var f=this.clickedObjectList[e];f!=c&&d.push(f)}this.clickedObjectList=d}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(c,d,e){this.parent(c,d,e)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(c,d,e){this.parent(c,d,e);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(c){for(k in dynamicClickableEntityDivs)if(k==c)return!0;return!1},checkClickableLayer:function(c,
d,e){"undefined"==typeof wm&&(this.doesClickableLayerExist(c)?(ig.game.showOverlay([c]),$("#"+c).find("[href]").attr("href",d)):this.createClickableOutboundLayer(c,d,"../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/misc/invisible.png",e))},createClickableOutboundLayer:function(c,d,e,f){var g=ig.$new("div");g.id=c;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("width",this.size.x*multiplier);$("#"+g.id).css("height",this.size.y*multiplier);$("#"+g.id).css("position","absolute");
var m=w/2-destW/2,r=h/2-destH/2;w==mobileWidth?($("#"+g.id).css("left",this.pos.x),$("#"+g.id).css("top",this.pos.y)):($("#"+g.id).css("left",m+this.pos.x*multiplier),$("#"+g.id).css("top",r+this.pos.y*multiplier));f?$("#"+g.id).html("<a target='_blank' href='"+d+"'><img style='width:100%;height:100%' src='"+e+"'></a>"):$("#"+g.id).html("<a href='"+d+"'><img style='width:100%;height:100%' src='"+e+"'></a>");dynamicClickableEntityDivs[c]={};dynamicClickableEntityDivs[c].width=$("#"+g.id).width();dynamicClickableEntityDivs[c].height=
$("#"+g.id).height();dynamicClickableEntityDivs[c].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[c].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var c=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<c.length;i++)c[i]!=this&&(c[i].isHovering=!1)},deselectOthers:function(){var c=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<c.length;i++)c[i]!=this&&(c[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;
ig.module("game.entities.fade-screen").requires("impact.entity","plugins.director").defines(function(){EntityFadeScreen=ig.Entity.extend({size:{x:0,y:0},zIndex:1200,name:"fade",init:function(c,d,e){this.parent(c,d,e);this.alpha=0},update:function(){this.parent();this.fade&&(this.alpha+=0.1,1<=this.alpha&&(this.fade=!1,this.alpha=0,ig.game.animPlay=!1,ig.game.director.loadLevel(this.levelLoad)))},callFade:function(c){this.levelLoad=c;this.alpha=0.01;this.fade=!0;ig.game.animPlay=!0},draw:function(){this.parent();
ig.system.clear("rgba(0, 0, 0, "+this.alpha+")")}})});ig.baked=!0;ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;ig.module("game.entities.settings.controller").requires("game.entities.primary").defines(function(){EntityController=EntityPrimary.extend({init:function(){ig.game.controller=this}})});ig.baked=!0;
ig.module("game.entities.settings.timerinject").requires("impact.timer").defines(function(){ig.Timer.inject({countdown:function(){if(0<this.delta())return{d:0,h:0,m:0,s:0};var c,d,e,f=Math.floor(Math.abs(this.delta())),f=f+1;e=Math.floor(f/60);f%=60;d=Math.floor(e/60);e%=60;c=Math.floor(d/24);d%=24;return 0>c&&0>d&&0>e&&0>f?null:{d:c,h:d,m:e,s:f}},countdownOstring:function(){if(0<this.delta())return null;var c=this.countdown();c.d=("0"+c.d).slice(-2);c.h=("0"+c.h).slice(-2);c.m=("0"+c.m).slice(-2);
c.s=("0"+c.s).slice(-2);return c},progress:function(){return 0<this.delta()?null:(this.target+this.delta())/this.target}})});ig.baked=!0;
ig.module("game.entities.settings.swipe-overlay").requires("game.entities.primary","game.entities.settings.controller").defines(function(){EntitySwipeOverlay=EntityPrimary.extend({name:"swipe",size:{x:1920,y:540},type:ig.Entity.TYPE.A,paused:!1,swipeon:!1,cli:!1,distance:0,zIndex:3E3,init:function(c,d,e){this.parent(c,d,e);this.swipeon=this.cli=!1;ig.game.sortEntitiesDeferred()},update:function(){this.parent()},clicked:function(){this.cli=!0;this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.posStart={x:this.pointer.pos.x,y:this.pointer.pos.y}},clicking:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posEnd={x:this.pointer.pos.x,y:this.pointer.pos.y};null!=this.posStart&&(this.game=ig.game.getEntitiesByType(EntityGameController)[0],this.distance=ig.game.controller.fnGetDistance(this.posStart,this.posEnd))},released:function(){this.cli=!1;this.game=ig.game.getEntitiesByType(EntityGameController)[0]},swipeAngle:function(){this.angle=ig.game.controller.fnGetAngleRad(this.posStart,
this.posEnd);var c=0.5*Math.PI;this.dir="";0>=this.angle&&this.angle>=-c?(a=Math.abs(this.angle),b=c-Math.abs(this.angle),this.dir=a<=b?"right":"top"):this.angle<=-c&&this.angle>=-(2*c)?(a=Math.abs(this.angle)-c,b=2*c-Math.abs(this.angle),this.dir=a<=b?"top":"left"):0<=this.angle&&this.angle<=c?(a=this.angle,b=c-this.angle,this.dir=a<=b?"right":"bottom"):this.angle>=c&&this.angle<=2*c&&(a=this.angle-c,b=2*c-this.angle,this.dir=a<=b?"bottom":"left")},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.settings.screenfade").requires("game.entities.primary").defines(function(){EntityScreenFade=EntityPrimary.extend({size:{x:960,y:540},name:"screenfade",alphaFade:0,zIndex:5009,init:function(c,d,e){this.parent(c,d,e);this.alphaFade=0;this.bluecolor=this.greencolor=this.redcolor=253},update:function(){this.parent()},fadescreenAnim:function(){this.tween({alphaFade:0.5,redcolor:32,greencolor:32,bluecolor:32},0.3,{easing:ig.Tween.Easing.Sinusoidal.EaseOut}).start()},fadeoutscreenAnim:function(){this.tween({alphaFade:0,
redcolor:253,greencolor:253,bluecolor:253},0.3,{easing:ig.Tween.Easing.Sinusoidal.EaseOut}).start()},draw:function(){this.parent();ig.system.context.save();ig.system.context.fillStyle="rgba("+this.redcolor+","+this.greencolor+","+this.bluecolor+","+this.alphaFade+")";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.restore()}})});ig.baked=!0;
ig.module("game.entities.bus-game.character").requires("impact.entity","game.entities.primary").defines(function(){EntityRabbit=EntityPrimary.extend({size:{x:5,y:5},name:"rabbit",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2E3,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/rabbit-idle-anim.png",118,170),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/rabbit-clicked-anim.png",118,170),init:function(c,
d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.06,[0,1,2,3,4,5,6,7,8,9,10,11],!1);this.anims.clicked=new ig.Animation(this.animSheetClicked,0.048,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,14,14,14,14],!1);this.anims.gone=new ig.Animation(this.animSheetIdle,0.05,[12],!1);this.currentAnim=this.anims.idle;2==ig.game.currentLevelAct&&(this.shadow=ig.game.spawnEntity(EntityShadow,this.pos.x,this.pos.y+162,{shadow:0}))},ready:function(){this.pointer=
ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();this.swipe=ig.game.getEntitiesByType(EntitySwipeOverlay)[0];2==ig.game.currentLevelAct&&ig.game.playing&&this.shadow.kill()},clicked:function(){},clicking:function(){},released:function(){},rabbitTween:function(){this.tween({pos:{y:this.pos.y-35}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){}.bind(this)}).start()},rabbitOutTween:function(){this.tween({pos:{y:this.pos.y+
50}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){this.currentAnim=this.anims.gone}.bind(this)}).start()},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityMonkey=EntityPrimary.extend({size:{x:5,y:5},name:"monkey",type:ig.Entity.TYPE.B,
swipeon:!1,isClicking:!1,zIndex:2E3,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/monkey-idle-anim.png",144,148),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/monkey-clicked-anim.png",144,148),tweenonce:!1,init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0,0,0,0,0,1,2,3,4,5,6,7,8,9],!1);this.anims.clicked=new ig.Animation(this.animSheetClicked,
0.05,[0,1,2,3,4,5,6,7,8,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],!1);this.anims.gone=new ig.Animation(this.animSheetIdle,0.05,[10],!1);this.currentAnim=this.anims.idle;2==ig.game.currentLevelAct&&(this.shadow=ig.game.spawnEntity(EntityShadow,this.pos.x+45,this.pos.y+142,{shadow:1}))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();this.swipe=ig.game.getEntitiesByType(EntitySwipeOverlay)[0];
2==ig.game.currentLevelAct&&ig.game.playing&&this.shadow.kill()},clicked:function(){},clicking:function(){},released:function(){},monkeyTween:function(){this.tween({pos:{y:this.pos.y-70}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){}.bind(this)}).start()},monkeyOutTween:function(){this.tween({pos:{y:this.pos.y+100}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){this.currentAnim=this.anims.gone}.bind(this)}).start()},checkOverlapWithPointer:function(){var c=
ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityElephant=EntityPrimary.extend({size:{x:5,y:5},name:"elephant",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2E3,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/elephant-idle-anim.png",
253,242),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/elephant-clicked-anim.png",250,242),sfxElephant:"elephantSound",init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0,1,2,3,4,5,6,7,8,9,10],!1);this.anims.clicked=new ig.Animation(this.animSheetClicked,0.05,[0,1,2,3,4,5,6],!1);this.anims.gone=new ig.Animation(this.animSheetIdle,0.05,[11],!1);this.currentAnim=this.anims.idle;
2==ig.game.currentLevelAct&&(this.shadow=ig.game.spawnEntity(EntityShadow,this.pos.x+20,this.pos.y+232,{shadow:2}))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();this.swipe=ig.game.getEntitiesByType(EntitySwipeOverlay)[0];2==ig.game.currentLevelAct&&ig.game.playing&&this.shadow.kill()},clicked:function(){},clicking:function(){},released:function(){},elephantTween:function(){var c=this.tween({pos:{y:this.pos.y-
30}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){}.bind(this)}),d=this.tween({pos:{y:this.pos.y}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){}.bind(this)});c.chain(d);c.start()},elephantOutTween:function(){this.tween({pos:{y:this.pos.y+50}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){this.currentAnim=this.anims.gone}.bind(this)}).start()},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];
c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityFox=EntityPrimary.extend({size:{x:5,y:5},name:"fox",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2E3,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/fox-idle-anim.png",147,205),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/fox-clicked-anim.png",
147,205),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0,1,2,3,4,5,6,7,8,9,10],!1);this.anims.clicked=new ig.Animation(this.animSheetClicked,0.048,[0,1,2,3,4,5,6,7,8],!1);this.anims.gone=new ig.Animation(this.animSheetIdle,0.05,[11],!1);this.currentAnim=this.anims.idle;2==ig.game.currentLevelAct&&(this.shadow=ig.game.spawnEntity(EntityShadow,this.pos.x+20,this.pos.y+195,{shadow:3}))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();this.swipe=ig.game.getEntitiesByType(EntitySwipeOverlay)[0];2==ig.game.currentLevelAct&&ig.game.playing&&this.shadow.kill()},clicked:function(){},clicking:function(){},released:function(){},foxTween:function(){this.tween({pos:{y:this.pos.y-30}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){}.bind(this)}).start()},foxOutTween:function(){this.tween({pos:{y:this.pos.y+70}},0.09,{easing:ig.Tween.Easing.Quadratic.EaseOut,
onComplete:function(){this.currentAnim=this.anims.gone}.bind(this)}).start()},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityTiger=EntityPrimary.extend({size:{x:5,y:5},name:"tiger",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2002,
animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/tiger-idle-anim.png",138,184),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/tiger-clicked-anim.png",138,182),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0,1,2,3,4,5,6,7,8,9],!1);this.anims.clicked=new ig.Animation(this.animSheetClicked,0.05,[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,
15,16,17,18,18,18,19,19,19],!1);this.anims.stay=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.currentAnim=this.anims.idle;ig.game.sortEntitiesDeferred()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent()},clicked:function(){},clicking:function(){},released:function(){this.currentAnim=this.anims.clicked},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];
c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityBird=EntityPrimary.extend({size:{x:71,y:96},name:"bird",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2005,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/bird-anim.png",71,96),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/bird-clicked-anim.png",
70,90),birdTimer:new ig.Timer(3),sfxBird:"birdSound",init:function(c,d,e){this.parent(c,d,e);this.birdTimer.pause();this.context=ig.system.context;ig.game.birdclick=!1;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0,1,2,3,4,5,6,7,8],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.048,[9],!1);this.currentAnim=this.anims.idle;this.whistle=ig.game.spawnEntity(EntityWhistle,240,-10);this.whistle.zIndex=2006;ig.game.sortEntitiesDeferred()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();ig.game.birdclick&&0<this.birdTimer.delta()&&(ig.game.birdclick=!1,this.birdTimer.reset(),this.birdTimer.pause(),this.currentAnim=this.anims.idle,this.whistle.currentAnim=this.whistle.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxBird))},clicked:function(){!ig.game.sundone&&!ig.game.birdclick&&(this.currentAnim=this.anims.clicked,this.birdTimer.unpause(),this.birdTimer.reset(),ig.game.birdclick=!0,this.whistle.currentAnim.angle=
60,this.whistle.currentAnim=this.whistle.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxBird))},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityWhistle=EntityPrimary.extend({size:{x:5,y:5},
name:"whistle",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2005,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/sound-anim.png",50,97),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[12],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.048,[0,1,2,3,4,5,6,7,8,9,10,11],!1);this.currentAnim=this.anims.idle},update:function(){this.parent()},draw:function(){this.parent()}});
EntityShadow=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"shadow",zIndex:1008,data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/rabbit-shadow.png","../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/monkey-shadow.png","../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/elephant-shadow.png","../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/fox-shadow.png","http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/shadow-bus.png"],size:[{x:120,y:15},{x:91,y:12},{x:225,
y:19},{x:133,y:14},{x:607,y:45}],offset:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],sprite:[{x:120,y:15},{x:91,y:12},{x:225,y:19},{x:133,y:14},{x:607,y:45}],anims:[[[0]],[[0]],[[0]],[[0]],[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.shadow];this.offset=this.data.offset[e.shadow];this.sprite=this.data.sprite[e.shadow];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.shadow],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.shadow][0]);
this.currentAnim.pivot.x=this.size.x/2},ready:function(){},update:function(){this.parent()},draw:function(){this.parent()}});EntityCharaclickmonkey=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"chara-clickmonkey",zIndex:2005,monTimer:new ig.Timer(1.5),sfxMonkey:"monkeySound",data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/124x140.png"],size:[{x:124,y:140}],offset:[{x:0,y:0}],sprite:[{x:124,y:140}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.monTimer.pause();
ig.game.monclick=!1;this.size=this.data.size[e.click];this.offset=this.data.offset[e.click];this.sprite=this.data.sprite[e.click];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.click],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.click][0]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();var c=ig.game.getEntitiesByType(EntityMonkey)[0];
ig.game.getEntitiesByType(EntitySingController);ig.game.monclick&&0<this.monTimer.delta()&&(ig.game.monclick=!1,this.monTimer.reset(),this.monTimer.pause(),c.currentAnim=c.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxMonkey))},clicked:function(){this.sing=ig.game.getEntitiesByType(EntitySingController)[0];!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3);var c=ig.game.getEntitiesByType(EntityMonkey)[0];ig.game.getEntitiesByType(EntitySingController);!ig.game.sundone&&!ig.game.monclick&&(this.monTimer.unpause(),
this.monTimer.reset(),ig.game.monclick=!0,c.currentAnim=c.anims.clicked.rewind(),c.currentAnim=c.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxMonkey))},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});
EntityCharaclickfox=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"chara-clickfox",zIndex:2005,foxTimer:new ig.Timer(3),sfxFox:"foxSound",data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/124x140.png"],size:[{x:124,y:140}],offset:[{x:0,y:0}],sprite:[{x:124,y:140}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.foxTimer.pause();ig.game.foxclick=!1;this.size=this.data.size[e.click];this.offset=this.data.offset[e.click];this.sprite=this.data.sprite[e.click];
this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.click],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.click][0]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();var c=ig.game.getEntitiesByType(EntityFox)[0];ig.game.getEntitiesByType(EntitySingController);ig.game.foxclick&&0<this.foxTimer.delta()&&(ig.game.foxclick=!1,this.foxTimer.reset(),
this.foxTimer.pause(),c.currentAnim=c.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxFox))},clicked:function(){this.sing=ig.game.getEntitiesByType(EntitySingController)[0];!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3);var c=ig.game.getEntitiesByType(EntityFox)[0];ig.game.getEntitiesByType(EntitySingController);!ig.game.sundone&&!ig.game.foxclick&&(this.foxTimer.unpause(),this.foxTimer.reset(),ig.game.foxclick=!0,c.currentAnim=c.anims.clicked.rewind(),c.currentAnim=c.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxFox))},
clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityCharaclickelephant=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"chara-clickelephant",zIndex:2005,eleTimer:new ig.Timer(3),sfxElephant:"elephantSound",
data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/124x140.png"],size:[{x:124,y:140}],offset:[{x:0,y:0}],sprite:[{x:124,y:140}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.eleTimer.pause();ig.game.eleclick=!1;this.size=this.data.size[e.click];this.offset=this.data.offset[e.click];this.sprite=this.data.sprite[e.click];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.click],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.click][0]);
this.currentAnim.pivot.x=this.size.x/2},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();var c=ig.game.getEntitiesByType(EntityElephant)[0],d=ig.game.getEntitiesByType(EntitySingController)[0];ig.game.eleclick&&0<this.eleTimer.delta()&&(ig.game.eleclick=!1,c.currentAnim=c.anims.idle,d.whistle.currentAnim=d.whistle.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxElephant),this.eleTimer.reset(),
this.eleTimer.pause())},clicked:function(){this.sing=ig.game.getEntitiesByType(EntitySingController)[0];!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3);var c=ig.game.getEntitiesByType(EntityElephant)[0],d=ig.game.getEntitiesByType(EntitySingController)[0];!ig.game.sundone&&!ig.game.eleclick&&(this.eleTimer.unpause(),this.eleTimer.reset(),ig.game.eleclick=!0,c.currentAnim=c.anims.clicked.rewind(),c.currentAnim=c.anims.clicked,d.whistle.currentAnim=d.whistle.anims.clicked.rewind(),d.whistle.currentAnim=
d.whistle.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxElephant))},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityCharaclickrabbit=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"chara-clickrabbit",
zIndex:2005,rabTimer:new ig.Timer(1),sfxPeek:"peekSound",data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/124x140.png"],size:[{x:124,y:140}],offset:[{x:0,y:0}],sprite:[{x:124,y:140}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.rabTimer.pause();ig.game.rabclick=!1;this.size=this.data.size[e.click];this.offset=this.data.offset[e.click];this.sprite=this.data.sprite[e.click];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.click],this.sprite.x,this.sprite.y);
this.addAnim("idle",1,this.data.anims[e.click][0]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();var c=ig.game.getEntitiesByType(EntityRabbit)[0];ig.game.getEntitiesByType(EntitySingController);ig.game.rabclick&&0<this.rabTimer.delta()&&(ig.game.rabclick=!1,this.rabTimer.reset(),this.rabTimer.pause(),c.currentAnim=c.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxPeek))},
clicked:function(){this.sing=ig.game.getEntitiesByType(EntitySingController)[0];!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3);var c=ig.game.getEntitiesByType(EntityRabbit)[0];ig.game.getEntitiesByType(EntitySingController);!ig.game.sundone&&!ig.game.rabclick&&(this.rabTimer.unpause(),this.rabTimer.reset(),ig.game.rabclick=!0,c.currentAnim=c.anims.clicked.rewind(),c.currentAnim=c.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxPeek))},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=
ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityCharaclicktiger=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"chara-clicktiger",zIndex:2005,tigTimer:new ig.Timer(1),sfxTiger:"tigerSound",data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/characters/132x178.png"],
size:[{x:132,y:178}],offset:[{x:0,y:0}],sprite:[{x:132,y:178}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.tigTimer.pause();ig.game.tigclick=!1;this.size=this.data.size[e.click];this.offset=this.data.offset[e.click];this.sprite=this.data.sprite[e.click];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.click],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.click][0]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();var c=ig.game.getEntitiesByType(EntityTiger)[0];ig.game.getEntitiesByType(EntitySingController);ig.game.tigclick&&0<this.tigTimer.delta()&&(ig.game.tigclick=!1,this.tigTimer.reset(),this.tigTimer.pause(),c.currentAnim=c.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxTiger))},clicked:function(){this.sing=ig.game.getEntitiesByType(EntitySingController)[0];!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3);var c=ig.game.getEntitiesByType(EntityTiger)[0];
ig.game.getEntitiesByType(EntitySingController);!ig.game.sundone&&!ig.game.tigclick&&(this.tigTimer.unpause(),this.tigTimer.reset(),ig.game.tigclick=!0,c.currentAnim=c.anims.clicked.rewind(),c.currentAnim=c.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxTiger))},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+
this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.bus-game.bus-stop").requires("impact.entity","game.entities.primary").defines(function(){EntityHalte=EntityPrimary.extend({size:{x:472,y:322},name:"halte",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:1009,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/halte.png",472,322),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.currentAnim=this.anims.idle;
ig.game.sortEntitiesDeferred()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent()},draw:function(){this.parent()}});EntityRambu=EntityPrimary.extend({size:{x:104,y:259},name:"rambu",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:1009,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/rambu.png",104,259),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;
this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.currentAnim=this.anims.idle;ig.game.sortEntitiesDeferred()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent()},draw:function(){this.parent()}});EntityProperties=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"properties",zIndex:1008,maxVel:{x:500,y:500},takeSpeed:!0,data:{animSheet:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/tree1.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/tree2.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/tree3.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/fence.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/grass.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-orange.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-purple.png http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-red.png".split(" "),
size:[{x:10,y:10},{x:10,y:10},{x:10,y:10},{x:10,y:10},{x:10,y:10},{x:10,y:10},{x:10,y:10},{x:10,y:10}],offset:[{x:91,y:230},{x:50,y:230},{x:89,y:190},{x:56,y:55},{x:61,y:77},{x:114,y:281},{x:105,y:310},{x:105,y:293}],sprite:[{x:183,y:240},{x:101,y:240},{x:179,y:200},{x:112,y:65},{x:123,y:87},{x:228,y:291},{x:210,y:320},{x:210,y:303}],anims:[[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]],[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.prop];this.offset=this.data.offset[e.prop];
this.sprite=this.data.sprite[e.prop];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.prop],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.prop][0]);this.currentAnim.pivot.x=this.size.x/2;switch(e.line){case 0:this.pos.y=ig.system.height/2+80;break;case 1:this.pos.y=ig.system.height/2+80}3==ig.game.currentLevelAct&&(this.pos.x-=this.size.x)},ready:function(){},update:function(){this.parent();3==ig.game.currentLevelAct&&0>this.pos.x+30*this.size.x&&this.kill()},draw:function(){this.parent()}});
EntityBuilding=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"building",zIndex:1007,maxVel:{x:500,y:500},takeSpeed:!0,data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-orange.png","../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-purple.png","http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/building-red.png"],size:[{x:228,y:291},{x:210,y:320},{x:210,y:303}],offset:[{x:0,y:0},{x:0,y:0},{x:0,y:0}],sprite:[{x:228,y:291},{x:210,y:320},{x:210,y:303}],anims:[[[0]],[[0]],[[0]]]},
init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.build];this.offset=this.data.offset[e.build];this.sprite=this.data.sprite[e.build];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.build],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.build][0]);this.currentAnim.pivot.x=this.size.x/2;switch(e.line){case 0:this.pos.y=ig.system.height/4-this.size.y/2+35;break;case 1:this.pos.y=ig.system.height/4-this.size.y/2+35}3==ig.game.currentLevelAct&&(this.pos.x-=
this.size.x)},ready:function(){},update:function(){this.parent();0>this.pos.x+this.size.x&&this.kill()},draw:function(){this.parent()}});EntityCloud=EntityPrimary.extend({size:{x:172,y:106},name:"cloud",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:1007,maxVel:{x:500,y:500},takeSpeed:!0,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/cloud-normal.png",172,106),animSheetClicked:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/cloud-rain.png",
172,106),init:function(c,d,e){this.parent(c,d,e);ig.game.clickonce=!1;this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.anims.clicked=new ig.Animation(this.animSheetClicked,0.048,[0],!1);this.rain=ig.game.spawnEntity(EntityRain,this.pos.x,this.pos.y+106);ig.game.rainy?(this.currentAnim=this.anims.clicked,this.rain.currentAnim=this.rain.anims.clicked):(this.currentAnim=this.anims.idle,this.rain.currentAnim=this.rain.anims.idle);switch(e.line){case 0:this.pos.y=
ig.system.height/16;break;case 1:this.pos.y=ig.system.height/16+20}3==ig.game.currentLevelAct&&(this.pos.x-=this.size.x)},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();3==ig.game.currentLevelAct&&0>this.pos.x+this.size.x&&this.kill();ig.game.getEntitiesByType(EntityScreenFade);ig.game.getEntitiesByType(EntityWiper);ig.game.getEntitiesByType(EntitySun);this.rain.pos.x=this.pos.x;ig.game.rainy?
(this.currentAnim=this.anims.clicked,this.rain.currentAnim=this.rain.anims.clicked):(this.currentAnim=this.anims.idle,this.rain.currentAnim=this.rain.anims.idle)},clicked:function(){ig.game.getEntitiesByType(EntityScreenFade);ig.game.getEntitiesByType(EntityWiper);ig.game.getEntitiesByType(EntitySun);3==ig.game.currentLevelAct&&this.currentAnim==this.anims.clicked&&(ig.game.rainy=!1,ig.game.clickonce=!0,this.currentAnim=this.anims.idle,this.rain.currentAnim=this.rain.anims.idle)},clicking:function(){},
released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityRain=EntityPrimary.extend({size:{x:121,y:121},name:"rain",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:1007,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/rain-anim.png",
121,121),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[10],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.05,[0,1,2,3,4,5,6,7,8,9],!1);this.currentAnim=this.anims.idle},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();0>this.pos.x+this.size.x&&this.kill()},draw:function(){this.parent()}});EntitySun=
EntityPrimary.extend({size:{x:142,y:139},offset:{x:194,y:196},name:"sun",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:1006,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/sun-anim.png",527,527),rainTimer:new ig.Timer(5),sfxRain:"rainSound",init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.07,[0,1,2,3,4,5,6,7,8,9,10,11,12],!1);this.currentAnim=this.anims.idle;!1==ig.game.sundone&&(ig.game.rainy?
this.rainTimer.unpause():this.rainTimer.pause())},update:function(){this.parent();var c=ig.game.getEntitiesByType(EntityScreenFade)[0],d=ig.game.getEntitiesByType(EntityWiper)[0];3==ig.game.currentLevelAct?0<this.rainTimer.delta()&&!ig.game.clickonce?(ig.soundHandler.sfxPlayer.stop(this.sfxRain),ig.game.rainy=!1,this.rainTimer.reset(),this.rainTimer.pause(),c.fadeoutscreenAnim(),d.currentAnim=d.anims.idle,this.sunInAnim(),this.pos.y=20):0>this.rainTimer.delta()&&!0==ig.game.clickonce&&(ig.soundHandler.sfxPlayer.stop(this.sfxRain),
ig.game.clickonce=!1,this.rainTimer.reset(),this.rainTimer.pause(),c.fadeoutscreenAnim(),d.currentAnim=d.anims.idle,this.sunInAnim(),this.pos.y=20):4==ig.game.currentLevelAct&&(this.sunInAnim(),this.pos.y=20)},sunOutAnim:function(){this.tween({pos:{x:this.pos.x,y:this.pos.y-1E3}},0.8,{easing:ig.Tween.Easing.Bounce.EaseOut}).start()},sunInAnim:function(){this.tween({pos:{x:this.pos.x,y:20}},0.8,{easing:ig.Tween.Easing.Bounce.EaseIn}).start()},clicked:function(){var c=ig.game.getEntitiesByType(EntityScreenFade)[0],
d=ig.game.getEntitiesByType(EntityWiper)[0];!ig.game.rainy&&(3==ig.game.currentLevelAct&&!1==ig.game.sundone)&&(ig.soundHandler.sfxPlayer.play(this.sfxRain),this.rainTimer.unpause(),ig.game.rainy=!0,c.fadescreenAnim(),d.currentAnim=d.anims.clicked,this.sunOutAnim())},clicking:function(){},released:function(){},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.bus-game.popup").requires("game.entities.primary").defines(function(){EntityPopupSettings=EntityPrimary.extend({zIndex:7E3,size:{x:419,y:318},name:"pop-settings",show:!1,collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.B,fontStyle:"dimbo",border:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-popup.png"),init:function(c,d,e){this.parent(c,d,e);ig.global.wm||(this.music=ig.game.spawnEntity(EntityMusicVolume,this.pos.x+150,-2E3),this.sound=ig.game.spawnEntity(EntitySoundVolume,
this.pos.x+150,-2E3),this.musicvol=ig.game.spawnEntity(EntityButtonMusicslider,ig.game.musicPos,-2E3),this.soundvol=ig.game.spawnEntity(EntityButtonSoundslider,ig.game.soundPos,-2E3),this.btnresume=ig.game.spawnEntity(EntityButtonResume,this.pos.x+135,-2E3),this.btnhome=ig.game.spawnEntity(EntityButtonHome,this.pos.x+ig.system.width/8,-2E3,{home:0}),this.btnrestart=ig.game.spawnEntity(EntityButtonRestart,this.pos.x+ig.system.width/2+90,-2E3,{restart:0}),ig.game.sortEntitiesDeferred())},update:function(){this.parent();
1==ig.game.currentLevelAct?(this.btnhome.pos.y=this.pos.y-565,this.btnrestart.pos.y=this.pos.y-565,this.btnresume.pos.y=this.pos.y+220,this.sound.pos.y=this.pos.y+50,this.music.pos.y=this.pos.y+130,this.soundvol.pos.y=this.pos.y+53,this.musicvol.pos.y=this.pos.y+133):2==ig.game.currentLevelAct&&(this.btnhome.pos.y=this.pos.y+565,this.btnrestart.pos.y=this.pos.y+565,this.btnresume.pos.y=this.pos.y+550,this.music.pos.y=this.pos.y+300,this.sound.pos.y=this.pos.y+380,this.musicvol.pos.y=this.pos.y+292,
this.soundvol.pos.y=this.pos.y+372)},draw:function(){this.parent();this.border.draw(this.pos.x,this.pos.y);var c=ig.system.context;c.font="70px "+this.fontStyle;c.fillStyle="#ff5b00";c.textAlign="center";c.strokeStyle="#FFFFFF";c.lineWidth=10;this.poptext=[_STRINGS.Game.Settings,_STRINGS.Game.Pause];1==ig.game.currentLevelAct?(c.strokeText(this.poptext[0],this.pos.x+this.size.x/2+5,this.pos.y-30),c.fillText(this.poptext[0],this.pos.x+this.size.x/2+5,this.pos.y-30)):(c.fillText(this.poptext[1],this.pos.x+
this.size.x/2+5,this.pos.y-30),c.fillText(this.poptext[1],this.pos.x+this.size.x/2+5,this.pos.y-30))},showing:function(){this.tween({pos:{x:this.pos.x,y:this.pos.y+1130}},0.9,{onComplete:function(){ig.game.settings=!0}.bind(this),easing:ig.Tween.Easing.Bounce.EaseOut,delay:0}).start();this.show=!0},hiding:function(){this.tween({pos:{x:this.pos.x,y:-1E3}},0.9,{onComplete:function(){ig.game.settings=!1}.bind(this),easing:ig.Tween.Easing.Bounce.EaseOut,delay:0}).start();this.show=!1}});EntityPopupEnding=
EntityPrimary.extend({zIndex:7E3,size:{x:419,y:318},name:"pop-ending",show:!1,collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.B,fontStyle:"dimbo",border:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-popup.png"),init:function(c,d,e){this.parent(c,d,e);ig.global.wm||(this.btnhome=ig.game.spawnEntity(EntityButtonHome,this.pos.x+250,-2E3,{home:0}),this.btnrestart=ig.game.spawnEntity(EntityButtonRestart,this.pos.x+58,-2E3,{restart:0}),ig.game.sortEntitiesDeferred())},update:function(){this.parent();
4==ig.game.currentLevelAct&&(this.btnhome.pos.y=this.pos.y+220,this.btnrestart.pos.y=this.pos.y+220)},draw:function(){this.parent();this.border.draw(this.pos.x,this.pos.y);var c=ig.system.context;c.font="70px "+this.fontStyle;c.fillStyle="#ff5b00";c.textAlign="center";c.strokeStyle="#FFFFFF";c.lineWidth=10;this.poptext=_STRINGS.Game.End;c.strokeText(this.poptext,this.pos.x+this.size.x/2+5,this.pos.y+150);c.fillText(this.poptext,this.pos.x+this.size.x/2+5,this.pos.y+150)},showing:function(){this.tween({pos:{x:this.pos.x,
y:this.pos.y+1130}},0.9,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Bounce.EaseOut,delay:0}).start();this.show=!0},hiding:function(){this.tween({pos:{x:this.pos.x,y:-1E3}},0.9,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Bounce.EaseOut,delay:0}).start();this.show=!1}});EntityMusicVolume=EntityPrimary.extend({size:{x:312,y:10},name:"music-volume",bar:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/volume.png"),border:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bar-base.png"),
icon:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/icon-music.png"),zIndex:7001,init:function(c,d,e){this.parent(c,d,e);this.size.x=this.bar.width;this.size.y=this.bar.height;ig.game.sortEntitiesDeferred()},update:function(){this.parent()},draw:function(){this.parent();this.border.draw(this.pos.x+40,this.pos.y+12);this.icon.draw(this.pos.x-60,this.pos.y);(560==ig.game.musicPos||452<ig.game.musicPos)&&this.bar.draw(this.pos.x+40,this.pos.y+12,0,0,ig.game.musicVol*this.bar.width,this.bar.height);
452==ig.game.musicPos&&this.bar.draw(this.pos.x+40,this.pos.y+12,0,0,ig.game.musicVol*this.bar.width+2,this.bar.height)}});EntitySoundVolume=EntityPrimary.extend({size:{x:312,y:10},name:"sound-volume",bar:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/volume.png"),border:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bar-base.png"),icon:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/icon-sound.png"),zIndex:7001,init:function(c,d,e){this.parent(c,d,e);this.size.x=this.bar.width;
this.size.y=this.bar.height;ig.game.sortEntitiesDeferred()},update:function(){this.parent()},draw:function(){this.parent();this.border.draw(this.pos.x+40,this.pos.y+12);this.icon.draw(this.pos.x-60,this.pos.y);(560==ig.game.soundPos||452<ig.game.soundPos)&&this.bar.draw(this.pos.x+40,this.pos.y+12,0,0,ig.game.soundVol*this.bar.width,this.bar.height);452==ig.game.soundPos&&this.bar.draw(this.pos.x+40,this.pos.y+12,0,0,ig.game.soundVol*this.bar.width+2,this.bar.height)}});EntityButtonMusicslider=EntityPrimary.extend({size:{x:45,
y:45},offset:{x:0,y:0},type:ig.Entity.TYPE.B,name:"btn-music",cli:!1,sfxButton:"clickSound",animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/slider.png",45,45),zIndex:7002,init:function(c,d,e){this.parent(c,d,e);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x=this.size.x/2},ready:function(){},update:function(){this.parent()},endUp:function(){},clicked:function(){this.cli=!0;ig.soundHandler.sfxPlayer.play(this.sfxButton)},clicking:function(){this.pointer=
ig.game.getEntitiesByType(EntityPointer)[0];this.pos.x=this.pointer.pos.x-15;this.pos.x>ig.system.width/4+320?this.pos.x=ig.system.width/4+320:this.pos.x<ig.system.width/4+212&&(this.pos.x=ig.system.width/4+212);ig.game.musicPos=this.pos.x;ig.game.musicVol=(this.pos.x-(ig.system.width/4+212))/(ig.system.width/4+320-(ig.system.width/4+212));ig.soundHandler.bgmPlayer.volume(ig.game.musicVol);ig.game.musicVol=ig.game.musicVol;ig.game.storage.set("bus-music-vol",ig.game.musicVol);ig.game.musicPos=ig.game.musicPos;
ig.game.storage.set("bus-music-pos",ig.game.musicPos)},released:function(){this.cli=!1},draw:function(){this.parent()}});EntityButtonSoundslider=EntityPrimary.extend({size:{x:45,y:45},offset:{x:0,y:0},type:ig.Entity.TYPE.A,name:"btn-sound",cli:!1,sfxButton:"clickSound",animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/slider.png",45,45),zIndex:7002,init:function(c,d,e){this.parent(c,d,e);this.addAnim("idle",1,[0]);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x=
this.size.x/2},ready:function(){},update:function(){this.parent()},endUp:function(){},clicked:function(){this.cli=!0;ig.soundHandler.sfxPlayer.play(this.sfxButton)},clicking:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.pos.x=this.pointer.pos.x-15;this.pos.x>ig.system.width/4+320?this.pos.x=ig.system.width/4+320:this.pos.x<ig.system.width/4+212&&(this.pos.x=ig.system.width/4+212);ig.game.soundPos=this.pos.x;ig.game.soundVol=(this.pos.x-(ig.system.width/4+212))/(ig.system.width/
4+320-(ig.system.width/4+212));ig.soundHandler.sfxPlayer.volume(ig.game.soundVol);ig.game.soundVol=ig.game.soundVol;ig.game.storage.set("bus-sound-vol",ig.game.soundVol);ig.game.soundPos=ig.game.soundPos;ig.game.storage.set("bus-sound-pos",ig.game.soundPos)},released:function(){this.cli=!1},draw:function(){this.parent()}});EntityButtonPausing=EntityPrimary.extend({size:{x:79,y:79},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-pause.png",79,79),
show:!0,name:"btn-pause",sfxButton:"clickSound",zIndex:6E3,init:function(c,d,e){this.parent(c,d,e);this.addAnim("idle",1,[0])},update:function(){this.parent();var c=ig.game.io.mouse.getPos();!ig.ua.mobile&&c.x>=this.pos.x&&c.x<=this.pos.x+this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},clicked:function(){var c=ig.game.getEntitiesByType(EntityPopupSettings)[0];
this.cli=!0;this.setScale(1,1);c.showing();ig.game.pausing=!0},clicking:function(){this.setScale(0.98,0.98)},released:function(){this.cli=!1;this.setScale(1,1)},draw:function(){this.parent()}});EntityButtonResume=EntityPrimary.extend({size:{x:153,y:153},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-continue.png",153,153),show:!0,name:"btn-resume",sfxButton:"clickSound",zIndex:7001,init:function(c,d,e){this.parent(c,d,e);this.addAnim("idle",1,
[0]);this.opacity=1;this.currentAnim.pivot.x=this.size.x/2},update:function(){this.parent();var c=ig.game.io.mouse.getPos();!ig.ua.mobile&&c.x>=this.pos.x&&c.x<=this.pos.x+this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},clicked:function(){this.cli=!0;this.setScale(1,1);ig.soundHandler.sfxPlayer.play(this.sfxButton)},clicking:function(){this.setScale(0.98,
0.98)},released:function(){var c=ig.game.getEntitiesByType(EntityPopupSettings)[0];this.cli=!1;this.setScale(1,1);ig.game.pausing=!1;ig.game.settings=!1;this.tween({},0.1,{onComplete:function(){c.hiding()}.bind(this)}).start()},draw:function(){this.parent()}});EntityButtonHome=EntityPrimary.extend({type:ig.Entity.TYPE.B,show:!0,name:"btn-home",sfxButton:"clickSound",sfxFail:"failSound",zIndex:7001,size:{x:111,y:111},data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-home.png"],size:[{x:111,
y:111}],offset:[{x:0,y:0}],sprite:[{x:111,y:111}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.home];this.offset=this.data.offset[e.home];this.sprite=this.data.sprite[e.home];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.home],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.home][0]);this.currentAnim.pivot.x=this.size.x/2},update:function(){this.parent();var c=ig.game.io.mouse.getPos();!ig.ua.mobile&&c.x>=this.pos.x&&c.x<=this.pos.x+
this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},clicked:function(){ig.game.allpop&&(this.cli=!0,this.setScale(1,1),ig.soundHandler.sfxPlayer.play(this.sfxButton))},clicking:function(){this.setScale(0.98,0.98)},released:function(){var c=ig.game.getEntitiesByType(EntityPopupSettings)[0];this.cli=!1;this.setScale(1,1);ig.game.pausing=!1;c.hiding();ig.game.director.jumpTo(LevelMenu)},
draw:function(){this.parent()}});EntityButtonHomeSing=EntityPrimary.extend({type:ig.Entity.TYPE.B,show:!0,name:"btn-home-sing",sfxButton:"clickSound",sfxSong:"songSound",sfxBus:"busArriveSound",sfxRain:"rainSound",sfxBeep:"beepSound",sfxBird:"birdSound",sfxElephant:"elephantSound",sfxPeek:"peekSound",sfxMonkey:"monkeySound",sfxFox:"foxSound",sfxTiger:"tigerSound",sfxHeadlight:"headlightSound",sfxYeay:"yeaySound",zIndex:7001,size:{x:63,y:63},data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-home-1.png"],
size:[{x:63,y:63}],offset:[{x:0,y:0}],sprite:[{x:63,y:63}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.homes];this.offset=this.data.offset[e.homes];this.sprite=this.data.sprite[e.homes];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.homes],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.homes][0]);this.currentAnim.pivot.x=this.size.x/2},update:function(){this.parent();var c=ig.game.io.mouse.getPos();!ig.ua.mobile&&c.x>=this.pos.x&&
c.x<=this.pos.x+this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},clicked:function(){this.cli=!0;this.setScale(1,1);ig.soundHandler.sfxPlayer.play(this.sfxButton);ig.soundHandler.sfxPlayer.stop(this.sfxSong);ig.soundHandler.sfxPlayer.stop(this.sfxBus);ig.soundHandler.sfxPlayer.stop(this.sfxRain);ig.soundHandler.sfxPlayer.stop(this.sfxBird);ig.soundHandler.sfxPlayer.stop(this.sfxBeep);
ig.soundHandler.sfxPlayer.stop(this.sfxElephant);ig.soundHandler.sfxPlayer.stop(this.sfxPeek);ig.soundHandler.sfxPlayer.stop(this.sfxMonkey);ig.soundHandler.sfxPlayer.stop(this.sfxFox);ig.soundHandler.sfxPlayer.stop(this.sfxTiger);ig.soundHandler.sfxPlayer.stop(this.sfxHeadlight);ig.soundHandler.sfxPlayer.stop(this.sfxYeay)},clicking:function(){this.setScale(0.98,0.98)},released:function(){this.cli=!1;this.setScale(1,1);ig.game.pausing=!1;ig.game.director.jumpTo(LevelMenu)},draw:function(){this.parent()}});
EntityButtonRestart=EntityPrimary.extend({type:ig.Entity.TYPE.B,show:!0,name:"btn-restart",sfxButton:"clickSound",sfxFail:"failSound",zIndex:7001,size:{x:111,y:111},data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-replay.png"],size:[{x:111,y:111}],offset:[{x:0,y:0}],sprite:[{x:111,y:111}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.restart];this.offset=this.data.offset[e.restart];this.sprite=this.data.sprite[e.restart];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.restart],
this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.restart][0]);this.currentAnim.pivot.x=this.size.x/2},update:function(){this.parent();var c=ig.game.io.mouse.getPos();!ig.ua.mobile&&c.x>=this.pos.x&&c.x<=this.pos.x+this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},clicked:function(){ig.game.allpop&&(this.cli=!0,this.setScale(1,1),
ig.soundHandler.sfxPlayer.play(this.sfxButton))},clicking:function(){this.setScale(0.98,0.98)},released:function(){var c=ig.game.getEntitiesByType(EntityPopupSettings)[0];this.cli=!1;this.setScale(1,1);ig.game.pausing=!1;c.hiding();ig.game.director.jumpTo(LevelSing)},draw:function(){this.parent()}});EntityButtonRestartSing=EntityPrimary.extend({type:ig.Entity.TYPE.B,show:!0,name:"btn-restart-sing",sfxButton:"clickSound",sfxSong:"songSound",sfxBus:"busArriveSound",sfxRain:"rainSound",sfxBeep:"beepSound",
sfxBird:"birdSound",sfxElephant:"elephantSound",sfxPeek:"peekSound",sfxMonkey:"monkeySound",sfxFox:"foxSound",sfxTiger:"tigerSound",sfxHeadlight:"headlightSound",sfxYeay:"yeaySound",zIndex:7001,size:{x:63,y:63},data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-replay-1.png"],size:[{x:63,y:63}],offset:[{x:0,y:0}],sprite:[{x:63,y:63}],anims:[[[0]]]},init:function(c,d,e){this.parent(c,d,e);this.size=this.data.size[e.restarts];this.offset=this.data.offset[e.restarts];this.sprite=this.data.sprite[e.restarts];
this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.restarts],this.sprite.x,this.sprite.y);this.addAnim("idle",1,this.data.anims[e.restarts][0]);this.currentAnim.pivot.x=this.size.x/2},update:function(){this.parent();var c=ig.game.io.mouse.getPos();!ig.ua.mobile&&c.x>=this.pos.x&&c.x<=this.pos.x+this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):(this.mouseOver=this.cli=!1,this.setScale(1,1));this.currentAnim.alpha=this.opacity},
clicked:function(){this.cli=!0;this.setScale(1,1);ig.soundHandler.sfxPlayer.play(this.sfxButton);ig.soundHandler.sfxPlayer.stop(this.sfxSong);ig.soundHandler.sfxPlayer.stop(this.sfxBus);ig.soundHandler.sfxPlayer.stop(this.sfxRain);ig.soundHandler.sfxPlayer.stop(this.sfxBird);ig.soundHandler.sfxPlayer.stop(this.sfxBeep);ig.soundHandler.sfxPlayer.stop(this.sfxElephant);ig.soundHandler.sfxPlayer.stop(this.sfxPeek);ig.soundHandler.sfxPlayer.stop(this.sfxMonkey);ig.soundHandler.sfxPlayer.stop(this.sfxFox);
ig.soundHandler.sfxPlayer.stop(this.sfxTiger);ig.soundHandler.sfxPlayer.stop(this.sfxHeadlight);ig.soundHandler.sfxPlayer.stop(this.sfxYeay)},clicking:function(){this.setScale(0.98,0.98)},released:function(){this.cli=!1;this.setScale(1,1);ig.game.pausing=!1;ig.game.director.jumpTo(LevelGame)},draw:function(){this.parent()}});EntityButtonSet=EntityPrimary.extend({size:{x:79,y:79},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-settings.png",79,
79),show:!0,name:"btn-settings",sfxButton:"clickSound",zIndex:7001,scale:{x:0,y:0},sfxPop:"popSound",poping:!1,init:function(c,d,e){this.parent(c,d,e);ig.game.settings=!1;this.addAnim("idle",1,[0]);this.btnTween()},update:function(){this.parent();this.setScale(this.scale.x,this.scale.y);var c=ig.game.io.mouse.getPos();!0==this.poping&&(!ig.ua.mobile&&c.x>=this.pos.x&&c.x<=this.pos.x+this.size.x&&c.y>=this.pos.y&&c.y<=this.pos.y+this.size.y&&!1==this.cli?(this.mouseOver=!0,this.setScale(1.1,1.1)):
(this.mouseOver=this.cli=!1,this.setScale(1,1)));this.currentAnim.alpha=this.opacity},clicked:function(){!0==this.poping&&!ig.game.settings&&(this.cli=!0,this.setScale(1,1))},clicking:function(){!0==this.poping&&(ig.game.settings||this.setScale(0.98,0.98))},released:function(){!0==this.poping&&!ig.game.settings&&(this.popsettings=ig.game.getEntityByName("pop-settings"),this.cli=!1,this.setScale(1,1),ig.game.pausing=!1,ig.game.settings=!0,this.popsettings.showing(),ig.soundHandler.sfxPlayer.play(this.sfxButton))},
draw:function(){this.parent()},btnTween:function(){this.tween({scale:{x:1,y:1}},1,{easing:ig.Tween.Easing.Bounce.EaseOut,onComplete:function(){ig.soundHandler.sfxPlayer.play(this.sfxPop);this.poping=!0}.bind(this)}).start()}});EntityButtonPlay=EntityPrimary.extend({size:{x:153,y:153},offset:{x:0,y:0},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-continue.png",153,153),scale:{x:1,y:1},zIndex:5008,sfxPop:"popSound",cli:!1,init:function(c,d,e){this.parent(c,
d,e);this.addAnim("idle",1,[0]);this.addAnim("gone",1,[1]);this.currentAnim=this.anims.gone},ready:function(){},update:function(){this.parent();this.setScale(this.scale.x,this.scale.y)},clicked:function(){ig.soundHandler.sfxPlayer.play(this.sfxButton)},clicking:function(){2==ig.game.currentLevelAct&&ig.game.busarrive&&(ig.game.rilis=!1,this.scale.x=0.9,this.scale.y=0.9)},released:function(){2==ig.game.currentLevelAct&&ig.game.busarrive&&(ig.game.rilis=!0,this.scale.x=1,this.scale.y=1,ig.game.playing=
!0)},popingAnim:function(){this.tween({scale:{x:0.9,y:0.9}},0.4,{easing:ig.Tween.Easing.Circular.EaseOut,loop:2,onComplete:function(){}.bind(this)}).start()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.bus-game.tutorial-hand").requires("game.entities.primary").defines(function(){EntityTutorialHand=EntityPrimary.extend({size:{x:5,y:5},name:"tutorial-hand",stepdraw:0,handspeed:2,zIndex:2006,alpha:1,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/hand-idle-anim.png",95,126),init:function(c,d,e){this.parent(c,d,e)},update:function(){this.parent()},rightAnim:function(c,d){this.addAnim("idle",0.05,[0],!1);this.addAnim("click",0.05,[0,1,2,3,4,5],!1);
this.addAnim("lepas",0.05,[7],!1);1==d?this.currentAnim=this.anims.idle:2==d?this.currentAnim=this.anims.click:3==d&&(this.currentAnim=this.anims.lepas);if(0==c)var e=this.tween({pos:{x:this.pos.x,y:this.pos.y+30}},this.handspeed,{loop:2}).start();else if(1==c){var e=this.tween({pos:{x:this.pos.x,y:this.pos.y-50}},0.5,{loop:0,onComplete:function(){}.bind(this)}),f=this.tween({pos:{x:this.pos.x+280,y:this.pos.y-50}},this.handspeed,{loop:2,onComplete:function(){}.bind(this)});e.chain(f);e.start()}else 2==
c?this.tween({pos:{x:this.pos.x-100,y:this.pos.y}},this.handspeed,{loop:2}).start():3==c?this.tween({pos:{x:this.pos.x,y:this.pos.y}},this.handspeed,{loop:2}).start():4==c?this.tween({pos:{x:this.pos.x,y:this.pos.y+50}},this.handspeed,{loop:2}).start():5==c?this.tween({pos:{x:this.pos.x,y:this.pos.y+50}},this.handspeed,{loop:2}).start():6==c&&this.tween({pos:{x:this.pos.x,y:this.pos.y+50}},this.handspeed,{loop:2}).start()},alphaAnim:function(){this.tween({currentAnim:{alpha:0}},1.8,{loop:0,easing:ig.Tween.Easing.Sinusoidal.EaseIn,
onComplete:function(){}.bind(this)}).start()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.bus-game.bus").requires("impact.entity","game.entities.primary","game.entities.bus-game.character","game.entities.bus-game.bus-stop","game.entities.bus-game.character","game.entities.bus-game.popup","game.entities.bus-game.tutorial-hand").defines(function(){EntityBody=EntityPrimary.extend({size:{x:777,y:332},name:"body",type:ig.Entity.TYPE.B,spawnonce:!1,isClicking:!1,show:!1,zIndex:2004,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/bus.png",
777,332),sfxBusAr:"busArriveSound",sfxPop:"popSound",sfxYeay:"yeaySound",playonce:!1,flop1:!1,flop2:!1,flop3:!1,flop4:!1,playend:!1,playfirst:!1,spawning:!1,init:function(c,d,e){this.parent(c,d,e);ig.game.go=!1;this.spawning=this.playonce=ig.game.busdone=!1;this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.currentAnim=this.anims.idle;this.shadow=ig.game.spawnEntity(EntityShadow,-1E3,this.pos.y+348,{shadow:4});this.hand=ig.game.spawnEntity(EntityTutorialHand,
-1E3,this.pos.y+250);this.hand.zIndex=5009;this.btnplay=ig.game.spawnEntity(EntityButtonPlay,323,this.pos.y+200);this.wheel1=ig.game.spawnEntity(EntityWheel,-1E3,this.pos.y+this.size.y-70,{wheel:0});this.wheel2=ig.game.spawnEntity(EntityWheel,-1E3,this.pos.y+this.size.y-70,{wheel:1});this.window=ig.game.spawnEntity(EntityWindow,-1E3,this.pos.y+44);this.window.zIndex=2001;this.headlight=ig.game.spawnEntity(EntityHeadlight,-1E3,this.pos.y+this.size.y-80);this.redbutton=ig.game.spawnEntity(EntityRedbutton,
-1E3,this.pos.y+this.size.y-130);this.sirene=ig.game.spawnEntity(EntitySirene,-1E3,this.pos.y-46);this.wiper=ig.game.spawnEntity(EntityWiper,-1E3,this.pos.y+50);this.tiger=ig.game.spawnEntity(EntityTiger,-1E3,this.pos.y+70);this.tiger.zIndex=2002;this.monkey=ig.game.spawnEntity(EntityMonkey,-1E3,ig.system.height/2-20);this.monkey.zIndex=2002;this.elephant=ig.game.spawnEntity(EntityElephant,-1E3,ig.system.height/4+20);this.elephant.zIndex=2002;this.rabbit=ig.game.spawnEntity(EntityRabbit,-1E3,ig.system.height/
2-42);this.rabbit.zIndex=2003;this.fox=ig.game.spawnEntity(EntityFox,-1E3,ig.system.height/2-74);this.fox.zIndex=2002;this.bird=ig.game.spawnEntity(EntityBird,-1E3,this.pos.y-90);this.bird.zIndex=2005;this.monkeyclick=ig.game.spawnEntity(EntityCharaclickmonkey,-1E3,ig.system.height/2-105,{click:0});this.foxclick=ig.game.spawnEntity(EntityCharaclickfox,-1E3,ig.system.height/2-105,{click:0});this.elephantclick=ig.game.spawnEntity(EntityCharaclickelephant,-1E3,ig.system.height/2-105,{click:0});this.rabbitclick=
ig.game.spawnEntity(EntityCharaclickrabbit,-1E3,ig.system.height/2-105,{click:0});this.tigerclick=ig.game.spawnEntity(EntityCharaclicktiger,-1E3,ig.system.height/2-100,{click:0});1==ig.game.currentLevelAct?this.tween({},0.3,{onComplete:function(){this.busAnim()}.bind(this)}).start():2==ig.game.currentLevelAct?(this.tween({},1,{onComplete:function(){this.busAnim()}.bind(this)}).start(),this.tween({},4,{onComplete:function(){this.hand.rightAnim(3,2);this.btnplay.currentAnim=this.btnplay.anims.idle}.bind(this)}).start(),
this.tween({},5,{onComplete:function(){ig.game.busarrive=!0}.bind(this)}).start()):3==ig.game.currentLevelAct?this.tween({},1,{onComplete:function(){this.busAnim()}.bind(this)}).start():4==ig.game.currentLevelAct&&(this.tween({},0.3,{onComplete:function(){this.busAnim()}.bind(this)}).start(),this.tween({},2.3,{onComplete:function(){ig.game.busend=!0}.bind(this)}).start())},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();
this.swipe=ig.game.getEntitiesByType(EntitySwipeOverlay)[0];this.game=ig.game.getEntitiesByType(EntityGameController)[0];this.shadow.pos.x=this.pos.x+100;this.wheel1.pos.x=this.pos.x+150;this.wheel2.pos.x=this.pos.x+520;this.tiger.pos.x=this.pos.x+638;this.window.pos.x=this.pos.x+78;this.headlight.pos.x=this.pos.x+this.size.x-70;this.redbutton.pos.x=this.pos.x+this.size.x-215;this.sirene.pos.x=this.pos.x+this.size.x-225;this.wiper.pos.x=this.pos.x+this.size.x-100;1==ig.game.currentLevelAct?(this.window.zIndex=
1099,this.rabbit.pos.x=this.pos.x+82,this.rabbit.pos.y=this.pos.y+80,this.elephant.pos.x=this.pos.x+100,this.fox.pos.x=this.pos.x+330,this.fox.pos.y=this.pos.y+50,this.monkey.pos.x=this.pos.x+480,this.monkey.pos.y=this.pos.y+70):2==ig.game.currentLevelAct?(this.hand.pos.x=480,this.btnplay.pos.x=this.pos.x+323,!0==ig.game.rilis&&ig.game.busarrive&&!0==ig.game.playing&&(this.window.zIndex=1099,this.tween({},0.5,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){this.btnplay.kill();this.monkey.pos.x=
this.pos.x+480;!1==this.flop1&&(this.monkey.monkeyTween(),this.game.monkey.kill(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop1=!0)}.bind(this)}).start(),this.tween({},0.9,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){this.fox.pos.x=this.pos.x+340;!1==this.flop2&&(this.fox.foxTween(),this.game.fox.kill(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop2=!0)}.bind(this)}).start(),this.tween({},1.3,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){this.elephant.pos.x=
this.pos.x+100;!1==this.flop3&&(this.elephant.elephantTween(),this.game.elephant.kill(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop3=!0)}.bind(this)}).start(),this.tween({},1.7,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){this.rabbit.pos.x=this.pos.x+82;!1==this.flop4&&(this.rabbit.rabbitTween(),this.game.rabbit.kill(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop4=!0)}.bind(this)}).start(),this.tween({},2,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){!1==
this.playfirst&&(ig.soundHandler.sfxPlayer.play(this.sfxYeay),this.playfirst=!0);ig.game.go=!0}.bind(this)}).start(),this.hand.kill()),ig.game.go&&(this.rabbit.pos.x=this.pos.x+82,this.elephant.pos.x=this.pos.x+100,this.fox.pos.x=this.pos.x+340,this.monkey.pos.x=this.pos.x+480,this.busOutAnim(),this.tween({},1.2,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){ig.game.director.jumpTo(LevelSing)}.bind(this)}).start())):3==ig.game.currentLevelAct?(this.window.zIndex=1099,this.rabbit.pos.x=
this.pos.x+82,this.rabbit.pos.y=this.pos.y+80,this.elephant.pos.x=this.pos.x+108,this.fox.pos.x=this.pos.x+340,this.fox.pos.y=this.pos.y+50,this.monkey.pos.x=this.pos.x+480,this.monkey.pos.y=this.pos.y+70,this.bird.pos.x=this.pos.x+70,this.monkeyclick.pos.x=this.pos.x+500,this.foxclick.pos.x=this.pos.x+360,this.elephantclick.pos.x=this.pos.x+220,this.rabbitclick.pos.x=this.pos.x+80,this.tigerclick.pos.x=this.pos.x+this.size.x-132,this.flop4=this.flop3=this.flop2=this.flop1=!1,ig.game.go=!1):4==ig.game.currentLevelAct&&
(!1==ig.game.go&&!1==this.flop1&&(this.monkey.pos.x=this.pos.x+480,this.monkey.pos.y=this.pos.y+70),!1==ig.game.go&&!1==this.flop2&&(this.fox.pos.x=this.pos.x+330,this.fox.pos.y=this.pos.y+50),!1==ig.game.go&&!1==this.flop3&&(this.elephant.pos.x=this.pos.x+100),!1==ig.game.go&&!1==this.flop4&&(this.rabbit.pos.x=this.pos.x+82,this.rabbit.pos.y=this.pos.y+80),ig.game.busend&&(this.tween({},0.5,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){!1==this.flop1&&(this.monkey.monkeyOutTween(),
ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop1=!0)}.bind(this)}).start(),this.tween({},0.9,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){!1==this.flop2&&(this.fox.foxOutTween(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop2=!0)}.bind(this)}).start(),this.tween({},1.3,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){!1==this.flop3&&(this.elephant.elephantOutTween(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop3=!0)}.bind(this)}).start(),this.tween({},
1.7,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){!1==this.flop4&&(this.rabbit.rabbitOutTween(),ig.soundHandler.sfxPlayer.play(this.sfxPop),this.flop4=!0,this.window.zIndex=2004)}.bind(this)}).start(),this.tween({},2.7,{easing:ig.Tween.Easing.Elastic.EaseIn,onComplete:function(){ig.game.go=!0}.bind(this)}).start(),ig.game.go&&(this.busOutAnim(),this.monkey.currentAnim=this.monkey.anims.idle,this.monkey.pos.x=ig.system.width/2+280,this.monkey.pos.y=ig.system.height/2-20,this.rabbit.currentAnim=
this.rabbit.anims.idle,this.rabbit.pos.x=ig.system.width/12,this.rabbit.pos.y=ig.system.height/2-42,this.elephant.currentAnim=this.elephant.anims.idle,this.elephant.pos.y=ig.system.height/4+20,this.elephant.pos.x=ig.system.width/4-30,this.fox.currentAnim=this.fox.anims.idle,this.fox.pos.y=ig.system.height/2-74,this.fox.pos.x=ig.system.width/2+100)))},draw:function(){this.parent()},busAnim:function(){var c=this.tween({pos:{x:this.pos.x,y:this.pos.y}},1,{easing:ig.Tween.Easing.Circular.EaseIn,onComplete:function(){(1==
ig.game.currentLevelAct||2==ig.game.currentLevelAct||4==ig.game.currentLevelAct)&&ig.soundHandler.sfxPlayer.play(this.sfxBusAr)}.bind(this)}),d=this.tween({pos:{x:this.pos.x+1090,y:this.pos.y}},1,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){this.show=!0;if(1==ig.game.currentLevelAct||2==ig.game.currentLevelAct||4==ig.game.currentLevelAct)this.wheel1.currentAnim=this.wheel1.anims.stay,this.wheel2.currentAnim=this.wheel2.anims.stay,this.tiger.currentAnim=this.tiger.anims.stay,ig.soundHandler.sfxPlayer.stop(this.sfxBusAr)}.bind(this)});
c.chain(d);c.start()},busOutAnim:function(){!1==this.playonce&&(ig.soundHandler.sfxPlayer.play(this.sfxBusAr),this.wheel1.currentAnim=this.wheel1.anims.idle,this.wheel2.currentAnim=this.wheel2.anims.idle,this.tiger.currentAnim=this.tiger.anims.clicked,this.playonce=!0);var c=0,c=2==ig.game.currentLevelAct||4==ig.game.currentLevelAct?100:1E3;this.tween({pos:{x:this.pos.x+c,y:this.pos.y}},1,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){4==ig.game.currentLevelAct&&!1==this.playend&&
(ig.soundHandler.sfxPlayer.play(this.sfxYeay),this.playend=!0)}.bind(this)}).start()}});EntityWheel=EntityPrimary.extend({type:ig.Entity.TYPE.B,cli:!1,name:"wheel",zIndex:2005,data:{animSheet:["http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/wheel-right-anim.png","http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/wheel-left-anim.png"],size:[{x:128,y:123},{x:128,y:123}],offset:[{x:0,y:0},{x:0,y:0}],sprite:[{x:128,y:123},{x:128,y:123}],anims:[[[0,1,2,3,4,5,6,7,8],[0]],[[0,1,2,3,4,5,6,7,8],[0]]]},init:function(c,
d,e){this.parent(c,d,e);this.size=this.data.size[e.wheel];this.offset=this.data.offset[e.wheel];this.sprite=this.data.sprite[e.wheel];this.animSheet=new ig.AnimationSheet(this.data.animSheet[e.wheel],this.sprite.x,this.sprite.y);this.addAnim("idle",0.05,this.data.anims[e.wheel][0]);this.addAnim("stay",0.05,this.data.anims[e.wheel][1]);this.currentAnim.pivot.x=this.size.x/2},ready:function(){},update:function(){this.parent()},draw:function(){this.parent()}});EntityRedbutton=EntityPrimary.extend({size:{x:47,
y:47},name:"red-button",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2005,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/red-button-anim.png",47,47),red:!1,redTimer:new ig.Timer(1),sfxBeep:"beepSound",init:function(c,d,e){this.parent(c,d,e);this.redTimer.pause();this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.05,[1,2,5],!1);this.currentAnim=this.anims.idle},
ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent()},clicked:function(){!ig.game.sundone&&3==ig.game.currentLevelAct&&(this.sing=ig.game.getEntitiesByType(EntitySingController)[0],!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3),this.currentAnim=this.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxBeep))},clicking:function(){},released:function(){3==ig.game.currentLevelAct&&(this.currentAnim=
this.anims.idle)},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityWiper=EntityPrimary.extend({size:{x:5,y:5},name:"wiper",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2005,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/wiper-anim.png",
82,101),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.048,[0,1,2,3,4,5,6,7,8,9,10,11,12],!1);this.currentAnim=this.anims.idle},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent()},clicked:function(){},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=
ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});EntityHeadlight=EntityPrimary.extend({size:{x:33,y:55},offset:{x:0,y:40},name:"headlight",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2005,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/headlight-anim.png",
156,134),lamp:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/lamp.png"),light:!1,lightTimer:new ig.Timer(3),sfxHeadlight:"headlightSound",init:function(c,d,e){this.parent(c,d,e);this.lightTimer.pause();this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[14],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.048,[0,1,2,3,4,5,6,7,8,9,10,11,12,13],!1);this.currentAnim=this.anims.idle},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();!0==this.light&&0<this.lightTimer.delta()&&(this.light=!1,this.lightTimer.reset(),this.lightTimer.pause(),this.currentAnim=this.anims.idle,ig.soundHandler.sfxPlayer.stop(this.sfxHeadlight))},clicked:function(){!ig.game.sundone&&(!1==this.light&&3==ig.game.currentLevelAct)&&(this.sing=ig.game.getEntitiesByType(EntitySingController)[0],!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3),this.lightTimer.unpause(),this.lightTimer.reset(),
this.light=!0,this.currentAnim=this.anims.clicked,ig.soundHandler.sfxPlayer.play(this.sfxHeadlight))},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent();this.lamp.draw(this.pos.x,this.pos.y)}});EntitySirene=
EntityPrimary.extend({size:{x:71,y:47},offset:{x:107,y:18},name:"sirene",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2005,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/sirene-anim.png",282,64),sirenTimer:new ig.Timer(2),siren:!1,init:function(c,d,e){this.parent(c,d,e);this.sirenTimer.pause();this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.anims.clicked=new ig.Animation(this.animSheetIdle,0.048,[0,
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],!1);this.currentAnim=this.anims.idle},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,y:0};this.posEnd={x:0,y:0}},update:function(){this.parent();0<this.sirenTimer.delta()&&(this.siren=!1,this.sirenTimer.reset(),this.sirenTimer.pause(),this.currentAnim=this.anims.idle)},clicked:function(){!ig.game.sundone&&(3==ig.game.currentLevelAct&&!1==this.siren)&&(this.sing=ig.game.getEntitiesByType(EntitySingController)[0],
!0==ig.game.mustclick&&this.sing.hand.rightAnim(3,3),this.siren=!0,this.sirenTimer.unpause(),this.sirenTimer.reset(),this.currentAnim=this.anims.clicked)},clicking:function(){},released:function(){},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent()}});
EntityWindow=EntityPrimary.extend({size:{x:699,y:184},name:"window",type:ig.Entity.TYPE.B,swipeon:!1,isClicking:!1,zIndex:2001,animSheetIdle:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bus/window-glass.png",699,184),init:function(c,d,e){this.parent(c,d,e);this.context=ig.system.context;this.anims.idle=new ig.Animation(this.animSheetIdle,0.05,[0],!1);this.currentAnim=this.anims.idle},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.posStart={x:0,
y:0};this.posEnd={x:0,y:0}},update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.bus-game.menu-controller").requires("game.entities.settings.controller","game.entities.settings.timerinject","game.entities.settings.swipe-overlay","game.entities.settings.screenfade","game.entities.bus-game.character","game.entities.bus-game.bus-stop","game.entities.bus-game.bus","game.entities.buttons.button","game.entities.bus-game.popup","game.entities.buttons.button-more-games","game.entities.primary").defines(function(){EntityMenuController=EntityController.extend({zIndex:1,
name:"menu",bg:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-menu.png"),sfxPop:"popSound",done:!1,spawnonce:!1,init:function(c,d,e){this.parent(c,d,e);ig.game.currentLevelAct=1;ig.game.busdone=!1;ig.global.wm||(this.bus=ig.game.spawnEntity(EntityBody,-1E3,120),this.sun=ig.game.spawnEntity(EntitySun,ig.system.width/2-50,100),this.settings=ig.game.spawnEntity(EntityPopupSettings,ig.system.width/3-50,-1E3));ig.soundHandler.bgmPlayer.play(0);this.tween({},1.5,{easing:ig.Tween.Easing.Circular.EaseOut,
onComplete:function(){this.titleSpawn()}.bind(this)}).start();this.tween({},1.7,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){this.titlesingSpawn()}.bind(this)}).start();this.tween({},3.8,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){this.buttonstartSpawn()}.bind(this)}).start();this.tween({},4.2,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){this.buttonsettingsSpawn()}.bind(this)}).start();this.tween({},5,{easing:ig.Tween.Easing.Circular.EaseOut,
onComplete:function(){this.done=!0}.bind(this)}).start();ig.game.sortEntitiesDeferred()},ready:function(){},update:function(){this.parent();!0==this.done&&(!0==ig.game.settings?(this.start.pos.y=1E3,this.title.pos.y=1E3,this.titlesing.pos.y=1E3,this.btnsettings.pos.y=1E3,_SETTINGS.MoreGames.Enabled&&(this.btnmoregames.pos.y=1E3)):this.tween({},0.6,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){this.start.pos.y=ig.system.height-200;this.title.pos.y=5;this.titlesing.pos.y=90;this.btnsettings.pos.y=
ig.system.height-100;_SETTINGS.MoreGames.Enabled&&(this.btnmoregames.pos.y=ig.system.height-100)}.bind(this)}).start())},draw:function(){this.parent();this.bg.draw(0,0)},buttonsettingsSpawn:function(){this.btnsettings=ig.game.spawnEntity(EntityButtonSet,ig.system.width-150,ig.system.height-100);this.btnmoregames=ig.game.spawnEntity(EntityButtonMoreGames,40,ig.system.height-100)},buttonstartSpawn:function(){this.start=ig.game.spawnEntity(EntityButtonStart,ig.system.width/2-50,ig.system.height-200)},
titleSpawn:function(){this.title=ig.game.spawnEntity(EntityTitle,ig.system.width/6,ig.system.height-1500)},titlesingSpawn:function(){this.titlesing=ig.game.spawnEntity(EntityTitlesing,ig.system.width/3+50,ig.system.height-1500)}});EntityButtonStart=EntityButton.extend({size:{x:153,y:153},offset:{x:0,y:0},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/btn-continue.png",153,153),scale:{x:0,y:0},zIndex:5008,sfxPop:"popSound",cli:!1,init:function(c,d,
e){this.parent(c,d,e);this.addAnim("idle",1,[0]);this.btnTween()},ready:function(){},update:function(){this.parent();this.setScale(this.scale.x,this.scale.y)},clicked:function(){!0==this.cli&&(this.scale.x=0.5,this.scale.y=0.5)},clicking:function(){!0==this.cli&&(this.scale.x=0.5,this.scale.y=0.5)},released:function(){var c=ig.game.getEntitiesByType(EntityMenuController)[0];!0==this.cli&&!0==c.done&&(this.scale.x=1,this.scale.y=1,ig.game.director.jumpTo(LevelGame))},popingAnim:function(){this.tween({scale:{x:0.9,
y:0.9}},0.4,{easing:ig.Tween.Easing.Circular.EaseOut,loop:2,onComplete:function(){}.bind(this)}).start()},btnTween:function(){this.tween({scale:{x:1,y:1}},0.5,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){this.cli=!0;this.popingAnim();ig.soundHandler.sfxPlayer.play(this.sfxPop)}.bind(this)}).start()},draw:function(){this.parent()}});EntityTitle=EntityPrimary.extend({zIndex:5005,size:{x:638,y:94},animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/title.png",
638,94),name:"title-move",sfxPop:"popSound",init:function(c,d,e){this.parent(c,d,e);this.addAnim("idle",0.7,[0],!0);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x=this.size.x/2;this.titleTween();ig.game.sortEntitiesDeferred()},update:function(){this.parent()},titleTween:function(){this.tween({pos:{y:this.pos.y+965}},1.5,{easing:ig.Tween.Easing.Bounce.EaseIn,onComplete:function(){ig.soundHandler.sfxPlayer.play(this.sfxPop)}.bind(this)}).start()}});EntityTitlesing=EntityPrimary.extend({zIndex:5005,
size:{x:216,y:77},animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/title-1.png",216,77),name:"title-sing",sfxPop:"popSound",init:function(c,d,e){this.parent(c,d,e);this.addAnim("idle",0.7,[0],!0);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x=this.size.x/2;this.titleTween();ig.game.sortEntitiesDeferred()},update:function(){this.parent()},titleTween:function(){this.tween({pos:{y:this.pos.y+1050}},1.5,{easing:ig.Tween.Easing.Bounce.EaseIn,onComplete:function(){ig.soundHandler.sfxPlayer.play(this.sfxPop)}.bind(this)}).start()}})});
ig.baked=!0;
ig.module("game.levels.menu").requires("impact.image","game.entities.bus-game.menu-controller","game.entities.pointer").defines(function(){LevelMenu={entities:[{type:"EntityMenuController",x:0,y:0},{type:"EntityPointer",x:50,y:50},{type:"EntityFadeScreen",x:684,y:160}],layer:[{name:"base",width:30,height:40,linkWithCollision:!1,visible:!0,tilesetName:"",repeat:!1,preRender:!1,distance:"1",tilesize:16,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]}});ig.baked=!0;
ig.module("game.entities.bus-game.game-controller").requires("game.entities.settings.controller","game.entities.settings.timerinject","game.entities.settings.swipe-overlay","game.entities.settings.screenfade","game.entities.bus-game.character","game.entities.bus-game.bus-stop","game.entities.bus-game.bus","game.entities.bus-game.popup","game.entities.primary").defines(function(){this.START_WHITELABEL_ENCAPSULATOR;
    EntityGameController = EntityController.extend({
		zIndex:1,
		name: "game",
        bg : new ig.Image('../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-polos.png'),
		
		
		init: function (x, y, settings) {
			this.parent(x, y, settings);
			ig.game.currentLevelAct = 2;
			ig.game.busarrive = false;
			ig.game.busdone = false;
			ig.game.playing = false;
			ig.game.rainy = false;
			if(!ig.global.wm){
				this.swipe = ig.game.spawnEntity(EntitySwipeOverlay,0,0,{control:this});
				
				//property
				this.halte = ig.game.spawnEntity(EntityHalte,ig.system.width/3,ig.system.height/10);
				this.rambu = ig.game.spawnEntity(EntityRambu,ig.system.width/10,ig.system.height/4);
				this.tree1 = ig.game.spawnEntity(EntityProperties,ig.system.width/14,ig.system.height/2+50,{prop:Math.floor((Math.random() * 3))});
				this.tree2 = ig.game.spawnEntity(EntityProperties,ig.system.width/2+280,ig.system.height/2+50,{prop:Math.floor((Math.random() * 3))});
				this.cloud1 = ig.game.spawnEntity(EntityCloud,ig.system.width/4,ig.system.height/14);
				this.cloud2 = ig.game.spawnEntity(EntityCloud,ig.system.width/2+50,ig.system.height/8);
				//character
				this.monkey = ig.game.spawnEntity(EntityMonkey,ig.system.width/6,ig.system.height/2-20);
				this.elephant = ig.game.spawnEntity(EntityElephant,ig.system.width/4+100,ig.system.height/4+20);
				this.rabbit = ig.game.spawnEntity(EntityRabbit,ig.system.width/2+150,ig.system.height/2-42);
				this.fox = ig.game.spawnEntity(EntityFox,ig.system.width/2+280,ig.system.height/2-74);
				//bus
				this.bus = ig.game.spawnEntity(EntityBody,-1000,120);
				this.overcast = ig.game.spawnEntity(EntityScreenFade,0,0);
				this.sun = ig.game.spawnEntity(EntitySun,-1000,100);
				
				this.homebutton =  ig.game.spawnEntity(EntityButtonHomeSing,5,5,{homes:0});
			}
			
			ig.game.sortEntitiesDeferred();
		},
		
		ready: function(){
          
		},
    
		update: function(){
			this.parent();
			
		},
		
		draw: function(){
			this.parent();
			this.bg.draw(0,0);
			
        },
		
		
    });
	this.END_WHITELABEL_ENCAPSULATOR;});ig.baked=!0;
ig.module("game.levels.game").requires("impact.image","game.entities.bus-game.game-controller","game.entities.pointer").defines(function(){LevelGame={entities:[{type:"EntityGameController",x:0,y:0},{type:"EntityPointer",x:50,y:50},{type:"EntityFadeScreen",x:684,y:160}],layer:[{name:"base",width:30,height:40,linkWithCollision:!1,visible:!0,tilesetName:"",repeat:!1,preRender:!1,distance:"1",tilesize:16,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]}});ig.baked=!0;
ig.module("game.entities.bus-game.road").requires("impact.entity").defines(function(){EntityRoad=ig.Entity.extend({zIndex:2,size:{x:960,y:540},bg1Image:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-polos.png"),bg1ImageOffset:0,bgspeed:400,maxVel:{x:1E4,y:1E4},takeSpeed:!0,isMoving:!0,runSpeed:600,loopCount:0,name:"road",init:function(c,d,e){this.parent(c,d,e);this.loopCount=Math.floor(0)},ready:function(){},update:function(){!ig.game.paused&&this.isMoving&&(this.bg1ImageOffset+=this.runSpeed*
ig.system.tick,this.bg1ImageOffset>this.bg1Image.width&&(this.bg1ImageOffset%=this.bg1Image.width),this.gameDistance+=0.01*this.runSpeed*ig.system.tick,this.loopCount++);this.parent()},draw:function(){this.parent();if(!ig.global.wm){var c=this.pos.y-this.offset.y-ig.game._rscreen.y;this.bg1Image.draw(Math.floor(-this.bg1ImageOffset),c);this.bg1Image.draw(Math.floor(-this.bg1ImageOffset+this.bg1Image.width),c)}}})});ig.baked=!0;
ig.module("game.entities.bus-game.sing-controller").requires("game.entities.settings.controller","game.entities.settings.timerinject","game.entities.settings.swipe-overlay","game.entities.settings.screenfade","game.entities.bus-game.character","game.entities.bus-game.bus-stop","game.entities.bus-game.bus","game.entities.bus-game.road","game.entities.settings.screenfade","game.entities.bus-game.tutorial-hand","game.entities.bus-game.popup","game.entities.primary").defines(function(){EntitySingController=
EntityController.extend({zIndex:1,name:"sing",speed:400,sfxBusAr:"busArriveSound",sfxSong:"songSound",sfxYeay:"yeaySound",animonce:!1,init:function(c,d,e){this.parent(c,d,e);ig.game.currentLevelAct=3;ig.game.busdone=!1;this.hideTimer=new ig.Timer;this.hideTimer.set(2);ig.game.rainy=!1;ig.game.gamedone=!1;ig.game.sundone=!1;ig.global.wm||(this.road=ig.game.spawnEntity(EntityRoad,Math.floor(this.pos.x),Math.floor(this.pos.y)),this.bus=ig.game.spawnEntity(EntityBody,-1E3,120),this.tree=ig.game.spawnEntity(EntityProperties,
-1E3,332,{prop:Math.floor(8*Math.random()),line:Math.floor(2*Math.random())}),this.hand=ig.game.spawnEntity(EntityTutorialHand,ig.system.width/2,this.pos.y+220),this.sun=ig.game.spawnEntity(EntitySun,ig.system.width-170,20),this.cloud=ig.game.spawnEntity(EntityCloud,-1E3,100),this.overcast=ig.game.spawnEntity(EntityScreenFade,0,0),this.whistle=ig.game.spawnEntity(EntityWhistle,ig.system.width/3,180),this.textsong=ig.game.spawnEntity(EntityTextsong,ig.system.width/6,ig.system.height/2+50),this.homebutton=
ig.game.spawnEntity(EntityButtonHomeSing,5,5,{homes:0}),this.restartbutton=ig.game.spawnEntity(EntityButtonRestartSing,5,80,{restarts:0}));this.tween({},5,{onComplete:function(){this.hand.rightAnim(3,2);ig.game.mustclick=!0}.bind(this)}).start();ig.soundHandler.sfxPlayer.play(this.sfxSong);ig.soundHandler.bgmPlayer.stop(0);ig.soundHandler.sfxPlayer.stop(this.sfxYeay);ig.soundHandler.sfxPlayer.stop(this.sfxBusAr);ig.game.sortEntitiesDeferred()},ready:function(){},update:function(){this.parent();960<
this.road.pos.x&&(this.road.pos.x=Math.floor(this.road.pos.x-this.road.size.x));this.spawning();!0==ig.game.gamedone&&!1==this.animonce&&(this.hand.kill(),this.whistle.kill(),this.tween({},1,{easing:ig.Tween.Easing.Circular.EaseOut,onComplete:function(){ig.game.director.jumpTo(LevelEnd)}.bind(this)}).start(),this.animonce=!0)},draw:function(){this.parent()},spawning:function(){!ig.game.gamedone&&7>ig.game.getEntitiesByType(EntityProperties).length&&(distanceTree=80*this.tree.size.x,Treeposx=this.tree.pos.x+
this.tree.size.x+distanceTree,TreeType=Math.floor(8*Math.random()),TreeLine=Math.floor(2*Math.random()),distanceCloud=2*this.cloud.size.x,cloudposx=this.cloud.pos.x+this.cloud.size.x+distanceCloud,cloudType=Math.floor(3*Math.random()),cloudLine=Math.floor(2*Math.random()),this.tree=ig.game.spawnEntity(EntityProperties,Treeposx,0,{prop:TreeType,line:TreeLine,vel:{x:-this.speed}}),this.cloud=ig.game.spawnEntity(EntityCloud,cloudposx+400,0,{line:cloudLine,vel:{x:-this.speed}}));ig.game.sortEntitiesDeferred()}});
EntityTextsong=EntityPrimary.extend({size:{x:118,y:170},name:"text-song",type:ig.Entity.TYPE.B,zIndex:6009,songTimer:new ig.Timer,showText:0,init:function(c,d,e){this.parent(c,d,e);this.songTimer.set(5);this.context=ig.system.context},ready:function(){},update:function(){this.parent()},checkOverlapWithPointer:function(){var c=ig.game.getEntitiesByType(EntityPointer)[0];c.pos.x>this.pos.x+this.size.x&&this.released();c.pos.x+c.size.x<this.pos.x&&this.released();c.pos.y>this.pos.y+this.size.y&&this.released();
c.pos.y+c.size.y<this.pos.y&&this.released()},draw:function(){this.parent();var c=0,d=ig.system.width/2,e=ig.system.height/2+230,f=this.showText;this.songtext=[_STRINGS.Song.Verse0,_STRINGS.Song.Verse1,_STRINGS.Song.Verse2,_STRINGS.Song.Verse3,_STRINGS.Song.Verse4,_STRINGS.Song.Verse5,_STRINGS.Song.Verse6,_STRINGS.Song.Verse7,_STRINGS.Song.Verse8,_STRINGS.Song.Verse9,_STRINGS.Song.Verse10,_STRINGS.Song.Verse11,_STRINGS.Song.Verse12,_STRINGS.Song.Verse13,_STRINGS.Song.Verse14,_STRINGS.Song.Verse15,
_STRINGS.Song.Verse16,_STRINGS.Song.Verse17,_STRINGS.Song.Verse18,_STRINGS.Song.Verse19,_STRINGS.Song.Verse20,_STRINGS.Song.Verse21,_STRINGS.Song.Verse22,_STRINGS.Song.Verse23,_STRINGS.Song.Verse24,_STRINGS.Song.Verse25,_STRINGS.Song.Verse26,_STRINGS.Song.Verse27,_STRINGS.Song.Verse28];this.wraptext=[_STRINGS.Wrap.Wrap0,_STRINGS.Wrap.Wrap1.substring(0,f),_STRINGS.Wrap.Wrap2.substring(0,f),_STRINGS.Wrap.Wrap3.substring(0,f),_STRINGS.Wrap.Wrap4.substring(0,f),_STRINGS.Wrap.Wrap5.substring(0,f),_STRINGS.Wrap.Wrap6.substring(0,
f),_STRINGS.Wrap.Wrap7.substring(0,f),_STRINGS.Wrap.Wrap8.substring(0,f)];var g=f=0,m=0;this.timingA=[0,1.76,3.2,4.5,5.8,7.2,8.6,11,12.49,13.9,15.3,16.5,17.8,19.3,25.4,27.1,28.7,31.18,30.7,32.5,34,36.4,37.8,39.5,40.7,41.9,43.1,44.7,47,49.3];this.timingB=[0.48,0.7,1.1,1.37,1.48,1.77,2.13,2.46,2.84,3.21,3.67,4.07,4.83,5.18,5.46,5.8,6.18,6.44,6.59,6.76,7.2,7.43,7.74,8.07,8.6,9.22,9.66,10.02,11,11.39,11.76,11.92,12.08,12.49,12.91,13.16,13.42,13.9,14.39,14.75,15.4,15.72,16.02,16.5,16.85,17.07,17.31,17.38,
17.8,18.1,18.4,18.7,19.3,20.09,20.4,20.68,22,25.8,26.2,26.55,26.68,26.87,27.1,27.4,27.77,27.95,28.7,29.02,29.3,29.9,30.26,30.63,31.18,31.35,31.67,31.75,31.9,32.5,32.8,33.13,33.42,34,34.57,34.98,35.38,36.4,36.77,37.13,37.23,37.5,37.8,38,38.38,38.68,39.5,39.7,40.14,40.8,41.07,41.36,41.9,42.2,42.38,42.7,42.8,43.1,43.4,43.8,44,44.7,45.33,45.72,45.95,47];for(this.position=[null,5,113,305,379,480,28,104,271,380,66,234,343,66,234,343,5,113,305,379,480,28,104,271,380,15,89,314,415,34,141,276,351,452,5,138,
295,448,72,228,381,72,228,381,34,141,276,351,452,-3,130,287,440,15,89,314,415,5,30,138,279,354,455,27,160,304,441,94,238,375,94,238,375,30,138,279,354,455,27,160,304,441,15,89,314,415,-3,105,312,388,488,-33,99,285,461,32,218,396,32,218,396,-3,105,312,388,488,-33,99,285,461,22,96,322,422];this.songTimer.delta()>this.timingA[g];)c+=1,g++;for(;this.songTimer.delta()>this.timingB[m];)f+=1,m++,this.position[m];47<this.songTimer.delta()&&(c=0,ig.game.sundone=!0);49.3<this.songTimer.delta()&&(ig.game.gamedone=
!0);this.context.strokeStyle="#ff5b00";this.context.lineWidth=2;this.context.textAlign="center";22<this.songTimer.delta()&&25.4>this.songTimer.delta()?this.fnDrawText(this.context,"",d,e,"#FFFFFF","80px dimbo","center"):(this.fnDrawText(this.context,this.songtext[c],d,e,"#FFFFFF","80px dimbo","center"),this.context.strokeText(this.songtext[c],d,e));this.fnDrawText(this.context,_STRINGS.Karaoke.K1[f],ig.system.width/5+this.position[m],e,"#ff5b00","80px dimbo","left")}})});ig.baked=!0;
ig.module("game.levels.sing").requires("impact.image","game.entities.bus-game.sing-controller","game.entities.pointer").defines(function(){LevelSing={entities:[{type:"EntitySingController",x:0,y:0},{type:"EntityPointer",x:50,y:50},{type:"EntityFadeScreen",x:684,y:160}],layer:[{name:"base",width:30,height:40,linkWithCollision:!1,visible:!0,tilesetName:"",repeat:!1,preRender:!1,distance:"1",tilesize:16,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]}});ig.baked=!0;
ig.module("game.entities.bus-game.end-controller").requires("game.entities.settings.controller","game.entities.settings.timerinject","game.entities.settings.swipe-overlay","game.entities.settings.screenfade","game.entities.bus-game.character","game.entities.bus-game.bus-stop","game.entities.bus-game.bus","game.entities.bus-game.popup","game.entities.primary").defines(function(){EntityEndController=EntityController.extend({zIndex:1,name:"endcontrol",bg:new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/game/bg-polos.png"),
init:function(c,d,e){this.parent(c,d,e);ig.game.currentLevelAct=4;ig.game.busend=!1;ig.global.wm||(this.settings=ig.game.spawnEntity(EntityPopupSettings,ig.system.width/3-50,-1E3),this.rambu=ig.game.spawnEntity(EntityRambu,ig.system.width/2,ig.system.height/4),this.tree1=ig.game.spawnEntity(EntityProperties,ig.system.width/14,ig.system.height/2+50,{prop:Math.floor(3*Math.random())}),this.tree2=ig.game.spawnEntity(EntityProperties,ig.system.width/2+280,ig.system.height/2+50,{prop:Math.floor(3*Math.random())}),
this.cloud1=ig.game.spawnEntity(EntityCloud,ig.system.width/4,ig.system.height/14),this.cloud2=ig.game.spawnEntity(EntityCloud,ig.system.width/2+50,ig.system.height/8),this.bus=ig.game.spawnEntity(EntityBody,-1E3,120),this.overcast=ig.game.spawnEntity(EntityScreenFade,0,0),this.sun=ig.game.spawnEntity(EntitySun,ig.system.width-170,20),this.popend=ig.game.spawnEntity(EntityPopupEnding,ig.system.width/3-50,-1E3));this.tween({},8,{onComplete:function(){this.popend.showing()}.bind(this)}).start();ig.game.sortEntitiesDeferred();
console.log("Checking for AdInGameEndgame ...");"undefined"!=typeof AdInGameEndgame&&(console.log("AdInGameEndgame Initializing ..."),AdInGameEndgame.Initialize());console.log("Submitting to MarketJS Leaderboard: ",100);"undefined"!=typeof MarketJS&&(console.log("Leaderboard SubmitScore ..."),MarketJS.Leaderboard.SubmitScore(100));console.log("Injecting End Game API ...");try{console.log('enabled endgame api11');}catch(f){console.log(f.message)}},ready:function(){},update:function(){this.parent()},draw:function(){this.parent();
this.bg.draw(0,0)}})});ig.baked=!0;
ig.module("game.levels.end").requires("impact.image","game.entities.bus-game.end-controller","game.entities.pointer").defines(function(){LevelEnd={entities:[{type:"EntityEndController",x:0,y:0},{type:"EntityPointer",x:50,y:50},{type:"EntityFadeScreen",x:684,y:160}],layer:[{name:"base",width:30,height:40,linkWithCollision:!1,visible:!0,tilesetName:"",repeat:!1,preRender:!1,distance:"1",tilesize:16,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]}});ig.baked=!0;
ig.module("game.entities.buttons.button-branding-logo").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,zIndex:10001,size:{x:64,y:66},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"branding-logo",name:"brandinglogo",init:function(c,d,e){this.parent(c,d,e);if(!ig.global.wm){if("undefined"==typeof wm)if(_SETTINGS.Branding.Logo.Enabled)this.size.x=_SETTINGS.Branding.Logo.Width,
this.size.y=_SETTINGS.Branding.Logo.Height,this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,e&&e.centralize&&(this.pos.x=ig.system.width/2-this.size.x/2,console.log("centralize true ... centering branded logo ...")),_SETTINGS.Branding.Logo.LinkEnabled&&(this.link=_SETTINGS.Branding.Logo.Link,this.newWindow=_SETTINGS.Branding.Logo.NewWindow,this.clickableLayer=new ClickableDivLayer(this));else{this.kill();return}this.div_layer_name=e.div_layer_name?e.div_layer_name:
"branding-logo"}},show:function(){var c=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(c)},hide:function(){var c=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(c)},clicked:function(){},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.branding-logo-placeholder").requires("impact.entity","game.entities.buttons.button-branding-logo").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(c,d,e){this.parent(c,d,e);if(e)switch(console.log("settings found ... using that div layer name"),c=e.div_layer_name,console.log("settings.centralize:",e.centralize),e.centralize){case "true":console.log("centralize true");
centralize=!0;break;case "false":console.log("centralize false");centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else c="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:c,centralize:centralize})}catch(f){console.log(f)}this.kill()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-sound").requires("game.entities.buttons.button").defines(function(){EntityButtonSound=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,zIndex:10001,size:{x:50,y:50},mutetest:!1,name:"soundtest",init:function(c,d,e){this.parent(c,d,e)},draw:function(){this.parent();ig.system.context.fillRect(this.pos.x,this.pos.y,50,50)},clicked:function(){console.log("pressed");this.mutetest?(console.log("unmute"),ig.soundHandler.unmuteAll(!0),this.mutetest=!1):(console.log("mute"),
ig.soundHandler.muteAll(!0),this.mutetest=!0)},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.test").requires("impact.entity").defines(function(){EntityTest=ig.Entity.extend({zIndex:99999,pos:new Vector2(0,0),size:new Vector2(20,20),color:new ColorRGB(125,255,125,1),init:function(c,d,e){this.parent(c,d,e)},update:function(){this.parent()},draw:function(){this.parent();var c=ig.system.context;c.fillStyle=this.color.getHex();c.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y)}})});ig.baked=!0;
ig.module("game.entities.test-control").requires("impact.entity","game.entities.test").defines(function(){EntityTestControl=ig.Entity.extend({zIndex:99999,size:new Vector2(20,20),testEnt:null,tween:null,init:function(c,d,e){this.parent(c,d,e);ig.global.wm||(ig.game.testControl=this,this.initTestCase3())},initTestCase1:function(){this.initTestCase1Initialized=!0;this.testEnt=ig.game.spawnEntity(EntityTest,200,200);this.tweenSlow=(new ig.TweenDef(this.testEnt.pos)).to({x:100,y:100},2E3).easing(ig.Tween.Easing.Bounce.EaseOut).interpolation(ig.Tween.Interpolation.Bezier).repeat(2).yoyo(!0);
this.tweenFast=(new ig.TweenDef(this.testEnt.pos)).to({x:300,y:300},500).repeat(4).yoyo(!0);this.tweenSlow.chain(this.tweenFast);this.tweenFast.chain(this.tweenSlow);this.tweenFast.start()},initTestCase2:function(){this.initTestCase2Initialized=!0;this.coordsTween=(new ig.TweenDef({x:0,y:0})).to({x:100,y:100},1E3).easing(ig.Tween.Easing.Bounce.EaseInOut).onStart(function(c){console.log("Start",c);this.coordsTween.pause()}.bind(this)).onUpdate(function(){0.5<=this.coordsTween._currentElapsed&&this.coordsTween.stop()}.bind(this)).onStop(function(c){console.log("Stop",
c)}.bind(this)).onComplete(function(c){console.log("Complete",c)}.bind(this)).onPause(function(c){console.log("Pause",c);this.coordsTween.resume()}.bind(this)).onResume(function(c){console.log("Resume",c)}.bind(this)).start()},initTestCase3:function(){this.initTestCase3Initialized=!0;this.spawnTweenEntity();this.spawnTweenControlButtons()},initTestCase4:function(){this.initTestCase4Initialized=!0;this.testEntityA=ig.game.spawnEntity(EntityTest,450,200,{control:this,size:new Vector2(20,40)});this.testEntityB=
ig.game.spawnEntity(EntityTest,475,200,{control:this,size:new Vector2(40,20)});this.testEntityB.color.r=255;this.testEntityB.color.g=0;this.testEntityB.color.b=0},spawnTweenEntity:function(){this.tweenEntity=ig.game.spawnEntity(EntityTest,895,49,{control:this,color:new ColorRGB(255,125,125,1)});this.tweenControl=(new ig.TweenDef(this.tweenEntity.pos)).to({y:330},5E3)},spawnTweenControlButtons:function(){this.tweenControlButtons={start:ig.game.spawnEntity(EntityButton,800,50,{control:this,size:new Vector2(68,
48),color:new ColorRGB(255,125,125,1)}),stop:ig.game.spawnEntity(EntityButton,800,100,{control:this,size:new Vector2(68,48),color:new ColorRGB(255,125,125,1)}),pause:ig.game.spawnEntity(EntityButton,800,150,{control:this,size:new Vector2(68,48),color:new ColorRGB(255,125,125,1)}),resume:ig.game.spawnEntity(EntityButton,800,200,{control:this,size:new Vector2(68,48),color:new ColorRGB(255,125,125,1)}),end:ig.game.spawnEntity(EntityButton,800,250,{control:this,size:new Vector2(68,48),color:new ColorRGB(255,
125,125,1)}),pGame:ig.game.spawnEntity(EntityButton,800,300,{control:this,size:new Vector2(68,48),color:new ColorRGB(255,125,125,1)})};this.setupTweenControlButtons()},setupTweenControlButtons:function(){var c=null;for(buttonKey in this.tweenControlButtons)c=this.tweenControlButtons[buttonKey],c.name=buttonKey,c.backgroundColor=c.color.getStyle(),c.foregroundColor=c.color.getInvertedColor().getStyle(),c.draw=function(){ig.system.context.fillStyle=this.backgroundColor;ig.system.context.fillRect(this.pos.x,
this.pos.y,this.size.x,this.size.y);ig.system.context.fillStyle=this.foregroundColor;ig.system.context.font="18px LuckiestGuy";ig.system.context.textBaseline="middle";ig.system.context.textAlign="center";ig.system.context.fillText(this.name,this.pos.x+0.5*this.size.x,this.pos.y+0.5*this.size.y)};this.tweenControlButtons.start.clicked=function(){console.log("start");this.control.tweenControl.start()};this.tweenControlButtons.start.clicking=function(){};this.tweenControlButtons.start.released=function(){};
this.tweenControlButtons.stop.clicked=function(){console.log("stop");this.control.tweenControl.stop()};this.tweenControlButtons.stop.clicking=function(){};this.tweenControlButtons.stop.released=function(){};this.tweenControlButtons.pause.clicked=function(){console.log("pause");this.control.tweenControl.pause()};this.tweenControlButtons.pause.clicking=function(){};this.tweenControlButtons.pause.released=function(){};this.tweenControlButtons.resume.clicked=function(){console.log("resume");this.control.tweenControl.resume()};
this.tweenControlButtons.resume.clicking=function(){};this.tweenControlButtons.resume.released=function(){};this.tweenControlButtons.end.clicked=function(){console.log("end");this.control.tweenControl.end()};this.tweenControlButtons.end.clicking=function(){};this.tweenControlButtons.end.released=function(){};this.tweenControlButtons.pGame.clicked=function(){ig.game.pauseGame()};this.tweenControlButtons.pGame.clicking=function(){};this.tweenControlButtons.pGame.released=function(){}},update:function(){this.parent()},
draw:function(){this.parent();!0===this.testCase3Initialized&&this.drawTestCase3Info()},drawTestCase3Info:function(){}})});ig.baked=!0;
ig.module("game.levels.test-desktop").requires("impact.image","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.pointer","game.entities.buttons.button-sound","game.entities.test-control").defines(function(){LevelTestDesktop={entities:[{type:"EntityBrandingLogoPlaceholder",x:296,y:396,settings:{div_layer_name:"layer_mainmenu",centralize:"true"}},{type:"EntityButtonMoreGames",x:580,y:284,settings:{div_layer_name:"layer_moregames_mainmenu"}},{type:"EntityPointer",
x:608,y:120},{type:"EntityButtonSound",x:332,y:284},{type:"EntityTestControl",x:0,y:0}],layer:[{name:"background",width:16,height:9,linkWithCollision:!1,visible:1,tilesetName:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:60,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],[33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],[49,50,51,52,53,54,55,56,57,58,59,60,61,62,
63,64],[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],[97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112],[113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128],[129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144]]}]};LevelTestDesktopResources=[new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.levels.test-mobile").requires("impact.image","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.pointer").defines(function(){LevelTestMobile={entities:[{type:"EntityBrandingLogoPlaceholder",x:216,y:548,settings:{div_layer_name:"layer_mainmenu",centralize:"true"}},{type:"EntityButtonMoreGames",x:204,y:372,settings:{div_layer_name:"layer_moregames_mainmenu"}},{type:"EntityPointer",x:444,y:192}],layer:[{name:"background",width:9,height:16,
linkWithCollision:!1,visible:1,tilesetName:"http://cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/backgrounds/mobile/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:60,foreground:!1,data:[[1,2,3,4,5,6,7,8,9],[10,11,12,13,14,15,16,17,18],[19,20,21,22,23,24,25,26,27],[28,29,30,31,32,33,34,35,36],[37,38,39,40,41,42,43,44,45],[46,47,48,49,50,51,52,53,54],[55,56,57,58,59,60,61,62,63],[64,65,66,67,68,69,70,71,72],[73,74,75,76,77,78,79,80,81],[82,83,84,85,86,87,88,89,90],[91,92,93,94,95,96,97,98,99],[100,101,
102,103,104,105,106,107,108],[109,110,111,112,113,114,115,116,117],[118,119,120,121,122,123,124,125,126],[127,128,129,130,131,132,133,134,135],[136,137,138,139,140,141,142,143,144]]}]};LevelTestMobileResources=[new ig.Image("../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/backgrounds/mobile/background.jpg")]});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.io.storage-manager","plugins.splash-loader","plugins.tween","plugins.tweens-handler","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.math.random","plugins.scale","plugins.fake-storage",
"plugins.data.vector","plugins.data.color-rgb","game.entities.buttons.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.entities.fade-screen","game.levels.opening","game.levels.menu","game.levels.game","game.levels.sing","game.levels.end","game.levels.test-desktop","game.levels.test-mobile").defines(function(){this.MJSSOB;MyGame=ig.Game.extend({name:"Wheels-Bus",version:"1.0",sessionData:{},
io:null,paused:!1,tweens:null,rainy:!1,go:!1,monclick:!1,eleclick:!1,rabclick:!1,foxclick:!1,tigclick:!1,birdclick:!1,busarrive:!1,rilis:!1,clickonce:!1,settings:!1,gamedone:!1,busend:!1,mustclick:!1,sundone:!1,busdone:!1,playing:!1,musicPos:560,musicVol:1,soundPos:560,soundVol:1,currentLevelAct:0,storage:new ig.Storage,init:function(){this.tweens=new ig.TweensHandler;this.setupMarketJsGameCenter();this.io=new IoManager;this.io._supportsLocalStorage()||(console.log("Using fake storage"),this.storage=
new ig.Storage,this.storage.set("bus-sound-pos",this.soundPos),this.storage.set("bus-music-pos",this.musicPos),this.storage.set("bus-sound-vol",this.soundVol),this.storage.set("bus-music-vol",this.musicVol));this.soundPos=null!==this.storage.get("bus-sound-pos")?this.storage.get("bus-sound-pos"):this.soundPos;this.musicPos=null!==this.storage.get("bus-music-pos")?this.storage.get("bus-music-pos"):this.musicPos;this.soundVol=null!==this.storage.get("bus-sound-vol")?this.storage.get("bus-sound-vol"):
this.soundVol;this.musicVol=null!==this.storage.get("bus-music-vol")?this.storage.get("bus-music-vol"):this.musicVol;this.setLoadData();this.setupUrlParams=new ig.UrlParameters;this.removeLoadingWheel();this.finalize()},initData:function(){return this.sessionData={sound:this.soundVol,music:this.musicVol,soundpos:this.soundPos,musicpos:this.musicPos,level:1,score:0}},setLoadData:function(){ig.soundHandler.bgmPlayer.volume(this.musicVol);ig.soundHandler.sfxPlayer.volume(this.soundVol)},setupMarketJsGameCenter:function(){if(_SETTINGS)if(_SETTINGS.MarketJSGameCenter){var c=
ig.domHandler.getElementByClass("gamecenter-activator");_SETTINGS.MarketJSGameCenter.Activator.Enabled&&_SETTINGS.MarketJSGameCenter.Activator.Position&&(console.log("MarketJSGameCenter activator settings present ...."),ig.domHandler.css(c,{position:"absolute",left:_SETTINGS.MarketJSGameCenter.Activator.Position.Left,top:_SETTINGS.MarketJSGameCenter.Activator.Position.Top,"z-index":3}));ig.domHandler.show(c)}else console.log("MarketJSGameCenter settings not defined in game settings")},finalize:function(){if(ig.ua.mobile){var c=
ig.domHandler.getElementById("#play");ig.domHandler.attr(c,"onclick","ig.game.splashClick();");ig.domHandler.show(c)}else this.start();ig.sizeHandler.reorient()},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(c){console.log(c)}},showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},start:function(){this.resetPlayerStats();this.director=new ig.Director(this,[LevelOpening,LevelMenu,LevelGame,LevelSing,LevelEnd]);
if(_SETTINGS.Branding.Splash.Enabled)try{this.branding=new ig.BrandingSplash}catch(c){console.log(c),console.log("Loading original levels ..."),this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel);(_SETTINGS.Branding.Splash.Enabled||_SETTINGS.DeveloperBranding.Splash.Enabled)&&this.spawnEntity(EntityPointerSelector,50,50);ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.background)},fpsCount:function(){this.fpsTimer||(this.fpsTimer=
new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()?null!=this.fpsCounter?this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset())},endGame:function(){console.log("End game");ig.soundHandler.bgmPlayer.stop();ig.apiHandler.run("MJSEnd")},resetPlayerStats:function(){ig.log("resetting player stats ...");this.playerStats={id:this.playerStats?this.playerStats.id:null}},splashClick:function(){var c=ig.domHandler.getElementById("#play");ig.domHandler.hide(c);
ig.apiHandler.run("MJSFooter");ig.apiHandler.run("MJSHeader");ig.game.start()},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);ig.game.tweens.onSystemPause();console.log("Game Paused");$("#pause").show()},resumeGame:function(){ig.system.startRunLoop.call(ig.system);ig.game.tweens.onSystemResume();console.log("Game Resumed");$("#pause").hide()},showOverlay:function(c){for(i=0;i<c.length;i++)$("#"+c[i])&&$("#"+c[i]).show(),document.getElementById(c[i])&&(document.getElementById(c[i]).style.visibility=
"visible")},hideOverlay:function(c){for(i=0;i<c.length;i++)$("#"+c[i])&&$("#"+c[i]).hide(),document.getElementById(c[i])&&(document.getElementById(c[i]).style.visibility="hidden")},currentBGMVolume:this.musicVol,addition:0.1,update:function(){this.paused?(this.updateWhilePaused(),this.checkWhilePaused()):(this.parent(),this.tweens.update(this.tweens.now()),ig.ua.mobile&&ig.soundHandler&&ig.soundHandler.forceLoopBGM())},updateWhilePaused:function(){for(var c=0;c<this.entities.length;c++)this.entities[c].ignorePause&&
this.entities[c].update()},checkWhilePaused:function(){for(var c={},d=0;d<this.entities.length;d++){var e=this.entities[d];if(e.ignorePause&&!(e.type==ig.Entity.TYPE.NONE&&e.checkAgainst==ig.Entity.TYPE.NONE&&e.collides==ig.Entity.COLLIDES.NEVER))for(var f={},g=Math.floor(e.pos.y/this.cellSize),m=Math.floor((e.pos.x+e.size.x)/this.cellSize)+1,r=Math.floor((e.pos.y+e.size.y)/this.cellSize)+1,s=Math.floor(e.pos.x/this.cellSize);s<m;s++)for(var j=g;j<r;j++)if(c[s])if(c[s][j]){for(var n=c[s][j],p=0;p<
n.length;p++)e.touches(n[p])&&!f[n[p].id]&&(f[n[p].id]=!0,ig.Entity.checkPair(e,n[p]));n.push(e)}else c[s][j]=[e];else c[s]={},c[s][j]=[e]}},draw:function(){this.parent();this.dctf()},dctf:function(){this.COPYRIGHT},clearCanvas:function(c,d,e){var f=c.canvas;c.clearRect(0,0,d,e);f.style.display="none";f.offsetHeight;f.style.display="inherit"},drawDebug:function(){if(!ig.global.wm&&(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=0.35,ig.system.context.fillRect(0,
0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px LuckiestGuy",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(c){this.debug?(50>this.debug.length||this.debug.splice(0,1),this.debug.push(c),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(c));console.log(c)},debugEnable:function(){ig.input.pressed("click")&&
(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=this.viewDebug?!1:!0)}});ig.domHandler=null;ig.domHandler=new ig.DomHandler;ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.apiHandler=new ig.ApiHandler;ig.sizeHandler=new ig.SizeHandler(ig.domHandler);ig.ua.mobile?(ig.Sound.enabled=
!1,ig.main("#canvas",MyGame,60,ig.sizeHandler.mobile.actualResolution.x,ig.sizeHandler.mobile.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader),ig.sizeHandler.resize()):ig.main("#canvas",MyGame,60,ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader);ig.soundHandler=null;ig.soundHandler=new ig.SoundHandler;ig.sizeHandler.reorient();this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.MJSEOB});
</script> 
<!-- Abstract --> 
</head>
<body onload="setTimeout(function(){window.scrollTo(0,1)},1);">
<!--body-->
    <div id="pause" onclick="ig.game.resumeGame();"></div> 
	<div id="ajaxbar"> 
        <div id="game"><canvas id="canvas"></canvas></div>
        <div id="orientate"><img src="../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/orientate/portrait.png" /></div>
        <div id="play" class="play" onclick=""><img src="../cdn.marketjs.net/games/wheels-on-the-bus-sing-along/localization/en/media/graphics/splash/mobile/cover-start.png" /></div>
        <!--<img id="scrollDown" width="220" height="277"></img>-->
    </div>
    <!-- <div id="tempdiv"><br><br><br></div> -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117180225-25"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117180225-25');

_SETTINGS.MoreGames.NewWindow=false;

</script>
</body>

<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=5814634947805184&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:11:39 GMT -->
</html>
