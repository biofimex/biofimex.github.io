<!DOCTYPE html>
<html>


<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=5914435894902784&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:17:04 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>Trivia King</title>
	<link rel="icon" type="image/x-icon" href="http://cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/misc/favicon.ico" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<!-- Use this metatag when Apple fixes their IOS 9
    <meta name="viewport" content="width=device-width,height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, minimal-ui"/>
    -->
	<!--Temporary fix for IOS 9-->
	<meta name="viewport" content="initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no, minimal-ui" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<script type="text/javascript" src="../whitelabel-cdn.marketjs.com/jquery.min.js"></script>
	<script type="text/javascript">
		// SERVER_IP = "188.166.215.35";//sg-test-server
		SERVER_IP = "common.marketjs-multiplayer.com";
	</script>
	<style>html,body{background-color:#000;margin:0;padding:0;position:relative;font-family:"Arial";width:100%;height:100%;overflow:hidden}#pause{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:99999;display:none;font-size:2em;text-align:center;background:rgba(0,0,0,0.2);color:#fff}#game{position:absolute;left:0;top:0;z-index:0}#ajaxbar{background:url('../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/loading/ajax-loader.gif') center no-repeat;width:100%;height:100%;z-index:5}#canvas{position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1);z-index:1}#orientate{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:10002;display:none}#orientate img{position:absolute;float:left;width:100%;height:100%}.play{position:absolute;float:left;width:100%;height:100%;z-index:1000;background-color:#fff;left:0;top:0;display:none}.play img{position:absolute;float:left;width:100%;height:100%;z-index:1000;left:0;top:0}#nohtml5{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1002;visibility:hidden}#nohtml5 img{position:absolute;width:100%;height:100%}#nohtml5-bubble{position:absolute;bottom:20px;left:50px;width:380px;height:100px;z-index:1002;color:#000;background:rgba(255,255,255,0.75);-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#nohtml5-text{padding:10px}.horizontal-seperator{height:10px;width:100%}@font-face{font-family:'DroidSans';src:url('http://cdn.marketjs.net/games/trivia-king/localization/en/media/font/DroidSans-Bold.woff') format('woff'),url('http://cdn.marketjs.net/games/trivia-king/localization/en/media/font/DroidSans-Bold.ttf') format('truetype')}@font-face{font-family:'bebasneue';src:url('http://cdn.marketjs.net/games/trivia-king/localization/en/media/font/bebasneue.woff') format('woff'),url('http://cdn.marketjs.net/games/trivia-king/localization/en/media/font/bebasneue.ttf') format('truetype')}@font-face{font-family:'colunarounded';src:url('http://cdn.marketjs.net/games/trivia-king/localization/en/media/font/colunarounded.woff') format('woff'),url('http://cdn.marketjs.net/games/trivia-king/localization/en/media/font/colunarounded.ttf') format('truetype')}.ig_debug{position:fixed;left:0;bottom:0;width:100%;background-color:#000;border-top:2px solid #f57401;font-size:12px;color:#fff;z-index:1000;-webkit-user-select:none;display:none}.ig_debug_panel_menu{height:28px;background:#222;background:-webkit-gradient(linear,left bottom,left top,color-stop(0,#000),color-stop(1,#333));background:-moz-linear-gradient(center bottom,#000 0,#333 100%);background:-o-linear-gradient(#333,#000)}.ig_debug_panel_menu div{float:left;height:22px;padding:6px 8px 0 8px;border-right:1px solid #333}.ig_debug_panel_menu .ig_debug_head{font-weight:bold;color:#888}.ig_debug_menu_item:hover{cursor:pointer;background-color:#fff;color:#000}.ig_debug_menu_item.active,.ig_debug_menu_item.active:hover{background-color:#000;color:#fff}.ig_debug_stats{position:absolute;right:0;top:0;float:right;color:#888;border-left:1px solid #333;text-align:right}.ig_debug_stats span{width:3em;display:inline-block;color:#fff !important;margin-right:.2em;margin-left:.3em;font-family:bitstream vera sans mono,courier new;white-space:nowrap}.ig_debug_panel{height:152px;overflow:auto;position:relative}.ig_debug_panel canvas{border-bottom:1px solid #444}.ig_debug_panel .ig_debug_panel{padding:8px;height:auto;float:left;background-color:#000;border-right:2px solid #222}.ig_debug_option{padding:2px 0 2px 8px;cursor:pointer}.ig_debug_option:first-child{margin-top:8px}.ig_debug_option:hover{background-color:#111}.ig_debug_graph_mark{position:absolute;color:#888;left:4px;font-size:10px;margin-top:-12px}.ig_debug_legend{color:#ccc}.ig_debug_label_mark{display:inline-block;width:10px;height:10px;margin-right:4px;-webkit-transition:.1s linear;-moz-transition:.1s linear}.ig_debug_legend_color{display:inline-block;width:6px;height:10px;margin-right:4px;margin-left:16px}.ig_debug_legend_number{width:3em;display:inline-block;text-align:right;font-family:bitstream vera sans mono,courier new;color:#fff;margin-right:.2em}.ig_debug_map_container{position:relative;overflow:hidden;border:1px solid #888}.ig_debug_map_container canvas{position:absolute}.ig_debug_map_screen{position:absolute;border:1px solid #f0f}</style>
	<!-- APICode -->
<!-- In Game Preroll Structure Template here --><div id='AdInGamePreroll'><div id='AdInGamePreroll-Box'><div id='AdInGamePreroll-Box-Header'></div><a id='AdInGamePreroll-Box-Close' onclick='AdInGamePreroll.Close();'></a><div id='AdInGamePreroll-Box-Body'><center></center></div><div id='AdInGamePreroll-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div>
<script type='text/javascript'>// Setup
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

var mjs_game_id = getQueryVariable('game_id')
var mjs_portal_id = getQueryVariable('portal_id')
var mjs_branding_id = getQueryVariable('branding_id')
var mjs_ad_id = getQueryVariable('ad_id')

console.log('mjs_game_id:',mjs_game_id)
console.log('mjs_portal_id:',mjs_portal_id)
console.log('mjs_branding_id:',mjs_branding_id)
console.log('mjs_ad_id:',mjs_ad_id)

//Base structure in script form
var css = "";
css+= "html,body,#sticky-container{margin:0;height:100%;color:#000;background:#e3f2fc;font-size:1.2em;font-family:Helvetica,Arial,sans-serif}#sticky-container{height:auto;min-height:100%}#sticky-footer{clear:both;position:relative;z-index:10}h1{padding:0;margin:0}h2{font-size:1.2em;padding:0;margin:0}h3{font-size:.8em;padding:0;margin:0}a{color:#128ccb}a.hover{color:#128ccb}.button{font-size:1em;font-weight:normal;-moz-border-radius:.5em;-webkit-border-radius:.5em;border-radius:.5em;padding:.5em 1em;text-decoration:none;color:#fff;background-color:#fbd305;display:inline-block}.button:hover{background-color:#fbd305;color:#fff;text-decoration:none !important}.button:active{position:relative;top:.05em}.button-large{font-size:2em}input[type=submit]{border:0}.valid{font-size:.8em;color:#1bdc24}.error{font-size:.8em;color:#ea1313;margin-top:.2em;margin-bottom:.5em;display:block}.tip{color:#ccc;font-size:.8em}.borderless{border:none !important}.pull-right{text-align:right}.padding-side{padding:0 1em 0 1em}.padding-side-small{padding:0 .5em 0 .5em}.padding-side-medium{padding:0 1.5em 0 1.5em}.container{clear:both;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-left:0 solid #ccc;border-right:0 solid #ccc;min-height:100%}.container-shadow{-webkit-box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc;box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc}.overlay-container-basic{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10004;display:none}.overlay-container{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10005;display:none}.overlay-container img{position:fixed;top:50%;left:50%}.horizontal-seperator{height:1em;width:100%}.horizontal-seperator-small{height:.5em;width:100%}.horizontal-seperator-line{width:100%;border-bottom:1px solid #ccc;margin-top:.2em;margin-bottom:.2em}.section{clear:both;margin:0}.inner_section{clear:both;margin:0}.col{display:block;float:left;margin:0}.col:first-child{margin-left:0}.group:before,.group:after{content:'';display:table}.group:after{clear:both}.group{zoom:1}.span_4_of_4{width:100%}.span_3_of_4{width:74.6%}.span_2_of_4{width:49.2%}.span_1_of_4{width:23.8%}.span_3_of_3{width:100%}.span_2_of_3{width:76.1%}.span_1_of_3{width:20.2%}.span_10_of_10{width:100%}.span_9_of_10{width:89.84%}.span_8_of_10{width:79.68%}.span_7_of_10{width:69.52%}.span_6_of_10{width:59.36%}.span_5_of_10{width:49.2%}.span_4_of_10{width:39.04%}.span_3_of_10{width:28.88%}.span_2_of_10{width:18.72%}.span_1_of_10{width:8.56%}.span_8_of_8{width:100%}.span_7_of_8{width:87.3%}.span_6_of_8{width:74.6%}.span_5_of_8{width:61.9%}.span_4_of_8{width:49.2%}.span_3_of_8{width:36.5%}.span_2_of_8{width:23.8%}.span_1_of_8{width:11.1%}.span_6_of_6{width:100%}.span_5_of_6{width:83.06%}.span_4_of_6{width:66.13%}.span_3_of_6{width:49.2%}.span_2_of_6{width:33.00%}.span_1_of_6{width:16.00%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:32.26%}.overlay_span_side{width:32.26%}@media only screen and (max-width:480px){.col{margin:1% 0 1% 0}.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_4_of_4{width:100%}.span_3_of_4{width:100%}.span_2_of_4{width:100%}.span_1_of_4{width:100%}.span_2_of_6{width:100%}.span_1_of_6{width:33%}.span_10_of_10{width:100%}.span_9_of_10{width:100%}.span_8_of_10{width:100%}.span_7_of_10{width:100%}.span_6_of_10{width:100%}.span_5_of_10{width:100%}.span_4_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_10{width:100%}.span_1_of_10{width:100%}.overlay_span_middle{width:100%}.overlay_span_side{width:100%}.container{margin:0}.navigation{line-height:1.8em;font-size:.8em}.css_btn_class{font-size:2em}.right_bar_module_span_2_of_6{width:100%}.box-action{margin:.2em}.featured-short-description{display:none}.box-more-games{height:140px !important}}@media only screen and (min-width:480px) and (max-width:768px){.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_6_of_10{width:50.0%}.span_4_of_10{width:50.0%}.span_7_of_10{width:100%}.span_2_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_6{width:50%}.navigation{line-height:2em}.right_bar_module_span_2_of_6{width:50%}.span_1_of_4{width:100%}.span_3_of_4{width:100%}.overlay_span_middle{width:50%}.overlay_span_side{width:25%}}@media only screen and (min-width :768px) and (max-width:1152px){.tablet-left{width:60%}.tablet-right{width:40%}.span_3_of_4{width:65%}.span_1_of_4{width:33%}.span_2_of_6{width:50.00%}.span_1_of_6{width:19.7%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:45%}.overlay_span_side{width:27.5%}.container{margin:0}.navigation{line-height:1.8em}.box-embed{width:92%}}@media only screen and (max-width:1165px){.AdPortalLeaderboard{display:none}}@media only screen and (max-width:1280px){.container{margin:0}.AdPortalSkyscraperLeft{display:none}.AdPortalSkyscraperRight{display:none}}@media only screen and (min-device-width :320px) and (max-device-width :568px) and (orientation :landscape){.span_6_of_10{width:60.0%}.span_4_of_10{width:40.0%}}";
css+= "/*BRANDING_IN_GAME_MENUBAR_THEME*/"; //can't fit in one line. Do we minify and remove all spaces?
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_LOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_UNLOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGIN_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_REGISTER_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGOUT_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LEADERBOARD_THEME*/";
css+= "/*BRANDING_CHANGE_USERNAME_THEME*/";
css+= "#AdInGamePreroll{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGamePreroll-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGamePreroll-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGamePreroll-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGamePreroll-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGamePreroll-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";
css+= "#AdInGameEndgame{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGameEndgame-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGameEndgame-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGameEndgame-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGameEndgame-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGameEndgame-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";

var html = "";
html+= "<!--BRANDING_IN_GAME_MENUBAR_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGIN_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_REGISTER_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGOUT_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LEADERBOARD_STRUCTURE-->";
html+= "<!--BRANDING_CHANGE_USERNAME_STRUCTURE-->";
html+= "<!--AD_IN_GAME_PREROLL_STRUCTURE-->";
html+= "<!--AD_IN_GAME_ENDGAME_STRUCTURE-->";

$('head').append("<style>"+css+"</style>");
$('html').append(html);

//Base script contains all that important juice (language.jsvalidate,forms,validate extra,etc)

var _CONFIG={LOGGING:!0};var Language=new function(){this.en={Validation:{urlshort:"Please enter a valid url: Eg: mysite.com",alphanumeric:"Letters, numbers, and dashes only please",lettersonly:"Letters only please",letterswithbasicpunc:"Letters or punctuation only please",letterswithwhitespace:"Letters with white spaces only please",alphanumericnodash:"Letters and numbers only please",alphanumericwhitespace:"Letters and numbers only please",nowhitespace:"No white space please",ziprange:"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx",
integer:"A positive or negative non-decimal number please",vinUS:"The specified vehicle identification number (VIN) is invalid",dateITA:"Please enter a correct date","user-password-retype":"Please type in the same password",maxWords:"Please enter {0} words or less",minWords:"Please enter at least {0} words",rangeWords:"Please enter between {0} and {1} words",valueNotEquals:"Value must not equal arg",required:"This field is required",remote:"Please fix this field",email:"Valid email address required",
url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",accept:"Please enter a value with a valid extension",maxlength:"Please enter no more than {0} characters",minlength:"Please enter at least {0} characters",rangelength:"Please enter a value between {0} and {1} characters long",range:"Please enter a value between {0} and {1}",
max:"Please enter a value less than or equal to {0}",min:"Please enter a value greater than or equal to {0}"}};this.zh={}},Localization=Language.en;(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&a.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(a){function f(){if(c.settings.submitHandler){if(c.submitButton)var a=b("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&a.remove();return!1}return!0}c.settings.debug&&a.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,f();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):f();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var a=!0,c=b(this[0].form).validate();this.each(function(){a&=c.element(this)});return a},removeAttrs:function(a){var c={},d=this;b.each(a.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(a,c){var d=this[0];if(a){var f=b.data(d.form,"validator").settings,g=f.rules,r=b.validator.staticRules(d);switch(a){case "add":b.extend(r,b.validator.normalizeRule(c));g[d.name]=r;c.messages&&(f.messages[d.name]=b.extend(f.messages[d.name],c.messages));break;case "remove":if(!c)return delete g[d.name],
r;var u={};b.each(c.split(/\s/),function(a,b){u[b]=r[b];delete r[b]});return u}}d=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(d),b.validator.classRules(d),b.validator.attributeRules(d),b.validator.staticRules(d)),d);d.required&&(f=d.required,delete d.required,d=b.extend({required:f},d));return d}});b.extend(b.expr[":"],{blank:function(a){return!b.trim(""+a.value)},filled:function(a){return!!b.trim(""+a.value)},unchecked:function(a){return!a.checked}});b.validator=function(a,c){this.settings=
b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1==arguments.length)return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=b.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);b.each(c,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in
this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).addClass(c).removeClass(d):b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).removeClass(c).addClass(d):b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:Localization.Validation.required,
remote:Localization.Validation.remote,email:Localization.Validation.email,url:Localization.Validation.url,date:Localization.Validation.date,dateISO:Localization.Validation.dateISO,number:Localization.Validation.number,digits:Localization.Validation.digits,creditcard:Localization.Validation.creditcard,equalTo:Localization.Validation.equalTo,accept:Localization.Validation.accept,maxlength:b.validator.format(Localization.Validation.maxlength),minlength:b.validator.format(Localization.Validation.minlength),
rangelength:b.validator.format(Localization.Validation.rangelength),range:b.validator.format(Localization.Validation.range),max:b.validator.format(Localization.Validation.max),min:b.validator.format(Localization.Validation.min)},autoCreateRanges:!1,prototype:{init:function(){function a(a){var c=b.data(this[0].form,"validator"),d="on"+a.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],a)}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&
this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};b.each(this.settings.groups,function(a,d){b.each(d.split(/\s/),function(b,d){c[d]=a})});var d=this.settings.rules;b.each(d,function(a,c){d[a]=b.validator.normalizeRule(c)});b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",a);this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=
this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=b(a);var c=this.check(a);c?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(a){if(a){b.extend(this.errorMap,a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});
this.successList=b.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;
return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==b.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=
this,c={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!a.objectLength(b(this).rules())?!1:c[this.name]=!0})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=
[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var c=b(a).rules(),d=!1,f;for(f in c){var g={method:f,parameters:c[f]};try{var r=b.validator.methods[f].call(this,a.value.replace(/\r/g,""),a,g.parameters);if("dependency-mismatch"==r)d=!0;else{d=!1;if("pending"==
r){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!r)return this.formatAndAdd(a,g),!1}}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+a.id+", check the '"+g.method+"' method",u),u;}}if(!d)return this.objectLength(c)&&this.successList.push(a),!0},customMetaMessage:function(a,c){if(b.metadata){var d=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,
b){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,c),this.customMetaMessage(a,c),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),f=/\$?\{(\d+)\}/g;
"function"==typeof d?d=d.call(this,b.parameters,a):f.test(d)&&(d=jQuery.format(d.replace(f,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);
this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},
invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(a,c){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||
(this.settings.errorPlacement?this.settings.errorPlacement(d,b(a)):d.insertAfter(a)));!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var c=this.idOrName(a);return this.errors().filter(function(){return b(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&
(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var c=this.currentForm;return b(document.getElementsByName(a)).map(function(b,f){return f.form==c&&f.name==a&&f||null})},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,
b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!b.validator.methods.required.call(this,b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=
0);delete this.pending[a.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!c&&(0==this.pendingRequest&&this.formSubmitted)&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},
dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor==String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c={};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={};a=b(a);for(var d in b.validator.methods){var f;
(f="required"===d&&"function"===typeof b.fn.prop?a.prop(d):a.attr(d))?c[d]=f:a[0].getAttribute("type")===d&&(c[d]=!0)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(a){if(!b.metadata)return{};var c=b.data(a.form,"validator").settings.meta;return c?b(a).metadata()[c]:b(a).metadata()},staticRules:function(a){var c={},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,
c){b.each(a,function(d,f){if(!1===f)delete a[d];else if(f.param||f.depends){var g=!0;switch(typeof f.depends){case "string":g=!!b(f.depends,c.form).length;break;case "function":g=f.depends.call(c,c)}g?a[d]=void 0!==f.param?f.param:!0:delete a[d]}});b.each(a,function(d,f){a[d]=b.isFunction(f)?f(c):f});b.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});b.validator.autoCreateRanges&&
(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!=d?d:b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},
methods:{required:function(a,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(a=b(c).val())&&0<a.length;case "input":if(this.checkable(c))return 0<this.getLength(a,c);default:return 0<b.trim(a).length}},remote:function(a,c,d){if(this.optional(c))return"dependency-mismatch";var f=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=
f.message;d="string"==typeof d&&{url:d}||d;if(this.pending[c.name])return"pending";if(f.old===a)return f.valid;f.old=a;var g=this;this.startRequest(c);var r={};r[c.name]=a;b.ajax(b.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:r,success:function(d){g.settings.messages[c.name].remote=f.originalMessage;var n=!0===d;if(n){var s=g.formSubmitted;g.prepareElement(c);g.formSubmitted=s;g.successList.push(c);g.showErrors()}else s={},d=d||g.defaultMessage(c,"remote"),s[c.name]=f.message=
b.isFunction(d)?d(a):d,g.showErrors(s);f.valid=n;g.stopRequest(c,n)}},d));return"pending"},minlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)>=d},maxlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)<=d},rangelength:function(a,c,d){a=this.getLength(b.trim(a),c);return this.optional(c)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||
a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var d=0,f=0,g=!1;a=a.replace(/\D/g,"");for(var r=a.length-1;0<=r;r--){f=
a.charAt(r);f=parseInt(f,10);if(g&&9<(f*=2))f-=9;d+=f;g=!g}return 0==d%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+d+")$","i"))},equalTo:function(a,c,d){d=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid()});return a==d.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(b,c,g){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=g)});else{var c=b.ajax;b.ajax=function(d){var f=("port"in d?d:b.ajaxSettings).port;return"abort"==("mode"in d?d:b.ajaxSettings).mode?(a[f]&&a[f].abort(),a[f]=c.apply(this,arguments)):c.apply(this,arguments)}}})(jQuery);
(function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(a,c){function d(a){a=b.event.fix(a);a.type=c;return b.event.handle.call(this,a)}b.event.special[c]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(a){arguments[0]=b.event.fix(a);arguments[0].type=c;return b.event.handle.apply(this,arguments)}}});b.extend(b.fn,{validateDelegate:function(a,
c,d){return this.bind(c,function(c){var g=b(c.target);if(g.is(a))return d.apply(g,arguments)})}})})(jQuery);(function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,"")}jQuery.validator.addMethod("maxWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<d},jQuery.validator.format(Localization.Validation.maxWords));jQuery.validator.addMethod("minWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},jQuery.validator.format(Localization.Validation.minWords));jQuery.validator.addMethod("rangeWords",
function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d[0]&&a.match(/bw+b/g).length<d[1]},jQuery.validator.format(Localization.Validation.rangeWords))})();jQuery.validator.addMethod("valueNotEquals",function(b,a,c){return c!=b},Localization.Validation.valueNotEquals);jQuery.validator.addMethod("filesize",function(b,a,c){return this.optional(a)||a.files[0].size<=c});
jQuery.validator.addMethod("urlshort",function(b,a){"http://"!=b.substr(0,7)&&(b="http://"+b);"/"!=b.substr(b.length-1,1)&&(b+="/");return this.optional(a)||/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(b)},"Not valid url.");jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z-.,?!()'\"\s]+$/i.test(b)},Localization.Validation.letterswithbasicpunc);
jQuery.validator.addMethod("alphanumericnodash",function(b,a){return this.optional(a)||/^[\sa-zA-Z0-9]+$/i.test(b)},Localization.Validation.alphanumericnodash);jQuery.validator.addMethod("alphanumericwhitespace",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-\s]+$/i.test(b)},Localization.Validation.alphanumericwhitespace);jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-]+$/i.test(b)},Localization.Validation.alphanumeric);
jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},Localization.Validation.lettersonly);jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},Localization.Validation.nowhitespace);jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2}-\d{4}$/.test(b)},Localization.Validation.ziprange);
jQuery.validator.addMethod("integer",function(b,a){return this.optional(a)||/^-?\d+$/.test(b)},Localization.Validation.integer);
jQuery.validator.addMethod("vinUS",function(b){if(17!=b.length)return!1;var a,c,d,f,g,r="ABCDEFGHJKLMNPRSTUVWXYZ".split(""),u=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],n=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],s=0;for(a=0;17>a;a++){f=n[a];d=b.slice(a,a+1);8==a&&(g=d);if(isNaN(d))for(c=0;c<r.length;c++){if(d.toUpperCase()===r[c]){d=u[c];d*=f;isNaN(g)&&8==c&&(g=r[c]);break}}else d*=f;s+=d}b=s%11;10==b&&(b="X");return b==g?!0:!1},Localization.Validation.vinUS);
jQuery.validator.addMethod("dateITA",function(b,a){var c=!1;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(b))var d=b.split("index.html"),c=parseInt(d[0],10),f=parseInt(d[1],10),d=parseInt(d[2],10),g=new Date(d,f-1,c),c=g.getFullYear()==d&&g.getMonth()==f-1&&g.getDate()==c?!0:!1;else c=!1;return this.optional(a)||c},Localization.Validation.dateITA);!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(b){function a(a){var c=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(c))}function c(a){var c=a.target,d=b(c);if(!d.is("[type=submit],[type=image]")){c=d.closest("[type=submit]");if(0===c.length)return;c=c[0]}var e=this;if(e.clk=c,"image"==c.type)void 0!==a.offsetX?(e.clk_x=a.offsetX,e.clk_y=a.offsetY):"function"==typeof b.fn.offset?(d=d.offset(),
e.clk_x=a.pageX-d.left,e.clk_y=a.pageY-d.top):(e.clk_x=a.pageX-c.offsetLeft,e.clk_y=a.pageY-c.offsetTop);setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)}function d(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var f,g;f=void 0!==b("<input type='file'/>").get(0).files;g=void 0!==window.FormData;var r=!!b.fn.prop;b.fn.attr2=function(){if(!r)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function c(e){function f(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(e){d("cannot get iframe.contentDocument: "+e),b=a.document}return b}function g(){function a(){try{var b=f(z).readyState;d("state = "+
b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(c){d("Server abort: ",c," (",c.name,")"),k(C),F&&clearTimeout(F),F=void 0}}var c=p.attr2("target"),e=p.attr2("action"),u=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";w.setAttribute("target",l);(!s||/post/i.test(s))&&w.setAttribute("method","POST");e!=h.url&&w.setAttribute("action",h.url);h.skipEncodingOverride||s&&!/post/i.test(s)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});h.timeout&&(F=setTimeout(function(){y=
!0;k(G)},h.timeout));var j=[];try{if(h.extraData)for(var n in h.extraData)h.extraData.hasOwnProperty(n)&&j.push(b.isPlainObject(h.extraData[n])&&h.extraData[n].hasOwnProperty("name")&&h.extraData[n].hasOwnProperty("value")?b('<input type="hidden" name="'+h.extraData[n].name+'">').val(h.extraData[n].value).appendTo(w)[0]:b('<input type="hidden" name="'+n+'">').val(h.extraData[n]).appendTo(w)[0]);h.iframeTarget||m.appendTo("body");z.attachEvent?z.attachEvent("onload",k):z.addEventListener("load",k,
!1);setTimeout(a,15);try{w.submit()}catch(t){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",e),w.setAttribute("enctype",u),c?w.setAttribute("target",c):p.removeAttr("target"),b(j).remove()}}function k(a){if(!j.aborted&&!E){if(v=f(z),v||(d("cannot access response document"),a=C),a===G&&j)return j.abort("timeout"),void A.reject(j,"timeout");if(a==C&&j)return j.abort("server abort"),void A.reject(j,"error","server abort");if(v&&v.location.href!=h.iframeSrc||y){z.detachEvent?
z.detachEvent("onload",k):z.removeEventListener("load",k,!1);var c;a="success";try{if(y)throw"timeout";var e="xml"==h.dataType||v.XMLDocument||b.isXMLDoc(v);if(d("isXml="+e),!e&&window.opera&&(null===v.body||!v.body.innerHTML)&&--H)return d("requeing onLoad callback, DOM not available"),void setTimeout(k,250);var u=v.body?v.body:v.documentElement;j.responseText=u?u.innerHTML:null;j.responseXML=v.XMLDocument?v.XMLDocument:v;e&&(h.dataType="xml");j.getResponseHeader=function(a){return{"content-type":h.dataType}[a.toLowerCase()]};
u&&(j.status=Number(u.getAttribute("status"))||j.status,j.statusText=u.getAttribute("statusText")||j.statusText);var n=(h.dataType||"").toLowerCase(),s=/(json|script|text)/.test(n);if(s||h.textarea){var p=v.getElementsByTagName("textarea")[0];if(p)j.responseText=p.value,j.status=Number(p.getAttribute("status"))||j.status,j.statusText=p.getAttribute("statusText")||j.statusText;else if(s){var g=v.getElementsByTagName("pre")[0],l=v.getElementsByTagName("body")[0];g?j.responseText=g.textContent?g.textContent:
g.innerText:l&&(j.responseText=l.textContent?l.textContent:l.innerText)}}else"xml"==n&&!j.responseXML&&j.responseText&&(j.responseXML=I(j.responseText));try{var e=j,u=h,q=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&0<=q.indexOf("xml"),B=r?e.responseXML:e.responseText;D=(r&&"parsererror"===B.documentElement.nodeName&&b.error&&b.error("parsererror"),u&&u.dataFilter&&(B=u.dataFilter(B,n)),"string"==typeof B&&("json"===n||!n&&0<=q.indexOf("json")?B=J(B):("script"===n||!n&&0<=q.indexOf("javascript"))&&
b.globalEval(B)),B)}catch(w){a="parsererror",j.error=c=w||a}}catch(x){d("error caught: ",x),a="error",j.error=c=x||a}j.aborted&&(d("upload aborted"),a=null);j.status&&(a=200<=j.status&&300>j.status||304===j.status?"success":"error");"success"===a?(h.success&&h.success.call(h.context,D,"success",j),A.resolve(j.responseText,"success",j),t&&b.event.trigger("ajaxSuccess",[j,h])):a&&(void 0===c&&(c=j.statusText),h.error&&h.error.call(h.context,j,a,c),A.reject(j,"error",c),t&&b.event.trigger("ajaxError",
[j,h,c]));t&&b.event.trigger("ajaxComplete",[j,h]);t&&!--b.active&&b.event.trigger("ajaxStop");h.complete&&h.complete.call(h.context,j,a);E=!0;h.timeout&&clearTimeout(F);setTimeout(function(){h.iframeTarget?m.attr("src",h.iframeSrc):m.remove();j.responseXML=null},100)}}}var n,h,t,l,m,z,j,x,y,F,w=p[0],A=b.Deferred();if(A.abort=function(a){j.abort(a)},e)for(n=0;n<q.length;n++)e=b(q[n]),r?e.prop("disabled",!1):e.removeAttr("disabled");if(h=b.extend(!0,{},b.ajaxSettings,a),h.context=h.context||h,l="jqFormIO"+
(new Date).getTime(),h.iframeTarget?(m=b(h.iframeTarget),x=m.attr2("name"),x?l=x:m.attr2("name",l)):(m=b('<iframe name="'+l+'" src="'+h.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),z=m[0],j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";d("aborting upload... "+c);this.aborted=1;try{z.contentWindow.document.execCommand&&
z.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",h.iframeSrc);j.error=c;h.error&&h.error.call(h.context,j,c,a);t&&b.event.trigger("ajaxError",[j,h,c]);h.complete&&h.complete.call(h.context,j,c)}},t=h.global,t&&0===b.active++&&b.event.trigger("ajaxStart"),t&&b.event.trigger("ajaxSend",[j,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,j,h))return h.global&&b.active--,A.reject(),A;if(j.aborted)return A.reject(),A;(e=w.clk)&&(x=e.name,x&&!e.disabled&&(h.extraData=h.extraData||{},
h.extraData[x]=e.value,"image"==e.type&&(h.extraData[x+".x"]=w.clk_x,h.extraData[x+".y"]=w.clk_y)));var G=1,C=2;x=b("meta[name=csrf-token]").attr("content");(e=b("meta[name=csrf-param]").attr("content"))&&x&&(h.extraData=h.extraData||{},h.extraData[e]=x);h.forceSync?g():setTimeout(g,10);var D,v,E,H=50,I=b.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=
b.documentElement.nodeName?b:null},J=b.parseJSON||function(a){return window.eval("("+a+")")};return A}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var s,e,p=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});s=a.type||this.attr2("method");e=a.url||this.attr2("action");(e=(e="string"==typeof e?b.trim(e):"")||window.location.href||"")&&(e=(e.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:e,success:b.ajaxSettings.success,type:s||b.ajaxSettings.type,
iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);e={};if(this.trigger("form-pre-serialize",[this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var t=a.traditional;void 0===t&&(t=b.ajaxSettings.traditional);var k,q=[],l=this.formToArray(a.semantic,q);if(a.data&&(a.extraData=a.data,k=b.param(a.data,
t)),a.beforeSubmit&&!1===a.beforeSubmit(l,this,a))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;e=b.param(l,t);k&&(e=e?e+"&"+k:k);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+e,a.data=null):a.data=e;var m=[];if(a.resetForm&&m.push(function(){p.resetForm()}),a.clearForm&&m.push(function(){p.clearForm(a.includeHidden)}),
!a.dataType&&a.target){var G=a.success||function(){};m.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(G,arguments)})}else a.success&&m.push(a.success);if(a.success=function(b,c,d){for(var e=a.context||this,f=0,h=m.length;h>f;f++)m[f].apply(e,[b,c,d||p,p])},a.error){var y=a.error;a.error=function(b,c,d){y.apply(a.context||this,[b,c,d,p])}}if(a.complete){var I=a.complete;a.complete=function(b,c){I.apply(a.context||this,[b,c,p])}}k=0<b("input[type=file]:enabled",this).filter(function(){return""!==
b(this).val()}).length;e="multipart/form-data"==p.attr("enctype")||"multipart/form-data"==p.attr("encoding");t=f&&g;d("fileAPI :"+t);var C;if(!1!==a.iframe&&(a.iframe||(k||e)&&!t))a.closeKeepAlive?b.get(a.closeKeepAlive,function(){C=c(l)}):C=c(l);else{if((k||e)&&t){var E=new FormData;for(e=0;e<l.length;e++)E.append(l[e].name,l[e].value);if(a.extraData){var D=b.param(a.extraData,a.traditional).split("&"),J=D.length;k=[];for(e=0;J>e;e++)D[e]=D[e].replace(/\+/g," "),t=D[e].split("="),k.push([decodeURIComponent(t[0]),
decodeURIComponent(t[1])]);for(e=0;e<k.length;e++)k[e]&&E.append(k[e][0],k[e][1])}a.data=null;k=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});a.uploadProgress&&(k.xhr=function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){var c=0,d=b.loaded||b.position,e=b.total;b.lengthComputable&&(c=Math.ceil(100*(d/e)));a.uploadProgress(b,d,e,c)},!1),c});k.data=null;var H=k.beforeSend;k=(k.beforeSend=function(b,c){c.data=
a.formData?a.formData:E;H&&H.call(this,b,c)},b.ajax(k))}else k=b.ajax(a);C=k}p.removeData("jqxhr").data("jqxhr",C);for(k=0;k<q.length;k++)q[k]=null;return this.trigger("form-submit-notify",[this,a]),this};b.fn.ajaxForm=function(f){if(f=f||{},f.delegation=f.delegation&&b.isFunction(b.fn.on),!f.delegation&&0===this.length){var n=this.selector,s=this.context;return!b.isReady&&n?(d("DOM not ready, queuing ajaxForm"),b(function(){b(n,s).ajaxForm(f)}),this):(d("terminating; zero elements found by selector"+
(b.isReady?"":" (DOM not ready)")),this)}return f.delegation?(b(document).off("submit.form-plugin",this.selector,a).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,f,a).on("click.form-plugin",this.selector,f,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",f,a).bind("click.form-plugin",f,c)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,c){var d=[];if(0===this.length)return d;var e,p=this[0],
g=this.attr("id"),k=a?p.getElementsByTagName("*"):p.elements;if(k&&!/MSIE [678]/.test(navigator.userAgent)&&(k=b(k).get()),g&&(e=b(':input[form="'+g+'"]').get(),e.length&&(k=(k||[]).concat(e))),!k||!k.length)return d;var q,l,m,r,y;e=0;for(r=k.length;r>e;e++)if(m=k[e],q=m.name,q&&!m.disabled)if(a&&p.clk&&"image"==m.type)p.clk==m&&(d.push({name:q,value:b(m).val(),type:m.type}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y}));else if(l=b.fieldValue(m,!0),l&&l.constructor==Array){c&&c.push(m);
g=0;for(y=l.length;y>g;g++)d.push({name:q,value:l[g]})}else if(f&&"file"==m.type)if(c&&c.push(m),y=m.files,y.length)for(g=0;g<y.length;g++)d.push({name:q,value:y[g],type:m.type});else d.push({name:q,value:"",type:m.type});else null!==l&&"undefined"!=typeof l&&(c&&c.push(m),d.push({name:q,value:l,type:m.type,required:m.required}));!a&&p.clk&&(k=b(p.clk),l=k[0],(q=l.name)&&!l.disabled&&"image"==l.type&&(d.push({name:q,value:k.val()}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y})));
return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var c=[];return this.each(function(){var d=this.name;if(d){var e=b.fieldValue(this,a);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),b.param(c)};b.fn.fieldValue=function(a){for(var c=[],d=0,e=this.length;e>d;d++){var f=b.fieldValue(this[d],a);null===f||"undefined"==typeof f||f.constructor==
Array&&!f.length||(f.constructor==Array?b.merge(c,f):c.push(f))}return c};b.fieldValue=function(a,c){var d=a.name,e=a.type,f=a.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||a.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!a.checked||("submit"==e||"image"==e)&&a.form&&a.form.clk!=a||"select"==f&&-1==a.selectedIndex))return null;if("select"==f){var g=a.selectedIndex;if(0>g)return null;for(var d=[],f=a.options,k=(e="select-one"==e)?g+1:f.length,g=e?g:0;k>g;g++){var q=f[g];if(q.selected){var l=
q.value;if(l||(l=q.attributes&&q.attributes.value&&!q.attributes.value.specified?q.text:q.value),e)return l;d.push(l)}}return d}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value=
"":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(d)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=
!a})};b.fn.selected=function(a){return void 0===a&&(a=!0),this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=a:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),a&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});


var InGameMenubarAuth = {
	checkIfLoggedIn:function(token_id){
		$.ajax({
	        type: 'GET',
	        dataType: 'json',
			url: 'http://smartfun.club' + '/api/login/check/' + token_id + '',
            beforeSend:function (){
				console.log('InGameMenubarAuth.checkIfLoggedIn: beforeSend')
			},			
		}).done(function(response){
			console.log(response)								
			$('#in-game-menubar-user-panel').html(response.data.template);	
			
			if(response.status.code==200){				
				if(mjs_user_token_id){
					// Update portal domain
					var old_href = 'index.html';
					console.log('old_href:',old_href);
					
					$('#in-game-menubar-main-portal-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString());				

					// Update header
					$('#in-game-menubar-header-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString())					
				}

			}
		});			
	},	
}

// GLOBAL
var mjs_user_token_id;

// getQueryVariable
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

// In Game Menubar Script Template here
var InGameMenubar = {
	enabled:eval('false'),
	
	activateLeaderboard:function(){
		$('#in-game-menubar-main').hide()
		$('#in-game-menubar-leaderboard').show();		
	},
	
	showActivator:function(){
		$('#in-game-menubar-activator').show();
	},
	activate: function(){
		// Resolve in pixels
		var height = $('#in-game-menubar-main').css('height')
		if(height=='0px'){
			console.log('weird bug with 0px ... forcing something')
			$('#in-game-menubar-main').css('height',window.innerHeight*0.6)
		}
		
		$('#in-game-menubar-activator').hide(200);
		//$('#in-game-menubar-main').css('top',$('#in-game-menubar-activator').css('top'))
		$('#in-game-menubar-main').show(200);
	},		
	deactivate: function(){
		$('#in-game-menubar-activator').show(200);
		$('#in-game-menubar-main').hide(200);
	},
}

var Cookie = {
	IsEnabled: function(){
		return navigator.cookieEnabled ||
	        ('cookie' in document && (document.cookie.length > 0 ||
	        (document.cookie = 'mjstestcookie').indexOf.call(document.cookie, 'mjstestcookie') > -1));	
	},	
	DoesExist: function(cname) {
	    var name = cname + '=';
	    var ca = document.cookie.split(';');
		var value;
	    for(var i=0; i<ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1);
	        if (c.indexOf(name) == 0){
				return true;
			} 
	    }
	    return false;
	},
	// TEST
	SetFiveSecondCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (5*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetHourlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetDailyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
 	SetMonthlyCookie: function(cname) { // averages to 30 days
	    var d = new Date();
	    d.setTime(d.getTime() + (1*30*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},		
	SetYearlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*365*24*60*60*1000)); // averages to 365 days
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},			
}

var MarketJS = {
	Log:{
		Game:function(metric_name){ // Eg: MarketJS.Log.Game('Initialize'), MarketJS.Log.Game('EndGame'), MarketJS.Log.Game('LaunchGame)
			console.log('MarketJS API Log Game Event: ',metric_name)
			$.ajax({
		        type: 'GET',
				dataType:'json',
				url: 'http://smartfun.club/api/log/game/' + metric_name + '/' + mjs_game_id + '?mjs_user_token_id=' + mjs_user_token_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		Portal:function(metric_name){ // Eg: MarketJS.Log.Portal('UserLogin'), MarketJS.Log.Portal('UserRegister')
			console.log('MarketJS API Log Portal Event: ',metric_name)
			$.ajax({
		        type: 'POST',
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		TimeSpent:function(metric_value){
			console.log('MarketJS API Log Time Spent: ',metric_value)
			var metric_name = 'TimeSpent';
			$.ajax({
		        type: 'POST',
				data:{'metric_value':metric_value},
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},	
		// Specially developed
		UniqueVisitor:function(){
			console.log('MarketJS API Log Unique Visitor Event')

			// if unique_visitor_params[xxxx] = 'True', means it will be logged in the server			
			var unique_visitor_params = {
				'singular':'True', // to invoke singular counter increments. Special case
				'hourly':'False',
				'daily':'False',
				'monthly':'False',
				'yearly':'False',
			}
			
			var submit_hourly_cookie = false;
			var submit_daily_cookie = false;
			var submit_monthly_cookie = false;
			var submit_yearly_cookie = false;
			
			if(Cookie.IsEnabled()){
				/*
				if(!Cookie.DoesExist('mjstest')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetFiveSecondCookie('mjstest');
					submit_hourly_cookie = true;
				}*/
				
				if(!Cookie.DoesExist('mjshourly')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetHourlyCookie('mjshourly');
					submit_hourly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsdaily')){
					unique_visitor_params['daily'] = 'True';
					Cookie.SetDailyCookie('mjsdaily');
					submit_daily_cookie = true;
				}

				if(!Cookie.DoesExist('mjsmonthly')){
					unique_visitor_params['monthly'] = 'True';
					Cookie.SetMonthlyCookie('mjsmonthly');					
					submit_monthly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsyearly')){
					unique_visitor_params['yearly'] = 'True';
					Cookie.SetYearlyCookie('mjsyearly');
					submit_yearly_cookie = true;
				}																
			}	

			/* SAMPLE:
			unique_visitor_params:{
				hourly:hourly, // 'True'
				daily:daily,	// 'False'
				monthly:monthly, // 'False'
				yearly:yearly, // 'False'
			},
			*/						
			if(submit_hourly_cookie || submit_daily_cookie || submit_monthly_cookie || submit_yearly_cookie){
				console.log('Submitting ...')
				$.ajax({
			        type: 'POST',
					dataType:'json',
					data:unique_visitor_params,
					url: 'http://smartfun.club/api/log/portal/' + 'UniqueVisitor' + '/' + mjs_portal_id,
				}).done(function(response){
					console.log(response.status.code);							
				});					
			}else{
				console.log('Not submitting ... all data is current')
			}					
		},
	},
	
	Leaderboard:{
		SubmitScore:function(points){ // (token_id,game_id,points)
			// what's the drawback? users can post as often as they want, but we have a filter for frequency and value
			if(!mjs_user_token_id){
				console.log('No user session detected. No score submitted')
				return
			}
			$.ajax({
		        type: 'POST',
				data:{
					'token_id':mjs_user_token_id,//token_id,
					'game_id':mjs_game_id,//game_id,
					'points':points,
				},
		        dataType: 'json',
				url: 'http://smartfun.club/leaderboard/write',		
			}).done(function(response){
				console.log(response);
				if(response.status.code==200){
					console.log('SUCCESSFUL')
				}else{
					console.log('FAILED')
				}							
			});			
		},			
	}
}

// Steps

// Good thing we only have mobile and non-mobile
function isMobile(){
	var userAgent = navigator.userAgent;
	var list = ['iPhone','iPad','android','Android','Windows Phone','Silk','BB10','PlayBook'];
	for(i=0;i<list.length;i++){
		if(userAgent.indexOf(list[i])!=-1){
			return true
		}
	}
	return false;
}

// ENABLER
// temporaryly use localStorage, instead of jStorage
$(document).ready(function(){
	if(isMobile() && InGameMenubar.enabled){
		InGameMenubar.showActivator();
	}
	
	mjs_user_token_id = getQueryVariable('mjs_user_token_id');
	if(mjs_user_token_id){
		console.log('mjs_user_token_id found in url param')

		if(isMobile() && InGameMenubar.enabled){
			InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id);
		}		
	}else{
		if(localStorage){
			mjs_user_token_id = localStorage.getItem('mjs_user_token_id')
			
			if(isMobile() && InGameMenubar.enabled){
				if(mjs_user_token_id){
					console.log('mjs_user_token_id found in localStorage');
					InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id)
				}else{
					console.log('No user token id found in localStorage ... perform a dummy check')
					InGameMenubarAuth.checkIfLoggedIn('12345678') // SOMEHOW THIS NEEDS TO BE HERE
				}				
			}			
			
		}else{
			console.log('no localstorage found')
		}
	}	
});

/* OBSOLETE
// Record TimeSpent
var TimeSpent = 0;
window.setInterval(function () {TimeSpent+=1}, 1000);
var isSmartphone = eval('false');
var isTablet = eval('false');
var isDesktop;
if(isSmartphone || isTablet){
	isDesktop = false;
}else{
	isDesktop = true;
}
if(!isDesktop){
	window.setInterval(function () {
		MarketJS.Log.TimeSpent(TimeSpent); // NEEDS TO BE OPTIMIZED, TO REDUCE LOAD
		TimeSpent = 0;					
	}, 31000);	
}
*/


var BrandingSplashScreen={enabled:eval('true'),}
function InitializeSplashScreen(){if(BrandingSplashScreen.enabled){this.START_BRANDING_SPLASH;ig.module('plugins.branding.splash').requires('impact.impact','impact.entity').defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0);}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},splash:new ig.Image('http://lh3.googleusercontent.com/YADmEGMQG8Rabw_t5RDwpddpX7r0VqS8lIQj6R65PozZt1KyTX_NvlOK5UBYqZOE6pwsXlxdOI7UWcHy6sz51525x82aH1fXLq_1Og=s480'),init:function(x,y,settings){this.parent(x,y,settings); if(ig.system.width<=320){this.size.x=320;this.size.y=200;}else{this.size.x=480;this.size.y=240;} 
this.pos.x=(ig.system.width-this.size.x)/2;this.pos.y=-this.size.y-200; this.endPosY=(ig.system.height-this.size.y)/2;var tween1=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});var tween2=this.tween({},eval('3')-0.5,{onComplete:function(){ ig.game.director.loadLevel(ig.game.director.currentLevel);}});tween1.chain(tween2);tween1.start();this.currentAnim=this.anims.idle;},createClickableLayer:function(){ console.log('Build clickable layer')
this.checkClickableLayer('branding-splash','SPLASH_SCREEN_CLICKABLE_LOGO_URL',true);},doesClickableLayerExist:function(id){for(k in dynamicClickableEntityDivs){if(k==id)return true;}
return false;},checkClickableLayer:function(divID,outboundLink,open_new_window){if(typeof(wm)=='undefined'){ if(this.doesClickableLayerExist(divID)){ ig.game.showOverlay([divID]); $('#'+divID).find('[href]').attr('href',outboundLink);}else{this.createClickableOutboundLayer(divID,outboundLink,'static/test/images/branding/splash_screen/invisible.png',open_new_window);}}}, createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window){ var div=ig.$new('div');div.id=id;document.body.appendChild(div); $('#'+div.id).css('float','left');$('#'+div.id).css('position','absolute');if(ig.ua.mobile){var heightRatio=window.innerHeight/mobileHeight;var widthRatio=window.innerWidth/mobileWidth;$('#'+div.id).css('left',this.pos.x*widthRatio);$('#'+div.id).css('top',this.pos.y*heightRatio);$('#'+div.id).css('width',this.size.x*widthRatio);$('#'+div.id).css('height',this.size.y*heightRatio);}else{ var reference={x:(w/2)-(destW/2),y:(h/2)-(destH/2),}
console.log(reference.x,reference.y);$('#'+div.id).css('left',reference.x+this.pos.x*multiplier);$('#'+div.id).css('top',reference.y+this.pos.y*multiplier);$('#'+div.id).css('width',this.size.x*multiplier);$('#'+div.id).css('height',this.size.y*multiplier);} 
if(open_new_window){$('#'+div.id).html('<a target=\'_blank\' href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}else{$('#'+div.id).html('<a href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');} 
dynamicClickableEntityDivs[id]={};dynamicClickableEntityDivs[id]['width']=this.size.x*multiplier;dynamicClickableEntityDivs[id]['height']=this.size.y*multiplier;dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;},draw:function(){ig.system.context.fillStyle='#ffffff';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.parent();if(this.splash)
{ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y);}}});});this.END_BRANDING_SPLASH;}}

//BRANDING_IN_GAME_MENUBAR_LOGIN_SCRIPT

//BRANDING_IN_GAME_MENUBAR_REGISTER_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LOGOUT_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LEADERBOARD_SCRIPT

//BRANDING_CHANGE_USERNAME_SCRIPT


var AdInGamePreroll={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGamePreroll disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGamePreroll']={'box-width':AdInGamePreroll.ad_width+2,'box-height':AdInGamePreroll.ad_height+20,}}
this.selectedOverlayName='AdInGamePreroll'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGamePreroll.boxContents.header.text(AdInGamePreroll.ready_in+' '+i+'...');AdInGamePreroll.boxContents.footer.text(AdInGamePreroll.loading);i--;if(i<0){clearInterval(inter);AdInGamePreroll.boxContents.close.css('left',AdInGamePreroll.boxContents.body.width()-23);AdInGamePreroll.boxContents.close.show();AdInGamePreroll.boxContents.header.html(AdInGamePreroll.close);AdInGamePreroll.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};



var AdInGameEndgame={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGameEndgame disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGameEndgame']={'box-width':AdInGameEndgame.ad_width+2,'box-height':AdInGameEndgame.ad_height+20,}}
this.selectedOverlayName='AdInGameEndgame'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGameEndgame.boxContents.header.text(AdInGameEndgame.ready_in+' '+i+'...');AdInGameEndgame.boxContents.footer.text(AdInGameEndgame.loading);i--;if(i<0){clearInterval(inter);AdInGameEndgame.boxContents.close.css('left',AdInGameEndgame.boxContents.body.width()-23);AdInGameEndgame.boxContents.close.show();AdInGameEndgame.boxContents.header.html(AdInGameEndgame.close);AdInGameEndgame.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};

//BRANDING_FACEBOOK_SCRIPT


var BrandingInGameMoreGames={enabled:eval('true'),url:'http://smartfun.club',}

//PORTAL_ANALYTICS_CODE</script>
	<script type='text/javascript'>var _STRINGS={"Ad":{"Mobile":{"Preroll":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"Header":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"End":{"ReadyIn":"Advertisement ends in ","Loading":"Please wait ...","Close":"Close",},},},"Splash":{"Loading":"Loading ...","LogoLine1":"Some text here","LogoLine2":"powered by MarketJS","LogoLine3":"none",},"Loading":{"Loading":"LOADING",},"UI":{"MULTIPLAYER TIC TAC TOE":"TRIVIA QUIZ WITH FRIENDS","Casual Play":"MULTIPLAYER","Casual Play2":"PLAY WITH BOT","Play":"PLAY","Settings":"SETTINGS","More Games":"MORE GAMES","Options":"Options","Rules":"Rules","Sound":"Sound","Music":"Music","Main Menu":"Main Menu","On":"On","Off":"Off","Back":"Back","Connecting...":"Connecting","Disconnected":"Disconnected","Attempting to reconnect...":"Attempting to reconnect...","Player Online":"Player Online","Players Online":"Players Online","Enter Your Name":"Enter Your Name","Game Request Rejected":"Game Request Rejected","Please Refresh the Client and Try Again":"Please Refresh the Client and Try Again","Connecting to the Server":"Connecting to the Server","Please Wait":"Please Wait","Waiting for Other Players":"Waiting for Other Players"," Player Found":" Player Found"," Players Found":" Players Found","No Players Found":"No Players Found","You May Continue to Wait":"You May Continue to Wait","or Try Casual Play":"or Try Casual Play","Confirm":"Confirm","Cancel":"Cancel","Leave Game":"The Opponent Has Leave The Game","Paused":"The Opponent Has Paused The Game","Total":"Total","Name":"Name","Send":"Send","< Enter Your Message Here >":"< Enter Your Message Here >","Rules":"Rules","Options":"Options","WAITING FOR ANOTHER PLAYER...":"Finding A Challenger ...","PLAYER JOINED!":"Here Comes a New Challenger!","PLAYER LEFT!":"Player Left!","STARTING MATCH...":"Starting Match...","WAITING FOR PLAYER DECISION...":"Waiting for Player Decision...","SHOWING PLAYER DECISION...":"Showing Player Decision...","MATCH ENDED":"Match Ended"," WON!":" Won!","IT'S A TIE!":"It's a Tie!","WINNER!":"Winner!","'S TURN":"'s Turn","YOUR TURN":"Your Turn","NEW MATCH BEGINS IN ":"New Match Begins in "," SECONDS...":" Seconds...",},"Rules":["The goal is to get 3 in a row.","","The player who succeeds in ","placing three of their marks in a ","horizontal, vertical, or diagonal ","row wins the game.",],"Question":[{"q":"What's the name of the wizard<br> that takes part in LOTR","o":{1:"Frodo",2:"Legolas",3:"Gandalf",4:"Aragorn",},"a":"Gandalf",},{"q":"What is the world's<br>longest river system?","o":{1:"Nile",2:"Yangtze",3:"Amazon",4:"Mississippi",},"a":"Amazon",},{"q":"Who voiced Smaug in the<br>The Hobbit Trilogy","o":{1:"Benedict Cumberbatch",2:"Tom Hiddleston",3:"Michael Fassbender",4:"Daniel Craig",},"a":"Benedict Cumberbatch",},{"q":"What is the main color of Kylo Ren's<br> lightsaber in The Force Awakens","o":{1:"Blue",2:"Red",3:"Green",4:"Yellow",},"a":"Red",},{"q":"Which continent has<br>no active volcanoes?","o":{1:"Asia",2:"Australia",3:"Europe",4:"Africa",},"a":"Australia",},{"q":"Who is football player to have won<br>the UEFA Champions League<br>with three different teams","o":{1:"Clarence Seedorf",2:"Zinedine Zidan",3:"Cristiano Ronaldo",4:"Ronaldinho",},"a":"Clarence Seedorf",},{"q":"Who was the Prisoner of Azkaban<br>in Harry Potter?","o":{1:"Sirius Black",2:"Remus Lupin",3:"Hagrid",4:"Lord Voldemort",},"a":"Sirius Black",},{"q":"What did<br>Sir Christopher Cockerell<br>invent?","o":{1:"Hovercraft",2:"Helicopter",3:"Tank",4:"Drone",},"a":"Hovercraft",},{"q":"According to Greek mythology,<br>who stole fire for mankind's benefit?","o":{1:"Hera",2:"Ares",3:"Cupid",4:"Prometheus",},"a":"Prometheus",},{"q":"In The Bourne Ultimatum,<br> reporter Simon Ross worked<br>for which newspaper?","o":{1:"Daily Planet",2:"The Sun",3:"The Guardian",4:"The Observer",},"a":"The Guardian",},{"q":"Which soft drink did <br>John Pemberton<br>invent?","o":{1:"Coca Cola",2:"Red Bull",3:"Monster Energy",4:"Pepsi",},"a":"Coca Cola",},{"q":"Mary Jane Watson<br>is the love interest<br>of which Superhero?","o":{1:"Superman",2:"Spiderman",3:"Batman",4:"Iron Man",},"a":"Spiderman",},{"q":"Which branch of mathematics<br>deals with the sides and<br> angles of triangles, and their <br>relationship to each other?","o":{1:"Algorithm",2:"Arithmetic",3:"Calculus",4:"Trigonometry",},"a":"Trigonometry",},{"q":"Which of these Die Hard movies<br>briefly features famous film director<br>Kevin Smith playing a hacker?","o":{1:"Live Free or Die Hard",2:"Die Hard 2 : Die Harder",3:"A Good Day to Die Hard",4:"Die Hard with a Vengeance",},"a":"Live Free or Die Hard",},{"q":"Which chess piece can only<br> move diagonally?","o":{1:"Queen",2:"Bishop",3:"Pawn",4:"Knight",},"a":"Bishop",},{"q":"Who played The Joker in 2008's<br>The Dark Knight?","o":{1:"Jake Gyllenhaal",2:"Mat Damon",3:"Jared Leto",4:"Heath Ledger",},"a":"Heath Ledger",},{"q":"What is Captain Jack Sparrow's<br>favorite drink?","o":{1:"Beer",2:"Rum",3:"Wine",4:"Coffe",},"a":"Rum",},{"q":"What colour jersey is worn<br>by the winners of each stage<br>of the Tour De France? ","o":{1:"Yellow",2:"Blue",3:"Green",4:"Pink",},"a":"Yellow",},{"q":"How many colours are there<br>in a rainbow?","o":{1:"5",2:"6",3:"7",4:"8",},"a":"7",},{"q":"How many squares are there on<br>a chess board","o":{1:"32",2:"64",3:"128",4:"256",},"a":"64",},{"q":"Who developed the<br>smallpox vaccine?","o":{1:"Edward Jenner",2:"Louis Pasteur",3:"Robert Koch",4:"Joseph Lister",},"a":"Edward Jenner",},{"q":"What is the largest animal<br>that has ever existed?","o":{1:"Giant Squid",2:"Blue Whale",3:"T. Rex",4:"Saltwater Crocodile",},"a":"Blue Whale",},{"q":"Where is the smallest human bone<br>located in the body?","o":{1:"Toes",2:"Neck",3:"Ear",4:"Chest",},"a":"Ear",},{"q":"Which is the closest living relative<br>of the human species?","o":{1:"Gorillas",2:"Orangutans",3:"Gibbons",4:"Chimpanzees",},"a":"Chimpanzees",},{"q":"Vanilla flavor is extracted from<br>which part of the vanilla plant?","o":{1:"Pods",2:"Leaves",3:"Roots",4:"Flowers",},"a":"Pods",},{"q":"What is the chemical<br>symbol for silver?","o":{1:"Pb",2:"Ag",3:"Si",4:"Na",},"a":"Ag",},{"q":"What is the lightest element?","o":{1:"Oxygen",2:"Helium",3:"Hydrogen",4:"Nitrogen",},"a":"Hydrogen",},{"q":"What is the hottest planet in the<br>Solar System?","o":{1:"Mercury",2:"Venus",3:"Earth",4:"Mars",},"a":"Venus",},{"q":"About how far is the moon<br>from the earth?","o":{1:"3,766 km",2:"37,660 km",3:"376,600 km",4:"3,766,000 km",},"a":"376,600 km",},{"q":"Sound travels fastest<br>in which environment?","o":{1:"Solid",2:"Liquid",3:"Gas",4:"Plasma",},"a":"Solid",},{"q":"Which of Shakespeare's plays features<br>a sorcerer named Prospero?","o":{1:"Macbeth",2:"A Midsummer Night’s Dream",3:"Twelfth Night",4:"The Tempest",},"a":"The Tempest",},{"q":"Which Stephen King novel takes place<br>mostly in the fictional Overlook Hotel?","o":{1:"Salem’s Lot",2:"The Shining",3:"It",4:"Doctor Sleep",},"a":"The Shining",},{"q":"Who wrote: ‘Two roads diverged<br>in a wood, and I ... I took the one<br>less traveled by’?","o":{1:"Robert Frost",2:"Emily Dickinson",3:"Walt Whitman",4:"Langston Hughes",},"a":"Robert Frost",},{"q":"In George Orwell's Animal Farm,<br>what kind of animal is Boxer?","o":{1:"Pig",2:"Cow",3:"Horse",4:"Sheep",},"a":"Horse",},{"q":"How many syllables does a haiku have?","o":{1:"12",2:"14",3:"15",4:"17",},"a":"17",},{"q":"What is the meaning of the<br>French expression ‘C’est la vie’?","o":{1:"That’s life",2:"Life is good",3:"Seize the day",4:"Sweet life",},"a":"That’s life",},{"q":"In China, which number is unlucky<br>because it has the same pronunciation<br>as the word for ‘death’?","o":{1:"3",2:"4",3:"8",4:"9",},"a":"4",},{"q":"What is the national language of India?","o":{1:"Tamil",2:"Sanskrit",3:"Hindi",4:"Urdu",},"a":"Hindi",},{"q":"What is the main Chinese dialect<br>spoken in Hong Kong?","o":{1:"Mandarin",2:"Hokkien",3:"Shanghainese",4:"Cantonese",},"a":"Cantonese",},{"q":"How do you say ‘I love you’<br>in Italian?","o":{1:"Ti amo",2:"Te quiero",3:"Je t’aime",4:"Ich liebe dich",},"a":"Ti amo",},{"q":"What was the capital of the ancient<br>Aztec empire?","o":{1:"Cancun",2:"Tenochtitlan",3:"Toluca",4:"Yucatan",},"a":"Tenochtitlan",},{"q":"Demography is the study of what?","o":{1:"Behavior",2:"Cultures",3:"Populations",4:"Morality",},"a":"Populations",},{"q":"Which was the key to deciphering<br>Egyptian hieroglyphs?","o":{1:"Code of Hammurabi",2:"Dead Sea Scrolls",3:"Code of Ur-Nammu",4:"Rosetta Stone",},"a":"Rosetta Stone",},{"q":"What is the meaning<br>of the prefix ‘paleo’<br>(as in the Paleolithic Age)?","o":{1:"Old",2:"New",3:"Modern",4:"Late",},"a":"Old",},{"q":"Who is the father of communism?","o":{1:"Joseph Stalin",2:"Karl Marx",3:"Benito Mussolini",4:"Niccolo Machiavelli",},"a":"Karl Marx",},{"q":"What is the stock market index<br>for the Tokyo Stock Exchange?","o":{1:"Dow Jones",2:"S&P 500",3:"Nikkei 225",4:"Hang Seng",},"a":"Nikkei 225",},{"q":"Which country has the most<br>number of billionaires?","o":{1:"China",2:"Russia",3:"India",4:"USA",},"a":"USA",},{"q":"Which fruit has the largest<br>annual global production at<br>170 million metric tons?","o":{1:"Tomatoes",2:"Bananas",3:"Mangoes",4:"Watermelons",},"a":"Tomatoes",},{"q":"Which country has the highest<br>life expectancy?","o":{1:"Switzerland",2:"Japan",3:"Sweden",4:"South Korea",},"a":"Japan",},{"q":"Which is the happiest country<br>according the the UN<br>World Happiness Report?","o":{1:"Canada",2:"Brazil",3:"Norway",4:"Thailand",},"a":"Norway",},{"q":"Copenhagen is the capital of<br>which country?","o":{1:"Sweden",2:"Finland",3:"Norway",4:"Denmark",},"a":"Denmark",},{"q":"Suriname is located in<br>which continent?","o":{1:"South America",2:"Africa",3:"Europe",4:"Australia",},"a":"South America",},{"q":"Which US state shares<br>the longest border with Mexico?","o":{1:"California",2:"Texas",3:"New Mexico",4:"Arizona",},"a":"Texas",},{"q":"In what country will you find<br>the temple complex Angkor Wat?","o":{1:"Myanmar",2:"Honduras",3:"Cambodia",4:"Egypt",},"a":"Cambodia",},{"q":"What is the currency of<br>Saudi Arabia?","o":{1:"Ringgit",2:"Rupiah",3:"Rupee",4:"Riyal",},"a":"Riyal",},{"q":"Who was the first man<br>in outer space?","o":{1:"Yuri Gagarin",2:"Alan Sheppard",3:"Buzz Aldrin",4:"Neil Armstrong",},"a":"Yuri Gagarin",},{"q":"The assassination of whom<br>started World War I?","o":{1:"Tsar Nicolas II",2:"Archduke Franz Ferdinand",3:"Emperor Franz Josef I",4:"Gavrilo Princip",},"a":"Archduke Franz Ferdinand",},{"q":"In European history, the period<br>that lasted from the 14th to 17th<br>centuries is known as what?","o":{1:"Romantic Era",2:"Dark Ages",3:"Renaissance",4:"Enlightenment",},"a":"Renaissance",},{"q":"What was the capital of the Eastern<br>Byzantine Empire and is now<br>located in modern Istanbul?","o":{1:"Ephesus",2:"Alexandria",3:"Carthage",4:"Constantinople",},"a":"Constantinople",},{"q":"The United States purchased Alaska<br>in 1867 from which country?","o":{1:"Canada",2:"China",3:"Russia",4:"Greenland",},"a":"Russia",},{"q":"Who painted the Mona Lisa?","o":{1:"Donatello",2:"Michelangelo",3:"Leonardo da Vinci",4:"Raphael",},"a":"Leonardo da Vinci",},{"q":"Edvard Munch is best known<br>for which of these paintings?","o":{1:"The Sick Child",2:"The Scream",3:"Puberty",4:"Summer Night. Inger on the Beach",},"a":"The Scream",},{"q":"Which wonder of the ancient<br>world is still standing today?","o":{1:"Lighthouse of Alexandria",2:"Colossus of Rhodes",3:"Taj Mahal",4:"Great Pyramid of Giza",},"a":"Great Pyramid of Giza",},{"q":"What is the name of the<br>sculpture depicting the Virgin Mary<br>cradling the dead body of Jesus?","o":{1:"The Pieta",2:"The Passion of Christ",3:"The Creation",4:"The Angel of the North ",},"a":"The Pieta",},{"q":"Taj Mahal can be found<br>in which country?","o":{1:"Indonesia",2:"India",3:"Brunei",4:"Malaysia",},"a":"India",},{"q":"Which movie won the first<br>Academy Award for Best Picture?","o":{1:"Wings",2:"Gone with the Wind",3:"All Quiet on the Western Front ",4:"Casablanca ",},"a":"Wings",},{"q":" Which film won all the Academy Award<br>categories for which it was nominated?","o":{1:"Ben-Hur",2:"Titanic ",3:"LOTR: The Return of the King",4:"La La Land",},"a":"LOTR: The Return of the King",},{"q":"Who made the first movie?","o":{1:"Leland Stanford",2:"George Eastman",3:"Eadweard Muybridge",4:"Louis Daguerre",},"a":"Eadweard Muybridge",},{"q":"Who is the first<br>James Bond actor?","o":{1:"David Niven",2:"Sean Connery",3:"George Lazenby",4:"Roger Moore",},"a":"Sean Connery",},{"q":"In Star Wars,<br>who follows the rule of two?","o":{1:"Order of Jedi",2:"Sith",3:"The Force",4:"The Alliance",},"a":"Sith",},{"q":"Who is Jon Snow's real father?","o":{1:"Eddard Stark",2:"Rhaegar Targaryen",3:"Robert Baratheon",4:"Howland Reed",},"a":"Rhaegar Targaryen",},{"q":"In season 7 of the Walking Dead,<br>what is Negan's group called?","o":{1:"The Sanctuary",2:"The Salvation Army",3:"The Survivors",4:"The Saviors",},"a":"The Saviors",},{"q":"Who is Matt Murdock's<br>best friend?","o":{1:"Foggy Nelson",2:"Wilson Fisk",3:"Frank Castle",4:"Elektra Natchios",},"a":"Foggy Nelson",},{"q":"What is the first name<br>of Ted Mosby's wife?","o":{1:"Tracy",2:"Stella",3:"Claire",4:"Robin",},"a":"Tracy",},{"q":"Which superhero TV series<br>is based on Professor Xavier's son?","o":{1:"The Defenders",2:"Gotham",3:"Daredevil",4:"Legion",},"a":"Legion",},{"q":"Which music video is<br>considered as the most expensive?","o":{1:"Scream by Michael and Janet Jackson",2:"Back to December by Taylor Swift",3:"Under Pressure by Queen and David Bowie",4:"Ironic by Alanis Morissette",},"a":"Scream by Michael and Janet Jackson",},{"q":"What is Sting's (singer) real name?","o":{1:"Paul David Hewson",2:"Reginald Kenneth Dwight",3:"Gordon Matthew Thomas Sumner",4:"David Robert Jones",},"a":"Gordon Matthew Thomas Sumner",},{"q":"What is the best-selling<br>album of all time worldwide?","o":{1:"Come On Over by Shania Twain",2:"Bat Out of Hell by Meat Loaf",3:"Thriller by Michael Jackson",4:"Saturday Night Fever by Bee Gees",},"a":"Thriller by Michael Jackson",},{"q":"How many number 1<br>hits did the Beatles have?","o":{1:"45",2:"17",3:"38",4:"40",},"a":"17",},{"q":"Which female artist won the most<br>Grammy Awards in one night?","o":{1:"Adele",2:"Norah Jones",3:"Alicia Keys",4:"Alison Krausse",},"a":"Adele",},{"q":"What do you call a song<br>narrating a story in stanzas?","o":{1:"Ballad",2:"Epic",3:"Pop",4:"Rap",},"a":"Ballad",},{"q":"Who killed Superman?","o":{1:"Lex Luthor",2:"Doomsday",3:"Darkseid",4:"Batman",},"a":"Doomsday",},{"q":"Who is the original author of<br>The Wheel of Time series?","o":{1:"James Oliver Rigney Jr.",2:"Roy Jordan ",3:"Ryan Jordan ",4:"Brandon Sanderson",},"a":"James Oliver Rigney Jr.",},{"q":" What genre of entertainment is<br>light, funny, and generally has<br>a happy ending?","o":{1:"Drama",2:"Suspense",3:"Comedy",4:"Thriller",},"a":"Comedy",},{"q":"What plot device is used to deliver<br>an unexpected power or event to save<br>a hopeless circumstance?","o":{1:"Hand of God",2:"Carpe Diem",3:"Divine Intervention",4:"Deus Ex Machina",},"a":"Deus Ex Machina",},{"q":"What was the first workable<br>prototype of the Internet?","o":{1:"Ethernet",2:"Advanced Research Projects Agency Network",3:"Internet Assigned Numbers Authority",4:"Simple Mail Transfer Protocol",},"a":"Advanced Research Projects Agency Network",},{"q":"Which digital medium of exchange<br>uses encryption for transaction and<br>creation of new units?","o":{1:"Paypal",2:"e-Commerce",3:"Cryptocurrency",4:"Bank Transfer",},"a":"Cryptocurrency",},{"q":"In 2006, which website won<br>Time's Invention of the Year award?","o":{1:"Youtube",2:"Facebook",3:"Wikipedia",4:"Paypal",},"a":"Youtube",},{"q":"What is the term for a humorous<br>cultural concept that is copied and<br>spread rapidly via the Internet?","o":{1:"Viral",2:"Meme",3:"TLDR",4:"Netiquette",},"a":"Meme",},{"q":"What is a software application<br> for sending, recovering, and displaying<br>web pages via the Internet?","o":{1:"File Sharing Application",2:"TCP/IP",3:"Web Browser",4:"HTML",},"a":"Web Browser",},{"q":" What type of mobile phone<br>performs many of the functions of<br>a personal computer?","o":{1:"iPhone",2:"Smartphone",3:"Digital Phone",4:"Analog Phone",},"a":"Smartphone",},{"q":"What is the manipulation of<br>matter on an atomic, molecular, or<br>supermolecular level?","o":{1:"Quantum Mechanics",2:"Stem Cell Therapy",3:"Robotics",4:"Nanotechnology",},"a":"Nanotechnology",},{"q":"Who is considered as the father of<br>modern computer science?","o":{1:"Alan Turing",2:"Bill Gates",3:"Steve Jobs",4:"Steve Wozniak",},"a":"Alan Turing",},{"q":"What was the name of<br>first man-made satellite in space?","o":{1:"Apollo I",2:"Sputnik I",3:"Explorer",4:"Moon Buggy",},"a":"Sputnik I",},{"q":"What type of vehicle<br>uses two or more types of<br>power for propulsion?","o":{1:"Bi-fuel",2:"Flexible-fuel",3:"Hybrid",4:"Mutifuel",},"a":"Hybrid",},{"q":"In NBA, who recorded the second<br>most points in a single game?","o":{1:"Wilt Chamberlain",2:"Michael Jordan",3:"George Mikan",4:"Kobe Bryant",},"a":"Kobe Bryant",},{"q":"What sporting event occurs<br>every 4 years in which athletes<br>participate in a variety of<br>competitions?","o":{1:"Olympic Games",2:"Formula 1 Racing",3:"World Cup",4:"World Championships",},"a":"Olympic Games",},{"q":"How many weight division<br>titles does Manny Pacquiao have?","o":{1:"6",2:"4",3:"8",4:"12",},"a":"8",},{"q":"Which country has<br>the most FIFA World Cup titles?","o":{1:"USA",2:"Germany",3:"Brazil",4:"England",},"a":"Brazil",},{"q":"Who has won the most<br>gold medals in Olympic history?","o":{1:"Mark Spitz",2:"Michael Phelps",3:"Paavo Nurmi",4:"Larisa Latynina",},"a":"Michael Phelps",},]};
var _SETTINGS={DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!0,Link:"http://google.com",LinkEnabled:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:BrandingSplashScreen.enabled},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,Width:166,Height:61}},MoreGames:{Enabled:BrandingInGameMoreGames.enabled,Link:BrandingInGameMoreGames.url,NewWindow:!0}};!function(b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?c(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return c(b)}:c(b)}("undefined"!=typeof window?window:this,function(b,c){function d(b,c){c=c||G;var d=c.createElement("script");d.text=b;c.head.appendChild(d).parentNode.removeChild(d)}function e(b){var c=!!b&&"length"in b&&b.length,d=p.type(b);return"function"!==d&&!p.isWindow(b)&&("array"===d||0===c||"number"==
typeof c&&0<c&&c-1 in b)}function f(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()}function g(b,c,d){return p.isFunction(c)?p.grep(b,function(b,e){return!!c.call(b,e,b)!==d}):c.nodeType?p.grep(b,function(b){return b===c!==d}):"string"!=typeof c?p.grep(b,function(b){return-1<da.call(c,b)!==d}):Dc.test(c)?p.filter(c,b,d):(c=p.filter(c,b),p.grep(b,function(b){return-1<da.call(c,b)!==d&&1===b.nodeType}))}function m(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function l(b){return b}
function n(b){throw b;}function r(b,c,d,e){var f;try{b&&p.isFunction(f=b.promise)?f.call(b).done(c).fail(d):b&&p.isFunction(f=b.then)?f.call(b,c,d):c.apply(void 0,[b].slice(e))}catch(g){d.apply(void 0,[g])}}function q(){G.removeEventListener("DOMContentLoaded",q);b.removeEventListener("load",q);p.ready()}function s(){this.expando=p.expando+s.uid++}function v(b,c,d){var e;if(void 0===d&&1===b.nodeType)if(e="data-"+c.replace(Ec,"-$&").toLowerCase(),d=b.getAttribute(e),"string"==typeof d){try{d="true"===
d||"false"!==d&&("null"===d?null:d===+d+""?+d:Fc.test(d)?JSON.parse(d):d)}catch(f){}ea.set(b,c,d)}else d=void 0;return d}function u(b,c,d,e){var f,g=1,l=20,m=e?function(){return e.cur()}:function(){return p.css(b,c,"")},t=m(),n=d&&d[3]||(p.cssNumber[c]?"":"px"),q=(p.cssNumber[c]||"px"!==n&&+t)&&Pa.exec(p.css(b,c));if(q&&q[3]!==n){n=n||q[3];d=d||[];q=+t||1;do g=g||".5",q/=g,p.style(b,c,q+n);while(g!==(g=m()/t)&&1!==g&&--l)}return d&&(q=+q||+t||0,f=d[1]?q+(d[1]+1)*d[2]:+d[2],e&&(e.unit=n,e.start=q,
e.end=f)),f}function t(b,c){for(var d,e,f=[],g=0,l=b.length;g<l;g++)if(e=b[g],e.style)if(d=e.style.display,c){if("none"===d&&(f[g]=H.get(e,"display")||null,f[g]||(e.style.display="")),""===e.style.display&&Ya(e)){d=f;var m=g,t,n=void 0;t=e.ownerDocument;var q=e.nodeName;t=(e=Nb[q])?e:(n=t.body.appendChild(t.createElement(q)),e=p.css(n,"display"),n.parentNode.removeChild(n),"none"===e&&(e="block"),Nb[q]=e,e);d[m]=t}}else"none"!==d&&(f[g]="none",H.set(e,"display",d));for(g=0;g<l;g++)null!=f[g]&&(b[g].style.display=
f[g]);return b}function z(b,c){var d;return d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[],void 0===c||c&&f(b,c)?p.merge([b],d):d}function B(b,c){for(var d=0,e=b.length;d<e;d++)H.set(b[d],"globalEval",!c||H.get(c[d],"globalEval"))}function E(b,c,d,e,f){for(var g,l,t,m,n=c.createDocumentFragment(),q=[],u=0,r=b.length;u<r;u++)if(g=b[u],g||0===g)if("object"===p.type(g))p.merge(q,g.nodeType?[g]:g);else if(Gc.test(g)){l=
l||n.appendChild(c.createElement("div"));t=(Ob.exec(g)||["",""])[1].toLowerCase();t=ga[t]||ga._default;l.innerHTML=t[1]+p.htmlPrefilter(g)+t[2];for(t=t[0];t--;)l=l.lastChild;p.merge(q,l.childNodes);l=n.firstChild;l.textContent=""}else q.push(c.createTextNode(g));n.textContent="";for(u=0;g=q[u++];)if(e&&-1<p.inArray(g,e))f&&f.push(g);else if(m=p.contains(g.ownerDocument,g),l=z(n.appendChild(g),"script"),m&&B(l),d)for(t=0;g=l[t++];)Pb.test(g.type||"")&&d.push(g);return n}function sa(){return!0}function W(){return!1}
function ca(){try{return G.activeElement}catch(b){}}function T(b,c,d,e,f,g){var l,t;if("object"==typeof c){"string"!=typeof d&&(e=e||d,d=void 0);for(t in c)T(b,t,d,e,c[t],g);return b}if(null==e&&null==f?(f=d,e=d=void 0):null==f&&("string"==typeof d?(f=e,e=void 0):(f=e,e=d,d=void 0)),!1===f)f=W;else if(!f)return b;return 1===g&&(l=f,f=function(b){return p().off(b),l.apply(this,arguments)},f.guid=l.guid||(l.guid=p.guid++)),b.each(function(){p.event.add(this,c,f,e,d)})}function D(b,c){return f(b,"table")&&
f(11!==c.nodeType?c:c.firstChild,"tr")?p(">tbody",b)[0]||b:b}function I(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function V(b){var c=Hc.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function U(b,c){var d,e,f,g,l,t;if(1===c.nodeType){if(H.hasData(b)&&(d=H.access(b),e=H.set(c,d),t=d.events))for(f in delete e.handle,e.events={},t){d=0;for(e=t[f].length;d<e;d++)p.event.add(c,f,t[f][d])}ea.hasData(b)&&(g=ea.access(b),l=p.extend({},g),ea.set(c,l))}}function X(b,c,e,
f){c=Qb.apply([],c);var g,l,t,m,n=0,q=b.length,u=q-1,r=c[0],s=p.isFunction(r);if(s||1<q&&"string"==typeof r&&!Q.checkClone&&Ic.test(r))return b.each(function(d){var g=b.eq(d);s&&(c[0]=r.call(this,d,g.html()));X(g,c,e,f)});if(q&&(g=E(c,b[0].ownerDocument,!1,b,f),l=g.firstChild,1===g.childNodes.length&&(g=l),l||f)){l=p.map(z(g,"script"),I);for(t=l.length;n<q;n++)m=g,n!==u&&(m=p.clone(m,!0,!0),t&&p.merge(l,z(m,"script"))),e.call(b[n],m,n);if(t){g=l[l.length-1].ownerDocument;p.map(l,V);for(n=0;n<t;n++)m=
l[n],Pb.test(m.type||"")&&!H.access(m,"globalEval")&&p.contains(g,m)&&(m.src?p._evalUrl&&p._evalUrl(m.src):d(m.textContent.replace(Kc,""),g))}}return b}function ub(b,c,d){for(var e=c?p.filter(c,b):b,f=0;null!=(c=e[f]);f++)d||1!==c.nodeType||p.cleanData(z(c)),c.parentNode&&(d&&p.contains(c.ownerDocument,c)&&B(z(c,"script")),c.parentNode.removeChild(c));return b}function na(b,c,d){var e,f,g,l,t=b.style;return d=d||Za(b),d&&(l=d.getPropertyValue(c)||d[c],""!==l||p.contains(b.ownerDocument,b)||(l=p.style(b,
c)),!Q.pixelMarginRight()&&vb.test(l)&&Rb.test(c)&&(e=t.width,f=t.minWidth,g=t.maxWidth,t.minWidth=t.maxWidth=t.width=l,l=d.width,t.width=e,t.minWidth=f,t.maxWidth=g)),void 0!==l?l+"":l}function ha(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function $a(b){var c=p.cssProps[b];if(!c){var c=p.cssProps,d;a:if(d=b,!(d in Sb)){for(var e=d[0].toUpperCase()+d.slice(1),f=Tb.length;f--;)if(d=Tb[f]+e,d in Sb)break a;d=void 0}c=c[b]=d||b}return c}function wa(b,
c,d){return(b=Pa.exec(c))?Math.max(0,b[2]-(d||0))+(b[3]||"px"):c}function ab(b,c,d,e,f){var g=0;for(c=d===(e?"border":"content")?4:"width"===c?1:0;4>c;c+=2)"margin"===d&&(g+=p.css(b,d+Ba[c],!0,f)),e?("content"===d&&(g-=p.css(b,"padding"+Ba[c],!0,f)),"margin"!==d&&(g-=p.css(b,"border"+Ba[c]+"Width",!0,f))):(g+=p.css(b,"padding"+Ba[c],!0,f),"padding"!==d&&(g+=p.css(b,"border"+Ba[c]+"Width",!0,f)));return g}function ia(b,c,d){var e,f=Za(b),g=na(b,c,f),l="border-box"===p.css(b,"boxSizing",!1,f);return vb.test(g)?
g:(e=l&&(Q.boxSizingReliable()||g===b.style[c]),"auto"===g&&(g=b["offset"+c[0].toUpperCase()+c.slice(1)]),g=parseFloat(g)||0,g+ab(b,c,d||(l?"border":"content"),e,f)+"px")}function Y(b,c,d,e,f){return new Y.prototype.init(b,c,d,e,f)}function Ca(){bb&&(!1===G.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(Ca):b.setTimeout(Ca,p.fx.interval),p.fx.tick())}function cb(){return b.setTimeout(function(){Ja=void 0}),Ja=p.now()}function Ka(b,c){var d,e=0,f={height:b};for(c=c?1:0;4>e;e+=2-c)d=Ba[e],
f["margin"+d]=f["padding"+d]=b;return c&&(f.opacity=f.width=b),f}function A(b,c,d){for(var e,f=(aa.tweeners[c]||[]).concat(aa.tweeners["*"]),g=0,l=f.length;g<l;g++)if(e=f[g].call(d,c,b))return e}function aa(b,c,d){var e,f,g=0,l=aa.prefilters.length,t=p.Deferred().always(function(){delete m.elem}),m=function(){if(f)return!1;for(var c=Ja||cb(),c=Math.max(0,n.startTime+n.duration-c),d=1-(c/n.duration||0),e=0,g=n.tweens.length;e<g;e++)n.tweens[e].run(d);return t.notifyWith(b,[n,d,c]),1>d&&g?c:(g||t.notifyWith(b,
[n,1,0]),t.resolveWith(b,[n]),!1)},n=t.promise({elem:b,props:p.extend({},c),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},d),originalProperties:c,originalOptions:d,startTime:Ja||cb(),duration:d.duration,tweens:[],createTween:function(c,d){var e=p.Tween(b,n.opts,c,d,n.opts.specialEasing[c]||n.opts.easing);return n.tweens.push(e),e},stop:function(c){var d=0,e=c?n.tweens.length:0;if(f)return this;for(f=!0;d<e;d++)n.tweens[d].run(1);return c?(t.notifyWith(b,[n,1,0]),t.resolveWith(b,[n,
c])):t.rejectWith(b,[n,c]),this}});c=n.props;d=n.opts.specialEasing;var q,u,z,r;for(e in c)if(q=p.camelCase(e),u=d[q],z=c[e],Array.isArray(z)&&(u=z[1],z=c[e]=z[0]),e!==q&&(c[q]=z,delete c[e]),r=p.cssHooks[q],r&&"expand"in r)for(e in z=r.expand(z),delete c[q],z)e in c||(c[e]=z[e],d[e]=u);else d[q]=u;for(;g<l;g++)if(e=aa.prefilters[g].call(n,b,c,n.opts))return p.isFunction(e.stop)&&(p._queueHooks(n.elem,n.opts.queue).stop=p.proxy(e.stop,e)),e;return p.map(c,A,n),p.isFunction(n.opts.start)&&n.opts.start.call(b,
n),n.progress(n.opts.progress).done(n.opts.done,n.opts.complete).fail(n.opts.fail).always(n.opts.always),p.fx.timer(p.extend(m,{elem:b,anim:n,queue:n.opts.queue})),n}function O(b){return(b.match(ja)||[]).join(" ")}function ba(b){return b.getAttribute&&b.getAttribute("class")||""}function Da(b,c,d,e){var f;if(Array.isArray(c))p.each(c,function(c,f){d||Lc.test(b)?e(b,f):Da(b+"["+("object"==typeof f&&null!=f?c:"")+"]",f,d,e)});else if(d||"object"!==p.type(c))e(b,c);else for(f in c)Da(b+"["+f+"]",c[f],
d,e)}function Qa(b){return function(c,d){"string"!=typeof c&&(d=c,c="*");var e,f=0,g=c.toLowerCase().match(ja)||[];if(p.isFunction(d))for(;e=g[f++];)"+"===e[0]?(e=e.slice(1)||"*",(b[e]=b[e]||[]).unshift(d)):(b[e]=b[e]||[]).push(d)}}function Ra(b,c,d,e){function f(t){var m;return g[t]=!0,p.each(b[t]||[],function(b,F){var t=F(c,d,e);return"string"!=typeof t||l||g[t]?l?!(m=t):void 0:(c.dataTypes.unshift(t),f(t),!1)}),m}var g={},l=b===wb;return f(c.dataTypes[0])||!g["*"]&&f("*")}function J(b,c){var d,
e,f=p.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((f[d]?b:e||(e={}))[d]=c[d]);return e&&p.extend(!0,b,e),b}var P=[],G=b.document,xb=Object.getPrototypeOf,Ea=P.slice,Qb=P.concat,fa=P.push,da=P.indexOf,db={},Ub=db.toString,eb=db.hasOwnProperty,Vb=eb.toString,Mc=Vb.call(Object),Q={},p=function(b,c){return new p.fn.init(b,c)},Nc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Oc=/^-ms-/,Pc=/-([a-z])/g,Qc=function(b,c){return c.toUpperCase()};p.fn=p.prototype={jquery:"3.2.1",constructor:p,length:0,toArray:function(){return Ea.call(this)},
get:function(b){return null==b?Ea.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=p.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return p.each(this,b)},map:function(b){return this.pushStack(p.map(this,function(c,d){return b.call(c,d,c)}))},slice:function(){return this.pushStack(Ea.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=+b+(0>b?c:0);return this.pushStack(0<=b&&
b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:fa,sort:P.sort,splice:P.splice};p.extend=p.fn.extend=function(){var b,c,d,e,f,g,l=arguments[0]||{},t=1,m=arguments.length,n=!1;"boolean"==typeof l&&(n=l,l=arguments[t]||{},t++);"object"==typeof l||p.isFunction(l)||(l={});for(t===m&&(l=this,t--);t<m;t++)if(null!=(b=arguments[t]))for(c in b)d=l[c],e=b[c],l!==e&&(n&&e&&(p.isPlainObject(e)||(f=Array.isArray(e)))?(f?(f=!1,g=d&&Array.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?
d:{},l[c]=p.extend(n,g,e)):void 0!==e&&(l[c]=e));return l};p.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===p.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=p.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,d;return!(!b||"[object Object]"!==Ub.call(b))&&(!(c=xb(b))||(d=eb.call(c,"constructor")&&
c.constructor,"function"==typeof d&&Vb.call(d)===Mc))},isEmptyObject:function(b){for(var c in b)return!1;return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?db[Ub.call(b)]||"object":typeof b},globalEval:function(b){d(b)},camelCase:function(b){return b.replace(Oc,"ms-").replace(Pc,Qc)},each:function(b,c){var d,f=0;if(e(b))for(d=b.length;f<d&&!1!==c.call(b[f],f,b[f]);f++);else for(f in b)if(!1===c.call(b[f],f,b[f]))break;return b},trim:function(b){return null==b?
"":(b+"").replace(Nc,"")},makeArray:function(b,c){var d=c||[];return null!=b&&(e(Object(b))?p.merge(d,"string"==typeof b?[b]:b):fa.call(d,b)),d},inArray:function(b,c,d){return null==c?-1:da.call(c,b,d)},merge:function(b,c){for(var d=+c.length,e=0,f=b.length;e<d;e++)b[f++]=c[e];return b.length=f,b},grep:function(b,c,d){for(var e=[],f=0,g=b.length,l=!d;f<g;f++)d=!c(b[f],f),d!==l&&e.push(b[f]);return e},map:function(b,c,d){var f,g,l=0,t=[];if(e(b))for(f=b.length;l<f;l++)g=c(b[l],l,d),null!=g&&t.push(g);
else for(l in b)g=c(b[l],l,d),null!=g&&t.push(g);return Qb.apply([],t)},guid:1,proxy:function(b,c){var d,e,f;if("string"==typeof c&&(d=b[c],c=b,b=d),p.isFunction(b))return e=Ea.call(arguments,2),f=function(){return b.apply(c||this,e.concat(Ea.call(arguments)))},f.guid=b.guid=b.guid||p.guid++,f},now:Date.now,support:Q});"function"==typeof Symbol&&(p.fn[Symbol.iterator]=P[Symbol.iterator]);p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,c){db["[object "+
c+"]"]=c.toLowerCase()});var xa,yb=b,N=function(b,c,d,e){var f,g,l,t,m,p=c&&c.ownerDocument,n=c?c.nodeType:9;if(d=d||[],"string"!=typeof b||!b||1!==n&&9!==n&&11!==n)return d;if(!e&&((c?c.ownerDocument||c:ka)!==L&&ya(c),c=c||L,la)){if(11!==n&&(t=Rc.exec(b)))if(f=t[1])if(9===n){if(!(g=c.getElementById(f)))return d;if(g.id===f)return d.push(g),d}else{if(p&&(g=p.getElementById(f))&&Sa(c,g)&&g.id===f)return d.push(g),d}else{if(t[2])return za.apply(d,c.getElementsByTagName(b)),d;if((f=t[3])&&S.getElementsByClassName&&
c.getElementsByClassName)return za.apply(d,c.getElementsByClassName(f)),d}if(S.qsa&&!fb[b+" "]&&(!Z||!Z.test(b))){if(1!==n)p=c,m=b;else if("object"!==c.nodeName.toLowerCase()){(l=c.getAttribute("id"))?l=l.replace(Wb,Xb):c.setAttribute("id",l=R);g=Ta(b);for(f=g.length;f--;)g[f]="#"+l+" "+gb(g[f]);m=g.join(",");p=zb.test(b)&&Ab(c.parentNode)||c}if(m)try{return za.apply(d,p.querySelectorAll(m)),d}catch(q){}finally{l===R&&c.removeAttribute("id")}}}return Yb(b.replace(hb,"$1"),c,d,e)},Bb=function(){function b(d,
e){return c.push(d+" ")>K.cacheLength&&delete b[c.shift()],b[d+" "]=e}var c=[];return b},oa=function(b){return b[R]=!0,b},qa=function(b){var c=L.createElement("fieldset");try{return!!b(c)}catch(d){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}},Cb=function(b,c){for(var d=b.split("|"),e=d.length;e--;)K.attrHandle[d[e]]=c},Zb=function(b,c){var d=c&&b,e=d&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(e)return e;if(d)for(;d=d.nextSibling;)if(d===c)return-1;return b?1:-1},
Sc=function(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}},Tc=function(b){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===b}},$b=function(b){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===b:c.disabled===b:c.isDisabled===b||c.isDisabled!==!b&&Uc(c)===b:c.disabled===b:"label"in c&&c.disabled===b}},Fa=function(b){return oa(function(c){return c=+c,oa(function(d,
e){for(var f,g=b([],d.length,c),l=g.length;l--;)d[f=g[l]]&&(d[f]=!(e[f]=d[f]))})})},Ab=function(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b},ac=function(){},gb=function(b){for(var c=0,d=b.length,e="";c<d;c++)e+=b[c].value;return e},ib=function(b,c,d){var e=c.dir,f=c.next,g=f||e,l=d&&"parentNode"===g,t=Vc++;return c.first?function(c,d,f){for(;c=c[e];)if(1===c.nodeType||l)return b(c,d,f);return!1}:function(c,d,M){var m,C,p,n=[ra,t];if(M)for(;c=c[e];){if((1===c.nodeType||l)&&b(c,d,M))return!0}else for(;c=
c[e];)if(1===c.nodeType||l)if(p=c[R]||(c[R]={}),C=p[c.uniqueID]||(p[c.uniqueID]={}),f&&f===c.nodeName.toLowerCase())c=c[e]||c;else{if((m=C[g])&&m[0]===ra&&m[1]===t)return n[2]=m[2];if(C[g]=n,n[2]=b(c,d,M))return!0}return!1}},Db=function(b){return 1<b.length?function(c,d,e){for(var f=b.length;f--;)if(!b[f](c,d,e))return!1;return!0}:b[0]},jb=function(b,c,d,e,f){for(var g,l=[],t=0,m=b.length,p=null!=c;t<m;t++)(g=b[t])&&(d&&!d(g,e,f)||(l.push(g),p&&c.push(t)));return l},Eb=function(b,c,d,e,f,g){return e&&
!e[R]&&(e=Eb(e)),f&&!f[R]&&(f=Eb(f,g)),oa(function(g,l,t,m){var p,n,q=[],u=[],z=l.length,r;if(!(r=g)){r=c||"*";for(var s=t.nodeType?[t]:t,Mb=[],B=0,v=s.length;B<v;B++)N(r,s[B],Mb);r=Mb}r=!b||!g&&c?r:jb(r,q,b,t,m);s=d?f||(g?b:z||e)?[]:l:r;if(d&&d(r,s,t,m),e){p=jb(s,u);e(p,[],t,m);for(t=p.length;t--;)(n=p[t])&&(s[u[t]]=!(r[u[t]]=n))}if(g){if(f||b){if(f){p=[];for(t=s.length;t--;)(n=s[t])&&p.push(r[t]=n);f(null,s=[],p,m)}for(t=s.length;t--;)(n=s[t])&&-1<(p=f?Ga(g,n):q[t])&&(g[p]=!(l[p]=n))}}else s=jb(s===
l?s.splice(z,s.length):s),f?f(null,l,s,m):za.apply(l,s)})},Fb=function(b){var c,d,e,f=b.length,g=K.relative[b[0].type];d=g||K.relative[" "];for(var l=g?1:0,t=ib(function(b){return b===c},d,!0),m=ib(function(b){return-1<Ga(c,b)},d,!0),p=[function(b,d,e){b=!g&&(e||d!==kb)||((c=d).nodeType?t(b,d,e):m(b,d,e));return c=null,b}];l<f;l++)if(d=K.relative[b[l].type])p=[ib(Db(p),d)];else{if(d=K.filter[b[l].type].apply(null,b[l].matches),d[R]){for(e=++l;e<f&&!K.relative[b[e].type];e++);return Eb(1<l&&Db(p),
1<l&&gb(b.slice(0,l-1).concat({value:" "===b[l-2].type?"*":""})).replace(hb,"$1"),d,l<e&&Fb(b.slice(l,e)),e<f&&Fb(b=b.slice(e)),e<f&&gb(b))}p.push(d)}return Db(p)},La,S,K,lb,bc,Ta,Gb,Yb,kb,Aa,Ma,ya,L,ma,la,Z,Ha,mb,Sa,R="sizzle"+1*new Date,ka=yb.document,ra=0,Vc=0,cc=Bb(),dc=Bb(),fb=Bb(),Hb=function(b,c){return b===c&&(Ma=!0),0},Wc={}.hasOwnProperty,Ia=[],Xc=Ia.pop,Yc=Ia.push,za=Ia.push,ec=Ia.slice,Ga=function(b,c){for(var d=0,e=b.length;d<e;d++)if(b[d]===c)return d;return-1},Zc=/[\x20\t\r\n\f]+/g,
hb=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,$c=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,ad=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,bd=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,cd=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
dd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,nb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},ed=/^(?:input|select|textarea|button)$/i,fd=/^h\d$/i,Ua=/^[^{]+\{\s*\[native \w/,Rc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,zb=/[+~]/,ta=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ua=function(b,c,d){b="0x"+c-65536;return b!==b||d?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},Wb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Xb=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},fc=function(){ya()},
Uc=ib(function(b){return!0===b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{za.apply(Ia=ec.call(ka.childNodes),ka.childNodes),Ia[ka.childNodes.length].nodeType}catch(Id){za={apply:Ia.length?function(b,c){Yc.apply(b,ec.call(c))}:function(b,c){for(var d=b.length,e=0;b[d++]=c[e++];);b.length=d-1}}}S=N.support={};bc=N.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};ya=N.setDocument=function(b){var c,d;b=b?b.ownerDocument||b:ka;
return b!==L&&9===b.nodeType&&b.documentElement?(L=b,ma=L.documentElement,la=!bc(L),ka!==L&&(d=L.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",fc,!1):d.attachEvent&&d.attachEvent("onunload",fc)),S.attributes=qa(function(b){return b.className="i",!b.getAttribute("className")}),S.getElementsByTagName=qa(function(b){return b.appendChild(L.createComment("")),!b.getElementsByTagName("*").length}),S.getElementsByClassName=Ua.test(L.getElementsByClassName),S.getById=qa(function(b){return ma.appendChild(b).id=
R,!L.getElementsByName||!L.getElementsByName(R).length}),S.getById?(K.filter.ID=function(b){var c=b.replace(ta,ua);return function(b){return b.getAttribute("id")===c}},K.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&la){var d=c.getElementById(b);return d?[d]:[]}}):(K.filter.ID=function(b){var c=b.replace(ta,ua);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}},K.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&
la){var d,e,f,g=c.getElementById(b);if(g){if(d=g.getAttributeNode("id"),d&&d.value===b)return[g];f=c.getElementsByName(b);for(e=0;g=f[e++];)if(d=g.getAttributeNode("id"),d&&d.value===b)return[g]}return[]}}),K.find.TAG=S.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):S.qsa?c.querySelectorAll(b):void 0}:function(b,c){var d,e=[],f=0,g=c.getElementsByTagName(b);if("*"===b){for(;d=g[f++];)1===d.nodeType&&e.push(d);return e}return g},K.find.CLASS=
S.getElementsByClassName&&function(b,c){if("undefined"!=typeof c.getElementsByClassName&&la)return c.getElementsByClassName(b)},Ha=[],Z=[],(S.qsa=Ua.test(L.querySelectorAll))&&(qa(function(b){ma.appendChild(b).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&Z.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||Z.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+R+"-]").length||Z.push("~=");b.querySelectorAll(":checked").length||Z.push(":checked");b.querySelectorAll("a#"+R+"+*").length||Z.push(".#.+[+~]")}),qa(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=L.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&Z.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
Z.push(":enabled",":disabled");ma.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&Z.push(":enabled",":disabled");b.querySelectorAll("*,:x");Z.push(",.*:")})),(S.matchesSelector=Ua.test(mb=ma.matches||ma.webkitMatchesSelector||ma.mozMatchesSelector||ma.oMatchesSelector||ma.msMatchesSelector))&&qa(function(b){S.disconnectedMatch=mb.call(b,"*");mb.call(b,"[s!='']:x");Ha.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
Z=Z.length&&RegExp(Z.join("|")),Ha=Ha.length&&RegExp(Ha.join("|")),c=Ua.test(ma.compareDocumentPosition),Sa=c||Ua.test(ma.contains)?function(b,c){var d=9===b.nodeType?b.documentElement:b,e=c&&c.parentNode;return b===e||!(!e||1!==e.nodeType||!(d.contains?d.contains(e):b.compareDocumentPosition&&16&b.compareDocumentPosition(e)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},Hb=c?function(b,c){if(b===c)return Ma=!0,0;var d=!b.compareDocumentPosition-!c.compareDocumentPosition;
return d?d:(d=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&d||!S.sortDetached&&c.compareDocumentPosition(b)===d?b===L||b.ownerDocument===ka&&Sa(ka,b)?-1:c===L||c.ownerDocument===ka&&Sa(ka,c)?1:Aa?Ga(Aa,b)-Ga(Aa,c):0:4&d?-1:1)}:function(b,c){if(b===c)return Ma=!0,0;var d,e=0;d=b.parentNode;var f=c.parentNode,g=[b],F=[c];if(!d||!f)return b===L?-1:c===L?1:d?-1:f?1:Aa?Ga(Aa,b)-Ga(Aa,c):0;if(d===f)return Zb(b,c);for(d=b;d=d.parentNode;)g.unshift(d);for(d=c;d=d.parentNode;)F.unshift(d);
for(;g[e]===F[e];)e++;return e?Zb(g[e],F[e]):g[e]===ka?-1:F[e]===ka?1:0},L):L};N.matches=function(b,c){return N(b,null,null,c)};N.matchesSelector=function(b,c){if((b.ownerDocument||b)!==L&&ya(b),c=c.replace(bd,"='$1']"),S.matchesSelector&&la&&!fb[c+" "]&&(!Ha||!Ha.test(c))&&(!Z||!Z.test(c)))try{var d=mb.call(b,c);if(d||S.disconnectedMatch||b.document&&11!==b.document.nodeType)return d}catch(e){}return 0<N(c,L,null,[b]).length};N.contains=function(b,c){return(b.ownerDocument||b)!==L&&ya(b),Sa(b,c)};
N.attr=function(b,c){(b.ownerDocument||b)!==L&&ya(b);var d=K.attrHandle[c.toLowerCase()],d=d&&Wc.call(K.attrHandle,c.toLowerCase())?d(b,c,!la):void 0;return void 0!==d?d:S.attributes||!la?b.getAttribute(c):(d=b.getAttributeNode(c))&&d.specified?d.value:null};N.escape=function(b){return(b+"").replace(Wb,Xb)};N.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};N.uniqueSort=function(b){var c,d=[],e=0,f=0;if(Ma=!S.detectDuplicates,Aa=!S.sortStable&&b.slice(0),b.sort(Hb),Ma){for(;c=
b[f++];)c===b[f]&&(e=d.push(f));for(;e--;)b.splice(d[e],1)}return Aa=null,b};lb=N.getText=function(b){var c,d="",e=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=lb(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[e++];)d+=lb(c);return d};K=N.selectors={cacheLength:50,createPseudo:oa,match:nb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(ta,ua),b[3]=(b[3]||b[4]||b[5]||"").replace(ta,ua),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||N.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&N.error(b[0]),b},PSEUDO:function(b){var c,d=!b[6]&&b[2];return nb.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":d&&cd.test(d)&&
(c=Ta(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(b[0]=b[0].slice(0,c),b[2]=d.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(ta,ua).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=cc[b+" "];return c||(c=RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))&&cc(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||
"")})},ATTR:function(b,c,d){return function(e){e=N.attr(e,b);return null==e?"!="===c:!c||(e+="","="===c?e===d:"!="===c?e!==d:"^="===c?d&&0===e.indexOf(d):"*="===c?d&&-1<e.indexOf(d):"$="===c?d&&e.slice(-d.length)===d:"~="===c?-1<(" "+e.replace(Zc," ")+" ").indexOf(d):"|="===c&&(e===d||e.slice(0,d.length+1)===d+"-"))}},CHILD:function(b,c,d,e,f){var g="nth"!==b.slice(0,3),l="last"!==b.slice(-4),t="of-type"===c;return 1===e&&0===f?function(b){return!!b.parentNode}:function(c,d,m){var M,p,n,C,q,u;d=g!==
l?"nextSibling":"previousSibling";var z=c.parentNode,r=t&&c.nodeName.toLowerCase();m=!m&&!t;var s=!1;if(z){if(g){for(;d;){for(C=c;C=C[d];)if(t?C.nodeName.toLowerCase()===r:1===C.nodeType)return!1;u=d="only"===b&&!u&&"nextSibling"}return!0}if(u=[l?z.firstChild:z.lastChild],l&&m){C=z;n=C[R]||(C[R]={});p=n[C.uniqueID]||(n[C.uniqueID]={});M=p[b]||[];s=(q=M[0]===ra&&M[1])&&M[2];for(C=q&&z.childNodes[q];C=++q&&C&&C[d]||(s=q=0)||u.pop();)if(1===C.nodeType&&++s&&C===c){p[b]=[ra,q,s];break}}else if(m&&(C=
c,n=C[R]||(C[R]={}),p=n[C.uniqueID]||(n[C.uniqueID]={}),M=p[b]||[],q=M[0]===ra&&M[1],s=q),!1===s)for(;(C=++q&&C&&C[d]||(s=q=0)||u.pop())&&(!(t?C.nodeName.toLowerCase()===r:1===C.nodeType)||!++s||!(m&&(n=C[R]||(C[R]={}),p=n[C.uniqueID]||(n[C.uniqueID]={}),p[b]=[ra,s]),C===c)););return s-=f,s===e||0===s%e&&0<=s/e}}},PSEUDO:function(b,c){var d,e=K.pseudos[b]||K.setFilters[b.toLowerCase()]||N.error("unsupported pseudo: "+b);return e[R]?e(c):1<e.length?(d=[b,b,"",c],K.setFilters.hasOwnProperty(b.toLowerCase())?
oa(function(b,d){for(var f,g=e(b,c),F=g.length;F--;)f=Ga(b,g[F]),b[f]=!(d[f]=g[F])}):function(b){return e(b,0,d)}):e}},pseudos:{not:oa(function(b){var c=[],d=[],e=Gb(b.replace(hb,"$1"));return e[R]?oa(function(b,c,d,f){var g;d=e(b,null,f,[]);for(f=b.length;f--;)(g=d[f])&&(b[f]=!(c[f]=g))}):function(b,f,g){return c[0]=b,e(c,null,g,d),c[0]=null,!d.pop()}}),has:oa(function(b){return function(c){return 0<N(b,c).length}}),contains:oa(function(b){return b=b.replace(ta,ua),function(c){return-1<(c.textContent||
c.innerText||lb(c)).indexOf(b)}}),lang:oa(function(b){return dd.test(b||"")||N.error("unsupported lang: "+b),b=b.replace(ta,ua).toLowerCase(),function(c){var d;do if(d=la?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(b){var c=yb.location&&yb.location.hash;return c&&c.slice(1)===b.id},root:function(b){return b===ma},focus:function(b){return b===L.activeElement&&(!L.hasFocus||
L.hasFocus())&&!(!b.type&&!b.href&&!~b.tabIndex)},enabled:$b(!1),disabled:$b(!0),checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!K.pseudos.empty(b)},header:function(b){return fd.test(b.nodeName)},input:function(b){return ed.test(b.nodeName)},
button:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:Fa(function(){return[0]}),last:Fa(function(b,c){return[c-1]}),eq:Fa(function(b,c,d){return[0>d?d+c:d]}),even:Fa(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:Fa(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:Fa(function(b,c,
d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:Fa(function(b,c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};K.pseudos.nth=K.pseudos.eq;for(La in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})K.pseudos[La]=Sc(La);for(La in{submit:!0,reset:!0})K.pseudos[La]=Tc(La);ac.prototype=K.filters=K.pseudos;K.setFilters=new ac;Ta=N.tokenize=function(b,c){var d,e,f,g,l,t,m;if(l=dc[b+" "])return c?0:l.slice(0);l=b;t=[];for(m=K.preFilter;l;){d&&!(e=$c.exec(l))||(e&&(l=l.slice(e[0].length)||l),t.push(f=
[]));d=!1;(e=ad.exec(l))&&(d=e.shift(),f.push({value:d,type:e[0].replace(hb," ")}),l=l.slice(d.length));for(g in K.filter)!(e=nb[g].exec(l))||m[g]&&!(e=m[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),l=l.slice(d.length));if(!d)break}return c?l.length:l?N.error(b):dc(b,t).slice(0)};xa=(Gb=N.compile=function(b,c){var d,e=[],f=[],g=fb[b+" "];if(!g){c||(c=Ta(b));for(d=c.length;d--;)g=Fb(c[d]),g[R]?e.push(g):f.push(g);d=fb;var l=0<e.length,t=0<f.length,g=function(b,c,d,g,F){var m,M,p,n=0,q="0",
C=b&&[],u=[],z=kb,r=b||t&&K.find.TAG("*",F),s=ra+=null==z?1:Math.random()||0.1,B=r.length;for(F&&(kb=c===L||c||F);q!==B&&null!=(m=r[q]);q++){if(t&&m){M=0;for(c||m.ownerDocument===L||(ya(m),d=!la);p=f[M++];)if(p(m,c||L,d)){g.push(m);break}F&&(ra=s)}l&&((m=!p&&m)&&n--,b&&C.push(m))}if(n+=q,l&&q!==n){for(M=0;p=e[M++];)p(C,u,c,d);if(b){if(0<n)for(;q--;)C[q]||u[q]||(u[q]=Xc.call(g));u=jb(u)}za.apply(g,u);F&&!b&&0<u.length&&1<n+e.length&&N.uniqueSort(g)}return F&&(ra=s,kb=z),C},g=l?oa(g):g,g=d(b,g);g.selector=
b}return g},Yb=N.select=function(b,c,d,e){var f,g,l,t,m,p="function"==typeof b&&b,n=!e&&Ta(b=p.selector||b);if(d=d||[],1===n.length){if(g=n[0]=n[0].slice(0),2<g.length&&"ID"===(l=g[0]).type&&9===c.nodeType&&la&&K.relative[g[1].type]){if(c=(K.find.ID(l.matches[0].replace(ta,ua),c)||[])[0],!c)return d;p&&(c=c.parentNode);b=b.slice(g.shift().value.length)}for(f=nb.needsContext.test(b)?0:g.length;f--&&!(l=g[f],K.relative[t=l.type]);)if((m=K.find[t])&&(e=m(l.matches[0].replace(ta,ua),zb.test(g[0].type)&&
Ab(c.parentNode)||c))){if(g.splice(f,1),b=e.length&&gb(g),!b)return za.apply(d,e),d;break}}return(p||Gb(b,n))(e,c,!la,d,!c||zb.test(b)&&Ab(c.parentNode)||c),d},S.sortStable=R.split("").sort(Hb).join("")===R,S.detectDuplicates=!!Ma,ya(),S.sortDetached=qa(function(b){return 1&b.compareDocumentPosition(L.createElement("fieldset"))}),qa(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||Cb("type|href|height|width",function(b,c,d){if(!d)return b.getAttribute(c,
"type"===c.toLowerCase()?1:2)}),S.attributes&&qa(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||Cb("value",function(b,c,d){if(!d&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),qa(function(b){return null==b.getAttribute("disabled")})||Cb("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,d){var e;if(!d)return!0===b[c]?c.toLowerCase():
(e=b.getAttributeNode(c))&&e.specified?e.value:null}),N);p.find=xa;p.expr=xa.selectors;p.expr[":"]=p.expr.pseudos;p.uniqueSort=p.unique=xa.uniqueSort;p.text=xa.getText;p.isXMLDoc=xa.isXML;p.contains=xa.contains;p.escapeSelector=xa.escape;var Na=function(b,c,d){for(var e=[],f=void 0!==d;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(f&&p(b).is(d))break;e.push(b)}return e},gc=function(b,c){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&d.push(b);return d},hc=p.expr.match.needsContext,ic=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Dc=/^.[^:#\[\.,]*$/;p.filter=function(b,c,d){var e=c[0];return d&&(b=":not("+b+")"),1===c.length&&1===e.nodeType?p.find.matchesSelector(e,b)?[e]:[]:p.find.matches(b,p.grep(c,function(b){return 1===b.nodeType}))};p.fn.extend({find:function(b){var c,d,e=this.length,f=this;if("string"!=typeof b)return this.pushStack(p(b).filter(function(){for(c=0;c<e;c++)if(p.contains(f[c],this))return!0}));d=this.pushStack([]);for(c=0;c<e;c++)p.find(b,f[c],d);return 1<e?p.uniqueSort(d):d},filter:function(b){return this.pushStack(g(this,
b||[],!1))},not:function(b){return this.pushStack(g(this,b||[],!0))},is:function(b){return!!g(this,"string"==typeof b&&hc.test(b)?p(b):b||[],!1).length}});var jc,gd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(p.fn.init=function(b,c,d){var e,f;if(!b)return this;if(d=d||jc,"string"==typeof b){if(e="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:gd.exec(b),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(b):this.constructor(c).find(b);if(e[1]){if(c=c instanceof p?c[0]:c,p.merge(this,p.parseHTML(e[1],
c&&c.nodeType?c.ownerDocument||c:G,!0)),ic.test(e[1])&&p.isPlainObject(c))for(e in c)p.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}return f=G.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):p.isFunction(b)?void 0!==d.ready?d.ready(b):b(p):p.makeArray(b,this)}).prototype=p.fn;jc=p(G);var hd=/^(?:parents|prev(?:Until|All))/,id={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(b){var c=p(b,this),d=c.length;
return this.filter(function(){for(var b=0;b<d;b++)if(p.contains(this,c[b]))return!0})},closest:function(b,c){var d,e=0,f=this.length,g=[],l="string"!=typeof b&&p(b);if(!hc.test(b))for(;e<f;e++)for(d=this[e];d&&d!==c;d=d.parentNode)if(11>d.nodeType&&(l?-1<l.index(d):1===d.nodeType&&p.find.matchesSelector(d,b))){g.push(d);break}return this.pushStack(1<g.length?p.uniqueSort(g):g)},index:function(b){return b?"string"==typeof b?da.call(p(b),this[0]):da.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});p.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Na(b,"parentNode")},parentsUntil:function(b,c,d){return Na(b,"parentNode",d)},next:function(b){return m(b,"nextSibling")},prev:function(b){return m(b,"previousSibling")},nextAll:function(b){return Na(b,
"nextSibling")},prevAll:function(b){return Na(b,"previousSibling")},nextUntil:function(b,c,d){return Na(b,"nextSibling",d)},prevUntil:function(b,c,d){return Na(b,"previousSibling",d)},siblings:function(b){return gc((b.parentNode||{}).firstChild,b)},children:function(b){return gc(b.firstChild)},contents:function(b){return f(b,"iframe")?b.contentDocument:(f(b,"template")&&(b=b.content||b),p.merge([],b.childNodes))}},function(b,c){p.fn[b]=function(d,e){var f=p.map(this,c,d);return"Until"!==b.slice(-5)&&
(e=d),e&&"string"==typeof e&&(f=p.filter(e,f)),1<this.length&&(id[b]||p.uniqueSort(f),hd.test(b)&&f.reverse()),this.pushStack(f)}});var ja=/[^\x20\t\r\n\f]+/g;p.Callbacks=function(b){var c;if("string"==typeof b){var d={};c=(p.each(b.match(ja)||[],function(b,c){d[c]=!0}),d)}else c=p.extend({},b);b=c;var e,f,g,l,t=[],m=[],n=-1,q=function(){l=l||b.once;for(g=e=!0;m.length;n=-1)for(f=m.shift();++n<t.length;)!1===t[n].apply(f[0],f[1])&&b.stopOnFalse&&(n=t.length,f=!1);b.memory||(f=!1);e=!1;l&&(t=f?[]:
"")},u={add:function(){return t&&(f&&!e&&(n=t.length-1,m.push(f)),function Jc(c){p.each(c,function(c,d){p.isFunction(d)?b.unique&&u.has(d)||t.push(d):d&&d.length&&"string"!==p.type(d)&&Jc(d)})}(arguments),f&&!e&&q()),this},remove:function(){return p.each(arguments,function(b,c){for(var d;-1<(d=p.inArray(c,t,d));)t.splice(d,1),d<=n&&n--}),this},has:function(b){return b?-1<p.inArray(b,t):0<t.length},empty:function(){return t&&(t=[]),this},disable:function(){return l=m=[],t=f="",this},disabled:function(){return!t},
lock:function(){return l=m=[],f||e||(t=f=""),this},locked:function(){return!!l},fireWith:function(b,c){return l||(c=c||[],c=[b,c.slice?c.slice():c],m.push(c),e||q()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!g}};return u};p.extend({Deferred:function(c){var d=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),
p.Callbacks("once memory"),1,"rejected"]],e="pending",f={state:function(){return e},always:function(){return g.done(arguments).fail(arguments),this},"catch":function(b){return f.then(null,b)},pipe:function(){var b=arguments;return p.Deferred(function(c){p.each(d,function(d,e){var f=p.isFunction(b[e[4]])&&b[e[4]];g[e[1]](function(){var b=f&&f.apply(this,arguments);b&&p.isFunction(b.promise)?b.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[e[0]+"With"](this,f?[b]:arguments)})});b=null}).promise()},
then:function(c,e,f){function g(c,d,e,f){return function(){var F=this,m=arguments,M=function(){var b,M;if(!(c<t)){if(b=e.apply(F,m),b===d.promise())throw new TypeError("Thenable self-resolution");M=b&&("object"==typeof b||"function"==typeof b)&&b.then;p.isFunction(M)?f?M.call(b,g(t,d,l,f),g(t,d,n,f)):(t++,M.call(b,g(t,d,l,f),g(t,d,n,f),g(t,d,l,d.notifyWith))):(e!==l&&(F=void 0,m=[b]),(f||d.resolveWith)(F,m))}},q=f?M:function(){try{M()}catch(b){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(b,
q.stackTrace),c+1>=t&&(e!==n&&(F=void 0,m=[b]),d.rejectWith(F,m))}};c?q():(p.Deferred.getStackHook&&(q.stackTrace=p.Deferred.getStackHook()),b.setTimeout(q))}}var t=0;return p.Deferred(function(b){d[0][3].add(g(0,b,p.isFunction(f)?f:l,b.notifyWith));d[1][3].add(g(0,b,p.isFunction(c)?c:l));d[2][3].add(g(0,b,p.isFunction(e)?e:n))}).promise()},promise:function(b){return null!=b?p.extend(b,f):f}},g={};return p.each(d,function(b,c){var l=c[2],t=c[5];f[c[1]]=l.add;t&&l.add(function(){e=t},d[3-b][2].disable,
d[0][2].lock);l.add(c[3].fire);g[c[0]]=function(){return g[c[0]+"With"](this===g?void 0:this,arguments),this};g[c[0]+"With"]=l.fireWith}),f.promise(g),c&&c.call(g,g),g},when:function(b){var c=arguments.length,d=c,e=Array(d),f=Ea.call(arguments),g=p.Deferred(),l=function(b){return function(d){e[b]=this;f[b]=1<arguments.length?Ea.call(arguments):d;--c||g.resolveWith(e,f)}};if(1>=c&&(r(b,g.done(l(d)).resolve,g.reject,!c),"pending"===g.state()||p.isFunction(f[d]&&f[d].then)))return g.then();for(;d--;)r(f[d],
l(d),g.reject);return g.promise()}});var jd=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(c,d){b.console&&b.console.warn&&c&&jd.test(c.name)&&b.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)};p.readyException=function(c){b.setTimeout(function(){throw c;})};var Ib=p.Deferred();p.fn.ready=function(b){return Ib.then(b)["catch"](function(b){p.readyException(b)}),this};p.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--p.readyWait:
p.isReady)||(p.isReady=!0,!0!==b&&0<--p.readyWait||Ib.resolveWith(G,[p]))}});p.ready.then=Ib.then;"complete"===G.readyState||"loading"!==G.readyState&&!G.documentElement.doScroll?b.setTimeout(p.ready):(G.addEventListener("DOMContentLoaded",q),b.addEventListener("load",q));var va=function(b,c,d,e,f,g,l){var t=0,m=b.length,n=null==d;if("object"===p.type(d))for(t in f=!0,d)va(b,c,t,d[t],!0,g,l);else if(void 0!==e&&(f=!0,p.isFunction(e)||(l=!0),n&&(l?(c.call(b,e),c=null):(n=c,c=function(b,c,d){return n.call(p(b),
d)})),c))for(;t<m;t++)c(b[t],d,l?e:e.call(b[t],t,c(b[t],d)));return f?b:n?c.call(b):m?c(b[0],d):g},ob=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};s.uid=1;s.prototype={cache:function(b){var c=b[this.expando];return c||(c={},ob(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,d){var e;b=this.cache(b);if("string"==typeof c)b[p.camelCase(c)]=d;else for(e in c)b[p.camelCase(e)]=c[e];return b},get:function(b,c){return void 0===
c?this.cache(b):b[this.expando]&&b[this.expando][p.camelCase(c)]},access:function(b,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(b,c):(this.set(b,c,d),void 0!==d?d:c)},remove:function(b,c){var d,e=b[this.expando];if(void 0!==e){if(void 0!==c){Array.isArray(c)?c=c.map(p.camelCase):(c=p.camelCase(c),c=c in e?[c]:c.match(ja)||[]);for(d=c.length;d--;)delete e[c[d]]}(void 0===c||p.isEmptyObject(e))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=
b[this.expando];return void 0!==b&&!p.isEmptyObject(b)}};var H=new s,ea=new s,Fc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ec=/[A-Z]/g;p.extend({hasData:function(b){return ea.hasData(b)||H.hasData(b)},data:function(b,c,d){return ea.access(b,c,d)},removeData:function(b,c){ea.remove(b,c)},_data:function(b,c,d){return H.access(b,c,d)},_removeData:function(b,c){H.remove(b,c)}});p.fn.extend({data:function(b,c){var d,e,f,g=this[0],l=g&&g.attributes;if(void 0===b){if(this.length&&(f=ea.get(g),1===g.nodeType&&!H.get(g,
"hasDataAttrs"))){for(d=l.length;d--;)l[d]&&(e=l[d].name,0===e.indexOf("data-")&&(e=p.camelCase(e.slice(5)),v(g,e,f[e])));H.set(g,"hasDataAttrs",!0)}return f}return"object"==typeof b?this.each(function(){ea.set(this,b)}):va(this,function(c){var d;if(g&&void 0===c){if((d=ea.get(g,b),void 0!==d)||(d=v(g,b),void 0!==d))return d}else this.each(function(){ea.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){ea.remove(this,b)})}});p.extend({queue:function(b,
c,d){var e;if(b)return c=(c||"fx")+"queue",e=H.get(b,c),d&&(!e||Array.isArray(d)?e=H.access(b,c,p.makeArray(d)):e.push(d)),e||[]},dequeue:function(b,c){c=c||"fx";var d=p.queue(b,c),e=d.length,f=d.shift(),g=p._queueHooks(b,c),l=function(){p.dequeue(b,c)};"inprogress"===f&&(f=d.shift(),e--);f&&("fx"===c&&d.unshift("inprogress"),delete g.stop,f.call(b,l,g));!e&&g&&g.empty.fire()},_queueHooks:function(b,c){var d=c+"queueHooks";return H.get(b,d)||H.access(b,d,{empty:p.Callbacks("once memory").add(function(){H.remove(b,
[c+"queue",d])})})}});p.fn.extend({queue:function(b,c){var d=2;return"string"!=typeof b&&(c=b,b="fx",d--),arguments.length<d?p.queue(this[0],b):void 0===c?this:this.each(function(){var d=p.queue(this,b,c);p._queueHooks(this,b);"fx"===b&&"inprogress"!==d[0]&&p.dequeue(this,b)})},dequeue:function(b){return this.each(function(){p.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var d,e=1,f=p.Deferred(),g=this,l=this.length,t=function(){--e||f.resolveWith(g,
[g])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";l--;)(d=H.get(g[l],b+"queueHooks"))&&d.empty&&(e++,d.empty.add(t));return t(),f.promise(c)}});var kc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pa=RegExp("^(?:([+-])=|)("+kc+")([a-z%]*)$","i"),Ba=["Top","Right","Bottom","Left"],Ya=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&p.contains(b.ownerDocument,b)&&"none"===p.css(b,"display")},lc=function(b,c,d,e){var f,g={};for(f in c)g[f]=b.style[f],b.style[f]=c[f];d=
d.apply(b,e||[]);for(f in c)b.style[f]=g[f];return d},Nb={};p.fn.extend({show:function(){return t(this,!0)},hide:function(){return t(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){Ya(this)?p(this).show():p(this).hide()})}});var mc=/^(?:checkbox|radio)$/i,Ob=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Pb=/^$|\/(?:java|ecma)script/i,ga={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ga.optgroup=ga.option;ga.tbody=ga.tfoot=ga.colgroup=ga.caption=ga.thead;ga.th=ga.td;var Gc=/<|&#?\w+;/,pb=G.createDocumentFragment().appendChild(G.createElement("div")),qb=G.createElement("input");qb.setAttribute("type","radio");qb.setAttribute("checked","checked");qb.setAttribute("name","t");pb.appendChild(qb);Q.checkClone=pb.cloneNode(!0).cloneNode(!0).lastChild.checked;pb.innerHTML=
"<textarea>x</textarea>";Q.noCloneChecked=!!pb.cloneNode(!0).lastChild.defaultValue;!0;var rb=G.documentElement,kd=/^key/,ld=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nc=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(b,c,d,e,f){var g,l,t,m,n,q,u,z,r,s;if(n=H.get(b)){d.handler&&(g=d,d=g.handler,f=g.selector);f&&p.find.matchesSelector(rb,f);d.guid||(d.guid=p.guid++);(m=n.events)||(m=n.events={});(l=n.handle)||(l=n.handle=function(c){return"undefined"!=typeof p&&p.event.triggered!==c.type?
p.event.dispatch.apply(b,arguments):void 0});c=(c||"").match(ja)||[""];for(n=c.length;n--;)t=nc.exec(c[n])||[],r=s=t[1],t=(t[2]||"").split(".").sort(),r&&(u=p.event.special[r]||{},r=(f?u.delegateType:u.bindType)||r,u=p.event.special[r]||{},q=p.extend({type:r,origType:s,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&p.expr.match.needsContext.test(f),namespace:t.join(".")},g),(z=m[r])||(z=m[r]=[],z.delegateCount=0,u.setup&&!1!==u.setup.call(b,e,t,l)||b.addEventListener&&b.addEventListener(r,
l)),u.add&&(u.add.call(b,q),q.handler.guid||(q.handler.guid=d.guid)),f?z.splice(z.delegateCount++,0,q):z.push(q),p.event.global[r]=!0)}},remove:function(b,c,d,e,f){var g,l,t,m,n,q,u,z,r,s,B,v=H.hasData(b)&&H.get(b);if(v&&(m=v.events)){c=(c||"").match(ja)||[""];for(n=c.length;n--;)if(t=nc.exec(c[n])||[],r=B=t[1],s=(t[2]||"").split(".").sort(),r){u=p.event.special[r]||{};r=(e?u.delegateType:u.bindType)||r;z=m[r]||[];t=t[2]&&RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)");for(l=g=z.length;g--;)q=
z[g],!f&&B!==q.origType||d&&d.guid!==q.guid||t&&!t.test(q.namespace)||e&&e!==q.selector&&("**"!==e||!q.selector)||(z.splice(g,1),q.selector&&z.delegateCount--,u.remove&&u.remove.call(b,q));l&&!z.length&&(u.teardown&&!1!==u.teardown.call(b,s,v.handle)||p.removeEvent(b,r,v.handle),delete m[r])}else for(r in m)p.event.remove(b,r+c[n],d,e,!0);p.isEmptyObject(m)&&H.remove(b,"handle events")}},dispatch:function(b){var c=p.event.fix(b),d,e,f,g,l,t,m=Array(arguments.length);e=(H.get(this,"events")||{})[c.type]||
[];var n=p.event.special[c.type]||{};m[0]=c;for(d=1;d<arguments.length;d++)m[d]=arguments[d];if(c.delegateTarget=this,!n.preDispatch||!1!==n.preDispatch.call(this,c)){t=p.event.handlers.call(this,c,e);for(d=0;(g=t[d++])&&!c.isPropagationStopped();){c.currentTarget=g.elem;for(e=0;(l=g.handlers[e++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(l.namespace)||(c.handleObj=l,c.data=l.data,f=((p.event.special[l.origType]||{}).handle||l.handler).apply(g.elem,m),void 0!==f&&!1===
(c.result=f)&&(c.preventDefault(),c.stopPropagation()))}return n.postDispatch&&n.postDispatch.call(this,c),c.result}},handlers:function(b,c){var d,e,f,g,l,t=[],m=c.delegateCount,n=b.target;if(m&&n.nodeType&&!("click"===b.type&&1<=b.button))for(;n!==this;n=n.parentNode||this)if(1===n.nodeType&&("click"!==b.type||!0!==n.disabled)){g=[];l={};for(d=0;d<m;d++)e=c[d],f=e.selector+" ",void 0===l[f]&&(l[f]=e.needsContext?-1<p(f,this).index(n):p.find(f,this,null,[n]).length),l[f]&&g.push(e);g.length&&t.push({elem:n,
handlers:g})}return n=this,m<c.length&&t.push({elem:n,handlers:c.slice(m)}),t},addProp:function(b,c){Object.defineProperty(p.Event.prototype,b,{enumerable:!0,configurable:!0,get:p.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[p.expando]?b:new p.Event(b)},special:{load:{noBubble:!0},
focus:{trigger:function(){if(this!==ca()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ca()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&f(this,"input"))return this.click(),!1},_default:function(b){return f(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};p.removeEvent=function(b,c,d){b.removeEventListener&&
b.removeEventListener(c,d)};p.Event=function(b,c){return this instanceof p.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?sa:W,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&p.extend(this,c),this.timeStamp=b&&b.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(b,c)};p.Event.prototype=
{constructor:p.Event,isDefaultPrevented:W,isPropagationStopped:W,isImmediatePropagationStopped:W,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=sa;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=sa;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=sa;b&&!this.isSimulated&&b.stopImmediatePropagation();
this.stopPropagation()}};p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&kd.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&ld.test(b.type)?
1&c?1:2&c?3:4&c?2:0:b.which}},p.event.addProp);p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){p.event.special[b]={delegateType:c,bindType:c,handle:function(b){var d,e=b.relatedTarget,f=b.handleObj;return e&&(e===this||p.contains(this,e))||(b.type=f.origType,d=f.handler.apply(this,arguments),b.type=c),d}}});p.fn.extend({on:function(b,c,d,e){return T(this,b,c,d,e)},one:function(b,c,d,e){return T(this,b,c,d,e,1)},off:function(b,
c,d){var e,f;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,p(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(f in b)this.off(f,c,b[f]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=void 0),!1===d&&(d=W),this.each(function(){p.event.remove(this,b,d,c)})}});var md=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,nd=/<script|<style|<link/i,Ic=/checked\s*(?:[^=]|=\s*.checked.)/i,
Hc=/^true\/(.*)/,Kc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;p.extend({htmlPrefilter:function(b){return b.replace(md,"<$1></$2>")},clone:function(b,c,d){var e,f,g,l,t=b.cloneNode(!0),m=p.contains(b.ownerDocument,b);if(!Q.noCloneChecked&&!(1!==b.nodeType&&11!==b.nodeType||p.isXMLDoc(b))){l=z(t);g=z(b);e=0;for(f=g.length;e<f;e++){var n=g[e],q=l[e],u=q.nodeName.toLowerCase();"input"===u&&mc.test(n.type)?q.checked=n.checked:"input"!==u&&"textarea"!==u||(q.defaultValue=n.defaultValue)}}if(c)if(d){g=
g||z(b);l=l||z(t);e=0;for(f=g.length;e<f;e++)U(g[e],l[e])}else U(b,t);return l=z(t,"script"),0<l.length&&B(l,!m&&z(b,"script")),t},cleanData:function(b){for(var c,d,e,f=p.event.special,g=0;void 0!==(d=b[g]);g++)if(ob(d)){if(c=d[H.expando]){if(c.events)for(e in c.events)f[e]?p.event.remove(d,e):p.removeEvent(d,e,c.handle);d[H.expando]=void 0}d[ea.expando]&&(d[ea.expando]=void 0)}}});p.fn.extend({detach:function(b){return ub(this,b,!0)},remove:function(b){return ub(this,b)},text:function(b){return va(this,
function(b){return void 0===b?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return X(this,arguments,function(b){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&D(this,b).appendChild(b)})},prepend:function(){return X(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=D(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return X(this,
arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return X(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===b.nodeType&&(p.cleanData(z(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return p.clone(this,b,c)})},html:function(b){return va(this,function(b){var c=this[0]||{},d=0,e=this.length;
if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!nd.test(b)&&!ga[(Ob.exec(b)||["",""])[1].toLowerCase()]){b=p.htmlPrefilter(b);try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(p.cleanData(z(c,!1)),c.innerHTML=b);c=0}catch(f){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return X(this,arguments,function(c){var d=this.parentNode;0>p.inArray(this,b)&&(p.cleanData(z(this)),d&&d.replaceChild(c,this))},b)}});p.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){p.fn[b]=function(b){for(var d=[],e=p(b),f=e.length-1,g=0;g<=f;g++)b=g===f?this:this.clone(!0),p(e[g])[c](b),fa.apply(d,b.get());return this.pushStack(d)}});var Rb=/^margin/,vb=RegExp("^("+kc+")(?!px)[a-z%]+$","i"),Za=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=b),d.getComputedStyle(c)},tb=function(){if(pa){pa.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
pa.innerHTML="";rb.appendChild(sb);var c=b.getComputedStyle(pa);oc="1%"!==c.top;pc="2px"===c.marginLeft;qc="4px"===c.width;pa.style.marginRight="50%";rc="4px"===c.marginRight;rb.removeChild(sb);pa=null}},oc,qc,rc,pc,sb=G.createElement("div"),pa=G.createElement("div");pa.style&&(pa.style.backgroundClip="content-box",pa.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===pa.style.backgroundClip,sb.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
sb.appendChild(pa),p.extend(Q,{pixelPosition:function(){return tb(),oc},boxSizingReliable:function(){return tb(),qc},pixelMarginRight:function(){return tb(),rc},reliableMarginLeft:function(){return tb(),pc}}));!0;var od=/^(none|table(?!-c[ea]).+)/,sc=/^--/,pd={position:"absolute",visibility:"hidden",display:"block"},tc={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","Moz","ms"],Sb=G.createElement("div").style;p.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=na(b,"opacity");return""===
d?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,d,e){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var f,g,l,t=p.camelCase(c),m=sc.test(c),n=b.style;return m||(c=$a(t)),l=p.cssHooks[c]||p.cssHooks[t],void 0===d?l&&"get"in l&&void 0!==(f=l.get(b,!1,e))?f:n[c]:(g=typeof d,"string"===g&&(f=Pa.exec(d))&&f[1]&&
(d=u(b,c,f),g="number"),null!=d&&d===d&&("number"===g&&(d+=f&&f[3]||(p.cssNumber[t]?"":"px")),Q.clearCloneStyle||""!==d||0!==c.indexOf("background")||(n[c]="inherit"),l&&"set"in l&&void 0===(d=l.set(b,d,e))||(m?n.setProperty(c,d):n[c]=d)),void 0)}},css:function(b,c,d,e){var f,g,l,t=p.camelCase(c);return sc.test(c)||(c=$a(t)),l=p.cssHooks[c]||p.cssHooks[t],l&&"get"in l&&(f=l.get(b,!0,d)),void 0===f&&(f=na(b,c,e)),"normal"===f&&c in tc&&(f=tc[c]),""===d||d?(g=parseFloat(f),!0===d||isFinite(g)?g||0:
f):f}});p.each(["height","width"],function(b,c){p.cssHooks[c]={get:function(b,d,e){if(d)return!od.test(p.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?ia(b,c,e):lc(b,pd,function(){return ia(b,c,e)})},set:function(b,d,e){var f,g=e&&Za(b);e=e&&ab(b,c,e,"border-box"===p.css(b,"boxSizing",!1,g),g);return e&&(f=Pa.exec(d))&&"px"!==(f[3]||"px")&&(b.style[c]=d,d=p.css(b,c)),wa(b,d,e)}}});p.cssHooks.marginLeft=ha(Q.reliableMarginLeft,function(b,c){if(c)return(parseFloat(na(b,
"marginLeft"))||b.getBoundingClientRect().left-lc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});p.each({margin:"",padding:"",border:"Width"},function(b,c){p.cssHooks[b+c]={expand:function(d){var e=0,f={};for(d="string"==typeof d?d.split(" "):[d];4>e;e++)f[b+Ba[e]+c]=d[e]||d[e-2]||d[0];return f}};Rb.test(b)||(p.cssHooks[b+c].set=wa)});p.fn.extend({css:function(b,c){return va(this,function(b,c,d){var e,f={},g=0;if(Array.isArray(c)){d=Za(b);for(e=c.length;g<e;g++)f[c[g]]=
p.css(b,c[g],!1,d);return f}return void 0!==d?p.style(b,c,d):p.css(b,c)},b,c,1<arguments.length)}});p.Tween=Y;Y.prototype={constructor:Y,init:function(b,c,d,e,f,g){this.elem=b;this.prop=d;this.easing=f||p.easing._default;this.options=c;this.start=this.now=this.cur();this.end=e;this.unit=g||(p.cssNumber[d]?"":"px")},cur:function(){var b=Y.propHooks[this.prop];return b&&b.get?b.get(this):Y.propHooks._default.get(this)},run:function(b){var c,d=Y.propHooks[this.prop];return this.options.duration?this.pos=
c=p.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=c=b,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):Y.propHooks._default.set(this),this}};Y.prototype.init.prototype=Y.prototype;Y.propHooks={_default:{get:function(b){var c;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(c=p.css(b.elem,b.prop,""),c&&"auto"!==c?c:0)},set:function(b){p.fx.step[b.prop]?
p.fx.step[b.prop](b):1!==b.elem.nodeType||null==b.elem.style[p.cssProps[b.prop]]&&!p.cssHooks[b.prop]?b.elem[b.prop]=b.now:p.style(b.elem,b.prop,b.now+b.unit)}}};Y.propHooks.scrollTop=Y.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};p.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2},_default:"swing"};p.fx=Y.prototype.init;p.fx.step={};var Ja,bb,qd=/^(?:toggle|show|hide)$/,rd=/queueHooks$/;p.Animation=p.extend(aa,
{tweeners:{"*":[function(b,c){var d=this.createTween(b,c);return u(d.elem,b,Pa.exec(c),d),d}]},tweener:function(b,c){p.isFunction(b)?(c=b,b=["*"]):b=b.match(ja);for(var d,e=0,f=b.length;e<f;e++)d=b[e],aa.tweeners[d]=aa.tweeners[d]||[],aa.tweeners[d].unshift(c)},prefilters:[function(b,c,d){var e,f,g,l,m,n,q,u,z="width"in c||"height"in c,r=this,s={},B=b.style,v=b.nodeType&&Ya(b),E=H.get(b,"fxshow");d.queue||(l=p._queueHooks(b,"fx"),null==l.unqueued&&(l.unqueued=0,m=l.empty.fire,l.empty.fire=function(){l.unqueued||
m()}),l.unqueued++,r.always(function(){r.always(function(){l.unqueued--;p.queue(b,"fx").length||l.empty.fire()})}));for(e in c)if(f=c[e],qd.test(f)){if(delete c[e],g=g||"toggle"===f,f===(v?"hide":"show")){if("show"!==f||!E||void 0===E[e])continue;v=!0}s[e]=E&&E[e]||p.style(b,e)}if(n=!p.isEmptyObject(c),n||!p.isEmptyObject(s))for(e in z&&1===b.nodeType&&(d.overflow=[B.overflow,B.overflowX,B.overflowY],q=E&&E.display,null==q&&(q=H.get(b,"display")),u=p.css(b,"display"),"none"===u&&(q?u=q:(t([b],!0),
q=b.style.display||q,u=p.css(b,"display"),t([b]))),("inline"===u||"inline-block"===u&&null!=q)&&"none"===p.css(b,"float")&&(n||(r.done(function(){B.display=q}),null==q&&(u=B.display,q="none"===u?"":u)),B.display="inline-block")),d.overflow&&(B.overflow="hidden",r.always(function(){B.overflow=d.overflow[0];B.overflowX=d.overflow[1];B.overflowY=d.overflow[2]})),n=!1,s)n||(E?"hidden"in E&&(v=E.hidden):E=H.access(b,"fxshow",{display:q}),g&&(E.hidden=!v),v&&t([b],!0),r.done(function(){v||t([b]);H.remove(b,
"fxshow");for(e in s)p.style(b,e,s[e])})),n=A(v?E[e]:0,e,r),e in E||(E[e]=n.start,v&&(n.end=n.start,n.start=0))}],prefilter:function(b,c){c?aa.prefilters.unshift(b):aa.prefilters.push(b)}});p.speed=function(b,c,d){var e=b&&"object"==typeof b?p.extend({},b):{complete:d||!d&&c||p.isFunction(b)&&b,duration:b,easing:d&&c||c&&!p.isFunction(c)&&c};return p.fx.off?e.duration=0:"number"!=typeof e.duration&&(e.duration in p.fx.speeds?e.duration=p.fx.speeds[e.duration]:e.duration=p.fx.speeds._default),null!=
e.queue&&!0!==e.queue||(e.queue="fx"),e.old=e.complete,e.complete=function(){p.isFunction(e.old)&&e.old.call(this);e.queue&&p.dequeue(this,e.queue)},e};p.fn.extend({fadeTo:function(b,c,d,e){return this.filter(Ya).css("opacity",0).show().end().animate({opacity:c},b,d,e)},animate:function(b,c,d,e){var f=p.isEmptyObject(b),g=p.speed(c,d,e);c=function(){var c=aa(this,p.extend({},b),g);(f||H.get(this,"finish"))&&c.stop(!0)};return c.finish=c,f||!1===g.queue?this.each(c):this.queue(g.queue,c)},stop:function(b,
c,d){var e=function(b){var c=b.stop;delete b.stop;c(d)};return"string"!=typeof b&&(d=c,c=b,b=void 0),c&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var c=!0,f=null!=b&&b+"queueHooks",g=p.timers,l=H.get(this);if(f)l[f]&&l[f].stop&&e(l[f]);else for(f in l)l[f]&&l[f].stop&&rd.test(f)&&e(l[f]);for(f=g.length;f--;)g[f].elem!==this||null!=b&&g[f].queue!==b||(g[f].anim.stop(d),c=!1,g.splice(f,1));!c&&d||p.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var c,
d=H.get(this),e=d[b+"queue"];c=d[b+"queueHooks"];var f=p.timers,g=e?e.length:0;d.finish=!0;p.queue(this,b,[]);c&&c.stop&&c.stop.call(this,!0);for(c=f.length;c--;)f[c].elem===this&&f[c].queue===b&&(f[c].anim.stop(!0),f.splice(c,1));for(c=0;c<g;c++)e[c]&&e[c].finish&&e[c].finish.call(this);delete d.finish})}});p.each(["toggle","show","hide"],function(b,c){var d=p.fn[c];p.fn[c]=function(b,e,f){return null==b||"boolean"==typeof b?d.apply(this,arguments):this.animate(Ka(c,!0),b,e,f)}});p.each({slideDown:Ka("show"),
slideUp:Ka("hide"),slideToggle:Ka("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){p.fn[b]=function(b,d,e){return this.animate(c,b,d,e)}});p.timers=[];p.fx.tick=function(){var b,c=0,d=p.timers;for(Ja=p.now();c<d.length;c++)b=d[c],b()||d[c]!==b||d.splice(c--,1);d.length||p.fx.stop();Ja=void 0};p.fx.timer=function(b){p.timers.push(b);p.fx.start()};p.fx.interval=13;p.fx.start=function(){bb||(bb=!0,Ca())};p.fx.stop=function(){bb=null};p.fx.speeds=
{slow:600,fast:200,_default:400};p.fn.delay=function(c,d){return c=p.fx?p.fx.speeds[c]||c:c,d=d||"fx",this.queue(d,function(d,e){var f=b.setTimeout(d,c);e.stop=function(){b.clearTimeout(f)}})};var Oa=G.createElement("input"),sd=G.createElement("select").appendChild(G.createElement("option"));Oa.type="checkbox";Q.checkOn=""!==Oa.value;Q.optSelected=sd.selected;Oa=G.createElement("input");Oa.value="t";Oa.type="radio";Q.radioValue="t"===Oa.value;var uc,Va=p.expr.attrHandle;p.fn.extend({attr:function(b,
c){return va(this,p.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){p.removeAttr(this,b)})}});p.extend({attr:function(b,c,d){var e,f,g=b.nodeType;if(3!==g&&8!==g&&2!==g)return"undefined"==typeof b.getAttribute?p.prop(b,c,d):(1===g&&p.isXMLDoc(b)||(f=p.attrHooks[c.toLowerCase()]||(p.expr.match.bool.test(c)?uc:void 0)),void 0!==d?null===d?void p.removeAttr(b,c):f&&"set"in f&&void 0!==(e=f.set(b,d,c))?e:(b.setAttribute(c,d+""),d):f&&"get"in f&&null!==(e=f.get(b,c))?e:
(e=p.find.attr(b,c),null==e?void 0:e))},attrHooks:{type:{set:function(b,c){if(!Q.radioValue&&"radio"===c&&f(b,"input")){var d=b.value;return b.setAttribute("type",c),d&&(b.value=d),c}}}},removeAttr:function(b,c){var d,e=0,f=c&&c.match(ja);if(f&&1===b.nodeType)for(;d=f[e++];)b.removeAttribute(d)}});uc={set:function(b,c,d){return!1===c?p.removeAttr(b,d):b.setAttribute(d,d),d}};p.each(p.expr.match.bool.source.match(/\w+/g),function(b,c){var d=Va[c]||p.find.attr;Va[c]=function(b,c,e){var f,g,l=c.toLowerCase();
return e||(g=Va[l],Va[l]=f,f=null!=d(b,c,e)?l:null,Va[l]=g),f}});var td=/^(?:input|select|textarea|button)$/i,ud=/^(?:a|area)$/i;p.fn.extend({prop:function(b,c){return va(this,p.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[p.propFix[b]||b]})}});p.extend({prop:function(b,c,d){var e,f,g=b.nodeType;if(3!==g&&8!==g&&2!==g)return 1===g&&p.isXMLDoc(b)||(c=p.propFix[c]||c,f=p.propHooks[c]),void 0!==d?f&&"set"in f&&void 0!==(e=f.set(b,d,c))?e:b[c]=d:f&&"get"in
f&&null!==(e=f.get(b,c))?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=p.find.attr(b,"tabindex");return c?parseInt(c,10):td.test(b.nodeName)||ud.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});Q.optSelected||(p.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){p.propFix[this.toLowerCase()]=this});p.fn.extend({addClass:function(b){var c,d,e,f,g,l,t=0;if(p.isFunction(b))return this.each(function(c){p(this).addClass(b.call(this,c,ba(this)))});if("string"==typeof b&&b)for(c=b.match(ja)||[];d=this[t++];)if(f=ba(d),e=1===d.nodeType&&" "+O(f)+" "){for(l=0;g=c[l++];)0>e.indexOf(" "+g+" ")&&(e+=g+" ");e=O(e);f!==e&&d.setAttribute("class",e)}return this},removeClass:function(b){var c,d,e,f,g,l,t=0;if(p.isFunction(b))return this.each(function(c){p(this).removeClass(b.call(this,
c,ba(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(ja)||[];d=this[t++];)if(f=ba(d),e=1===d.nodeType&&" "+O(f)+" "){for(l=0;g=c[l++];)for(;-1<e.indexOf(" "+g+" ");)e=e.replace(" "+g+" "," ");e=O(e);f!==e&&d.setAttribute("class",e)}return this},toggleClass:function(b,c){var d=typeof b;return"boolean"==typeof c&&"string"===d?c?this.addClass(b):this.removeClass(b):p.isFunction(b)?this.each(function(d){p(this).toggleClass(b.call(this,d,ba(this),c),c)}):
this.each(function(){var c,e,f,g;if("string"===d){e=0;f=p(this);for(g=b.match(ja)||[];c=g[e++];)f.hasClass(c)?f.removeClass(c):f.addClass(c)}else void 0!==b&&"boolean"!==d||(c=ba(this),c&&H.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":H.get(this,"__className__")||""))})},hasClass:function(b){var c,d=0;for(b=" "+b+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+O(ba(c))+" ").indexOf(b))return!0;return!1}});var vd=/\r/g;p.fn.extend({val:function(b){var c,d,e,f=this[0];
if(arguments.length)return e=p.isFunction(b),this.each(function(d){var f;1===this.nodeType&&(f=e?b.call(this,d,p(this).val()):b,null==f?f="":"number"==typeof f?f+="":Array.isArray(f)&&(f=p.map(f,function(b){return null==b?"":b+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,f,"value")||(this.value=f))});if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&void 0!==(d=c.get(f,"value"))?d:(d=f.value,"string"==typeof d?
d.replace(vd,""):null==d?"":d)}});p.extend({valHooks:{option:{get:function(b){var c=p.find.attr(b,"value");return null!=c?c:O(p.text(b))}},select:{get:function(b){var c,d,e=b.options,g=b.selectedIndex,l="select-one"===b.type,t=l?null:[],m=l?g+1:e.length;for(d=0>g?m:l?g:0;d<m;d++)if(c=e[d],(c.selected||d===g)&&!c.disabled&&(!c.parentNode.disabled||!f(c.parentNode,"optgroup"))){if(b=p(c).val(),l)return b;t.push(b)}return t},set:function(b,c){for(var d,e,f=b.options,g=p.makeArray(c),l=f.length;l--;)e=
f[l],(e.selected=-1<p.inArray(p.valHooks.option.get(e),g))&&(d=!0);return d||(b.selectedIndex=-1),g}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(b,c){if(Array.isArray(c))return b.checked=-1<p.inArray(p(b).val(),c)}};Q.checkOn||(p.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var vc=/^(?:focusinfocus|focusoutblur)$/;p.extend(p.event,{trigger:function(c,d,e,f){var g,l,t,m,n,q,u,z=[e||G],r=eb.call(c,"type")?c.type:c;g=eb.call(c,"namespace")?
c.namespace.split("."):[];if(l=t=e=e||G,3!==e.nodeType&&8!==e.nodeType&&!vc.test(r+p.event.triggered)&&(-1<r.indexOf(".")&&(g=r.split("."),r=g.shift(),g.sort()),n=0>r.indexOf(":")&&"on"+r,c=c[p.expando]?c:new p.Event(r,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=g.join("."),c.rnamespace=c.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=e),d=null==d?[c]:p.makeArray(d,[c]),u=p.event.special[r]||{},f||!u.trigger||!1!==u.trigger.apply(e,
d))){if(!f&&!u.noBubble&&!p.isWindow(e)){m=u.delegateType||r;for(vc.test(m+r)||(l=l.parentNode);l;l=l.parentNode)z.push(l),t=l;t===(e.ownerDocument||G)&&z.push(t.defaultView||t.parentWindow||b)}for(g=0;(l=z[g++])&&!c.isPropagationStopped();)c.type=1<g?m:u.bindType||r,(q=(H.get(l,"events")||{})[c.type]&&H.get(l,"handle"))&&q.apply(l,d),(q=n&&l[n])&&q.apply&&ob(l)&&(c.result=q.apply(l,d),!1===c.result&&c.preventDefault());return c.type=r,f||c.isDefaultPrevented()||u._default&&!1!==u._default.apply(z.pop(),
d)||!ob(e)||n&&p.isFunction(e[r])&&!p.isWindow(e)&&(t=e[n],t&&(e[n]=null),p.event.triggered=r,e[r](),p.event.triggered=void 0,t&&(e[n]=t)),c.result}},simulate:function(b,c,d){b=p.extend(new p.Event,d,{type:b,isSimulated:!0});p.event.trigger(b,null,c)}});p.fn.extend({trigger:function(b,c){return this.each(function(){p.event.trigger(b,c,this)})},triggerHandler:function(b,c){var d=this[0];if(d)return p.event.trigger(b,c,d,!0)}});p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(b,c){p.fn[c]=function(b,d){return 0<arguments.length?this.on(c,null,b,d):this.trigger(c)}});p.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});Q.focusin="onfocusin"in b;Q.focusin||p.each({focus:"focusin",blur:"focusout"},function(b,c){var d=function(b){p.event.simulate(c,b.target,p.event.fix(b))};p.event.special[c]={setup:function(){var e=this.ownerDocument||this,f=H.access(e,c);f||e.addEventListener(b,d,!0);H.access(e,c,(f||0)+1)},teardown:function(){var e=this.ownerDocument||
this,f=H.access(e,c)-1;f?H.access(e,c,f):(e.removeEventListener(b,d,!0),H.remove(e,c))}}});var Wa=b.location,wc=p.now(),Jb=/\?/;p.parseXML=function(c){var d;if(!c||"string"!=typeof c)return null;try{d=(new b.DOMParser).parseFromString(c,"text/xml")}catch(e){d=void 0}return d&&!d.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+c),d};var Lc=/\[\]$/,xc=/\r?\n/g,wd=/^(?:submit|button|image|reset|file)$/i,xd=/^(?:input|select|textarea|keygen)/i;p.param=function(b,c){var d,e=[],f=function(b,
c){var d=p.isFunction(c)?c():c;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==d?"":d)};if(Array.isArray(b)||b.jquery&&!p.isPlainObject(b))p.each(b,function(){f(this.name,this.value)});else for(d in b)Da(d,b[d],c,f);return e.join("&")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=p.prop(this,"elements");return b?p.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!p(this).is(":disabled")&&
xd.test(this.nodeName)&&!wd.test(b)&&(this.checked||!mc.test(b))}).map(function(b,c){var d=p(this).val();return null==d?null:Array.isArray(d)?p.map(d,function(b){return{name:c.name,value:b.replace(xc,"\r\n")}}):{name:c.name,value:d.replace(xc,"\r\n")}}).get()}});var yd=/%20/g,zd=/#.*$/,Ad=/([?&])_=[^&]*/,Bd=/^(.*?):[ \t]*([^\r\n]*)$/gm,Cd=/^(?:GET|HEAD)$/,Dd=/^\/\//,yc={},wb={},zc="*/".concat("*"),Kb=G.createElement("a");Kb.href=Wa.href;p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Wa.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Wa.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?J(J(b,p.ajaxSettings),c):J(p.ajaxSettings,b)},ajaxPrefilter:Qa(yc),ajaxTransport:Qa(wb),ajax:function(c,d){function e(c,d,t,n){var z,r,F,M,T=d;if(!q){q=!0;m&&b.clearTimeout(m);f=void 0;l=n||"";J.readyState=0<c?4:0;n=200<=c&&300>c||304===c;if(t){F=s;for(var ca=J,D,G,C,P,I=F.contents,fa=F.dataTypes;"*"===fa[0];)fa.shift(),void 0===D&&(D=F.mimeType||ca.getResponseHeader("Content-Type"));if(D)for(G in I)if(I[G]&&
I[G].test(D)){fa.unshift(G);break}if(fa[0]in t)C=fa[0];else{for(G in t){if(!fa[0]||F.converters[G+" "+fa[0]]){C=G;break}P||(P=G)}C=C||P}t=C?(C!==fa[0]&&fa.unshift(C),t[C]):void 0;F=t}var U;a:{t=s;D=F;G=J;C=n;var V,A,da;F={};ca=t.dataTypes.slice();if(ca[1])for(V in t.converters)F[V.toLowerCase()]=t.converters[V];for(P=ca.shift();P;)if(t.responseFields[P]&&(G[t.responseFields[P]]=D),!da&&C&&t.dataFilter&&(D=t.dataFilter(D,t.dataType)),da=P,P=ca.shift())if("*"===P)P=da;else if("*"!==da&&da!==P){if(V=
F[da+" "+P]||F["* "+P],!V)for(U in F)if(A=U.split(" "),A[1]===P&&(V=F[da+" "+A[0]]||F["* "+A[0]])){!0===V?V=F[U]:!0!==F[U]&&(P=A[0],ca.unshift(A[1]));break}if(!0!==V)if(V&&t["throws"])D=V(D);else try{D=V(D)}catch(xb){U={state:"parsererror",error:V?xb:"No conversion from "+da+" to "+P};break a}}U={state:"success",data:D}}F=U;n?(s.ifModified&&(M=J.getResponseHeader("Last-Modified"),M&&(p.lastModified[g]=M),M=J.getResponseHeader("etag"),M&&(p.etag[g]=M)),204===c||"HEAD"===s.type?T="nocontent":304===
c?T="notmodified":(T=F.state,z=F.data,r=F.error,n=!r)):(r=T,!c&&T||(T="error",0>c&&(c=0)));J.status=c;J.statusText=(d||T)+"";n?E.resolveWith(B,[z,T,J]):E.rejectWith(B,[J,T,r]);J.statusCode(W);W=void 0;u&&v.trigger(n?"ajaxSuccess":"ajaxError",[J,s,n?z:r]);sa.fireWith(B,[J,T]);u&&(v.trigger("ajaxComplete",[J,s]),--p.active||p.event.trigger("ajaxStop"))}}"object"==typeof c&&(d=c,c=void 0);d=d||{};var f,g,l,t,m,n,q,u,z,r,s=p.ajaxSetup({},d),B=s.context||s,v=s.context&&(B.nodeType||B.jquery)?p(B):p.event,
E=p.Deferred(),sa=p.Callbacks("once memory"),W=s.statusCode||{},T={},ca={},D="canceled",J={readyState:0,getResponseHeader:function(b){var c;if(q){if(!t)for(t={};c=Bd.exec(l);)t[c[1].toLowerCase()]=c[2];c=t[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return q?l:null},setRequestHeader:function(b,c){return null==q&&(b=ca[b.toLowerCase()]=ca[b.toLowerCase()]||b,T[b]=c),this},overrideMimeType:function(b){return null==q&&(s.mimeType=b),this},statusCode:function(b){var c;if(b)if(q)J.always(b[J.status]);
else for(c in b)W[c]=[W[c],b[c]];return this},abort:function(b){b=b||D;return f&&f.abort(b),e(0,b),this}};if(E.promise(J),s.url=((c||s.url||Wa.href)+"").replace(Dd,Wa.protocol+"//"),s.type=d.method||d.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match(ja)||[""],null==s.crossDomain){n=G.createElement("a");try{n.href=s.url,n.href=n.href,s.crossDomain=Kb.protocol+"//"+Kb.host!=n.protocol+"//"+n.host}catch(P){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=
p.param(s.data,s.traditional)),Ra(yc,s,d,J),q)return J;(u=p.event&&s.global)&&0===p.active++&&p.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!Cd.test(s.type);g=s.url.replace(zd,"");s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(yd,"+")):(r=s.url.slice(g.length),s.data&&(g+=(Jb.test(g)?"&":"?")+s.data,delete s.data),!1===s.cache&&(g=g.replace(Ad,"$1"),r=(Jb.test(g)?"&":"?")+"_="+wc++ +r),s.url=
g+r);s.ifModified&&(p.lastModified[g]&&J.setRequestHeader("If-Modified-Since",p.lastModified[g]),p.etag[g]&&J.setRequestHeader("If-None-Match",p.etag[g]));(s.data&&s.hasContent&&!1!==s.contentType||d.contentType)&&J.setRequestHeader("Content-Type",s.contentType);J.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+zc+"; q=0.01":""):s.accepts["*"]);for(z in s.headers)J.setRequestHeader(z,s.headers[z]);if(s.beforeSend&&(!1===s.beforeSend.call(B,
J,s)||q))return J.abort();if(D="abort",sa.add(s.complete),J.done(s.success),J.fail(s.error),f=Ra(wb,s,d,J)){if(J.readyState=1,u&&v.trigger("ajaxSend",[J,s]),q)return J;s.async&&0<s.timeout&&(m=b.setTimeout(function(){J.abort("timeout")},s.timeout));try{q=!1,f.send(T,e)}catch(I){if(q)throw I;e(-1,I)}}else e(-1,"No Transport");return J},getJSON:function(b,c,d){return p.get(b,c,d,"json")},getScript:function(b,c){return p.get(b,void 0,c,"script")}});p.each(["get","post"],function(b,c){p[c]=function(b,
d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=void 0),p.ajax(p.extend({url:b,type:c,dataType:f,data:d,success:e},p.isPlainObject(b)&&b))}});p._evalUrl=function(b){return p.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(b){var c;return this[0]&&(p.isFunction(b)&&(b=b.call(this[0])),c=p(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;
return b}).append(this)),this},wrapInner:function(b){return p.isFunction(b)?this.each(function(c){p(this).wrapInner(b.call(this,c))}):this.each(function(){var c=p(this),d=c.contents();d.length?d.wrapAll(b):c.append(b)})},wrap:function(b){var c=p.isFunction(b);return this.each(function(d){p(this).wrapAll(c?b.call(this,d):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}});p.expr.pseudos.hidden=function(b){return!p.expr.pseudos.visible(b)};
p.expr.pseudos.visible=function(b){return!(!b.offsetWidth&&!b.offsetHeight&&!b.getClientRects().length)};p.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(c){}};var Ed={"0":200,1223:204},Xa=p.ajaxSettings.xhr();Q.cors=!!Xa&&"withCredentials"in Xa;Q.ajax=Xa=!!Xa;p.ajaxTransport(function(c){var d,e;if(Q.cors||Xa&&!c.crossDomain)return{send:function(f,g){var l,t=c.xhr();if(t.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(l in c.xhrFields)t[l]=c.xhrFields[l];c.mimeType&&
t.overrideMimeType&&t.overrideMimeType(c.mimeType);c.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");for(l in f)t.setRequestHeader(l,f[l]);d=function(b){return function(){d&&(d=e=t.onload=t.onerror=t.onabort=t.onreadystatechange=null,"abort"===b?t.abort():"error"===b?"number"!=typeof t.status?g(0,"error"):g(t.status,t.statusText):g(Ed[t.status]||t.status,t.statusText,"text"!==(t.responseType||"text")||"string"!=typeof t.responseText?{binary:t.response}:{text:t.responseText},
t.getAllResponseHeaders()))}};t.onload=d();e=t.onerror=d("error");void 0!==t.onabort?t.onabort=e:t.onreadystatechange=function(){4===t.readyState&&b.setTimeout(function(){d&&e()})};d=d("abort");try{t.send(c.hasContent&&c.data||null)}catch(m){if(d)throw m;}},abort:function(){d&&d()}}});p.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},
converters:{"text script":function(b){return p.globalEval(b),b}}});p.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});p.ajaxTransport("script",function(b){if(b.crossDomain){var c,d;return{send:function(e,f){c=p("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",d=function(b){c.remove();d=null;b&&f("error"===b.type?404:200,b.type)});G.head.appendChild(c[0])},abort:function(){d&&d()}}}});var Ac=[],Lb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",
jsonpCallback:function(){var b=Ac.pop()||p.expando+"_"+wc++;return this[b]=!0,b}});p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,l,t=!1!==c.jsonp&&(Lb.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lb.test(c.data)&&"data");if(t||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,t?c[t]=c[t].replace(Lb,"$1"+f):!1!==c.jsonp&&(c.url+=(Jb.test(c.url)?"&":"?")+c.jsonp+
"="+f),c.converters["script json"]=function(){return l||p.error(f+" was not called"),l[0]},c.dataTypes[0]="json",g=b[f],b[f]=function(){l=arguments},e.always(function(){void 0===g?p(b).removeProp(f):b[f]=g;c[f]&&(c.jsonpCallback=d.jsonpCallback,Ac.push(f));l&&p.isFunction(g)&&g(l[0]);l=g=void 0}),"script"});var Fd=Q,Bc,Cc=G.implementation.createHTMLDocument("").body;Bc=(Cc.innerHTML="<form></form><form></form>",2===Cc.childNodes.length);Fd.createHTMLDocument=Bc;p.parseHTML=function(b,c,d){if("string"!=
typeof b)return[];"boolean"==typeof c&&(d=c,c=!1);var e,f,g;return c||(Q.createHTMLDocument?(c=G.implementation.createHTMLDocument(""),e=c.createElement("base"),e.href=G.location.href,c.head.appendChild(e)):c=G),f=ic.exec(b),g=!d&&[],f?[c.createElement(f[1])]:(f=E([b],c,g),g&&g.length&&p(g).remove(),p.merge([],f.childNodes))};p.fn.load=function(b,c,d){var e,f,g,l=this,t=b.indexOf(" ");return-1<t&&(e=O(b.slice(t)),b=b.slice(0,t)),p.isFunction(c)?(d=c,c=void 0):c&&"object"==typeof c&&(f="POST"),0<l.length&&
p.ajax({url:b,type:f||"GET",dataType:"html",data:c}).done(function(b){g=arguments;l.html(e?p("<div>").append(p.parseHTML(b)).find(e):b)}).always(d&&function(b,c){l.each(function(){d.apply(this,g||[b.responseText,c,b])})}),this};p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){p.fn[c]=function(b){return this.on(c,b)}});p.expr.pseudos.animated=function(b){return p.grep(p.timers,function(c){return b===c.elem}).length};p.offset={setOffset:function(b,c,d){var e,
f,g,l,t,m,n=p.css(b,"position"),q=p(b),u={};"static"===n&&(b.style.position="relative");t=q.offset();g=p.css(b,"top");m=p.css(b,"left");("absolute"===n||"fixed"===n)&&-1<(g+m).indexOf("auto")?(e=q.position(),l=e.top,f=e.left):(l=parseFloat(g)||0,f=parseFloat(m)||0);p.isFunction(c)&&(c=c.call(b,d,p.extend({},t)));null!=c.top&&(u.top=c.top-t.top+l);null!=c.left&&(u.left=c.left-t.left+f);"using"in c?c.using.call(b,u):q.css(u)}};p.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:
this.each(function(c){p.offset.setOffset(this,b,c)});var c,d,e,f,g=this[0];if(g)return g.getClientRects().length?(e=g.getBoundingClientRect(),c=g.ownerDocument,d=c.documentElement,f=c.defaultView,{top:e.top+f.pageYOffset-d.clientTop,left:e.left+f.pageXOffset-d.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var b,c,d=this[0],e={top:0,left:0};return"fixed"===p.css(d,"position")?c=d.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),f(b[0],"html")||(e=b.offset()),e={top:e.top+
p.css(b[0],"borderTopWidth",!0),left:e.left+p.css(b[0],"borderLeftWidth",!0)}),{top:c.top-e.top-p.css(d,"marginTop",!0),left:c.left-e.left-p.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===p.css(b,"position");)b=b.offsetParent;return b||rb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;p.fn[b]=function(e){return va(this,function(b,e,f){var g;return p.isWindow(b)?g=b:9===b.nodeType&&
(g=b.defaultView),void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?g.pageXOffset:f,d?f:g.pageYOffset):b[e]=f)},b,e,arguments.length)}});p.each(["top","left"],function(b,c){p.cssHooks[c]=ha(Q.pixelPosition,function(b,d){if(d)return d=na(b,c),vb.test(d)?p(b).position()[c]+"px":d})});p.each({Height:"height",Width:"width"},function(b,c){p.each({padding:"inner"+b,content:c,"":"outer"+b},function(d,e){p.fn[e]=function(f,g){var l=arguments.length&&(d||"boolean"!=typeof f),t=d||(!0===f||!0===g?"margin":"border");
return va(this,function(c,d,f){var g;return p.isWindow(c)?0===e.indexOf("outer")?c["inner"+b]:c.document.documentElement["client"+b]:9===c.nodeType?(g=c.documentElement,Math.max(c.body["scroll"+b],g["scroll"+b],c.body["offset"+b],g["offset"+b],g["client"+b])):void 0===f?p.css(c,d,t):p.style(c,d,f,t)},c,l?f:void 0,l)}})});p.fn.extend({bind:function(b,c,d){return this.on(b,null,c,d)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,c,d,e){return this.on(c,b,d,e)},undelegate:function(b,
c,d){return 1===arguments.length?this.off(b,"**"):this.off(c,b||"**",d)}});p.holdReady=function(b){b?p.readyWait++:p.ready(!0)};p.isArray=Array.isArray;p.parseJSON=JSON.parse;p.nodeName=f;"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Gd=b.jQuery,Hd=b.$;return p.noConflict=function(c){return b.$===p&&(b.$=Hd),c&&b.jQuery===p&&(b.jQuery=Gd),p},c||(b.jQuery=b.$=p),p});function getInternetExplorerVersion(){var b=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b}var ie=getInternetExplorerVersion();function getQueryVariable(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==b)return decodeURIComponent(e[1])}};this.jukebox={};
jukebox.Player=function(b,c){this.id=++jukebox.__jukeboxId;this.origin=c||null;this.settings={};for(var d in this.defaults)this.settings[d]=this.defaults[d];if("[object Object]"===Object.prototype.toString.call(b))for(var e in b)this.settings[e]=b[e];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||
null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var b=this,c=this.settings,d={},e;jukebox.Manager&&void 0!==jukebox.Manager.features&&(d=jukebox.Manager.features);if(!0===d.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var f=function(c){b.__addToManager(c)};
this.context.addEventListener("canplaythrough",f,!0);window.setTimeout(function(){b.context.removeEventListener("canplaythrough",f,!0);f("timeout")},c.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(e in this.HTML5API)this[e]=this.HTML5API[e];1<d.channels?!0===c.autoplay?this.context.autoplay=!0:void 0!==c.spritemap[c.autoplay]&&this.play(c.autoplay):1===d.channels&&void 0!==c.spritemap[c.autoplay]&&(this.backgroundMusic=c.spritemap[c.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(c.autoplay));1==d.channels&&!0!==c.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==b.isPlaying&&(b.pause(),b.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){b.__wasAutoPaused&&(b.resume(),delete b._wasAutoPaused)}))}else if(!0===d.flashaudio){for(e in this.FLASHAPI)this[e]=this.FLASHAPI[e];d=["id=jukebox-flashstream-"+this.id,"autoplay="+c.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(d);
!0===c.autoplay?this.play(0):c.spritemap[c.autoplay]&&this.play(c.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(b){var c,d=this.settings.flashMediaElement,e,f={flashvars:b.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){c=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(c);var g=document.createElement("object");
g.id="jukebox-flashstream-"+this.id;g.setAttribute("type","application/x-shockwave-flash");g.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");g.setAttribute("width","0");g.setAttribute("height","0");f.movie=d+"?x="+(Date.now?Date.now():+new Date);f.flashvars=b.join("&amp;");for(e in f)b=document.createElement("param"),b.setAttribute("name",e),b.setAttribute("value",f[e]),g.appendChild(b);c.outerHTML=g.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{c=
document.createElement("embed");c.id="jukebox-flashstream-"+this.id;c.setAttribute("type","application/x-shockwave-flash");c.setAttribute("width","100");c.setAttribute("height","100");f.play=!1;f.loop=!1;f.src=d+"?x="+(Date.now?Date.now():+new Date);for(e in f)c.setAttribute(e,f[e]);document.getElementsByTagName("body")[0].appendChild(c);this.context=c}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var b=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
b,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(b-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(b,c){if(null!==this.isPlaying&&!0!==c)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(b,this.id);else{var d=this.settings.spritemap,e;if(void 0!==d[b])e=d[b].start;else if("number"===typeof b){e=b;for(var f in d)if(e>=d[f].start&&e<=
d[f].end){b=f;break}}void 0!==e&&"[object Object]"===Object.prototype.toString.call(d[b])&&(this.isPlaying=this.settings.spritemap[b],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(e))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(b){b="number"===
typeof b?b:this.__lastPosition;if(null!==b)return this.play(b),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(b){this.context.volume=b;return 1E-4>Math.abs(this.context.volume-b)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(b){try{return this.context.currentTime=b,!0}catch(c){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(b){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(b),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(b){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(b):!1}}};
if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(b){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var c in this.defaults)this.settings[c]=this.defaults[c];if("[object Object]"===Object.prototype.toString.call(b))for(var d in b)this.settings[d]=b[d];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var b=window.Audio&&new Audio;if(b&&b.canPlayType&&!1===this.settings.useFlash){for(var c=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
d,e,f=0,g=c.length;f<g;f++)if(e=c[f].e,c[f].m.length&&"object"===typeof c[f].m)for(var m=0,l=c[f].m.length;m<l;m++)if(d=c[f].m[m],""!==b.canPlayType(d)){this.codecs[e]=d;break}else this.codecs[e]||(this.codecs[e]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;b.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(b.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(n){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(b){return this.__players&&void 0!==this.__players[b]?this.__players[b]:null},__getClone:function(b,c){for(var d in this.__clones){var e=this.__clones[d];if(null===e.isPlaying&&e.origin===b)return e}if("[object Object]"===Object.prototype.toString.call(c)){d={};for(var f in c)d[f]=c[f];d.autoplay=!1;f=new jukebox.Player(d,b);f.isClone=!0;f.wasReady=!1;return this.__clones[f.id]=f}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var b=this.__queue[0],c=this.__getPlayerById(b.origin);if(null!==c){var d=this.__getClone(b.origin,c.settings);null!==d&&(!0===this.features.volume&&(c=this.__players[b.origin])&&d.setVolume(c.getVolume()),this.add(d),d.play(b.pointer,!0))}this.__queue.splice(0,1)}else for(d in this.__queue.length&&1===this.features.channels&&(b=this.__queue[0],c=this.__getPlayerById(b.origin),null!==c&&c.play(b.pointer,!0),this.__queue.splice(0,1)),this.__players)b=this.__players[d],
c=b.getCurrentTime()||0,b.isPlaying&&!1===b.wasReady?b.wasReady=b.setCurrentTime(b.isPlaying.start):b.isPlaying&&!0===b.wasReady?c>b.isPlaying.end&&(!0===b.isPlaying.loop?b.play(b.isPlaying.start,!0):b.stop()):b.isClone&&null===b.isPlaying?this.remove(b):void 0!==b.backgroundMusic&&null===b.isPlaying&&c>b.backgroundMusic.end&&b.backgroundHackForiOS()},getPlayableResource:function(b){"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.match(/\.([^\.]*)$/)[1];
if(f&&this.codecs[f])return e}return null},add:function(b){return b instanceof jukebox.Player&&void 0===this.__players[b.id]?(this.__playersLength++,this.__players[b.id]=b,!0):!1},remove:function(b){return b instanceof jukebox.Player&&void 0!==this.__players[b.id]?(this.__playersLength--,delete this.__players[b.id],!0):!1},addToQueue:function(b,c){return("string"===typeof b||"number"===typeof b)&&void 0!==this.__players[c]?(this.__queue.push({pointer:b,origin:c}),!0):!1}};(function(){var b={},c=null,d=!0,e=!1;try{"undefined"!==typeof AudioContext?c=new AudioContext:"undefined"!==typeof webkitAudioContext?c=new webkitAudioContext:d=!1}catch(f){d=!1}if(!d)if("undefined"!==typeof Audio)try{new Audio}catch(g){e=!0}else e=!0;if(d){var m="undefined"===typeof c.createGain?c.createGainNode():c.createGain();m.gain.value=1;m.connect(c.destination)}var l=function(b){this._volume=1;this._muted=!1;this.usingWebAudio=d;this.ctx=c;this.noAudio=e;this._howls=[];this._codecs=b;this.iOSAutoEnable=
!0};l.prototype={volume:function(b){b=parseFloat(b);if(0<=b&&1>=b){this._volume=b;d&&(m.gain.value=b);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(b=0;b<this._howls[c]._audioNode.length;b++)this._howls[c]._audioNode[b].volume=this._howls[c]._volume*this._volume;return this}return d?m.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(b){this._muted=b;d&&(m.gain.value=
b?0:this._volume);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(var e=0;e<this._howls[c]._audioNode.length;e++)this._howls[c]._audioNode[e].muted=b},codecs:function(b){return this._codecs[b]},_enableiOSAudio:function(){var b=this;if(!c||!b._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){b._iOSEnabled=!1;var d=function(){var e=c.createBuffer(1,1,22050),f=c.createBufferSource();f.buffer=e;f.connect(c.destination);"undefined"===typeof f.start?
f.noteOn(0):f.start(0);setTimeout(function(){if(f.playbackState===f.PLAYING_STATE||f.playbackState===f.FINISHED_STATE)b._iOSEnabled=!0,b.iOSAutoEnable=!1,window.removeEventListener("touchend",d,!1)},0)};window.addEventListener("touchend",d,!1);return b}}};var n=null,r={};e||(n=new Audio,r={mp3:!!n.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!n.canPlayType('audio/wav; codecs="1"').replace(/^no$/,
""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var q=new l(r),s=function(b){this._autoplay=b.autoplay||!1;this._buffer=b.buffer||!1;this._duration=b.duration||0;this._format=b.format||null;
this._loop=b.loop||!1;this._loaded=!1;this._sprite=b.sprite||{};this._src=b.src||"";this._pos3d=b.pos3d||[0,0,-0.5];this._volume=void 0!==b.volume?b.volume:1;this._urls=b.urls||[];this._rate=b.rate||1;this._model=b.model||null;this._onload=[b.onload||function(){}];this._onloaderror=[b.onloaderror||function(){}];this._onend=[b.onend||function(){}];this._onpause=[b.onpause||function(){}];this._onplay=[b.onplay||function(){}];this._onendTimer=[];this._webAudio=d&&!this._buffer;this._audioNode=[];this._webAudio&&
this._setupAudioNode();"undefined"!==typeof c&&(c&&q.iOSAutoEnable)&&q._enableiOSAudio();q._howls.push(this);this.load()};s.prototype={load:function(){var c=this,d=null;if(e)c.on("loaderror",Error("No audio support."));else{for(var f=0;f<c._urls.length;f++){var g,m;if(c._format)g=c._format;else if(m=c._urls[f],(g=/^data:audio\/([^;,]+);/i.exec(m))||(g=/\.([^.]+)$/.exec(m.split("?",1)[0])),g)g=g[1].toLowerCase();else{c.on("loaderror",Error("Could not extract format from passed URLs, please add format parameter."));
return}if(r[g]){d=c._urls[f];break}}if(d){c._src=d;if(c._webAudio){var n=d;if(n in b)c._duration=b[n].duration,u(c);else if(/^data:[^;]+;base64,/.test(n)){d=atob(n.split(",")[1]);f=new Uint8Array(d.length);for(g=0;g<d.length;++g)f[g]=d.charCodeAt(g);v(f.buffer,c,n)}else{var s=new XMLHttpRequest;s.open("GET.html",n,!0);s.responseType="arraybuffer";s.onload=function(){v(s.response,c,n)};s.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,delete b[n],c.load())};
try{s.send()}catch(T){s.onerror()}}}else{var D=new Audio;D.addEventListener("error",function(){D.error&&4===D.error.code&&(l.noAudio=!0);c.on("loaderror",{type:D.error?D.error.code:0})},!1);c._audioNode.push(D);D.src=d;D._pos=0;D.preload="auto";D.volume=q._muted?0:c._volume*q.volume();var I=function(){c._duration=Math.ceil(10*D.duration)/10;0===Object.getOwnPropertyNames(c._sprite).length&&(c._sprite={_default:[0,1E3*c._duration]});c._loaded||(c._loaded=!0,c.on("load"));c._autoplay&&c.play();D.removeEventListener("canplaythrough",
I,!1)};D.addEventListener("canplaythrough",I,!1);D.load()}return c}c.on("loaderror",Error("No codec support for selected audio sources."))}},urls:function(b){return b?(this.stop(),this._urls="string"===typeof b?[b]:b,this._loaded=!1,this.load(),this):this._urls},play:function(d,e){var f=this;"function"===typeof d&&(e=d);if(!d||"function"===typeof d)d="_default";if(!f._loaded)return f.on("load",function(){f.play(d,e)}),f;if(!f._sprite[d])return"function"===typeof e&&e(),f;f._inactiveNode(function(g){g._sprite=
d;var l=0<g._pos?g._pos:f._sprite[d][0]/1E3,m=0;f._webAudio?(m=f._sprite[d][1]/1E3-g._pos,0<g._pos&&(l=f._sprite[d][0]/1E3+l)):m=f._sprite[d][1]/1E3-(l-f._sprite[d][0]/1E3);var n=!(!f._loop&&!f._sprite[d][2]),u="string"===typeof e?e:Math.round(Date.now()*Math.random())+"",s;s=setTimeout(function(){!f._webAudio&&n&&f.stop(u).play(d,u);f._webAudio&&!n&&(f._nodeById(u).paused=!0,f._nodeById(u)._pos=0,f._clearEndTimer(u));!f._webAudio&&!n&&f.stop(u);f.on("end",u)},1E3*(m/f._rate));f._onendTimer.push({timer:s,
id:u});if(f._webAudio){s=f._sprite[d][0]/1E3;var r=f._sprite[d][1]/1E3;g.id=u;g.paused=!1;s=[n,s,r];r=f._nodeById(u);r.bufferSource=c.createBufferSource();r.bufferSource.buffer=b[f._src];r.bufferSource.connect(r.panner);r.bufferSource.loop=s[0];s[0]&&(r.bufferSource.loopStart=s[1],r.bufferSource.loopEnd=s[1]+s[2]);r.bufferSource.playbackRate.value=f._rate;f._playStart=c.currentTime;g.gain.value=f._volume;"undefined"===typeof g.bufferSource.start?n?g.bufferSource.noteGrainOn(0,l,86400):g.bufferSource.noteGrainOn(0,
l,m):n?g.bufferSource.start(0,l,86400):g.bufferSource.start(0,l,m)}else if(4===g.readyState||!g.readyState&&navigator.isCocoonJS)g.readyState=4,g.id=u,g.currentTime=l,g.muted=q._muted||g.muted,g.volume=f._volume*q.volume(),setTimeout(function(){g.play()},0);else{f._clearEndTimer(u);var v=d,U=e,X=function(){f.play(v,U);g.removeEventListener("canplaythrough",X,!1)};g.addEventListener("canplaythrough",X,!1);return f}f.on("play");"function"===typeof e&&e(u);return f});return f},pause:function(b){var c=
this;if(!c._loaded)return c.on("play",function(){c.pause(b)}),c;c._clearEndTimer(b);var d=b?c._nodeById(b):c._activeNode();if(d)if(d._pos=c.pos(null,b),c._webAudio){if(!d.bufferSource||d.paused)return c;d.paused=!0;"undefined"===typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();c.on("pause");return c},stop:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(b)}),c;c._clearEndTimer(b);var d=b?c._nodeById(b):c._activeNode();if(d)if(d._pos=
0,c._webAudio){if(!d.bufferSource||d.paused)return c;d.paused=!0;"undefined"===typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else isNaN(d.duration)||(d.pause(),d.currentTime=0);return c},mute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.mute(b)}),c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=0:d.muted=!0);return c},unmute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.unmute(b)}),c;var d=b?c._nodeById(b):
c._activeNode();d&&(c._webAudio?d.gain.value=c._volume:d.muted=!1);return c},volume:function(b,c){var d=this;b=parseFloat(b);if(0<=b&&1>=b){d._volume=b;if(!d._loaded)return d.on("play",function(){d.volume(b,c)}),d;var e=c?d._nodeById(c):d._activeNode();e&&(d._webAudio?e.gain.value=b:e.volume=b*q.volume());return d}return d._volume},loop:function(b){return"boolean"===typeof b?(this._loop=b,this):this._loop},sprite:function(b){return"object"===typeof b?(this._sprite=b,this):this._sprite},pos:function(b,
d){var e=this;if(!e._loaded)return e.on("load",function(){e.pos(b)}),"number"===typeof b?e:e._pos||0;b=parseFloat(b);var f=d?e._nodeById(d):e._activeNode();if(f)return 0<=b?(e.pause(d),f._pos=b,e.play(f._sprite,d),e):e._webAudio?f._pos+(c.currentTime-e._playStart):f.currentTime;if(0<=b)return e;for(f=0;f<e._audioNode.length;f++)if(e._audioNode[f].paused&&4===e._audioNode[f].readyState)return e._webAudio?e._audioNode[f]._pos:e._audioNode[f].currentTime},pos3d:function(b,c,d,e){var f=this;c="undefined"===
typeof c||!c?0:c;d="undefined"===typeof d||!d?-0.5:d;if(!f._loaded)return f.on("play",function(){f.pos3d(b,c,d,e)}),f;if(0<=b||0>b){if(f._webAudio){var g=e?f._nodeById(e):f._activeNode();g&&(f._pos3d=[b,c,d],g.panner.setPosition(b,c,d),g.panner.panningModel=f._model||"HRTF")}}else return f._pos3d;return f},fade:function(b,c,d,e,f){var g=this,l=Math.abs(b-c),m=b>c?"down":"up",l=l/0.01,n=d/l;if(!g._loaded)return g.on("load",function(){g.fade(b,c,d,e,f)}),g;g.volume(b,f);for(var q=1;q<=l;q++)(function(){var b=
Math.round(1E3*(g._volume+("up"===m?0.01:-0.01)*q))/1E3;setTimeout(function(){g.volume(b,f);b===c&&e&&e()},n*q)})()},fadeIn:function(b,c,d){return this.volume(0).play().fade(0,b,c,d)},fadeOut:function(b,c,d,e){var f=this;return f.fade(f._volume,b,c,function(){d&&d();f.pause(e);f.on("end")},e)},_nodeById:function(b){for(var c=this._audioNode[0],d=0;d<this._audioNode.length;d++)if(this._audioNode[d].id===b){c=this._audioNode[d];break}return c},_activeNode:function(){for(var b=null,c=0;c<this._audioNode.length;c++)if(!this._audioNode[c].paused){b=
this._audioNode[c];break}this._drainPool();return b},_inactiveNode:function(b){for(var c=null,d=0;d<this._audioNode.length;d++)if(this._audioNode[d].paused&&4===this._audioNode[d].readyState){b(this._audioNode[d]);c=!0;break}this._drainPool();if(!c){var e;if(this._webAudio)e=this._setupAudioNode(),b(e);else{this.load();e=this._audioNode[this._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",g=function(){e.removeEventListener(f,g,!1);b(e)};e.addEventListener(f,g,!1)}}},
_drainPool:function(){var b=0,c;for(c=0;c<this._audioNode.length;c++)this._audioNode[c].paused&&b++;for(c=this._audioNode.length-1;0<=c&&!(5>=b);c--)this._audioNode[c].paused&&(this._webAudio&&this._audioNode[c].disconnect(0),b--,this._audioNode.splice(c,1))},_clearEndTimer:function(b){for(var c=-1,d=0;d<this._onendTimer.length;d++)if(this._onendTimer[d].id===b){c=d;break}if(b=this._onendTimer[c])clearTimeout(b.timer),this._onendTimer.splice(c,1)},_setupAudioNode:function(){var b=this._audioNode,
d=this._audioNode.length;b[d]="undefined"===typeof c.createGain?c.createGainNode():c.createGain();b[d].gain.value=this._volume;b[d].paused=!0;b[d]._pos=0;b[d].readyState=4;b[d].connect(m);b[d].panner=c.createPanner();b[d].panner.panningModel=this._model||"equalpower";b[d].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);b[d].panner.connect(b[d]);return b[d]},on:function(b,c){var d=this["_on"+b];if("function"===typeof c)d.push(c);else for(var e=0;e<d.length;e++)c?d[e].call(this,c):
d[e].call(this);return this},off:function(b,c){var d=this["_on"+b];if(c)for(var e=0;e<d.length;e++){if(c===d[e]){d.splice(e,1);break}}else this["_on"+b]=[];return this},unload:function(){for(var c=this._audioNode,d=0;d<this._audioNode.length;d++)c[d].paused||(this.stop(c[d].id),this.on("end",c[d].id)),this._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<this._onendTimer.length;d++)clearTimeout(this._onendTimer[d].timer);c=q._howls.indexOf(this);null!==c&&0<=c&&q._howls.splice(c,1);delete b[this._src]}};
if(d)var v=function(d,e,f){c.decodeAudioData(d,function(c){c&&(b[f]=c,u(e,c))},function(b){e.on("loaderror",b)})},u=function(b,c){b._duration=c?c.duration:b._duration;0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1E3*b._duration]});b._loaded||(b._loaded=!0,b.on("load"));b._autoplay&&b.play()};"function"===typeof define&&define.amd&&define(function(){return{Howler:q,Howl:s}});"undefined"!==typeof exports&&(exports.Howler=q,exports.Howl=s);"undefined"!==typeof window&&(window.Howler=
q,window.Howl=s)})();(function(b){"object"===typeof exports&&"undefined"!==typeof module?module.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).io=b()})(function(){return function c(d,e,f){function g(l,r){if(!e[l]){if(!d[l]){var q="function"==typeof require&&require;if(!r&&q)return q(l,!0);if(m)return m(l,!0);q=Error("Cannot find module '"+l+"'");throw q.code="MODULE_NOT_FOUND",q;}q=e[l]={exports:{}};
d[l][0].call(q.exports,function(c){var e=d[l][1][c];return g(e?e:c)},q,q.exports,c,d,e,f)}return e[l].exports}for(var m="function"==typeof require&&require,l=0;l<f.length;l++)g(f[l]);return g}({1:[function(c,d){d.exports=c("lib/index.html")},{"./lib/":2}],2:[function(c,d){d.exports=c("./socket");d.exports.parser=c("engine.io-parser")},{"./socket":3,"engine.io-parser":19}],3:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=function(c,
d){if(!(this instanceof f))return new f(c,d);d=d||{};c&&"object"==typeof c&&(d=c,c=null);c?(c=q(c),d.hostname=c.host,d.secure="https"==c.protocol||"wss"==c.protocol,d.port=c.port,c.query&&(d.query=c.query)):d.host&&(d.hostname=q(d.host).host);this.secure=null!=d.secure?d.secure:e.location&&"https:"==location.protocol;d.hostname&&!d.port&&(d.port=this.secure?"443":"80");this.agent=d.agent||!1;this.hostname=d.hostname||(e.location?location.hostname:"localhost");this.port=d.port||(e.location&&location.port?
location.port:this.secure?443:80);this.query=d.query||{};"string"==typeof this.query&&(this.query=v.decode(this.query));this.upgrade=!1!==d.upgrade;this.path=(d.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!d.forceJSONP;this.jsonp=!1!==d.jsonp;this.forceBase64=!!d.forceBase64;this.enablesXDR=!!d.enablesXDR;this.timestampParam=d.timestampParam||"t";this.timestampRequests=d.timestampRequests;this.transports=d.transports||["polling","websocket"];this.readyState="";this.writeBuffer=[];this.policyPort=
d.policyPort||843;this.rememberUpgrade=d.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=d.onlyBinaryUpgrades;this.perMessageDeflate=!1!==d.perMessageDeflate?d.perMessageDeflate||{}:!1;!0===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=d.pfx||null;this.key=d.key||null;this.passphrase=d.passphrase||null;this.cert=d.cert||null;this.ca=d.ca||null;this.ciphers=d.ciphers||
null;this.rejectUnauthorized=void 0===d.rejectUnauthorized?null:d.rejectUnauthorized;var g="object"==typeof e&&e;g.global===g&&(d.extraHeaders&&0<Object.keys(d.extraHeaders).length)&&(this.extraHeaders=d.extraHeaders);this.open()},g=c("./transports"),m=c("component-emitter"),l=c("debug")("engine.io-client:socket"),n=c("indexof"),r=c("engine.io-parser"),q=c("parseuri"),s=c("parsejson"),v=c("parseqs");d.exports=f;f.priorWebsocketSuccess=!1;m(f.prototype);f.protocol=r.protocol;f.Socket=f;f.Transport=
c("./transport");f.transports=c("./transports");f.parser=c("engine.io-parser");f.prototype.createTransport=function(c){l('creating transport "%s"',c);var d=this.query,e={},f;for(f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);e.EIO=r.protocol;e.transport=c;this.id&&(e.sid=this.id);return new g[c]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,
timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})};f.prototype.open=function(){var c;if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))c="websocket";else{if(0===this.transports.length){var d=this;setTimeout(function(){d.emit("error",
"No transports available")},0);return}c=this.transports[0]}this.readyState="opening";try{c=this.createTransport(c)}catch(e){this.transports.shift();this.open();return}c.open();this.setTransport(c)};f.prototype.setTransport=function(c){l("setting transport %s",c.name);var d=this;this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=c;c.on("drain",function(){d.onDrain()}).on("packet",function(c){d.onPacket(c)}).on("error",function(c){d.onError(c)}).on("close",
function(){d.onClose("transport close")})};f.prototype.probe=function(c){function d(){if(I.onlyBinaryUpgrades){var e=!this.supportsBinary&&I.transport.supportsBinary;v=v||e}v||(l('probe transport "%s" opened',c),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(d){v||("pong"==d.type&&"probe"==d.data?(l('probe transport "%s" pong',c),I.upgrading=!0,I.emit("upgrading",r),r&&(f.priorWebsocketSuccess="websocket"==r.name,l('pausing current transport "%s"',I.transport.name),I.transport.pause(function(){!v&&
"closed"!=I.readyState&&(l("changing transport and sending upgrade packet"),s(),I.setTransport(r),r.send([{type:"upgrade"}]),I.emit("upgrade",r),r=null,I.upgrading=!1,I.flush())}))):(l('probe transport "%s" failed',c),d=Error("probe error"),d.transport=r.name,I.emit("upgradeError",d)))}))}function e(){v||(v=!0,s(),r.close(),r=null)}function g(d){var f=Error("probe error: "+d);f.transport=r.name;e();l('probe transport "%s" failed because of error: %s',c,d);I.emit("upgradeError",f)}function m(){g("transport closed")}
function n(){g("socket closed")}function q(c){r&&c.name!=r.name&&(l('"%s" works - aborting "%s"',c.name,r.name),e())}function s(){r.removeListener("open",d);r.removeListener("error",g);r.removeListener("close",m);I.removeListener("close",n);I.removeListener("upgrading",q)}l('probing transport "%s"',c);var r=this.createTransport(c,{probe:1}),v=!1,I=this;f.priorWebsocketSuccess=!1;r.once("open",d);r.once("error",g);r.once("close",m);this.once("close",n);this.once("upgrading",q);r.open()};f.prototype.onOpen=
function(){l("socket open");this.readyState="open";f.priorWebsocketSuccess="websocket"==this.transport.name;this.emit("open");this.flush();if("open"==this.readyState&&this.upgrade&&this.transport.pause){l("starting upgrade probes");for(var c=0,d=this.upgrades.length;c<d;c++)this.probe(this.upgrades[c])}};f.prototype.onPacket=function(c){if("opening"==this.readyState||"open"==this.readyState)switch(l('socket receive: type "%s", data "%s"',c.type,c.data),this.emit("packet",c),this.emit("heartbeat"),
c.type){case "open":this.onHandshake(s(c.data));break;case "pong":this.setPing();this.emit("pong");break;case "error":var d=Error("server error");d.code=c.data;this.onError(d);break;case "message":this.emit("data",c.data),this.emit("message",c.data)}else l('packet received with socket readyState "%s"',this.readyState)};f.prototype.onHandshake=function(c){this.emit("handshake",c);this.id=c.sid;this.transport.query.sid=c.sid;this.upgrades=this.filterUpgrades(c.upgrades);this.pingInterval=c.pingInterval;
this.pingTimeout=c.pingTimeout;this.onOpen();"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};f.prototype.onHeartbeat=function(c){clearTimeout(this.pingTimeoutTimer);var d=this;d.pingTimeoutTimer=setTimeout(function(){if("closed"!=d.readyState)d.onClose("ping timeout")},c||d.pingInterval+d.pingTimeout)};f.prototype.setPing=function(){var c=this;clearTimeout(c.pingIntervalTimer);c.pingIntervalTimer=setTimeout(function(){l("writing ping packet - expecting pong within %sms",
c.pingTimeout);c.ping();c.onHeartbeat(c.pingTimeout)},c.pingInterval)};f.prototype.ping=function(){var c=this;this.sendPacket("ping",function(){c.emit("ping")})};f.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};f.prototype.flush=function(){"closed"!=this.readyState&&(this.transport.writable&&!this.upgrading&&this.writeBuffer.length)&&(l("flushing %d packets in socket",this.writeBuffer.length),
this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};f.prototype.write=f.prototype.send=function(c,d,e){this.sendPacket("message",c,d,e);return this};f.prototype.sendPacket=function(c,d,e,f){"function"==typeof d&&(f=d,d=void 0);"function"==typeof e&&(f=e,e=null);if(!("closing"==this.readyState||"closed"==this.readyState)){e=e||{};e.compress=!1!==e.compress;c={type:c,data:d,options:e};this.emit("packetCreate",c);this.writeBuffer.push(c);if(f)this.once("flush",
f);this.flush()}};f.prototype.close=function(){function c(){f.onClose("forced close");l("socket closing - telling transport to close");f.transport.close()}function d(){f.removeListener("upgrade",d);f.removeListener("upgradeError",d);c()}function e(){f.once("upgrade",d);f.once("upgradeError",d)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var f=this;if(this.writeBuffer.length)this.once("drain",function(){this.upgrading?e():c()});else this.upgrading?e():c()}return this};
f.prototype.onError=function(c){l("socket error %j",c);f.priorWebsocketSuccess=!1;this.emit("error",c);this.onClose("transport error",c)};f.prototype.onClose=function(c,d){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState)l('socket close with reason: "%s"',c),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=
null,this.emit("close",c,d),this.writeBuffer=[],this.prevBufferLen=0};f.prototype.filterUpgrades=function(c){for(var d=[],e=0,f=c.length;e<f;e++)~n(this.transports,c[e])&&d.push(c[e]);return d}},{"./transport":4,"./transports":5,"component-emitter":15,debug:17,"engine.io-parser":19,indexof:23,parsejson:26,parseqs:27,parseuri:28}],4:[function(c,d){function e(c){this.path=c.path;this.hostname=c.hostname;this.port=c.port;this.secure=c.secure;this.query=c.query;this.timestampParam=c.timestampParam;this.timestampRequests=
c.timestampRequests;this.readyState="";this.agent=c.agent||!1;this.socket=c.socket;this.enablesXDR=c.enablesXDR;this.pfx=c.pfx;this.key=c.key;this.passphrase=c.passphrase;this.cert=c.cert;this.ca=c.ca;this.ciphers=c.ciphers;this.rejectUnauthorized=c.rejectUnauthorized;this.extraHeaders=c.extraHeaders}var f=c("engine.io-parser"),g=c("component-emitter");d.exports=e;g(e.prototype);e.prototype.onError=function(c,d){var e=Error(c);e.type="TransportError";e.description=d;this.emit("error",e);return this};
e.prototype.open=function(){if("closed"==this.readyState||""==this.readyState)this.readyState="opening",this.doOpen();return this};e.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState)this.doClose(),this.onClose();return this};e.prototype.send=function(c){if("open"==this.readyState)this.write(c);else throw Error("Transport not open");};e.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};e.prototype.onData=function(c){c=f.decodePacket(c,
this.socket.binaryType);this.onPacket(c)};e.prototype.onPacket=function(c){this.emit("packet",c)};e.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},{"component-emitter":15,"engine.io-parser":19}],5:[function(c,d,e){var f="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},g=c("xmlhttprequest-ssl"),m=c("./polling-xhr"),l=c("./polling-jsonp");c=c("./websocket");e.polling=function(c){var d=!1,e=!1,s=!1!==c.jsonp;f.location&&
(e="https:"==location.protocol,(d=location.port)||(d=e?443:80),d=c.hostname!=location.hostname||d!=c.port,e=c.secure!=e);c.xdomain=d;c.xscheme=e;if("open"in new g(c)&&!c.forceJSONP)return new m(c);if(!s)throw Error("JSONP disabled");return new l(c)};e.websocket=c},{"./polling-jsonp":6,"./polling-xhr":7,"./websocket":9,"xmlhttprequest-ssl":10}],6:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=function(){},g=function(c){m.call(this,
c);this.query=this.query||{};q||(e.___eio||(e.___eio=[]),q=e.___eio);this.index=q.length;var d=this;q.push(function(c){d.onData(c)});this.query.j=this.index;e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){d.script&&(d.script.onerror=f)},!1)},m=c("./polling"),l=c("component-inherit");d.exports=g;var n=/\n/g,r=/\\n/g,q;l(g,m);g.prototype.supportsBinary=!1;g.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&
(this.form.parentNode.removeChild(this.form),this.iframe=this.form=null);m.prototype.doClose.call(this)};g.prototype.doPoll=function(){var c=this,d=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);d.async=!0;d.src=this.uri();d.onerror=function(d){c.onError("jsonp poll error",d)};var e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(d,e):(document.head||document.body).appendChild(d);this.script=d;"undefined"!=typeof navigator&&
/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var c=document.createElement("iframe");document.body.appendChild(c);document.body.removeChild(c)},100)};g.prototype.doWrite=function(c,d){function e(){f();d()}function f(){if(g.iframe)try{g.form.removeChild(g.iframe)}catch(c){g.onError("jsonp polling iframe removal error",c)}try{W=document.createElement('<iframe src="javascript:0" name="'+g.iframeId+'">')}catch(d){W=document.createElement("iframe"),W.name=g.iframeId,W.src="javascript:0"}W.id=
g.iframeId;g.form.appendChild(W);g.iframe=W}var g=this;if(!this.form){var l=document.createElement("form"),m=document.createElement("textarea"),q=this.iframeId="eio_iframe_"+this.index,W;l.className="socketio";l.style.position="absolute";l.style.top="-1000px";l.style.left="-1000px";l.target=q;l.method="POST";l.setAttribute("accept-charset","utf-8");m.name="d";l.appendChild(m);document.body.appendChild(l);this.form=l;this.area=m}this.form.action=this.uri();f();c=c.replace(r,"\\\n");this.area.value=
c.replace(n,"\\n");try{this.form.submit()}catch(ca){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==g.iframe.readyState&&e()}:this.iframe.onload=e}},{"./polling":8,"component-inherit":16}],7:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=function(){},g=function(c){r.call(this,c);if(e.location){var d="https:"==location.protocol,f=location.port;f||(f=d?443:80);this.xd=c.hostname!=e.location.hostname||
f!=c.port;this.xs=c.secure!=d}else this.extraHeaders=c.extraHeaders},m=function(c){this.method=c.method||"GET";this.uri=c.uri;this.xd=!!c.xd;this.xs=!!c.xs;this.async=!1!==c.async;this.data=void 0!=c.data?c.data:null;this.agent=c.agent;this.isBinary=c.isBinary;this.supportsBinary=c.supportsBinary;this.enablesXDR=c.enablesXDR;this.pfx=c.pfx;this.key=c.key;this.passphrase=c.passphrase;this.cert=c.cert;this.ca=c.ca;this.ciphers=c.ciphers;this.rejectUnauthorized=c.rejectUnauthorized;this.extraHeaders=
c.extraHeaders;this.create()},l=function(){for(var c in m.requests)m.requests.hasOwnProperty(c)&&m.requests[c].abort()},n=c("xmlhttprequest-ssl"),r=c("./polling"),q=c("component-emitter"),s=c("component-inherit"),v=c("debug")("engine.io-client:polling-xhr");d.exports=g;d.exports.Request=m;s(g,r);g.prototype.supportsBinary=!0;g.prototype.request=function(c){c=c||{};c.uri=this.uri();c.xd=this.xd;c.xs=this.xs;c.agent=this.agent||!1;c.supportsBinary=this.supportsBinary;c.enablesXDR=this.enablesXDR;c.pfx=
this.pfx;c.key=this.key;c.passphrase=this.passphrase;c.cert=this.cert;c.ca=this.ca;c.ciphers=this.ciphers;c.rejectUnauthorized=this.rejectUnauthorized;c.extraHeaders=this.extraHeaders;return new m(c)};g.prototype.doWrite=function(c,d){var e=this.request({method:"POST",data:c,isBinary:"string"!==typeof c&&void 0!==c}),f=this;e.on("success",d);e.on("error",function(c){f.onError("xhr post error",c)});this.sendXhr=e};g.prototype.doPoll=function(){v("xhr poll");var c=this.request(),d=this;c.on("data",
function(c){d.onData(c)});c.on("error",function(c){d.onError("xhr poll error",c)});this.pollXhr=c};q(m.prototype);m.prototype.create=function(){var c={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};c.pfx=this.pfx;c.key=this.key;c.passphrase=this.passphrase;c.cert=this.cert;c.ca=this.ca;c.ciphers=this.ciphers;c.rejectUnauthorized=this.rejectUnauthorized;var d=this.xhr=new n(c),f=this;try{v("xhr open %s: %s",this.method,this.uri);d.open(this.method,this.uri,this.async);
try{if(this.extraHeaders){d.setDisableHeaderCheck(!0);for(var g in this.extraHeaders)this.extraHeaders.hasOwnProperty(g)&&d.setRequestHeader(g,this.extraHeaders[g])}}catch(l){}this.supportsBinary&&(d.responseType="arraybuffer");if("POST"==this.method)try{this.isBinary?d.setRequestHeader("Content-type","application/octet-stream"):d.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(q){}"withCredentials"in d&&(d.withCredentials=!0);this.hasXDR()?(d.onload=function(){f.onLoad()},d.onerror=
function(){f.onError(d.responseText)}):d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status||1223==d.status)f.onLoad();else setTimeout(function(){f.onError(d.status)},0)};v("xhr data %s",this.data);d.send(this.data)}catch(s){setTimeout(function(){f.onError(s)},0);return}e.document&&(this.index=m.requestsCount++,m.requests[this.index]=this)};m.prototype.onSuccess=function(){this.emit("success");this.cleanup()};m.prototype.onData=function(c){this.emit("data",c);this.onSuccess()};m.prototype.onError=
function(c){this.emit("error",c);this.cleanup(!0)};m.prototype.cleanup=function(c){if(!("undefined"==typeof this.xhr||null===this.xhr)){this.hasXDR()?this.xhr.onload=this.xhr.onerror=f:this.xhr.onreadystatechange=f;if(c)try{this.xhr.abort()}catch(d){}e.document&&delete m.requests[this.index];this.xhr=null}};m.prototype.onLoad=function(){var c;try{var d;try{d=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===d)c=this.xhr.response;else if(this.supportsBinary)try{c=
String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(f){var g=new Uint8Array(this.xhr.response);d=[];for(var l=0,m=g.length;l<m;l++)d.push(g[l]);c=String.fromCharCode.apply(null,d)}else c=this.xhr.responseText}catch(n){this.onError(n)}if(null!=c)this.onData(c)};m.prototype.hasXDR=function(){return"undefined"!==typeof e.XDomainRequest&&!this.xs&&this.enablesXDR};m.prototype.abort=function(){this.cleanup()};e.document&&(m.requestsCount=0,m.requests={},e.attachEvent?e.attachEvent("onunload",
l):e.addEventListener&&e.addEventListener("beforeunload",l,!1))},{"./polling":8,"component-emitter":15,"component-inherit":16,debug:17,"xmlhttprequest-ssl":10}],8:[function(c,d){function e(c){var d=c&&c.forceBase64;if(!q||d)this.supportsBinary=!1;f.call(this,c)}var f=c("../transport"),g=c("parseqs"),m=c("engine.io-parser"),l=c("component-inherit"),n=c("yeast"),r=c("debug")("engine.io-client:polling");d.exports=e;var q;q=null!=(new (c("xmlhttprequest-ssl"))({xdomain:!1})).responseType;l(e,f);e.prototype.name=
"polling";e.prototype.doOpen=function(){this.poll()};e.prototype.pause=function(c){function d(){r("paused");e.readyState="paused";c()}var e=this;this.readyState="pausing";if(this.polling||!this.writable){var f=0;this.polling&&(r("we are currently polling - waiting to pause"),f++,this.once("pollComplete",function(){r("pre-pause polling complete");--f||d()}));this.writable||(r("we are currently writing - waiting to pause"),f++,this.once("drain",function(){r("pre-pause writing complete");--f||d()}))}else d()};
e.prototype.poll=function(){r("polling");this.polling=!0;this.doPoll();this.emit("poll")};e.prototype.onData=function(c){var d=this;r("polling got data %s",c);m.decodePayload(c,this.socket.binaryType,function(c){if("opening"==d.readyState)d.onOpen();if("close"==c.type)return d.onClose(),!1;d.onPacket(c)});"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():r('ignoring poll - transport state "%s"',this.readyState))};e.prototype.doClose=function(){function c(){r("writing close packet");
d.write([{type:"close"}])}var d=this;"open"==this.readyState?(r("transport open - closing"),c()):(r("transport not open - deferring close"),this.once("open",c))};e.prototype.write=function(c){var d=this;this.writable=!1;var e=function(){d.writable=!0;d.emit("drain")},d=this;m.encodePayload(c,this.supportsBinary,function(c){d.doWrite(c,e)})};e.prototype.uri=function(){var c=this.query||{},d=this.secure?"https":"http",e="";!1!==this.timestampRequests&&(c[this.timestampParam]=n());!this.supportsBinary&&
!c.sid&&(c.b64=1);c=g.encode(c);if(this.port&&("https"==d&&443!=this.port||"http"==d&&80!=this.port))e=":"+this.port;c.length&&(c="?"+c);var f=-1!==this.hostname.indexOf(":");return d+"://"+(f?"["+this.hostname+"]":this.hostname)+e+this.path+c}},{"../transport":4,"component-inherit":16,debug:17,"engine.io-parser":19,parseqs:27,"xmlhttprequest-ssl":10,yeast:30}],9:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=function(c){c&&
c.forceBase64&&(this.supportsBinary=!1);this.perMessageDeflate=c.perMessageDeflate;g.call(this,c)},g=c("../transport"),m=c("engine.io-parser"),l=c("parseqs"),n=c("component-inherit"),r=c("yeast"),q=c("debug")("engine.io-client:websocket"),s=e.WebSocket||e.MozWebSocket,v=s;if(!v&&"undefined"===typeof window)try{v=c("ws")}catch(u){}d.exports=f;n(f,g);f.prototype.name="websocket";f.prototype.supportsBinary=!0;f.prototype.doOpen=function(){if(this.check()){var c=this.uri(),d={agent:this.agent,perMessageDeflate:this.perMessageDeflate};
d.pfx=this.pfx;d.key=this.key;d.passphrase=this.passphrase;d.cert=this.cert;d.ca=this.ca;d.ciphers=this.ciphers;d.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(d.headers=this.extraHeaders);this.ws=s?new v(c):new v(c,void 0,d);void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};f.prototype.addEventListeners=function(){var c=this;
this.ws.onopen=function(){c.onOpen()};this.ws.onclose=function(){c.onClose()};this.ws.onmessage=function(d){c.onData(d.data)};this.ws.onerror=function(d){c.onError("websocket error",d)}};"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(f.prototype.onData=function(c){var d=this;setTimeout(function(){g.prototype.onData.call(d,c)},0)});f.prototype.write=function(c){var d=this;this.writable=!1;for(var f=c.length,g=0,l=f;g<l;g++)(function(c){m.encodePacket(c,d.supportsBinary,
function(g){if(!s){var l={};c.options&&(l.compress=c.options.compress);if(d.perMessageDeflate&&("string"==typeof g?e.Buffer.byteLength(g):g.length)<d.perMessageDeflate.threshold)l.compress=!1}try{s?d.ws.send(g):d.ws.send(g,l)}catch(m){q("websocket closed before onclose event")}--f||(d.emit("flush"),setTimeout(function(){d.writable=!0;d.emit("drain")},0))})})(c[g])};f.prototype.onClose=function(){g.prototype.onClose.call(this)};f.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()};
f.prototype.uri=function(){var c=this.query||{},d=this.secure?"wss":"ws",e="";if(this.port&&("wss"==d&&443!=this.port||"ws"==d&&80!=this.port))e=":"+this.port;this.timestampRequests&&(c[this.timestampParam]=r());this.supportsBinary||(c.b64=1);c=l.encode(c);c.length&&(c="?"+c);var f=-1!==this.hostname.indexOf(":");return d+"://"+(f?"["+this.hostname+"]":this.hostname)+e+this.path+c};f.prototype.check=function(){return!!v&&!("__initialize"in v&&this.name===f.prototype.name)}},{"../transport":4,"component-inherit":16,
debug:17,"engine.io-parser":19,parseqs:27,ws:void 0,yeast:30}],10:[function(c,d){var e=c("has-cors");d.exports=function(c){var d=c.xdomain,m=c.xscheme;c=c.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!d||e))return new XMLHttpRequest}catch(l){}try{if("undefined"!=typeof XDomainRequest&&!m&&c)return new XDomainRequest}catch(n){}if(!d)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(r){}}},{"has-cors":22}],11:[function(c,d){function e(){}d.exports=function(c,d,m){function l(c,e){if(0>=
l.count)throw Error("after called too many times");--l.count;c?(n=!0,d(c),d=m):0===l.count&&!n&&d(null,e)}var n=!1;m=m||e;l.count=c;return 0===c?d():l}},{}],12:[function(c,d){d.exports=function(c,d,g){var m=c.byteLength;d=d||0;g=g||m;if(c.slice)return c.slice(d,g);0>d&&(d+=m);0>g&&(g+=m);g>m&&(g=m);if(d>=m||d>=g||0===m)return new ArrayBuffer(0);c=new Uint8Array(c);for(var m=new Uint8Array(g-d),l=0;d<g;d++,l++)m[l]=c[d];return m.buffer}},{}],13:[function(c,d,e){e.encode=function(c){c=new Uint8Array(c);
var d,e=c.length,l="";for(d=0;d<e;d+=3)l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c[d]>>2],l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(c[d]&3)<<4|c[d+1]>>4],l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(c[d+1]&15)<<2|c[d+2]>>6],l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c[d+2]&63];2===e%3?l=l.substring(0,l.length-1)+"=":1===e%3&&(l=l.substring(0,l.length-2)+"==");return l};e.decode=function(c){var d=
0.75*c.length,e=c.length,l=0,n,r,q,s;"="===c[c.length-1]&&(d--,"="===c[c.length-2]&&d--);for(var v=new ArrayBuffer(d),u=new Uint8Array(v),d=0;d<e;d+=4)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[d]),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[d+1]),q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[d+2]),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(c[d+3]),u[l++]=n<<2|
r>>4,u[l++]=(r&15)<<4|q>>2,u[l++]=(q&3)<<6|s&63;return v}},{}],14:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=function(c){for(var d=0;d<c.length;d++){var e=c[d];if(e.buffer instanceof ArrayBuffer){var f=e.buffer;if(e.byteLength!==f.byteLength){var g=new Uint8Array(e.byteLength);g.set(new Uint8Array(f,e.byteOffset,e.byteLength));f=g.buffer}c[d]=f}}},g=function(c,d){d=d||{};var e=new l;f(c);for(var g=0;g<c.length;g++)e.append(c[g]);
return d.type?e.getBlob(d.type):e.getBlob()},m=function(c,d){f(c);return new Blob(c,d||{})},l=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n;try{n=2===(new Blob(["hi"])).size}catch(r){n=!1}var q;if(q=n)try{q=2===(new Blob([new Uint8Array([1,2])])).size}catch(s){q=!1}var v=l&&l.prototype.append&&l.prototype.getBlob;e=n?q?e.Blob:m:v?g:void 0;d.exports=e},{}],15:[function(c,d){function e(c){if(c){for(var d in e.prototype)c[d]=e.prototype[d];return c}}d.exports=e;e.prototype.on=
e.prototype.addEventListener=function(c,d){this._callbacks=this._callbacks||{};(this._callbacks[c]=this._callbacks[c]||[]).push(d);return this};e.prototype.once=function(c,d){function e(){l.off(c,e);d.apply(this,arguments)}var l=this;this._callbacks=this._callbacks||{};e.fn=d;this.on(c,e);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(c,d){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks=
{},this;var e=this._callbacks[c];if(!e)return this;if(1==arguments.length)return delete this._callbacks[c],this;for(var l,n=0;n<e.length;n++)if(l=e[n],l===d||l.fn===d){e.splice(n,1);break}return this};e.prototype.emit=function(c){this._callbacks=this._callbacks||{};var d=[].slice.call(arguments,1),e=this._callbacks[c];if(e)for(var e=e.slice(0),l=0,n=e.length;l<n;++l)e[l].apply(this,d);return this};e.prototype.listeners=function(c){this._callbacks=this._callbacks||{};return this._callbacks[c]||[]};
e.prototype.hasListeners=function(c){return!!this.listeners(c).length}},{}],16:[function(c,d){d.exports=function(c,d){var g=function(){};g.prototype=d.prototype;c.prototype=new g;c.prototype.constructor=c}},{}],17:[function(c,d,e){function f(){var c;try{c=e.storage.debug}catch(d){}return c}e=d.exports=c("./debug");e.log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)};e.formatArgs=function(){var c=arguments,d=this.useColors;c[0]=
(d?"%c":"")+this.namespace+(d?" %c":" ")+c[0]+(d?"%c ":" ")+"+"+e.humanize(this.diff);if(!d)return c;var d="color: "+this.color,c=[c[0],d,"color: inherit"].concat(Array.prototype.slice.call(c,1)),f=0,g=0;c[0].replace(/%[a-z%]/g,function(c){"%%"!==c&&(f++,"%c"===c&&(g=f))});c.splice(g,0,d);return c};e.save=function(c){try{null==c?e.storage.removeItem("debug"):e.storage.debug=c}catch(d){}};e.load=f;e.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||
console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)};var g;if("undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage)g=chrome.storage.local;else a:{try{g=window.localStorage;break a}catch(m){}g=void 0}e.storage=g;e.colors="lightseagreen forestgreen goldenrod dodgerblue darkorchid crimson".split(" ");e.formatters.j=function(c){return JSON.stringify(c)};e.enable(f())},{"./debug":18}],18:[function(c,d,e){e=d.exports=function(c){function d(){}
function n(){var c=n,d=+new Date;c.diff=d-(g||d);c.prev=g;g=c.curr=d;null==c.useColors&&(c.useColors=e.useColors());null==c.color&&c.useColors&&(c.color=e.colors[f++%e.colors.length]);var l=Array.prototype.slice.call(arguments);l[0]=e.coerce(l[0]);"string"!==typeof l[0]&&(l=["%o"].concat(l));var m=0;l[0]=l[0].replace(/%([a-z%])/g,function(d,f){if("%%"===d)return d;m++;var g=e.formatters[f];"function"===typeof g&&(d=g.call(c,l[m]),l.splice(m,1),m--);return d});"function"===typeof e.formatArgs&&(l=
e.formatArgs.apply(c,l));(n.log||e.log||console.log.bind(console)).apply(c,l)}d.enabled=!1;n.enabled=!0;var r=e.enabled(c)?n:d;r.namespace=c;return r};e.coerce=function(c){return c instanceof Error?c.stack||c.message:c};e.disable=function(){e.enable("")};e.enable=function(c){e.save(c);for(var d=(c||"").split(/[\s,]+/),f=d.length,g=0;g<f;g++)d[g]&&(c=d[g].replace(/\*/g,".*?"),"-"===c[0]?e.skips.push(RegExp("^"+c.substr(1)+"$")):e.names.push(RegExp("^"+c+"$")))};e.enabled=function(c){var d,f;d=0;for(f=
e.skips.length;d<f;d++)if(e.skips[d].test(c))return!1;d=0;for(f=e.names.length;d<f;d++)if(e.names[d].test(c))return!0;return!1};e.humanize=c("ms");e.names=[];e.skips=[];e.formatters={};var f=0,g},{ms:25}],19:[function(c,d,e){var f="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},g=function(c,d,e){var f=Array(c.length);e=r(c.length,e);for(var g=function(c,e,g){d(e,function(d,e){f[c]=e;g(d,f)})},l=0;l<c.length;l++)g(l,c[l],e)};d=c("./keys");var m=
c("has-binary"),l=c("arraybuffer.slice"),n=c("base64-arraybuffer"),r=c("after"),q=c("utf8"),s=navigator.userAgent.match(/Android/i),v=/PhantomJS/i.test(navigator.userAgent),u=s||v;e.protocol=3;var t=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},z=d(t),B={type:"error",data:"parser error"},E=c("blob");e.encodePacket=function(c,d,g,l){"function"==typeof d&&(l=d,d=!1);"function"==typeof g&&(l=g,g=null);var m=void 0===c.data?void 0:c.data.buffer||c.data;if(f.ArrayBuffer&&m instanceof
ArrayBuffer){g=l;if(d){l=c.data;d=new Uint8Array(l);l=new Uint8Array(1+l.byteLength);l[0]=t[c.type];for(m=0;m<d.length;m++)l[m+1]=d[m];g=g(l.buffer)}else g=e.encodeBase64Packet(c,g);return g}if(E&&m instanceof f.Blob){var n=d,r=l;if(n)if(u)if(n){var s=new FileReader;s.onload=function(){c.data=s.result;e.encodePacket(c,n,!0,r)};g=s.readAsArrayBuffer(c.data)}else g=e.encodeBase64Packet(c,r);else g=new Uint8Array(1),g[0]=t[c.type],g=new E([g.buffer,c.data]),g=r(g);else g=e.encodeBase64Packet(c,r);return g}if(m&&
m.base64)return l("b"+e.packets[c.type]+c.data.data);d=t[c.type];void 0!==c.data&&(d+=g?q.encode(String(c.data)):String(c.data));return l(""+d)};e.encodeBase64Packet=function(c,d){var g="b"+e.packets[c.type];if(E&&c.data instanceof f.Blob){var l=new FileReader;l.onload=function(){var c=l.result.split(",")[1];d(g+c)};return l.readAsDataURL(c.data)}var m;try{m=String.fromCharCode.apply(null,new Uint8Array(c.data))}catch(n){m=new Uint8Array(c.data);for(var q=Array(m.length),t=0;t<m.length;t++)q[t]=m[t];
m=String.fromCharCode.apply(null,q)}g+=f.btoa(m);return d(g)};e.decodePacket=function(c,d,f){if("string"==typeof c||void 0===c){if("b"==c.charAt(0))return e.decodeBase64Packet(c.substr(1),d);if(f)try{c=q.decode(c)}catch(g){return B}f=c.charAt(0);return Number(f)!=f||!z[f]?B:1<c.length?{type:z[f],data:c.substring(1)}:{type:z[f]}}f=(new Uint8Array(c))[0];c=l(c,1);E&&"blob"===d&&(c=new E([c]));return{type:z[f],data:c}};e.decodeBase64Packet=function(c,d){var e=z[c.charAt(0)];if(!f.ArrayBuffer)return{type:e,
data:{base64:!0,data:c.substr(1)}};var g=n.decode(c.substr(1));"blob"===d&&E&&(g=new E([g]));return{type:e,data:g}};e.encodePayload=function(c,d,f){"function"==typeof d&&(f=d,d=null);var l=m(c);if(d&&l)return E&&!u?e.encodePayloadAsBlob(c,f):e.encodePayloadAsArrayBuffer(c,f);if(!c.length)return f("0:");g(c,function(c,f){e.encodePacket(c,!l?!1:d,!0,function(c){f(null,c.length+":"+c)})},function(c,d){return f(d.join(""))})};e.decodePayload=function(c,d,f){if("string"!=typeof c)return e.decodePayloadAsBinary(c,
d,f);"function"===typeof d&&(f=d,d=null);var g;if(""==c)return f(B,0,1);g="";for(var l,m,n=0,q=c.length;n<q;n++)if(m=c.charAt(n),":"!=m)g+=m;else{if(""==g||g!=(l=Number(g)))return f(B,0,1);m=c.substr(n+1,l);if(g!=m.length)return f(B,0,1);if(m.length){g=e.decodePacket(m,d,!0);if(B.type==g.type&&B.data==g.data)return f(B,0,1);if(!1===f(g,n+l,q))return}n+=l;g=""}if(""!=g)return f(B,0,1)};e.encodePayloadAsArrayBuffer=function(c,d){if(!c.length)return d(new ArrayBuffer(0));g(c,function(c,d){e.encodePacket(c,
!0,!0,function(c){return d(null,c)})},function(c,e){var f=e.reduce(function(c,d){var e;e="string"===typeof d?d.length:d.byteLength;return c+e.toString().length+e+2},0),g=new Uint8Array(f),l=0;e.forEach(function(c){var d="string"===typeof c,e=c;if(d){for(var e=new Uint8Array(c.length),f=0;f<c.length;f++)e[f]=c.charCodeAt(f);e=e.buffer}d?g[l++]=0:g[l++]=1;c=e.byteLength.toString();for(f=0;f<c.length;f++)g[l++]=parseInt(c[f]);g[l++]=255;e=new Uint8Array(e);for(f=0;f<e.length;f++)g[l++]=e[f]});return d(g.buffer)})};
e.encodePayloadAsBlob=function(c,d){g(c,function(c,d){e.encodePacket(c,!0,!0,function(c){var e=new Uint8Array(1);e[0]=1;if("string"===typeof c){for(var f=new Uint8Array(c.length),g=0;g<c.length;g++)f[g]=c.charCodeAt(g);c=f.buffer;e[0]=0}for(var f=(c instanceof ArrayBuffer?c.byteLength:c.size).toString(),l=new Uint8Array(f.length+1),g=0;g<f.length;g++)l[g]=parseInt(f[g]);l[f.length]=255;E&&(c=new E([e.buffer,l.buffer,c]),d(null,c))})},function(c,e){return d(new E(e))})};e.decodePayloadAsBinary=function(c,
d,f){"function"===typeof d&&(f=d,d=null);for(var g=[],m=!1;0<c.byteLength;){for(var n=new Uint8Array(c),q=0===n[0],t="",r=1;255!=n[r];r++){if(310<t.length){m=!0;break}t+=n[r]}if(m)return f(B,0,1);c=l(c,2+t.length);t=parseInt(t);n=l(c,0,t);if(q)try{n=String.fromCharCode.apply(null,new Uint8Array(n))}catch(s){q=new Uint8Array(n);n="";for(r=0;r<q.length;r++)n+=String.fromCharCode(q[r])}g.push(n);c=l(c,t)}var u=g.length;g.forEach(function(c,g){f(e.decodePacket(c,d,!0),g,u)})}},{"./keys":20,after:11,"arraybuffer.slice":12,
"base64-arraybuffer":13,blob:14,"has-binary":21,utf8:29}],20:[function(c,d){d.exports=Object.keys||function(c){var d=[],g=Object.prototype.hasOwnProperty,m;for(m in c)g.call(c,m)&&d.push(m);return d}},{}],21:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=c("isarray");d.exports=function(c){function d(c){if(!c)return!1;if(e.Buffer&&e.Buffer.isBuffer(c)||e.ArrayBuffer&&c instanceof ArrayBuffer||e.Blob&&c instanceof Blob||
e.File&&c instanceof File)return!0;if(f(c))for(var g=0;g<c.length;g++){if(d(c[g]))return!0}else if(c&&"object"==typeof c)for(g in c.toJSON&&(c=c.toJSON()),c)if(Object.prototype.hasOwnProperty.call(c,g)&&d(c[g]))return!0;return!1}return d(c)}},{isarray:24}],22:[function(c,d){try{d.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){d.exports=!1}},{}],23:[function(c,d){var e=[].indexOf;d.exports=function(c,d){if(e)return c.indexOf(d);for(var m=0;m<c.length;++m)if(c[m]===
d)return m;return-1}},{}],24:[function(c,d){d.exports=Array.isArray||function(c){return"[object Array]"==Object.prototype.toString.call(c)}},{}],25:[function(c,d){function e(c){c=""+c;if(!(1E4<c.length)&&(c=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(c))){var d=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case "years":case "year":case "yrs":case "yr":case "y":return d*r;case "days":case "day":case "d":return d*
n;case "hours":case "hour":case "hrs":case "hr":case "h":return d*l;case "minutes":case "minute":case "mins":case "min":case "m":return d*m;case "seconds":case "second":case "secs":case "sec":case "s":return d*g;case "milliseconds":case "millisecond":case "msecs":case "msec":case "ms":return d}}}function f(c,d,e){if(!(c<d))return c<1.5*d?Math.floor(c/d)+" "+e:Math.ceil(c/d)+" "+e+"s"}var g=1E3,m=60*g,l=60*m,n=24*l,r=365.25*n;d.exports=function(c,d){d=d||{};return"string"==typeof c?e(c):d.long?f(c,
n,"day")||f(c,l,"hour")||f(c,m,"minute")||f(c,g,"second")||c+" ms":c>=n?Math.round(c/n)+"d":c>=l?Math.round(c/l)+"h":c>=m?Math.round(c/m)+"m":c>=g?Math.round(c/g)+"s":c+"ms"}},{}],26:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,m=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,l=/(?:^|:|,)(?:\s*\[)+/g,n=/^\s+/,r=/\s+$/;d.exports=function(c){if("string"!=
typeof c||!c)return null;c=c.replace(n,"").replace(r,"");if(e.JSON&&JSON.parse)return JSON.parse(c);if(f.test(c.replace(g,"@").replace(m,"]").replace(l,"")))return(new Function("return "+c))()}},{}],27:[function(c,d,e){e.encode=function(c){var d="",e;for(e in c)c.hasOwnProperty(e)&&(d.length&&(d+="&"),d+=encodeURIComponent(e)+"="+encodeURIComponent(c[e]));return d};e.decode=function(c){var d={};c=c.split("&");for(var e=0,l=c.length;e<l;e++){var n=c[e].split("=");d[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return d}},
{}],28:[function(c,d){var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");d.exports=function(c){var d=c,l=c.indexOf("["),n=c.indexOf("]");-1!=l&&-1!=n&&(c=c.substring(0,l)+c.substring(l,n).replace(/:/g,
";")+c.substring(n,c.length));c=e.exec(c||"");for(var r={},q=14;q--;)r[f[q]]=c[q]||"";-1!=l&&-1!=n&&(r.source=d,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0);return r}},{}],29:[function(c,d,e){var f="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{};c=this;var g=function(c){for(var d=[],e=0,f=c.length,g,l;e<f;)g=c.charCodeAt(e++),55296<=g&&56319>=
g&&e<f?(l=c.charCodeAt(e++),56320==(l&64512)?d.push(((g&1023)<<10)+(l&1023)+65536):(d.push(g),e--)):d.push(g);return d},m=function(c){if(55296<=c&&57343>=c)throw Error("Lone surrogate U+"+c.toString(16).toUpperCase()+" is not a scalar value");},l=function(){if(v>=s)throw Error("Invalid byte index");var c=q[v]&255;v++;if(128==(c&192))return c&63;throw Error("Invalid continuation byte");},n=function(){var c,d,e,f;if(v>s)throw Error("Invalid byte index");if(v==s)return!1;c=q[v]&255;v++;if(0==(c&128))return c;
if(192==(c&224)){d=l();c=(c&31)<<6|d;if(128<=c)return c;throw Error("Invalid continuation byte");}if(224==(c&240)){d=l();e=l();c=(c&15)<<12|d<<6|e;if(2048<=c)return m(c),c;throw Error("Invalid continuation byte");}if(240==(c&248)&&(d=l(),e=l(),f=l(),c=(c&15)<<18|d<<12|e<<6|f,65536<=c&&1114111>=c))return c;throw Error("Invalid UTF-8 detected");};e="object"==typeof e&&e;d="object"==typeof d&&d&&d.exports==e&&d;f="object"==typeof f&&f;if(f.global===f||f.window===f)c=f;var r=String.fromCharCode,q,s,v,
f={version:"2.0.0",encode:function(c){c=g(c);for(var d=c.length,e=-1,f,l="";++e<d;){f=c[e];if(0==(f&4294967168))f=r(f);else{var n="";0==(f&4294965248)?n=r(f>>6&31|192):0==(f&4294901760)?(m(f),n=r(f>>12&15|224),n+=r(f>>6&63|128)):0==(f&4292870144)&&(n=r(f>>18&7|240),n+=r(f>>12&63|128),n+=r(f>>6&63|128));f=n+=r(f&63|128)}l+=f}return l},decode:function(c){q=g(c);s=q.length;v=0;c=[];for(var d;!1!==(d=n());)c.push(d);d=c.length;for(var e=-1,f,l="";++e<d;)f=c[e],65535<f&&(f-=65536,l+=r(f>>>10&1023|55296),
f=56320|f&1023),l+=r(f);return l}};if(e&&!e.nodeType)if(d)d.exports=f;else{c={}.hasOwnProperty;for(var u in f)c.call(f,u)&&(e[u]=f[u])}else c.utf8=f},{}],30:[function(c,d){function e(c){var d="";do d=g[c%m]+d,c=Math.floor(c/m);while(0<c);return d}function f(){var c=e(+new Date);return c!==q?(n=0,q=c):c+"."+e(n++)}for(var g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),m=64,l={},n=0,r=0,q;r<m;r++)l[g[r]]=r;f.encode=e;f.decode=function(c){var d=0;for(r=0;r<c.length;r++)d=
d*m+l[c.charAt(r)];return d};d.exports=f},{}],31:[function(c,d,e){function f(c,d){"object"==typeof c&&(d=c,c=void 0);d=d||{};var e=g(c),f=e.source,m=e.id,z=e.path,z=r[m]&&z in r[m].nsps;d.forceNew||d["force new connection"]||!1===d.multiplex||z?(n("ignoring socket cache for %s",f),f=l(f,d)):(r[m]||(n("new io instance for %s",f),r[m]=l(f,d)),f=r[m]);return f.socket(e.path)}var g=c("./url"),m=c("socket.io-parser"),l=c("./manager"),n=c("debug")("socket.io-client");d.exports=e=f;var r=e.managers={};e.protocol=
m.protocol;e.connect=f;e.Manager=c("./manager");e.Socket=c("./socket")},{"./manager":32,"./socket":34,"./url":35,debug:39,"socket.io-parser":47}],32:[function(c,d){function e(c,d){if(!(this instanceof e))return new e(c,d);c&&"object"==typeof c&&(d=c,c=void 0);d=d||{};d.path=d.path||"/socket.io";this.nsps={};this.subs=[];this.opts=d;this.reconnection(!1!==d.reconnection);this.reconnectionAttempts(d.reconnectionAttempts||Infinity);this.reconnectionDelay(d.reconnectionDelay||1E3);this.reconnectionDelayMax(d.reconnectionDelayMax||
5E3);this.randomizationFactor(d.randomizationFactor||0.5);this.backoff=new v({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==d.timeout?2E4:d.timeout);this.readyState="closed";this.uri=c;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];this.encoder=new l.Encoder;this.decoder=new l.Decoder;(this.autoConnect=!1!==d.autoConnect)&&this.open()}var f=c("engine.io-client"),g=c("./socket"),m=c("component-emitter"),
l=c("socket.io-parser"),n=c("./on"),r=c("component-bind"),q=c("debug")("socket.io-client:manager"),s=c("indexof"),v=c("backo2"),u=Object.prototype.hasOwnProperty;d.exports=e;e.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var c in this.nsps)u.call(this.nsps,c)&&this.nsps[c].emit.apply(this.nsps[c],arguments)};e.prototype.updateSocketIds=function(){for(var c in this.nsps)u.call(this.nsps,c)&&(this.nsps[c].id=this.engine.id)};m(e.prototype);e.prototype.reconnection=function(c){if(!arguments.length)return this._reconnection;
this._reconnection=!!c;return this};e.prototype.reconnectionAttempts=function(c){if(!arguments.length)return this._reconnectionAttempts;this._reconnectionAttempts=c;return this};e.prototype.reconnectionDelay=function(c){if(!arguments.length)return this._reconnectionDelay;this._reconnectionDelay=c;this.backoff&&this.backoff.setMin(c);return this};e.prototype.randomizationFactor=function(c){if(!arguments.length)return this._randomizationFactor;this._randomizationFactor=c;this.backoff&&this.backoff.setJitter(c);
return this};e.prototype.reconnectionDelayMax=function(c){if(!arguments.length)return this._reconnectionDelayMax;this._reconnectionDelayMax=c;this.backoff&&this.backoff.setMax(c);return this};e.prototype.timeout=function(c){if(!arguments.length)return this._timeout;this._timeout=c;return this};e.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&(this._reconnection&&0===this.backoff.attempts)&&this.reconnect()};e.prototype.open=e.prototype.connect=function(c){q("readyState %s",this.readyState);
if(~this.readyState.indexOf("open"))return this;q("opening %s",this.uri);var d=this.engine=f(this.uri,this.opts),e=this;this.readyState="opening";this.skipReconnect=!1;var g=n(d,"open",function(){e.onopen();c&&c()}),l=n(d,"error",function(d){q("connect_error");e.cleanup();e.readyState="closed";e.emitAll("connect_error",d);if(c){var f=Error("Connection error");f.data=d;c(f)}else e.maybeReconnectOnOpen()});if(!1!==this._timeout){var m=this._timeout;q("connect attempt will timeout after %d",m);var r=
setTimeout(function(){q("connect attempt timed out after %d",m);g.destroy();d.close();d.emit("error","timeout");e.emitAll("connect_timeout",m)},m);this.subs.push({destroy:function(){clearTimeout(r)}})}this.subs.push(g);this.subs.push(l);return this};e.prototype.onopen=function(){q("open");this.cleanup();this.readyState="open";this.emit("open");var c=this.engine;this.subs.push(n(c,"data",r(this,"ondata")));this.subs.push(n(c,"ping",r(this,"onping")));this.subs.push(n(c,"pong",r(this,"onpong")));this.subs.push(n(c,
"error",r(this,"onerror")));this.subs.push(n(c,"close",r(this,"onclose")));this.subs.push(n(this.decoder,"decoded",r(this,"ondecoded")))};e.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};e.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};e.prototype.ondata=function(c){this.decoder.add(c)};e.prototype.ondecoded=function(c){this.emit("packet",c)};e.prototype.onerror=function(c){q("error",c);this.emitAll("error",c)};e.prototype.socket=function(c){function d(){~s(f.connecting,
e)||f.connecting.push(e)}var e=this.nsps[c];if(!e){e=new g(this,c);this.nsps[c]=e;var f=this;e.on("connecting",d);e.on("connect",function(){e.id=f.engine.id});this.autoConnect&&d()}return e};e.prototype.destroy=function(c){c=s(this.connecting,c);~c&&this.connecting.splice(c,1);this.connecting.length||this.close()};e.prototype.packet=function(c){q("writing packet %j",c);var d=this;d.encoding?d.packetBuffer.push(c):(d.encoding=!0,this.encoder.encode(c,function(e){for(var f=0;f<e.length;f++)d.engine.write(e[f],
c.options);d.encoding=!1;d.processPacketQueue()}))};e.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var c=this.packetBuffer.shift();this.packet(c)}};e.prototype.cleanup=function(){q("cleanup");for(var c;c=this.subs.shift();)c.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};e.prototype.close=e.prototype.disconnect=function(){q("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"==this.readyState&&this.cleanup();
this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};e.prototype.onclose=function(c){q("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",c);this._reconnection&&!this.skipReconnect&&this.reconnect()};e.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var c=this;if(this.backoff.attempts>=this._reconnectionAttempts)q("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=
!1;else{var d=this.backoff.duration();q("will wait %dms before reconnect attempt",d);this.reconnecting=!0;var e=setTimeout(function(){c.skipReconnect||(q("attempting reconnect"),c.emitAll("reconnect_attempt",c.backoff.attempts),c.emitAll("reconnecting",c.backoff.attempts),c.skipReconnect||c.open(function(d){d?(q("reconnect attempt error"),c.reconnecting=!1,c.reconnect(),c.emitAll("reconnect_error",d.data)):(q("reconnect success"),c.onreconnect())}))},d);this.subs.push({destroy:function(){clearTimeout(e)}})}};
e.prototype.onreconnect=function(){var c=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",c)}},{"./on":33,"./socket":34,backo2:36,"component-bind":37,"component-emitter":38,debug:39,"engine.io-client":1,indexof:42,"socket.io-parser":47}],33:[function(c,d){d.exports=function(c,d,g){c.on(d,g);return{destroy:function(){c.removeListener(d,g)}}}},{}],34:[function(c,d){function e(c,d){this.io=c;this.nsp=d;this.json=this;this.ids=0;this.acks=
{};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;this.io.autoConnect&&this.open()}var f=c("socket.io-parser"),g=c("component-emitter"),m=c("to-array"),l=c("./on"),n=c("component-bind"),r=c("debug")("socket.io-client:socket"),q=c("has-binary");d.exports=e;var s={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},v=g.prototype.emit;g(e.prototype);
e.prototype.subEvents=function(){if(!this.subs){var c=this.io;this.subs=[l(c,"open",n(this,"onopen")),l(c,"packet",n(this,"onpacket")),l(c,"close",n(this,"onclose"))]}};e.prototype.open=e.prototype.connect=function(){if(this.connected)return this;this.subEvents();this.io.open();if("open"==this.io.readyState)this.onopen();this.emit("connecting");return this};e.prototype.send=function(){var c=m(arguments);c.unshift("message");this.emit.apply(this,c);return this};e.prototype.emit=function(c){if(s.hasOwnProperty(c))return v.apply(this,
arguments),this;var d=m(arguments),e=f.EVENT;q(d)&&(e=f.BINARY_EVENT);e={type:e,data:d,options:{}};e.options.compress=!this.flags||!1!==this.flags.compress;"function"==typeof d[d.length-1]&&(r("emitting packet with ack id %d",this.ids),this.acks[this.ids]=d.pop(),e.id=this.ids++);this.connected?this.packet(e):this.sendBuffer.push(e);delete this.flags;return this};e.prototype.packet=function(c){c.nsp=this.nsp;this.io.packet(c)};e.prototype.onopen=function(){r("transport is open - connecting");"/"!=
this.nsp&&this.packet({type:f.CONNECT})};e.prototype.onclose=function(c){r("close (%s)",c);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",c)};e.prototype.onpacket=function(c){if(c.nsp==this.nsp)switch(c.type){case f.CONNECT:this.onconnect();break;case f.EVENT:this.onevent(c);break;case f.BINARY_EVENT:this.onevent(c);break;case f.ACK:this.onack(c);break;case f.BINARY_ACK:this.onack(c);break;case f.DISCONNECT:this.ondisconnect();break;case f.ERROR:this.emit("error",c.data)}};
e.prototype.onevent=function(c){var d=c.data||[];r("emitting event %j",d);null!=c.id&&(r("attaching ack callback to event"),d.push(this.ack(c.id)));this.connected?v.apply(this,d):this.receiveBuffer.push(d)};e.prototype.ack=function(c){var d=this,e=!1;return function(){if(!e){e=!0;var g=m(arguments);r("sending ack %j",g);var l=q(g)?f.BINARY_ACK:f.ACK;d.packet({type:l,id:c,data:g})}}};e.prototype.onack=function(c){var d=this.acks[c.id];"function"==typeof d?(r("calling ack %s with %j",c.id,c.data),d.apply(this,
c.data),delete this.acks[c.id]):r("bad ack %s",c.id)};e.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};e.prototype.emitBuffered=function(){var c;for(c=0;c<this.receiveBuffer.length;c++)v.apply(this,this.receiveBuffer[c]);this.receiveBuffer=[];for(c=0;c<this.sendBuffer.length;c++)this.packet(this.sendBuffer[c]);this.sendBuffer=[]};e.prototype.ondisconnect=function(){r("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};
e.prototype.destroy=function(){if(this.subs){for(var c=0;c<this.subs.length;c++)this.subs[c].destroy();this.subs=null}this.io.destroy(this)};e.prototype.close=e.prototype.disconnect=function(){this.connected&&(r("performing disconnect (%s)",this.nsp),this.packet({type:f.DISCONNECT}));this.destroy();if(this.connected)this.onclose("io client disconnect");return this};e.prototype.compress=function(c){this.flags=this.flags||{};this.flags.compress=c;return this}},{"./on":33,"component-bind":37,"component-emitter":38,
debug:39,"has-binary":41,"socket.io-parser":47,"to-array":51}],35:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=c("parseuri"),g=c("debug")("socket.io-client:url");d.exports=function(c,d){var n=c;d=d||e.location;null==c&&(c=d.protocol+"//"+d.host);"string"==typeof c&&("/"==c.charAt(0)&&(c="/"==c.charAt(1)?d.protocol+c:d.host+c),/^(https?|wss?):\/\//.test(c)||(g("protocol-less url %s",c),c="undefined"!=typeof d?d.protocol+
"//"+c:"https://"+c),g("parse %s",c),n=f(c));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;n.id=n.protocol+"://"+r+":"+n.port;n.href=n.protocol+"://"+r+(d&&d.port==n.port?"":":"+n.port);return n}},{debug:39,parseuri:45}],36:[function(c,d){function e(c){c=c||{};this.ms=c.min||100;this.max=c.max||1E4;this.factor=c.factor||2;this.jitter=0<c.jitter&&1>=c.jitter?c.jitter:0;this.attempts=
0}d.exports=e;e.prototype.duration=function(){var c=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter)var d=Math.random(),e=Math.floor(d*this.jitter*c),c=0==(Math.floor(10*d)&1)?c-e:c+e;return Math.min(c,this.max)|0};e.prototype.reset=function(){this.attempts=0};e.prototype.setMin=function(c){this.ms=c};e.prototype.setMax=function(c){this.max=c};e.prototype.setJitter=function(c){this.jitter=c}},{}],37:[function(c,d){var e=[].slice;d.exports=function(c,d){"string"==typeof d&&(d=c[d]);if("function"!=
typeof d)throw Error("bind() requires a function");var m=e.call(arguments,2);return function(){return d.apply(c,m.concat(e.call(arguments)))}}},{}],38:[function(c,d){function e(c){if(c){for(var d in e.prototype)c[d]=e.prototype[d];return c}}d.exports=e;e.prototype.on=e.prototype.addEventListener=function(c,d){this._callbacks=this._callbacks||{};(this._callbacks["$"+c]=this._callbacks["$"+c]||[]).push(d);return this};e.prototype.once=function(c,d){function e(){this.off(c,e);d.apply(this,arguments)}
e.fn=d;this.on(c,e);return this};e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(c,d){this._callbacks=this._callbacks||{};if(0==arguments.length)return this._callbacks={},this;var e=this._callbacks["$"+c];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+c],this;for(var l,n=0;n<e.length;n++)if(l=e[n],l===d||l.fn===d){e.splice(n,1);break}return this};e.prototype.emit=function(c){this._callbacks=this._callbacks||
{};var d=[].slice.call(arguments,1),e=this._callbacks["$"+c];if(e)for(var e=e.slice(0),l=0,n=e.length;l<n;++l)e[l].apply(this,d);return this};e.prototype.listeners=function(c){this._callbacks=this._callbacks||{};return this._callbacks["$"+c]||[]};e.prototype.hasListeners=function(c){return!!this.listeners(c).length}},{}],39:[function(c,d,e){arguments[4][17][0].apply(e,arguments)},{"./debug":40,dup:17}],40:[function(c,d,e){arguments[4][18][0].apply(e,arguments)},{dup:18,ms:44}],41:[function(c,d){var e=
"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},f=c("isarray");d.exports=function(c){function d(c){if(!c)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(c)||e.ArrayBuffer&&c instanceof ArrayBuffer||e.Blob&&c instanceof Blob||e.File&&c instanceof File)return!0;if(f(c))for(var g=0;g<c.length;g++){if(d(c[g]))return!0}else if(c&&"object"==typeof c)for(g in c.toJSON&&"function"==typeof c.toJSON&&(c=c.toJSON()),c)if(Object.prototype.hasOwnProperty.call(c,
g)&&d(c[g]))return!0;return!1}return d(c)}},{isarray:43}],42:[function(c,d,e){arguments[4][23][0].apply(e,arguments)},{dup:23}],43:[function(c,d,e){arguments[4][24][0].apply(e,arguments)},{dup:24}],44:[function(c,d,e){arguments[4][25][0].apply(e,arguments)},{dup:25}],45:[function(c,d,e){arguments[4][28][0].apply(e,arguments)},{dup:28}],46:[function(c,d,e){var f="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{},g=c("isarray"),m=c("./is-buffer");
e.deconstructPacket=function(c){function d(c){if(!c)return c;if(m(c)){var f={_placeholder:!0,num:e.length};e.push(c);return f}if(g(c)){for(var f=Array(c.length),l=0;l<c.length;l++)f[l]=d(c[l]);return f}if("object"==typeof c&&!(c instanceof Date)){f={};for(l in c)f[l]=d(c[l]);return f}return c}var e=[];c.data=d(c.data);c.attachments=e.length;return{packet:c,buffers:e}};e.reconstructPacket=function(c,d){function e(c){if(c&&c._placeholder)return d[c.num];if(g(c))for(var f=0;f<c.length;f++)c[f]=e(c[f]);
else if(c&&"object"==typeof c)for(f in c)c[f]=e(c[f]);return c}c.data=e(c.data);c.attachments=void 0;return c};e.removeBlobs=function(c,d){function e(c,l,t){if(!c)return c;if(f.Blob&&c instanceof Blob||f.File&&c instanceof File){q++;var z=new FileReader;z.onload=function(){t?t[l]=this.result:s=this.result;--q||d(s)};z.readAsArrayBuffer(c)}else if(g(c))for(z=0;z<c.length;z++)e(c[z],z,c);else if(c&&"object"==typeof c&&!m(c))for(z in c)e(c[z],z,c)}var q=0,s=c;e(s);q||d(s)}},{"./is-buffer":48,isarray:43}],
47:[function(c,d,e){function f(){}function g(c){var d,f=!1;d=""+c.type;if(e.BINARY_EVENT==c.type||e.BINARY_ACK==c.type)d+=c.attachments,d+="-";c.nsp&&"/"!=c.nsp&&(f=!0,d+=c.nsp);null!=c.id&&(f&&(d+=",",f=!1),d+=c.id);null!=c.data&&(f&&(d+=","),d+=q.stringify(c.data));r("encoded %j as %s",c,d);return d}function m(){this.reconstructor=null}function l(c){this.reconPack=c;this.buffers=[]}function n(){return{type:e.ERROR,data:"parser error"}}var r=c("debug")("socket.io-parser"),q=c("json3");c("isarray");
d=c("component-emitter");var s=c("./binary"),v=c("./is-buffer");e.protocol=4;e.types="CONNECT DISCONNECT EVENT BINARY_EVENT ACK BINARY_ACK ERROR".split(" ");e.CONNECT=0;e.DISCONNECT=1;e.EVENT=2;e.ACK=3;e.ERROR=4;e.BINARY_EVENT=5;e.BINARY_ACK=6;e.Encoder=f;e.Decoder=m;f.prototype.encode=function(c,d){r("encoding packet %j",c);if(e.BINARY_EVENT==c.type||e.BINARY_ACK==c.type)s.removeBlobs(c,function(c){var e=s.deconstructPacket(c);c=g(e.packet);e=e.buffers;e.unshift(c);d(e)});else{var f=g(c);d([f])}};
d(m.prototype);m.prototype.add=function(c){if("string"==typeof c){a:{var d={},f=0;d.type=Number(c.charAt(0));if(null==e.types[d.type])c=n();else{if(e.BINARY_EVENT==d.type||e.BINARY_ACK==d.type){for(var g="";"-"!=c.charAt(++f)&&!(g+=c.charAt(f),f==c.length););if(g!=Number(g)||"-"!=c.charAt(f))throw Error("Illegal attachments");d.attachments=Number(g)}if("/"==c.charAt(f+1))for(d.nsp="";++f;){g=c.charAt(f);if(","==g)break;d.nsp+=g;if(f==c.length)break}else d.nsp="index.html";g=c.charAt(f+1);if(""!==g&&Number(g)==
g){for(d.id="";++f;){g=c.charAt(f);if(null==g||Number(g)!=g){--f;break}d.id+=c.charAt(f);if(f==c.length)break}d.id=Number(d.id)}if(c.charAt(++f))try{d.data=q.parse(c.substr(f))}catch(m){c=n();break a}r("decoded %s as %j",c,d);c=d}}e.BINARY_EVENT==c.type||e.BINARY_ACK==c.type?(this.reconstructor=new l(c),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",c)):this.emit("decoded",c)}else if(v(c)||c.base64)if(this.reconstructor){if(c=this.reconstructor.takeBinaryData(c))this.reconstructor=
null,this.emit("decoded",c)}else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+c);};m.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};l.prototype.takeBinaryData=function(c){this.buffers.push(c);return this.buffers.length==this.reconPack.attachments?(c=s.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),c):null};l.prototype.finishedReconstruction=function(){this.reconPack=null;
this.buffers=[]}},{"./binary":46,"./is-buffer":48,"component-emitter":49,debug:39,isarray:43,json3:50}],48:[function(c,d){var e="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:{};d.exports=function(c){return e.Buffer&&e.Buffer.isBuffer(c)||e.ArrayBuffer&&c instanceof ArrayBuffer}},{}],49:[function(c,d,e){arguments[4][15][0].apply(e,arguments)},{dup:15}],50:[function(c,d,e){c="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==
typeof global?global:{};var f=function(c,d){function e(c){if(e[c]!==U)return e[c];var f;if("bug-string-char-index"==c)f="a"!="a"[0];else if("json"==c)f=e("json-stringify")&&e("json-parse");else{var g;if("json-stringify"==c){f=d.stringify;var m="function"==typeof f&&X;if(m){(g=function(){return 1}).toJSON=g;try{m="0"===f(0)&&"0"===f(new l)&&'""'==f(new n)&&f(D)===U&&f(U)===U&&f()===U&&"1"===f(g)&&"[1]"==f([g])&&"[null]"==f([U])&&"null"==f(null)&&"[null,null,null]"==f([U,D,null])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==
f({a:[g,!0,!1,null,"\x00\b\n\f\r\t"]})&&"1"===f(null,g)&&"[\n 1,\n 2\n]"==f([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==f(new r(-864E13))&&'"+275760-09-13T00:00:00.000Z"'==f(new r(864E13))&&'"-000001-01-01T00:00:00.000Z"'==f(new r(-621987552E5))&&'"1969-12-31T23:59:59.999Z"'==f(new r(-1))}catch(q){m=!1}}f=m}if("json-parse"==c){f=d.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){g=f('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var s=5==g.a.length&&1===g.a[0];if(s){try{s=!f('"\t"')}catch(fa){}if(s)try{s=
1!==f("01")}catch(A){}if(s)try{s=1!==f("1.")}catch(B){}}}}catch(I){s=!1}f=s}}return e[c]=!!f}c||(c=m.Object());d||(d=m.Object());var l=c.Number||m.Number,n=c.String||m.String,q=c.Object||m.Object,r=c.Date||m.Date,sa=c.SyntaxError||m.SyntaxError,W=c.TypeError||m.TypeError,ca=c.Math||m.Math,T=c.JSON||m.JSON;"object"==typeof T&&T&&(d.stringify=T.stringify,d.parse=T.parse);var q=q.prototype,D=q.toString,I,V,U,X=new r(-0xc782b5b800cec);try{X=-109252==X.getUTCFullYear()&&0===X.getUTCMonth()&&1===X.getUTCDate()&&
10==X.getUTCHours()&&37==X.getUTCMinutes()&&6==X.getUTCSeconds()&&708==X.getUTCMilliseconds()}catch(ub){}if(!e("json")){var na=e("bug-string-char-index");if(!X)var ha=ca.floor,$a=[0,31,59,90,120,151,181,212,243,273,304,334],wa=function(c,d){return $a[d]+365*(c-1970)+ha((c-1969+(d=+(1<d)))/4)-ha((c-1901+d)/100)+ha((c-1601+d)/400)};if(!(I=q.hasOwnProperty))I=function(c){var d={},e;(d.__proto__=null,d.__proto__={toString:1},d).toString!=D?I=function(c){var d=this.__proto__;c=c in(this.__proto__=null,
this);this.__proto__=d;return c}:(e=d.constructor,I=function(c){var d=(this.constructor||e).prototype;return c in this&&!(c in d&&this[c]===d[c])});d=null;return I.call(this,c)};V=function(c,d){var e=0,f,l,m;(f=function(){this.valueOf=0}).prototype.valueOf=0;l=new f;for(m in l)I.call(l,m)&&e++;f=l=null;e?V=2==e?function(c,d){var e={},f="[object Function]"==D.call(c),g;for(g in c)!(f&&"prototype"==g)&&(!I.call(e,g)&&(e[g]=1)&&I.call(c,g))&&d(g)}:function(c,d){var e="[object Function]"==D.call(c),f,
g;for(f in c)!(e&&"prototype"==f)&&(I.call(c,f)&&!(g="constructor"===f))&&d(f);(g||I.call(c,f="constructor"))&&d(f)}:(l="valueOf toString toLocaleString propertyIsEnumerable isPrototypeOf hasOwnProperty constructor".split(" "),V=function(c,d){var e="[object Function]"==D.call(c),f,m=!e&&"function"!=typeof c.constructor&&g[typeof c.hasOwnProperty]&&c.hasOwnProperty||I;for(f in c)!(e&&"prototype"==f)&&m.call(c,f)&&d(f);for(e=l.length;f=l[--e];m.call(c,f)&&d(f));});return V(c,d)};if(!e("json-stringify")){var ab=
{92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},ia=function(c,d){return("000000"+(d||0)).slice(-c)},Y=function(c){for(var d='"',e=0,f=c.length,g=!na||10<f,l=g&&(na?c.split(""):c);e<f;e++){var m=c.charCodeAt(e);switch(m){case 8:case 9:case 10:case 12:case 13:case 34:case 92:d+=ab[m];break;default:if(32>m){d+="\\u00"+ia(2,m.toString(16));break}d+=g?l[e]:c.charAt(e)}}return d+'"'},Ca=function(c,d,e,f,g,l,m){var n,q,r,s,t,v,u,p,z;try{n=d[c]}catch(A){}if("object"==typeof n&&n)if(q=D.call(n),
"[object Date]"==q&&!I.call(n,"toJSON"))if(n>-1/0&&n<1/0){if(wa){s=ha(n/864E5);for(q=ha(s/365.2425)+1970-1;wa(q+1,0)<=s;q++);for(r=ha((s-wa(q,0))/30.42);wa(q,r+1)<=s;r++);s=1+s-wa(q,r);t=(n%864E5+864E5)%864E5;v=ha(t/36E5)%24;u=ha(t/6E4)%60;p=ha(t/1E3)%60;t%=1E3}else q=n.getUTCFullYear(),r=n.getUTCMonth(),s=n.getUTCDate(),v=n.getUTCHours(),u=n.getUTCMinutes(),p=n.getUTCSeconds(),t=n.getUTCMilliseconds();n=(0>=q||1E4<=q?(0>q?"-":"+")+ia(6,0>q?-q:q):ia(4,q))+"-"+ia(2,r+1)+"-"+ia(2,s)+"T"+ia(2,v)+":"+
ia(2,u)+":"+ia(2,p)+"."+ia(3,t)+"Z"}else n=null;else if("function"==typeof n.toJSON&&("[object Number]"!=q&&"[object String]"!=q&&"[object Array]"!=q||I.call(n,"toJSON")))n=n.toJSON(c);e&&(n=e.call(d,c,n));if(null===n)return"null";q=D.call(n);if("[object Boolean]"==q)return""+n;if("[object Number]"==q)return n>-1/0&&n<1/0?""+n:"null";if("[object String]"==q)return Y(""+n);if("object"==typeof n){for(c=m.length;c--;)if(m[c]===n)throw W();m.push(n);z=[];d=l;l+=g;if("[object Array]"==q){r=0;for(c=n.length;r<
c;r++)q=Ca(r,n,e,f,g,l,m),z.push(q===U?"null":q);c=z.length?g?"[\n"+l+z.join(",\n"+l)+"\n"+d+"]":"["+z.join(",")+"]":"[]"}else V(f||n,function(c){var d=Ca(c,n,e,f,g,l,m);d!==U&&z.push(Y(c)+":"+(g?" ":"")+d)}),c=z.length?g?"{\n"+l+z.join(",\n"+l)+"\n"+d+"}":"{"+z.join(",")+"}":"{}";m.pop();return c}};d.stringify=function(c,d,e){var f,l,m,n;if(g[typeof d]&&d)if("[object Function]"==(n=D.call(d)))l=d;else if("[object Array]"==n){m={};for(var q=0,r=d.length,s;q<r;s=d[q++],(n=D.call(s),"[object String]"==
n||"[object Number]"==n)&&(m[s]=1));}if(e)if("[object Number]"==(n=D.call(e))){if(0<(e-=e%1)){f="";for(10<e&&(e=10);f.length<e;f+=" ");}}else"[object String]"==n&&(f=10>=e.length?e:e.slice(0,10));return Ca("",(s={},s[""]=c,s),l,m,f,"",[])}}if(!e("json-parse")){var cb=n.fromCharCode,Ka={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A,aa,O=function(){A=aa=null;throw sa();},ba=function(){for(var c=aa,d=c.length,e,f,g,l,m;A<d;)switch(m=c.charCodeAt(A),m){case 9:case 10:case 13:case 32:A++;
break;case 123:case 125:case 91:case 93:case 58:case 44:return e=na?c.charAt(A):c[A],A++,e;case 34:e="@";for(A++;A<d;)if(m=c.charCodeAt(A),32>m)O();else if(92==m)switch(m=c.charCodeAt(++A),m){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=Ka[m];A++;break;case 117:f=++A;for(g=A+4;A<g;A++)m=c.charCodeAt(A),48<=m&&57>=m||(97<=m&&102>=m||65<=m&&70>=m)||O();e+=cb("0x"+c.slice(f,A));break;default:O()}else{if(34==m)break;m=c.charCodeAt(A);for(f=A;32<=m&&92!=m&&34!=m;)m=c.charCodeAt(++A);
e+=c.slice(f,A)}if(34==c.charCodeAt(A))return A++,e;O();default:f=A;45==m&&(l=!0,m=c.charCodeAt(++A));if(48<=m&&57>=m){for(48==m&&(m=c.charCodeAt(A+1),48<=m&&57>=m)&&O();A<d&&(m=c.charCodeAt(A),48<=m&&57>=m);A++);if(46==c.charCodeAt(A)){for(g=++A;g<d&&(m=c.charCodeAt(g),48<=m&&57>=m);g++);g==A&&O();A=g}m=c.charCodeAt(A);if(101==m||69==m){m=c.charCodeAt(++A);(43==m||45==m)&&A++;for(g=A;g<d&&(m=c.charCodeAt(g),48<=m&&57>=m);g++);g==A&&O();A=g}return+c.slice(f,A)}l&&O();if("true"==c.slice(A,A+4))return A+=
4,!0;if("false"==c.slice(A,A+5))return A+=5,!1;if("null"==c.slice(A,A+4))return A+=4,null;O()}return"$"},Da=function(c){var d,e;"$"==c&&O();if("string"==typeof c){if("@"==(na?c.charAt(0):c[0]))return c.slice(1);if("["==c){for(d=[];;e||(e=!0)){c=ba();if("]"==c)break;e&&(","==c?(c=ba(),"]"==c&&O()):O());","==c&&O();d.push(Da(c))}return d}if("{"==c){for(d={};;e||(e=!0)){c=ba();if("}"==c)break;e&&(","==c?(c=ba(),"}"==c&&O()):O());(","==c||"string"!=typeof c||"@"!=(na?c.charAt(0):c[0])||":"!=ba())&&O();
d[c.slice(1)]=Da(ba())}return d}O()}return c},Qa=function(c,d,e){e=Ra(c,d,e);e===U?delete c[d]:c[d]=e},Ra=function(c,d,e){var f=c[d],g;if("object"==typeof f&&f)if("[object Array]"==D.call(f))for(g=f.length;g--;)Qa(f,g,e);else V(f,function(c){Qa(f,c,e)});return e.call(c,d,f)};d.parse=function(c,d){var e,f;A=0;aa=""+c;e=Da(ba());"$"!=ba()&&O();A=aa=null;return d&&"[object Function]"==D.call(d)?Ra((f={},f[""]=e,f),"",d):e}}}d.runInContext=f;return d},g={"function":!0,object:!0};e=g[typeof e]&&e&&!e.nodeType&&
e;var m=g[typeof window]&&window||this;if((d=e&&g[typeof d]&&d&&!d.nodeType&&"object"==typeof c&&c)&&(d.global===d||d.window===d||d.self===d))m=d;if(e)f(m,e);else{var l=m.JSON,n=m.JSON3,r=!1,q=f(m,m.JSON3={noConflict:function(){r||(r=!0,m.JSON=l,m.JSON3=n,l=n=null);return q}});m.JSON={parse:q.parse,stringify:q.stringify}}},{}],51:[function(c,d){d.exports=function(c,d){for(var g=[],m=(d=d||0)||0;m<c.length;m++)g[m-d]=c[m];return g}},{}]},{},[31])(31)});var shared_game={GameState:function(b){var c={startTime:0,minPlayerSize:1,maxPlayerSize:2,flashJoinDuration:2E3,matchAnnounceDuration:2E3,maxDecisionInterval:-1,decisionAnimDuration:1E3,playerLeftDuration:2E3,resultsDuration:1E4,phase:0,playerTurn:0,playerTurnTime:0,boardState:[],boardRows:3,boardCols:3,init:function(b){c.startTime=b;c.players=[];c.playersHash={};c.resetBoard();return c},packData:function(){for(var b={players:[]},e=0,f=c.players.length;e<f;e++)b.players.push(c.players[e].packData());
b.startTime=c.startTime;b.phase=c.phase;b.playerTurn=c.playerTurn;b.playerTurnTime=c.playerTurnTime;b.boardState=[];e=0;for(f=c.boardState.length;e<f;e++)b.boardState.push(c.boardState[e]);return b},importData:function(b){if(b){isNaN(b.startTime)||(c.startTime=b.startTime);isNaN(b.phase)||(c.phase=b.phase);isNaN(b.playerTurn)||(c.playerTurn=b.playerTurn);isNaN(b.playerTurnTime)||(c.playerTurnTime=b.playerTurnTime);if(b.players){c.players=[];c.playersHash={};for(var e=0,f=b.players.length;e<f;e++){var g=
b.players[e],m=new shared_game.Player(g.id);m.importData(g);c.addPlayer(m)}}if(b.boardState){c.boardState=[];e=0;for(f=b.boardState.length;e<f;e++)c.boardState.push(b.boardState[e])}}},findPlayerById:function(b){var e=null;if(c.playersHash&&"undefined"!=typeof c.playersHash[b])return c.playersHash[b];for(var f=0,g=c.players.length;f<g;f++)if(c.players[f].id==b){e=c.players[f];c.playersHash&&(c.playersHash[e.id]=e);break}return e},addPlayer:function(b){if(!b||isNaN(b.id)||c.playersHash&&"undefined"!=
typeof c.playersHash[b.id])return null;c.players.push(b);c.playersHash[b.id]=b;c.reorderPlayers();return b.id},removePlayer:function(b){if(isNaN(b))return null;for(var e=[],f=0,g=c.players.length;f<g;f++)c.players[f].id!=b&&e.push(c.players[f]);c.players=e;delete c.playersHash[b];c.reorderPlayers()},reorderPlayers:function(){if(1==c.players.length){var b=c.players[0];0>b.order&&(b.order=0)}else for(var e=0,f=c.players.length;e<f;e++)if(b=c.players[e],0>b.order)for(var g=0,m=c.players.length;g<m;g++){var l=
c.players[g];if(l!=b)for(var n=0,r=c.maxPlayerSize;n<r;n++)if(n!=l.order){b.order=n;break}}},resetBoard:function(){c.boardState=[];for(var b=0,e=c.boardCols;b<e;b++)for(var f=0,g=c.boardRows;f<g;f++)c.boardState.push(-1)}};return c.init(b)},Player:function(b){var c={readyFlag:!1,leftGameFlag:!1,botFlag:!1,avatarId:0,order:-1,symbolId:0,lastDecision:-1,qcount:0,qscore:0,init:function(b){c.id=b;return c},packData:function(){var b={};b.id=c.id;b.name=c.name;b.avatarId=c.avatarId;b.readyFlag=c.readyFlag;
b.leftGameFlag=c.leftGameFlag;b.botFlag=c.botFlag;b.symbolId=c.symbolId;b.order=c.order;return b},importData:function(b){b&&(isNaN(b.id)||(c.id=b.id),null!=b.name&&(c.name=b.name),null!=b.avatarId&&(c.avatarId=b.avatarId),null!=b.readyFlag&&(c.readyFlag=b.readyFlag),null!=b.leftGameFlag&&(c.leftGameFlag=b.leftGameFlag),null!=b.botFlag&&(c.botFlag=b.botFlag),isNaN(b.symbolId)||(c.symbolId=b.symbolId),isNaN(b.order)||(c.order=b.order))}};return c.init(b)},Update:function(){var b={init:function(){b.eventList=
[];return b},packData:function(){for(var c={eventList:[]},d=0,e=b.eventList.length;d<e;d++)c.eventList.push(b.eventList[d].packData());return c}};return b.init()},Event:function(b,c){var d={init:function(b,c){d.type=b;d.time=c;d.info=null;return d},packData:function(){var b={};b.type=d.type;b.time=d.time;b.info=d.info;return b}};return d.init(b,c)},Getsharedata:function(){return{questionId:1}},EventType:{PHASE_TRANSITION:0,PLAYER_READY:1,PLAYER_LEAVE:2,PLAYER_DECISION:3,MATCH_RESULT:4},PhaseEnum:{PHASE_INIT:0,
PHASE_FLASHJOIN:1,PHASE_MATCH_ANNOUNCE:2,PHASE_PLAYER_DECISION:3,PHASE_DECISION_ANIM:4,PHASE_MATCH_RESULTS:5,PHASE_PLAYER_LEFT:6,PHASE_END:7},MessageType:{ERROR:0,USER_CONFIRMED:1,USER_CONNECTED:2,USER_DISCONNECTED:3,REQUEST_ROOM:10,PLAYER_CONFIRMED:11,REQUEST_ROOM_CONFIRMED:12,REQUEST_ROOM_REJECTED:13,LEAVE_ROOM:20,REQUEST_GAMESTATE:30,GAMESTATE:31,GAMESTATE_UPDATE:32,CLIENT_UPDATE:40,ROOM_NOTIFICATION:50,CHAT_MESSAGE:60,PLAYER_ANSWER:70,NEXT_QUESTION:1,GAME_PAUSED:0,PLAYER_COUNT:0,PLAYER_START:80,
QUESTION_SEQUENCE:90,PLAYER_READY:99},ErrorType:{UNKNOWN:0,INVALID_REQUEST:1,VERSION_MISMATCH:2,INVALID_NAME:3,KICKED_DUE_TO_INACTIVITY:4},seed:6,seededRandom:function(b,c){c=c||0;shared_game.seed=(9301*shared_game.seed+49297)%233280;return c+shared_game.seed/233280*((b||1)-c)}};"undefined"!==typeof module&&(module.exports.shared_game=shared_game);"undefined"!==typeof require&&(shared_game=require("shared_game.html").shared_game);
var decision_engine={updateGameState:function(b){if(b.gamestate.phase==shared_game.PhaseEnum.PHASE_INIT){var c=decision_engine.checkGameReady(b),d=decision_engine.getActivePlayerCount(b);0<d&&2>d&&(c=!1);if(c){var e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c);e.info={};e.info.phase=shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE;e.info.gamestate=b.gamestate.packData();b.pendingEventsQueue.push(e);b.applyEvent(e)}}else if(b.gamestate.phase==shared_game.PhaseEnum.PHASE_FLASHJOIN){var c=
Date.now(),e=!1,f=c-b.gamestate.playerTurnTime;f>b.gamestate.flashJoinDuration&&(e=!0);e&&(e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c),e.info={},e.info.phase=shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE,2>decision_engine.getActivePlayerCount(b)&&(e.info.phase=shared_game.PhaseEnum.PHASE_INIT,e.info.gamestate=b.gamestate.packData()),b.pendingEventsQueue.push(e),b.applyEvent(e))}else if(b.gamestate.phase==shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE){if(c=Date.now(),
e=!1,f=c-b.gamestate.playerTurnTime,f>b.gamestate.matchAnnounceDuration&&(e=!0),e){b.gamestate.playerTurn=0;if((d=b.gamestate.players[b.gamestate.playerTurn])&&1==d.symbolId)b.gamestate.playerTurn=1;e=shared_game.EventType.PHASE_TRANSITION;c=Date.now();e=new shared_game.Event(e,c);e.info={};e.info.phase=shared_game.PhaseEnum.PHASE_PLAYER_DECISION;e.info.playerTurn=b.gamestate.playerTurn;2>decision_engine.getActivePlayerCount(b)&&(e.info.phase=shared_game.PhaseEnum.PHASE_INIT,e.info.gamestate=b.gamestate.packData());
b.pendingEventsQueue.push(e);b.applyEvent(e)}}else if(b.gamestate.phase==shared_game.PhaseEnum.PHASE_PLAYER_DECISION){if(c=Date.now(),d=b.gamestate.players[b.gamestate.playerTurn])if(e=!1,f=c-b.gamestate.playerTurnTime,0<=b.gamestate.maxDecisionInterval&&f>b.gamestate.maxDecisionInterval&&(e=!0),e&&(d.botFlag?(b.removeBotPlayers(),e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c),e.info={},e.info.phase=shared_game.PhaseEnum.PHASE_INIT,e.info.gamestate=b.gamestate.packData(),
b.pendingEventsQueue.push(e),b.applyEvent(e)):(e=b.findPlayerById(d.id))&&b.gamehost.kickPlayer(b,e,100)),d.botFlag){e=!1;f=c-b.gamestate.playerTurnTime;if(void 0==d.botDelay||null==d.botDelay)d.botDelay=Math.floor(1E3*(0.5+1*Math.random()));0<=d.botDelay&&f>d.botDelay&&(e=!0);e&&(f=decision_engine.makeBotDecision(b,d),null!=f&&(e=shared_game.EventType.PLAYER_DECISION,e=new shared_game.Event(e,c),e.info={},e.info.playerId=d.id,e.info.decision=f,b.pendingEventsQueue.push(e),b.applyEvent(e)))}}else b.gamestate.phase==
shared_game.PhaseEnum.PHASE_DECISION_ANIM?(c=Date.now(),e=!1,f=c-b.gamestate.playerTurnTime,f>b.gamestate.decisionAnimDuration&&(e=!0),e&&(c=!1,d=b.gamestate.players[b.gamestate.playerTurn],d=decision_engine.checkBoardConditions(b,{playerId:d.id,decision:d.lastDecision,symbolId:d.symbolId}),null!==d&&(c=!0),c?(e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c),e.info={},e.info.phase=shared_game.PhaseEnum.PHASE_MATCH_RESULTS,e.info.winner=d):(b.gamestate.playerTurn+=
1,1<b.gamestate.playerTurn&&(b.gamestate.playerTurn=0),e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c),e.info={},e.info.phase=shared_game.PhaseEnum.PHASE_PLAYER_DECISION,e.info.playerTurn=b.gamestate.playerTurn,2>decision_engine.getActivePlayerCount(b)&&(e.info.phase=shared_game.PhaseEnum.PHASE_INIT,e.info.gamestate=b.gamestate.packData())),b.pendingEventsQueue.push(e),b.applyEvent(e))):b.gamestate.phase==shared_game.PhaseEnum.PHASE_MATCH_RESULTS?(c=Date.now(),e=
!1,f=c-b.gamestate.playerTurnTime,f>b.gamestate.resultsDuration&&(e=!0),e&&(e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c),e.info={},e.info.phase=shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE,2>decision_engine.getActivePlayerCount(b)&&(e.info.phase=shared_game.PhaseEnum.PHASE_INIT,e.info.gamestate=b.gamestate.packData()),b.pendingEventsQueue.push(e),b.applyEvent(e))):b.gamestate.phase==shared_game.PhaseEnum.PHASE_PLAYER_LEFT&&(c=Date.now(),e=!1,f=c-b.gamestate.playerTurnTime,
f>b.gamestate.playerLeftDuration&&(e=!0),e&&(e=shared_game.EventType.PHASE_TRANSITION,c=Date.now(),e=new shared_game.Event(e,c),e.info={},e.info.phase=shared_game.PhaseEnum.PHASE_INIT,e.info.gamestate=b.gamestate.packData(),b.pendingEventsQueue.push(e),b.applyEvent(e)))},kickPlayerId:function(b,c){if("function"==typeof b.gamehost.kickPlayer){var d=b.findPlayerById(c);b.gamehost.kickPlayer(b,d,shared_game.ErrorType.KICKED_DUE_TO_INACTIVITY)}},checkGameReady:function(b){for(var c=!0,d=0,e=b.gamestate.players.length;d<
e;d++){var f=b.gamestate.players[d];if(!f.botFlag&&!f.readyFlag){c=!1;break}}return c},checkBoardConditions:function(b,c){var d=b.gamestate.boardState;if(!c)return null;if(decision_engine.testWinBoard(b,c))return c.symbolId;for(var e=0,f=0,g=d.length;f<g;f++)-1!=d[f]&&(e+=1);return 8<=e?-1:null},getActivePlayerCount:function(b){for(var c=0,d=0,e=b.gamestate.players.length;d<e;d++)b.gamestate.players[d].leftGameFlag||c++;return c},onPlayerJoin:function(b){if(2<decision_engine.getActivePlayerCount(b))for(var c=
0,d=b.gamestate.players.length;c<d;c++){var e=b.gamestate.players[c];e.botFlag&&(e.leftGameFlag=!0)}2==decision_engine.getActivePlayerCount(b)&&(c=shared_game.EventType.PHASE_TRANSITION,d=Date.now(),c=new shared_game.Event(c,d),c.info={},c.info.phase=shared_game.PhaseEnum.PHASE_FLASHJOIN,c.info.gamestate=b.gamestate.packData(),b.pendingEventsQueue.push(c),b.applyEvent(c))},makeBotDecision:function(b,c){c.botDelay=Math.floor(1E3*(0.5+1*Math.random()));var d=b.gamestate.boardState,e=c.symbolId,f=0;
0==e&&(f=1);for(var g=!0,m=0,l=d.length;m<l;m++)if(-1!=d[m]){g=!1;break}if(g){if(0.5>Math.random()){var n=[0,2,6,8],d=Math.floor(Math.random()*n.length);return n[d]}return 4}for(var r=0,n=0,g=[],m=0,l=d.length;m<l;m++)-1!=d[m]?d[m]==e?r+=1:n+=1:g.push(m);if(0==r){if(-1==d[4])return 4;n=[0,2,6,8];d=Math.floor(Math.random()*n.length);return n[d]}if(2<=r){m=0;for(l=g.length;m<l;m++){r={};r.decision=g[m];r.symbolId=e;d[r.decision]=r.symbolId;var q=decision_engine.testWinBoard(b,r);d[r.decision]=-1;if(q)return r.decision}}if(2<=
n){m=0;for(l=g.length;m<l;m++)if(r={},r.decision=g[m],r.symbolId=f,d[r.decision]=r.symbolId,q=decision_engine.testWinBoard(b,r),d[r.decision]=-1,q)return r.decision}e=[0,2,8,6];m=0;for(l=e.length;m<l;m++)if(n=e[m],d[n]==f&&(n=null,m+2<e.length?n=e[m+2]:0<=m-2&&(n=e[m-2]),d[n]==f)){n=[];r=0;for(q=g.length;r<q;r++){var s=g[r];(1==s||3==s||5==s||7==s)&&n.push(s)}if(0<n.length)return d=Math.floor(Math.random()*n.length),n[d]}if(-1==d[4])return 4;e=[0,2,8,6];m=0;for(l=e.length;m<l;m++)if(n=e[m],d[n]==
f&&(n=null,m+2<e.length?n=e[m+2]:0<=m-2&&(n=e[m-2]),null!=n&&-1==d[n]))return n;n=[];m=0;for(l=g.length;m<l;m++)s=g[m],(0==s||2==s||6==s||8==s)&&n.push(s);if(0<n.length)return d=Math.floor(Math.random()*n.length),n[d];n=[];m=0;for(l=g.length;m<l;m++)s=g[m],(1==s||3==s||5==s||7==s)&&n.push(s);return 0<n.length?(d=Math.floor(Math.random()*n.length),n[d]):null},testWinBoard:function(b,c){var d=b.gamestate.boardState,e=b.gamestate.boardCols,f=b.gamestate.boardRows;if(!c)return null;for(var g=c.decision,
m=c.symbolId,l=g%e,g=Math.floor(g/e),n=0,r=0,q=e;r<q;r++){var s=g*e,s=s+r;if(d[s]!=m)n=0;else if(n+=1,3<=n)break}if(3<=n)return!0;r=n=0;for(q=f;r<q;r++)if(s=l,s+=r*e,d[s]!=m)n=0;else if(n+=1,3<=n)break;if(3<=n)return!0;n=!0;2>l&&g>f-2+l&&(n=!1);l>f-2&&g<2-(e-l)&&(n=!1);if(n){var v=0,u=l-g;0>u&&(v=-u,u=0);r=n=0;for(q=f;r<q;r++)if(s=u+v*e,s+=r*(e+1),s<d.length)if(d[s]!=m)n=0;else{if(n+=1,3<=n)break}else break;if(3<=n)return!0}n=!0;2>l&&g<2-l&&(n=!1);l>f-2&&g>f-2+(e-l)&&(n=!1);if(n){v=0;u=l+g;u>e-1&&
(v=u-(e-1),u=e-1);r=n=0;for(q=f;r<q;r++)if(s=u+v*e,s+=r*(e-1),0<=s)if(d[s]!=m)n=0;else{if(n+=1,3<=n)break}else break;if(3<=n)return!0}return!1}};"undefined"!==typeof module&&(module.exports.decision_engine=decision_engine);"undefined"!==typeof require&&(shared_game=require("shared_game.html").shared_game);
var simulator={},simulator={simulateEvent:function(b,c,d,e){if(e&&e.copy){var f=c.packData();c=new shared_game.GameState;c.importData(f)}(f=simulator.EventSimulatorFactory.create(b.type))&&f.simulate(b,c,d,e);return c},EventSimulatorFactory:{create:function(b){switch(b){case shared_game.EventType.PLAYER_READY:return new simulator.PlayerReadyEventSimulator;case shared_game.EventType.PLAYER_LEAVE:return new simulator.PlayerLeaveEventSimulator;case shared_game.EventType.PHASE_TRANSITION:return new simulator.PhaseTransitionEventSimulator;
case shared_game.EventType.PLAYER_DECISION:return new simulator.PlayerDecisionEventSimulator;case shared_game.EventType.MATCH_RESULT:return new simulator.MatchResultEventSimulator}}},PlayerReadyEventSimulator:function(){return{simulate:function(b,c){if(!b||!c)return!1;var d=c.findPlayerById(b.info.playerId);return!d?!0:d.readyFlag=!0}}},PlayerLeaveEventSimulator:function(){return{simulate:function(b,c){if(!b||!c)return!1;var d=c.findPlayerById(b.info.playerId);if(!d)return!0;d.leftGameFlag=!0;c.phase=
shared_game.PhaseEnum.PHASE_PLAYER_LEFT;c.playerTurn=0;c.playerTurnTime=b.time;return!0}}},PhaseTransitionEventSimulator:function(){return{simulate:function(b,c){if(!b||!c)return!1;b.info.gamestate&&c.importData(b.info.gamestate);var d=b.info.phase;if(void 0!=d&&null!=d)if(c.phase=d,c.playerTurnTime=b.time,(d==shared_game.PhaseEnum.PHASE_INIT||d==shared_game.PhaseEnum.PHASE_FLASHJOIN||d==shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE)&&c.resetBoard(),d==shared_game.PhaseEnum.PHASE_INIT||d==shared_game.PhaseEnum.PHASE_FLASHJOIN){for(var d=
[],e=0,f=c.players.length;e<f;e++){var g=c.players[e];g.lastDecision=-1;g.order=-1;g.leftGameFlag&&d.push(g.id)}e=0;for(f=d.length;e<f;e++)c.removePlayer(d[e]);c.reorderPlayers()}else d==shared_game.PhaseEnum.PHASE_PLAYER_DECISION?2!=c.players.length?c.phase=shared_game.PhaseEnum.PHASE_INIT:void 0!=b.info.playerTurn&&(c.playerTurn=b.info.playerTurn):d==shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE&&(2!=c.players.length?c.phase=shared_game.PhaseEnum.PHASE_INIT:c.players[0].symbolId==c.players[1].symbolId?
0.5>Math.random()?(c.players[0].symbolId=0,c.players[1].symbolId=1):(c.players[1].symbolId=1,c.players[0].symbolId=0):1==c.players[0].symbolId?(c.players[0].symbolId=0,c.players[1].symbolId=1):(c.players[0].symbolId=1,c.players[1].symbolId=0));return!0}}},PlayerDecisionEventSimulator:function(){return{simulate:function(b,c){if(!b||!c)return!1;var d=c.findPlayerById(b.info.playerId);if(d){if(c.playerTurn<c.players.length&&d&&d!=c.players[c.playerTurn]||c.phase!=shared_game.PhaseEnum.PHASE_PLAYER_DECISION)return!1;
var e=!1;if(void 0!=b.info.decision){var f=b.info.decision;0<=f&&f<c.boardState.length&&-1==c.boardState[f]&&(c.boardState[f]=d.symbolId,d.lastDecision=f,e=!0)}if(!e)return!1;c.phase=shared_game.PhaseEnum.PHASE_DECISION_ANIM;c.playerTurnTime=b.time;return!0}}}},MatchResultEventSimulator:function(){return{simulate:function(b,c,d,e){if(!b||!c)return!1;e&&e.clientside&&b.info.gamestate&&c.importData(b.info.gamestate);return!0}}}};"undefined"!==typeof module&&(module.exports.simulator=simulator);(function(b){Number.prototype.map=function(b,c,d,e){return d+(e-d)*((this-b)/(c-b))};Number.prototype.limit=function(b,c){return Math.min(c,Math.max(b,this))};Number.prototype.round=function(b){b=Math.pow(10,b||0);return Math.round(this*b)/b};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(b){for(var c=this.length;c--;)this[c]===b&&this.splice(c,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e&&b?
this:b,c.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e;return f};b.ig={game:null,debug:null,version:"1.23",global:b,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:b.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(b){return"#"==b.charAt(0)?document.getElementById(b.substr(1)):document.getElementsByTagName(b)},$new:function(b){return document.createElement(b)},copy:function(b){if(!b||"object"!=typeof b||
b instanceof HTMLElement||b instanceof ig.Class)return b;if(b instanceof Array)for(var c=[],d=0,e=b.length;d<e;d++)c[d]=ig.copy(b[d]);else for(d in c={},b)c[d]=ig.copy(b[d]);return c},merge:function(b,c){for(var d in c){var e=c[d];if("object"!=typeof e||e instanceof HTMLElement||e instanceof ig.Class||null===e)b[d]=e;else{if(!b[d]||"object"!=typeof b[d])b[d]=e instanceof Array?[]:{};ig.merge(b[d],e)}}return b},ksort:function(b){if(!b||"object"!=typeof b)return[];var c=[],d=[],e;for(e in b)c.push(e);
c.sort();for(e=0;e<c.length;e++)d.push(b[c[e]]);return d},setVendorAttribute:function(b,c,d){var e=c.charAt(0).toUpperCase()+c.substr(1);b[c]="undefined"!==typeof b.imageSmoothingEnabled?b["ms"+e]=b["moz"+e]=b["o"+e]=d:b["ms"+e]=b["moz"+e]=b["webkit"+e]=b["o"+e]=d},getVendorAttribute:function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);return"undefined"!==typeof b.imageSmoothingEnabled?b[c]||b["ms"+d]||b["moz"+d]||b["o"+d]:b[c]||b["ms"+d]||b["moz"+d]||b["webkit"+d]||b["o"+d]},normalizeVendorAttribute:function(b,
c){var d=ig.getVendorAttribute(b,c);!b[c]&&d&&(b[c]=d)},getImagePixels:function(b,c,d,e,f){var g=ig.$new("canvas");g.width=b.width;g.height=b.height;var m=g.getContext("2d");ig.System.SCALE.CRISP(g,m);var t=ig.getVendorAttribute(m,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(m,"getImageDataHD");var z=b.width/t,B=b.height/t;g.width=Math.ceil(z);g.height=Math.ceil(B);m.drawImage(b,0,0,z,B);return 1===t?m.getImageData(c,d,e,f):m.getImageDataHD(c,d,e,f)},module:function(b){if(ig._current)throw"Module '"+
ig._current.name+"' defines nothing";if(ig.modules[b]&&ig.modules[b].body)throw"Module '"+b+"' is already defined";ig._current={name:b,requires:[],loaded:!1,body:null};ig.modules[b]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(b){ig._current.body=b;ig._current=null;ig._initDOMReady()},addResource:function(b){ig.resources.push(b)},setNocache:function(b){ig.nocache=b?"?"+Date.now():""},
log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(b,c){ig.modules[b]={name:b,requires:[],loaded:!1,body:null};ig._waitForOnload++;var d=ig.prefix+ig.lib+b.replace(/\./g,"index.html")+".js"+ig.nocache,e=ig.$new("script");e.type="text/javascript";e.src=d;e.onload=function(){ig._waitForOnload--;ig._execModules()};e.onerror=function(){throw"Failed to load module "+b+" at "+d+" required from "+c;};ig.$("head")[0].appendChild(e)},_execModules:function(){for(var b=!1,c=
0;c<ig._loadQueue.length;c++){for(var d=ig._loadQueue[c],e=!0,f=0;f<d.requires.length;f++){var g=d.requires[f];ig.modules[g]?ig.modules[g].loaded||(e=!1):(e=!1,ig._loadScript(g,d.name))}e&&d.body&&(ig._loadQueue.splice(c,1),d.loaded=!0,d.body(),b=!0,c--)}if(b)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){b=[];for(c=0;c<ig._loadQueue.length;c++){e=[];g=ig._loadQueue[c].requires;for(f=0;f<g.length;f++)d=ig.modules[g[f]],(!d||!d.loaded)&&e.push(g[f]);b.push(ig._loadQueue[c].name+
" (requires: "+e.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+b.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=
b.devicePixelRatio||1;ig.ua.viewport={width:b.innerWidth,height:b.innerHeight};ig.ua.screen={width:b.screen.availWidth*ig.ua.pixelRatio,height:b.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
b||b.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),b.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(b,"requestAnimationFrame");
if(b.requestAnimationFrame){var c=1,d={};b.ig.setAnimation=function(e,f){var g=c++;d[g]=!0;var m=function(){d[g]&&(b.requestAnimationFrame(m,f),e())};b.requestAnimationFrame(m,f);return g};b.ig.clearAnimation=function(b){delete d[b]}}else b.ig.setAnimation=function(c){return b.setInterval(c,1E3/60)},b.ig.clearAnimation=function(c){b.clearInterval(c)};var e=!1,f=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,g=0;b.ig.Class=function(){};var m=function(b){var c=this.prototype,d={},e;for(e in b)"function"==
typeof b[e]&&"function"==typeof c[e]&&f.test(b[e])?(d[e]=c[e],c[e]=function(b,c){return function(){var e=this.parent;this.parent=d[b];var f=c.apply(this,arguments);this.parent=e;return f}}(e,b[e])):c[e]=b[e]};b.ig.Class.extend=function(c){function d(){if(!e){if(this.staticInstantiate){var b=this.staticInstantiate.apply(this,arguments);if(b)return b}for(var c in this)"object"==typeof this[c]&&(this[c]=ig.copy(this[c]));this.init&&this.init.apply(this,arguments)}return this}var r=this.prototype;e=!0;
var q=new this;e=!1;for(var s in c)q[s]="function"==typeof c[s]&&"function"==typeof r[s]&&f.test(c[s])?function(b,c){return function(){var d=this.parent;this.parent=r[b];var e=c.apply(this,arguments);this.parent=d;return e}}(s,c[s]):c[s];d.prototype=q;d.prototype.constructor=d;d.extend=b.ig.Class.extend;d.inject=m;d.classId=q.classId=++g;return d};b.ImpactMixin&&ig.merge(ig,b.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return ig.Image.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(b){var c=ig.getImagePixels(this.data,0,0,this.width,
this.height),d=this.width*b,e=this.height*b,f=ig.$new("canvas");f.width=d;f.height=e;for(var g=f.getContext("2d"),m=g.getImageData(0,0,d,e),l=0;l<e;l++)for(var n=0;n<d;n++){var r=4*(Math.floor(l/b)*this.width+Math.floor(n/b)),q=4*(l*d+n);m.data[q]=c.data[r];m.data[q+1]=c.data[r+1];m.data[q+2]=c.data[r+2];m.data[q+3]=c.data[r+3]}g.putImageData(m,0,0);this.data=f},draw:function(b,c,d,e,f,g){if(this.loaded){var m=ig.system.scale;f=(f?f:this.width)*m;g=(g?g:this.height)*m;ig.system.context.drawImage(this.data,
d?d*m:0,e?e*m:0,f,g,ig.system.getDrawPos(b),ig.system.getDrawPos(c),f,g);ig.Image.drawCount++}},drawTile:function(b,c,d,e,f,g,m){f=f?f:e;if(this.loaded&&!(e>this.width||f>this.height)){var l=ig.system.scale,n=Math.floor(e*l),r=Math.floor(f*l),q=g?-1:1,s=m?-1:1;if(g||m)ig.system.context.save(),ig.system.context.scale(q,s);ig.system.context.drawImage(this.data,Math.floor(d*e)%this.width*l,Math.floor(d*e/this.width)*f*l,n,r,ig.system.getDrawPos(b)*q-(g?n:0),ig.system.getDrawPos(c)*s-(m?r:0),n,r);(g||
m)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var b in ig.Image.cache)ig.Image.cache[b].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(b){this._loadMetrics(this.data);this.parent(b)},widthForString:function(b){if(-1!==b.indexOf("\n")){b=b.split("\n");for(var c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(b)},_widthForLine:function(b){for(var c=0,d=0;d<b.length;d++)c+=this.widthMap[b.charCodeAt(d)-this.firstChar]+
this.letterSpacing;return c},heightForString:function(b){return b.split("\n").length*(this.height+this.lineSpacing)},draw:function(b,c,d,e){"string"!=typeof b&&(b=b.toString());if(-1!==b.indexOf("\n")){b=b.split("\n");for(var f=this.height+this.lineSpacing,g=0;g<b.length;g++)this.draw(b[g],c,d+g*f,e)}else{if(e==ig.Font.ALIGN.RIGHT||e==ig.Font.ALIGN.CENTER)g=this._widthForLine(b),c-=e==ig.Font.ALIGN.CENTER?g/2:g;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(g=0;g<b.length;g++)e=b.charCodeAt(g),
c+=this._drawChar(e-this.firstChar,c,d);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=b.length}},_drawChar:function(b,c,d){if(!this.loaded||0>b||b>=this.indices.length)return 0;var e=ig.system.scale,f=this.widthMap[b]*e,g=(this.height-2)*e;ig.system.context.drawImage(this.data,this.indices[b]*e,0,f,g,ig.system.getDrawPos(c),ig.system.getDrawPos(d),f,g);return this.widthMap[b]+this.letterSpacing},_loadMetrics:function(b){this.height=b.height-1;this.widthMap=[];this.indices=
[];for(var c=ig.getImagePixels(b,0,b.height-1,b.width,1),d=0,e=0,f=0;f<b.width;f++){var g=4*f+3;127<c.data[g]?e++:128>c.data[g]&&e&&(this.widthMap.push(e),this.indices.push(f-e),d++,e=0)}this.widthMap.push(e);this.indices.push(f-e)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var b=new Audio,c=0;c<ig.Sound.use.length;c++){var d=ig.Sound.use[c];if(b.canPlayType(d.mime)){this.format=d;break}}this.format||(ig.Sound.enabled=!1)}},load:function(b,c,d){var e=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(c&&this.clips[b].length<ig.Sound.channels)for(c=this.clips[b].length;c<
ig.Sound.channels;c++){var f=new Audio(e);f.load();this.clips[b].push(f)}return this.clips[b][0]}var g=new Audio(e);d&&(g.addEventListener("canplaythrough",function l(c){g.removeEventListener("canplaythrough",l,!1);d(b,!0,c)},!1),g.addEventListener("error",function(c){d(b,!1,c)},!1));g.preload="auto";g.load();this.clips[b]=[g];if(c)for(c=1;c<ig.Sound.channels;c++)f=new Audio(e),f.load(),this.clips[b].push(f);return g},get:function(b){b=this.clips[b];for(var c=0,d;d=b[c++];)if(d.paused||d.ended)return d.ended&&
(d.currentTime=0),d;b[0].pause();b[0].currentTime=0;return b[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):
this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(b,c){if(ig.Sound.enabled){var d=ig.soundManager.load(b instanceof ig.Sound?b.path:b,!1);d.loop=this._loop;d.volume=this._volume;d.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(d);c&&(this.namedTracks[c]=d);this.currentTrack||
(this.currentTrack=d)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(b){if(b&&this.namedTracks[b])b=this.namedTracks[b],b!=this.currentTrack&&(this.stop(),
this.currentTrack=b);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var c in this.tracks)this.tracks[c].loop=b},getVolume:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,1);for(var c in this.tracks)this.tracks[c].volume=this._volume},fadeOut:function(b){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(b),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var b=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=b?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=b},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(b,c){this.path=b;this.multiChannel=!1!==c;this.load()},load:function(b){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,b):ig.addResource(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(b,c){this.gameClass=b;this.resources=c;this._loadCallbackBound=this._loadCallback.bind(this);for(var d=0;d<this.resources.length;d++)this._unloaded.push(this.resources[d].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var b=
0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(b){b.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(b,c){if(c)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=ig.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var b=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var b=Date.now();ig.Timer.time+=Math.min((b-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(b,c,d,e,f){this.fps=c;this.clock=new ig.Timer;this.canvas=ig.$(b);this.resize(d,e,f);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(b,c,d){this.width=b;this.height=c;this.scale=d||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(b){this.running?this.newGameClass=b:this.setGameNow(b)},setGameNow:function(b){ig.game=new b;ig.system.setDelegate(ig.game)},setDelegate:function(b){if("function"==typeof b.run)this.delegate=b,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(b){this.context.fillStyle=b;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});
ig.System.DRAW={AUTHENTIC:function(b){return Math.round(b)*this.scale},SMOOTH:function(b){return Math.round(b*this.scale)},SUBPIXEL:function(b){return b*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!1);b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},
SMOOTH:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!0);b.style.imageRendering="";b.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var b=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",b,!1);ig.system.canvas.addEventListener("DOMMouseScroll",b,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(b){var c=this.bindings[0<(b.wheelDelta?b.wheelDelta:-1*b.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];c&&(this.actions[c]=!0,this.presses[c]=!0,this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault())},mousemove:function(b){var c=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(c=ig.system.realWidth);var c=ig.system.scale*(c/ig.system.realWidth),d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());b=b.touches?b.touches[0]:b;this.mouse.x=(b.clientX-d.left)/c;this.mouse.y=(b.clientY-d.top)/c},contextmenu:function(b){this.bindings[ig.KEY.MOUSE2]&&(b.stopPropagation(),b.preventDefault())},keydown:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==
c))if(c="keydown"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,("touchstart"==b.type||"mousedown"==b.type)&&this.mousemove(b),c=this.bindings[c])this.actions[c]=!0,this.locks[c]||(this.presses[c]=!0,this.locks[c]=!0),b.stopPropagation(),b.preventDefault()},keyup:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==c))if(c=this.bindings["keyup"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault()},devicemotion:function(b){this.accel=
b.accelerationIncludingGravity},bind:function(b,c){0>b?this.initMouse():0<b&&this.initKeyboard();this.bindings[b]=c},bindTouch:function(b,c){var d=ig.$(b),e=this;d.addEventListener("touchstart",function(b){e.touchStart(b,c)},!1);d.addEventListener("touchend",function(b){e.touchEnd(b,c)},!1);d.addEventListener("MSPointerDown",function(b){e.touchStart(b,c)},!1);d.addEventListener("MSPointerUp",function(b){e.touchEnd(b,c)},!1)},unbind:function(b){this.delayedKeyup[this.bindings[b]]=!0;this.bindings[b]=
null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(b){return this.actions[b]},pressed:function(b){return this.presses[b]},released:function(b){return!!this.delayedKeyup[b]},clearPressed:function(){for(var b in this.delayedKeyup)this.actions[b]=!1,this.locks[b]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(b,c){this.actions[c]=!0;this.presses[c]=!0;b.stopPropagation();b.preventDefault();return!1},touchEnd:function(b,
c){this.delayedKeyup[c]=!0;b.stopPropagation();b.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(b,c,d,e,f,g,m){ig.system=new ig.System(b,d,e,f,g||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (m||ig.Loader)(c,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(b,c,d){this.width=c;this.height=d;this.image=new ig.Image(b)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(b,c,d,e){this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=c;this.sequence=d;
this.stop=!!e;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:b%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(b,c){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(c>ig.system.height||0>b+d||0>c+d)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(c+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(b,
c,d){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=b;this.pos.y=this.last.y=c;ig.merge(this,d)},reset:function(b,c,d){var e=this.constructor.prototype;this.pos.x=b;this.pos.y=c;this.last.x=b;this.last.y=c;this.vel.x=e.vel.x;this.vel.y=e.vel.y;this.accel.x=e.accel.x;this.accel.y=e.accel.y;this.health=e.health;this._killed=e._killed;this.standing=e.standing;this.type=e.type;this.checkAgainst=e.checkAgainst;this.collides=e.collides;ig.merge(this,d)},addAnim:function(b,c,d,e){if(!this.animSheet)throw"No animSheet to add the animation "+
b+" to.";c=new ig.Animation(this.animSheet,c,d,e);this.anims[b]=c;this.currentAnim||(this.currentAnim=c);return c},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(b,c,d,e){return c?(b+c*ig.system.tick).limit(-e,e):d?(c=d*ig.system.tick,0<b-c?b-c:0>b+c?b+c:0):b.limit(-e,e)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&c<this.slopeStanding.max&&(this.standing=!0)}this.pos=b.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(b){this.health-=b;0>=this.health&&this.kill()},touches:function(b){return!(this.pos.x>=b.pos.x+b.size.x||this.pos.x+this.size.x<=b.pos.x||this.pos.y>=b.pos.y+b.size.y||this.pos.y+this.size.y<=b.pos.y)},distanceTo:function(b){var c=this.pos.x+this.size.x/2-(b.pos.x+b.size.x/2);b=this.pos.y+this.size.y/2-(b.pos.y+b.size.y/2);return Math.sqrt(c*c+b*b)},angleTo:function(b){return Math.atan2(b.pos.y+
b.size.y/2-(this.pos.y+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(b,c){b.checkAgainst&c.type&&b.check(c);c.checkAgainst&b.type&&c.check(b);b.collides&&(c.collides&&b.collides+c.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(b,c)};ig.Entity.solveCollision=
function(b,c){var d=null;if(b.collides==ig.Entity.COLLIDES.LITE||c.collides==ig.Entity.COLLIDES.FIXED)d=b;else if(c.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)d=c;b.last.x+b.size.x>c.last.x&&b.last.x<c.last.x+c.size.x?(b.last.y<c.last.y?ig.Entity.seperateOnYAxis(b,c,d):ig.Entity.seperateOnYAxis(c,b,d),b.collideWith(c,"y"),c.collideWith(b,"y")):b.last.y+b.size.y>c.last.y&&b.last.y<c.last.y+c.size.y&&(b.last.x<c.last.x?ig.Entity.seperateOnXAxis(b,c,d):ig.Entity.seperateOnXAxis(c,
b,d),b.collideWith(c,"x"),c.collideWith(b,"x"))};ig.Entity.seperateOnXAxis=function(b,c,d){var e=b.pos.x+b.size.x-c.pos.x;d?(d.vel.x=-d.vel.x*d.bounciness+(b===d?c:b).vel.x,c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,d==b?-e:e,0,d.size.x,d.size.y),d.pos.x=c.pos.x):(d=(b.vel.x-c.vel.x)/2,b.vel.x=-d,c.vel.x=d,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,-e/2,0,b.size.x,b.size.y),b.pos.x=Math.floor(d.pos.x),b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e/2,0,c.size.x,c.size.y),c.pos.x=Math.ceil(b.pos.x))};
ig.Entity.seperateOnYAxis=function(b,c,d){var e=b.pos.y+b.size.y-c.pos.y;if(d){c=b===d?c:b;d.vel.y=-d.vel.y*d.bounciness+c.vel.y;var f=0;d==b&&Math.abs(d.vel.y-c.vel.y)<d.minBounceVelocity&&(d.standing=!0,f=c.vel.x*ig.system.tick);b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,f,d==b?-e:e,d.size.x,d.size.y);d.pos.y=b.pos.y;d.pos.x=b.pos.x}else ig.game.gravity&&(c.standing||0<b.vel.y)?(d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,-(b.pos.y+b.size.y-c.pos.y),b.size.x,b.size.y),b.pos.y=d.pos.y,0<b.bounciness&&
b.vel.y>b.minBounceVelocity?b.vel.y*=-b.bounciness:(b.standing=!0,b.vel.y=0)):(d=(b.vel.y-c.vel.y)/2,b.vel.y=-d,c.vel.y=d,f=c.vel.x*ig.system.tick,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,f,-e/2,b.size.x,b.size.y),b.pos.y=d.pos.y,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,0,e/2,c.size.x,c.size.y),c.pos.y=b.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(b,c){this.tilesize=b;this.data=c;this.height=c.length;this.width=c[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(b,c){var d=Math.floor(b/this.tilesize),e=Math.floor(c/this.tilesize);return 0<=d&&d<this.width&&0<=e&&e<this.height?this.data[e][d]:0},setTile:function(b,c,d){b=Math.floor(b/this.tilesize);c=Math.floor(c/
this.tilesize);0<=b&&b<this.width&&(0<=c&&c<this.height)&&(this.data[c][b]=d)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(b,c,f){this.parent(b,c);this.tiledef=f||ig.CollisionMap.defaultTileDef;for(var g in this.tiledef)g|0>this.lastSlope&&(this.lastSlope=g|0)},trace:function(b,c,f,g,m,l){var n={collision:{x:!1,y:!1,slope:!1},pos:{x:b,y:c},tile:{x:0,y:0}},r=Math.ceil(Math.max(Math.abs(f),Math.abs(g))/this.tilesize);if(1<r)for(var q=f/r,s=g/r,v=0;v<r&&(q||s)&&!(this._traceStep(n,
b,c,q,s,m,l,f,g,v),b=n.pos.x,c=n.pos.y,n.collision.x&&(f=q=0),n.collision.y&&(g=s=0),n.collision.slope);v++);else this._traceStep(n,b,c,f,g,m,l,f,g,0);return n},_traceStep:function(b,c,f,g,m,l,n,r,q,s){b.pos.x+=g;b.pos.y+=m;var v=0;if(g){var u=0<g?l:0,t=0>g?this.tilesize:0,v=Math.max(Math.floor(f/this.tilesize),0),z=Math.min(Math.ceil((f+n)/this.tilesize),this.height);g=Math.floor((b.pos.x+u)/this.tilesize);var B=Math.floor((c+u)/this.tilesize);if(0<s||g==B||0>B||B>=this.width)B=-1;if(0<=g&&g<this.width)for(var E=
v;E<z&&!(-1!=B&&(v=this.data[E][B],1<v&&v<=this.lastSlope&&this._checkTileDef(b,v,c,f,r,q,l,n,B,E)));E++)if(v=this.data[E][g],1==v||v>this.lastSlope||1<v&&this._checkTileDef(b,v,c,f,r,q,l,n,g,E)){if(1<v&&v<=this.lastSlope&&b.collision.slope)break;b.collision.x=!0;b.tile.x=v;c=b.pos.x=g*this.tilesize-u+t;r=0;break}}if(m){u=0<m?n:0;m=0>m?this.tilesize:0;v=Math.max(Math.floor(b.pos.x/this.tilesize),0);t=Math.min(Math.ceil((b.pos.x+l)/this.tilesize),this.width);E=Math.floor((b.pos.y+u)/this.tilesize);
z=Math.floor((f+u)/this.tilesize);if(0<s||E==z||0>z||z>=this.height)z=-1;if(0<=E&&E<this.height)for(g=v;g<t&&!(-1!=z&&(v=this.data[z][g],1<v&&v<=this.lastSlope&&this._checkTileDef(b,v,c,f,r,q,l,n,g,z)));g++)if(v=this.data[E][g],1==v||v>this.lastSlope||1<v&&this._checkTileDef(b,v,c,f,r,q,l,n,g,E)){if(1<v&&v<=this.lastSlope&&b.collision.slope)break;b.collision.y=!0;b.tile.y=v;b.pos.y=E*this.tilesize-u+m;break}}},_checkTileDef:function(b,c,f,g,m,l,n,r,q,s){var v=this.tiledef[c];if(!v)return!1;c=(v[2]-
v[0])*this.tilesize;var u=(v[3]-v[1])*this.tilesize,t=v[4];n=f+m+(0>u?n:0)-(q+v[0])*this.tilesize;r=g+l+(0<c?r:0)-(s+v[1])*this.tilesize;if(0<c*r-u*n){if(0>m*-u+l*c)return t;q=Math.sqrt(c*c+u*u);s=u/q;q=-c/q;var z=n*s+r*q,v=s*z,z=q*z;if(v*v+z*z>=m*m+l*l)return t||0.5>c*(r-l)-u*(n-m);b.pos.x=f+m-v;b.pos.y=g+l-z;b.collision.slope={x:c,y:u,nx:s,ny:q};return!0}return!1}});var b=1/3,c=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,c,!0],6:[0,c,1,b,!0],7:[0,b,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[c,1,1,0,!0],43:[b,1,c,0,!0],54:[0,1,b,0,!0],27:[0,0,1,b,!0],28:[0,b,1,c,!0],29:[0,c,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,b,1,!0],44:[b,0,c,1,!0],55:[c,0,1,1,!0],16:[1,b,0,0,!0],17:[1,c,0,b,!0],18:[1,1,0,c,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[b,1,0,0,!0],41:[c,1,b,0,!0],52:[1,1,c,0,!0],38:[1,c,0,1,!0],39:[1,b,0,c,!0],40:[1,0,
0,b,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,c,1,!0],42:[c,0,b,1,!0],53:[b,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(b,c,f,g){return{collision:{x:!1,y:!1,slope:!1},pos:{x:b+f,y:c+g},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(b,c,d){this.parent(b,c);this.setTileset(d)},setTileset:function(b){this.tilesetName=b instanceof ig.Image?b.path:b;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(b,
c){this.scroll.x=b/this.distance;this.scroll.y=c/this.distance},preRenderMapToChunks:function(){var b=this.width*this.tilesize*ig.system.scale,c=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(b,c),this.chunkSize);var d=Math.ceil(b/this.chunkSize),e=Math.ceil(c/this.chunkSize);this.preRenderedChunks=[];for(var f=0;f<e;f++){this.preRenderedChunks[f]=[];for(var g=0;g<d;g++)this.preRenderedChunks[f][g]=this.preRenderChunk(g,f,g==d-1?b-g*this.chunkSize:this.chunkSize,f==e-1?
c-f*this.chunkSize:this.chunkSize)}},preRenderChunk:function(b,c,d,e){var f=d/this.tilesize/ig.system.scale+1,g=e/this.tilesize/ig.system.scale+1,m=b*this.chunkSize/ig.system.scale%this.tilesize,l=c*this.chunkSize/ig.system.scale%this.tilesize;b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);c=Math.floor(c*this.chunkSize/this.tilesize/ig.system.scale);var n=ig.$new("canvas");n.width=d;n.height=e;n.retinaResolutionEnabled=!1;e=n.getContext("2d");ig.System.scaleMode(n,e);d=ig.system.context;
ig.system.context=e;for(e=0;e<f;e++)for(var r=0;r<g;r++)if(e+b<this.width&&r+c<this.height){var q=this.data[r+c][e+b];q&&this.tiles.drawTile(e*this.tilesize-m,r*this.tilesize-l,q-1,this.tilesize)}ig.system.context=d;return n},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var b=ig.system.getDrawPos(this.scroll.x),c=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var d=
this.width*this.tilesize*ig.system.scale,b=(b%d+d)%d,d=this.height*this.tilesize*ig.system.scale,c=(c%d+d)%d;var d=Math.max(Math.floor(b/this.chunkSize),0),e=Math.max(Math.floor(c/this.chunkSize),0),f=Math.ceil((b+ig.system.realWidth)/this.chunkSize),g=Math.ceil((c+ig.system.realHeight)/this.chunkSize),m=this.preRenderedChunks[0].length,l=this.preRenderedChunks.length;this.repeat||(f=Math.min(f,m),g=Math.min(g,l));for(var n=0;e<g;e++){for(var r=0,q=d;q<f;q++){var s=this.preRenderedChunks[e%l][q%m],
v=-b+q*this.chunkSize-r,u=-c+e*this.chunkSize-n;ig.system.context.drawImage(s,v,u);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(v,u,this.chunkSize,this.chunkSize));this.repeat&&(s.width<this.chunkSize&&v+s.width<ig.system.realWidth)&&(r+=this.chunkSize-s.width,f++)}this.repeat&&(s.height<this.chunkSize&&u+s.height<ig.system.realHeight)&&(n+=this.chunkSize-s.height,g++)}},drawTiled:function(){for(var b=0,c=null,d=(this.scroll.x/this.tilesize).toInt(),
e=(this.scroll.y/this.tilesize).toInt(),f=this.scroll.x%this.tilesize,g=this.scroll.y%this.tilesize,m=-f-this.tilesize,f=ig.system.width+this.tilesize-f,l=ig.system.height+this.tilesize-g,n=-1,g=-g-this.tilesize;g<l;n++,g+=this.tilesize){var r=n+e;if(r>=this.height||0>r){if(!this.repeat)continue;r=(r%this.height+this.height)%this.height}for(var q=-1,s=m;s<f;q++,s+=this.tilesize){b=q+d;if(b>=this.width||0>b){if(!this.repeat)continue;b=(b%this.width+this.width)%this.width}if(b=this.data[r][b])(c=this.anims[b-
1])?c.draw(s,g):this.tiles.drawTile(s,g,b-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(b){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var c=0;c<b.entities.length;c++){var d=b.entities[c];this.spawnEntity(d.type,d.x,d.y,d.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(c=0;c<b.layer.length;c++)if(d=b.layer[c],"collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);e.anims=this.backgroundAnims[d.tilesetName]||
{};e.repeat=d.repeat;e.distance=d.distance;e.foreground=!!d.foreground;e.preRender=!!d.preRender;e.name=d.name;this.backgroundMaps.push(e)}for(c=0;c<this.entities.length;c++)try{this.entities[c].ready()}catch(f){}},loadLevelDeferred:function(b){this._levelToLoad=b},getMapByName:function(b){if("collision"==b)return this.collisionMap;for(var c=0;c<this.backgroundMaps.length;c++)if(this.backgroundMaps[c].name==b)return this.backgroundMaps[c];return null},getEntityByName:function(b){return this.namedEntities[b]},
getEntitiesByType:function(b){b="string"===typeof b?ig.global[b]:b;for(var c=[],d=0;d<this.entities.length;d++){var e=this.entities[d];e instanceof b&&!e._killed&&c.push(e)}return c},spawnEntity:function(b,c,d,e){var f="string"===typeof b?ig.global[b]:b;if(!f)throw"Can't spawn entity of type "+b;b=new f(c,d,e||{});this.entities.push(b);b.name&&(this.namedEntities[b.name]=b);return b},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},
removeEntity:function(b){b.name&&delete this.namedEntities[b.name];b._killed=!0;b.type=ig.Entity.TYPE.NONE;b.checkAgainst=ig.Entity.TYPE.NONE;b.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(b)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var b=0;b<this._deferredKill.length;b++)this._deferredKill[b].erase(),this.entities.erase(this._deferredKill[b]);
this._deferredKill=[];if(this._doSortEntities||this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var c in this.backgroundAnims){var b=this.backgroundAnims[c],d;for(d in b)b[d].update()}},updateEntities:function(){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c._killed||c.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;
var b;for(b=0;b<this.backgroundMaps.length;b++){var c=this.backgroundMaps[b];if(c.foreground)break;c.setScreenPos(this.screen.x,this.screen.y);c.draw()}this.drawEntities();for(b;b<this.backgroundMaps.length;b++)c=this.backgroundMaps[b],c.setScreenPos(this.screen.x,this.screen.y),c.draw()},drawEntities:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].draw()},checkEntities:function(){for(var b={},c=0;c<this.entities.length;c++){var d=this.entities[c];if(!(d.type==ig.Entity.TYPE.NONE&&
d.checkAgainst==ig.Entity.TYPE.NONE&&d.collides==ig.Entity.COLLIDES.NEVER))for(var e={},f=Math.floor(d.pos.y/this.cellSize),g=Math.floor((d.pos.x+d.size.x)/this.cellSize)+1,m=Math.floor((d.pos.y+d.size.y)/this.cellSize)+1,l=Math.floor(d.pos.x/this.cellSize);l<g;l++)for(var n=f;n<m;n++)if(b[l])if(b[l][n]){for(var r=b[l][n],q=0;q<r.length;q++)d.touches(r[q])&&!e[r[q].id]&&(e[r[q].id]=!0,ig.Entity.checkPair(d,r[q]));r.push(d)}else b[l][n]=[d];else b[l]={},b[l][n]=[d]}}});ig.Game.SORT={Z_INDEX:function(b,
c){return b.zIndex-c.zIndex},POS_X:function(b,c){return b.pos.x+b.size.x-(c.pos.x+c.size.x)},POS_Y:function(b,c){return b.pos.y+b.size.y-(c.pos.y+c.size.y)}}});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(b,c){c.imageSmoothingEnabled=c.msImageSmoothingEnabled=c.mozImageSmoothingEnabled=c.oImageSmoothingEnabled=!1;b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,c){c.imageSmoothingEnabled=c.msImageSmoothingEnabled=
c.mozImageSmoothingEnabled=c.oImageSmoothingEnabled=!0;b.style.imageRendering="";b.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").defines(function(){var b=!1;try{b=window.self!==window.top,!1===b&&(b=0<window.frames.length)}catch(c){b=!0}ig.Input.inject({keydown:function(c){var e=c.target.tagName;if(!("INPUT"==e||"TEXTAREA"==e))if(e="keydown"==c.type?c.keyCode:2==c.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,b&&0>e&&window.focus(),("touchstart"==c.type||"mousedown"==c.type)&&this.mousemove(c),e=this.bindings[e])this.actions[e]=!0,this.locks[e]||(this.presses[e]=!0,this.locks[e]=
!0),c.stopPropagation(),c.preventDefault()}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(b,c,d,e){if(this.JQUERYAVAILABLE)b.on(c,d);else b.addEventListener(c,d,e)},create:function(b){return this.JQUERYAVAILABLE?$("<"+b+">"):ig.$new(b)},getElementByClass:function(b){return this.JQUERYAVAILABLE?$("."+b):document.getElementsByClassName(b)},
getElementById:function(b){return this.JQUERYAVAILABLE?0<$(b).length?$(b):null:ig.$(b)},appendChild:function(b,c){this.JQUERYAVAILABLE?b.append(c):b.appendChild(c)},appendToBody:function(b){this.JQUERYAVAILABLE?$("body").append(b):document.body.appendChild(b)},resize:function(b,c,d){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2));else{var e=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=e}},resizeOffsetLeft:function(b,
c,d,e){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2)),b.css("left",e);else{var f=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px; left: "+e.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=f}},css:function(b,c){if(this.JQUERYAVAILABLE)b.css(c);else{var d="",e;for(e in c)d+=e+":"+c[e]+";";this.attr(b,"style",d)}},getOffsets:function(b){return this.JQUERYAVAILABLE?(b=b.offset(),{left:b.left,top:b.top}):{left:b.offsetLeft,top:b.offsetTop}},attr:function(b,
c,d){if("undefined"===typeof d)return this.JQUERYAVAILABLE?b.attr(c):b.getAttribute(c);this.JQUERYAVAILABLE?b.attr(c,d):b.setAttribute(c,d)},show:function(b){this.JQUERYAVAILABLE?(b.show(),b.css("visibility","visible")):b&&(b.style?b.style.visibility="visible":b[0]&&(b[0].style.visibility="visible"))},hide:function(b){this.JQUERYAVAILABLE?(b.hide(),b.css("visibility","hidden")):b&&(b.style?b.style.visibility="hidden":b[0]&&(b[0].style.visibility="hidden"))},getQueryVariable:function(b){for(var c=
window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==b)return decodeURIComponent(e[1])}},forcedDeviceDetection:function(){var b=this.getQueryVariable("device");if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},
forcedDeviceRotation:function(){var b=this.getQueryVariable("force-rotate");if(b)switch(b){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=ig.Class.extend({x:null,y:null,valType:"number",init:function(b,c){typeof b===this.valType&&typeof c===this.valType&&(this.x=b,this.y=c)},row:function(b){typeof b===this.valType&&(this.y=b);return this.y},col:function(b){typeof b===this.valType&&(this.x=b);return this.x}})});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,desktop:{actualSize:new Vector2(window.innerWidth,$(window).height()),actualResolution:new Vector2(480,640)},mobile:{actualSize:new Vector2(window.innerWidth,$(window).height()),actualResolution:new Vector2(480,640)},windowSize:new Vector2(window.innerWidth,$(window).height()),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,
dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate"],adsToResize:{},init:function(b){this.domHandler=b;if("undefined"===typeof b)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,$(window).height());if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,$(window).height());var b=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);
this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/b.x,this.mobile.actualSize.y/b.y);var c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.mobile.actualSize.x=b.x*this.scaleRatioMultiplier.x;this.mobile.actualSize.y=b.y*this.scaleRatioMultiplier.y}else this.desktop.actualSize=new Vector2(window.innerWidth,$(window).height()),b=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/
b.x,this.desktop.actualSize.y/b.y),c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.desktop.actualSize.x=b.x*c,this.desktop.actualSize.y=b.y*c;this.sizeRatio.x=window.innerWidth/this.mobile.actualResolution.x;this.sizeRatio.y=$(window).height()/this.mobile.actualResolution.y},resizeLayers:function(){for(var b=0;b<this.coreDivsToResize.length;b++){var c=ig.domHandler.getElementById(this.coreDivsToResize[b]);ig.ua.mobile?ig.domHandler.resize(c,Math.floor(ig.sizeHandler.mobile.actualSize.x),
Math.floor(ig.sizeHandler.mobile.actualSize.y)):ig.domHandler.resizeOffsetLeft(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2))}for(var d in this.adsToResize){var b=ig.domHandler.getElementById("#"+d),c=ig.domHandler.getElementById("#"+d+"-Box"),e=(window.innerWidth-this.adsToResize[d]["box-width"])/2+"px",f=($(window).height()-this.adsToResize[d]["box-height"])/2+"px";
b&&ig.domHandler.css(b,{width:window.innerWidth,height:$(window).height()});c&&ig.domHandler.css(c,{left:e,top:f})}for(d in this.dynamicClickableEntityDivs){b=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);c=ig.domHandler.getElementById("#"+d);if(ig.ua.mobile)var g=this.dynamicClickableEntityDivs[d].entity_pos_x,m=this.dynamicClickableEntityDivs[d].entity_pos_y,f=this.dynamicClickableEntityDivs[d].width,e=this.dynamicClickableEntityDivs[d].height,l=Math.floor(g*
this.scaleRatioMultiplier.x)+"px",m=Math.floor(m*this.scaleRatioMultiplier.y)+"px",f=Math.floor(f*this.scaleRatioMultiplier.x)+"px",e=Math.floor(e*this.scaleRatioMultiplier.y)+"px";else var e=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(e),l=e.left,n=e.top,g=this.dynamicClickableEntityDivs[d].entity_pos_x,m=this.dynamicClickableEntityDivs[d].entity_pos_y,f=this.dynamicClickableEntityDivs[d].width,e=this.dynamicClickableEntityDivs[d].height,l=Math.floor(l+g*b)+"px",m=Math.floor(n+
m*b)+"px",f=Math.floor(f*b)+"px",e=Math.floor(e*b)+"px";ig.domHandler.css(c,{"float":"left",position:"absolute",left:l,top:m,width:f,height:e,"z-index":3});this.dynamicClickableEntityDivs[d]["font-size"]&&ig.domHandler.css(c,{"font-size":this.dynamicClickableEntityDivs[d]["font-size"]*b+"px"})}},resize:function(){this.sizeCalcs();this.resizeLayers()},reorient:function(){if(ig.ua.mobile){if(window.innerHeight+200<screen.availHeight){this.resize();this.resizeAds();return}var b=!1,b=this.portraitMode?
$(window).height()<window.innerWidth:$(window).height()>window.innerWidth,c=this.domHandler.getElementById("#orientate"),d=this.domHandler.getElementById("#game");b?(this.domHandler.show(c),this.domHandler.hide(d)):(this.domHandler.show(d),this.domHandler.hide(c))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize()},resizeAds:function(){for(var b in this.adsToResize){var c=ig.domHandler.getElementById("#"+b),d=ig.domHandler.getElementById("#"+b+"-Box"),e=(window.innerWidth-this.adsToResize[b]["box-width"])/
2+"px",f=($(window).height()-this.adsToResize[b]["box-height"])/2+"px";c&&ig.domHandler.css(c,{width:window.innerWidth,height:$(window).height()});d&&ig.domHandler.css(d,{left:e,top:f})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",
function(b){b.preventDefault();return!1},!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",function(b){b.preventDefault();return!1},!1))},eventListenerSetup:function(){window.addEventListener("resize",function(){this.reorient();window.scrollTo(0,1)}.bind(this),!1);window.addEventListener("orientationchange",function(){this.reorient();window.scrollTo(0,1)}.bind(this),!1);document.ontouchmove=function(b){window.scrollTo(0,1);
b.preventDefault()}}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(){}})});ig.baked=!0;
ig.module("plugins.audio.sound-player").defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",muteFlag:!1,debug:!1,init:function(){this.debug&&console.log(this.tagName)},play:function(b){this.debug&&console.log("play sound ",b)},stop:function(){this.debug&&console.log("stop sound ")},volume:function(){this.debug&&console.log("set volume")},mute:function(b){this.debug&&console.log("mute");"undefined"===typeof b?this.muteFlag=!0:b.flagChange&&(this.muteFlag=!0)},unmute:function(b){this.debug&&
console.log("unmute");"undefined"===typeof b?this.muteFlag=!1:b.flagChange&&(this.muteFlag=!1)}})});ig.baked=!0;
ig.module("plugins.audio.impact-music-player").requires("plugins.audio.sound-player").defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:!1,soundList:{},init:function(b,c){this.parent(b,c);for(var d in b)this.soundList[d]=d,ig.music.add(b[d].path+".*",d);c&&c.loop&&(ig.music.loop=c.loop)},play:function(b){this.muteFlag||(this.bgmPlaying=!0,"undefined"===typeof b?ig.music.play(b):ig.music.play())},stop:function(){this.bgmPlaying=!1;ig.music.pause()},volume:function(b){console.log("impactmusic:",
b);ig.music.volume=0>b?0:isNaN(b)?1:1<b?1:b},getVolume:function(){return ig.music.volume},mute:function(b){this.parent(b);this.bgmPlaying&&this.stop()},unmute:function(b){this.parent(b);this.play()}})});ig.baked=!0;
ig.module("plugins.audio.impact-sound-player").requires("plugins.audio.sound-player").defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(b,c){this.parent(b,c);for(var d in b){var e=new ig.Sound(b[d].path+".*");this.soundList[d]=e}},play:function(b){this.muteFlag||("object"===typeof b?(console.log(b+" exists"),b.play()):"string"===typeof b&&this.soundList[b].play())},stop:function(b){this.parent(b);b.stop()},volume:function(b){ig.soundManager.volume=
0>b?0:isNaN(b)?1:1<b?1:b},getVolume:function(){return ig.soundManager.volume},mute:function(b){this.parent(b);ig.Sound.enabled=!1},unmute:function(b){this.parent(b);ig.Sound.enabled=!0}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").requires("plugins.audio.sound-player").defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(b,c){this.parent(b,c);for(var d in b){var e=b[d].path,e=new Howl({urls:[e+"."+ig.Sound.FORMAT.OGG.ext,e+"."+ig.Sound.FORMAT.MP3.ext]});this.soundList[d]=e}},play:function(b){this.muteFlag||("object"===typeof b?b.play():"string"===typeof b&&this.soundList[b].play())},stop:function(b){this.parent(b);b.stop()},volume:function(b){isNaN(b)||
(1<b&&(b=1),0>b&&(b=0),Howler.volume(b))},getVolume:function(){for(var b in this.soundList)return this.soundList[b].volume()},mute:function(b){this.parent(b);for(var c in this.soundList)this.soundList[c].mute(),this.prevVol=this.soundList[c].volume(),this.soundList[c].volume(0)},unmute:function(b){this.parent(b);for(var c in this.soundList)this.soundList[c].unmute(),isNaN(this.prevVol)||this.soundList[c].volume(this.prevVol)}})});ig.baked=!0;
ig.module("plugins.audio.howler-music-player").requires("plugins.audio.sound-player").defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:!1,soundList:{},init:function(b){for(var c in b){var d=b[c].path,e=d+"."+ig.Sound.FORMAT.OGG.ext,d=d+"."+ig.Sound.FORMAT.MP3.ext,f=e;if(ig.ua.mobile)ig.ua.iOS&&(f=d);else{var g=navigator.userAgent.toLowerCase();-1!=g.indexOf("safari")&&-1>=g.indexOf("chrome")&&(f=d)}e=new Howl({urls:[f,e,d],loop:!0,autoplay:!1});this.soundList[c]=
e}},play:function(b){if(!this.muteFlag&&!this.bgmPlaying){for(var c in this.soundList)if(this.soundList[c].isPlaying){this.bgmPlaying=!0;return}if("object"===typeof b)b.isPlaying||b.play(),this.bgmPlaying=!0;else if("string"===typeof b)this.soundList[b].isPlaying||this.soundList[b].play(),this.bgmPlaying=!0;else for(var d in this.soundList){this.soundList[d].isPlaying||this.soundList[d].play();this.bgmPlaying=!0;break}}},stop:function(){if(this.bgmPlaying){for(var b in this.soundList)this.soundList[b].stop();
this.bgmPlaying=!1}},volume:function(b){for(var c in this.soundList){if(0>b){this.soundList[c].volume(0);break}isNaN(b)?this.soundList[c].volume(1):1<b?this.soundList[c].volume(1):this.soundList[c].volume(b)}},getVolume:function(){for(var b in this.soundList)return this.soundList[b].volume()},mute:function(){if(!this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying))for(var b in this.soundList)this.soundList[b].stop()},unmute:function(){if(this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying))for(var b in this.soundList)this.soundList[b].isPlaying||
this.soundList[b].play()}})});ig.baked=!0;
ig.module("plugins.audio.jukebox-player").requires("plugins.audio.sound-player").defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:!1,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:0.001,init:function(b,c){this.parent(b,c);for(var d in b){this.soundList[d]=d;var e=b[d].path;this.jukeboxPlayer=new jukebox.Player({resources:[e+"."+ig.Sound.FORMAT.OGG.ext,e+"."+ig.Sound.FORMAT.MP3.ext],autoplay:!1,spritemap:{music:{start:b[d].startMp3,
end:b[d].endMp3,loop:!0}}})}},play:function(){this.muteFlag||(this.bgmPlaying=!0,this.pausePosition?(console.log("resume"),this.jukeboxPlayer.resume(this.pausePosition)):(console.log("play"),this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,!0)),this.premuteVolume=this.getVolume())},stop:function(){this.bgmPlaying=!1;this.pausePosition=this.jukeboxPlayer.pause()},volume:function(b){console.log("jukebox:",b);0>=b?this.jukeboxPlayer.setVolume(this.minVolume):isNaN(b)?this.jukeboxPlayer.setVolume(1):
1<b?this.jukeboxPlayer.setVolume(1):this.jukeboxPlayer.setVolume(b)},getVolume:function(){return this.jukeboxPlayer.getVolume()},mute:function(b){this.parent(b);this.bgmPlaying&&(console.log("jukebox",this.premuteVolume),this.muteFlag||(this.premuteVolume=this.getVolume()),this.jukeboxPlayer.pause(),this.jukeboxPlayer.setVolume(this.minVolume))},unmute:function(b){this.parent(b);this.muteFlag||(console.log("jukebox",this.premuteVolume),this.jukeboxPlayer.setVolume(this.premuteVolume),this.jukeboxPlayer.resume())}})});
ig.baked=!0;
ig.module("plugins.audio.webaudio-music-player").requires("plugins.audio.sound-player").defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({tagName:"WebaudioMusicPlayer",bgmPlaying:!1,isSupported:!1,muteFlag:!1,pausedTime:0,webaudio:null,useHTML5Audio:!1,audio:null,inactiveAudio:null,codecs:null,_volume:1,soundList:{},init:function(b){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{this.AudioContext=window.AudioContext||window.webkitAudioContext,this.webaudio.context=
new this.AudioContext,this.isSupported=!0}catch(c){console.log("Web Audio API not supported in this browser."),this.webaudio=null,this.useHTML5Audio=!0}if(this.useHTML5Audio)if("undefined"!==typeof Audio)try{new Audio}catch(d){this.useHTML5Audio=!1}else this.useHTML5Audio=!1;this.useHTML5Audio&&(this.audio=new Audio,this.isSupported=!0,this.initHTML5Audio(b));if(!this.isSupported)return null;this.webaudio&&this.initWebAudio(b)},initWebAudio:function(b){ig.ua.iOS&&this.initIOSWebAudioUnlock();this.webaudio.gainNode=
this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;var c="start",d="stop",e=this.webaudio.context.createBufferSource();"function"!==typeof e.start&&(c="noteOn");this.webaudio.compatibility.start=c;"function"!==typeof e.stop&&(d="noteOff");this.webaudio.compatibility.stop=d;for(var f in b){this.soundList[f]=f;c=b[f].path;b=c+"."+ig.Sound.FORMAT.MP3.ext;var g=c+"."+ig.Sound.FORMAT.OGG.ext;ig.ua.mobile?ig.ua.iOS&&
(g=b):(c=navigator.userAgent.toLowerCase(),-1!=c.indexOf("safari")&&-1>=c.indexOf("chrome")&&(g=b));var m=new XMLHttpRequest;m.open("GET.html",g,!0);m.responseType="arraybuffer";m.onload=function(){this.webaudio.context.decodeAudioData(m.response,function(b){this.webaudio.buffer=b;this.webaudio.source_loop={};this.bgmPlaying?this.play():this.stop()}.bind(this),function(){console.log('Error decoding audio "'+g+'".')})}.bind(this);m.send();break}},initIOSWebAudioUnlock:function(){if(this.webaudio){webaudio=
this.webaudio;var b=function(){var c=webaudio.context,d=c.createBuffer(1,1,22050),e=c.createBufferSource();e.buffer=d;e.connect(c.destination);"undefined"===typeof e.start?e.noteOn(0):e.start(0);setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&window.removeEventListener("touchend",b,!1)},0)};window.addEventListener("touchend",b,!1)}},initHTML5Audio:function(b){if(this.useHTML5Audio&&this.audio){var c=this.audio;this.codecs={};this.codecs={mp3:!!c.canPlayType("audio/mpeg;").replace(/^no$/,
""),opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,
"")};this.is={ff:Boolean(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)};this.playDelay=-60;this.stopDelay=30;this.is.chrome&&(this.playDelay=-25);this.is.chrome&&(this.stopDelay=25);this.is.ff&&(this.playDelay=-25);this.is.ff&&
(this.stopDelay=85);this.is.opera&&(this.playDelay=5);this.is.opera&&(this.stopDelay=0);for(var d in b){this.soundList[d]=d;var e=b[d].path,c=e+"."+ig.Sound.FORMAT.OGG.ext,e=e+"."+ig.Sound.FORMAT.MP3.ext,f=null;this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]?f=c:this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]&&(f=e);if(f){ig.ua.mobile?ig.ua.iOS&&(f=e):(b=navigator.userAgent.toLowerCase(),-1!=b.indexOf("safari")&&-1>=b.indexOf("chrome")&&(f=e));this.audio.addEventListener("error",function(){this.audio.error&&
4===this.audio.error.code&&(this.isSupported=!1)},!1);this.audio.src=f;this.audio._pos=0;this.audio.preload="auto";this.audio.volume=this._volume;this.inactiveAudio=new Audio;this.inactiveAudio.src=f;this.inactiveAudio._pos=0;this.inactiveAudio.preload="auto";this.inactiveAudio.volume=this._volume;this.inactiveAudio.load();var g=function(){this._duration=this.audio.duration;this._loaded||(this._loaded=!0);this.bgmPlaying?this.play():this.stop();this.audio.removeEventListener("canplaythrough",g,!1)}.bind(this);
this.audio.addEventListener("canplaythrough",g,!1);this.audio.load();break}}}},play:function(b){if(this.isSupported)if(this.bgmPlaying=!0,this.webaudio)if(this.webaudio.buffer){if(!this.muteFlag&&(this.bgmPlaying=!0,!this.webaudio.source_loop._playing)){this.webaudio.source_loop=this.webaudio.context.createBufferSource();this.webaudio.source_loop.buffer=this.webaudio.buffer;this.webaudio.source_loop.loop=!0;this.webaudio.source_loop.connect(this.webaudio.gainNode);isNaN(b)&&(b=0,this.pausedTime&&
(b=this.pausedTime));this.webaudio.source_loop._startTime=this.webaudio.context.currentTime;if("noteOn"===this.webaudio.compatibility.start)this.webaudio.source_once=this.webaudio.context.createBufferSource(),this.webaudio.source_once.buffer=this.webaudio.buffer,this.webaudio.source_once.connect(this.webaudio.gainNode),this.webaudio.source_once.noteGrainOn(0,b,this.webaudio.buffer.duration-b),this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+(this.webaudio.buffer.duration-
b));else this.webaudio.source_loop[this.webaudio.compatibility.start](0,b);this.webaudio.source_loop._playing=!0}}else this.bgmPlaying=!0;else if(this.audio){var c=this.audio;if(!this.muteFlag){this.bgmPlaying=!0;isNaN(b)&&(b=0,this.pausedTime&&(b=this.pausedTime));var d=this._duration-b;this._onEndTimer&&(clearTimeout(this._onEndTimer),this._onEndTimer=null);this._onEndTimer=setTimeout(function(){this.audio.currentTime=0;this.audio.pause();this.pausedTime=0;if(this.inactiveAudio){var b=this.audio;
this.audio=this.inactiveAudio;this.inactiveAudio=b}this.play()}.bind(this),1E3*d+this.playDelay);4===c.readyState||!c.readyState&&navigator.isCocoonJS?(c.readyState=4,c.currentTime=b,c.muted=this.muteFlag||c.muted,c.volume=this._volume,setTimeout(function(){c.play()},0)):(clearTimeout(this._onEndTimer),this._onEndTimer=null,function(){var b=function(){this.play();c.removeEventListener("canplaythrough",b,!1)}.bind(this);c.addEventListener("canplaythrough",b,!1)}())}}},stop:function(){this.bgmPlaying=
!1;if(this.isSupported)if(this.webaudio){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0)}else if(this.audio){var b=
this.audio;this.pausedTime=b.currentTime;b.currentTime=0;b.pause();clearTimeout(this._onEndTimer);this._onEndTimer=null}},volume:function(b){this.isSupported&&(this._volume=b,0>this._volume?this._volume=0:1<this._volume&&(this._volume=1),this.webaudio?this.webaudio.gainNode&&(this.webaudio.gainNode.gain.value=this._volume):this.audio&&(this.audio.volume=this._volume,this.inactiveAudio&&(this.inactiveAudio.volume=this._volume)))},getVolume:function(){return!this.isSupported?0:this._volume},mute:function(){!1==
this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying&&(this.stop(),this.bgmPlaying=!0))},unmute:function(){!0==this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying&&this.play())}})});ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3"},sfx:{kittyopeningSound:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/opening/kittyopening"},staticSound:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/play/static"},openingSound:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/opening/opening"},button:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/click"},beep:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/beep"},correct:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/correct"},
wrong:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/wrong"},winner:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/winner"},looser:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/looser"}},bgm:{background:{path:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/audio/bgm",startOgg:0,endOgg:21.463,startMp3:0,endMp3:21.463}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.impact-music-player","plugins.audio.impact-sound-player","plugins.audio.howler-player","plugins.audio.howler-music-player","plugins.audio.jukebox-player","plugins.audio.webaudio-music-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:!1,soundInfo:new SoundInfo,init:function(){console.log("Initiating sound handler");this.initWindowHandler();ig.ua.mobile?
(this.initPowerButtonFix(),this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:!0}))):(this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:!0})));this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx)},checkBGM:function(){return this.bgmPlayer.stayMuteFlag},checkSFX:function(){return this.sfxPlayer.stayMuteFlag},
muteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.mute(b)},muteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.mute(b)},unmuteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.unmute(b)},unmuteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.unmute(b)},muteAll:function(b){this.muteSFX(b);this.muteBGM(b)},unmuteAll:function(b){this.unmuteSFX(b);this.unmuteBGM(b)},forceMuteAll:function(){this.focusBlurMute||this.muteAll(!1);this.focusBlurMute=!0},forceUnMuteAll:function(){this.focusBlurMute&&(this.unmuteAll(!1),
this.focusBlurMute=!1)},initWindowHandler:function(){"true"===ig.domHandler.getQueryVariable("webview")?($(window).focus(function(){console.log("1");ig.game.checkRoomUser();ig.soundHandler&&ig.soundHandler.forceUnMuteAll()}),$(window).blur(function(){console.log("2");ig.soundHandler&&ig.soundHandler.forceMuteAll()})):(window.onfocus=function(){ig.game.checkRoomUser();ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},window.onblur=function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})},initPowerButtonFix:function(){var b=
this.getHiddenProp();b&&(b=b.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(b,this.visChange));window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()},!1);window.addEventListener("pageshow",function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},!1)},getHiddenProp:function(){var b=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var c=0;c<b.length;c++)if(b[c]+"Hidden"in document)return b[c]+"Hidden";return null},
isHidden:function(){var b=this.getHiddenProp();return!b?!1:document[b]},visChange:function(){ig.soundHandler.isHidden()?ig.soundHandler&&ig.soundHandler.forceMuteAll():ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},saveVolume:function(){this.sfxPlayer&&ig.game.io.storageSet("soundVolume",this.sfxPlayer.getVolume());this.bgmPlayer&&ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume())},forceLoopBGM:function(){var b;if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying&&this.bgmPlayer){var c=
this.bgmPlayer.jukeboxPlayer;if(c){null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase());b=Boolean(window.chrome);!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase());var d=0.1;ig.ua.mobile&&(d=0.115,ig.ua.android&&(d=0.45,b&&(d=0.3)));c.settings.spritemap.music&&(b=c.settings.spritemap.music.end-d,c.getCurrentTime()>=b&&(b=c.settings.spritemap.music.start,ig.ua.android?this.forcelooped||(c.play(b,!0),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=
!1},d)):c.setCurrentTime(b)))}else"ImpactMusicPlayer"==this.bgmPlayer.tagName&&(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),b=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase()),d=0.1,ig.ua.mobile&&(d=0.115,ig.ua.android&&(d=0.45,b&&(d=0.3))),c=0,"mp3"==ig.soundManager.format.ext&&(c=0.05),ig.music.currentTrack&&(b=ig.music.currentTrack.duration-d,ig.music.currentTrack.currentTime>=b&&(ig.ua.android?this.forcelooped||(ig.music.currentTrack.pause(),
ig.music.currentTrack.currentTime=c,ig.music.currentTrack.play(),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},d)):ig.music.currentTrack.currentTime=c)))}}})});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;ig.module("plugins.io.mouse").defines(function(){Mouse=ig.Class.extend({bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var b in this.bindings){this[b]=b;for(var c=0;c<this.bindings[b].length;c++)ig.input.bind(this.bindings[b][c],b)}},getPos:function(){if(ig.ua.mobile)var b=ig.input.mouse.x/ig.sizeHandler.sizeRatio.x,c=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;else b=ig.input.mouse.x,c=ig.input.mouse.y;return new Vector2(b,c)}})});
ig.baked=!0;ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{esc:[ig.KEY.ESC],enter:[ig.KEY.ENTER]},init:function(){for(var b in this.bindings){this[b]=b;for(var c=0;c<this.bindings[b].length;c++)ig.input.bind(this.bindings[b][c],b)}}})});ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var b=navigator.getGamepads||navigator.webkitGetGamepads;b&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=b}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(b){return"object"==typeof b?b.pressed:
1==b},buttonDown:function(b){if(b=this.bindings[b])this.states[b]=!0,this.downLocks[b]||(this.presses[b]=!0,this.downLocks[b]=!0)},buttonUp:function(b){if((b=this.bindings[b])&&this.downLocks[b]&&!this.upLocks[b])this.states[b]=!1,this.releases[b]=!0,this.upLocks[b]=!0},clearPressed:function(){for(var b in this.releases)this.states[b]=!1,this.downLocks[b]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(b,c){this.bindings[b]=c},unbind:function(b){this.releases[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(b){return this.states[b]},pressed:function(b){return this.presses[b]},released:function(b){return this.releases[b]},clamp:function(b,c,d){return b<c?c:b>d?d:b},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var b in this.bindings){for(var c=
!1,d=0;d<this.list.length;d++){var e=this.list[d];if(e&&e.buttons&&this.buttonPressed(e.buttons[b])){c=!0;break}}c?this.buttonDown(b):this.buttonUp(b)}for(d=0;d<this.list.length;d++)if((e=this.list[d])&&e.axes){b=e.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var c=e.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],f=e.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],e=e.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(b)?0:b;this.leftStick.y+=isNaN(c)?0:c;this.rightStick.x+=isNaN(f)?0:f;this.rightStick.y+=
isNaN(e)?0:e}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var b in this.bindings)for(var c=0;c<this.bindings[b].length;c++)ig.gamepadInput.bind(this.bindings[b][c],b)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var b=[],c=0;c<ig.multitouchInput.touches.length;c++){var d=ig.multitouchInput.touches[c];b.push({x:d.x,y:d.y})}return b}return null}}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(b){if(ig.ua.touchDevice){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||
ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight);if(b.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<b.touches.length&&(this.multitouchCapable=!0);var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());for(var f=0;f<b.touches.length;f++){var g=b.touches[f];g&&this.touches.push({x:(g.clientX-e.left)/c,y:(g.clientY-e.top)/d})}}else this.windowMove(b)}},touchdown:function(b){var c=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(b);else if(ig.ua.touchDevice&&b.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<b.touches.length&&(this.multitouchCapable=!0);var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());
for(var f=0;f<b.touches.length;f++){var g=b.touches[f];g&&this.touches.push({x:(g.clientX-e.left)/c,y:(g.clientY-e.top)/d})}}},touchup:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;parseInt(ig.system.canvas.offsetHeight);c=ig.system.scale*(c/ig.system.realWidth);if(window.navigator.msPointerEnabled)this.windowKeyUp(b);else{this.lastEventUp=b;var d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());if(ig.ua.touchDevice){b=
(b.changedTouches[0].clientX-d.left)/c;for(c=0;c<this.touches.length;c++)this.touches[c].x>=b-40&&this.touches[c].x<=b+40&&this.touches.splice(c,1)}}},windowKeyDown:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight);if(window.navigator.msPointerEnabled){var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());
b=b.changedTouches?b.changedTouches:[b];for(var f=0;f<b.length;++f){for(var g=b[f],m="undefined"!=typeof g.identifier?g.identifier:"undefined"!=typeof g.pointerId?g.pointerId:1,l=(g.clientX-e.left)/c,g=(g.clientY-e.top)/d,n=0;n<this.touches.length;++n)this.touches[n].identifier==m&&this.touches.splice(n,1);this.touches.push({x:l,y:g,identifier:m})}for(c=0;c<this.touches.length;c++);}},windowKeyUp:function(b){b="undefined"!=typeof b.identifier?b.identifier:"undefined"!=typeof b.pointerId?b.pointerId:
1;for(var c=0;c<this.touches.length;++c)this.touches[c].identifier==b&&this.touches.splice(c,1);for(;0<this.touches.length;)this.touches.pop()},windowMove:function(b){var c=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,c=ig.system.scale*(c/ig.system.realWidth),d=ig.system.scale*(d/ig.system.realHeight),e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());if(window.navigator.msPointerEnabled)for(var f=
"undefined"!=typeof b.identifier?b.identifier:"undefined"!=typeof b.pointerId?b.pointerId:1,g=0;g<this.touches.length;++g)if(this.touches[g].identifier==f){var m=(b.clientY-e.top)/d;this.touches[g].x=(b.clientX-e.left)/c;this.touches[g].y=m}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input").defines(function(){IoManager=ig.Class.extend({storage:null,localStorageSupport:!1,gamekey:"TeamKaboom",mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();this.initMouse();
this.initKeyboard()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){this._supportsLocalStorage()&&(this.storage=new ig.Storage)},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=new Gamepad},press:function(b){return ig.input.pressed(b)||this.gamepad.press(b)?!0:!1},held:function(b){return ig.input.state(b)||this.gamepad.state(b)?
!0:!1},release:function(b){return ig.input.released(b)||this.gamepad.released(b)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(b,c,d,e,f){return b.x>c+e||b.x<c||b.y>d+f||b.y<d?!1:!0},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(b){return this.localStorageSupport}},
storageIsSet:function(b){return!this.localStorageSupport?null:this.storage.isSet(b)},storageGet:function(b){return!this.localStorageSupport?null:this.storage.get(b)},storageSet:function(b,c){if(!this.localStorageSupport)return null;this.storage.set(b,c)},assert:function(b,c,d){if(c!==d)throw"actualValue:"+c+" not equal to testValue:"+d+" at "+b;}})});ig.baked=!0;
ig.module("plugins.scale").requires("impact.entity").defines(function(){ig.Entity.inject({scale:{x:1,y:1},_offset:{x:0,y:0},_scale:{x:1,y:1},_size:{x:0,y:0},init:function(b,c,d){this.parent(b,c,d);this._offset.x=this.offset.x;this._offset.y=this.offset.y;this._size.x=this.size.x;this._size.y=this.size.y;this.setScale(this.scale.x,this.scale.y)},draw:function(){var b=ig.system.context;b.save();b.translate(ig.system.getDrawPos(this.pos.x.round()-this.offset.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y.round()-
this.offset.y-ig.game.screen.y));b.scale(this._scale.x,this._scale.y);this.currentAnim&&this.currentAnim.draw(0,0);b.restore()},setScale:function(b,c){var d=this.size.x,e=this.size.y;this.scale.x=b||this.scale.x;this.scale.y=c||this.scale.y;this._scale.x=this.scale.x/ig.system.scale;this._scale.y=this.scale.y/ig.system.scale;this.offset.x=this._offset.x*this._scale.x;this.offset.y=this._offset.y*this._scale.y;this.size.x=this._size.x*this._scale.x;this.size.y=this._size.y*this._scale.y;this.pos.x+=
(d-this.size.x)/2;this.pos.y+=(e-this.size.y)/2}})});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({preloadingDone:!1,preloadDoneTime:0,fadeInDuration:0.2,adjustedStatus:0,preloadedStatus:0,fontTestAttempts:0,font:"bebasneue",titlePos:{x:0,y:0},logo:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/logo.png"),loadEmpty:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/loading-empty.png"),loadFill:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/loading-fill.png"),
init:function(b,c){this.parent(b,c);console.log("Checking for AdInGamePreroll ...");"undefined"!=typeof AdInGamePreroll&&AdInGamePreroll.Initialize();console.log("Checking for BrandingSplashScreen ...");"undefined"!=typeof BrandingSplashScreen&&InitializeSplashScreen();console.log("Injecting Loading Game API ...");try{console.log('enabled loading api12');}catch(d){console.log(d.message)}ig.apiHandler.run("MJSPreroll")},end:function(){this.parent();if(ig.ua.mobile){var b=ig.domHandler.getElementById("#play");
ig.domHandler.show(b)}ig.system.setGame(MyGame)},setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){this._drawStatus+=
(this.status-this._drawStatus)/5;var b=ig.system.context;b.save();b.globalAlpha=1;b.fillStyle="#44929f";b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();this.logo.draw(100,100);this.loadEmpty.draw(ig.system.width/2-this.loadEmpty.width/2,480);this.loadFill.draw(ig.system.width/2-(this.loadEmpty.width-1)/2,480,1,1,(this.loadFill.width-1)*this._drawStatus,this.loadFill.height-1);var b=_STRINGS.Loading.Loading,c;c=ig.system.width/2;ig.system.context.font="26px DroidSans, Charcoal, Impact, Arial";
ig.system.context.textAlign="center";ig.system.context.textBaseline="middle";ig.system.context.fillStyle="rgba(0,0,0,0.7)";ig.system.context.fillText(b,c+1,507);ig.system.context.fillStyle="#fff";ig.system.context.fillText(b,c,505);ig.system.context.restore()}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var c=0;c<this.length;++c)if(this[c]===b)return c;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);this.tweens=
b}};ig.Entity.prototype.tween=function(b,c,d){b=new ig.Tween(this,b,c,d);this.tweens.push(b);return b};ig.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};ig.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};ig.Entity.prototype.stopTweens=function(b){for(var c=0;c<this.tweens.length;c++)this.tweens[c].stop(b)};ig.Tween=function(b,c,d,e){var f={},g={},m={},l=0,n=!1,r=!1,q=!1;this.duration=d;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,e);this.loopNum=this.loopCount;this.chain=function(b){q=b};this.initEnd=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.initEnd(subprop,c[b],d[b])};this.initStart=function(b,c,d,e){if("object"!==typeof d[b])"undefined"!==typeof c[b]&&(e[b]=d[b]);else for(subprop in d[b])e[b]||(e[b]={}),"undefined"!==typeof c[b]&&this.initStart(subprop,
c[b],d[b],e[b])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;l=0;-1==b.tweens.indexOf(this)&&b.tweens.push(this);r=!0;n=new ig.Timer;for(var d in c)this.initEnd(d,c,g);for(d in g)this.initStart(d,g,b,f),this.initDelta(d,m,b,g)};this.initDelta=function(b,c,d,e){if("object"!==typeof e[b])c[b]=e[b]-d[b];else for(subprop in e[b])c[b]||(c[b]={}),this.initDelta(subprop,c[b],d[b],e[b])};this.propUpdate=function(b,c,d,e,f){if("object"!==typeof d[b])c[b]="undefined"!=typeof d[b]?
d[b]+e[b]*f:c[b];else for(subprop in d[b])this.propUpdate(subprop,c[b],d[b],e[b],f)};this.propSet=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.propSet(subprop,c[b],d[b])};this.update=function(){if(!r)return!1;if(this.delay){if(n.delta()<this.delay)return;this.delay=0;n.reset()}if(this.paused||this.complete)return!1;var c=(n.delta()+l)/this.duration,c=1<c?1:c,d=this.easing(c);for(property in m)this.propUpdate(property,b,f,m,d);if(1<=c){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();q&&q.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in f)this.propSet(property,f,b);l=0;n.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){c={};d={};ig.merge(c,g);ig.merge(d,f);ig.merge(f,c);ig.merge(g,d);for(property in g)this.initDelta(property,m,b,g);l=0;n.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;l+=n.delta()};this.resume=function(){this.paused=
!1;n.reset()};this.stop=function(b){b&&(this.loop=this.complete=this.paused=!1,l+=d,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(b){return b};ig.Tween.Easing.Quadratic.EaseIn=function(b){return b*b};ig.Tween.Easing.Quadratic.EaseOut=function(b){return-b*(b-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(b){return b*b*b};ig.Tween.Easing.Cubic.EaseOut=function(b){return--b*b*b+1};ig.Tween.Easing.Cubic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};ig.Tween.Easing.Quartic.EaseIn=function(b){return b*b*b*b};ig.Tween.Easing.Quartic.EaseOut=function(b){return-(--b*b*b*b-1)};ig.Tween.Easing.Quartic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)};ig.Tween.Easing.Quintic.EaseIn=
function(b){return b*b*b*b*b};ig.Tween.Easing.Quintic.EaseOut=function(b){return(b-=1)*b*b*b*b+1};ig.Tween.Easing.Quintic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(b){return-Math.cos(b*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(b){return Math.sin(b*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(b){return-0.5*(Math.cos(Math.PI*b)-1)};ig.Tween.Easing.Exponential.EaseIn=function(b){return 0==b?0:Math.pow(2,
10*(b-1))};ig.Tween.Easing.Exponential.EaseOut=function(b){return 1==b?1:-Math.pow(2,-10*b)+1};ig.Tween.Easing.Exponential.EaseInOut=function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(b){return-(Math.sqrt(1-b*b)-1)};ig.Tween.Easing.Circular.EaseOut=function(b){return Math.sqrt(1- --b*b)};ig.Tween.Easing.Circular.EaseInOut=function(b){return 1>(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e))};ig.Tween.Easing.Elastic.EaseOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*b)*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Elastic.EaseInOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;
e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return 1>(b*=2)?-0.5*d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e):0.5*d*Math.pow(2,-10*(b-=1))*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Back.EaseIn=function(b){return b*b*(2.70158*b-1.70158)};ig.Tween.Easing.Back.EaseOut=function(b){return(b-=1)*b*(2.70158*b+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(b){return 1-ig.Tween.Easing.Bounce.EaseOut(1-b)};ig.Tween.Easing.Bounce.EaseOut=function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(b){return 0.5>b?0.5*ig.Tween.Easing.Bounce.EaseIn(2*b):0.5*ig.Tween.Easing.Bounce.EaseOut(2*b-1)+0.5}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var b=getQueryVariable("webview");if(b)switch(b){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(b=getQueryVariable("debug"))switch(b){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(b,c){this.game=b;this.levels=[];this.currentLevel=0;this.append(c)},loadLevel:function(b){for(var c in ig.sizeHandler.dynamicClickableEntityDivs){var d=ig.domHandler.getElementById("#"+c);ig.domHandler.hide(d)}this.currentLevel=b;this.game.loadLevel(this.levels[b]);return!0},loadLevelWithoutEntities:function(b){this.currentLevel=b;this.game.loadLevelWithoutEntities(this.levels[b]);return!0},
append:function(b){newLevels=[];return"object"===typeof b?(b.constructor===[].constructor?newLevels=b:newLevels[0]=b,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(b){var c=null;for(i=0;i<this.levels.length;i++)this.levels[i]==b&&(c=i);return 0<=c?this.loadLevel(c):!1},firstLevel:function(){return this.loadLevel(0)},
lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return!("undefined"===typeof window.localStorage||null==window.localStorage)},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.mjs-network-client").defines(function(){ig.MjsNetworkClient=ig.Class.extend({MESSAGE_TAG:"mjs_msg",PING_TAG:"mjs_ping",PING_REPLY_TAG:"mjs_ping_reply",server_ip:null,socket:null,round_trip_time:0,time_diff:0,last_ping_time:0,latency_average:0,latency_log:[],latency_log_size:10,onServerConnectHandlers:[],onServerDisconnectHandlers:[],onServerMessageHandlers:[],onServerPingHandlers:[],onServerPingReplyHandlers:[],questionIdx:0,init:function(){this.server_ip=getQueryVariable("server_ip")},
getServerTime:function(){return Date.now()-this.time_diff},getQuestion:function(){return this.questionIdx},connect:function(b,c){var d=!1;this.latency_log=[];this.last_pong_time=this.last_ping_time=this.time_diff=this.round_trip_time=this.latency_average=0;if(this.socket)this.socket.disconnected&&(this.socket.connect(),d=!0);else{if("undefined"==typeof this.server_ip||!this.server_ip)this.server_ip="undefined"==typeof SERVER_IP||!SERVER_IP?"localhost":SERVER_IP;var e="3051",e=document.location.protocol&&
"function"==typeof document.location.protocol.includes&&document.location.protocol.includes("https")?"3051":"3050";this.server_ip+=":"+e;(this.socket=io(this.server_ip))&&(d=!0)}if(d)return this.socket.off(),this.socket.on("connect",function(){this.onServerConnect();this.socket.off("disconnect");this.socket.on("disconnect",function(){this.onServerDisconnect()}.bind(this));this.socket.off(this.MESSAGE_TAG);this.socket.on(this.MESSAGE_TAG,function(b){this.onServerMessage(b)}.bind(this));this.socket.off(this.PING_TAG);
this.socket.on(this.PING_TAG,function(b){this.onServerPing(b)}.bind(this));this.socket.off(this.PING_REPLY_TAG);this.socket.on(this.PING_REPLY_TAG,function(b){this.onServerPingReply(b)}.bind(this))}.bind(this)),"function"==typeof b&&b(),!0;"function"==typeof c&&c();return!1},disconnect:function(b,c){if(this.socket&&!this.socket.disconnected)return this.socket.once("disconnect",function(){"function"==typeof b&&b()}.bind(this)),this.socket.disconnect(),!0;"function"==typeof c&&c();return!1},onServerConnect:function(){for(var b=
0,c=this.onServerConnectHandlers.length;b<c;b++){var d=this.onServerConnectHandlers[b];"function"===typeof d&&d()}},onServerDisconnect:function(){for(var b=0,c=this.onServerDisconnectHandlers.length;b<c;b++){var d=this.onServerDisconnectHandlers[b];"function"===typeof d&&d()}},onServerMessage:function(b){if(b)for(var c=0,d=this.onServerMessageHandlers.length;c<d;c++){var e=this.onServerMessageHandlers[c];"function"===typeof e&&e(b)}},onServerPing:function(b){b.pongTime=Date.now();this.socket.emit(this.PING_REPLY_TAG,
b);this.last_ping_time=Date.now();for(var c=0,d=this.onServerPingHandlers.length;c<d;c++){var e=this.onServerPingHandlers[c];"function"===typeof e&&e(b)}},onServerPingReply:function(b){if(b&&!isNaN(b.pingTime)&&!(null===b.pingTime||isNaN(b.pongTime)||null===b.pongTime)){this.last_ping_time=Date.now();this.round_trip_time=Date.now()-b.pingTime;this.time_diff=Date.now()-b.pongTime+this.round_trip_time/2;this.questionIdx=b.questionId;this.recalculateTimeDiff(Math.floor(this.round_trip_time/2),b.pongTime);
for(var c=0,d=this.onServerPingReplyHandlers.length;c<d;c++){var e=this.onServerPingReplyHandlers[c];"function"===typeof e&&e(b)}}},pingServer:function(){if(this.socket){var b={};b.pingTime=Date.now();this.socket.emit(this.PING_TAG,b)}},sendMessage:function(b){this.socket.emit(this.MESSAGE_TAG,b)},recalculateTimeDiff:function(b,c){if(!(null===b||isNaN(b)||null===c||isNaN(c))){this.latency_log.length>=this.latency_log_size&&this.latency_log.shift();this.latency_log.push(b);for(var d=0,e=0,f=this.latency_log.length;e<
f;e++)d+=this.latency_log[e];this.latency_average=Math.round(d/this.latency_log.length);this.time_diff=Date.now()-(c+this.latency_average)}}})});ig.baked=!0;
ig.module("game.classes.network-game").defines(function(){NetworkGame=ig.Class.extend({network_client:null,clientVersion:0.01,clientRequestGameTime:0,gameJoinedServerTime:0,gameJoinedLocalTime:0,initialGameState:null,pingReplyPending:!1,pingTimeout:5E3,roomId:null,playerId:null,userCount:0,playerConfirmedCallback:null,requestGameCallback:null,requestGameFailedCallback:null,requestGameStateCallback:null,gameStateUpdateCallback:null,pingReplyCallback:null,pendingUpdate:null,unhandledUpdateQueue:[],
init:function(b){b&&(this.network_client=b,this.boundOnPingReply=this.onPingReply.bind(this),this.network_client.onServerConnectHandlers.push(this.onServerConnect.bind(this)),this.network_client.onServerDisconnectHandlers.push(this.onServerConnectFailed.bind(this)),this.network_client.onServerMessageHandlers.push(this.onServerMessage.bind(this)))},getServerTime:function(){if(!this.network_client||!this.network_client.socket)return 0;this.getQuestion();return this.network_client.getServerTime()},getQuestion:function(){if(shared_game)return shared_game.Getsharedata().questionId},
pingServer:function(b,c){if(!this.network_client||!this.network_client.socket)return!1;if(this.pingReplyPending)return"function"==typeof c&&c(),this.pingReplyPending=!1;this.pingReplyCallback=b;0>this.network_client.onServerPingReplyHandlers.indexOf(this.boundOnPingReply)&&this.network_client.onServerPingReplyHandlers.push(this.boundOnPingReply);this.network_client.pingServer();return!0},requestGame:function(b,c,d){if(!this.network_client||!this.network_client.socket)return"function"==typeof d&&d(),
!1;if(!b||"object"!=typeof b)b={};this.clientRequestGameTime=Date.now();b.clientVersion=this.clientVersion;this.unhandledUpdateQueue=[];this.playerConfirmedCallback=c;this.requestGameCallback=null;this.requestGameFailedCallback=d;this.network_client.sendMessage({type:shared_game.MessageType.REQUEST_ROOM,data:b});return!0},cancelRequestGame:function(){if(!this.network_client||!this.network_client.socket)return!1;this.network_client.sendMessage({type:shared_game.MessageType.LEAVE_ROOM});return!0},requestGameState:function(b,
c,d){if(!this.network_client||!this.network_client.socket)return"function"==typeof d&&d(),!1;this.requestGameStateCallback=c;this.network_client.sendMessage({type:shared_game.MessageType.REQUEST_GAMESTATE,data:b});return!0},leaveGame:function(b,c){if(!this.network_client||!this.network_client.socket)return"function"==typeof c&&c(),!1;this.network_client.sendMessage({type:shared_game.MessageType.LEAVE_ROOM,playerId:this.playerId});this.unhandledUpdateQueue=[];this.playerId=this.roomId=null;this.pingReplyPending=
!1;this.gameStateUpdateCallback=null;"function"==typeof b&&b();return!0},addEventToClientUpdate:function(b){null==this.pendingUpdate&&(this.pendingUpdate=new shared_game.Update);b&&"function"==typeof b.packData&&this.pendingUpdate.eventList.push(b)},sendClientUpdate:function(){if(this.network_client&&this.network_client.socket){if(isNaN(this.roomId)||null===this.roomId||isNaN(this.playerId)||null===this.playerId)return!1;null==this.pendingUpdate&&(this.pendingUpdate=new shared_game.Update);var b=
this.pendingUpdate;0<b.eventList.length&&(b=b.packData(),this.network_client.sendMessage({type:shared_game.MessageType.CLIENT_UPDATE,data:b}),this.pendingUpdate=new shared_game.Update);return!0}},sendChatMessage:function(b){this.network_client&&this.network_client.socket&&b&&this.network_client.sendMessage({type:shared_game.MessageType.CHAT_MESSAGE,data:b})},getPlayerCount:function(){if(this.network_client&&this.network_client.socket){if(isNaN(this.roomId)||null===this.roomId||isNaN(this.playerId)||
null===this.playerId)return!1;var b={};b.playerId=this.playerId;b.id=this.roomId;b.count=1;this.network_client.sendMessage({type:shared_game.MessageType.PLAYER_COUNT,data:b})}},sendAnswer:function(b){this.network_client&&this.network_client.socket&&b&&this.network_client.sendMessage({type:shared_game.MessageType.PLAYER_ANSWER,data:b})},nextQuestion:function(b){this.network_client&&this.network_client.socket&&b&&this.network_client.sendMessage({type:shared_game.MessageType.NEXT_QUESTION,data:b})},
gamePaused:function(b){this.network_client&&this.network_client.socket&&b&&this.network_client.sendMessage({type:shared_game.MessageType.GAME_PAUSED,data:b})},startQuestion:function(b){this.network_client&&this.network_client.socket&&b&&this.network_client.sendMessage({type:shared_game.MessageType.QUESTION_SEQUENCE,data:b})},sendPlayerReady:function(){var b=new shared_game.Event(shared_game.EventType.PLAYER_READY,this.getServerTime());this.addEventToClientUpdate(b);this.sendClientUpdate()},sendPlayerDecision:function(b){var c=
new shared_game.Event(shared_game.EventType.PLAYER_DECISION,this.getServerTime());c.info={};c.info.decision=b;this.addEventToClientUpdate(c);this.sendClientUpdate()},onServerConnect:function(){var b=ig.game.entities[0];b&&b.isHome&&b.showConnecting()},onServerConnectFailed:function(){ig.game.resetApp();var b=ig.game.entities[0];b&&b.isHome&&b.showConnectionFailed()},onServerMessage:function(b){if(b&&shared_game)switch(b.type){case shared_game.MessageType.ERROR:this.onError(b.data);break;case shared_game.MessageType.USER_CONFIRMED:this.onUserConfirmed(b.data);
break;case shared_game.MessageType.USER_CONNECTED:this.onUserConnected(b.data);break;case shared_game.MessageType.USER_DISCONNECTED:this.onUserDisconnected(b.data);break;case shared_game.MessageType.PLAYER_CONFIRMED:this.onPlayerConfirmed(b.data);break;case shared_game.MessageType.REQUEST_ROOM_CONFIRMED:this.onRequestRoomConfirmed(b.data);break;case shared_game.MessageType.REQUEST_ROOM_REJECTED:this.onRequestRoomRejected(b.data);break;case shared_game.MessageType.GAMESTATE:this.onGameStateReply(b.data);
break;case shared_game.MessageType.GAMESTATE_UPDATE:this.onGameStateUpdate(b.data);break;case shared_game.MessageType.ROOM_NOTIFICATION:this.onRoomNotification(b.data);break;case shared_game.MessageType.CHAT_MESSAGE:this.onChatMessage(b.data);break;case shared_game.MessageType.PLAYER_ANSWER:this.onGetAnswer(b.data);break;case shared_game.MessageType.PLAYER_START:this.onGetQuestionIndex(b.data);break;case shared_game.MessageType.PLAYER_READY:this.onPlayerReady(b.data);break;case shared_game.MessageType.PLAYER_COUNT:this.onPlayerCount(b.data)}},
onUserConfirmed:function(b){this.userCount=b;if((b=ig.game.entities[0])&&b.isHome)b.hideConnecting(),b.hideConnectionFailed()},onUserConnected:function(b){this.userCount=b},onUserDisconnected:function(b){this.userCount=b},onRequestRoomRejected:function(b){this.playerId=this.roomId=null;"function"==typeof this.requestGameFailedCallback&&this.requestGameFailedCallback(b);this.requestGameFailedCallback=null},onPlayerConfirmed:function(b){this.roomId=b.roomId;this.playerId=b.playerId;this.gameJoinedServerTime=
b.joinedTime;this.gameJoinedLocalTime=Date.now();var c=Math.floor((Date.now()-this.clientRequestGameTime)/2);this.network_client.recalculateTimeDiff(c,b.joinedTime);"function"==typeof this.playerConfirmedCallback&&this.playerConfirmedCallback(b);this.playerConfirmedCallback=null},onRequestRoomConfirmed:function(b){this.roomId=b.roomId;this.playerId=b.playerId;this.initialGameState=b.gameState;this.network_client.recalculateTimeDiff(Math.floor(b.latency/2),b.serverTime);ig.global.initialGameState=
b.gameState;var c=ig.game.getEntitiesByType(EntityHomeControl)[0];c&&c.gameConfirmed(b);"function"==typeof this.requestGameCallback&&this.requestGameCallback(b);this.requestGameCallback=null},onRequestGameState:function(b){"function"==typeof this.requestGameStateCallback&&this.requestGameStateCallback(b);this.requestGameStateCallback=null},onRoomNotification:function(b){b.players[0].id==this.playerId&&"leaveroom"==b.gameState&&setTimeout(function(){ig.game.showDisconnect=!0}.bind(this),100);var c=
ig.game.entities[0];c&&"function"==typeof c.gameMeta&&c.gameMeta(b)},onChatMessage:function(){},onGetAnswer:function(b){ig.game.getEntitiesByType(EntityQuestionBoard)[0].checkAnswer(b)},onGetQuestionIndex:function(b){ig.game.getEntitiesByType(EntityQuestionBoard)[0].setQuestionIndex(b)},onGetPausedStatus:function(b){(ig.game.mode="multiplayer")&&ig.game.getEntitiesByType(EntityQuestionBoard)[0].setPauseStatus(b)},onPlayerReady:function(b){(ig.game.mode="multiplayer")&&ig.game.getEntitiesByType(EntityGetReady)[0].setCountDown(b)},
onPlayerCount:function(b){(ig.game.mode="multiplayer")&&console.log(b)},onGameStateReply:function(){},onGameStateUpdate:function(b){var c=!1;"function"==typeof this.gameStateUpdateCallback&&(c=this.gameStateUpdateCallback(b));c||this.unhandledUpdateQueue.push(b)},onError:function(){ig.game.resetApp()},onPingReply:function(){var b=this.network_client.onServerPingReplyHandlers.indexOf(this.boundOnPingReply);0<=b&&this.network_client.onServerPingReplyHandlers.splice(b,1);this.pingReplyPending=!1;"function"==
typeof this.pingReplyCallback&&this.pingReplyCallback(this.clientLatencyAverage);this.pingReplyCallback=null}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/opening/shield.png"),mIconImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/opening/m_icon.png"),titleImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/opening/title.png"),init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=
new ig.Timer(0.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateOriginalShieldOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&
0<this.initTimer.delta()&&(this.initTimer=null,this.sheildTimer=new ig.Timer(0.05));this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(0.001),this.mIconTimer=new ig.Timer(0.05),this.titleTimer=new ig.Timer(0.15)));this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=0.3,this.moveTimer.reset());this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):
this.mIconTimer=null);this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var b=ig.system.context;b.save();var c=ig.system.width/2,d=ig.system.height/2;b.translate(c,d);b.rotate(this.move*Math.PI/
180);b.beginPath();b.moveTo(0,0);for(var e=0,f=1;48>=f;f+=1)b.lineTo(0+800*Math.cos(2*f*Math.PI/48),0+800*Math.sin(2*f*Math.PI/48)),e++,2==e&&(e=0,b.lineTo(0,0));b.translate(-c,-d);c=b.createRadialGradient(c,d,100,c,d,250);c.addColorStop(0,"rgba(255,255,255,0.1)");c.addColorStop(1,"rgba(0,0,0,0)");b.fillStyle=c;b.fill();b.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768);this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/
2-70,this.mIconAnim,166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/opening/kittytitle.png"),soundKey:"kittyopeningSound",init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);
try{ig.soundHandler.sfxPlayer.play(this.soundKey)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateKittyOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=
new ig.Timer(0.15));this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var b=ig.system.context.createLinearGradient(0,0,0,ig.system.height);b.addColorStop(0,"#ffed94");b.addColorStop(1,"#ffcd85");ig.system.context.fillStyle=
b;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);0<=this.kittyAnim&&(this.kittyImage.drawTile(ig.system.width/2-this.kittyImage.width/8,ig.system.height/2-this.kittyImage.height/4,this.kittyAnim,218,325),this.kittyTitleImage.drawTile(ig.system.width/2-this.kittyTitleImage.width/2,ig.system.height/2+this.kittyImage.height/4+10,this.kittyAnim,380,37));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5E3,check:function(b){this.objectArray.push(b)},clickObject:function(b){this.isFirstPressed&&"function"==typeof b.clicked&&(b.clicked(),this.addToClickedObjectList(b));this.isPressed&&!this.isReleased&&"function"==typeof b.clicking&&
b.clicking();this.isReleased&&"function"==typeof b.released&&(b.released(),this.removeFromClickedObjectList(b))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var b=null,c=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>c&&(c=this.objectArray[a].zIndex,b=this.objectArray[a]);if(null!=b)null!=this.hoveringItem?this.hoveringItem!=b&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),"function"==typeof b.over&&
b.over()):"function"==typeof b.over&&b.over(),this.hoveringItem=b,this.clickObject(b),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(b=0;b<this.clickedObjectList.length;b++)c=this.clickedObjectList[b],"function"==typeof c.releasedOutside&&c.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");this.isPressed=
ig.input.state("click")},addToClickedObjectList:function(b){this.clickedObjectList.push(b)},removeFromClickedObjectList:function(b){for(var c=[],d=0;d<this.clickedObjectList.length;d++){var e=this.clickedObjectList[d];e!=b&&c.push(e)}this.clickedObjectList=c}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(b,c,d){this.parent(b,c,d)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(b,c,d){this.parent(b,c,d);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,
c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var f=ig.$new("div");f.id=b;document.body.appendChild(f);$("#"+f.id).css("float","left");$("#"+f.id).css("width",this.size.x*multiplier);$("#"+f.id).css("height",this.size.y*multiplier);$("#"+f.id).css("position","absolute");
var g=w/2-destW/2,m=h/2-destH/2;w==mobileWidth?($("#"+f.id).css("left",this.pos.x),$("#"+f.id).css("top",this.pos.y)):($("#"+f.id).css("left",g+this.pos.x*multiplier),$("#"+f.id).css("top",m+this.pos.y*multiplier));e?$("#"+f.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+f.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=$("#"+f.id).width();dynamicClickableEntityDivs[b].height=
$("#"+f.id).height();dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isHovering=!1)},deselectOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;
ig.module("game.entities.trivia.disconnect-popup").requires("impact.entity").defines(function(){EntityDisconnectPopup=ig.Entity.extend({size:{x:480,y:640},type:ig.Entity.TYPE.B,zIndex:99999,init:function(b,c,d){this.parent(b,c,d);ig.game.popup="disconnect";ig.game.network_game.leaveGame()},ready:function(){ig.game.sortEntitiesDeferred()},clicked:function(){},release:function(){},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.globalAlpha=0.6;b.fillStyle=
"#000000";b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.globalAlpha=0.9;b.fillStyle="#000000";this.roundRect(b,20,ig.system.height/2-20,440,40,10,!0,!0);b.restore();var c=_STRINGS.UI["Leave Game"];b.font="20px DroidSans,bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="#ffffff";b.fillText(c,ig.system.width/2,ig.system.height/2)},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+
g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}});EntityPausedAlert=ig.Entity.extend({size:{x:480,y:640},type:ig.Entity.TYPE.B,zIndex:9999,init:function(b,c,d){this.parent(b,c,d);this.home=ig.game.spawnEntity(EntityButtonHome,this.size.x/2-30,this.size.y/2-80,{zIndex:this.zIndex+100});ig.game.sortEntitiesDeferred()},
update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.globalAlpha=0.8;b.fillStyle="#000000";b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.globalAlpha=0.9;b.fillStyle="#000000";this.roundRect(b,20,ig.system.height/2-20,440,40,10,!0,!0);b.restore();var c=_STRINGS.UI.Paused;b.font="20px DroidSans,bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="#ffffff";b.fillText(c,ig.system.width/2,ig.system.height/2)},
roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;
ig.module("plugins.fade-transition").defines(function(){ig.FadeTransition=ig.Class.extend({targetOverlayAlpha:1,overlayAlpha:1,transitionDuration:0.2,transitionTime:0,transitionFadein:!1,transitionFadeout:!1,transitionEndFunction:null,init:function(){},draw:function(){this.drawTransition()},update:function(){if(this.transitionFadein){var b=ig.system.clock.delta()-this.transitionTime,b=0==this.transitionDuration?1:b/this.transitionDuration;1<b&&(b=1);this.overlayAlpha=this.targetOverlayAlpha*(1-b);
1<=b&&(this.transitionFadein=!1,this.transitionEndFunction&&this.transitionEndFunction())}else this.transitionFadeout&&(b=ig.system.clock.delta()-this.transitionTime,b=0==this.transitionDuration?1:b/this.transitionDuration,1<b&&(b=1),this.overlayAlpha=this.targetOverlayAlpha*b,1<=b&&(this.transitionFadeout=!1,this.transitionEndFunction&&this.transitionEndFunction()))},drawTransition:function(){if(this.transitionFadein||this.transitionFadeout)this.overlayAlpha>this.targetOverlayAlpha&&(this.overlayAlpha=
this.targetOverlayAlpha),ig.system.context.globalAlpha=this.overlayAlpha,ig.system.context.fillStyle="#000000",ig.system.context.fillRect(0,0,ig.system.width,ig.system.height),ig.system.context.globalAlpha=1},startFadeinTransition:function(){this.transitionFadein||(this.transitionFadein=!0,this.transitionTime=ig.system.clock.delta(),this.overlayAlpha=1)},startFadeoutTransition:function(){this.transitionFadeout||(this.transitionFadeout=!0,this.transitionTime=ig.system.clock.delta(),this.overlayAlpha=
0)}})});ig.baked=!0;
ig.module("plugins.sat").defines(function(){ig.SAT=ig.Class.extend({init:function(){},mtvForShapeIntersect:function(b,c){var d=1E4,e=null,f=[],g=[];if(b.isCircle()&&c.isCircle())f.push(c.center.subtract(b.center).normalized());else if(b.isCircle()){for(var m=c.pointList[0],l=b.center.manhattanDistance(m),n=1,r=c.pointList.length;n<r;n++){var q=c.pointList[n],s=b.center.manhattanDistance(q);s<l&&(l=s,m=q)}f.push(m.subtract(b.center).normalized());g=c.getNormalizedAxes()}else if(c.isCircle()){m=b.pointList[0];
l=c.center.manhattanDistance(m);n=1;for(r=b.pointList.length;n<r;n++)q=b.pointList[n],s=c.center.manhattanDistance(q),s<l&&(l=s,m=q);f=b.getNormalizedAxes();g.push(c.center.subtract(m).normalized())}else f=b.getNormalizedAxes(),g=c.getNormalizedAxes();n=0;for(r=f.length;n<r;n++)if(m=f[n],l=b.project(m),q=c.project(m),l.overlap(q)){s=l.getOverlap(q);if(l.contains(q)||q.contains(l))var v=Math.abs(l.min-q.min),u=Math.abs(l.max-q.max),s=v>u?s+v:s+u;s<d&&(d=s,e=m,l.max<q.max&&(e.x=-e.x,e.y=-e.y))}else return null;
n=0;for(r=g.length;n<r;n++)if(m=g[n],l=b.project(m),q=c.project(m),l.overlap(q)){s=l.getOverlap(q);if(l.contains(q)||q.contains(l))v=Math.abs(l.min-q.min),u=Math.abs(l.max-q.max),s=v>u?s+v:s+u;s<d&&(d=s,e=m,l.max<q.max&&(e.x=-e.x,e.y=-e.y))}else return null;return!e?null:new SAT.MTV(e,d)},overshootForShape1ContainsShape2:function(b,c){var d=[],e=[],f=[];if(b.isCircle()&&c.isCircle())e.push(c.center.subtract(b.center).normalized());else if(b.isCircle()){for(var g=c.pointList[0],m=b.center.manhattanDistance(g),
l=1,n=c.pointList.length;l<n;l++){var r=c.pointList[l],q=b.center.manhattanDistance(r);q<m&&(m=q,g=r)}e.push(g.subtract(b.center).normalized());f=b.getNormalizedAxes()}else if(c.isCircle()){g=b.pointList[0];m=c.center.manhattanDistance(g);l=1;for(n=b.pointList.length;l<n;l++)r=b.pointList[l],q=c.center.manhattanDistance(r),q<m&&(m=q,g=r);e=b.getNormalizedAxes();f.push(c.center.subtract(g).normalized())}else e=b.getNormalizedAxes(),f=c.getNormalizedAxes();l=0;for(n=e.length;l<n;l++)if(g=e[l],m=b.project(g),
r=c.project(g),!m.contains(r)){var q=r.max-m.max,s={};s.x=g.x;s.y=g.y;s.l=q;0>q&&(s.x=-s.x,s.y=-s.y,s.l=m.min-r.min);d.push(s)}if(0==d.length){l=0;for(n=f.length;l<n;l++)g=f[l],m=b.project(g),r=c.project(g),m.contains(r)||(q=r.max-m.max,s={},s.x=g.x,s.y=g.y,s.l=q,0>q&&(s.x=-s.x,s.y=-s.y,s.l=m.min-r.min),d.push(s))}if(0<d.length){e={x:0,y:0};l=0;for(n=d.length;l<n;l++)f=d[l],e.x+=f.x*f.l,e.y+=f.y*f.l;return e}return null},simpleShapeIntersect:function(b,c){var d=[],e=[];if(b.isCircle()&&c.isCircle())d.push(c.center.subtract(b.center).normalized());
else if(c.isCircle()||b.isCircle()){if(b.isCircle()){var f=c;c=b;b=f}for(var d=b.pointList[0],g=c.center.manhattanDistance(d),f=1,m=b.pointList.length;f<m;f++){var l=b.pointList[f],n=c.center.manhattanDistance(l);n<g&&(g=n,d=l)}e.push(c.center.subtract(d).normalized());d=b.getNormalizedAxes()}else d=b.getNormalizedAxes(),e=c.getNormalizedAxes();f=0;for(m=d.length;f<m;f++)if(l=d[f],g=b.project(l),l=c.project(l),!g.overlap(l))return!1;f=0;for(m=e.length;f<m;f++)if(l=e[f],g=b.project(l),l=c.project(l),
!l.overlap(g))return!1;return!0},simpleShape1ContainsShape2:function(b,c){var d=[],e=[];if(b.isCircle()&&c.isCircle())d.push(c.center.subtract(b.center).normalized());else if(b.isCircle()){for(var f=c.pointList[0],g=b.center.manhattanDistance(f),m=1,l=c.pointList.length;m<l;m++){var n=c.pointList[m],r=b.center.manhattanDistance(n);r<g&&(g=r,f=n)}d.push(f.subtract(b.center).normalized());e=b.getNormalizedAxes()}else if(c.isCircle()){f=b.pointList[0];g=c.center.manhattanDistance(f);m=1;for(l=b.pointList.length;m<
l;m++)n=b.pointList[m],r=c.center.manhattanDistance(n),r<g&&(g=r,f=n);d=b.getNormalizedAxes();e.push(c.center.subtract(f).normalized())}else d=b.getNormalizedAxes(),e=c.getNormalizedAxes();m=0;for(l=d.length;m<l;m++)if(g=d[m],f=b.project(g),g=c.project(g),!f.contains(g))return!1;m=0;for(l=e.length;m<l;m++)if(g=e[m],f=b.project(g),g=c.project(g),!f.contains(g))return!1;return!0}});ig.SAT.Vector2D=ig.Class.extend({x:0,y:0,init:function(b,c){this.x=b;this.y=c},subtract:function(b){return new ig.SAT.Vector2D(this.x-
b.x,this.y-b.y)},getNormal:function(){return new ig.SAT.Vector2D(-this.y,this.x)},getNormalizedNormal:function(){return(new ig.SAT.Vector2D(-this.y,this.x)).normalized()},normalized:function(){var b=Math.sqrt(this.x*this.x+this.y*this.y);return 0==b?new ig.SAT.Vector2D(0,0):new ig.SAT.Vector2D(this.x/b,this.y/b)},distance:function(b){var c=b.x-this.x;b=b.y-this.y;return Math.sqrt(c*c+b*b)},manhattanDistance:function(b){var c=b.x-this.x;b=b.y-this.y;return c*c+b*b},dotProduct:function(b){return this.x*
b.x+this.y*b.y},crossProduct:function(b){return this.x*b.y-this.y*b.x},getAngle:function(b){return Math.atan2(this.crossProduct(b),this.dotProduct(b))}});ig.SAT.Shape=ig.Class.extend({pointList:[],center:null,init:function(b){this.pointList=[];for(var c=0,d=b.length;c<d;c++){var e=b[c];this.pointList.push(new ig.SAT.Vector2D(e.x,e.y))}},isCircle:function(){return!1},getAxes:function(){var b=[];if(1>=this.pointList.length)return b;if(2==this.pointList.length){var c=this.pointList[0],d=this.pointList[1],
c=c.subtract(d),c=c.getNormal();(0!=c.x||0!=c.y)&&b.push(c);return b}for(var e=0,f=this.pointList.length;e<f;e++){for(var c=this.pointList[e],d=this.pointList[e+1==this.pointList.length?0:e+1],c=c.subtract(d),c=c.getNormal(),d=!1,g=0,m=b.length;g<m;g++)if(b[g].x==c.x&&b[g].y==c.y||b[g].x==-c.x&&b[g].y==-c.y){d=!0;break}d||b.push(c)}return b},getNormalizedAxes:function(){for(var b=[],c=0,d=this.pointList.length;c<d;c++){for(var e=this.pointList[c].subtract(this.pointList[c+1==this.pointList.length?
0:c+1]).getNormalizedNormal(),f=!1,g=0,m=b.length;g<m;g++)if(b[g].x==e.x&&b[g].y==e.y||b[g].x==-e.x&&b[g].y==-e.y){f=!0;break}f||b.push(e)}return b},project:function(b){return new ig.SAT.Projection(this.pointList,b)}});ig.SAT.Circle=ig.SAT.Shape.extend({center:null,radius:0,init:function(b,c){this.center=new ig.SAT.Vector2D(b.x,b.y);this.radius=c},isCircle:function(){return!0},getAxes:function(){return[]},getNormalizedAxes:function(){return[]},project:function(b){var c=new ig.SAT.Projection([],b);
b=this.center.dotProduct(b);c.min=b-this.radius;c.max=b+this.radius;return c}});ig.SAT.Projection=ig.Class.extend({min:null,max:null,init:function(b,c){if(!b||0>=b.length)return this;this.min=b[0].dotProduct(c);this.max=b[0].dotProduct(c);for(var d=0,e=b.length;d<e;d++){var f=b[j].dotProduct(c);this.min>f&&(this.min=f);f>this.max&&(this.max=f)}},overlap:function(b){return!(this.max<b.min||b.max<this.min)},getOverlap:function(b){var c=this.max-b.min;b=b.max-this.min;b<c&&(c=b);return c},contains:function(b){var c=
self;return b.max-b.min<=c.max-c.min&&b.max<=c.max&&b.min>=c.min?!0:!1}});ig.SAT.MTV=ig.Class.extend({axis:null,overlapAmount:0,init:function(b,c){this.axis=b;this.overlapAmount=c}})});ig.baked=!0;
ig.module("plugins.button").requires("plugins.sat").defines(function(){ig.Button=ig.Class.extend({buttonType:0,animSheet:null,upImage:null,downImage:null,hoverImage:null,upAnim:null,downAnim:null,hoverAnim:null,pos:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},points:[],offset:{x:0,y:0},scale:{x:1,y:1},skew:{x:0,y:0},angle:0,alpha:1,down:!1,over:!1,posRelativeTo:null,image:null,imageOffset:{x:0,y:0},fillStyle:null,strokeStyle:null,strokeWidth:0,roundedRadius:5,edgeRadius:5,downFillStyle:null,downStrokeStyle:null,
overFillStyle:null,overStrokeStyle:null,text:null,textList:null,textCanvas:null,textShadowCanvas:null,textFont:null,textFontSize:24,textLineHeight:24,textHeightAdjustment:0,textOffset:{x:0,y:0},textScale:{x:1,y:1},textSkew:{x:0,y:0},textAngle:0,textAlpha:1,textColor:{r:255,g:255,b:255},btnShadowImage:null,btnShadowOffset:{x:0,y:2},btnShadowColor:"rgba(0,0,0,0.5)",textShadowOffset:{x:0,y:2},textShadowColor:"rgba(0,0,0,0.5)",btnShadowDisabled:!0,textShadowDisabled:!0,textWrap:!0,textOnlyOnHover:!1,
disabled:!1,hidden:!1,antialiasingEnabled:!1,clickStateName:"click",keyStateName:"",overOffset:{x:0,y:0},downOffset:{x:0,y:1},scaleMultiplier:1,overScaleMultiplier:1.01,downScaleMultiplier:0.99,detectionRect:{x:0,y:0,w:0,h:0},detectionPoints:[],parentEntity:null,init:function(b){this.textFont="Impact, Charcoal, sans-serif";this.textLineHeight=this.textFontSize=24;this.parentEntity=b;this.sat=new ig.SAT},setPos:function(b,c){b&&(this.pos.x=b.x,this.pos.y=b.y,this.setPosRelativeTo(c))},setPosRelativeTo:function(b,
c){if(b&&b.pos&&!(null==b.pos.x||null==b.pos.y))this.posRelativeTo=b,this.setPos(c)},setRect:function(b){b&&(this.rect.x=b.x,this.rect.y=b.y,this.rect.w=0<=b.w?b.w:1,this.rect.h=0<=b.h?b.h:1,this.detectionRect.x=this.rect.x,this.detectionRect.y=this.rect.y,this.detectionRect.w=this.rect.w,this.detectionRect.h=this.rect.h)},setPoints:function(b){if(b){for(var c=0,d=b.length;c<d;c++){var e=b[c];this.points.push({x:e.x,y:e.y})}this.recalculateDetectionPoints()}},setAngle:function(b){this.angle=b;this.recalculateDetectionRect();
this.recalculateDetectionPoints()},setScale:function(b,c){b&&c&&(this.scale.x=b,this.scale.y=c,this.recalculateDetectionRect(),this.recalculateDetectionPoints())},setFont:function(b,c){this.textFont=c;this.textLineHeight=this.textFontSize=b;this.textHeightAdjustment=this.textList?this.rect.y/2-this.textList.length/2*this.textLineHeight:this.rect.y/2;this.createTextCanvas()},setTextColor:function(b){b&&(this.textColor={},this.textColor.r=b.r,this.textColor.g=b.g,this.textColor.b=b.b,this.createTextCanvas())},
setText:function(b){isNaN(b)||(b=""+b);this.text=b;this.textWrap&&1<=this.rect.w?(this.textList=this.wrapText(b,this.rect.w),this.textHeightAdjustment=-this.textList.length/2*this.textLineHeight):(this.textList=null,this.textHeightAdjustment=0);this.createTextCanvas()},createTextCanvas:function(){this.textShadowCanvas=this.textCanvas=null;var b=this.rect.w,c=this.rect.h;this.textWrap&&this.textList&&0<this.textList.length&&1<=this.rect.w?(b=this.rect.w,c=this.textList.length*this.textLineHeight):
(c=this.getTextSize(this.text,this.textFont,this.textFontSize),b=c.x,c=c.y);this.textCanvas=ig.$new("canvas");this.textCanvas.width=b;this.textCanvas.height=c;var d=this.textCanvas.getContext("2d");d.font=this.textFontSize+"px "+this.textFont;d.textAlign="center";d.textBaseline="middle";var e=b/2,f=c/2;d.fillStyle=this.getTextColorStr();if(this.textList)for(var f=this.textLineHeight/2,g=0,m=0,l=this.textList.length;m<l;m++)d.fillText(this.textList[m],e,f+g),g+=this.textLineHeight;else d.fillText(this.text,
e,f);if(!this.textShadowDisabled)if(this.textShadowCanvas=ig.$new("canvas"),this.textShadowCanvas.width=b,this.textShadowCanvas.height=c,d=this.textShadowCanvas.getContext("2d"),d.font=this.textFontSize+"px "+this.textFont,d.textAlign="center",d.textBaseline="middle",e=b/2,f=c/2,d.fillStyle=this.textShadowColor,this.textList){f=this.textLineHeight/2;m=g=0;for(l=this.textList.length;m<l;m++)d.fillText(this.textList[m],e,f+g),g+=this.textLineHeight}else d.fillText(this.text,e,f)},setTextOffset:function(b){b&&
(this.textOffset.x=b.x,this.textOffset.y=b.y)},setImage:function(b,c){this.image=b;this.setImageOffset(c)},setImageOffset:function(b){b&&(this.imageOffset.x=b.x,this.imageOffset.y=b.y)},setUpImage:function(b){if(this.upImage=b)this.buttonType=ig.BUTTONTYPE.IMAGE},setOverImage:function(b){if(this.overImage=b)this.buttonType=ig.BUTTONTYPE.IMAGE},setDownImage:function(b){if(this.downImage=b)this.buttonType=ig.BUTTONTYPE.IMAGE},setAnimSheet:function(b){if(this.animSheet=b){b=this.animSheet.image.width/
this.animSheet.width;var c=this.animSheet.image.height/this.animSheet.height;b=Math.floor(b);c=Math.floor(c);3==b*c?(this.upAnim=new ig.Animation(this.animSheet,1,[0]),this.overAnim=new ig.Animation(this.animSheet,1,[1]),this.downAnim=new ig.Animation(this.animSheet,1,[2]),this.buttonType=ig.BUTTONTYPE.ANIMSHEET):2==b*c?(this.upAnim=new ig.Animation(this.animSheet,1,[0]),this.overAnim=null,this.downAnim=new ig.Animation(this.animSheet,1,[1]),this.buttonType=ig.BUTTONTYPE.ANIMSHEET):1==b*c&&this.setUpImage(this.animSheet.image)}},
draw:function(){if(!this.hidden){this.btnShadowDisabled||this.drawBtnShadow();var b=ig.system.context,c=this.pos.x+this.offset.x,d=this.pos.y+this.offset.y;this.down?(c+=this.downOffset.x,d+=this.downOffset.y):this.over&&(c+=this.overOffset.x,d+=this.overOffset.y);this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d));b.save();b.globalAlpha=this.alpha;b.transform(this.scale.x*this.scaleMultiplier,this.skew.x,
this.skew.y,this.scale.y*this.scaleMultiplier,c,d);b.rotate(this.angle);if(this.buttonType==ig.BUTTONTYPE.ROUNDED_RECT||this.buttonType==ig.BUTTONTYPE.SQUARE_RECT||this.buttonType==ig.BUTTONTYPE.OCTOGON||this.buttonType==ig.BUTTONTYPE.PILL||this.buttonType==ig.BUTTONTYPE.CIRCLE){var e=this.strokeStyle,c=this.fillStyle;this.down?(this.downStrokeStyle&&(e=this.downStrokeStyle),this.downFillStyle&&(c=this.downFillStyle)):this.over&&(this.overStrokeStyle&&(e=this.overStrokeStyle),this.overFillStyle&&
(c=this.overFillStyle));b.strokeStyle=e;b.fillStyle=c;var f=d=!1;e&&0<this.strokeWidth&&(f=!0,b.lineWidth=this.strokeWidth);c&&(d=!0);this.buttonType==ig.BUTTONTYPE.SQUARE_RECT?(d&&b.fillRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h),f&&b.strokeRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h)):this.buttonType==ig.BUTTONTYPE.ROUNDED_RECT?this.roundRect(b,this.rect.x,this.rect.y,this.rect.w,this.rect.h,this.roundedRadius,d,f):this.buttonType==ig.BUTTONTYPE.OCTOGON?this.octogon(b,this.rect.x,
this.rect.y,this.rect.w,this.rect.h,this.edgeRadius,d,f):this.buttonType==ig.BUTTONTYPE.PILL?this.pill(b,this.rect.x,this.rect.y,this.rect.w,this.rect.h,d,f):this.buttonType==ig.BUTTONTYPE.CIRCLE&&this.circle(b,this.rect.x,this.rect.y,this.rect.w,this.rect.h,d,f)}else this.buttonType==ig.BUTTONTYPE.IMAGE&&null!=this.upImage?(e=this.upImage,this.down&&this.downImage?e=this.downImage:this.over&&this.overImage&&(e=this.overImage),c=-e.width/2,d=-e.height/2,this.antialiasingEnabled||(c=this.bitwiseRound(c),
d=this.bitwiseRound(d)),e.draw(c,d)):this.buttonType==ig.BUTTONTYPE.ANIMSHEET&&null!=this.upAnim&&(e=this.upAnim,this.down&&this.downAnim?e=this.downAnim:this.over&&this.overAnim&&(e=this.overAnim),c=-this.animSheet.width/2,d=-this.animSheet.height/2,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),e.draw(c,d));this.image?(c=this.imageOffset.x-this.image.width/2,d=this.imageOffset.y-this.image.height/2,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),
this.image.draw(c,d)):this.anim&&(c=this.imageOffset.x-this.anim.sheet.width/2,d=this.imageOffset.y-this.anim.sheet.height/2,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),this.anim.draw(c,d));e=!1;this.textOnlyOnHover&&(!this.over&&!this.down)&&(e=!0);if(!e&&this.textShadowDisabled&&this.text&&""!=this.text)if(this.textCanvas)c=this.textOffset.x,d=this.textOffset.y,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),b.transform(this.textScale.x,this.textSkew.x,
this.textSkew.y,this.textScale.y,c,d),b.rotate(this.textAngle),c=this.textCanvas.width,d=this.textCanvas.height,b.drawImage(this.textCanvas,0,0,c,d,-c/2,-d/2,c,d);else if(b.font=this.textFontSize+"px "+this.textFont,b.textAlign="center",b.textBaseline="middle",c=this.textOffset.x,d=this.textOffset.y,d+=this.textHeightAdjustment,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),b.transform(this.textScale.x,this.textSkew.x,this.textSkew.y,this.textScale.y,c,d),b.rotate(this.textAngle),
this.textList){d=c=0;for(f=this.textList.length;d<f;d++)b.fillStyle=this.getTextColorStr(),b.fillText(this.textList[d],0,c),c+=this.textLineHeight}else b.fillStyle=this.getTextColorStr(),b.fillText(this.text,0,0);b.restore();!e&&!this.textShadowDisabled&&this.drawTextShadow()}},drawDebug:function(){var b=ig.system.context;b.lineWidth=2;b.strokeStyle="rgb(255,0,0)";var c=this.pos.x+this.offset.x,d=this.pos.y+this.offset.y;this.down?(c+=this.downOffset.x,d+=this.downOffset.y):this.over&&(c+=this.overOffset.x,
d+=this.overOffset.y);this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d));b.strokeRect(c+this.detectionRect.x,d+this.detectionRect.y,this.detectionRect.w,this.detectionRect.h);if(!(0>=this.detectionPoints.length)){b.save();b.lineWidth=2;b.strokeStyle="rgb(255,0,0)";b.beginPath();c=this.pos.x+this.offset.x;d=this.pos.y+this.offset.y;this.down?(c+=this.downOffset.x,d+=this.downOffset.y):this.over&&(c+=
this.overOffset.x,d+=this.overOffset.y);this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d));b.moveTo(c+this.detectionPoints[0].x,d+this.detectionPoints[0].y);for(var e=0,f=this.detectionPoints.length;e<f;e++){var g=this.detectionPoints[e];b.lineTo(c+g.x,d+g.y)}b.closePath();b.stroke();b.restore()}},update:function(){if(!this.disabled)if(this.pointerInputOverlap()||this.keyInputReleased()){if(this.scaleMultiplier=
1,ig.ua.mobile||(!this.over&&!this.down&&"function"===typeof this.enterFunction&&this.enterFunction(this),this.over=!0,this.scaleMultiplier=this.overScaleMultiplier,"function"===typeof this.overFunction&&this.overFunction(this)),this.clickInputDetected()&&(this.down=!0,this.over=!1,this.scaleMultiplier=this.downScaleMultiplier,"function"===typeof this.downFunction&&this.downFunction(this)),this.clickInputReleased()||this.keyInputReleased())this.over=this.down=!1,this.scaleMultiplier=1,ig.ua.mobile||
(this.over=!0,this.scaleMultiplier=this.overScaleMultiplier),"function"===typeof this.clickedFunction&&this.clickedFunction(this)}else this.over&&"function"===typeof this.leaveFunction&&this.leaveFunction(this),this.over=this.down=!1,this.scaleMultiplier=1},pointerInputOverlap:function(){var b=ig.game.inputPos;null==b&&(b=this.getInputPos());if(this.sat&&0<this.detectionPoints.length){var c=[],d=this.pos.x+this.offset.x,e=this.pos.y+this.offset.y;this.down?(d+=this.downOffset.x,e+=this.downOffset.y):
this.over&&(d+=this.overOffset.x,e+=this.overOffset.y);this.posRelativeTo&&(d+=this.posRelativeTo.pos.x,e+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(d=this.bitwiseRound(d),e=this.bitwiseRound(e));for(var f=0,g=this.detectionPoints.length;f<g;f++){var m=this.detectionPoints[f];c.push({x:d+m.x,y:e+m.y})}b=new ig.SAT.Shape([b]);c=new ig.SAT.Shape(c);result=this.sat.mtvForShapeIntersect(b,c);return null==result?!1:!0}c={};c.x=b.x;c.y=b.y;c.w=1;c.h=1;b={};b.x=this.pos.x+this.detectionRect.x;
b.y=this.pos.y+this.detectionRect.y;b.w=this.detectionRect.w;b.h=this.detectionRect.h;this.posRelativeTo&&(b.x+=this.posRelativeTo.pos.x,b.y+=this.posRelativeTo.pos.y);return this.aabbCheck(c,b)?!0:!1},keyInputReleased:function(){return ig.input.released(this.keyStateName)?!0:!1},clickInputDetected:function(){return ig.input.state(this.clickStateName)?!0:!1},clickInputReleased:function(){return ig.input.released(this.clickStateName)?!0:!1},show:function(){this.hidden&&(this.hidden=!1)},hide:function(){this.hidden||
(this.hidden=!0)},enable:function(){this.disabled&&(this.disabled=!1)},disable:function(){this.disabled||(this.disabled=!0)},recalculateDetectionRect:function(){var b=this.rect.w/2-Math.abs(Math.cos(this.angle)*(this.rect.w/2)),c=Math.abs(Math.sin(this.angle)*(this.rect.w/2))-Math.abs(Math.sin(this.angle)*(this.rect.h/2)),b=Math.abs(b),c=Math.abs(c);b>this.rect.w/2-this.rect.h/2&&(b=this.rect.w/2-this.rect.h/2);this.detectionRect.x=this.rect.x+b;this.detectionRect.y=this.rect.y-c;this.detectionRect.w=
this.rect.w-2*b;this.detectionRect.h=this.rect.h+2*c;this.detectionRect.x=this.detectionRect.x+this.detectionRect.w/2-this.detectionRect.w/2*this.scale.x;this.detectionRect.y=this.detectionRect.y+this.detectionRect.h/2-this.detectionRect.h/2*this.scale.y;this.detectionRect.w*=this.scale.x;this.detectionRect.h*=this.scale.y;0>this.detectionRect.w&&(this.detectionRect.x+=this.detectionRect.w,this.detectionRect.w*=-1);0>this.detectionRect.h&&(this.detectionRect.y+=this.detectionRect.h,this.detectionRect.h*=
-1)},recalculateDetectionPoints:function(){if(0!=this.points.length){this.detectionPoints=[];for(var b=0,c=this.points.length;b<c;b++){var d=this.rotatePointAroundOrigin(this.angle,this.points[b]);d.x*=this.scale.x;d.y*=this.scale.y;this.detectionPoints.push(d)}}},rotatePointAroundOrigin:function(b,c){var d=Math.sin(b),e=Math.cos(b);return{x:c.x*e+c.y*d,y:-c.x*d+c.y*e}},drawBtnShadow:function(){var b=ig.system.context,c=this.pos.x+this.offset.x+this.btnShadowOffset.x,d=this.pos.y+this.offset.y+this.btnShadowOffset.y;
this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d));b.save();b.globalAlpha=this.alpha;b.transform(this.scale.x,this.skew.x,this.skew.y,this.scale.y,c,d);b.rotate(this.angle);if(this.buttonType==ig.BUTTONTYPE.ROUNDED_RECT||this.buttonType==ig.BUTTONTYPE.SQUARE_RECT||this.buttonType==ig.BUTTONTYPE.OCTOGON||this.buttonType==ig.BUTTONTYPE.PILL||this.buttonType==ig.BUTTONTYPE.CIRCLE)if(b.strokeStyle=this.strokeStyle,
b.fillStyle=this.btnShadowColor,d=c=!1,this.strokeStyle&&0<this.strokeWidth&&(d=!0,b.lineWidth=this.strokeWidth),this.fillStyle&&(c=!0),this.buttonType==ig.BUTTONTYPE.SQUARE_RECT)if(c&&d){var d=this.rect.x-(this.strokeWidth-1)/2,e=this.rect.y-(this.strokeWidth-1)/2,f=this.rect.w+(this.strokeWidth-1),g=this.rect.h+(this.strokeWidth-1);this.antialiasingEnabled||(d=this.bitwiseRound(d),e=this.bitwiseRound(e),f=this.bitwiseRound(f),g=this.bitwiseRound(g));b.fillRect(d,e,f,g)}else c&&!d?b.fillRect(this.rect.x,
this.rect.y,this.rect.w,this.rect.h):!c&&d&&b.strokeRect(this.rect.x,this.rect.y,this.rect.w,this.rect.h);else this.buttonType==ig.BUTTONTYPE.ROUNDED_RECT?(d=this.rect.x-(this.strokeWidth-1)/2,e=this.rect.y-(this.strokeWidth-1)/2,f=this.rect.w+(this.strokeWidth-1),g=this.rect.h+(this.strokeWidth-1),this.antialiasingEnabled||(d=this.bitwiseRound(d),e=this.bitwiseRound(e),f=this.bitwiseRound(f),g=this.bitwiseRound(g)),this.roundRect(b,d,e,f,g,2*this.roundedRadius,c,!1)):this.buttonType==ig.BUTTONTYPE.OCTOGON?
(d=this.rect.x-(this.strokeWidth-1)/2,e=this.rect.y-(this.strokeWidth-1)/2,f=this.rect.w+(this.strokeWidth-1),g=this.rect.h+(this.strokeWidth-1),this.antialiasingEnabled||(d=this.bitwiseRound(d),e=this.bitwiseRound(e),f=this.bitwiseRound(f),g=this.bitwiseRound(g)),this.octogon(b,d,e,f,g,2*this.edgeRadius,c,!1)):this.buttonType==ig.BUTTONTYPE.PILL?(d=this.rect.x-(this.strokeWidth-1)/2,e=this.rect.y-(this.strokeWidth-1)/2,f=this.rect.w+(this.strokeWidth-1),g=this.rect.h+(this.strokeWidth-1),this.antialiasingEnabled||
(d=this.bitwiseRound(d),e=this.bitwiseRound(e),f=this.bitwiseRound(f),g=this.bitwiseRound(g)),this.pill(b,d,e,f,g,c,!1)):this.buttonType==ig.BUTTONTYPE.CIRCLE&&(d=this.rect.x-(this.strokeWidth-1)/2,e=this.rect.y-(this.strokeWidth-1)/2,f=this.rect.w+(this.strokeWidth-1),g=this.rect.h+(this.strokeWidth-1),this.antialiasingEnabled||(d=this.bitwiseRound(d),e=this.bitwiseRound(e),f=this.bitwiseRound(f),g=this.bitwiseRound(g)),this.circle(b,d,e,f,g,c,!1));b.restore()},drawTextShadow:function(){var b=ig.system.context,
c=this.pos.x+this.offset.x+this.textShadowOffset.x,d=this.pos.y+this.offset.y+this.textShadowOffset.y;this.down?(c+=this.downOffset.x,d+=this.downOffset.y):this.over&&(c+=this.overOffset.x,d+=this.overOffset.y);this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d));b.save();b.globalAlpha=this.alpha;b.transform(this.scale.x*this.scaleMultiplier,this.skew.x,this.skew.y,this.scale.y*this.scaleMultiplier,
c,d);b.rotate(this.angle);if(this.text&&""!=this.text)if(this.textShadowCanvas)c=this.textOffset.x,d=this.textOffset.y,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),b.transform(this.textScale.x,this.textSkew.x,this.textSkew.y,this.textScale.y,c,d),b.rotate(this.textAngle),c=this.textShadowCanvas.width,d=this.textShadowCanvas.height,b.drawImage(this.textShadowCanvas,0,0,c,d,-c/2,-d/2,c,d);else if(b.font=this.textFontSize+"px "+this.textFont,b.textAlign="center",b.textBaseline=
"middle",c=this.textOffset.x,d=this.textOffset.y,d+=this.textHeightAdjustment,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),b.transform(this.textScale.x,this.textSkew.x,this.textSkew.y,this.textScale.y,c,d),b.rotate(this.textAngle),this.textList)for(var d=c=0,e=this.textList.length;d<e;d++)b.fillStyle=this.textShadowColor,b.fillText(this.textList[d],0,c),c+=this.textLineHeight;else b.fillStyle=this.textShadowColor,b.fillText(this.text,0,0);b.restore();c=this.pos.x+this.offset.x;
d=this.pos.y+this.offset.y;this.down?(c+=this.downOffset.x,d+=this.downOffset.y):this.over&&(c+=this.overOffset.x,d+=this.overOffset.y);this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d));b.save();b.globalAlpha=this.alpha;b.transform(this.scale.x*this.scaleMultiplier,this.skew.x,this.skew.y,this.scale.y*this.scaleMultiplier,c,d);b.rotate(this.angle);if(this.text&&""!=this.text)if(this.textCanvas)c=
this.textOffset.x,d=this.textOffset.y,this.antialiasingEnabled||(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),b.transform(this.textScale.x,this.textSkew.x,this.textSkew.y,this.textScale.y,c,d),b.rotate(this.textAngle),c=this.textCanvas.width,d=this.textCanvas.height,b.drawImage(this.textCanvas,0,0,c,d,-c/2,-d/2,c,d);else if(b.font=this.textFontSize+"px "+this.textFont,b.textAlign="center",b.textBaseline="middle",c=this.textOffset.x,d=this.textOffset.y,d+=this.textHeightAdjustment,this.antialiasingEnabled||
(c=this.bitwiseRound(c),d=this.bitwiseRound(d)),b.transform(this.textScale.x,this.textSkew.x,this.textSkew.y,this.textScale.y,c,d),b.rotate(this.textAngle),this.textList){d=c=0;for(e=this.textList.length;d<e;d++)b.fillStyle=this.getTextColorStr(),b.fillText(this.textList[d],0,c),c+=this.textLineHeight}else b.fillStyle=this.getTextColorStr(),b.fillText(this.text,0,0);b.restore()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},wrapText:function(b,c){var d=ig.system.context;
d.font=this.textFontSize+"px "+this.textFont;var e=b.split(" "),f="",g=[];if(1==e.length)for(var m=0,l=b.length;m<l;m++){var n=f+b[m],r=d.measureText(n),r=r.width;r>c&&0<m?(g.push(f),f=b[m]):f=n}else{m=0;for(l=e.length;m<l;m++)n=f+e[m]+" ",r=d.measureText(n),r=r.width,r>c&&0<m?(g.push(f),f=e[m]+" "):f=n}g.push(f);return g},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);
b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},octogon:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.lineTo(c+e,d+g);b.lineTo(c+e,d+f-g);b.lineTo(c+e-g,d+f);b.lineTo(c+g,d+f);b.lineTo(c,d+f-g);b.lineTo(c,d+g);b.lineTo(c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},
pill:function(b,c,d,e,f,g,m){"undefined"==typeof m&&(m=!0);var l=f/2;b.beginPath();b.arc(c+l,d+l,l,0.5*Math.PI,1.5*Math.PI);b.lineTo(c+e-l,d);b.arc(c+e-l,d+l,l,1.5*Math.PI,0.5*Math.PI);b.lineTo(c+l,d+f);b.closePath();m&&b.stroke();g&&b.fill()},circle:function(b,c,d,e,f,g,m){e=this.rect.h/2;c=this.rect.x+this.rect.w/2;d=this.rect.y+e;b.beginPath();b.arc(c,d,e,0,2*Math.PI);b.closePath();m&&b.stroke();g&&b.fill()},bitwiseRound:function(b){return 0.5+b<<0},getInputPos:function(){return ig.game.io.getClickPos()},
getTextColorStr:function(){return"rgba("+this.textColor.r+","+this.textColor.g+","+this.textColor.b+","+this.textAlpha+")"},getTextSize:function(b,c,d,e){var f=document.createElement("div");f.innerHTML=b;f.style.position="absolute";f.style.top="-9999px";f.style.left="-9999px";f.style.fontFamily=c;f.style.fontWeight=e?"bold":"normal";f.style.fontSize=d+"px";document.body.appendChild(f);d={x:f.offsetWidth,y:f.offsetHeight};document.body.removeChild(f);return d}});ig.BUTTONTYPE={LABEL_ONLY:0,SQUARE_RECT:1,
ROUNDED_RECT:2,OCTOGON:3,PILL:4,CIRCLE:5,IMAGE:6,ANIMSHEET:7}});ig.baked=!0;ig.module("plugins.image-extension").requires("impact.image").defines(function(){ig.MobileImage=ig.Image.extend({load:function(b){ig.ua.mobile&&this.parent(b)}});ig.DesktopImage=ig.Image.extend({load:function(b){ig.ua.mobile||this.parent(b)}})});ig.baked=!0;
ig.module("game.entities.buttons.button").requires("impact.entity","plugins.data.vector").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:95E3,init:function(b,c,d){this.parent(b,c,d);!ig.global.wm&&!isNaN(d.zIndex)&&(this.zIndex=d.zIndex);b=Math.floor(256*Math.random());c=Math.floor(256*Math.random());d=Math.floor(256*Math.random());this.fillColor="rgba("+b+","+d+","+c+",1)"},clicked:function(){throw"no implementation on clicked()";
},clicking:function(){throw"no implementation on clicking()";},released:function(){throw"no implementation on released()";}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:"http://cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/misc/invisible.png",init:function(b){this.pos=new Vector2(b.pos.x,b.pos.y);this.size=new Vector2(b.size.x,b.size.y);var c="more-games",d="www.google.com",e=!1;b.div_layer_name&&(c=b.div_layer_name);b.link&&(d=b.link);b.newWindow&&(e=b.newWindow);this.createClickableLayer(c,
d,e)},createClickableLayer:function(b,c,d){this.identifier=b;var e=ig.domHandler.getElementById("#"+b);e?(ig.domHandler.show(e),ig.domHandler.attr(e,"href",c)):this.createClickableOutboundLayer(b,c,this.invisImagePath,d)},update:function(b,c){this.pos.x===b&&this.pos.y===c||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(b,c,d,e){var f=ig.domHandler.create("div");ig.domHandler.attr(f,"id",b);var g=ig.domHandler.create("a");e?(ig.domHandler.attr(g,"href",c),ig.domHandler.attr(g,"target","_blank")):ig.domHandler.attr(g,"href",c);c=ig.domHandler.create("img");ig.domHandler.css(c,{width:"100%",height:"100%"});ig.domHandler.attr(c,"src",d);d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,
ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){e=Math.floor(this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var m=Math.floor(this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",l=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";d=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"}else e=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(e),m=e.top,e=Math.floor(e.left+this.pos.x*d)+"px",m=Math.floor(m+this.pos.y*d)+"px",l=Math.floor(this.size.x*
d)+"px",d=Math.floor(this.size.y*d)+"px";ig.domHandler.css(f,{"float":"left",position:"absolute",left:e,top:m,width:l,height:d,"z-index":3});ig.domHandler.addEvent(f,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(g,c);ig.domHandler.appendChild(f,g);ig.domHandler.appendToBody(f);ig.sizeHandler.dynamicClickableEntityDivs[b]={};ig.sizeHandler.dynamicClickableEntityDivs[b].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[b].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_x=
this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,size:{x:160,y:45},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",name:"moregames",zIndex:7500,fontsize:"14px DroidSans,bebasneue , Impact, Charcoal, sans-serif",fontypos:20,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/button_moregames.png",
160,45),init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle;ig.global.wm||(this.div_layer_name=d.div_layer_name?d.div_layer_name:"more-games",_SETTINGS.MoreGames.Enabled?(_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this)):this.kill())},ready:function(){},show:function(){var b=
ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(b)},hide:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(b)},clicked:function(){},clicking:function(){},released:function(){},over:function(){""==ig.game.popup&&(this.currentAnim=this.anims.over,this.fontsize="16px DroidSans, bebasneue , Impact, Charcoal, sans-serif")},leave:function(){""==ig.game.popup&&(this.currentAnim=this.anims.idle,this.fontsize="14px DroidSans, bebasneue , Impact, Charcoal, sans-serif")},
draw:function(){this.parent();var b=ig.system.context,c=_STRINGS.UI["More Games"];b.font=this.fontsize;b.textAlign="center";b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x+80,this.pos.y+this.fontypos)}})});ig.baked=!0;
ig.module("plugins.slider").defines(function(){ig.Slider=ig.Class.extend({pos:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},offset:{x:0,y:0},isVertical:!1,posRelativeTo:null,scale:{x:1,y:1},skew:{x:0,y:0},angle:0,alpha:1,bgImage:null,bgRect:null,bgShadowRect:null,bgFillStyle:null,bgStrokeStyle:null,bgStrokeWidth:2,bgRoundedRadius:5,bgShadowFillStyle:null,knobImage:null,knobRect:null,knobShadowRect:null,knobFillStyle:null,knobStrokeStyle:null,knobStrokeWidth:2,knobRoundedRadius:5,knobShadowFillStyle:null,value:0,
clickStateName:"click",valueChangedFunction:null,sliderReleasedFunction:null,hidden:!1,activated:!1,init:function(b){this.textFont="Impact, Charcoal, sans-serif";this.textLineHeight=this.textFontSize=24;this.parentEntity=b},setPos:function(b,c){b&&(this.pos.x=b.x,this.pos.y=b.y,this.setPosRelativeTo(c))},setPosRelativeTo:function(b,c){if(b&&b.pos&&!(null==b.pos.x||null==b.pos.y))this.posRelativeTo=b,this.setPos(c)},setRect:function(b){b&&(this.rect.x=b.x,this.rect.y=b.y,this.rect.w=0<=b.w?b.w:1,this.rect.h=
0<=b.h?b.h:1)},setAngle:function(b){this.angle=b},setScale:function(b,c){b&&c&&(this.scale.x=b,this.scale.y=c)},setKnobImage:function(b){(this.knobImage=b)?(this.knobRect||(this.knobRect={x:0,y:0}),this.knobRect.w=b.width,this.knobRect.h=b.height,this.knobRect.x=-this.knobRect.w/2,this.knobRect.y=-this.knobRect.h/2):this.knobRect=null},setBgImage:function(b){(this.bgImage=b)?(this.bgRect||(this.bgRect={x:0,y:0}),this.bgRect.w=b.width,this.bgRect.h=b.height,this.bgRect.x=-this.bgRect.w/2,this.bgRect.y=
-this.bgRect.h/2):this.bgRect=null},draw:function(){if(!this.hidden){var b=ig.system.context,c=this.pos.x+this.offset.x,d=this.pos.y+this.offset.y;this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);b.save();b.globalAlpha=this.alpha;b.transform(this.scale.x,this.skew.x,this.skew.y,this.scale.y,c,d);b.rotate(this.angle);if(this.bgImage)this.bgImage.draw(this.bgRect.x,this.bgRect.y);else if(null!=this.bgRect){d=c=!1;if(null!=this.bgShadowRect&&this.bgShadowFillStyle){b.fillStyle=
this.bgShadowFillStyle;var e=this.bgShadowRect.x,f=this.bgShadowRect.y,g=this.bgShadowRect.w,m=this.bgShadowRect.h;this.roundRect(b,e,f,g,m,2*this.bgRoundedRadius,!0,!1)}m=1;this.bgFillStyle&&(b.fillStyle=this.bgFillStyle,c=!0);this.bgStrokeStyle&&(b.strokeStyle=this.bgStrokeStyle,m=b.lineWidth=this.bgStrokeWidth,d=!0);e=this.bgRect.x-(m-1)/2;f=this.bgRect.y-(m-1)/2;g=this.bgRect.w+(m-1);m=this.bgRect.h+(m-1);this.roundRect(b,e,f,g,m,2*this.bgRoundedRadius,c,d)}if(null!=this.knobRect){var c=this.knobRect.x,
d=this.knobRect.y,l=(this.value-0.5)*this.bgRect.w;this.knobImage?this.knobImage.draw(c+l,d):(d=c=!1,null!=this.knobShadowRect&&this.knobShadowFillStyle&&(b.fillStyle=this.knobShadowFillStyle,e=this.knobShadowRect.x,f=this.knobShadowRect.y,g=this.knobShadowRect.w,m=this.knobShadowRect.h,this.roundRect(b,e+l,f,g,m,2*this.knobRoundedRadius,!0,!1)),m=1,this.knobFillStyle&&(b.fillStyle=this.knobFillStyle,c=!0),this.knobStrokeStyle&&(b.strokeStyle=this.knobStrokeStyle,m=b.lineWidth=this.knobStrokeWidth,
d=!0),e=this.knobRect.x-(m-1)/2,f=this.knobRect.y-(m-1)/2,g=this.knobRect.w+(m-1),m=this.knobRect.h+(m-1),this.roundRect(b,e+l,f,g,m,2*this.knobRoundedRadius,c,d))}b.restore()}},update:function(){var b=!1,c=!1,d=!1;ig.input.pressed(this.clickStateName)?d=!0:ig.input.released(this.clickStateName)?b=!0:ig.input.state(this.clickStateName)&&(c=!0);if(d||c||b){var e=ig.game.inputPos;null==e&&(e=this.getInputPos());if(d){d={};d.x=e.x;d.y=e.y;d.w=1;d.h=1;var f={};f.x=this.pos.x+this.rect.x;f.y=this.pos.y+
this.rect.y;f.w=this.rect.w;f.h=this.rect.h;this.posRelativeTo&&(f.x+=this.posRelativeTo.pos.x,f.y+=this.posRelativeTo.pos.y);this.aabbCheck(d,f)&&(this.activated=!0)}if(this.activated){if(c||b)c=this.pos.x-this.bgRect.w/2,this.posRelativeTo&&(c+=this.posRelativeTo.pos.x),this.value=(e.x-c)/this.bgRect.w,1<this.value&&(this.value=1),0>this.value&&(this.value=0),this.valueChangedFunction&&"function"==typeof this.valueChangedFunction&&this.valueChangedFunction();b&&(this.activated=!1,this.sliderReleasedFunction&&
"function"==typeof this.sliderReleasedFunction&&this.sliderReleasedFunction())}}},show:function(){this.hidden&&(this.hidden=!1)},hide:function(){this.hidden||(this.hidden=!0)},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);0<g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);0<g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);0<g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);0<g&&b.quadraticCurveTo(c,
d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},getInputPos:function(){return ig.game.io.getClickPos()}})});ig.baked=!0;
ig.module("game.classes.tutorial-panel").defines(function(){TutorialPanel=ig.Class.extend({pos:{x:0,y:0},bgAlpha:0,maxBgAlpha:0.6,buttonImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_long.png"),alpha:1,transitionDuration:0.2,transitionTime:0,transitionIn:!1,transitionOut:!1,hidden:!0,offset:{x:0,y:0},backButton:null,relStartPos:{x:0,y:0},endPos:{x:0,y:0},bgRect:{x:0,y:0,w:0,h:0},backButton:null,hideDoneCallback:null,control:null,init:function(b){this.control=b},
ready:function(){this.relStartPos.y=-ig.system.height;this.endPos.x=ig.system.width/2;this.endPos.y=ig.system.height/2;this.pos.x=this.endPos.x+this.relStartPos.x;this.pos.y=this.endPos.y+this.relStartPos.y;this.bgRect.w=560;this.bgRect.h=420;this.bgRect.x=-this.bgRect.w/2;this.bgRect.y=-this.bgRect.h/2;var b=this.buttonImage.width,c=this.buttonImage.height,d=new ig.Button(this);d.setPos({x:0,y:-this.bgRect.y-30});d.posRelativeTo=this;d.setRect({x:-b/2,y:-c/2,w:b,h:c});d.textOffset.x=0;d.textOffset.y=
2;d.textShadowDisabled=!1;d.textShadowColor="rgba(0,0,0,0.5)";d.setTextColor({r:255,g:255,b:255});d.setFont(12,"bebasneue , Impact, Charcoal, sans-serif");d.textLineHeight=16;b=_STRINGS.UI.Back;ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202)));d.setText(b);d.textShadowOffset={x:1,y:1};d.clickedFunction=this.backButtonPressed.bind(this);d.downOffset={x:0,y:1};d.overOffset={x:0,y:-1};d.overScaleMultiplier=1;d.downScaleMultiplier=1;d.buttonType=ig.BUTTONTYPE.IMAGE;d.setUpImage(this.buttonImage);
this.backButton=d},draw:function(){if(!this.hidden){var b=ig.system.context;0<this.bgAlpha&&(b.save(),b.globalAlpha=this.bgAlpha,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());var c=this.pos.x+this.bgRect.x,d=this.pos.y+this.bgRect.y;b.save();b.globalAlpha=this.alpha;b.fillStyle="rgba(0,0,0,0.95)";this.roundRect(b,c,d,this.bgRect.w,this.bgRect.h,10,!0,!1);b.restore();d=this.pos.y+this.bgRect.y;c=_STRINGS.UI.Rules;ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));
b.font="48px lobster13, Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+60+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+60);c=_STRINGS.Rules[0];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="24px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+122+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+122);c=_STRINGS.Rules[1];ig.global.addTextSpacing&&
(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+152+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+152);c=_STRINGS.Rules[2];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+212+1);b.fillStyle="#FFFFFF";b.fillText(c,
this.pos.x,d+212);c=_STRINGS.Rules[3];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+242+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+242);c=_STRINGS.Rules[4];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";
b.fillText(c,this.pos.x+1,d+272+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+272);c=_STRINGS.Rules[5];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+302+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+302);this.backButton.draw()}},update:function(){if(!this.hidden){if(this.transitionIn){var b=ig.system.clock.delta()-this.transitionTime,
b=b/this.transitionDuration;1<b&&(b=1);this.alpha=b;this.bgAlpha=this.maxBgAlpha*b;if(0.8>b){var c=b/0.8;this.offset.x=(1-c)*this.relStartPos.x;this.offset.y=(1-c)*this.relStartPos.y}else 1>b?(c=(b-0.8)/0.2*Math.PI,this.offset.x=-0.05*this.relStartPos.x*Math.sin(c),this.offset.y=-0.05*this.relStartPos.y*Math.sin(c)):(this.offset.x=0,this.offset.y=0);1<=b&&(this.transitionIn=!1,this.showDone());this.pos.x=this.endPos.x+this.offset.x;this.pos.y=this.endPos.y+this.offset.y}else this.transitionOut&&(b=
ig.system.clock.delta()-this.transitionTime,b/=this.transitionDuration,1<b&&(b=1),this.alpha=1-b,this.bgAlpha=this.maxBgAlpha*(1-b),1>b?(this.offset.x=b*this.relStartPos.x,this.offset.y=b*this.relStartPos.y):(this.offset.x=this.relStartPos.x,this.offset.y=this.relStartPos.y),1<=b&&(this.transitionOut=!1,this.hideDone()),this.pos.x=this.endPos.x+this.offset.x,this.pos.y=this.endPos.y+this.offset.y);this.backButton.update()}},show:function(){if(this.hidden&&!this.transitionIn){if(this.transitionOut){this.transitionOut=
!1;var b=ig.system.clock.delta()-this.transitionTime;0<b&&(this.transitionIn=!0,this.transitionTime+=b)}else this.transitionIn=!0,this.transitionTime=ig.system.clock.delta();this.hidden=!1}},showDone:function(){},hide:function(){if(!this.hidden&&!this.transitionOut)if(this.transitionIn){this.transitionIn=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b?(this.transitionOut=!0,this.transitionTime+=b):this.hidden=!0}else this.transitionOut=!0,this.transitionTime=ig.system.clock.delta()},hideDone:function(){this.hidden=
!0;this.hideDoneCallback&&"function"==typeof this.hideDoneCallback&&this.hideDoneCallback()},backButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");this.hide()},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,
d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.classes.options-panel").requires("plugins.button","plugins.slider","game.classes.tutorial-panel").defines(function(){OptionsPanel=ig.Class.extend({pos:{x:0,y:0},bgAlpha:0,maxBgAlpha:0.6,buttonImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_long.png"),bgimage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/option.png"),tittleimage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/optiontittle.png"),soundicon:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/soundicon.png"),
musicicon:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/musicicon.png"),alpha:1,transitionDuration:0.2,transitionTime:0,transitionIn:!1,transitionOut:!1,hidden:!0,offset:{x:0,y:0},relStartPos:{x:0,y:0},endPos:{x:0,y:0},bgRect:{x:0,y:0,w:0,h:0},musicMaxVolume:1,musicButton:null,soundButton:null,backButton:null,musicSlider:null,soundSlider:null,hasTutorialButton:null,tutorialButton:null,hasMainmenuButton:!1,mainmenuButton:null,hideDoneCallback:null,control:null,ignoreInputsFlag:!1,
from:"",init:function(b,c){this.control=b;this.musicMaxVolume=1;ig.ua.mobile&&(this.musicMaxVolume=0.25);c&&(this.from=c)},ready:function(){"function"==typeof this.control.playTutorial&&(this.hasTutorialButton=!0);this.relStartPos.y=-ig.system.height;this.endPos.x=ig.system.width/2;this.endPos.y=ig.system.height/2;this.pos.x=this.endPos.x+this.relStartPos.x;this.pos.y=this.endPos.y+this.relStartPos.y;this.bgRect.w=480;this.bgRect.h=360;this.bgRect.x=-this.bgRect.w/2;this.bgRect.y=-this.bgRect.h/2;
""==this.from?(this.buttonBack=ig.game.spawnEntity(EntityButtonBack,this.pos.x+10,this.pos.y+100),this.buttonHome=ig.game.spawnEntity(EntityButtonHome,this.pos.x+10,this.pos.y+100,{mode:"option"})):this.buttonOk=ig.game.spawnEntity(EntityHomeOptionOk,this.pos.x+10,this.pos.y+100);var b=new ig.Slider(this);b.setPos({x:30,y:-45},this);b.setRect({x:-100,y:-15,w:190,h:30});b.bgRect={x:-90,y:-3,w:170,h:15};b.bgShadowRect={x:-90,y:0,w:170,h:15};b.bgRoundedRadius=3;b.bgFillStyle="#22b573";b.bgShadowFillStyle=
"#22b573";b.knobRect={x:-10,y:-15,w:20,h:40};b.knobShadowRect={x:-8,y:-13,w:20,h:40};b.knobRoundedRadius=3;b.knobFillStyle="#22b573";b.value=ig.game.musicVolume;b.valueChangedFunction=this.musicSliderValueChanged.bind(this);b.sliderReleasedFunction=this.musicSliderReleased.bind(this);this.musicSlider=b;b=new ig.Slider(this);b.setPos({x:30,y:35},this);b.setRect({x:-100,y:-15,w:190,h:30});b.bgRect={x:-90,y:-3,w:170,h:15};b.bgShadowRect={x:-90,y:0,w:170,h:15};b.bgRoundedRadius=3;b.bgFillStyle="#ddc963";
b.bgShadowFillStyle="#ddc963";b.knobRect={x:-10,y:-15,w:20,h:40};b.knobShadowRect={x:-8,y:-13,w:20,h:40};b.knobRoundedRadius=3;b.knobFillStyle="#ddc963";b.value=ig.game.sfxVolume;b.valueChangedFunction=this.soundSliderValueChanged.bind(this);b.sliderReleasedFunction=this.soundSliderReleased.bind(this);this.soundSlider=b;if(this.hasTutorialButton){var c=this.buttonImage.width,d=this.buttonImage.height,b=new ig.Button(this);b.setPos({x:0,y:80});b.posRelativeTo=this;b.setRect({x:-c/2,y:-d/2,w:c,h:d});
b.textOffset.y=2;b.textShadowDisabled=!1;b.textShadowColor="rgba(0,0,0,0.5)";b.setTextColor({r:255,g:255,b:255});b.setFont(12,"bebasneue , Impact, Charcoal, sans-serif");c=_STRINGS.UI.Rules;b.textLineHeight=16;ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.setText(c);b.textShadowOffset={x:1,y:1};b.clickedFunction=this.tutorialButtonPressed.bind(this);b.downOffset={x:0,y:1};b.overOffset={x:0,y:-1};b.overScaleMultiplier=1;b.downScaleMultiplier=1;b.buttonType=ig.BUTTONTYPE.IMAGE;
b.setUpImage(this.buttonImage);this.tutorialButton=b;this.tutorialPanel=new TutorialPanel(this);this.tutorialPanel.hideDoneCallback=function(){this.ignoreInputsFlag=!1}.bind(this);this.tutorialPanel.maxBgAlpha=0;this.tutorialPanel.ready()}},draw:function(){if(!this.hidden){var b=ig.system.context;0<this.bgAlpha&&(b.save(),b.globalAlpha=this.bgAlpha,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());this.bgimage.draw(this.pos.x-this.bgimage.width/2,this.pos.y-this.bgimage.height/
2);this.tittleimage.draw(this.pos.x-this.tittleimage.width/2,this.pos.y-this.bgimage.height/2+40);var c=this.pos.y+this.bgRect.y,d=_STRINGS.UI.Options;ig.global.addTextSpacing&&(d=d.split("").join(String.fromCharCode(8202)));b.font="48px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(d,this.pos.x+2,c+48+2);b.fillStyle="#FFFFFF";b.fillText(d,this.pos.x,c+48);this.musicicon.draw(this.pos.x-125,this.pos.y-70);this.soundicon.draw(this.pos.x-125,
this.pos.y+10);this.tutorialButton&&this.tutorialButton.draw();this.soundButton&&this.soundButton.draw();this.musicButton&&this.musicButton.draw();this.soundSlider&&this.soundSlider.draw();this.musicSlider&&this.musicSlider.draw();this.tutorialPanel&&this.tutorialPanel.draw()}},update:function(){if(!this.hidden){""==this.from?(this.buttonBack.pos={x:this.pos.x+20,y:this.pos.y+100},this.buttonHome.pos={x:this.pos.x-80,y:this.pos.y+100}):this.buttonOk.pos={x:this.pos.x-40,y:this.pos.y+90};if(this.transitionIn){var b=
ig.system.clock.delta()-this.transitionTime,b=b/this.transitionDuration;1<b&&(b=1);this.alpha=b;this.bgAlpha=this.maxBgAlpha*b;if(0.8>b){var c=b/0.8;this.offset.x=(1-c)*this.relStartPos.x;this.offset.y=(1-c)*this.relStartPos.y}else 1>b?(c=(b-0.8)/0.2*Math.PI,this.offset.x=-0.05*this.relStartPos.x*Math.sin(c),this.offset.y=-0.05*this.relStartPos.y*Math.sin(c)):(this.offset.x=0,this.offset.y=0);1<=b&&(this.transitionIn=!1,this.showDone());this.pos.x=this.endPos.x+this.offset.x;this.pos.y=this.endPos.y+
this.offset.y}else this.transitionOut&&(b=ig.system.clock.delta()-this.transitionTime,b/=this.transitionDuration,1<b&&(b=1),this.alpha=1-b,this.bgAlpha=this.maxBgAlpha*(1-b),1>b?(this.offset.x=b*this.relStartPos.x,this.offset.y=b*this.relStartPos.y):(this.offset.x=this.relStartPos.x,this.offset.y=this.relStartPos.y),1<=b&&(this.transitionOut=!1,this.hideDone()),this.pos.x=this.endPos.x+this.offset.x,this.pos.y=this.endPos.y+this.offset.y);this.tutorialPanel&&this.tutorialPanel.update();this.ignoreInputsFlag||
(this.tutorialButton&&this.tutorialButton.update(),this.musicButton&&this.musicButton.update(),this.soundButton&&this.soundButton.update(),this.soundSlider&&this.soundSlider.update(),this.musicSlider&&this.musicSlider.update(),ig.input.pressed("esc")&&""==this.from&&this.buttonBack.clicked())}},show:function(){if(this.hidden&&!this.transitionIn){if(this.transitionOut){this.transitionOut=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b&&(this.transitionIn=!0,this.transitionTime+=b)}else this.transitionIn=
!0,this.transitionTime=ig.system.clock.delta();this.hidden=!1;ig.game.popup="option";this.soundSlider.value=ig.game.sfxVolume;this.musicSlider.value=ig.game.musicVolume}},showDone:function(){},hide:function(){if(!this.hidden&&!this.transitionOut){if(this.transitionIn){this.transitionIn=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b?(this.transitionOut=!0,this.transitionTime+=b):this.hidden=!0}else this.transitionOut=!0,this.transitionTime=ig.system.clock.delta();ig.game.popup=""}},hideDone:function(){this.hidden=
!0;this.hideDoneCallback&&"function"==typeof this.hideDoneCallback&&(this.hideDoneCallback(),ig.game.popup="")},muteAudio:function(){ig.game.muted=!0;this.setMusicVolume(0);this.setSfxVolume(0);ig.game.savePlayerStats()},unmuteAudio:function(){ig.game.muted=!1;this.setMusicVolume(ig.game.musicVolume);this.setSfxVolume(ig.game.sfxVolume);ig.game.savePlayerStats()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},musicButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&
ig.soundHandler.sfxPlayer.play("button");if(ig.game.musicVolume<this.musicMaxVolume){this.musicSlider.value=this.musicMaxVolume;this.setMusicVolume(this.musicMaxVolume);var b=_STRINGS.UI.Music,b=b+(" "+_STRINGS.UI.On)}else this.musicSlider.value=0,this.setMusicVolume(0),b=_STRINGS.UI.Music,b+=" "+_STRINGS.UI.Off;ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202)));this.musicButton.setText(b)},soundButtonPressed:function(){if(1>ig.game.sfxVolume){this.soundSlider.value=1;this.setSfxVolume(1);
var b=_STRINGS.UI.Sound,b=b+(" "+_STRINGS.UI.On);ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202)));this.soundButton.setText(b);ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button")}else this.soundSlider.value=0,this.setSfxVolume(0),b=_STRINGS.UI.Sound,b+=" "+_STRINGS.UI.Off,ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202))),this.soundButton.setText(b)},tutorialButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&
ig.soundHandler.sfxPlayer.play("button");this.ignoreInputsFlag=!0;this.tutorialPanel.show()},soundSliderValueChanged:function(){this.setSfxVolume(this.soundSlider.value)},musicSliderValueChanged:function(){this.setMusicVolume(this.musicSlider.value)},soundSliderReleased:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button")},musicSliderReleased:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button")},setSfxVolume:function(b){ig.soundHandler.sfxVolume=
b;ig.soundHandler.sfxPlayer.volume(b);ig.game.sfxVolume=b;ig.game.savePlayerStats()},setMusicVolume:function(b){ig.soundHandler.musicVolume=b;ig.soundHandler.bgmPlayer.volume(b);ig.soundHandler.bgmPlayer.bgmPlaying||(ig.soundHandler.bgmPlayer.play(),ig.soundHandler.bgmPlayer.bgmPlaying=!0);ig.game.musicVolume=b;ig.game.savePlayerStats()},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+
e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.classes.connectionfailed-panel").requires("plugins.button").defines(function(){ConnectionFailedPanel=ig.Class.extend({pos:{x:0,y:0},bgAlpha:0,maxBgAlpha:0.8,alpha:1,transitionDuration:0.2,transitionTime:0,transitionIn:!1,transitionOut:!1,hidden:!0,offset:{x:0,y:0},relStartPos:{x:0,y:0},endPos:{x:0,y:0},bgRect:{x:0,y:0,w:0,h:0},control:null,init:function(b){this.control=b},ready:function(){this.relStartPos.y=-ig.system.height;this.endPos.x=ig.system.width/2;this.endPos.y=ig.system.height/
2;this.pos.x=this.endPos.x+this.relStartPos.x;this.pos.y=this.endPos.y+this.relStartPos.y},draw:function(){if(!this.hidden){var b=ig.system.context;0<this.bgAlpha&&(b.save(),b.globalAlpha=this.bgAlpha,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());var c=this.pos.y+this.bgRect.y;b.save();b.globalAlpha=this.alpha;b.restore();var d=_STRINGS.UI.Disconnected;ig.global.addTextSpacing&&(d=d.split("").join(String.fromCharCode(8202)));b.font="30px bebasneue , Impact, Charcoal, sans-serif";
b.textAlign="center";b.fillStyle="#000000";b.fillText(d,this.pos.x+1,c+1);b.fillStyle="#ffffff";b.fillText(d,this.pos.x,c);c+=100;d=_STRINGS.UI["Attempting to reconnect..."];ig.global.addTextSpacing&&(d=d.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="#000000";b.fillText(d,this.pos.x+1,c+1);b.fillStyle="#ffffff";b.fillText(d,this.pos.x,c)}},update:function(){if(!this.hidden)if(this.transitionIn){var b=ig.system.clock.delta()-
this.transitionTime,b=b/this.transitionDuration;1<b&&(b=1);this.alpha=b;this.bgAlpha=this.maxBgAlpha*b;if(0.8>b){var c=b/0.8;this.offset.x=(1-c)*this.relStartPos.x;this.offset.y=(1-c)*this.relStartPos.y}else 1>b?(c=(b-0.8)/0.2*Math.PI,this.offset.x=-0.05*this.relStartPos.x*Math.sin(c),this.offset.y=-0.05*this.relStartPos.y*Math.sin(c)):(this.offset.x=0,this.offset.y=0);1<=b&&(this.transitionIn=!1,this.showDone());this.pos.x=this.endPos.x+this.offset.x;this.pos.y=this.endPos.y+this.offset.y}else this.transitionOut&&
(b=ig.system.clock.delta()-this.transitionTime,b/=this.transitionDuration,1<b&&(b=1),this.alpha=1-b,this.bgAlpha=this.maxBgAlpha*(1-b),1>b?(this.offset.x=b*this.relStartPos.x,this.offset.y=b*this.relStartPos.y):(this.offset.x=this.relStartPos.x,this.offset.y=this.relStartPos.y),1<=b&&(this.transitionOut=!1,this.hideDone()),this.pos.x=this.endPos.x+this.offset.x,this.pos.y=this.endPos.y+this.offset.y)},show:function(){if(this.hidden&&!this.transitionIn){if(this.transitionOut){this.transitionOut=!1;
var b=ig.system.clock.delta()-this.transitionTime;0<b&&(this.transitionIn=!0,this.transitionTime+=b)}else this.transitionIn=!0,this.transitionTime=ig.system.clock.delta();this.hidden=!1}},showDone:function(){},hide:function(){if(!this.hidden&&!this.transitionOut)if(this.transitionIn){this.transitionIn=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b?(this.transitionOut=!0,this.transitionTime+=b):this.hidden=!0}else this.transitionOut=!0,this.transitionTime=ig.system.clock.delta()},hideDone:function(){this.hidden=
!0}})});ig.baked=!0;
ig.module("game.classes.connecting-panel").requires("plugins.button").defines(function(){ConnectingPanel=ig.Class.extend({pos:{x:0,y:0},bgAlpha:0,maxBgAlpha:0.8,alpha:1,transitionDuration:0.2,transitionTime:0,transitionIn:!1,transitionOut:!1,hidden:!0,offset:{x:0,y:0},relStartPos:{x:0,y:0},endPos:{x:0,y:0},bgRect:{x:0,y:0,w:0,h:0},showDoneCallback:null,control:null,init:function(b){this.control=b},ready:function(){this.relStartPos.y=-ig.system.height;this.endPos.x=ig.system.width/2;this.endPos.y=
ig.system.height/2;this.pos.x=this.endPos.x+this.relStartPos.x;this.pos.y=this.endPos.y+this.relStartPos.y},draw:function(){if(!this.hidden){var b=ig.system.context;0<this.bgAlpha&&(b.save(),b.globalAlpha=this.bgAlpha,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());var c=this.pos.y+this.bgRect.y+230;b.save();b.globalAlpha=this.alpha;b.restore();var d=_STRINGS.UI["Connecting..."];ig.global.addTextSpacing&&(d=d.split("").join(String.fromCharCode(8202)));b.font="30px bebasneue , Impact, Charcoal, sans-serif";
b.textAlign="center";b.fillStyle="#000000";b.fillText(d,this.pos.x+1,c+1);b.fillStyle="#ffffff";b.fillText(d,this.pos.x,c)}},update:function(){if(!this.hidden)if(this.transitionIn){var b=ig.system.clock.delta()-this.transitionTime,b=b/this.transitionDuration;1<b&&(b=1);this.alpha=b;this.bgAlpha=this.maxBgAlpha*b;if(0.8>b){var c=b/0.8;this.offset.x=(1-c)*this.relStartPos.x;this.offset.y=(1-c)*this.relStartPos.y}else 1>b?(c=(b-0.8)/0.2*Math.PI,this.offset.x=-0.05*this.relStartPos.x*Math.sin(c),this.offset.y=
-0.05*this.relStartPos.y*Math.sin(c)):(this.offset.x=0,this.offset.y=0);1<=b&&(this.transitionIn=!1,this.showDone());this.pos.x=this.endPos.x+this.offset.x;this.pos.y=this.endPos.y+this.offset.y}else this.transitionOut&&(b=ig.system.clock.delta()-this.transitionTime,b/=this.transitionDuration,1<b&&(b=1),this.alpha=1-b,this.bgAlpha=this.maxBgAlpha*(1-b),1>b?(this.offset.x=b*this.relStartPos.x,this.offset.y=b*this.relStartPos.y):(this.offset.x=this.relStartPos.x,this.offset.y=this.relStartPos.y),1<=
b&&(this.transitionOut=!1,this.hideDone()),this.pos.x=this.endPos.x+this.offset.x,this.pos.y=this.endPos.y+this.offset.y)},show:function(){if(this.hidden&&!this.transitionIn){if(this.transitionOut){this.transitionOut=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b&&(this.transitionIn=!0,this.transitionTime+=b)}else this.transitionIn=!0,this.transitionTime=ig.system.clock.delta();this.hidden=!1}},showDone:function(){"function"==typeof this.showDoneCallback&&this.showDoneCallback()},hide:function(){if(!this.hidden&&
!this.transitionOut)if(this.transitionIn){this.transitionIn=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b?(this.transitionOut=!0,this.transitionTime+=b):this.hidden=!0}else this.transitionOut=!0,this.transitionTime=ig.system.clock.delta()},hideDone:function(){this.hidden=!0}})});ig.baked=!0;
ig.module("plugins.text-container").defines(function(){ig.TextContainer=ig.Class.extend({pos:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},offset:{x:0,y:0},margin:{top:0,bottom:0,left:0,right:0},posRelativeTo:null,scale:{x:1,y:1},skew:{x:0,y:0},angle:0,alpha:1,backgroundType:1,bgFillStyle:null,bgStrokeStyle:null,bgStrokeWidth:2,bgRoundedRadius:5,text:null,textList:null,textCanvas:null,textAlpha:1,textFont:null,textFontSize:24,textLineHeight:24,textHeightAdjustment:0,textColor:{r:255,g:255,b:255},textAlign:"center",
textBaseline:"middle",textShadowOffset:{x:0,y:2},textShadowColor:"rgba(0,0,0,0.5)",textShadowDisabled:!0,textWrap:!0,hidden:!1,textCanvasPos:{x:0,y:0},init:function(b){this.textFont="Impact, Charcoal, sans-serif";this.textLineHeight=this.textFontSize=24;this.parentEntity=b},setPos:function(b,c){b&&(this.pos.x=b.x,this.pos.y=b.y,this.setPosRelativeTo(c))},setPosRelativeTo:function(b,c){if(b&&b.pos&&!(null==b.pos.x||null==b.pos.y))this.posRelativeTo=b,this.setPos(c)},setRect:function(b){b&&(this.rect.x=
b.x,this.rect.y=b.y,this.rect.w=0<=b.w?b.w:1,this.rect.h=0<=b.h?b.h:1,this.refreshTextCanvasPos())},setAngle:function(b){this.angle=b},setScale:function(b,c){b&&c&&(this.scale.x=b,this.scale.y=c)},setFont:function(b,c){this.textFont=c;this.textLineHeight=this.textFontSize=b;this.textHeightAdjustment=this.textList?this.rect.y/2-this.textList.length/2*this.textLineHeight:this.rect.y/2;this.createTextCanvas()},setTextColor:function(b){b&&(this.textColor={},this.textColor.r=b.r,this.textColor.g=b.g,this.textColor.b=
b.b,this.textColor.a=b.a,this.createTextCanvas())},setText:function(b){if(null==b||"undefined"==typeof b)b="";isNaN(b)||(b=""+b);this.text=b;this.textWrap&&1<=this.rect.w?(this.textList=this.wrapText(b,this.rect.w-this.margin.left-this.margin.right),this.textHeightAdjustment=-this.textList.length/2*this.textLineHeight):(this.textList=null,this.textHeightAdjustment=0);this.createTextCanvas()},createTextCanvas:function(){this.textShadowCanvas=this.textCanvas=null;var b=this.rect.w,c=this.rect.h;this.textWrap&&
this.textList&&0<this.textList.length&&1<=this.rect.w?(b=this.rect.w,c=this.textList.length*this.textLineHeight):(c=this.getTextSize(this.text,this.textFont,this.textFontSize),b=this.margin.left+this.margin.right+c.x,c=c.y);this.textCanvas=ig.$new("canvas");this.textCanvas.width=b;this.textCanvas.height=c;c=this.textCanvas.getContext("2d");c.font=this.textFontSize+"px "+this.textFont;c.textAlign=this.textAlign;c.textBaseline=this.textBaseline;var d=0+this.margin.left,e=this.textLineHeight/2;"center"==
this.textAlign?d=this.margin.left+(b-this.margin.left-this.margin.right)/2:"right"==this.textAlign&&(d=b-this.margin.right);if(!this.textShadowDisabled){var b=d+this.textShadowOffset.x,f=e+this.textShadowOffset.y;c.fillStyle=this.textShadowColor;if(this.textList)for(var e=this.textLineHeight/2,g=0,m=0,l=this.textList.length;m<l;m++)c.fillText(this.textList[m],b,f+g),g+=this.textLineHeight;else c.fillText(this.text,b,f)}c.fillStyle=this.getTextColorStr();if(this.textList){e=this.textLineHeight/2;m=
g=0;for(l=this.textList.length;m<l;m++)c.fillText(this.textList[m],d,e+g),g+=this.textLineHeight}else c.fillText(this.text,d,e);this.refreshTextCanvasPos()},draw:function(){if(!this.hidden){var b=ig.system.context,c=this.pos.x+this.offset.x,d=this.pos.y+this.offset.y;this.posRelativeTo&&(c+=this.posRelativeTo.pos.x,d+=this.posRelativeTo.pos.y);b.save();b.globalAlpha=this.alpha;b.transform(this.scale.x,this.skew.x,this.skew.y,this.scale.y,c,d);b.rotate(this.angle);this.backgroundType&&(d=c=!1,this.bgFillStyle&&
(b.fillStyle=this.bgFillStyle,c=!0),this.bgStrokeStyle&&(b.strokeStyle=this.bgStrokeStyle,b.lineWidth=this.bgStrokeWidth,d=!0),this.roundRect(b,this.rect.x-(this.bgStrokeWidth-1)/2,this.rect.y-(this.bgStrokeWidth-1)/2,this.rect.w+(this.bgStrokeWidth-1),this.rect.h+(this.bgStrokeWidth-1),2*this.bgRoundedRadius,c,d));this.text&&""!=this.text&&(this.textCanvas||this.createTextCanvas(),this.textCanvas&&(c=this.textCanvas.width,d=this.textCanvas.height,b.drawImage(this.textCanvas,0,0,c,d,this.textCanvasPos.x,
this.textCanvasPos.y,c,d)));b.restore()}},show:function(){this.hidden&&(this.hidden=!1)},hide:function(){this.hidden||(this.hidden=!0)},refreshTextCanvasPos:function(){if(this.textCanvas){var b=this.textCanvas.width,c=this.textCanvas.height;this.textCanvasPos.x=this.rect.x;this.textWrap||("center"==this.textAlign?this.textCanvasPos.x+=this.rect.w/2-b/2:"right"==this.textAlign&&(this.textCanvasPos.x+=this.rect.w-b));this.textCanvasPos.y=this.rect.y+this.margin.top+(this.rect.h-this.margin.top-this.margin.bottom)/
2-c/2}},wrapText:function(b,c){var d=ig.system.context;d.font=this.textFontSize+"px "+this.textFont;var e=b.split(" "),f="",g=[];if(1==e.length)for(var m=0,l=b.length;m<l;m++){var n=f+b[m],r=d.measureText(n),r=r.width;r>c&&0<m?(g.push(f),f=b[m]):f=n}else{m=0;for(l=e.length;m<l;m++)n=f+e[m]+" ",r=d.measureText(n),r=r.width,r>c&&0<m?(g.push(f),f=e[m]+" "):f=n}g.push(f);return g},getTextColorStr:function(){var b=this.textAlpha;isNaN(this.textColor.a)||(b=this.textColor.a);return"rgba("+this.textColor.r+
","+this.textColor.g+","+this.textColor.b+","+b+")"},getTextSize:function(b,c,d,e){var f=document.createElement("div");f.innerHTML=b;f.style.position="absolute";f.style.top="-9999px";f.style.left="-9999px";f.style.fontFamily=c;f.style.fontWeight=e?"bold":"normal";f.style.fontSize=d+"px";document.body.appendChild(f);d={x:f.offsetWidth,y:f.offsetHeight};document.body.removeChild(f);return d},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();
b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.classes.avatar").defines(function(){Avatar=ig.Class.extend({rect:{x:0,y:0,w:0,y:0},id:0,border:!1,borderFillStyle:"rgba(255,255,255,0.8)",borderStrokeStyle:"",borderLineWidth:2,alpha:1,avatargood:!0,images:[new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/00.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/01.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/02.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/03.png"),
new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/04.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/05.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/06.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/07.png")],imageswrong:[new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/00.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/01.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/02.png"),
new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/03.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/04.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/05.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/06.png"),new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/07.png")],init:function(b){this.id=b;this.rect.w=70;this.rect.h=70;this.rect.x=-this.rect.w/2;this.rect.y=-this.rect.h/
2},update:function(){},draw:function(b,c,d){d||(d=ig.system.context);var e=0,f=0;isNaN(b)||(e+=b);isNaN(c)||(f+=c);d.save();0<this.alpha&&1>this.alpha&&(d.globalAlpha=this.alpha);if(null!=this.id&&this.id<this.images.length){var g=this.avatargood?this.images[this.id]:this.imageswrong[this.id];g&&(e-=g.width/2,f-=g.height/2,d.drawImage(g.data,0,0,g.width,g.height,ig.system.getDrawPos(this.bitwiseRound(e))-1,ig.system.getDrawPos(this.bitwiseRound(f))-1,g.width,g.height))}f=e=0;isNaN(b)||(e+=b);isNaN(c)||
(f+=c);b=this.bitwiseRound(e);f=this.bitwiseRound(f);d.save();c=d.createRadialGradient(b,f,37,b,f,43);c.addColorStop(0,"rgba(255,255,255,0)");c.addColorStop(0.25,"rgba(255,255,255,1)");c.addColorStop(0.75,"rgba(255,255,255,1)");c.addColorStop(1,"rgba(255,255,255,0)");d.strokeStyle=c;d.lineWidth=6;d.beginPath();d.arc(b,f,40,0,2*Math.PI);d.stroke();d.restore();d.restore()},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!1);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+
e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},bitwiseRound:function(b){return 0.5+b<<0}})});ig.baked=!0;
ig.module("game.classes.matchmaking-panel").requires("plugins.button","plugins.text-container","game.classes.avatar").defines(function(){MatchmakingPanel=ig.Class.extend({pos:{x:0,y:0},bgAlpha:0,maxBgAlpha:0.6,buttonImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_long.png"),alpha:1,transitionDuration:0.2,transitionTime:0,transitionIn:!1,transitionOut:!1,hidden:!0,offset:{x:0,y:0},relStartPos:{x:0,y:0},endPos:{x:0,y:0},bgRect:{x:0,y:0,w:0,h:0},backButton:null,playButton:null,
startTime:null,hideDoneCallback:null,control:null,maxWaitDuration:3E4,showOvertimeFlag:!1,playersJoined:0,maxPlayerSize:0,playerSlots:null,init:function(b){this.control=b;this.playerSlots=new MatchmakingPlayerSlots(this)},ready:function(){this.relStartPos.y=-ig.system.height;this.endPos.x=ig.system.width/2;this.endPos.y=ig.system.height/2;this.pos.x=this.endPos.x+this.relStartPos.x;this.pos.y=this.endPos.y+this.relStartPos.y;this.bgRect.w=480;this.bgRect.h=360;this.bgRect.x=-this.bgRect.w/2;this.bgRect.y=
-this.bgRect.h/2;var b=this.buttonImage.width,c=this.buttonImage.height,d=new ig.Button(this);d.setPos({x:this.bgRect.x+60,y:-this.bgRect.y-20});d.posRelativeTo=this;d.setRect({x:-b/2,y:-c/2,w:b,h:c});d.textOffset.x=0;d.textOffset.y=2;d.textShadowDisabled=!1;d.textShadowColor="rgba(0,0,0,0.5)";d.setTextColor({r:255,g:255,b:255});d.setFont(12,"bebasneue , Impact, Charcoal, sans-serif");d.textLineHeight=16;b=_STRINGS.UI.Back;ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202)));
d.setText(b);d.textShadowOffset={x:1,y:1};d.clickedFunction=this.backButtonPressed.bind(this);d.downOffset={x:0,y:1};d.overOffset={x:0,y:-1};d.overScaleMultiplier=1;d.downScaleMultiplier=1;d.buttonType=ig.BUTTONTYPE.IMAGE;d.setUpImage(this.buttonImage);this.backButton=d;b=this.buttonImage.width;c=this.buttonImage.height;d=new ig.Button(this);d.setPos({x:-this.bgRect.x-85,y:-this.bgRect.y-20});d.posRelativeTo=this;d.setRect({x:-b/2,y:-c/2,w:b,h:c});d.textOffset.x=0;d.textOffset.y=2;d.textShadowDisabled=
!1;d.textShadowColor="rgba(0,0,0,0.5)";d.setTextColor({r:255,g:255,b:255});d.setFont(12,"bebasneue , Impact, Charcoal, sans-serif");d.textLineHeight=16;b=_STRINGS.UI["Casual Play"];ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202)));d.setText(b);d.textShadowOffset={x:1,y:1};d.clickedFunction=this.playButtonPressed.bind(this);d.downOffset={x:0,y:1};d.overOffset={x:0,y:-1};d.overScaleMultiplier=1;d.downScaleMultiplier=1;d.buttonType=ig.BUTTONTYPE.IMAGE;d.setUpImage(this.buttonImage);
this.playButton=d},draw:function(){if(!this.hidden){var b=ig.system.context;0<this.bgAlpha&&(b.save(),b.globalAlpha=this.bgAlpha,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());var c=this.pos.x+this.bgRect.x,d=this.pos.y+this.bgRect.y;b.save();b.globalAlpha=this.alpha;b.fillStyle="rgba(0,0,0,0.95)";this.roundRect(b,c,d,this.bgRect.w,this.bgRect.h,10,!0,!1);b.restore();this.playerSlots&&(this.playerSlots.pos.x=this.pos.x,this.playerSlots.pos.y=this.pos.y+this.bgRect.y+
110,this.playerSlots.draw());d=this.pos.y+this.bgRect.y;c=_STRINGS.UI["Waiting for Other Players"];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+this.bgRect.h/2+20+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+this.bgRect.h/2+20);if(!isNaN(this.startTime)){c=Date.now()-this.startTime;if(0<this.maxWaitDuration){var e=c/this.maxWaitDuration;
1<e&&(e=1);var f=this.pos.x-125,g=d+this.bgRect.h/2+30;b.fillStyle="rgba(255,255,255,0.2)";b.fillRect(f,g,250,6);b.fillStyle="rgba(255,255,255,0.4)";b.fillRect(f+4,g+2,242*e,2)}c=Math.floor(c/1E3)+"s";ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+this.bgRect.h/2+60+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+this.bgRect.h/2+60)}c=
"";1<this.playersJoined&&(c+=this.playersJoined-1);c=1<this.playersJoined-1?c+_STRINGS.UI[" Players Found"]:0<this.playersJoined-1?c+_STRINGS.UI[" Player Found"]:c+_STRINGS.UI["No Players Found"];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="14px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+this.bgRect.h/2+90+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+this.bgRect.h/2+90);this.showOvertimeFlag&&
this.playersJoined<this.maxPlayerSize&&(c=_STRINGS.UI["You May Continue to Wait"]+" "+_STRINGS.UI["or Try Casual Play"],ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202))),b.font="14px bebasneue , Impact, Charcoal, sans-serif",b.textAlign="center",b.fillStyle="rgba(0,0,0,0.5)",b.fillText(c,this.pos.x+1,d+this.bgRect.h/2+115+1),b.fillStyle="#FFFFFF",b.fillText(c,this.pos.x,d+this.bgRect.h/2+115),this.playButton.draw());this.backButton.draw()}},update:function(){if(!this.hidden){if(this.transitionIn){var b=
ig.system.clock.delta()-this.transitionTime,b=b/this.transitionDuration;1<b&&(b=1);this.alpha=b;this.bgAlpha=this.maxBgAlpha*b;if(0.8>b){var c=b/0.8;this.offset.x=(1-c)*this.relStartPos.x;this.offset.y=(1-c)*this.relStartPos.y}else 1>b?(c=(b-0.8)/0.2*Math.PI,this.offset.x=-0.05*this.relStartPos.x*Math.sin(c),this.offset.y=-0.05*this.relStartPos.y*Math.sin(c)):(this.offset.x=0,this.offset.y=0);1<=b&&(this.transitionIn=!1,this.showDone());this.pos.x=this.endPos.x+this.offset.x;this.pos.y=this.endPos.y+
this.offset.y}else this.transitionOut&&(b=ig.system.clock.delta()-this.transitionTime,b/=this.transitionDuration,1<b&&(b=1),this.alpha=1-b,this.bgAlpha=this.maxBgAlpha*(1-b),1>b?(this.offset.x=b*this.relStartPos.x,this.offset.y=b*this.relStartPos.y):(this.offset.x=this.relStartPos.x,this.offset.y=this.relStartPos.y),1<=b&&(this.transitionOut=!1,this.hideDone()),this.pos.x=this.endPos.x+this.offset.x,this.pos.y=this.endPos.y+this.offset.y);this.showOvertimeFlag&&this.playButton.update();this.backButton.update();
this.playerSlots&&this.playerSlots.update()}},show:function(){if(this.hidden&&!this.transitionIn){if(this.transitionOut){this.transitionOut=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b&&(this.transitionIn=!0,this.transitionTime+=b)}else this.transitionIn=!0,this.transitionTime=ig.system.clock.delta();this.showOvertimeFlag=this.hidden=!1}},showDone:function(){},hide:function(){if(!this.hidden&&!this.transitionOut)if(this.transitionIn){this.transitionIn=!1;var b=ig.system.clock.delta()-
this.transitionTime;0<b?(this.transitionOut=!0,this.transitionTime+=b):this.hidden=!0}else this.transitionOut=!0,this.transitionTime=ig.system.clock.delta()},hideDone:function(){this.hidden=!0;this.showOvertimeFlag=!1;this.hideDoneCallback&&"function"==typeof this.hideDoneCallback&&this.hideDoneCallback()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},backButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");
this.hide();this.control.cancelMatchmaking()},playButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");this.hide();this.control.requestingArena=!1;this.hideDoneCallback=function(){this.moregames&&this.moregames.enable();this.playButton.enable();this.optionsButton.enable();this.tutorialButton.enable();this.textinput.show();this.optionsPanel.hideDoneCallback=null;this.playGame()}.bind(this.control);var b={};b.playerId=ig.game.network_game.playerId;
ig.game.cancelRequestGame(b)},processGameMeta:function(b){b.timeExpired&&(this.showOvertimeFlag=!0);b.players&&(this.playersJoined=b.players.length,this.playerSlots.playerList=b.players);b.roomSize&&(this.maxPlayerSize=b.roomSize,this.playerSlots.gameSize=b.roomSize);this.playerSlots.refresh()},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!1);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+
e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}});MatchmakingPlayerSlots=ig.Class.extend({pos:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},gameSize:0,slots:[],playerList:[],spacing:16,slotRect:{x:-35,y:-45,w:70,h:70},init:function(b){this.parent=b;this.rect.w=420;this.rect.h=100;this.rect.x=-this.rect.w/2;this.rect.y=-this.rect.h/2},update:function(){},draw:function(){var b=ig.system.context;b.save();
this.parent&&(b.globalAlpha=this.parent.alpha);var c=this.pos.x,d=this.pos.y;b.translate(c,d);for(var e=0,f=this.slots.length;e<f;e++){var g=this.slots[e],m=g.rect.w;g.player?(c=g.pos.x,d=g.pos.y-10,b.fillStyle="rgba(255,255,255,0.8)",b.beginPath(),b.arc(c,d,32,0,2*Math.PI),b.fill(),g.avatar&&(c=g.pos.x,d=g.pos.y-10,g.avatar.draw(c,d)),c=g.pos.x,d=g.pos.y,d+=42,g=g.player.name,b.font="9px bebasneue , Impact, Charcoal, sans-serif",b.measureText(g).width>m&&(b.font="6px bebasneue , Impact, Charcoal, sans-serif"),
b.textAlign="center",b.fillStyle="rgba(0,0,0,0.5)",b.fillText(g,c+1,d+1),b.fillStyle="#FFFFFF",b.fillText(g,c,d)):(c=g.pos.x,d=g.pos.y-10,b.fillStyle="rgba(255,255,255,0.2)",b.beginPath(),b.arc(c,d,32,0,2*Math.PI),b.fill())}b.restore()},refresh:function(){var b=0,c=this.slotRect.w+this.spacing;1<this.gameSize&&(b=-c*((this.gameSize-1)/2));this.slots=[];for(var d=0,e=this.gameSize;d<e;d++){var f={pos:{}};f.pos.x=b+d*c;f.pos.y=0;f.rect=this.slotRect;this.slots.push(f)}b=Math.floor(this.slots.length/
2);1<this.playerList.length&&(b+=Math.floor(this.playerList.length/2));d=0;for(e=this.playerList.length;d<e;d++)if(c=this.playerList[d],f=this.slots[b-d])f.player=c,f.avatar=new Avatar(c.avatarId)},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!1);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,
d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.classes.casualplay-panel").requires("plugins.button","plugins.text-container").defines(function(){CasualplayPanel=ig.Class.extend({pos:{x:0,y:0},bgAlpha:0,maxBgAlpha:0.6,buttonImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_long.png"),alpha:1,transitionDuration:0.2,transitionTime:0,transitionIn:!1,transitionOut:!1,hidden:!0,offset:{x:0,y:0},relStartPos:{x:0,y:0},endPos:{x:0,y:0},bgRect:{x:0,y:0,w:0,h:0},backButton:null,playButton:null,startTime:null,
hideDoneCallback:null,control:null,init:function(b){this.control=b},ready:function(){this.relStartPos.y=-ig.system.height;this.endPos.x=ig.system.width/2;this.endPos.y=ig.system.height/2;this.pos.x=this.endPos.x+this.relStartPos.x;this.pos.y=this.endPos.y+this.relStartPos.y;this.bgRect.w=350;this.bgRect.h=250;this.bgRect.x=-this.bgRect.w/2;this.bgRect.y=-this.bgRect.h/2;var b=this.buttonImage.width,c=this.buttonImage.height,d=new ig.Button(this);d.setPos({x:this.bgRect.x+60,y:-this.bgRect.y-20});
d.posRelativeTo=this;d.setRect({x:-b/2,y:-c/2,w:b,h:c});d.textOffset.x=0;d.textOffset.y=2;d.textShadowDisabled=!1;d.textShadowColor="rgba(0,0,0,0.5)";d.setTextColor({r:255,g:255,b:255});d.setFont(12,"bebasneue , Impact, Charcoal, sans-serif");d.textLineHeight=16;b=_STRINGS.UI.Back;ig.global.addTextSpacing&&(b=b.split("").join(String.fromCharCode(8202)));d.setText(b);d.textShadowOffset={x:1,y:1};d.clickedFunction=this.backButtonPressed.bind(this);d.downOffset={x:0,y:1};d.overOffset={x:0,y:-1};d.overScaleMultiplier=
1;d.downScaleMultiplier=1;d.buttonType=ig.BUTTONTYPE.IMAGE;d.setUpImage(this.buttonImage);this.backButton=d},draw:function(){if(!this.hidden){var b=ig.system.context;0<this.bgAlpha&&(b.save(),b.globalAlpha=this.bgAlpha,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());var c=this.pos.x+this.bgRect.x,d=this.pos.y+this.bgRect.y;b.save();b.globalAlpha=this.alpha;b.fillStyle="rgba(0,0,0,0.95)";this.roundRect(b,c,d,this.bgRect.w,this.bgRect.h,10,!0,!1);b.restore();d=this.pos.y+
this.bgRect.y;c=_STRINGS.UI["Connecting to the Server"];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+this.bgRect.h/2-10+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+this.bgRect.h/2-10);c=_STRINGS.UI["Please Wait"];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.font="20px bebasneue , Impact, Charcoal, sans-serif";
b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,this.pos.x+1,d+this.bgRect.h/2+30+1);b.fillStyle="#FFFFFF";b.fillText(c,this.pos.x,d+this.bgRect.h/2+30);this.backButton.draw()}},update:function(){if(!this.hidden){if(this.transitionIn){var b=ig.system.clock.delta()-this.transitionTime,b=b/this.transitionDuration;1<b&&(b=1);this.alpha=b;this.bgAlpha=this.maxBgAlpha*b;if(0.8>b){var c=b/0.8;this.offset.x=(1-c)*this.relStartPos.x;this.offset.y=(1-c)*this.relStartPos.y}else 1>b?(c=(b-0.8)/
0.2*Math.PI,this.offset.x=-0.05*this.relStartPos.x*Math.sin(c),this.offset.y=-0.05*this.relStartPos.y*Math.sin(c)):(this.offset.x=0,this.offset.y=0);1<=b&&(this.transitionIn=!1,this.showDone());this.pos.x=this.endPos.x+this.offset.x;this.pos.y=this.endPos.y+this.offset.y}else this.transitionOut&&(b=ig.system.clock.delta()-this.transitionTime,b/=this.transitionDuration,1<b&&(b=1),this.alpha=1-b,this.bgAlpha=this.maxBgAlpha*(1-b),1>b?(this.offset.x=b*this.relStartPos.x,this.offset.y=b*this.relStartPos.y):
(this.offset.x=this.relStartPos.x,this.offset.y=this.relStartPos.y),1<=b&&(this.transitionOut=!1,this.hideDone()),this.pos.x=this.endPos.x+this.offset.x,this.pos.y=this.endPos.y+this.offset.y);this.backButton.update()}},show:function(){if(this.hidden&&!this.transitionIn){if(this.transitionOut){this.transitionOut=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b&&(this.transitionIn=!0,this.transitionTime+=b)}else this.transitionIn=!0,this.transitionTime=ig.system.clock.delta();this.hidden=!1}},
showDone:function(){},hide:function(){if(!this.hidden&&!this.transitionOut)if(this.transitionIn){this.transitionIn=!1;var b=ig.system.clock.delta()-this.transitionTime;0<b?(this.transitionOut=!0,this.transitionTime+=b):this.hidden=!0}else this.transitionOut=!0,this.transitionTime=ig.system.clock.delta()},hideDone:function(){this.hidden=!0;this.hideDoneCallback&&"function"==typeof this.hideDoneCallback&&this.hideDoneCallback()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&
b.y+b.h>=c.y},backButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");this.hide();this.control.cancelMatchmaking()},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,
d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.classes.avatar-selector").requires("game.classes.avatar").defines(function(){AvatarSelector=ig.Class.extend({pos:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},blockRect:{x:0,y:0,w:0,h:0},viewRect:{x:0,y:0,w:0,h:0},blocksCanvas:null,blockSpacing:10,maxBlockSize:3,viewMod:{x:0,y:0,w:0,h:0},blocks:[],block_offset:{x:0,y:0},prevButton:null,nextButton:null,expandedFlag:!1,shrinkingFlag:!1,shrinkAnimTime:0,shrinkAnimDuration:0.15,expandingFlag:!1,expandAnimTime:0,expandAnimDuration:0.15,slideAnimFlag:!1,
slideAnimTime:0,slideAnimDuration:0.15,slideOffset:{x:0,y:0},autoshrinkFlag:!1,autoshrinkTime:0,autoshrinkDuration:5,maxExpandWidth:0,prevButtonOffset:{x:0,y:0},nextButtonOffset:{x:0,y:0},currentShownAvatarId:0,init:function(b){this.control=b;this.rect.w=80;this.rect.h=80;this.rect.x=-this.rect.w/2;this.rect.y=-this.rect.h/2;this.blockRect.w=100;this.blockRect.h=100;this.blockRect.x=-this.blockRect.w/2;this.blockRect.y=-this.blockRect.h/2;this.maxExpandWidth=this.blockRect.w+this.blockSpacing;this.numAvatars=
(new Avatar(0)).images.length;this.currentShownAvatarId=ig.game.avatarId;this.refreshBlocks();this.createBlocksCanvas();this.shrinkingFlag=this.expandingFlag=this.expandedFlag=!1;this.viewMod.w=this.blockRect.w-this.viewRect.w;this.viewMod.x=Math.floor(this.maxBlockSize/2)*this.blockRect.w+this.blockSpacing;this.prevButtonOffset.x=-this.rect.w/2-30;var c=b=32,d=this.prevButtonOffset.x,e=0,f=new ig.Button(this);f.setPos({x:d,y:e});f.setRect({x:-b/2,y:-c/2,w:b,h:c});f.posRelativeTo=this;f.clickedFunction=
this.prevButtonPressed.bind(this);f.downOffset={x:0,y:1};f.overOffset={x:0,y:-1};f.overScaleMultiplier=1;f.downScaleMultiplier=1;f.btnShadowDisabled=!0;this.prevButton=f;this.nextButtonOffset.x=this.rect.w/2+30;c=b=32;d=this.nextButtonOffset.x;e=0;f=new ig.Button(this);f.setPos({x:d,y:e});f.setRect({x:-b/2,y:-c/2,w:b,h:c});f.posRelativeTo=this;f.clickedFunction=this.nextButtonPressed.bind(this);f.downOffset={x:0,y:1};f.overOffset={x:0,y:-1};f.overScaleMultiplier=1;f.downScaleMultiplier=1;f.btnShadowDisabled=
!0;this.nextButton=f},update:function(){this.shrinkingFlag?this.playShrinkAnim():this.expandingFlag&&this.playExpandAnim();if(this.prevButton){var b=this.prevButtonOffset.x,c=this.prevButtonOffset.y;this.prevButton.setPos({x:b,y:c});this.prevButton.update()}this.nextButton&&(b=this.nextButtonOffset.x,c=this.nextButtonOffset.y,this.nextButton.setPos({x:b,y:c}),this.nextButton.update());this.autoshrinkFlag&&(this.autoshrinkTime>=this.autoshrinkDuration?(this.autoshrinkTime=0,this.shrink(),this.autoshrinkFlag=
!1):this.autoshrinkTime+=ig.system.tick);this.slideAnimFlag?this.playSlideAnim():this.checkAvatarClicks()},draw:function(){var b=ig.system.context;if(this.blocksCanvas&&0<this.blocksCanvas.width&&0<this.blocksCanvas.height){var c=this.viewRect.w+this.viewMod.w,d=this.viewRect.h+this.viewMod.h,e=this.pos.x-c/2,f=this.pos.y-d/2,g;g=0+(this.viewRect.x+this.viewMod.x+this.block_offset.x);g+=this.viewRect.y+this.viewMod.y+this.block_offset.y;c>this.blocksCanvas.width-g&&(c=this.blocksCanvas.width-g);d>
this.blocksCanvas.height-0&&(d=this.blocksCanvas.height-0);b.drawImage(this.blocksCanvas,g,0,c,d,e,f,c,d)}this.drawExpandedEffects();this.prevButton&&(c=this.prevButton,c.draw(),e=this.pos.x+c.pos.x,f=this.pos.y+c.pos.y,c.down?(e+=c.downOffset.x,f+=c.downOffset.y):c.over&&(e+=c.overOffset.x,f+=c.overOffset.y),b.beginPath(),b.arc(e,f,16,0,2*Math.PI),b.fillStyle="rgba(0,0,0,0.7)",b.fill(),b.beginPath(),b.moveTo(e-8,f),b.lineTo(e+4,f+9),b.lineTo(e+4,f-9),b.closePath(),b.fillStyle="#fff",b.fill());this.nextButton&&
(c=this.nextButton,c.draw(),e=this.pos.x+c.pos.x,f=this.pos.y+c.pos.y,c.down?(e+=c.downOffset.x,f+=c.downOffset.y):c.over&&(e+=c.overOffset.x,f+=c.overOffset.y),b.beginPath(),b.arc(e,f,16,0,2*Math.PI),b.fillStyle="rgba(0,0,0,0.7)",b.fill(),b.beginPath(),b.moveTo(e+8,f),b.lineTo(e-4,f+9),b.lineTo(e-4,f-9),b.closePath(),b.fillStyle="#fff",b.fill())},shrink:function(){this.shrinkingFlag||(this.shrinkingFlag=!0,this.expandingFlag=!1,0!=this.expandAnimTime&&(this.shrinkAnimTime=this.shrinkAnimDuration-
this.expandAnimTime,this.expandAnimTime=0))},expand:function(){!this.expandingFlag&&!this.expandedFlag&&(this.expandingFlag=!0,this.shrinkingFlag=!1,0!=this.shrinkAnimTime&&(this.expandAnimTime=this.expandAnimDuration-this.shrinkAnimTime,this.shrinkAnimTime=0))},playShrinkAnim:function(){if(this.shrinkAnimTime>=this.shrinkAnimDuration)this.shrinkAnimTime=0,this.expandedFlag=this.shrinkingFlag=!1,this.prevButtonOffset.x=-this.rect.w/2-30,this.nextButtonOffset.x=this.rect.w/2+30,this.viewMod.w=this.blockRect.w-
this.viewRect.w,this.viewMod.x=Math.floor(this.maxBlockSize/2)*this.blockRect.w+this.blockSpacing;else{this.shrinkAnimTime+=ig.system.tick;var b=1-this.shrinkAnimTime/this.shrinkAnimDuration;1<b&&(b=1);0>b&&(b=0);var c=this.maxExpandWidth;this.prevButtonOffset.x=-this.rect.w/2-30-b*c;this.nextButtonOffset.x=this.rect.w/2+30+b*c;this.viewMod.w=(1-b)*(this.blockRect.w-this.viewRect.w);this.viewMod.x=(1-b)*(Math.floor(this.maxBlockSize/2)*this.blockRect.w+this.blockSpacing)}},playExpandAnim:function(){if(this.expandAnimTime>=
this.expandAnimDuration)this.expandAnimTime=0,this.expandingFlag=!1,this.expandedFlag=!0,"function"==typeof this.expandCallback&&this.expandCallback(),this.prevButtonOffset.x=-this.rect.w/2-30-this.maxExpandWidth,this.nextButtonOffset.x=this.rect.w/2+30+this.maxExpandWidth,this.viewMod.w=0,this.viewMod.x=0;else{this.expandAnimTime+=ig.system.tick;var b=this.expandAnimTime/this.expandAnimDuration;1<b&&(b=1);0>b&&(b=0);var c=this.maxExpandWidth;this.prevButtonOffset.x=-this.rect.w/2-30-b*c;this.nextButtonOffset.x=
this.rect.w/2+30+b*c;this.viewMod.w=(1-b)*(this.blockRect.w-this.viewRect.w);this.viewMod.x=(1-b)*(Math.floor(this.maxBlockSize/2)*this.blockRect.w+this.blockSpacing)}},playSlideAnim:function(){this.slideAnimTime>=this.slideAnimDuration?(this.slideAnimTime=0,this.slideAnimFlag=!1,this.block_offset.x=0,this.slideOffset.x=0):(this.slideAnimTime+=ig.system.tick,this.block_offset.x=this.slideOffset.x*(1-this.slideAnimTime/this.slideAnimDuration))},prevButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&
ig.soundHandler.sfxPlayer.play("button");this.autoshrinkTime=0;this.autoshrinkFlag=!0;this.expandedFlag?this.slideToAvatarId(ig.game.avatarId+1):(this.expand(),this.expandCallback=function(){this.slideToAvatarId(ig.game.avatarId+1);this.expandCallback=null}.bind(this))},nextButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");this.autoshrinkTime=0;this.autoshrinkFlag=!0;this.expand();this.expandedFlag?this.slideToAvatarId(ig.game.avatarId-1):
(this.expand(),this.expandCallback=function(){this.slideToAvatarId(ig.game.avatarId-1);this.expandCallback=null}.bind(this))},slideToAvatarId:function(b){if(!(isNaN(b)||null==b))if(isNaN(ig.game.avatarId)&&(ig.game.avatarId=0),b=ig.game.avatarId-b,0!=b){var c=Math.abs(b),c=c*this.blockRect.w+c*this.blockSpacing;this.block_offset.x=0>b?this.block_offset.x+c:this.block_offset.x-c;this.slideOffset.x=this.block_offset.x;this.slideAnimFlag=!0;this.slideAnimTime=0;ig.game.avatarId+=b;0>ig.game.avatarId?
ig.game.avatarId=this.numAvatars-1:ig.game.avatarId>=this.numAvatars&&(ig.game.avatarId=0);this.currentShownAvatarId=ig.game.avatarId;this.refreshBlocks();this.createBlocksCanvas();ig.game.savePlayerStats()}},refresh:function(){},refreshBlocks:function(){this.blocks=[];for(var b=this.maxBlockSize+2,c=this.currentShownAvatarId-Math.floor(b/2),d=0;d<b;d++){var e=c+d;0>e?e=this.numAvatars+e:e>=this.numAvatars&&(e=0+(e-this.numAvatars));var f={};f.avatar=new Avatar(e);e!=this.currentShownAvatarId&&(f.avatar.alpha=
0.6);this.blocks.push(f)}},createBlocksCanvas:function(){this.blocksCanvas=null;var b=this.blocks.length;if(0!=b){var c=this.blockRect.w*b+(b-1)*this.blockSpacing,d=this.blockRect.h;this.blocksCanvas=ig.$new("canvas");this.blocksCanvas.width=c;this.blocksCanvas.height=d;for(var b=this.blockRect.w/2,e=this.blockRect.h/2,f=this.blocksCanvas.getContext("2d"),g=0,m=this.blocks.length;g<m;g++){var l=this.blocks[g],n=g*this.blockRect.w+g*this.blockSpacing;l.avatar&&l.avatar.draw(b+n,e,f)}b=this.maxBlockSize;
this.viewRect.w=this.blockRect.w*b+(b-1)*this.blockSpacing;this.viewRect.h=d;this.viewRect.x=(c-this.viewRect.w)/2;this.viewRect.y=0}},checkAvatarClicks:function(){if(!this.expandingFlag&&!this.shrinkingFlag&&ig.input.state("click")){var b=this.getInputPos(),c={};c.x=b.x;c.y=b.y;c.w=1;c.h=1;var b=this.viewRect.h+this.viewMod.h,d=this.pos.x,e=this.pos.y;if(this.blocks.length>this.maxBlockSize)for(var f=Math.floor(this.blocks.length/2),g=Math.floor((this.blocks.length-this.maxBlockSize)/2),m=0,l=this.maxBlockSize;m<
l;m++){var n=m-Math.floor(l/2),r=d+n*(this.blockRect.w+this.blockSpacing),r=r-this.blockRect.w/2,q={};q.x=r;q.y=e-b/2;q.w=this.blockRect.w;q.h=this.blockRect.h;if(this.aabbCheck(c,q)){this.expandedFlag?(ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button"),g+m==f?(this.shrink(),this.autoshrinkFlag=!1):(this.slideToAvatarId(this.currentShownAvatarId-n),this.autoshrinkTime=0,this.autoshrinkFlag=!0)):g+m==f&&(ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button"),
this.expand(),this.autoshrinkTime=0,this.autoshrinkFlag=!0);break}}}},drawExpandedEffects:function(){var b=ig.system.context,c=this.pos.x,d=this.pos.y;if(this.blocks.length>this.maxBlockSize)for(var e=Math.floor((this.blocks.length-this.maxBlockSize)/2),f=0,g=this.maxBlockSize;f<g;f++){var m=this.blocks[e+f],l=c+(f-Math.floor(g/2))*(this.blockRect.w+this.blockSpacing),l=l-this.block_offset.x;if(m.avatar.id==this.currentShownAvatarId&&(this.expandedFlag||this.expandingFlag)){m=1-this.shrinkAnimTime/
this.shrinkAnimDuration;this.expandingFlag&&(m=this.expandAnimTime/this.expandAnimDuration);1<m&&(m=1);0>m&&(m=0);var n;n=d;b.save();b.globalAlpha=m;m=b.createRadialGradient(l,n,35,l,n,45);m.addColorStop(0,"rgba(247,174,30,0)");m.addColorStop(0.4,"rgba(247,174,30,1)");m.addColorStop(0.6,"rgba(247,174,30,1)");m.addColorStop(1,"   rgba(247,174,30,0)");b.strokeStyle=m;b.lineWidth=10;b.beginPath();b.arc(l,n,40,0,2*Math.PI);b.stroke();b.restore()}}},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&
(l=!1);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},getInputPos:function(){return ig.game.io.getClickPos()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y}})});ig.baked=!0;
ig.module("game.entities.home-control2").requires("impact.entity").defines(function(){EntityHomeControl2=ig.Entity.extend({size:{x:10,y:10},type:ig.Entity.TYPE.B,ytextinput:700,ymultiplayer:700,ybot:700,move:!1,init:function(b,c,d){this.parent(b,c,d)},startTween:function(){this.move=!0;this.tween({ytextinput:420},0.4,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start();this.tween({ymultiplayer:462},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start();
this.tween({ybot:518},0.6,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start()},update:function(){this.parent();if(this.home&&this.move){this.home.textInputPos.y=this.ytextinput;var b,c;b=this.home.textInputPos.x;c=this.home.textInputPos.y;var d=this.home.textInputRect;this.home.textinput.setRect(d.x,d.y,d.w,d.h);this.home.textinput.setPos(b,c);this.home.ytextinput=this.ytextinput;this.home.playButton.pos.y=this.ymultiplayer;this.home.playButton2.pos.y=this.ybot}},draw:function(){this.parent()}})});
ig.baked=!0;
ig.module("plugins.textinput-container").defines(function(){ig.TextinputContainer=ig.Class.extend({containerName:"text_input_container",textInputName:"text_input",containerElement:null,textInputElement:null,textFontSize:18,textFont:"DroidSans, Impact, Charcoal, sans-serif",maxTextLength:100,defaultValue:"DEFAULT NAME",pos:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},init:function(b,c,d,e,f,g,m){b&&(this.textInputName=b,this.containerName=b+"_container");c&&(this.textFontSize=c);d&&(this.textFont=d);null!=e&&
(this.maxTextLength=e);null!=f&&(this.defaultValue=f);!isNaN(g)&&!isNaN(m)&&this.setRect(-g/2,-m/2,g,m);this.spawnTextInput()},setRect:function(b,c,d,e){!isNaN(b)&&(!isNaN(c)&&!isNaN(d)&&!isNaN(e))&&(this.rect.x=b,this.rect.y=c,this.rect.w=d,this.rect.h=e,this.updateElementPosition())},setPos:function(b,c){!isNaN(b)&&!isNaN(c)&&(this.pos.x=b,this.pos.y=c,this.updateElementPosition())},updateElementPosition:function(){var b=this.containerName;if(ig.domHandler.getElementById("#"+b)){var c,d;c=this.pos.x+
this.rect.x;d=this.pos.y+this.rect.y;var e=this.rect,f=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y),g=this.containerElement;if(ig.ua.mobile)var m=Math.floor(c*ig.sizeHandler.scaleRatioMultiplier.x)+"px",l=Math.floor(d*ig.sizeHandler.scaleRatioMultiplier.y)+"px",n=Math.floor(e.w*ig.sizeHandler.scaleRatioMultiplier.x)+"px",f=Math.floor(e.h*ig.sizeHandler.scaleRatioMultiplier.y)+"px";else m=ig.domHandler.getElementById("#canvas"),m=ig.domHandler.getOffsets(m),
l=m.top,m=Math.floor(m.left+c*f)+"px",l=Math.floor(l+d*f)+"px",n=Math.floor(e.w*f)+"px",f=Math.floor(e.h*f)+"px";ig.domHandler.css(g,{"float":"left",position:"absolute",left:m,top:l,width:n,height:f,"z-index":3});ig.sizeHandler.dynamicClickableEntityDivs[b]={};ig.sizeHandler.dynamicClickableEntityDivs[b].width=e.w;ig.sizeHandler.dynamicClickableEntityDivs[b].height=e.h;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_x=c;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_y=d}},show:function(){this.containerElement&&
(ig.domHandler.show(this.containerElement),ig.domHandler.show(this.textInputElement))},hide:function(){this.containerElement&&(ig.domHandler.hide(this.containerElement),ig.domHandler.hide(this.textInputElement))},val:function(b){return!this.textInputElement?"":null==b?this.textInputElement.val():this.textInputElement.val(b)},spawnTextInput:function(){var b,c;b=this.pos.x+this.rect.x;c=this.pos.y+this.rect.y;var d=this.rect,e=this.containerName,f=this.textInputName,g=ig.domHandler.getElementById("#"+
e),m=ig.domHandler.getElementById("#"+f);if(g&&m)this.containerElement=$("#"+e),this.textInputElement=$("#"+f),ig.domHandler.show(this.containerElement),ig.domHandler.show(this.textInputElement);else{g=ig.domHandler.create("div");ig.domHandler.attr(g,"id",e);g.blur(function(b){b.stopPropagation()});this.containerElement=g;m=ig.domHandler.create("input");ig.domHandler.attr(m,"id",f);m.blur(function(b){b.stopPropagation()});this.textInputElement=m;var l=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,
ig.sizeHandler.scaleRatioMultiplier.y),n=this.textFontSize*l;if(ig.ua.mobile)var r=Math.floor(b*ig.sizeHandler.scaleRatioMultiplier.x)+"px",q=Math.floor(c*ig.sizeHandler.scaleRatioMultiplier.y)+"px",s=Math.floor(d.w*ig.sizeHandler.scaleRatioMultiplier.x)+"px",l=Math.floor(d.h*ig.sizeHandler.scaleRatioMultiplier.y)+"px";else r=ig.domHandler.getElementById("#canvas"),r=ig.domHandler.getOffsets(r),q=r.top,r=Math.floor(r.left+b*l)+"px",q=Math.floor(q+c*l)+"px",s=Math.floor(d.w*l)+"px",l=Math.floor(d.h*
l)+"px";ig.domHandler.css(g,{"float":"left",position:"absolute",left:r,top:q,width:s,height:l,"z-index":3});ig.domHandler.css(m,{width:"100%",height:"100%","font-family":this.textFont,"font-size":n+"px","z-index":3});ig.domHandler.css(m,{});m.attr("maxlength",this.maxTextLength);m.attr("size",this.maxTextLength);m.attr("autocomplete","off");m.attr("autocapitalize","off");m.attr("autocorrect","off");m.val(this.defaultValue);m.keyup(function(b){13==b.keyCode&&this.textInputElement.blur()}.bind(this));
ig.domHandler.addEvent(g,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(g,m);ig.domHandler.appendToBody(g);ig.sizeHandler.dynamicClickableEntityDivs[e]={};ig.sizeHandler.dynamicClickableEntityDivs[e].width=d.w;ig.sizeHandler.dynamicClickableEntityDivs[e].height=d.h;ig.sizeHandler.dynamicClickableEntityDivs[e].entity_pos_x=b;ig.sizeHandler.dynamicClickableEntityDivs[e].entity_pos_y=c;ig.sizeHandler.dynamicClickableEntityDivs[f]={};ig.sizeHandler.dynamicClickableEntityDivs[f]["font-size"]=
this.textFontSize}}})});ig.baked=!0;
ig.module("game.entities.home-control").requires("impact.entity","plugins.fade-transition","plugins.button","plugins.image-extension","plugins.tween","game.entities.button-more-games","game.classes.options-panel","game.classes.connectionfailed-panel","game.classes.connecting-panel","game.classes.matchmaking-panel","game.classes.casualplay-panel","game.classes.tutorial-panel","game.classes.avatar-selector","game.entities.home-control2","plugins.textinput-container").defines(function(){EntityHomeControl=ig.Entity.extend({zIndex:100,
type:ig.Entity.TYPE.B,size:{x:10,y:10},isHome:!0,namebg:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/namebg.png"),bgOffset:{x:0,y:0},bgScale:1,upgradeNoticeFlag:!1,playButton:null,playButton2:null,optionsButton:null,tutorialButton:null,moregames:null,matchmakingPanel:null,casualplayPanel:null,optionsPanel:null,tutorialPanel:null,connectionFailedPanel:null,connectingPanel:null,menuPaused:!1,mainMenuAlpha:1,maxNameLength:12,textinput:null,textInputPos:null,textInputRect:null,avatar_selector:null,
titlePos:{x:0,y:0},ytextinput:700,ymultiplayer:700,ybot:700,init:function(b,c,d){this.parent(b,c,d);ig.global.wm||(this.avatar_selector=new AvatarSelector(this),this.avatar_selector.pos.x=ig.system.width/2,this.avatar_selector.pos.y=320,this.titlePos.x=ig.system.width/2,this.titlePos.y=170,this.initButtons(),this.textInputPos={},this.textInputPos.x=ig.system.width/2,this.textInputPos.y=this.ytextinput,this.textInputRect={},this.textInputRect.w=150,this.textInputRect.h=35,this.textInputRect.x=-this.textInputRect.w/
2,this.textInputRect.y=-this.textInputRect.h/2-1,this.textinput=new ig.TextinputContainer("home_player_name",15,"DroidSans",this.maxNameLength),b=this.textInputPos.x,c=this.textInputPos.y,d=this.textInputRect,this.textinput.setRect(d.x,d.y,d.w,d.h),this.textinput.setPos(b,c),ig.domHandler.css(this.textinput.textInputElement,{margin:"0px",border:"0px",padding:"3px 0px 0px 0px",background:"none","text-align":"center","font-color":"rgba(0,0,0,0)","text-transform":"uppercase"}),this.textinput.val(ig.game.playerName))},
ready:function(){if(!ig.global.wm){ig.game.network_client.gameStateUpdateCallback=null;if(!ig.game.network_client.socket||ig.game.network_client.socket.disconnected)this.showConnecting(),this.connectingPanel.showDoneCallback=function(){setTimeout(function(){this.connectToServer()}.bind(this),1E3)}.bind(this);this.control2.startTween()}},initButtons:function(){this.connectionFailedPanel=new ConnectionFailedPanel(this);this.connectionFailedPanel.ready();this.connectingPanel=new ConnectingPanel(this);
this.connectingPanel.ready();this.matchmakingPanel=new MatchmakingPanel(this);this.matchmakingPanel.ready();this.casualplayPanel=new CasualplayPanel(this);this.casualplayPanel.ready();this.tutorialPanel=new TutorialPanel(this);this.tutorialPanel.ready();this.playButton=ig.game.spawnEntity(EntityButtonMultiplayer,ig.system.width/2-80,this.ymultiplayer);this.playButton2=ig.game.spawnEntity(EntityButtonBot,ig.system.width/2-80,this.ybot);this.playButton3=ig.game.spawnEntity(EntityButtonHome,10,10);this.control2=
ig.game.spawnEntity(EntityHomeControl2,0,0,{home:this})},draw:function(){if(0!=this.mainMenuAlpha){var b=ig.system.context;b.globalAlpha=this.mainMenuAlpha;this.drawMainMenu();this.drawPlayerCount();this.avatar_selector&&this.avatar_selector.draw();var c=this.textInputPos.x,d=this.textInputPos.y;this.namebg.draw(c-this.namebg.width/2,d-this.namebg.height/2+5);var e=c,d=d+3,e=c,d=this.ytextinput,d=d-26,c=_STRINGS.UI["Enter Your Name"];ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));
b.font="16px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(c,e+1,d+1);b.fillStyle="#FFFFFF";b.fillText(c,e,d);this.upgradeNoticeFlag&&this.drawUpgradeNotice();this.matchmakingPanel.draw();this.casualplayPanel.draw();this.connectionFailedPanel.draw();this.connectingPanel.draw();b.globalAlpha=1}},update:function(){this.menuPaused||(this.updateMainMenu(),this.connectionFailedPanel.update(),this.connectingPanel.update(),this.matchmakingPanel.update(),
this.casualplayPanel.update(),this.connectionFailedPanel.hidden||ig.input.pressed("click")&&this.connectToServer(),this.textinput&&this.textinput.textInputElement&&ig.input.state("click")&&this.textinput.textInputElement.blur(),this.avatar_selector&&this.avatar_selector.update())},playGame:function(b){if(ig.game.network_client.socket&&!ig.game.network_client.socket.disconnected&&!this.requestingArena){this.requestingArena=!0;var c={};c.playerName=ig.game.playerName;c.avatarId=ig.game.avatarId;c.mode=
b;ig.game.network_game.requestGame(c,function(){ig.game.bgcolor="#c6b35e";this.showCasualplay()}.bind(this),function(){ig.game.resetApp();this.requestingArena=!1;this.upgradeNoticeFlag=!0;console.log("requestGame failed")}.bind(this))}},playButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button")},playButton2Pressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button")},optionsButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&
ig.soundHandler.sfxPlayer.play("button");this.showOptions()},tutorialButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");this.showTutorial()},disableBaseControls:function(){this.textinput.hide()},enableBaseControls:function(){this.textinput.show()},showOptions:function(){this.optionsButton.disabled||(this.disableBaseControls(),this.optionsPanel.show(),this.optionsPanel.hideDoneCallback=function(){this.enableBaseControls();this.optionsPanel.hideDoneCallback=
null}.bind(this))},showMatchmaking:function(){this.optionsButton.disabled||(this.disableBaseControls(),this.casualplayPanel.hide(),this.matchmakingPanel.show(),this.matchmakingPanel.hideDoneCallback=function(){this.enableBaseControls();this.optionsPanel.hideDoneCallback=null}.bind(this),this.matchmakingPanel.startTime=Date.now())},cancelMatchmaking:function(){this.matchmakingPanel.hide();this.requestingArena=!1;this.matchmakingPanel.hideDoneCallback=function(){this.enableBaseControls();this.optionsPanel.hideDoneCallback=
null}.bind(this);var b={};b.playerId=ig.game.network_game.playerId;ig.game.network_game.cancelRequestGame(b)},showCasualplay:function(){this.disableBaseControls();this.matchmakingPanel.hide();this.casualplayPanel.show();this.casualplayPanel.hideDoneCallback=function(){this.enableBaseControls()}.bind(this);this.casualplayPanel.startTime=Date.now()},cancelCasualplay:function(){this.casualplayPanel.hide();this.requestingArena=!1;this.matchmakingPanel.hideDoneCallback=function(){this.enableBaseControls()}.bind(this);
var b={};b.playerId=ig.game.network_game.playerId;ig.game.network_game.cancelRequestGame(b)},showTutorial:function(){this.tutorialPanel.disabled||(this.disableBaseControls(),this.tutorialPanel.show(),this.tutorialPanel.hideDoneCallback=function(){this.enableBaseControls();this.tutorialPanel.hideDoneCallback=null}.bind(this))},showConnectionFailed:function(){this.reset();this.disableBaseControls();this.connectionFailedPanel.show()},hideConnectionFailed:function(){this.reset()},showConnecting:function(){this.reset();
this.disableBaseControls();this.connectingPanel.show()},hideConnecting:function(){this.reset()},reset:function(){this.enableBaseControls();this.connectingPanel.hide();this.connectionFailedPanel.hide();this.casualplayPanel.hide();this.matchmakingPanel.hide()},pause:function(){this.menuPaused=!0},unpause:function(){this.menuPaused=!1},drawMainMenu:function(){},updateMainMenu:function(){},drawPlayerCount:function(){if(ig.game.network_game){var b=ig.system.width-10,c;c=""+ig.game.network_game.userCount;
c=1==ig.game.network_game.userCount?c+(" "+_STRINGS.UI["Player Online"]):c+(" "+_STRINGS.UI["Players Online"]);var d=ig.system.context;d.save();d.font="12px bebasneue , Impact, Charcoal, sans-serif";d.textAlign="right";d.fillStyle="rgba(0,0,0,0.5)";d.fillText(c,b+1,21);d.fillStyle="#ffffff";d.fillText(c,b,20);d.restore()}},drawUpgradeNotice:function(){var b=ig.system.width/2,c=ig.system.height-3,d;d=""+_STRINGS.UI["Game Request Rejected"];d=d+". "+_STRINGS.UI["Please Refresh the Client and Try Again"];
var e=ig.system.context;e.save();e.font="10px bebasneue , Impact, Charcoal, sans-serif";e.textAlign="center";e.fillStyle="rgba(0,0,0,0.5)";e.fillText(d,b+1,c+1);e.fillStyle="#fff";e.fillText(d,b,c);e.restore()},connectToServer:function(){ig.game.network_client&&ig.game.network_client.connect(function(){ig.game.getEntitiesByType(EntityHomeControl)[0].hideConnecting()},function(){this.showConnectionFailed()}.bind(this))},gameConfirmed:function(){if(this.requestingArena){this.requestingArena=!1;var b=
!0,c=ig.global.initialGameState;if(c)if(c.players&&0==c.players.length)b=!1;else{if(c.players&&(c.players.length<c.minPlayerSize||c.players.length>c.maxPlayerSize))b=!1}else b=!1;b?(ig.input.clearPressed(),ig.game.loadLevel(LevelGame)):this.cancelMatchmaking()}},gameMeta:function(b){this.requestingArena&&this.matchmakingPanel.processGameMeta(b)},bitwiseRound:function(b){return 0.5+b<<0},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!1);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+
g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;ig.module("game.levels.home").requires("impact.image","game.entities.home-control").defines(function(){LevelHome={entities:[{type:"EntityHomeControl",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.classes.chatbox").requires("plugins.textinput-container").defines(function(){Chatbox=ig.Class.extend({pos:{x:0,y:0},rect:{x:0,y:0,w:250,h:125},contentPos:{x:5,y:3},contentRect:{x:0,y:0,w:220,h:92},contentCanvas:null,contentArray:[],textinput:null,textInputPos:null,textInputRect:null,sendButton:null,scrollUpButton:null,scrollDownButton:null,scrollBarPos:{x:229,y:22},scrollBarRect:{x:0,y:0,w:16,h:54},scrollBarKnobPos:1,scrollBarKnobRect:{x:-5,y:-5,w:10,h:10},textFontSize:10,textFont:"bebasneue , Impact, Charcoal, sans-serif",
contentMaxSize:20,control:null,init:function(b){this.control=b;b=!1;b=ig.domHandler.getElementById("#chatbox_input_container");this.textInputPos={};this.textInputPos.x=100;this.textInputPos.y=109;this.textInputRect={};this.textInputRect.w=182;this.textInputRect.h=25;this.textInputRect.x=-this.textInputRect.w/2;this.textInputRect.y=-this.textInputRect.h/2;this.textinput=new ig.TextinputContainer("chatbox_input",this.textFontSize,this.textFont);var c,d;c=this.textInputPos.x;d=this.textInputPos.y;var e=
this.textInputRect;this.textinput.setRect(e.x,e.y,e.w,e.h);this.textinput.setPos(c,d);ig.domHandler.css(this.textinput.textInputElement,{margin:"0px",border:"0px",padding:"0px",background:"none",color:"rgb(255,255,255)","text-align":"left"});this.textinput.val("");b||(this.textinput.textInputElement.keyup(function(b){13===b.keyCode&&ig.global.control&&ig.global.control.chatbox&&ig.global.control.chatbox.sendButtonPressed()}),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",
this.onKeyUp,!1));b=46;c=21;d=this.textInputPos.x+this.textInputRect.w/2+5+4+b/2;var e=this.textInputPos.y,f=new ig.Button(this);f.setPos({x:d,y:e});f.setRect({x:-b/2,y:-c/2,w:b,h:c});f.posRelativeTo=this;f.setFont(12,"bebasneue , Impact, Charcoal, sans-serif");f.textLineHeight=20;f.setTextColor({r:255,g:255,b:255});f.setText(_STRINGS.UI.Send);f.textOffset.x=0;f.textOffset.y=2;f.textAlpha=1;f.clickedFunction=this.sendButtonPressed.bind(this);f.downOffset={x:0,y:1};f.overOffset={x:0,y:-1};f.overScaleMultiplier=
1;f.downScaleMultiplier=1;f.buttonType=ig.BUTTONTYPE.SQUARE_RECT;f.fillStyle="#49211F";f.strokeStyle="rgb(255,255,255)";f.strokeWidth=0;f.btnShadowDisabled=!0;this.sendButton=f;c=b=16;d=this.scrollBarPos.x+b/2;e=this.scrollBarPos.y-3-c+c/2;f=new ig.Button(this);f.setPos({x:d,y:e});f.setRect({x:-b/2,y:-c/2,w:b,h:c});f.posRelativeTo=this;f.clickedFunction=this.scrollUpButtonPressed.bind(this);f.downOffset={x:0,y:1};f.overOffset={x:0,y:-1};f.overScaleMultiplier=1;f.downScaleMultiplier=1;f.buttonType=
ig.BUTTONTYPE.SQUARE_RECT;f.fillStyle="rgba(0,0,0,0.5)";f.btnShadowDisabled=!0;this.scrollUpButton=f;c=b=16;d=this.scrollBarPos.x+b/2;e=this.scrollBarPos.y+this.scrollBarRect.h+3+c/2;f=new ig.Button(this);f.setPos({x:d,y:e});f.setRect({x:-b/2,y:-c/2,w:b,h:c});f.posRelativeTo=this;f.clickedFunction=this.scrollDownButtonPressed.bind(this);f.downOffset={x:0,y:1};f.overOffset={x:0,y:-1};f.overScaleMultiplier=1;f.downScaleMultiplier=1;f.buttonType=ig.BUTTONTYPE.SQUARE_RECT;f.fillStyle="rgba(0,0,0,0.5)";
f.btnShadowDisabled=!0;this.scrollDownButton=f;this.createContentCanvas()},ready:function(){},draw:function(){var b=ig.system.context,c=this.pos.x+this.rect.x,d=this.pos.y+this.rect.y,e=this.rect.w,f=this.rect.h;b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(c,d,e,f);c=this.contentPos.x+this.contentRect.x;d=this.contentPos.y+this.contentRect.y;e=this.contentRect.w;f=this.contentRect.h;b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(c,d,e,f);if(this.contentCanvas&&0<this.contentCanvas.width&&0<this.contentCanvas.height){var d=
d+3,g=0,e=this.contentRect.w-6,f=this.contentRect.h-6;if(this.contentCanvas.height<f)var m=f-this.contentCanvas.height,f=this.contentCanvas.height,d=d+m;else this.contentCanvas.height>f&&(m=this.contentCanvas.height-f,g=this.scrollBarKnobPos*m);b.drawImage(this.contentCanvas,0,g,e,f,c+3,d,e,f)}c=this.scrollBarPos.x+this.scrollBarRect.x;d=this.scrollBarPos.y+this.scrollBarRect.y;e=this.scrollBarRect.w;f=this.scrollBarRect.h;b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(c,d,e,f);e=this.scrollBarKnobRect.w;
f=this.scrollBarKnobRect.h;c+=3-this.scrollBarKnobRect.x-e/2;d+=3-this.scrollBarKnobRect.y-f/2+this.scrollBarKnobPos*(this.scrollBarRect.h-6-f);b.fillStyle="rgb(255,255,255)";b.fillRect(c,d,e,f);c=this.textInputPos.x+this.textInputRect.x-4;d=this.textInputPos.y+this.textInputRect.y;e=this.textInputRect.w+8;f=this.textInputRect.h;b.fillStyle="rgba(0,0,0,0.5)";b.fillRect(c,d,e,f);""==this.textinput.val()&&(c+=4,e=_STRINGS.UI["< Enter Your Message Here >"],b.font=this.textFontSize+"px "+this.textFont,
b.textAlign="left",b.fillStyle="#aaa",b.fillText(e,c,d+16));this.sendButton&&this.sendButton.draw();this.scrollUpButton&&(this.scrollUpButton.draw(),c=this.scrollUpButton.pos.x,d=this.scrollUpButton.pos.y,this.scrollUpButton.down?(c+=this.scrollUpButton.downOffset.x,d+=this.scrollUpButton.downOffset.y):this.scrollUpButton.over&&(c+=this.scrollUpButton.overOffset.x,d+=this.scrollUpButton.overOffset.y),b.beginPath(),b.moveTo(c,d-5),b.lineTo(c+6,d+5),b.lineTo(c-6,d+5),b.closePath(),b.fillStyle="#fff",
b.fill());this.scrollDownButton&&(this.scrollDownButton.draw(),c=this.scrollDownButton.pos.x,d=this.scrollDownButton.pos.y,this.scrollDownButton.down?(c+=this.scrollDownButton.downOffset.x,d+=this.scrollDownButton.downOffset.y):this.scrollDownButton.over&&(c+=this.scrollDownButton.overOffset.x,d+=this.scrollDownButton.overOffset.y),b.beginPath(),b.moveTo(c,d+5),b.lineTo(c+6,d-5),b.lineTo(c-6,d-5),b.closePath(),b.fillStyle="#fff",b.fill())},update:function(){this.textinput&&this.textinput.textInputElement&&
ig.input.state("click")&&this.textinput.textInputElement.blur();this.sendButton&&this.sendButton.update();this.scrollUpButton&&this.scrollUpButton.update();this.scrollDownButton&&this.scrollDownButton.update();if(ig.input.state("click")){var b=this.getInputPos(),c={};c.x=b.x;c.y=b.y;c.w=1;c.h=1;b={};b.x=this.pos.x+this.scrollBarPos.x+this.scrollBarRect.x+3;b.y=this.pos.y+this.scrollBarPos.y+this.scrollBarRect.y+3;b.w=this.scrollBarRect.w-6;b.h=this.scrollBarRect.h-6;this.aabbCheck(c,b)&&(this.scrollBarKnobPos=
(c.y-b.y)/b.h,0>this.scrollBarKnobPos&&(this.scrollBarKnobPos=0),1<this.scrollBarKnobPos&&(this.scrollBarKnobPos=1))}},sendButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");var b={},c=this.control.client_game.findPlayerById(ig.game.network_game.playerId);c&&(b.from=c.id,b.msg=this.textinput.val(),b.roomId=ig.game.network_game.roomId,ig.game.network_game.sendChatMessage(b));this.textinput.val("")},scrollUpButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&
ig.soundHandler.sfxPlayer.play("button");this.scrollBarKnobPos-=0.1;0>this.scrollBarKnobPos&&(this.scrollBarKnobPos=0)},scrollDownButtonPressed:function(){ig.soundHandler.sfxPlayer.soundList.button&&ig.soundHandler.sfxPlayer.play("button");this.scrollBarKnobPos+=0.1;1<this.scrollBarKnobPos&&(this.scrollBarKnobPos=1)},createContentCanvas:function(){this.contentCanvas=null;var b=this.contentRect.w-6;this.contentCanvas=ig.$new("canvas");this.contentCanvas.width=b;this.contentCanvas.height=14*this.contentArray.length;
b=this.contentCanvas.getContext("2d");b.font=this.textFontSize+"px "+this.textFont;b.textAlign="left";for(var c=10,d=0,e=this.contentArray.length;d<e;d++){var f=this.contentArray[d],g=0;if(""!==f.from&&!isNaN(f.from)&&null!==f.from){var g="",m=this.control.client_game.findPlayerById(f.from);m&&(g=m.shared_obj.name);var m=g+": ",g=b.measureText(m).width,l=!1;ig.game.network_game.playerId==f.from&&(l=!0);b.fillStyle="#aaa";l&&(b.fillStyle="rgba(247,174,30,1)");b.fillText(m,0,c)}b.fillStyle="#fff";b.fillText(f.msg,
0+g,c);c+=14}},addMessage:function(b,c){if(c){var d=c,e="";if(""!==b&&!isNaN(b)&&null!==b){var f=this.control.client_game.findPlayerById(b);f&&(e=f.shared_obj.name,d=e+": "+c)}this.textList=this.wrapText(d,this.contentRect.w-6);d=0;for(f=this.textList.length;d<f;d++){var g=this.textList[d],m={from:""};m.msg=g;0==d&&e&&(m.msg=g.substring(e.length+2),m.from=b);this.contentArray.push(m)}this.contentArray.length>this.contentMaxSize&&this.contentArray.splice(0,this.contentArray.length-this.contentMaxSize);
this.createContentCanvas()}},getInputPos:function(){return ig.game.io.getClickPos()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},wrapText:function(b,c,d){var e=ig.system.context;e.font=this.textFontSize+"px "+this.textFont;var f=b.split(" "),g="",m=[];if(1==f.length)for(var l=0,n=b.length;l<n;l++){var r=g+b[l],q=e.measureText(r),q=q.width;q>c&&0<l?(m.push(g),g=b[l]):g=r}else{l=0;for(n=f.length;l<n;l++)if(q=e.measureText(g+f[l]),!d&&q.width>c){b=0;for(var s=
f[l].length;b<s;b++)r=g+f[l][b],q=e.measureText(r),q=q.width,q>c&&0<b?(m.push(g),g=f[l][b]):g=r;g+=" "}else r=g+f[l]+" ",q=e.measureText(r),q=q.width,q>c&&0<l?(m.push(g),g=f[l]+" "):g=r}m.push(g);return m},onKeyDown:function(){},onKeyUp:function(b){"BODY"==b.target.tagName&&13==b.keyCode&&ig.global.control&&ig.global.control.chatbox&&ig.global.control.options.hidden&&ig.global.control.chatbox.textinput.textInputElement.focus()}})});ig.baked=!0;
ig.module("game.classes.callout").defines(function(){Callout=ig.Class.extend({pos:{x:0,y:0},offset:{x:0,y:0},rect:{x:0,y:0,w:0,h:0},scale:{x:1,y:1},alpha:1,textSize:10,textFont:"bebasneue , Impact, Charcoal, sans-serif",textFillStyle:"#FFF",textShadowFillStyle:"rgba(0,0,0,0.5)",bgSideFillStyle:"rgba(255,0,0,0)",bgFillStyle:"rgba(255,0,0,0.5)",bgShadowFillStyle:"rgba(0,0,0,0.5)",bgStrokeStyle:"rgba(255,0,0,0.5)",bgLineWidth:4,text:"",control:null,endCallback:null,state:0,showTime:0,showDuration:0.1,
waitTime:0,waitDuration:2,fadeTime:0,fadeDuration:0.1,init:function(b,c){this.control=b;this.text=c;this.rect.w=300;this.rect.h=20;this.rect.x=-this.rect.w/2;this.rect.y=-this.rect.h/2;this.showTime=this.alpha=this.state=0},ready:function(){},draw:function(){if(!(0==this.alpha||0==this.scale.x||0==this.scale.y)){var b=ig.system.context;b.save();var c=this.pos.x,d=this.pos.y;b.translate(c,d);(1!=this.scale.x||1!=this.scale.y)&&b.scale(this.scale.x,this.scale.y);1>this.alpha&&(b.globalAlpha=this.alpha);
var c=this.rect.x,d=this.rect.y,e=b.createLinearGradient(c,0,c+this.rect.w,0);e.addColorStop(0,this.bgSideFillStyle);e.addColorStop(0.2,this.bgFillStyle);e.addColorStop(0.8,this.bgFillStyle);e.addColorStop(1,this.bgSideFillStyle);b.fillStyle=e;b.fillRect(c,d,this.rect.w,this.rect.h);c=0;d=0.4*this.textSize;b.font=this.textSize+"px "+this.textFont;b.textAlign="center";e=this.text;ig.global.addTextSpacing&&(e=e.split("").join(String.fromCharCode(8202)));b.fillStyle=this.textShadowFillStyle;b.fillText(e,
c+1,d+1);b.fillStyle=this.textFillStyle;b.fillText(e,c,d);b.restore()}},update:function(){if(0==this.state)if(this.showTime>=this.showDuration)this.alpha=this.state=1;else{this.showTime+=ig.system.tick;var b=this.showTime/this.showDuration;1<b&&(b=1);this.alpha=b}1==this.state&&(this.waitTime>=this.waitDuration?this.state=2:this.waitTime+=ig.system.tick);2==this.state&&(this.fadeTime>=this.fadeDuration?(this.state=3,this.alpha=0,"function"==typeof this.endCallback&&this.endCallback(this)):(this.fadeTime+=
ig.system.tick,b=this.fadeTime/this.fadeDuration,1<b&&(b=1),this.alpha=1-b))},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!1);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);g&&b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);g&&b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("plugins.number-anim").defines(function(){ig.NumberAnim=ig.Class.extend({minValue:0,maxValue:10,hasMin:!1,hasMax:!1,actualValue:0,displayValue:0,animStartTime:0,animStartValue:0,animDuration:0.2,init:function(b,c,d){if(!b||isNaN(b))b=0;this.setValue(b);isNaN(c)||this.setMin(c);isNaN(d)||this.setMax(d)},setValue:function(b){this.displayValue=this.actualValue=b},add:function(b){isNaN(b)||(this.actualValue+=b,this.hasMin&&this.actualValue<this.minValue&&(this.actualValue=this.minValue),this.hasMax&&
this.actualValue>this.maxValue&&(this.actualValue=this.maxValue),this.animStartTime=ig.system.clock.delta(),this.animStartValue=this.displayValue)},setActualValue:function(b){isNaN(b)||(this.actualValue=b,this.hasMin&&this.actualValue<this.minValue&&(this.actualValue=this.minValue),this.hasMax&&this.actualValue>this.maxValue&&(this.actualValue=this.maxValue),this.animStartTime=ig.system.clock.delta(),this.animStartValue=this.displayValue)},setMin:function(b){isNaN(b)?this.hasMin=!1:(this.minValue=
b,this.hasMin=!0)},setMax:function(b){isNaN(b)?this.hasMax=!1:(this.maxValue=b,this.hasMax=!0)},update:function(){if(0!=this.actualValue-this.displayValue){var b=(ig.system.clock.delta()-this.animStartTime)/this.animDuration;this.displayValue=1<=b?this.actualValue:this.displayValue=this.animStartValue+this.easeOutSine(b,this.actualValue-this.animStartValue)}},easeOutSine:function(b,c){return c*Math.sin(b*(Math.PI/2))}})});ig.baked=!0;
ig.module("plugins.image-manipulation").requires("impact.image").defines(function(){ig.Image.inject({onload:function(b){this.parent(b);var c=this.path.indexOf("#");b=this.path.indexOf("^");if(-1!==c||-1!==b){this.convertToCanvas();var c=this.data.getContext("2d"),d=c.getImageData(0,0,this.data.width,this.data.height);-1!==b?"grayscale"==this.path.substr(b+1,9)?d=this.filter_grayscale(d):"screen"==this.path.substr(b+1,6)?d=this.filter_screen(d):"overlay"==this.path.substr(b+1,7)?d=this.filter_overlay(d):
"softlight"==this.path.substr(b+1,9)?d=this.filter_softlight(d):"multiply"==this.path.substr(b+1,8)&&(d=this.filter_multiply(d)):d=this.filter_multiply(d);c.putImageData(d,0,0)}},convertToCanvas:function(){if(!this.data.getContext){var b=ig.$new("canvas");b.width=this.width;b.height=this.height;b.getContext("2d").drawImage(this.data,0,0,this.width,this.height,0,0,this.width,this.height);this.data=b}},filter_grayscale:function(b){for(var c=b.data,d=0;d<c.length;d+=4)c[d]=c[d+1]=c[d+2]=0.2126*c[d]+
0.7152*c[d+1]+0.0722*c[d+2];return b},filter_multiply:function(b){for(var c=this.path.indexOf("#"),d=b.data,e=d.length,f=parseInt(this.path.substr(c+1,2),16)/255,g=parseInt(this.path.substr(c+3,2),16)/255,m=parseInt(this.path.substr(c+5,2),16)/255,l=0;l<e;l+=4){var c=d[l+3]/255,n=c+1-1*c,r=d[l]/255*c,q=d[l+1]/255*c,s=d[l+2]/255*c,v=255/n,v=255/n;d[l]=(r*f+f*(1-c))*v;d[l+1]=(q*g+g*(1-c))*v;d[l+2]=(s*m+m*(1-c))*v}return b},filter_screen:function(b){for(var c=this.path.indexOf("#"),d=b.data,e,f=d.length,
g=parseInt(this.path.substr(c+1,2),16)/255,m=parseInt(this.path.substr(c+3,2),16)/255,c=parseInt(this.path.substr(c+5,2),16)/255,l=0;l<f;l+=4){e=d[l+3]/255;var n=d[l]/255*e,r=d[l+1]/255*e,q=d[l+2]/255*e;e=255/(e+1-1*e);d[l]=(n+g-n*g)*e;d[l+1]=(r+m-r*m)*e;d[l+2]=(q+c-q*c)*e}return b},filter_overlay:function(b){for(var c=this.path.indexOf("#"),d=b.data,e,f=d.length,g=parseInt(this.path.substr(c+1,2),16),m=parseInt(this.path.substr(c+3,2),16),c=parseInt(this.path.substr(c+5,2),16),l=0;l<f;l+=4){e=d[l+
3]/255;var n=1*e,r=1-n;e-=n;var q=d[l],s=d[l+1],v=d[l+2];d[l]=n*this.Foverlay(g,q)+r*g+e*q;d[l+1]=n*this.Foverlay(m,s)+r*m+e*s;d[l+2]=n*this.Foverlay(c,v)+r*c+e*v}return b},filter_softlight:function(b){for(var c=this.path.indexOf("#"),d=b.data,e,f=d.length,g=parseInt(this.path.substr(c+1,2),16),m=parseInt(this.path.substr(c+3,2),16),c=parseInt(this.path.substr(c+5,2),16),l=0;l<f;l+=4){e=d[l+3]/255;var n=1*e,r=1-n;e-=n;var q=d[l],s=d[l+1],v=d[l+2];d[l]=n*this.Fsoftlight(g,q)+r*g+e*q;d[l+1]=n*this.Fsoftlight(m,
s)+r*m+e*s;d[l+2]=n*this.Fsoftlight(c,v)+r*c+e*v}return b},Foverlay:function(b,c){return 128>b?b*c>>7:255-((255-c)*(255-b)>>7)},Fsoftlight:function(b,c){var d=c<<1;return 128>c?b*(d+(b*(255-d)>>8))>>8:b*(511-d)+Math.sqrt(b<<8)*(d-255)>>8}})});ig.baked=!0;
ig.module("game.classes.client-player").requires("plugins.tween","plugins.number-anim","game.classes.avatar").defines(function(){ClientPlayer=ig.Class.extend({id:0,name:"",color:{r:255,g:255,b:255},drawPos:{x:0,y:0},nameplateSize:{w:150,h:25},nameAreaSize:{w:118,h:25},nameplatePos:{x:30,y:-10},avatarPos:{x:-56,y:14},avatar:null,shared_obj:null,isPlayer:!0,client_position:0,turnTimeLeft:0,score:0,score_opp:0,ratio:1,scoreTween:0,tempRatio:0,init:function(b,c){b&&(this.game=b,this.control=this.game.control);
if(!c)return null;var d=c.id;this.id=d;this.shared_obj=c;this.avatar=new Avatar(c.avatarId);this.id==ig.game.network_game.playerId&&(this.avatar.border=!0);shared_game.seed=6+Math.floor(this.game.state.startTime/1E4)+d;this.color.r=Math.floor(255*shared_game.seededRandom());this.color.g=Math.floor(255*shared_game.seededRandom());this.color.b=Math.floor(255*shared_game.seededRandom());this.temp=ig.game.spawnEntity(EntityTemp,10,10)},tweenScore:function(){this.temp.score=this.score;this.temp.tweenScore()},
answer:function(b){this.avatar.avatargood=b},playerAva:function(b){this.ava=ig.game.spawnEntity(EntityGoodWrong,0==this.client_position?9:279,this.drawPos.y+this.avatarPos.y-25,{avatarId:this.shared_obj.avatarId,correct:b})},opponentAva:function(b){this.ava=ig.game.spawnEntity(EntityGoodWrong,0==this.client_position?9:279,this.drawPos.y+this.avatarPos.y-25,{avatarId:this.shared_obj.avatarId,correct:b})},update:function(){},draw:function(){var b=ig.system.context,c=this.nameplateSize.w,d=this.nameplateSize.h;
this.drawPos.x=-1E3;switch(this.shared_obj.order){case 0:this.drawPos.x=c/2+30;break;case 1:this.drawPos.x=ig.system.width-c/2-30}this.drawPos.y=100;var c=this.nameAreaSize.w,d=this.nameAreaSize.h,e=this.drawPos.x-c/2,f=this.drawPos.y;if(this.game.state.phase==shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE||this.game.state.phase==shared_game.PhaseEnum.PHASE_DECISION_ANIM||this.game.state.phase==shared_game.PhaseEnum.PHASE_PLAYER_DECISION||this.game.state.phase==shared_game.PhaseEnum.PHASE_PLAYER_LEFT||
this.game.state.phase==shared_game.PhaseEnum.PHASE_MATCH_RESULTS)if(this.game.state.phase==shared_game.PhaseEnum.PHASE_PLAYER_LEFT&&this.shared_obj.leftGameFlag)b.save(),b.globalAlpha=0.25,b.restore();else if(this.game.state.phase==shared_game.PhaseEnum.PHASE_MATCH_RESULTS&&this.game.last_winner!=this.shared_obj.symbolId)b.save(),b.globalAlpha=0.25,b.restore();else if((this.game.state.phase==shared_game.PhaseEnum.PHASE_PLAYER_DECISION||this.game.state.phase==shared_game.PhaseEnum.PHASE_DECISION_ANIM)&&
this.game.state.playerTurn!=this.client_position)b.save(),b.globalAlpha=0.25,b.restore();e=this.drawPos.x-c/2;f=this.drawPos.y;this.avatar&&(e+=this.nameplatePos.x,f+=this.nameplatePos.y);b.fillStyle="rgba(255,255,255,1)";this.roundRect(b,e,f,c,d,0,!0,!1);b.fillStyle="rgba(83,70,64,1)";this.roundRect(b,e,f+d,c,d-5,0,!0,!1);this.id==ig.game.network_game.playerId&&(b.lineWidth=4,b.strokeStyle="#111",b.fillStyle="rgba(255,255,255,1)",this.roundRect(b,e,f,c,d,0,!0,!1));b.lineWidth=4;b.strokeStyle="rgba(222,200,99,1)";
this.roundRect(b,e,f,c,d,0,!1,!0);this.roundRect(b,e,f+d,c,d-5,0,!1,!0);b.restore();this.game.state.phase==shared_game.PhaseEnum.PHASE_MATCH_RESULTS&&this.game.last_winner==this.shared_obj.symbolId&&(e=this.drawPos.x+20,f=this.drawPos.y+65+40,c=_STRINGS.UI["WINNER!"],b.save(),b.font="32px bebasneue , Impact, Charcoal, sans-serif",b.textAlign="center",b.fillStyle="rgba(0,0,0,1)",b.fillText(c,e+1,f+1),b.fillStyle="rgba(255,255,255,1)",b.fillText(c,e,f),b.restore());this.drawNames();e=this.drawPos.x+
40;f=this.drawPos.y+27;c="Score : "+this.score+"/"+ig.game.roundQuestionCount;ig.global.addTextSpacing&&(c=c.split("").join(String.fromCharCode(8202)));b.save();b.font="14px bebasneue";b.textAlign="center";b.fillStyle="rgba(0,0,0,1)";b.fillText(c,e+1,f+1);b.fillStyle="rgba(255,255,255,1)";b.fillText(c,e,f);b.restore();this.drawBar()},drawBar:function(){this.tempRatio<this.temp.scoreTween&&(this.tempRatio=this.temp.scoreTween);this.ratio=this.tempRatio/ig.game.roundQuestionCount;var b=Math.ceil(ig.game.roundQuestionCount/
2);if(0==this.client_position){var c=400*this.ratio,d=200+(400-c),e=ig.system.context;e.save();e.fillStyle="rgba(174,73,130,0.85)";this.tempRatio<b?this.roundRect(e,20,d-10,20,c+10,10,!0,!0):this.roundRect(e,20,d,20,c,10,!0,!0);e.restore();c=360*this.ratio;d=200+(380-c);e.lineWidth=0;e.beginPath();e.fillStyle="rgba(174,73,130,1)";e.arc(30,d,20,0,2*Math.PI);e.stroke();e.fill();e.restore();b=Math.ceil(100*this.ratio).toString()+"%";e.font="20px bebasneue , Impact, Charcoal, sans-serif";e.textAlign=
"center";e.fillStyle="#ffffff";e.fillText(b,30,d)}else c=400*this.ratio,d=200+(400-c),e=ig.system.context,e.save(),e.fillStyle="rgba(86,186,236,0.85)",this.tempRatio<b?this.roundRect(e,440,d-10,20,c+10,10,!0,!0):this.roundRect(e,440,d,20,c,10,!0,!0),e.restore(),c=360*this.ratio,d=200+(380-c),e.lineWidth=0,e.beginPath(),e.fillStyle="rgba(86,186,236,1)",e.arc(450,d,20,0,2*Math.PI),e.stroke(),e.fill(),e.restore(),b=Math.ceil(100*this.ratio).toString()+"%",e.font="20px bebasneue , Impact, Charcoal, sans-serif",
e.textAlign="center",e.fillStyle="#ffffff",e.fillText(b,450,d)},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},drawNames:function(){var b=ig.system.context,c=this.nameAreaSize.w,
d=this.drawPos.x-c/2,e=this.drawPos.y;this.avatar&&(d+=this.nameplatePos.x,e+=this.nameplatePos.y);var f=this.shared_obj.name;b.font="18px bebasneue , Impact, Charcoal, sans-serif";b.measureText(f).width>c&&(ae4982,b.font="18px bebasneue , Impact, Charcoal, sans-serif");b.textAlign="center";b.fillStyle=0==this.client_position?"#ae4982":"#56baec";b.fillText(f,d+c/2+7,e+14);b.restore();this.avatar&&(d=this.drawPos.x+this.avatarPos.x,e=this.drawPos.y+this.avatarPos.y,b.save(),b.translate(d,e),b.scale(1,
1),this.avatar.draw(0,0),b.restore())},drawSymbol:function(b,c){switch(this.shared_obj.symbolId){case 0:this.game.drawX(b,c);break;case 1:this.game.drawO(b,c)}},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);var n=g;e<2*g&&(n-=2*g-e,0>n&&(n=0),e<g&&(g-=e,d+=g/2,f-=g,g=e));f<2*g&&(g=f/2);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-n,d);n&&b.quadraticCurveTo(c+e,d,c+e,d+n);b.lineTo(c+e,d+f-n);n&&b.quadraticCurveTo(c+e,d+f,c+e-n,d+f);b.lineTo(c+g,d+f);
g&&b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);g&&b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},resetFlags:function(){}})});ig.baked=!0;
ig.module("game.classes.client-game").requires("plugins.number-anim","plugins.image-manipulation","game.classes.client-player").defines(function(){ClientGame=ig.Class.extend({playerList:[],playerHash:{},removePlayerIdList:[],x_color:"#ff9999",o_color:"#9999ff",board_line_color:"#ffffff",boardPos:{x:0,y:0},boardWidth:360,state:null,last_winner:null,last_winner_name:null,last_winner_id:null,requestingArena:!1,autobot:!0,init:function(b){this.control=b;this.adTimer=new ig.Timer;this.waitCount=this.adTime=
5;this.playerCount=0},playGame:function(){if(ig.game.network_client.socket&&!ig.game.network_client.socket.disconnected&&(ig.game.network_game.cancelRequestGame(),!this.requestingArena)){this.requestingArena=!0;var b={};b.playerName=ig.game.playerName;b.avatarId=ig.game.avatarId;b.mode="bot";ig.game.network_game.requestGame(b,function(){ig.game.bgcolor="#c6b35e"}.bind(this),function(){ig.game.resetApp();this.requestingArena=!1;this.autobot=!0}.bind(this));ig.game.mode="bot";ig.game.getEntitiesByType(EntityQuestionBoard)[0].botReady()}},
update:function(){this.adTimer.delta()>this.adTime&&1==this.playerCount&&this.autobot?(console.log("run bot"),this.autobot=!1,this.playGame(),ig.game.mode="bot"):this.waitCount=this.adTimer.delta();for(var b=0,c=this.playerList.length;b<c;b++)this.playerList[b].update();this.cleanupPlayerList()},draw:function(){if(this.state){var b=ig.system.context,c=ig.system.width/2,d=54,e="",f="";b.save();b.font="24px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";
b.fillText(e,c+1,d+1);b.fillStyle="#ffffff";b.fillText(e,c,d);b.restore();b.save();b.translate(0,24);b.font="18px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(f,c+1,d+1);b.fillStyle="#ffffff";b.fillText(f,c,d);b.restore();c=ig.system.width/2;d=ig.system.height-40;f=e="";switch(this.state.phase){case shared_game.PhaseEnum.PHASE_INIT:e=_STRINGS.UI["WAITING FOR ANOTHER PLAYER..."]+" "+Math.ceil(5-this.waitCount);break;case shared_game.PhaseEnum.PHASE_FLASHJOIN:e=
_STRINGS.UI["PLAYER JOINED!"];break;case shared_game.PhaseEnum.PHASE_PLAYER_DECISION:e="";break;case shared_game.PhaseEnum.PHASE_DECISION_ANIM:e=_STRINGS.UI["SHOWING PLAYER DECISION..."];break;case shared_game.PhaseEnum.PHASE_MATCH_RESULTS:e=_STRINGS.UI["MATCH ENDED"];null!==this.last_winner&&void 0!==this.last_winner&&(f=null!==this.last_winner_name&&void 0!==this.last_winner_name&&""!=this.last_winner_name?this.last_winner_name+_STRINGS.UI[" WON!"]:_STRINGS.UI["IT'S A TIE!"],d-=6);break;case shared_game.PhaseEnum.PHASE_PLAYER_LEFT:e=
_STRINGS.UI["PLAYER LEFT!"],ig.game.network_game.leaveGame(),ig.game.loadLevel(LevelHomePage)}b.save();b.font="24px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(e,c+1,d+1);b.fillStyle="#ffffff";b.fillText(e,c,d);b.restore();b.save();b.translate(0,24);b.font="18px bebasneue , Impact, Charcoal, sans-serif";b.textAlign="center";b.fillStyle="rgba(0,0,0,0.5)";b.fillText(f,c+1,d+1);b.fillStyle="#ffffff";b.fillText(f,c,d);b.restore();c=b=0;for(d=
this.playerList.length;c<d;c++)b+=1,this.playerList[c].draw();this.playerCount=b}},drawX:function(b,c){var d=ig.system.context,e=this.x_color;d.save();d.translate(b+2,c+1+1);d.beginPath();d.moveTo(-32.5,-17.5);d.lineTo(-17.5,-32.5);d.lineTo(0,-15);d.lineTo(17.5,-32.5);d.lineTo(32.5,-17.5);d.lineTo(15,0);d.lineTo(32.5,17.5);d.lineTo(17.5,32.5);d.lineTo(0,15);d.lineTo(-17.5,32.5);d.lineTo(-32.5,17.5);d.lineTo(-15,0);d.lineTo(-32.5,-17.5);d.fillStyle="rgba(0,0,0,0.5)";d.fill();d.translate(-2,-2);d.beginPath();
d.moveTo(-32.5,-17.5);d.lineTo(-17.5,-32.5);d.lineTo(0,-15);d.lineTo(17.5,-32.5);d.lineTo(32.5,-17.5);d.lineTo(15,0);d.lineTo(32.5,17.5);d.lineTo(17.5,32.5);d.lineTo(0,15);d.lineTo(-17.5,32.5);d.lineTo(-32.5,17.5);d.lineTo(-15,0);d.lineTo(-32.5,-17.5);d.fillStyle=e;d.fill();d.lineWidth=2;d.strokeStyle="#000000";d.stroke();d.restore()},drawO:function(b,c){var d=ig.system.context,e=this.o_color;d.save();d.beginPath();d.arc(b+1,c+1,25,0,2*Math.PI,!1);d.lineWidth=22;d.strokeStyle="rgba(0,0,0,0.5)";d.stroke();
d.beginPath();d.arc(b,c,25,0,2*Math.PI,!1);d.lineWidth=22;d.strokeStyle="#000000";d.stroke();d.lineWidth=20;d.strokeStyle=e;d.stroke();d.restore()},drawBoard:function(b,c){if(this.state){this.drawBoardLines(b,c);for(var d=this.state.boardState,e=b-this.boardWidth/2,f=c-this.boardWidth/2,g=this.boardWidth/6,m=0,l=d.length;m<l;m++){var n=d[m],r=Math.floor(m/3);b=e+g*(1+2*(m%3));c=f+g*(1+2*r);0==n?this.drawX(b,c):1==n&&this.drawO(b,c)}}},drawBoardLines:function(b,c){var d=this.boardWidth/2,e=b-d,f=b-
d/3,g=b+d/3,m=b+d,l=c-d,n=c-d/3,r=c+d/3,d=c+d,q=ig.system.context,s=this.board_line_color,v=f,u=l,t=d;q.save();q.beginPath();q.moveTo(v+1,u+1);q.lineTo(f+1,t+1);q.lineWidth=12;q.strokeStyle="rgba(0,0,0,0.5)";q.stroke();q.beginPath();q.moveTo(v,u-1);q.lineTo(f,t+1);q.lineWidth=12;q.strokeStyle="#000000";q.stroke();q.beginPath();q.moveTo(v,u);q.lineTo(f,t);q.lineWidth=10;q.strokeStyle=s;q.stroke();q.restore();f=v=g;u=l;t=d;q.save();q.beginPath();q.moveTo(v+1,u+1);q.lineTo(f+1,t+1);q.lineWidth=12;q.strokeStyle=
"rgba(0,0,0,0.5)";q.stroke();q.beginPath();q.moveTo(v,u-1);q.lineTo(f,t+1);q.lineWidth=12;q.strokeStyle="#000000";q.stroke();q.beginPath();q.moveTo(v,u);q.lineTo(f,t);q.lineWidth=10;q.strokeStyle=s;q.stroke();q.restore();v=e;f=m;t=u=n;q.save();q.beginPath();q.moveTo(v+1,u+1);q.lineTo(f+1,t+1);q.lineWidth=12;q.strokeStyle="rgba(0,0,0,0.5)";q.stroke();q.beginPath();q.moveTo(v-1,u);q.lineTo(f+1,t);q.lineWidth=12;q.strokeStyle="#000000";q.stroke();q.beginPath();q.moveTo(v,u);q.lineTo(f,t);q.lineWidth=
10;q.strokeStyle=s;q.stroke();q.restore();v=e;f=m;t=u=r;q.save();q.beginPath();q.moveTo(v+1,u+1);q.lineTo(f+1,t+1);q.lineWidth=12;q.strokeStyle="rgba(0,0,0,0.5)";q.stroke();q.beginPath();q.moveTo(v-1,u);q.lineTo(f+1,t);q.lineWidth=12;q.strokeStyle="#000000";q.stroke();q.beginPath();q.moveTo(v,u);q.lineTo(f,t);q.lineWidth=10;q.strokeStyle=s;q.stroke();q.restore()},cleanupPlayerList:function(){if(0<this.removePlayerIdList.length){for(var b=0,c=this.removePlayerIdList.length;b<c;b++)delete this.playerHash[this.removePlayerIdList[b]];
for(var d=[],e=0,f=this.playerList.length;e<f;e++){for(var g=this.playerList[e],m=!1,b=0,c=this.removePlayerIdList.length;b<c;b++)if(g.id==this.removePlayerIdList[b]){m=!0;break}m?1>=this.removePlayerIdList.length?this.removePlayerIdList=[]:(b=this.removePlayerIdList.indexOf(g.id),this.removePlayerIdList.splice(b,1)):d.push(g)}this.playerList=d;this.removePlayerIdList=[]}},setupWithGameState:function(b){this.state=new shared_game.GameState;this.state.importData(b);this.playerList=[];b=0;for(var c=
this.state.players.length;b<c;b++){var d=new ClientPlayer(this,this.state.players[b]);d.client_position=b;this.playerList.push(d);this.playerHash[d.id]=d}},showAllPlayer:function(){return this.playerList},findPlayerById:function(b){var c=null;if(this.playerHash&&"undefined"!=typeof this.playerHash[b])return this.playerHash[b];for(var d=0,e=this.playerList.length;d<e;d++)if(this.playerList[d].id==b){c=this.playerList[d];this.playerHash&&(this.playerHash[c.id]=c);break}return c},syncPlayers:function(b){var c=
[];if(b||this.state.phase==shared_game.PhaseEnum.PHASE_INIT||this.state.phase==shared_game.PhaseEnum.PHASE_FLASHJOIN){b=0;for(var d=this.playerList.length;b<d;b++){var e=this.playerList[b];e.shared_obj.leftGameFlag&&this.removePlayerIdList.push(e.shared_obj.id)}this.cleanupPlayerList()}b=0;for(d=this.state.players.length;b<d;b++){var f=this.state.players[b],e=this.findPlayerById(f.id);if(!(0==this.state.phase||1==this.state.phase)||!f.leftGameFlag)e||(e=new ClientPlayer(this,f),this.playerList.push(e),
this.playerHash[e.id]=e),e.client_position=b,e.init(this,f),c.push(e)}this.playerList=c},applyEvent:function(b){this.state=simulator.simulateEvent(b,this.state,null,{clientside:!0})},resetFlags:function(){for(var b=0,c=this.playerList.length;b<c;b++)this.playerList[b].resetFlags()}})});ig.baked=!0;
ig.module("game.entities.trivia.check-button").requires("impact.entity").defines(function(){EntityCheckButton=ig.Entity.extend({size:{x:330,y:40},type:ig.Entity.TYPE.B,small:!1,big:!1,lock:!1,init:function(b,c,d){this.parent(b,c,d)},clicked:function(){""==ig.game.popup&&!this.lock&&(this.small=!0)},release:function(){},update:function(){this.parent();if(this.small)this.small=!1,this.big=!0;else if(this.big)if(this.big=this.small=!1,this.currentAnim==this.anims.uncheck){this.currentAnim=this.anims.check;
this.uncheckOthers();ig.soundHandler.sfxPlayer.play("button");var b={};this.control=ig.game.getEntitiesByType(EntityGameControl)[0];this.board.setGreyColor(this.number);if("bot"==ig.game.mode)this.board.checkPlayerAnswer(this.number);else{this.board.checkPlayerAnswer(this.number);var c=this.control.client_game.findPlayerById(ig.game.network_game.playerId);c&&(b.from=c.id,b.msg=this.number,b.answer=this.textanswer,b.roomId=ig.game.network_game.roomId,ig.game.network_game.sendAnswer(b))}}else this.currentAnim=
this.anims.uncheck},uncheckOthers:function(){for(var b=1;4>=b;b++)if(b!=this.number){var c=ig.game.getEntityByName("check"+b);c.currentAnim=c.anims.uncheck}},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="rgba(0,0,0,0.70)";this.roundRect(b,this.pos.x+5,this.pos.y,this.size.x,this.size.y,10,!0,!1);b.restore();b.save();b.fillStyle=this.maincolor;this.roundRect(b,this.pos.x,this.pos.y-5,this.size.x,this.size.y,10,!0,!1);b.restore()},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==
typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.entities.trivia.getready").requires("impact.entity").defines(function(){EntityGetReady=ig.Entity.extend({size:{x:10,y:10},type:ig.Entity.TYPE.B,counter:[],init:function(b,c,d){this.parent(b,c,d)},killOther:function(){this.counter5&&(this.counter5.text="");this.counter4&&(this.counter4.text="");this.counter3&&(this.counter3.text="");this.go&&(this.go.text="")},setCountDown:function(b){this.killOther();0==b.msg?(ig.soundHandler.sfxPlayer.play("beep"),b=3-b.msg,this.counter5=ig.game.spawnEntity(EntityText,
this.pos.x,this.pos.y,{name:"coundown",text:b.toString(),fontColor:"#FFFFFF",fontStyle:"bebasneue , Impact, Charcoal, sans-serif",fontSize:0.1,textAlign:"center",zIndex:this.zIndex+10}),this.counter5.tween({fontSize:100},1,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.counter5.text="";this.counter5.kill()}.bind(this)}).start()):1==b.msg?(ig.soundHandler.sfxPlayer.play("beep"),b=3-b.msg,this.counter4=ig.game.spawnEntity(EntityText,this.pos.x,this.pos.y,{name:"coundown",text:b.toString(),
fontColor:"#FFFFFF",fontStyle:"bebasneue , Impact, Charcoal, sans-serif",fontSize:0.1,textAlign:"center",zIndex:this.zIndex+10}),this.counter4.tween({fontSize:100},1,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.counter4.text="";this.counter4.kill()}.bind(this)}).start()):2==b.msg?(ig.soundHandler.sfxPlayer.play("beep"),b=3-b.msg,this.counter3=ig.game.spawnEntity(EntityText,this.pos.x,this.pos.y,{name:"coundown",text:b.toString(),fontColor:"#FFFFFF",fontStyle:"bebasneue , Impact, Charcoal, sans-serif",
fontSize:0.1,textAlign:"center",zIndex:this.zIndex+10}),this.counter3.tween({fontSize:100},1,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.counter3.text="";this.counter3.kill()}.bind(this)}).start()):"go"==b.msg&&(this.go=ig.game.spawnEntity(EntityText,this.pos.x,this.pos.y,{name:"question",text:"GO!!!",fontColor:"#FFFFFF",fontStyle:"bebasneue , Impact, Charcoal, sans-serif",fontSize:0.1,textAlign:"center",zIndex:this.zIndex+10}),this.go.tween({fontSize:100},1,{easing:ig.Tween.Easing.Cubic.EaseOut,
onComplete:function(){this.go.kill()}.bind(this)}).start());ig.game.sortEntitiesDeferred()},update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.trivia.result").requires("impact.entity").defines(function(){this.START_WHITELABEL_ENCAPSULATOR;v7KK.y5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/03.png';v7KK.W5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/07.png';v7KK.E5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/popuptittle.png';v7KK.a5=2;v7KK.I5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/00.png';v7KK.A5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/06.png';v7KK.V5=false;v7KK.u=0;v7KK.i5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/05.png';v7KK.d5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/06.png';v7KK.X5="364";v7KK.R5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/gameovb.png';v7KK.F5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/gameovname.png';v7KK.C5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/gameova.png';v7KK.F2=true;v7KK.e=function (){return typeof v7KK.S.P==='function'?v7KK.S.P.apply(v7KK.S,arguments):v7KK.S.P;};v7KK.K5="400";v7KK.u5="undefined";v7KK.Y2="2";function v7KK(){}v7KK.U=function (){return typeof v7KK.S.O==='function'?v7KK.S.O.apply(v7KK.S,arguments):v7KK.S.O;};v7KK.x5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/02.png';v7KK.c5="300";v7KK.O5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/04.png';v7KK.Q5="501";v7KK.r=function (){return typeof v7KK.S.O==='function'?v7KK.S.O.apply(v7KK.S,arguments):v7KK.S.O;};v7KK.f5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/01.png';v7KK.G5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/lostbar.png';v7KK.D5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/04.png';v7KK.Z=1;v7KK.m5="0";v7KK.B5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/05.png';v7KK.P5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/03.png';v7KK.T5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/01.png';v7KK.p5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/00.png';v7KK.b5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-wrong/02.png';v7KK.o=function (){return typeof v7KK.S.P==='function'?v7KK.S.P.apply(v7KK.S,arguments):v7KK.S.P;};v7KK.H5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/gameover.png';v7KK.v5='';v7KK.S=function(f){return{P:function(){var i,b=arguments;switch(f){case 0:i=b[0]-b[1];break;case 2:i=b[1]|b[0];break;case 3:i=b[0]+b[1];break;case 1:i=b[0]*b[1];break;case 4:i=b[0]+b[2]-b[1];break;}return i;},O:function(W){f=W;}};}();v7KK.w5='../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/avatars-good/07.png';EntityResult=ig.Entity.extend({size:{x:v7KK.X5-v7KK.u,y:v7KK.Q5|v7KK.u},type:ig.Entity.TYPE.B,bgimage:new ig.Image(v7KK.H5),tittleimage:new ig.Image(v7KK.E5),lostbar:new ig.Image(v7KK.G5),gameova:new ig.Image(v7KK.C5),gameovb:new ig.Image(v7KK.R5),gameovname:new ig.Image(v7KK.F5),bgRect:{x:v7KK.m5*v7KK.Z,y:v7KK.u,w:v7KK.K5|v7KK.u,h:+v7KK.c5},myscore:+v7KK.m5,oppscore:v7KK.m5*v7KK.Z,winText:v7KK.v5,mypos:v7KK.m5|v7KK.u,oppos:v7KK.m5-v7KK.u,myname:v7KK.v5,oppname:v7KK.v5,mypercent:v7KK.m5-v7KK.u,oppercent:v7KK.m5*v7KK.Z,images:[new ig.Image(v7KK.I5),new ig.Image(v7KK.T5),new ig.Image(v7KK.x5),new ig.Image(v7KK.P5),new ig.Image(v7KK.O5),new ig.Image(v7KK.B5),new ig.Image(v7KK.A5),new ig.Image(v7KK.w5)],imageswrong:[new ig.Image(v7KK.p5),new ig.Image(v7KK.f5),new ig.Image(v7KK.b5),new ig.Image(v7KK.y5),new ig.Image(v7KK.D5),new ig.Image(v7KK.i5),new ig.Image(v7KK.d5),new ig.Image(v7KK.W5)],init:function(v,d,N){var r2=v7KK;var S5="1.2";var h5='result';this.parent(v,d,N);this.getScore();this.home=ig.game.spawnEntity(EntityButtonHome,r2.u,r2.u,{modul:h5});this.restart=ig.game.spawnEntity(EntityButtonRestart,r2.u,r2.u,{modul:h5});r2.r(r2.u);this.home.setScale(r2.o(S5,r2.u),+S5);this.restart.setScale(+S5,+S5);ig.game.sortEntitiesDeferred();ig.game.network_game.leaveGame();ig.game.popup=h5;ig.game.gameStart=r2.V5;},getScore:function(){var o2=v7KK;var N2='Injecting End Game API ...';var a2='Leaderboard SubmitScore ...';var t5='Submitting to MarketJS Leaderboard: ';var Z5='AdInGameEndgame Initializing ...';var M5='Checking for AdInGameEndgame ...';var s5="50";var U5='DRAW';var r5="looser";var o5='YOU LOSE';var e5="winner";var J5='YOU WIN';var n5="1";var l5=100;var p,C,k;this.control=ig.game.getEntitiesByType(EntityGameControl)[o2.e(o2.m5,o2.Z,o2.U(o2.Z))];p=this.control.client_game.showAllPlayer();for(var V=o2.u;V<=p.length-+n5;V++){C=this.control.client_game.findPlayerById(p[V].id);if(ig.game.network_game.playerId==p[V].id){this.myname=p[V].shared_obj.name;this.mypos=p[V].shared_obj.order;this.myscore=C.score;}else{this.oppname=p[V].shared_obj.name;this.oppos=p[V].shared_obj.order;this.oppscore=C.score;this.avatarOppId=C.avatar.id;}}k=l5;if(this.myscore>this.oppscore){this.winText=J5;ig.soundHandler.sfxPlayer.play(e5);}else if(this.myscore<this.oppscore){this.winText=o5;ig.soundHandler.sfxPlayer.play(r5);o2.r(o2.Z);k=o2.o(o2.m5,o2.Z);}else{this.winText=U5;ig.soundHandler.sfxPlayer.play(e5);k=+s5;}console.log(M5);if(typeof AdInGameEndgame!=o2.u5){console.log(Z5);AdInGameEndgame.Initialize();}console.log(t5,k);if(typeof MarketJS!=o2.u5){console.log(a2);MarketJS.Leaderboard.SubmitScore(k);}console.log(N2);try{console.log('enabled endgame api11');;}catch(L){console.log(L.message);}},startCounting:function(){var k2="100";var s,J;s=this.myscore/ ig.game.roundQuestionCount*+k2;this.tween({mypercent:s},v7KK.Y2-v7KK.u,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start();J=this.oppscore/ ig.game.roundQuestionCount*+k2;this.tween({oppercent:J},+v7KK.Y2,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start();},update:function(){var z2="190";var j2="125";var l2="90";this.parent();this.home.pos.x=this.pos.x+(l2-v7KK.u);this.home.pos.y=this.pos.y+this.size.y-+j2;this.restart.pos.x=this.pos.x+(z2-v7KK.u);this.restart.pos.y=this.pos.y+this.size.y-+j2;},draw:function(){var n2=v7KK;var h2="320";var W2="285";var d2="200";var i2="230";var D2='#ffffff';var y2=' %';var b2="165";var f2='26px bebasneue , Impact, Charcoal, sans-serif';var p2="75";var w2='#FFFFFF';var A2="center";var B2='38px bebasneue , Impact, Charcoal, sans-serif';var O2='#ae4982';var P2='#56baec';var x2="257";var T2="137";var I2="73";var v2="250";var c2="65";var K2="0.45";var m2=0.55;var R2='rgba(222,200,99,1)';var C2=0.45;var G2="0.55";var E2='rgba(81,70,66,1)';var H2="265";var Q2="145";var X2="105";var q2="40";var g2='#000000';var L2="0.6";var q5=265;var g5=257;var L5=230;var z5=130;var j5=105;var Y5=73;var F,j,A,t;this.parent();F=ig.system.context;F.save();n2.r(n2.Z);F.globalAlpha=n2.e(L2,n2.Z);F.fillStyle=g2;F.fillRect(+n2.m5,n2.u,ig.system.width,ig.system.height);F.restore();this.bgimage.draw(this.pos.x,this.pos.y);this.tittleimage.draw(this.pos.x+this.size.x/n2.a5-this.tittleimage.width/(n2.Y2-n2.u),this.pos.y+(q2|n2.u));this.gameovname.draw(this.pos.x+ +X2,this.pos.y+(Q2-n2.u));this.gameovname.draw(this.pos.x+j5,this.pos.y+ +H2);F.fillStyle=E2;F.fillRect(this.pos.x+j5,this.pos.y+(Q2-n2.u)+this.gameovname.height*(G2*n2.Z),this.gameovname.width,this.gameovname.height*C2);F.restore();F.strokeStyle=R2;this.roundRect(F,this.pos.x+(X2-n2.u),this.pos.y+(Q2-n2.u),this.gameovname.width,this.gameovname.height*(G2*n2.Z),n2.m5-n2.u,n2.V5,n2.F2);this.roundRect(F,this.pos.x+ +X2,this.pos.y+Q2*n2.Z+this.gameovname.height*m2,this.gameovname.width,this.gameovname.height*(K2-n2.u),+n2.m5,n2.V5,n2.F2);F.fillStyle=E2;F.fillRect(this.pos.x+(X2|n2.u),this.pos.y+q5+this.gameovname.height*+G2,this.gameovname.width,this.gameovname.height*+K2);F.restore();F.strokeStyle=R2;this.roundRect(F,this.pos.x+ +X2,this.pos.y+q5,this.gameovname.width,this.gameovname.height*+G2,n2.m5*n2.Z,n2.V5,n2.F2);this.roundRect(F,this.pos.x+ +X2,this.pos.y+(H2|n2.u)+this.gameovname.height*+G2,this.gameovname.width,this.gameovname.height*(K2-n2.u),+n2.m5,n2.V5,n2.F2);this.gameovb.draw(this.pos.x+c2*n2.Z,this.pos.y+z5);this.gameova.draw(this.pos.x+ +c2,this.pos.y+ +v2);if(this.myscore>this.oppscore){this.images[ig.game.avatarId].draw(this.pos.x+(I2-n2.u),this.pos.y+(T2-n2.u));this.imageswrong[this.avatarOppId].draw(this.pos.x+Y5,this.pos.y+(x2|n2.u));}else if(this.myscore<this.oppscore){this.imageswrong[ig.game.avatarId].draw(this.pos.x+ +I2,this.pos.y+(T2-n2.u));this.images[this.avatarOppId].draw(this.pos.x+Y5,this.pos.y+g5);}else{this.images[ig.game.avatarId].draw(this.pos.x+ +I2,this.pos.y+(T2|n2.u));this.images[this.avatarOppId].draw(this.pos.x+(I2-n2.u),this.pos.y+(x2|n2.u));}if(ig.game.network_game.playerId==(n2.m5|n2.u)){j=P2;A=O2;}else{j=O2;A=P2;}t=this.winText;F.font=B2;F.textAlign=A2;F.fillStyle=w2;F.fillText(t,this.pos.x+this.size.x/+n2.Y2,this.pos.y+ +p2);t=this.myname;F.font=f2;F.textAlign=A2;F.fillStyle=j;F.fillText(t,this.pos.x+L5,this.pos.y+ +b2);t=Math.ceil(this.mypercent).toString()+y2;F.font=f2;F.textAlign=A2;F.fillStyle=D2;F.fillText(t,this.pos.x+(i2|n2.u),this.pos.y+ +d2);t=this.oppname;F.font=f2;F.textAlign=A2;F.fillStyle=A;F.fillText(t,this.pos.x+(i2|n2.u),this.pos.y+ +W2);t=Math.ceil(this.oppercent).toString()+y2;F.font=f2;F.textAlign=A2;F.fillStyle=D2;F.fillText(t,this.pos.x+(i2-n2.u),this.pos.y+ +h2);},roundRect:function(n,Q,G,a,D,M,g,z){var V2=v7KK;var S2="5";var k5=4;var N5=3;if(typeof z==V2.u5){z=V2.F2;}if(typeof M===V2.u5){V2.U(V2.a5);M=V2.e(V2.u,S2);}n.beginPath();V2.r(N5);n.moveTo(V2.e(Q,M),G);V2.r(k5);n.lineTo(V2.e(Q,M,a),G);V2.r(N5);n.quadraticCurveTo(V2.o(Q,a),G,V2.o(Q,a),V2.e(G,M));V2.U(N5);n.lineTo(V2.e(Q,a),V2.e(G,M,D,V2.U(k5)));V2.r(N5);n.quadraticCurveTo(V2.e(Q,a),V2.e(G,D,V2.U(N5)),V2.o(Q,M,a,V2.r(k5)),V2.e(G,D,V2.U(N5)));V2.r(N5);n.lineTo(V2.e(Q,M),V2.e(G,D));V2.r(N5);n.quadraticCurveTo(Q,V2.e(G,D),Q,V2.e(G,M,D,V2.r(k5)));V2.r(N5);n.lineTo(Q,V2.o(G,M));V2.r(N5);n.quadraticCurveTo(Q,G,V2.o(Q,M),G);n.closePath();if(z){n.stroke();}if(g){n.fill();}}});this.END_WHITELABEL_ENCAPSULATOR;
});ig.baked=!0;
ig.module("game.entities.trivia.button").requires("impact.entity").defines(function(){EntityButtonSettings=ig.Entity.extend({size:{x:64,y:70},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_settings.png",64,70),small:!1,big:!1,scalex:1,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle;this.zIndex=1E3;this.setScale(0.8,0.8)},ready:function(){this.gamecontrol=
ig.game.getEntitiesByType(EntityGameControl)[0]},clicked:function(){""==ig.game.popup&&(this.small=!0)},released:function(){},over:function(){""==ig.game.popup&&(this.currentAnim=this.anims.over)},leave:function(){""==ig.game.popup&&(this.currentAnim=this.anims.idle)},update:function(){this.parent();this.small&&0.8<this.scalex?(this.currentAnim=this.anims.click,this.scalex-=0.008,0.95>=this.scalex&&(this.small=!1,this.big=!0)):this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=
this.small=!1,this.currentAnim=this.anims.over,ig.soundHandler.sfxPlayer.play("button"),this.gamecontrol.showOptions(),this.board=ig.game.getEntitiesByType(EntityQuestionBoard)[0],this.board.pauseTweens(),this.board.roundPause=!0))},networkPaused:function(){var b={},c=this.gamecontrol.client_game.findPlayerById(ig.game.network_game.playerId);c&&(b.playerId=c.id,b.id=ig.game.network_game.roomId,b.paused=1,ig.game.network_game.gamePaused(b))},draw:function(){this.parent()}});EntityButtonMultiplayer=
ig.Entity.extend({size:{x:160,y:45},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_multiplayer.png",160,45),small:!1,big:!1,scalex:1,fontsize:"15px DroidSans,bebasneue , Impact, Charcoal, sans-serif",fontypos:20,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle},ready:function(){this.homecontrol=ig.game.getEntitiesByType(EntityHomeControl)[0]},
clicked:function(){this.small=!0},released:function(){},over:function(){this.currentAnim=this.anims.over;this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif"},leave:function(){this.currentAnim=this.anims.idle;this.fontsize="15px DroidSans,bebasneue , Impact, Charcoal, sans-serif"},update:function(){this.parent();if(this.small&&0.8<this.scalex)this.currentAnim=this.anims.click,this.fontsize="14px DroidSans,bebasneue , Impact, Charcoal, sans-serif",this.scalex-=0.008,this.fontypos=
24,0.95>=this.scalex&&(this.small=!1,this.big=!0);else if(this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,this.currentAnim=this.anims.over,this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif",this.fontypos=20,ig.soundHandler.sfxPlayer.play("button"),this.homecontrol.textinput))){var b=this.homecontrol.textinput.val();b&&"string"===typeof b&&(0<b.length&&b.length<=this.homecontrol.maxNameLength)&&(ig.game.playerName=b,ig.game.savePlayerStats(),
ig.game.mode="multiplayer",ig.game.gameStart=!0,this.homecontrol.playGame("multiplayer"))}},draw:function(){this.parent();var b=ig.system.context,c=_STRINGS.UI["Casual Play"];b.font=this.fontsize;b.textAlign="center";b.fillStyle="#000000";b.fillText(c,this.pos.x+80,this.pos.y+this.fontypos)}});EntityButtonBot=ig.Entity.extend({size:{x:160,y:45},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_bot.png",160,45),small:!1,big:!1,scalex:1,
fontsize:"15px DroidSans,bebasneue , Impact, Charcoal, sans-serif",fontypos:20,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle},ready:function(){this.homecontrol=ig.game.getEntitiesByType(EntityHomeControl)[0]},clicked:function(){this.small=!0},released:function(){},over:function(){this.currentAnim=this.anims.over;this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif"},leave:function(){this.currentAnim=
this.anims.idle;this.fontsize="15px DroidSans,bebasneue , Impact, Charcoal, sans-serif"},update:function(){this.parent();if(this.small&&0.8<this.scalex)this.currentAnim=this.anims.click,this.fontsize="14px DroidSans,bebasneue , Impact, Charcoal, sans-serif",this.fontypos=24,this.scalex-=0.008,0.95>=this.scalex&&(this.small=!1,this.big=!0);else if(this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,this.currentAnim=this.anims.over,this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif",
this.fontypos=20,ig.soundHandler.sfxPlayer.play("button"),this.homecontrol.textinput))){var b=this.homecontrol.textinput.val();b&&"string"===typeof b&&(0<b.length&&b.length<=this.homecontrol.maxNameLength)&&(ig.game.playerName=b,ig.game.savePlayerStats(),ig.game.mode="bot",ig.game.gameStart=!0,ig.game.bgcolor="#c6b35e",this.homecontrol.playGame("bot"))}},draw:function(){this.parent();var b=ig.system.context,c=_STRINGS.UI["Casual Play2"];b.font=this.fontsize;b.textAlign="center";b.fillStyle="#000000";
b.fillText(c,this.pos.x+80,this.pos.y+this.fontypos)}});EntityButtonHome=ig.Entity.extend({size:{x:65,y:61},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_home.png",65,61),small:!1,big:!1,scalex:1,modul:"",mode:null,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle;this.zIndex=12E3},ready:function(){this.gamecontrol=ig.game.getEntitiesByType(EntityGameControl)[0]},
clicked:function(){this.small=!0},released:function(){},over:function(){this.currentAnim=this.anims.over},leave:function(){this.currentAnim=this.anims.idle},update:function(){this.parent();if(this.small&&0.8<this.scalex)this.currentAnim=this.anims.click,this.scalex-=0.008,0.95>=this.scalex&&(this.small=!1,this.big=!0);else if(this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex)){this.big=this.small=!1;this.currentAnim=this.anims.over;ig.soundHandler.sfxPlayer.play("button");ig.game.network_game.leaveGame();
ig.game.bgcolor="#c6b35e";ig.game.popup="";ig.game.gameStart=!1;try{ig.game.getEntitiesByType(EntityHomeControl)[0].textinput.hide()}catch(b){}"option"==this.mode&&(this.board=ig.game.getEntitiesByType(EntityQuestionBoard)[0],this.board.resumeTweens(),this.board.roundPause=!1,this.board.clearCountdown());ig.game.resetApp();ig.game.loadLevel(LevelHomePage)}},networkPaused:function(){var b={},c=this.gamecontrol.client_game.findPlayerById(ig.game.network_game.playerId);c&&(b.playerId=c.id,b.id=ig.game.network_game.roomId,
b.paused=0,ig.game.network_game.gamePaused(b))},draw:function(){this.parent()}});EntityButtonBack=ig.Entity.extend({size:{x:65,y:60},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_go.png",65,60),small:!1,big:!1,scalex:1,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle;this.zIndex=1200},ready:function(){this.gamecontrol=ig.game.getEntitiesByType(EntityGameControl)[0]},
clicked:function(){this.small=!0},released:function(){},over:function(){this.currentAnim=this.anims.over},leave:function(){this.currentAnim=this.anims.idle},update:function(){this.parent();this.small&&0.8<this.scalex?(this.currentAnim=this.anims.click,this.scalex-=0.008,0.95>=this.scalex&&(this.small=!1,this.big=!0)):this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,this.currentAnim=this.anims.over,ig.soundHandler.sfxPlayer.play("button"),this.board=ig.game.getEntitiesByType(EntityQuestionBoard)[0],
this.board.resumeTweens(),this.board.roundPause=!1,this.gamecontrol.options.hide()))},networkPaused:function(){var b={},c=this.gamecontrol.client_game.findPlayerById(ig.game.network_game.playerId);c&&(b.playerId=c.id,b.id=ig.game.network_game.roomId,b.paused=0,ig.game.network_game.gamePaused(b))},draw:function(){this.parent()}});EntityButtonRestart=ig.Entity.extend({size:{x:65,y:60},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/back-refresh.png",
65,60),small:!1,big:!1,scalex:1,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle;this.zIndex=12E3;this.casualplayPanel=new CasualplayPanel(this)},clicked:function(){this.small=!0},released:function(){},over:function(){this.currentAnim=this.anims.over},leave:function(){this.currentAnim=this.anims.idle},update:function(){this.parent();this.small&&0.8<this.scalex?(this.currentAnim=this.anims.click,
this.scalex-=0.008,0.95>=this.scalex&&(this.small=!1,this.big=!0)):this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,this.currentAnim=this.anims.over,ig.soundHandler.sfxPlayer.play("button"),ig.game.popup="",this.playGame()))},playGame:function(){ig.game.loadLevel(LevelMainMenu);this.control=ig.game.getEntitiesByType(EntityHomeControl)[0];this.control.playGame(ig.game.mode)},draw:function(){this.parent()}});EntityHomeOptionOk=ig.Entity.extend({size:{x:65,y:60},
type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_ok.png",65,60),small:!1,big:!1,scalex:1,fontsize:"30px bebasneue , Impact, Charcoal, sans-serif",fontypos:38,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle;this.zIndex=1200;this.setScale(1.1,1.1)},ready:function(){this.homepage=ig.game.getEntitiesByType(EntityHomePage)[0]},clicked:function(){this.small=
!0},released:function(){},over:function(){this.currentAnim=this.anims.over;this.fontsize="34px bebasneue , Impact, Charcoal, sans-serif";this.fontypos=34},leave:function(){this.currentAnim=this.anims.idle;this.fontsize="30px bebasneue , Impact, Charcoal, sans-serif";this.fontypos=36},update:function(){this.parent();this.small&&0.8<this.scalex?(this.currentAnim=this.anims.click,this.fontsize="28px bebasneue , Impact, Charcoal, sans-serif",this.fontypos=42,this.scalex-=0.008,0.95>=this.scalex&&(this.small=
!1,this.big=!0)):this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,this.currentAnim=this.anims.over,this.fontsize="34px bebasneue , Impact, Charcoal, sans-serif",this.fontypos=36,this.homepage.options.hide(),ig.soundHandler.sfxPlayer.play("button")))},draw:function(){this.parent();var b=ig.system.context;b.font=this.fontsize;b.textAlign="center";b.fillStyle="#FFFFFF";b.fillText("OK",this.pos.x+35,this.pos.y+this.fontypos)}})});ig.baked=!0;
ig.module("game.entities.trivia.question-board").requires("game.entities.trivia.check-button","game.entities.trivia.getready","game.entities.trivia.result","game.entities.trivia.button","impact.entity").defines(function(){EntityQuestionBoard=ig.Entity.extend({size:{x:480,y:640},type:ig.Entity.TYPE.B,answer:null,correctAnswer:null,tmp_t:0,time:10,start:!1,correct:0,correct_opp:0,questionShow:[],end:!1,resultStatus:!0,qbgposx:-480,qposx:730,chk1y:650,chk2y:650,chk3y:650,chk4y:650,center:240,barx1:-50,
barx2:500,questionbg:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/questionbg.png"),optionseq:[0,0,0,0],count:0,oppstatus:!1,playerstatus:!1,autonext:!0,arrayred:[],arraygreen:[],timelength:0,maxtimelength:1E3,ratio:0,waitCount:0,questionposy:0,round:0,roundTime:null,roundPause:!1,alert:null,botquestion:[],init:function(b,c,d){this.parent(b,c,d);this.setupQuestion();this.ready=ig.game.spawnEntity(EntityGetReady,240,350,{zIndex:this.zIndex-9,name:"ready"});this.bg=ig.game.spawnEntity(EntityBackground,
0,0,{zIndex:this.zIndex-10});this.tcountdown=[];this.firstq=this.tgo=null;"bot"==ig.game.mode&&this.botReady()},botReady:function(){y=0;this.tcountdown=[];for(var b=1;3>=b;b++)this.tcountdown.push(setTimeout(function(){var b={};b.msg=y;this.ready.setCountDown(b);y+=1}.bind(this),1E3*b));this.tgo=setTimeout(function(){this.ready.setCountDown({msg:"go"})}.bind(this),4E3);this.firstq=setTimeout(function(){this.nextQuestion()}.bind(this),5E3)},clearCountdown:function(){for(var b=0;2>=b;b++)this.tcountdown[b]&&
clearTimeout(this.tcountdown[b]);clearTimeout(this.tgo);clearTimeout(this.firstq)},setupQuestion:function(){this.botquestion=this.randomQuestion();this.question=ig.game.spawnEntity(EntityText,this.qposx,240,{name:"question",text:"",fontColor:"#483934",fontStyle:"bebasneue",fontSize:24,textAlign:"center",zIndex:this.zIndex+10,textSpace:25});this.check1=ig.game.spawnEntity(EntityCheckButton,70,-100,{zIndex:this.zIndex+10,name:"check1",number:1,textanswer:"",maincolor:"rgba(81,70,66,1)",board:this});
this.option1=ig.game.spawnEntity(EntityText,this.center,-100,{name:"option",text:"",fontColor:"#FFFFFF",fontStyle:"bebasneue",fontSize:22,textAlign:"center",zIndex:this.zIndex+12});this.check2=ig.game.spawnEntity(EntityCheckButton,70,-100,{zIndex:this.zIndex+10,name:"check2",number:2,textanswer:"",maincolor:"rgba(81,70,66,1)",board:this});this.option2=ig.game.spawnEntity(EntityText,this.center,-100,{name:"option",text:"",fontColor:"#FFFFFF",fontStyle:"bebasneue",fontSize:22,textAlign:"center",zIndex:this.zIndex+
12});this.check3=ig.game.spawnEntity(EntityCheckButton,70,-100,{zIndex:this.zIndex+10,name:"check3",textanswer:"",number:3,maincolor:"rgba(81,70,66,1)",board:this});this.option3=ig.game.spawnEntity(EntityText,this.center,-100,{name:"option",text:"",fontColor:"#FFFFFF",fontStyle:"bebasneue",fontSize:22,textAlign:"center",zIndex:this.zIndex+12});this.check4=ig.game.spawnEntity(EntityCheckButton,70,-100,{zIndex:this.zIndex+10,name:"check4",number:4,textanswer:"",maincolor:"rgba(81,70,66,1)",board:this});
this.option4=ig.game.spawnEntity(EntityText,this.center,-100,{name:"option",text:"",fontColor:"#FFFFFF",fontStyle:"bebasneue",fontSize:22,textAlign:"center",zIndex:this.zIndex+12});this.countdown=ig.game.spawnEntity(EntityText,240,50,{name:"option",text:"",fontColor:"#FFFFFF",fontStyle:"bebasneue",fontSize:20,textAlign:"center",zIndex:this.zIndex+10,textStroke:"#111111",textStrokeSize:1});this.state=new shared_game.GameState},update:function(){this.parent();if(this.start&&!this.end&&!this.roundPause){this.question.pos.x=
this.qposx;this.question.pos.y=240+this.questionposy;this.check1.pos.y=this.chk1y;this.option1.pos.y=this.check1.pos.y+17;this.check2.pos.y=this.chk2y;this.option2.pos.y=this.check2.pos.y+17;this.check3.pos.y=this.chk3y;this.option3.pos.y=this.check3.pos.y+17;this.check4.pos.y=this.chk4y;this.option4.pos.y=this.check4.pos.y+17;this.question.text=_STRINGS.Question[ig.game.questionIndex-1].q;this.option1.text=_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[0]];this.option2.text=_STRINGS.Question[ig.game.questionIndex-
1].o[this.optionseq[1]];this.option3.text=_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[2]];this.option4.text=_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[3]];if("bot"==ig.game.mode)var b=Date.now();else b=ig.game.network_game.getServerTime()-this.state.playerTurnTime,b=this.state.resultsDuration-b;b=Math.ceil(b/1E3);this.tmp_t!=b&&(this.time-=1,7==this.time&&"bot"==ig.game.mode&&(this.botAnswer(),this.oppstatus=!0),0>this.time&&(this.time=10,this.nextQuestion(),this.oppstatus=
!1));this.tmp_t=b;this.oppstatus&&(this.playerstatus&&this.autonext)&&(this.waitCount+=1,80<this.waitCount&&(this.autonext=!1,this.nextQuestion()))}},nextQuestion:function(){this.waitCount=0;this.control=ig.game.getEntitiesByType(EntityGameControl)[0];var b=this.control.client_game.findPlayerById(ig.game.network_game.playerId);if(b&&0==b.id){if("bot"==ig.game.mode)b={},b.msg=this.botquestion[this.count+1],b.qindex=this.randomLoop(),b.count=this.count+1,this.setQuestionIndex(b);else{var c={};c.playerId=
b.id;c.id=ig.game.network_game.roomId;c.count=this.count;ig.game.network_game.nextQuestion(c)}this.playerstatus=this.oppstatus=!1;this.autonext=!0}},randomLoop:function(){for(var b=[];;){for(var c=Math.floor(4*Math.random())+1,d=!1,e=0;3>=e&&e<=b.length-1;e++)b[e]==c&&(d=!0);d||b.push(c);if(4==b.length)return b}},randomQuestion:function(){for(var b=[];;){for(var c=Math.floor(100*Math.random())+1,d=!1,e=0;99>=e&&e<=b.length-1;e++)b[e]==c&&(d=!0);d||b.push(c);if(100==b.length)return b}},botAnswer:function(){for(var b=
_STRINGS.Question[ig.game.questionIndex-1].a,c=[],d=1;4>=d;d++)if(_STRINGS.Question[ig.game.questionIndex-1].o[d]==b)for(var e=1;20>=e;e++)c.push(_STRINGS.Question[ig.game.questionIndex-1].o[d]);else for(e=1;2>=e;e++)c.push(_STRINGS.Question[ig.game.questionIndex-1].o[d]);d=Math.floor(26*Math.random());c[d]==b?(c=1,b=!0):(c=0,b=!1);this.control=ig.game.getEntitiesByType(EntityGameControl)[0];for(d=0;1>=d;d++)ig.game.network_game.playerId!=d?(e=this.control.client_game.findPlayerById(d),e.score+=c,
e.score_opp=this.correct,e.tweenScore(),e.playerAva(b),e.answer(b)):(e=this.control.client_game.findPlayerById(d),e.score=this.correct,e.score_opp+=c,e.tweenScore())},clearBoard:function(){this.question.text="";this.option1.text="";this.option2.text="";this.option3.text="";this.option4.text="";this.countdown.text=""},lockButton:function(){for(var b=1;4>=b;b++)ig.game.getEntityByName("check"+b).lock=!0},unlockButton:function(){for(var b=1;4>=b;b++)ig.game.getEntityByName("check"+b).lock=!1},checkPlayerAnswer:function(b){this.control=
ig.game.getEntitiesByType(EntityGameControl)[0];_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[b-1]]==_STRINGS.Question[ig.game.questionIndex-1].a?(this.playerstatus=!0,this.lockButton(),this.setGreenColor(b),this.correct<ig.game.roundQuestionCount&&(this.correct+=1,b=this.control.client_game.findPlayerById(ig.game.network_game.playerId),b.score=this.correct,b.tweenScore(),b.playerAva(!0),b.answer(!0))):(this.playerstatus=!0,this.lockButton(),this.setRedColor(b),b=this.control.client_game.findPlayerById(ig.game.network_game.playerId),
b.playerAva(!1),b.answer(!1))},checkAnswer:function(b){this.control=ig.game.getEntitiesByType(EntityGameControl)[0];if(!(_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[b.msg-1]]==_STRINGS.Question[ig.game.questionIndex-1].a&&b.from==ig.game.network_game.playerId))if(_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[b.msg-1]]==_STRINGS.Question[ig.game.questionIndex-1].a&&b.from!=ig.game.network_game.playerId){if(this.correct_opp<ig.game.roundQuestionCount){this.correct_opp+=
1;this.oppstatus=!0;b=this.control.client_game.showAllPlayer();for(var c=0;c<=b.length-1;c++)if(ig.game.network_game.playerId!=b[c].id){var d=this.control.client_game.findPlayerById(b[c].id);d.score=this.correct_opp;d.score_opp=this.correct;d.tweenScore();d.playerAva(!0);d.answer(!0)}else d=this.control.client_game.findPlayerById(b[c].id),d.score=this.correct,d.score_opp=this.correct_opp}}else!(_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[b.msg-1]]!=_STRINGS.Question[ig.game.questionIndex-
1].a&&b.from==ig.game.network_game.playerId)&&(_STRINGS.Question[ig.game.questionIndex-1].o[this.optionseq[b.msg-1]]!=_STRINGS.Question[ig.game.questionIndex-1].a&&b.from!=ig.game.network_game.playerId)&&(this.oppstatus=!0,d=this.control.client_game.findPlayerById(b.from),d.opponentAva(!1),d.answer(!1))},setGreenColor:function(b){ig.soundHandler.sfxPlayer.play("correct");for(var c=1,d=1;5>=d;d++)this.arraygreen.push(setTimeout(function(){eval(0==c%2?"this.check"+b+".maincolor='rgba(81,70,66,1)'":
"this.check"+b+".maincolor='rgba(32,211,115,1)'");c+=1}.bind(this),100*d))},setGreyColor:function(b){eval("this.check"+b+".maincolor='rgba(100,100,100,1)'");this.lockButton()},setRedColor:function(b){ig.soundHandler.sfxPlayer.play("wrong");for(var c=1,d=1;5>=d;d++)this.arraygreen.push(setTimeout(function(){eval(0==c%2?"this.check"+b+".maincolor='rgba(81,70,66,1)'":"this.check"+b+".maincolor='rgba(210,58,55,1)'");c+=1}.bind(this),100*d))},checkQuestionRow:function(){var b=_STRINGS.Question[ig.game.questionIndex-
1].q.split("<br>");1==b.length?this.questionposy=30:2==b.length?this.questionposy=15:3==b.length?this.questionposy=-5:4==b.length&&(this.questionposy=-15)},setQuestionIndex:function(b){this.qindex=[];this.optionseq=b.qindex;this.count=b.count;this.chk4y=this.chk3y=this.chk2y=this.chk1y=650;this.round+=1;this.countdown.text="Round "+this.round+"";this.countdown.fontSize=22;this.countdown.tween({fontSize:34},0.1,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){this.countdown.tween({fontSize:22},
0.2,{easing:ig.Tween.Easing.Quadratic.EaseIn,onComplete:function(){}.bind(this)}).start()}.bind(this)}).start();this.timelength=this.maxtimelength;this.ratio=460/this.timelength;for(var c=0;c<=this.arraygreen.length-1;c++)clearTimeout(this.arraygreen[c]);for(c=0;c<=this.arrayred.length-1;c++)clearTimeout(this.arrayred[c]);this.arraygreen=[];this.arrayred=[];this.check1.maincolor="rgba(81,70,66,1)";this.check2.maincolor="rgba(81,70,66,1)";this.check3.maincolor="rgba(81,70,66,1)";this.check4.maincolor=
"rgba(81,70,66,1)";this.unlockButton();this.questionShow.push(b.msg);this.questionShow.length>ig.game.roundQuestionCount&&(this.end=!0,this.clearBoard(),this.resultStatus&&""==ig.game.popup&&(this.showResult(),this.resultStatus=!1),this.check1.pos.y=this.chk1y,this.check2.pos.y=this.chk2y,this.check3.pos.y=this.chk3y,this.check4.pos.y=this.chk4y);ig.game.questionIndex=b.msg;this.checkQuestionRow();this.start=!0;this.time=10;this.uncheckAll();this.end||(this.tween({timelength:0},10,{easing:ig.Tween.Easing.Linear.EaseNone,
onComplete:function(){}.bind(this)}).start(),this.tween({qbgposx:-500,qposx:740,barx1:20,barx2:440},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.qbgposx=500;this.qposx=-250;this.tween({qbgposx:ig.system.width/2-this.questionbg.width/2,qposx:ig.system.width/2-5,chk1y:380},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.check1.maincolor="rgba(81,70,66,1)"}.bind(this)}).start();this.tween({chk2y:430},0.6,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.check2.maincolor=
"rgba(81,70,66,1)"}.bind(this)}).start();this.tween({chk3y:480},0.7,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.check3.maincolor="rgba(81,70,66,1)"}.bind(this)}).start();this.tween({chk4y:530},0.8,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.check4.maincolor="rgba(81,70,66,1)"}.bind(this)}).start()}.bind(this)}).start())},uncheckAll:function(){for(var b=1;4>=b;b++){var c=ig.game.getEntityByName("check"+b);c.currentAnim=c.anims.uncheck}},showResult:function(){this.result=
ig.game.spawnEntity(EntityResult,60,-400,{zIndex:this.zIndex+1E3});this.result.tween({pos:{y:70}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){this.result.startCounting()}.bind(this)}).start()},setPauseStatus:function(b){"multiplayer"==ig.game.mode&ig.game.network_game.playerId!=b.sender&&(1==b.paused?(ig.game.popup="paused",this.alert=ig.game.spawnEntity(EntityPausedAlert,0,0),this.pauseTweens(),this.roundPause=!0):(ig.game.popup="",this.resumeTweens(),this.roundPause=!1,this.alert.home.kill(),
this.alert.kill()))},draw:function(){this.parent();this.questionbg.draw(this.qbgposx,170);var b=ig.system.context;b.save();b.fillStyle="rgba(255,255,255,0.85)";this.roundRect(b,this.barx1,200,20,400,10,!0,!0);b.restore();b.save();b.fillStyle="rgba(255,255,255,0.85)";this.roundRect(b,this.barx2,200,20,400,10,!0,!0);b.restore();var c=this.timelength*this.ratio,d=(460-c)/2;0<c&&!this.end&&(b.save(),b.fillStyle="rgba(255,255,255,0.85)",this.roundRect(b,10,5,460,20,2,!0,!0),b.restore(),b.save(),b.fillStyle=
"rgba(32,211,115,1)",this.roundRect(b,d+10,5,c,20,2,!0,!1),b.restore())},roundRect:function(b,c,d,e,f,g,m,l){"undefined"==typeof l&&(l=!0);"undefined"===typeof g&&(g=5);b.beginPath();b.moveTo(c+g,d);b.lineTo(c+e-g,d);b.quadraticCurveTo(c+e,d,c+e,d+g);b.lineTo(c+e,d+f-g);b.quadraticCurveTo(c+e,d+f,c+e-g,d+f);b.lineTo(c+g,d+f);b.quadraticCurveTo(c,d+f,c,d+f-g);b.lineTo(c,d+g);b.quadraticCurveTo(c,d,c+g,d);b.closePath();l&&b.stroke();m&&b.fill()}})});ig.baked=!0;
ig.module("game.entities.trivia.avatar-splash").requires("impact.entity").defines(function(){EntityGoodWrong=ig.Entity.extend({size:{x:80,y:80},type:ig.Entity.TYPE.A,images:[new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/good-answer.png",80,80),new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/wrong-answer.png",80,80)],scalex:1,calpha:1,init:function(b,c,d){this.parent(b,c,d);this.animSheet=this.correct?this.images[0]:this.images[1];this.addAnim("idle",
1,[0]);this.currentAnim=this.anims.idle;this.tween({calpha:0},1.5,{easing:ig.Tween.Easing.Quartic.EaseIn,onComplete:function(){this.kill()}.bind(this)}).start()},update:function(){this.parent();this.setScale(this.scalex,this.scalex);this.currentAnim.alpha=this.calpha},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.game-control").requires("impact.entity","plugins.fade-transition","plugins.button","game.classes.options-panel","game.classes.chatbox","game.classes.callout","game.classes.client-game","game.entities.trivia.question-board","game.entities.trivia.avatar-splash").defines(function(){EntityGameControl=ig.Entity.extend({rankingImage:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/gui/buttons/button_long.png"),bgOffset:{x:0,y:0},bgScale:1,options:null,optionsButton:null,
chatbox:null,fadeTransition:null,pingInterval:5,pingTime:0,client_game:null,preventClicks:!1,callouts:[],zIndex:1E3,init:function(b,c,d){this.parent(b,c,d);ig.global.wm||(this.qboard=ig.game.spawnEntity(EntityQuestionBoard,0,0,{zIndex:this.zIndex-500}),this.initButtons(),this.setupGame(),ig.global.control=this,ig.game.network_game.pingSendTime=Date.now(),ig.game.network_game.pingReplyPending=!1,this.startQuestion())},startQuestion:function(){var b=ig.game.roundQuestionCount,c={},d=this.client_game.findPlayerById(ig.game.network_game.playerId);
d&&(c.from=d.id,c.msg=b,c.roomId=ig.game.network_game.roomId,ig.game.network_game.startQuestion(c))},ready:function(){ig.global.wm||(this.fadeTransition=new ig.FadeTransition,this.fadeTransition.startFadeinTransition(),this.fadeTransition.transitionEndFunction=this.transitionEnded.bind(this))},initButtons:function(){this.options=new OptionsPanel(this);this.options.hasMainmenuButton=!0;this.options.hasTutorialButton=!1;this.options.ready();this.settingsbutton=ig.game.spawnEntity(EntityButtonSettings,
ig.system.width-80,20)},draw:function(){this.client_game&&this.client_game.draw();for(var b=0,c=this.callouts.length;b<c;b++){var d=this.callouts[b];d&&d.draw()}this.options&&this.options.draw();this.fadeTransition&&this.fadeTransition.draw()},update:function(){this.options&&this.options.update();this.fadeTransition&&this.fadeTransition.update();if(ig.game.network_game&&ig.game.network_game.pingReplyPending&&Date.now()-ig.game.network_game.pingSendTime>=ig.game.network_game.pingTimeout)console.log("disconnecting: did not receive ping within "+
ig.game.pingTimeout+"ms"),this.returnToMainMenu();else{ig.game.network_game&&(this.pingTime+=ig.system.tick,this.pingTime>this.pingInterval&&(this.pingTime%=this.pingInterval,ig.game.network_game.pingServer(function(){}.bind(this),function(){console.log("disconnecting: did not receive ping within "+this.pingInterval+"s");this.returnToMainMenu()}.bind(this))));this.client_game&&this.client_game.update();for(var b=0,c=this.callouts.length;b<c;b++){var d=this.callouts[b];d&&d.update()}}},returnToMainMenu:function(){ig.input.clearPressed();
this.fadeTransition&&(this.fadeTransition.startFadeoutTransition(),this.fadeTransition.transitionEndFunction=function(){ig.game.director.jumpTo(LevelHome)}.bind(this));ig.game.network_game.leaveGame()},showOptions:function(){this.options.show();this.preventClicks=!0;this.options.hideDoneCallback=function(){this.options.hideDoneCallback=null;this.preventClicks=!1}.bind(this)},transitionEnded:function(){},setupGame:function(){if(!ig.game.network_game||!ig.game.network_game.initialGameState)ig.game.resetApp(),
console.log("initialGameState not found");else if(this.playerId=ig.game.network_game.playerId,this.client_game=new ClientGame(this),this.client_game.setupWithGameState(ig.game.network_game.initialGameState),this.verifyGameIntegrity()){for(ig.game.network_game.gameStateUpdateCallback=this.onGameStateUpdate.bind(this);0<ig.game.network_game.unhandledUpdateQueue.length;){var b=ig.game.network_game.unhandledUpdateQueue.shift();this.onGameStateUpdate(b)}ig.game.network_game.sendPlayerReady()}else ig.game.network_game.leaveGame()},
gameMeta:function(b){b.players&&(b.players.length>this.client_game.playerList.length&&b.gameState)&&(this.client_game.state.importData(b.gameState),this.client_game.syncPlayers())},gameChat:function(b){b&&b.msg&&this.chatbox&&this.chatbox.addMessage(b.from,b.msg)},onPause:function(){},onResume:function(){this.client_game.syncPlayers()},getInputPos:function(){return ig.game.io.getClickPos()},aabbCheck:function(b,c){return b.x<=c.x+c.w&&b.y<=c.y+c.h&&b.x+b.w>=c.x&&b.y+b.h>=c.y},easeOutSine:function(b,
c){return c*Math.sin(b*(Math.PI/2))},bitwiseRound:function(b){return 0.5+b<<0},onGameStateUpdate:function(b){for(var c=0,d=b.eventList.length;c<d;c++){var e=b.eventList[c];if(e){if(this.client_game.state.phase==shared_game.PhaseEnum.PHASE_MATCH_RESULTS&&(console.log("PHASE_MATCH_RESULTS"),e.type==shared_game.EventType.PHASE_TRANSITION&&e.info.phase==shared_game.PhaseEnum.PHASE_MATCH_ANNOUNCE)){for(var f=0,c=0,d=this.client_game.state.boardState.length;c<d;c++)if(-1!=this.client_game.state.boardState[c]){f+=
1;break}0<f&&ig.soundHandler.sfxPlayer.soundList.reset&&ig.soundHandler.sfxPlayer.play("reset")}if(e.type==shared_game.EventType.PHASE_TRANSITION&&(e.info.phase==shared_game.PhaseEnum.PHASE_FLASHJOIN||this.client_game.state.phase==shared_game.PhaseEnum.PHASE_PLAYER_LEFT)){c=f=0;for(d=this.client_game.state.boardState.length;c<d;c++)if(-1!=this.client_game.state.boardState[c]){f+=1;break}0<f&&ig.soundHandler.sfxPlayer.soundList.reset&&ig.soundHandler.sfxPlayer.play("reset")}this.client_game.applyEvent(e);
e.info.gamestate&&this.client_game.syncPlayers();if(e.type==shared_game.EventType.PHASE_TRANSITION)if(this.client_game.state.phase==shared_game.PhaseEnum.PHASE_INIT||this.client_game.state.phase==shared_game.PhaseEnum.PHASE_FLASHJOIN){this.client_game.syncPlayers();c=0;for(d=this.client_game.playerList.length;c<d;c++)f=this.client_game.playerList[c],f.score=0}else{if(this.client_game.state.phase==shared_game.PhaseEnum.PHASE_MATCH_RESULTS){console.log("PHASE_MATCH_RESULTS");this.client_game.last_winner=
e.info.winner;this.client_game.last_winner_name="";this.client_game.last_winner_id=-1;for(var f=0,g=this.client_game.state.players.length;f<g;f++)if(e=this.client_game.state.players[f],e.symbolId==this.client_game.last_winner){this.client_game.last_winner_name=e.name;this.client_game.last_winner_id=e.id;break}if(-1!=this.client_game.last_winner_id){if(f=this.client_game.findPlayerById(this.client_game.last_winner_id))f.score+=1,this.client_game.last_winner_id==ig.game.network_game.playerId?ig.soundHandler.sfxPlayer.soundList.win&&
ig.soundHandler.sfxPlayer.play("win"):ig.soundHandler.sfxPlayer.soundList.lost&&ig.soundHandler.sfxPlayer.play("lost")}else ig.soundHandler.sfxPlayer.soundList.tied&&ig.soundHandler.sfxPlayer.play("tied")}}else if(e.type==shared_game.EventType.PLAYER_DECISION){if(f=this.client_game.findPlayerById(e.info.playerId))e=this.client_game.state.findPlayerById(f.id),f.shared_obj=e,f.id!=ig.game.network_game.playerId&&ig.soundHandler.sfxPlayer.soundList.placemarker&&ig.soundHandler.sfxPlayer.play("placemarker")}else e.type!=
shared_game.EventType.MATCH_RESULT&&e.type==shared_game.EventType.PLAYER_LEAVE&&(this.client_game.syncPlayers(),e.info.playerId==ig.game.network_game.playerId&&(ig.input.clearPressed(),this.fadeTransition&&(this.fadeTransition.startFadeoutTransition(),this.fadeTransition.transitionEndFunction=function(){ig.game.director.jumpTo(LevelHome)}.bind(this))))}}return!0},resetFlags:function(){this.client_game.resetFlags()},verifyGameIntegrity:function(){return!0},addCallout:function(b,c){if(b&&c&&!isNaN(c.x)&&
!isNaN(c.y)){var d=new Callout(this,b);d.pos.x=c.x;d.pos.y=c.y;d.endCallback=this.calloutEnded.bind(this);this.callouts.push(d);return d}},calloutEnded:function(b){b=this.callouts.indexOf(b);0<=b&&this.callouts.splice(b,1)}})});ig.baked=!0;
ig.module("game.entities.text").requires("impact.entity").defines(function(){EntityText=ig.Entity.extend({text:"",textTmp:0,size:{x:5,y:5},_wmDrawBox:!0,_wmBoxColor:"rgba(255, 255, 255, 0.5)",newText:[],idxText:0,textStatus:!0,type:ig.Entity.TYPE.B,init:function(b,c,d){this.parent(b,c,d);this.textTmp=this.text;this.timer=new ig.Timer;"undefined"==typeof wm&&d&&(this.name=d.name,this.useLanguageFile=d.useLanguageFile,this.languageFileSectionName=d.languageFileSectionName,this.text=eval(this.useLanguageFile)?
ig.game.language.selected[this.languageFileSectionName][d.text]:d.text,this.fontSize=d.fontSize,this.fontSize||(this.fontSize="24"),this.fontStyle=d.fontStyle,this.fontStyle||(this.fontStyle="Arial"),this.fontWeight=d.fontWeight,this.fontWeight||(this.fontWeight=""),this.fontColor=d.fontColor,this.fontColor||(this.fontColor="#fff"),this.textAlign=d.textAlign,this.textAlign||(this.textAlign="left"),this.textSpace=d.textSpace,this.textSpace||(this.textSpace=22),this.textBorder=d.textBorder,this.textStroke=
d.textStroke,this.textStroke||(this.textStroke=""),this.textStrokeSize=d.textStrokeSize,this.textStrokeSize||(this.textStrokeSize=8),this.backgroundBorderColor=d.backgroundBorderColor,this.backgroundColor=d.backgroundColor,this.backgroundHeight=d.backgroundHeight)},update:function(){this.parent();if(this.textStatus){this.newText=this.text.split("<br>");this.idxText=this.newText.length-1;for(x=0;x<=this.idxText;x++){var b=this.newText[x];"undefined"!=typeof b&&(b=b.replace("<br>"," "),b=b.replace(">",
" "),b=b.replace("r>"," "),b=b.replace("br>"," "),b=b.replace("<"," "),b=b.replace("<b"," "),b=b.replace("<br"," "),"br"==b.substr(b.length-2,2)&&(b=b.substr(0,b.length-2),this.newText[x]=b,"b"==b.substr(b.length-2,1)&&(b=b.substr(0,b.length-2),this.newText[x]=b)))}this.textStatus=!1}this.textTmp!=this.text&&(this.textStatus=!0,this.textTmp=this.text)},draw:function(){this.parent();if("undefined"==typeof wm)for(i=0;i<=this.idxText;i++){var b=this.newText[i];if("undefined"!=typeof b){this.timer.tick();
b=b.replace("<br>"," ");b=b.replace("<"," ");b=b.replace("<b"," ");b=b.replace("<br"," ");b=b.replace(">"," ");b=b.replace("r>"," ");b=b.replace("br>"," ");"b"==b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1));this.textBorder&&(ig.system.context.fillStyle=this.textBorder,ig.system.context.textAlign=this.textAlign,ig.system.context.font=this.fontWeight+" "+this.fontSize+"px "+this.fontStyle,ig.system.context.fillText(b,this.pos.x+1,this.pos.y+1+i*this.textSpace),ig.system.context.fillText(b,this.pos.x-
1,this.pos.y+1+i*this.textSpace),ig.system.context.fillText(b,this.pos.x+1,this.pos.y-1+i*this.textSpace),ig.system.context.fillText(b,this.pos.x-1,this.pos.y-1+i*this.textSpace));ig.system.context.fillStyle=this.fontColor;ig.system.context.textAlign=this.textAlign;ig.system.context.font=this.fontWeight+" "+this.fontSize+"px "+this.fontStyle;""!=this.textStroke&&(ig.system.context.strokeStyle=this.textStroke,ig.system.context.lineWidth=this.textStrokeSize,ig.system.context.strokeText(b,this.pos.x,
this.pos.y+i*this.textSpace));var c=this.pos.y+i*this.textSpace;ig.system.context.fillText(b,this.pos.x,c);this.underLine&&(ig.system.context.strokeStyle=this.fontColor,ig.system.context.beginPath(),ig.system.context.moveTo(this.pos.x-80,c+5),ig.system.context.lineTo(this.pos.x+this.underLineX,c+5),ig.system.context.stroke());this.timer.tick()}}}})});ig.baked=!0;
ig.module("game.levels.game").requires("impact.image","game.entities.game-control","game.entities.text").defines(function(){LevelGame={entities:[{type:"EntityPointer",x:0,y:0,settings:{zIndex:1}},{type:"EntityGameControl",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.entities.trivia.background").requires("impact.entity").defines(function(){EntityBackground=ig.Entity.extend({size:{x:480,y:640},type:ig.Entity.TYPE.B,letsquiz:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/trivia/letsquiz.png"),init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.globalAlpha=1;b.fillStyle=ig.game.bgcolor;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();"#44929f"==
ig.game.bgcolor&&this.letsquiz.draw(130,80)}});EntityLogo=ig.Entity.extend({size:{x:10,y:10},type:ig.Entity.TYPE.B,logo:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/logo.png"),chr1:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/chr1.png"),chr2:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/chr2.png"),chr3:new ig.Image("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/chr3.png"),init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},
draw:function(){this.parent();this.chr2.draw(300,220);this.logo.draw(100,10);this.chr3.draw(70,230);this.chr1.draw(160,250)}});EntityTemp=ig.Entity.extend({size:{x:10,y:10},type:ig.Entity.TYPE.B,scoreTween:0,score:0,init:function(b,c,d){this.parent(b,c,d)},tweenScore:function(){this.tween({scoreTween:this.score},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start()},update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.levels.mainmenu").requires("impact.image","game.entities.home-control","game.entities.trivia.background","game.entities.trivia.button","game.entities.pointer").defines(function(){LevelMainMenu={entities:[{type:"EntityPointer",x:0,y:0,settings:{zIndex:0}},{type:"EntityBackground",x:0,y:0},{type:"EntityHomeControl",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.entities.trivia.homepage").requires("impact.entity","plugins.fade-transition","plugins.button","game.classes.options-panel").defines(function(){EntityHomePage=ig.Entity.extend({size:{x:10,y:10},type:ig.Entity.TYPE.B,fadeTransition:null,yplay:650,ysetting:650,ymoregame:650,init:function(b,c,d){this.parent(b,c,d);_SETTINGS.MoreGames.Enabled&&(this.moregames=ig.game.spawnEntity(EntityButtonMoreGames,ig.system.width/2-80,530),this.moregames.pos.y=this.ymoregame);this.play=ig.game.spawnEntity(EntityButtonHomePlay,
ig.system.width/2-80,this.yplay);this.setting=ig.game.spawnEntity(EntityButtonHomeSetting,ig.system.width/2-80,this.ysetting);this.options=new OptionsPanel(this,"homepage");this.options.hasMainmenuButton=!0;this.options.ready()},ready:function(){ig.soundHandler.bgmPlayer.bgmPlaying||ig.soundHandler.bgmPlayer.play();this.tween({yplay:430},0.4,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start();this.tween({ysetting:480},0.6,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start();
this.tween({ymoregame:530},0.8,{easing:ig.Tween.Easing.Cubic.EaseOut,onComplete:function(){}.bind(this)}).start()},showOptions:function(){_SETTINGS.MoreGames.Enabled&&this.moregames.hide();this.options.show();this.options.hideDoneCallback=function(){this.options.hideDoneCallback=null;_SETTINGS.MoreGames.Enabled&&this.moregames.show()}.bind(this)},update:function(){this.parent();this.play.pos.y=this.yplay;this.setting.pos.y=this.ysetting;_SETTINGS.MoreGames.Enabled&&(this.moregames.pos.y=this.ymoregame);
this.options&&this.options.update()},draw:function(){this.parent();this.options&&this.options.draw()}});EntityButtonHomePlay=ig.Entity.extend({size:{x:160,y:45},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/button_play.png",160,45),small:!1,big:!1,scalex:1,fontsize:"15px DroidSans,bebasneue , Impact, Charcoal, sans-serif",fontypos:19,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",
1,[2]);this.currentAnim=this.anims.idle},ready:function(){this.homepage=ig.game.getEntitiesByType(EntityHomePage)[0]},clicked:function(){""==ig.game.popup&&(this.small=!0)},released:function(){},over:function(){""==ig.game.popup&&(this.currentAnim=this.anims.over,this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif")},leave:function(){""==ig.game.popup&&(this.currentAnim=this.anims.idle,this.fontsize="15px DroidSans,bebasneue , Impact, Charcoal, sans-serif")},update:function(){this.parent();
""==ig.game.popup&&(this.small&&0.8<this.scalex?(this.currentAnim=this.anims.click,this.fontsize="14px DroidSans,bebasneue , Impact, Charcoal, sans-serif",this.scalex-=0.008,this.fontypos=24,0.95>=this.scalex&&(this.small=!1,this.big=!0)):this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,this.currentAnim=this.anims.over,this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif",this.fontypos=20,ig.soundHandler.sfxPlayer.play("button"),ig.game.bgcolor=
"#44929f",_SETTINGS.MoreGames.Enabled&&this.homepage.moregames.hide(),ig.game.loadLevel(LevelMainMenu))))},draw:function(){this.parent();var b=ig.system.context,c=_STRINGS.UI.Play;b.font=this.fontsize;b.textAlign="center";b.fillStyle="#ee4c26";b.fillText(c,this.pos.x+80,this.pos.y+this.fontypos)}});EntityButtonHomeSetting=ig.Entity.extend({size:{x:160,y:45},type:ig.Entity.TYPE.B,animSheet:new ig.AnimationSheet("../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/game/mainmenu/button_setting.png",160,45),small:!1,
big:!1,scalex:1,fontsize:"15px DroidSans,bebasneue , Impact, Charcoal, sans-serif",fontypos:20,init:function(b,c,d){this.parent(b,c,d);this.addAnim("idle",1,[0]);this.addAnim("over",1,[1]);this.addAnim("click",1,[2]);this.currentAnim=this.anims.idle},ready:function(){this.homepage=ig.game.getEntitiesByType(EntityHomePage)[0]},clicked:function(){""==ig.game.popup&&(this.small=!0)},released:function(){},over:function(){""==ig.game.popup&&(this.currentAnim=this.anims.over,this.fontsize="17px DroidSans,bebasneue , Impact, Charcoal, sans-serif")},
leave:function(){""==ig.game.popup&&(this.currentAnim=this.anims.idle,this.fontsize="15px DroidSans,bebasneue , Impact, Charcoal, sans-serif")},update:function(){this.parent();""==ig.game.popup&&(this.small&&0.8<this.scalex?(this.currentAnim=this.anims.click,this.fontsize="14px DroidSans,bebasneue , Impact, Charcoal, sans-serif",this.scalex-=0.008,this.fontypos=24,0.95>=this.scalex&&(this.small=!1,this.big=!0)):this.big&&1.2>this.scalex&&(this.scalex+=0.008,1<=this.scalex&&(this.big=this.small=!1,
this.currentAnim=this.anims.over,this.fontsize="17px bebasneue , Impact, Charcoal, sans-serif",this.fontypos=20,ig.soundHandler.sfxPlayer.play("button"),this.homepage.showOptions())))},draw:function(){this.parent();var b=ig.system.context,c=_STRINGS.UI.Settings;b.font=this.fontsize;b.textAlign="center";b.fillStyle="#656565";b.fillText(c,this.pos.x+80,this.pos.y+this.fontypos)}})});ig.baked=!0;
ig.module("game.levels.homepage").requires("impact.image","game.entities.button-more-games","game.entities.trivia.background","game.entities.trivia.button","game.entities.pointer","game.entities.trivia.homepage").defines(function(){LevelHomePage={entities:[{type:"EntityPointer",x:0,y:0,settings:{zIndex:0}},{type:"EntityBackground",x:0,y:0},{type:"EntityLogo",x:0,y:0},{type:"EntityHomePage",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.scale","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.mjs-network-client","game.classes.network-game","game.entities.opening-shield",
"game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.entities.trivia.disconnect-popup","game.levels.opening","game.levels.home","game.levels.game","game.levels.mainmenu","game.levels.homepage").defines(function(){this.MJSSOB;MyGame=ig.Game.extend({versionString:"DEV ",io:null,paused:!1,prefix:"trivia-with-friends",doTutorialFlag:!1,firstrun:!0,muted:!1,musicVolume:0.5,sfxVolume:1,defaultPlayerName:"",playerName:"",avatarId:0,avatarOppId:0,
names:"PETER JOHN MICHAEL OSCAR MIKE SIMON TOMMY JESSICA JULIENE ANDREA SUSAN".split(" "),network_client:null,network_game:null,questionIndex:1,mode:null,popup:"",bgcolor:"#c6b35e",roundQuestionCount:10,showDisconnect:!1,gameStart:!1,init:function(){this.setupMarketJsGameCenter();var b=Math.floor(6*Math.random()+1);this.defaultPlayerName=this.names[b];ig.global.addTextSpacing=!1;ig.ua.mobile||(ig.global.addTextSpacing=!0);$(ig.system.canvas.id).mouseleave(function(){ig.input.actions.click=!1;ig.input.locks.click=
!1});$(window).blur(function(){ig.input.actions={};ig.input.locks={}});this.io=new IoManager;this.setupUrlParams=new ig.UrlParameters;server_ip=getQueryVariable("server_ip");this.network_client=new ig.MjsNetworkClient;this.network_game=new NetworkGame(this.network_client);this.finalize()},setupMarketJsGameCenter:function(){if(_SETTINGS)if(_SETTINGS.MarketJSGameCenter){var b=ig.domHandler.getElementByClass("gamecenter-activator");_SETTINGS.MarketJSGameCenter.Activator.Enabled&&_SETTINGS.MarketJSGameCenter.Activator.Position&&
(console.log("MarketJSGameCenter activator settings present ...."),ig.domHandler.css(b,{position:"absolute",left:_SETTINGS.MarketJSGameCenter.Activator.Position.Left,top:_SETTINGS.MarketJSGameCenter.Activator.Position.Top,"z-index":3}));ig.domHandler.show(b)}else console.log("MarketJSGameCenter settings not defined in game settings")},checkRoomUser:function(){},finalize:function(){this.playerName=this.defaultPlayerName;this.setupLocalStorage();var b=ig.domHandler.getElementById("#play");ig.domHandler.attr(b,
"onclick","ig.game.splashClick();");ig.domHandler.show(b);ig.sizeHandler.reorient()},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(b){console.log(b)}},showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},start:function(){this.resetPlayerStats();this.director=new ig.Director(this,[LevelOpening,LevelHomePage,LevelGame]);if(_SETTINGS.Branding.Splash.Enabled)try{this.branding=new ig.BrandingSplash}catch(b){console.log(b),
console.log("Loading original levels ..."),this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel)},drawFPS:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()?null!=this.fpsCounter?this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset());if(ig.game.fps){ig.system.context.fillStyle="#000";ig.system.context.font="14px Impact, Charcoal, sans-serif";ig.system.context.textAlign=
"left";var b=ig.game.versionString;ig.game.network_game&&(b+="("+ig.game.network_game.clientVersion+")");ig.system.context.fillText(b,10,18);ig.system.context.fillStyle="#000";ig.system.context.font="14px Impact, Charcoal, sans-serif";ig.system.context.textAlign="left";ig.system.context.fillText(ig.game.fps,10,32);null!=this.playerId&&(b=Math.floor((ig.game.pingReceiveTime-ig.game.pingSendTime)/2),this.pingReplyPending&&(b=Math.floor((Date.now()-ig.game.pingSendTime)/2)),b+=" ("+ig.game.gameLatencyAverage+
")",ig.system.context.fillStyle="#000",ig.system.context.font="14px Impact, Charcoal, sans-serif",ig.system.context.textAlign="left",ig.system.context.fillText(b,10,48))}},endGame:function(){console.log("End game");ig.soundHandler.bgmPlayer.stop();ig.apiHandler.run("MJSEnd")},resetPlayerStats:function(){ig.log("resetting player stats ...");this.playerStats={id:this.playerStats?this.playerStats.id:null}},splashClick:function(){var b=ig.domHandler.getElementById("#play");ig.domHandler.hide(b);ig.apiHandler.run("MJSFooter");
ig.apiHandler.run("MJSHeader");ig.game.start()},pause:function(){},resume:function(){},showOverlay:function(b){for(var c=0,d=b.length;c<d;c++)$("#"+b[c])&&$("#"+b[c]).show(),document.getElementById(b[c])&&(document.getElementById(b[c]).style.visibility="visible")},hideOverlay:function(b){for(var c=0,d=b.length;c<d;c++)$("#"+b[c])&&$("#"+b[c]).hide(),document.getElementById(b[c])&&(document.getElementById(b[c]).style.visibility="hidden")},update:function(){this.parent();if(this.showDisconnect&&this.gameStart){this.popup=
"";this.showDisconnect=!1;var b=ig.game.spawnEntity(EntityDisconnectPopup,0,0);setTimeout(function(){ig.game.popup="";ig.game.loadLevel(LevelHomePage);ig.game.resetApp();b.kill()}.bind(this),2E3)}this.paused?this.updateWhilePaused():ig.ua.mobile&&ig.soundHandler&&ig.soundHandler.forceLoopBGM()},updateWhilePaused:function(){for(var b=0,c=this.entities.length;b<c;b++)this.entities[b].ignorePause&&this.entities[b].update()},draw:function(){this.parent();this.dctf()},dctf:function(){this.COPYRIGHT},drawDebug:function(){if(!ig.global.wm&&
(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=0.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(var b=0,c=this.debug.length;b<c;b++)ig.system.context.font="10px Arial",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+b+": "+this.debug[b],10,50+10*b)},debugCL:function(b){this.debug?(50>this.debug.length||
this.debug.splice(0,1),this.debug.push(b),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(b));console.log(b)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=this.viewDebug?!1:!0)},showDebug:function(){console.log("showing debug menu ...");
ig.Entity._debugShowBoxes=!0;ig.domHandler.show(ig.domHandler.getElementByClass("ig_debug"))},hideDebug:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!1;ig.domHandler.hide(ig.domHandler.getElementByClass("ig_debug"))},setupLocalStorage:function(){this.storage=ig.game.io.storage;this.getPlayerStats();this.savePlayerStats()},savePlayerStats:function(){null!=this.storage&&(this.storage.set(this.prefix+".musicVolume",this.musicVolume),this.storage.set(this.prefix+".sfxVolume",
this.sfxVolume),this.storage.set(this.prefix+".muted",this.muted),this.storage.set(this.prefix+".firstrun",this.firstrun),this.storage.set(this.prefix+".playerName",this.playerName),this.storage.set(this.prefix+".playerAvatarId",this.avatarId))},getPlayerStats:function(){ig.ua.mobile&&(this.musicVolume=0.25);if(null==this.storage)ig.soundHandler.bgmPlayer.volume(this.musicVolume),ig.soundHandler.sfxPlayer.volume(this.sfxVolume);else{var b=this.storage.get(this.prefix+".musicVolume");null!=b&&(this.musicVolume=
b,ig.ua.mobile&&0.25<this.musicVolume&&(this.musicVolume=0.25));ig.soundHandler.bgmPlayer.volume(this.musicVolume);b=this.storage.get(this.prefix+".sfxVolume");null!=b&&(this.sfxVolume=b);ig.soundHandler.sfxPlayer.volume(this.sfxVolume);b=this.storage.get(this.prefix+".muted");null!=b&&(this.muted=b);this.muted?(ig.soundHandler.bgmPlayer.volume(0),ig.soundHandler.sfxPlayer.volume(0)):(ig.soundHandler.bgmPlayer.volume(this.musicVolume),ig.soundHandler.sfxPlayer.volume(this.sfxVolume));b=this.storage.get(this.prefix+
".firstrun");null!=b&&(this.firstrun=b);b=this.storage.get(this.prefix+".playerName");null!=b&&(this.playerName=b);b=this.storage.get(this.prefix+".playerAvatarId");null!=b&&!isNaN(b)&&(this.avatarId=b)}},resetApp:function(){this.network_game&&(this.network_game.leaveGame(),this.network_game.roomId=null,this.network_game.playerId=null,this.network_game.pingReplyPending=!1);1!=this.director.currentLevel?(this.director.loadLevel(1),ig.game.network_client&&ig.game.network_client.socket&&(ig.game.network_client.socket.io.skipReconnect||
setTimeout(function(){ig.game.network_client.socket.io.reconnecting=!1;ig.game.network_client.socket.io.reconnect()},1E3))):this.entities[0].reset()}});ig.domHandler=null;ig.domHandler=new ig.DomHandler;ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.apiHandler=new ig.ApiHandler;ig.sizeHandler=new ig.SizeHandler(ig.domHandler);ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,ig.sizeHandler.mobile.actualResolution.x,ig.sizeHandler.mobile.actualResolution.y,
ig.sizeHandler.scale,ig.SplashLoader),ig.sizeHandler.resize()):ig.main("#canvas",MyGame,60,ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader);ig.soundHandler=null;ig.soundHandler=new ig.SoundHandler;ig.sizeHandler.reorient();this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.MJSEOB});
</script>
	<!-- Abstract -->
</head>

<body onload="setTimeout(function(){window.scrollTo(0,1)},1);">
	<!--body-->
	<div id="pause" onclick="ig.game.resumeGame();"></div>
	<div id="ajaxbar">
		<div id="game"><canvas id="canvas"></canvas></div>
		<div id="orientate"><img src="../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/orientate/portrait.jpg" /></div>
		<div id="play" class="play" onclick=""><img src="../cdn.marketjs.net/games/trivia-king/localization/en/media/graphics/splash/mobile/cover-start.png" /></div>
		<!--<img id="scrollDown" width="220" height="277"></img>-->
	</div>
	<!-- <div id="tempdiv"><br><br><br></div> -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117180225-25"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117180225-25');

_SETTINGS.MoreGames.NewWindow=false;

</script>
</body>


<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=5914435894902784&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:17:54 GMT -->
</html>
