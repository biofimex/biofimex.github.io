<!DOCTYPE html>
<html>

<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=6210248042872832&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:02:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>Teddy Bubble Rescue</title>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<!-- Use this metatag when Apple fixes their IOS 9
	<meta name="viewport" content="width=device-width,height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, minimal-ui"/>
	-->
	<!--Temporary fix for IOS 9-->
	<meta name="viewport" content="initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no, minimal-ui"/>
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<link rel="shortcut icon" href="http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/misc/favicon.ico" />
	<script type="text/javascript" src="../whitelabel-cdn.marketjs.com/jquery.min.js"></script>
<style>html,body{background-color:#000;margin:0;padding:0;position:relative;font-family:"Arial";width:100%}@font-face{font-family:'archivoblackregular';src:url('http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/fonts/archivoblackregular.woff') format('woff'),url('http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/fonts/archivoblackregular.ttf')}#pause{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:99999;display:none;font-size:2em;text-align:center;background:rgba(0,0,0,0.2);color:#fff}#game{position:absolute;left:0;top:0;z-index:0}#ajaxbar{background:url('../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/loading/ajax-loader.gif') center no-repeat}#canvas{position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1);z-index:2}#bgcanvas{position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1);z-index:1}#guicanvas{position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1);z-index:3}#orientate{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:10002;display:none}#orientate img{position:absolute;float:left;width:100%;height:100%}.play{position:absolute;float:left;width:100%;height:100%;z-index:1000;background-color:#fff;left:0;top:0;display:none}.play img{position:absolute;float:left;width:100%;height:100%;z-index:1000;left:0;top:0}#nohtml5{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1002;visibility:hidden}#nohtml5 img{position:absolute;width:100%;height:100%}#nohtml5-bubble{position:absolute;bottom:20px;left:50px;width:380px;height:100px;z-index:1002;color:#000;background:rgba(255,255,255,0.75);-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#nohtml5-text{padding:10px}.horizontal-seperator{height:10px;width:100%}.ig_debug{position:fixed;left:0;bottom:0;width:100%;background-color:#000;border-top:2px solid #f57401;font-size:12px;color:#fff;z-index:1000;-webkit-user-select:none;display:none}.ig_debug_panel_menu{height:28px;background:#222;background:-webkit-gradient(linear,left bottom,left top,color-stop(0,#000),color-stop(1,#333));background:-moz-linear-gradient(center bottom,#000 0,#333 100%);background:-o-linear-gradient(#333,#000)}.ig_debug_panel_menu div{float:left;height:22px;padding:6px 8px 0 8px;border-right:1px solid #333}.ig_debug_panel_menu .ig_debug_head{font-weight:bold;color:#888}.ig_debug_menu_item:hover{cursor:pointer;background-color:#fff;color:#000}.ig_debug_menu_item.active,.ig_debug_menu_item.active:hover{background-color:#000;color:#fff}.ig_debug_stats{position:absolute;right:0;top:0;float:right;color:#888;border-left:1px solid #333;text-align:right}.ig_debug_stats span{width:3em;display:inline-block;color:#fff !important;margin-right:.2em;margin-left:.3em;font-family:bitstream vera sans mono,courier new;white-space:nowrap}.ig_debug_panel{height:152px;overflow:auto;position:relative}.ig_debug_panel canvas{border-bottom:1px solid #444}.ig_debug_panel .ig_debug_panel{padding:8px;height:auto;float:left;background-color:#000;border-right:2px solid #222}.ig_debug_option{padding:2px 0 2px 8px;cursor:pointer}.ig_debug_option:first-child{margin-top:8px}.ig_debug_option:hover{background-color:#111}.ig_debug_graph_mark{position:absolute;color:#888;left:4px;font-size:10px;margin-top:-12px}.ig_debug_legend{color:#ccc}.ig_debug_label_mark{display:inline-block;width:10px;height:10px;margin-right:4px;-webkit-transition:.1s linear;-moz-transition:.1s linear}.ig_debug_legend_color{display:inline-block;width:6px;height:10px;margin-right:4px;margin-left:16px}.ig_debug_legend_number{width:3em;display:inline-block;text-align:right;font-family:bitstream vera sans mono,courier new;color:#fff;margin-right:.2em}.ig_debug_map_container{position:relative;overflow:hidden;border:1px solid #888}.ig_debug_map_container canvas{position:absolute}.ig_debug_map_screen{position:absolute;border:1px solid #f0f}</style>
<!-- APICode -->
<!-- In Game Preroll Structure Template here --><div id='AdInGamePreroll'><div id='AdInGamePreroll-Box'><div id='AdInGamePreroll-Box-Header'></div><a id='AdInGamePreroll-Box-Close' onclick='AdInGamePreroll.Close();'></a><div id='AdInGamePreroll-Box-Body'><center></center></div><div id='AdInGamePreroll-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div>
<script type='text/javascript'>// Setup
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

var mjs_game_id = getQueryVariable('game_id')
var mjs_portal_id = getQueryVariable('portal_id')
var mjs_branding_id = getQueryVariable('branding_id')
var mjs_ad_id = getQueryVariable('ad_id')

console.log('mjs_game_id:',mjs_game_id)
console.log('mjs_portal_id:',mjs_portal_id)
console.log('mjs_branding_id:',mjs_branding_id)
console.log('mjs_ad_id:',mjs_ad_id)

//Base structure in script form
var css = "";
css+= "html,body,#sticky-container{margin:0;height:100%;color:#000;background:#e3f2fc;font-size:1.2em;font-family:Helvetica,Arial,sans-serif}#sticky-container{height:auto;min-height:100%}#sticky-footer{clear:both;position:relative;z-index:10}h1{padding:0;margin:0}h2{font-size:1.2em;padding:0;margin:0}h3{font-size:.8em;padding:0;margin:0}a{color:#128ccb}a.hover{color:#128ccb}.button{font-size:1em;font-weight:normal;-moz-border-radius:.5em;-webkit-border-radius:.5em;border-radius:.5em;padding:.5em 1em;text-decoration:none;color:#fff;background-color:#fbd305;display:inline-block}.button:hover{background-color:#fbd305;color:#fff;text-decoration:none !important}.button:active{position:relative;top:.05em}.button-large{font-size:2em}input[type=submit]{border:0}.valid{font-size:.8em;color:#1bdc24}.error{font-size:.8em;color:#ea1313;margin-top:.2em;margin-bottom:.5em;display:block}.tip{color:#ccc;font-size:.8em}.borderless{border:none !important}.pull-right{text-align:right}.padding-side{padding:0 1em 0 1em}.padding-side-small{padding:0 .5em 0 .5em}.padding-side-medium{padding:0 1.5em 0 1.5em}.container{clear:both;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-left:0 solid #ccc;border-right:0 solid #ccc;min-height:100%}.container-shadow{-webkit-box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc;box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc}.overlay-container-basic{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10004;display:none}.overlay-container{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10005;display:none}.overlay-container img{position:fixed;top:50%;left:50%}.horizontal-seperator{height:1em;width:100%}.horizontal-seperator-small{height:.5em;width:100%}.horizontal-seperator-line{width:100%;border-bottom:1px solid #ccc;margin-top:.2em;margin-bottom:.2em}.section{clear:both;margin:0}.inner_section{clear:both;margin:0}.col{display:block;float:left;margin:0}.col:first-child{margin-left:0}.group:before,.group:after{content:'';display:table}.group:after{clear:both}.group{zoom:1}.span_4_of_4{width:100%}.span_3_of_4{width:74.6%}.span_2_of_4{width:49.2%}.span_1_of_4{width:23.8%}.span_3_of_3{width:100%}.span_2_of_3{width:76.1%}.span_1_of_3{width:20.2%}.span_10_of_10{width:100%}.span_9_of_10{width:89.84%}.span_8_of_10{width:79.68%}.span_7_of_10{width:69.52%}.span_6_of_10{width:59.36%}.span_5_of_10{width:49.2%}.span_4_of_10{width:39.04%}.span_3_of_10{width:28.88%}.span_2_of_10{width:18.72%}.span_1_of_10{width:8.56%}.span_8_of_8{width:100%}.span_7_of_8{width:87.3%}.span_6_of_8{width:74.6%}.span_5_of_8{width:61.9%}.span_4_of_8{width:49.2%}.span_3_of_8{width:36.5%}.span_2_of_8{width:23.8%}.span_1_of_8{width:11.1%}.span_6_of_6{width:100%}.span_5_of_6{width:83.06%}.span_4_of_6{width:66.13%}.span_3_of_6{width:49.2%}.span_2_of_6{width:33.00%}.span_1_of_6{width:16.00%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:32.26%}.overlay_span_side{width:32.26%}@media only screen and (max-width:480px){.col{margin:1% 0 1% 0}.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_4_of_4{width:100%}.span_3_of_4{width:100%}.span_2_of_4{width:100%}.span_1_of_4{width:100%}.span_2_of_6{width:100%}.span_1_of_6{width:33%}.span_10_of_10{width:100%}.span_9_of_10{width:100%}.span_8_of_10{width:100%}.span_7_of_10{width:100%}.span_6_of_10{width:100%}.span_5_of_10{width:100%}.span_4_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_10{width:100%}.span_1_of_10{width:100%}.overlay_span_middle{width:100%}.overlay_span_side{width:100%}.container{margin:0}.navigation{line-height:1.8em;font-size:.8em}.css_btn_class{font-size:2em}.right_bar_module_span_2_of_6{width:100%}.box-action{margin:.2em}.featured-short-description{display:none}.box-more-games{height:140px !important}}@media only screen and (min-width:480px) and (max-width:768px){.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_6_of_10{width:50.0%}.span_4_of_10{width:50.0%}.span_7_of_10{width:100%}.span_2_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_6{width:50%}.navigation{line-height:2em}.right_bar_module_span_2_of_6{width:50%}.span_1_of_4{width:100%}.span_3_of_4{width:100%}.overlay_span_middle{width:50%}.overlay_span_side{width:25%}}@media only screen and (min-width :768px) and (max-width:1152px){.tablet-left{width:60%}.tablet-right{width:40%}.span_3_of_4{width:65%}.span_1_of_4{width:33%}.span_2_of_6{width:50.00%}.span_1_of_6{width:19.7%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:45%}.overlay_span_side{width:27.5%}.container{margin:0}.navigation{line-height:1.8em}.box-embed{width:92%}}@media only screen and (max-width:1165px){.AdPortalLeaderboard{display:none}}@media only screen and (max-width:1280px){.container{margin:0}.AdPortalSkyscraperLeft{display:none}.AdPortalSkyscraperRight{display:none}}@media only screen and (min-device-width :320px) and (max-device-width :568px) and (orientation :landscape){.span_6_of_10{width:60.0%}.span_4_of_10{width:40.0%}}";
css+= "/*BRANDING_IN_GAME_MENUBAR_THEME*/"; //can't fit in one line. Do we minify and remove all spaces?
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_LOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_UNLOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGIN_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_REGISTER_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGOUT_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LEADERBOARD_THEME*/";
css+= "/*BRANDING_CHANGE_USERNAME_THEME*/";
css+= "#AdInGamePreroll{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGamePreroll-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGamePreroll-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGamePreroll-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGamePreroll-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGamePreroll-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";
css+= "#AdInGameEndgame{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGameEndgame-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGameEndgame-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGameEndgame-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGameEndgame-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGameEndgame-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";

var html = "";
html+= "<!--BRANDING_IN_GAME_MENUBAR_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGIN_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_REGISTER_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGOUT_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LEADERBOARD_STRUCTURE-->";
html+= "<!--BRANDING_CHANGE_USERNAME_STRUCTURE-->";
html+= "<!--AD_IN_GAME_PREROLL_STRUCTURE-->";
html+= "<!--AD_IN_GAME_ENDGAME_STRUCTURE-->";

$('head').append("<style>"+css+"</style>");
$('html').append(html);

//Base script contains all that important juice (language.jsvalidate,forms,validate extra,etc)

var _CONFIG={LOGGING:!0};var Language=new function(){this.en={Validation:{urlshort:"Please enter a valid url: Eg: mysite.com",alphanumeric:"Letters, numbers, and dashes only please",lettersonly:"Letters only please",letterswithbasicpunc:"Letters or punctuation only please",letterswithwhitespace:"Letters with white spaces only please",alphanumericnodash:"Letters and numbers only please",alphanumericwhitespace:"Letters and numbers only please",nowhitespace:"No white space please",ziprange:"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx",
integer:"A positive or negative non-decimal number please",vinUS:"The specified vehicle identification number (VIN) is invalid",dateITA:"Please enter a correct date","user-password-retype":"Please type in the same password",maxWords:"Please enter {0} words or less",minWords:"Please enter at least {0} words",rangeWords:"Please enter between {0} and {1} words",valueNotEquals:"Value must not equal arg",required:"This field is required",remote:"Please fix this field",email:"Valid email address required",
url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",accept:"Please enter a value with a valid extension",maxlength:"Please enter no more than {0} characters",minlength:"Please enter at least {0} characters",rangelength:"Please enter a value between {0} and {1} characters long",range:"Please enter a value between {0} and {1}",
max:"Please enter a value less than or equal to {0}",min:"Please enter a value greater than or equal to {0}"}};this.zh={}},Localization=Language.en;(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&a.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(a){function f(){if(c.settings.submitHandler){if(c.submitButton)var a=b("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&a.remove();return!1}return!0}c.settings.debug&&a.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,f();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):f();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var a=!0,c=b(this[0].form).validate();this.each(function(){a&=c.element(this)});return a},removeAttrs:function(a){var c={},d=this;b.each(a.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(a,c){var d=this[0];if(a){var f=b.data(d.form,"validator").settings,g=f.rules,r=b.validator.staticRules(d);switch(a){case "add":b.extend(r,b.validator.normalizeRule(c));g[d.name]=r;c.messages&&(f.messages[d.name]=b.extend(f.messages[d.name],c.messages));break;case "remove":if(!c)return delete g[d.name],
r;var u={};b.each(c.split(/\s/),function(a,b){u[b]=r[b];delete r[b]});return u}}d=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(d),b.validator.classRules(d),b.validator.attributeRules(d),b.validator.staticRules(d)),d);d.required&&(f=d.required,delete d.required,d=b.extend({required:f},d));return d}});b.extend(b.expr[":"],{blank:function(a){return!b.trim(""+a.value)},filled:function(a){return!!b.trim(""+a.value)},unchecked:function(a){return!a.checked}});b.validator=function(a,c){this.settings=
b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1==arguments.length)return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=b.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);b.each(c,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in
this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).addClass(c).removeClass(d):b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).removeClass(c).addClass(d):b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:Localization.Validation.required,
remote:Localization.Validation.remote,email:Localization.Validation.email,url:Localization.Validation.url,date:Localization.Validation.date,dateISO:Localization.Validation.dateISO,number:Localization.Validation.number,digits:Localization.Validation.digits,creditcard:Localization.Validation.creditcard,equalTo:Localization.Validation.equalTo,accept:Localization.Validation.accept,maxlength:b.validator.format(Localization.Validation.maxlength),minlength:b.validator.format(Localization.Validation.minlength),
rangelength:b.validator.format(Localization.Validation.rangelength),range:b.validator.format(Localization.Validation.range),max:b.validator.format(Localization.Validation.max),min:b.validator.format(Localization.Validation.min)},autoCreateRanges:!1,prototype:{init:function(){function a(a){var c=b.data(this[0].form,"validator"),d="on"+a.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],a)}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&
this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};b.each(this.settings.groups,function(a,d){b.each(d.split(/\s/),function(b,d){c[d]=a})});var d=this.settings.rules;b.each(d,function(a,c){d[a]=b.validator.normalizeRule(c)});b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",a);this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=
this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=b(a);var c=this.check(a);c?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(a){if(a){b.extend(this.errorMap,a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});
this.successList=b.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;
return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==b.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=
this,c={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!a.objectLength(b(this).rules())?!1:c[this.name]=!0})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=
[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var c=b(a).rules(),d=!1,f;for(f in c){var g={method:f,parameters:c[f]};try{var r=b.validator.methods[f].call(this,a.value.replace(/\r/g,""),a,g.parameters);if("dependency-mismatch"==r)d=!0;else{d=!1;if("pending"==
r){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!r)return this.formatAndAdd(a,g),!1}}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+a.id+", check the '"+g.method+"' method",u),u;}}if(!d)return this.objectLength(c)&&this.successList.push(a),!0},customMetaMessage:function(a,c){if(b.metadata){var d=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,
b){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,c),this.customMetaMessage(a,c),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),f=/\$?\{(\d+)\}/g;
"function"==typeof d?d=d.call(this,b.parameters,a):f.test(d)&&(d=jQuery.format(d.replace(f,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);
this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},
invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(a,c){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||
(this.settings.errorPlacement?this.settings.errorPlacement(d,b(a)):d.insertAfter(a)));!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var c=this.idOrName(a);return this.errors().filter(function(){return b(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&
(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var c=this.currentForm;return b(document.getElementsByName(a)).map(function(b,f){return f.form==c&&f.name==a&&f||null})},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,
b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!b.validator.methods.required.call(this,b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=
0);delete this.pending[a.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!c&&(0==this.pendingRequest&&this.formSubmitted)&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},
dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor==String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c={};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={};a=b(a);for(var d in b.validator.methods){var f;
(f="required"===d&&"function"===typeof b.fn.prop?a.prop(d):a.attr(d))?c[d]=f:a[0].getAttribute("type")===d&&(c[d]=!0)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(a){if(!b.metadata)return{};var c=b.data(a.form,"validator").settings.meta;return c?b(a).metadata()[c]:b(a).metadata()},staticRules:function(a){var c={},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,
c){b.each(a,function(d,f){if(!1===f)delete a[d];else if(f.param||f.depends){var g=!0;switch(typeof f.depends){case "string":g=!!b(f.depends,c.form).length;break;case "function":g=f.depends.call(c,c)}g?a[d]=void 0!==f.param?f.param:!0:delete a[d]}});b.each(a,function(d,f){a[d]=b.isFunction(f)?f(c):f});b.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});b.validator.autoCreateRanges&&
(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!=d?d:b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},
methods:{required:function(a,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(a=b(c).val())&&0<a.length;case "input":if(this.checkable(c))return 0<this.getLength(a,c);default:return 0<b.trim(a).length}},remote:function(a,c,d){if(this.optional(c))return"dependency-mismatch";var f=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=
f.message;d="string"==typeof d&&{url:d}||d;if(this.pending[c.name])return"pending";if(f.old===a)return f.valid;f.old=a;var g=this;this.startRequest(c);var r={};r[c.name]=a;b.ajax(b.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:r,success:function(d){g.settings.messages[c.name].remote=f.originalMessage;var n=!0===d;if(n){var s=g.formSubmitted;g.prepareElement(c);g.formSubmitted=s;g.successList.push(c);g.showErrors()}else s={},d=d||g.defaultMessage(c,"remote"),s[c.name]=f.message=
b.isFunction(d)?d(a):d,g.showErrors(s);f.valid=n;g.stopRequest(c,n)}},d));return"pending"},minlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)>=d},maxlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)<=d},rangelength:function(a,c,d){a=this.getLength(b.trim(a),c);return this.optional(c)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||
a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var d=0,f=0,g=!1;a=a.replace(/\D/g,"");for(var r=a.length-1;0<=r;r--){f=
a.charAt(r);f=parseInt(f,10);if(g&&9<(f*=2))f-=9;d+=f;g=!g}return 0==d%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+d+")$","i"))},equalTo:function(a,c,d){d=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid()});return a==d.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(b,c,g){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=g)});else{var c=b.ajax;b.ajax=function(d){var f=("port"in d?d:b.ajaxSettings).port;return"abort"==("mode"in d?d:b.ajaxSettings).mode?(a[f]&&a[f].abort(),a[f]=c.apply(this,arguments)):c.apply(this,arguments)}}})(jQuery);
(function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(a,c){function d(a){a=b.event.fix(a);a.type=c;return b.event.handle.call(this,a)}b.event.special[c]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(a){arguments[0]=b.event.fix(a);arguments[0].type=c;return b.event.handle.apply(this,arguments)}}});b.extend(b.fn,{validateDelegate:function(a,
c,d){return this.bind(c,function(c){var g=b(c.target);if(g.is(a))return d.apply(g,arguments)})}})})(jQuery);(function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,"")}jQuery.validator.addMethod("maxWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<d},jQuery.validator.format(Localization.Validation.maxWords));jQuery.validator.addMethod("minWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},jQuery.validator.format(Localization.Validation.minWords));jQuery.validator.addMethod("rangeWords",
function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d[0]&&a.match(/bw+b/g).length<d[1]},jQuery.validator.format(Localization.Validation.rangeWords))})();jQuery.validator.addMethod("valueNotEquals",function(b,a,c){return c!=b},Localization.Validation.valueNotEquals);jQuery.validator.addMethod("filesize",function(b,a,c){return this.optional(a)||a.files[0].size<=c});
jQuery.validator.addMethod("urlshort",function(b,a){"http://"!=b.substr(0,7)&&(b="http://"+b);"/"!=b.substr(b.length-1,1)&&(b+="/");return this.optional(a)||/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(b)},"Not valid url.");jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z-.,?!()'\"\s]+$/i.test(b)},Localization.Validation.letterswithbasicpunc);
jQuery.validator.addMethod("alphanumericnodash",function(b,a){return this.optional(a)||/^[\sa-zA-Z0-9]+$/i.test(b)},Localization.Validation.alphanumericnodash);jQuery.validator.addMethod("alphanumericwhitespace",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-\s]+$/i.test(b)},Localization.Validation.alphanumericwhitespace);jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-]+$/i.test(b)},Localization.Validation.alphanumeric);
jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},Localization.Validation.lettersonly);jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},Localization.Validation.nowhitespace);jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2}-\d{4}$/.test(b)},Localization.Validation.ziprange);
jQuery.validator.addMethod("integer",function(b,a){return this.optional(a)||/^-?\d+$/.test(b)},Localization.Validation.integer);
jQuery.validator.addMethod("vinUS",function(b){if(17!=b.length)return!1;var a,c,d,f,g,r="ABCDEFGHJKLMNPRSTUVWXYZ".split(""),u=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],n=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],s=0;for(a=0;17>a;a++){f=n[a];d=b.slice(a,a+1);8==a&&(g=d);if(isNaN(d))for(c=0;c<r.length;c++){if(d.toUpperCase()===r[c]){d=u[c];d*=f;isNaN(g)&&8==c&&(g=r[c]);break}}else d*=f;s+=d}b=s%11;10==b&&(b="X");return b==g?!0:!1},Localization.Validation.vinUS);
jQuery.validator.addMethod("dateITA",function(b,a){var c=!1;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(b))var d=b.split("index.html"),c=parseInt(d[0],10),f=parseInt(d[1],10),d=parseInt(d[2],10),g=new Date(d,f-1,c),c=g.getFullYear()==d&&g.getMonth()==f-1&&g.getDate()==c?!0:!1;else c=!1;return this.optional(a)||c},Localization.Validation.dateITA);!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(b){function a(a){var c=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(c))}function c(a){var c=a.target,d=b(c);if(!d.is("[type=submit],[type=image]")){c=d.closest("[type=submit]");if(0===c.length)return;c=c[0]}var e=this;if(e.clk=c,"image"==c.type)void 0!==a.offsetX?(e.clk_x=a.offsetX,e.clk_y=a.offsetY):"function"==typeof b.fn.offset?(d=d.offset(),
e.clk_x=a.pageX-d.left,e.clk_y=a.pageY-d.top):(e.clk_x=a.pageX-c.offsetLeft,e.clk_y=a.pageY-c.offsetTop);setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)}function d(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var f,g;f=void 0!==b("<input type='file'/>").get(0).files;g=void 0!==window.FormData;var r=!!b.fn.prop;b.fn.attr2=function(){if(!r)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function c(e){function f(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(e){d("cannot get iframe.contentDocument: "+e),b=a.document}return b}function g(){function a(){try{var b=f(z).readyState;d("state = "+
b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(c){d("Server abort: ",c," (",c.name,")"),k(C),F&&clearTimeout(F),F=void 0}}var c=p.attr2("target"),e=p.attr2("action"),u=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";w.setAttribute("target",l);(!s||/post/i.test(s))&&w.setAttribute("method","POST");e!=h.url&&w.setAttribute("action",h.url);h.skipEncodingOverride||s&&!/post/i.test(s)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});h.timeout&&(F=setTimeout(function(){y=
!0;k(G)},h.timeout));var j=[];try{if(h.extraData)for(var n in h.extraData)h.extraData.hasOwnProperty(n)&&j.push(b.isPlainObject(h.extraData[n])&&h.extraData[n].hasOwnProperty("name")&&h.extraData[n].hasOwnProperty("value")?b('<input type="hidden" name="'+h.extraData[n].name+'">').val(h.extraData[n].value).appendTo(w)[0]:b('<input type="hidden" name="'+n+'">').val(h.extraData[n]).appendTo(w)[0]);h.iframeTarget||m.appendTo("body");z.attachEvent?z.attachEvent("onload",k):z.addEventListener("load",k,
!1);setTimeout(a,15);try{w.submit()}catch(t){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",e),w.setAttribute("enctype",u),c?w.setAttribute("target",c):p.removeAttr("target"),b(j).remove()}}function k(a){if(!j.aborted&&!E){if(v=f(z),v||(d("cannot access response document"),a=C),a===G&&j)return j.abort("timeout"),void A.reject(j,"timeout");if(a==C&&j)return j.abort("server abort"),void A.reject(j,"error","server abort");if(v&&v.location.href!=h.iframeSrc||y){z.detachEvent?
z.detachEvent("onload",k):z.removeEventListener("load",k,!1);var c;a="success";try{if(y)throw"timeout";var e="xml"==h.dataType||v.XMLDocument||b.isXMLDoc(v);if(d("isXml="+e),!e&&window.opera&&(null===v.body||!v.body.innerHTML)&&--H)return d("requeing onLoad callback, DOM not available"),void setTimeout(k,250);var u=v.body?v.body:v.documentElement;j.responseText=u?u.innerHTML:null;j.responseXML=v.XMLDocument?v.XMLDocument:v;e&&(h.dataType="xml");j.getResponseHeader=function(a){return{"content-type":h.dataType}[a.toLowerCase()]};
u&&(j.status=Number(u.getAttribute("status"))||j.status,j.statusText=u.getAttribute("statusText")||j.statusText);var n=(h.dataType||"").toLowerCase(),s=/(json|script|text)/.test(n);if(s||h.textarea){var p=v.getElementsByTagName("textarea")[0];if(p)j.responseText=p.value,j.status=Number(p.getAttribute("status"))||j.status,j.statusText=p.getAttribute("statusText")||j.statusText;else if(s){var g=v.getElementsByTagName("pre")[0],l=v.getElementsByTagName("body")[0];g?j.responseText=g.textContent?g.textContent:
g.innerText:l&&(j.responseText=l.textContent?l.textContent:l.innerText)}}else"xml"==n&&!j.responseXML&&j.responseText&&(j.responseXML=I(j.responseText));try{var e=j,u=h,q=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&0<=q.indexOf("xml"),B=r?e.responseXML:e.responseText;D=(r&&"parsererror"===B.documentElement.nodeName&&b.error&&b.error("parsererror"),u&&u.dataFilter&&(B=u.dataFilter(B,n)),"string"==typeof B&&("json"===n||!n&&0<=q.indexOf("json")?B=J(B):("script"===n||!n&&0<=q.indexOf("javascript"))&&
b.globalEval(B)),B)}catch(w){a="parsererror",j.error=c=w||a}}catch(x){d("error caught: ",x),a="error",j.error=c=x||a}j.aborted&&(d("upload aborted"),a=null);j.status&&(a=200<=j.status&&300>j.status||304===j.status?"success":"error");"success"===a?(h.success&&h.success.call(h.context,D,"success",j),A.resolve(j.responseText,"success",j),t&&b.event.trigger("ajaxSuccess",[j,h])):a&&(void 0===c&&(c=j.statusText),h.error&&h.error.call(h.context,j,a,c),A.reject(j,"error",c),t&&b.event.trigger("ajaxError",
[j,h,c]));t&&b.event.trigger("ajaxComplete",[j,h]);t&&!--b.active&&b.event.trigger("ajaxStop");h.complete&&h.complete.call(h.context,j,a);E=!0;h.timeout&&clearTimeout(F);setTimeout(function(){h.iframeTarget?m.attr("src",h.iframeSrc):m.remove();j.responseXML=null},100)}}}var n,h,t,l,m,z,j,x,y,F,w=p[0],A=b.Deferred();if(A.abort=function(a){j.abort(a)},e)for(n=0;n<q.length;n++)e=b(q[n]),r?e.prop("disabled",!1):e.removeAttr("disabled");if(h=b.extend(!0,{},b.ajaxSettings,a),h.context=h.context||h,l="jqFormIO"+
(new Date).getTime(),h.iframeTarget?(m=b(h.iframeTarget),x=m.attr2("name"),x?l=x:m.attr2("name",l)):(m=b('<iframe name="'+l+'" src="'+h.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),z=m[0],j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";d("aborting upload... "+c);this.aborted=1;try{z.contentWindow.document.execCommand&&
z.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",h.iframeSrc);j.error=c;h.error&&h.error.call(h.context,j,c,a);t&&b.event.trigger("ajaxError",[j,h,c]);h.complete&&h.complete.call(h.context,j,c)}},t=h.global,t&&0===b.active++&&b.event.trigger("ajaxStart"),t&&b.event.trigger("ajaxSend",[j,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,j,h))return h.global&&b.active--,A.reject(),A;if(j.aborted)return A.reject(),A;(e=w.clk)&&(x=e.name,x&&!e.disabled&&(h.extraData=h.extraData||{},
h.extraData[x]=e.value,"image"==e.type&&(h.extraData[x+".x"]=w.clk_x,h.extraData[x+".y"]=w.clk_y)));var G=1,C=2;x=b("meta[name=csrf-token]").attr("content");(e=b("meta[name=csrf-param]").attr("content"))&&x&&(h.extraData=h.extraData||{},h.extraData[e]=x);h.forceSync?g():setTimeout(g,10);var D,v,E,H=50,I=b.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=
b.documentElement.nodeName?b:null},J=b.parseJSON||function(a){return window.eval("("+a+")")};return A}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var s,e,p=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});s=a.type||this.attr2("method");e=a.url||this.attr2("action");(e=(e="string"==typeof e?b.trim(e):"")||window.location.href||"")&&(e=(e.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:e,success:b.ajaxSettings.success,type:s||b.ajaxSettings.type,
iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);e={};if(this.trigger("form-pre-serialize",[this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var t=a.traditional;void 0===t&&(t=b.ajaxSettings.traditional);var k,q=[],l=this.formToArray(a.semantic,q);if(a.data&&(a.extraData=a.data,k=b.param(a.data,
t)),a.beforeSubmit&&!1===a.beforeSubmit(l,this,a))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;e=b.param(l,t);k&&(e=e?e+"&"+k:k);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+e,a.data=null):a.data=e;var m=[];if(a.resetForm&&m.push(function(){p.resetForm()}),a.clearForm&&m.push(function(){p.clearForm(a.includeHidden)}),
!a.dataType&&a.target){var G=a.success||function(){};m.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(G,arguments)})}else a.success&&m.push(a.success);if(a.success=function(b,c,d){for(var e=a.context||this,f=0,h=m.length;h>f;f++)m[f].apply(e,[b,c,d||p,p])},a.error){var y=a.error;a.error=function(b,c,d){y.apply(a.context||this,[b,c,d,p])}}if(a.complete){var I=a.complete;a.complete=function(b,c){I.apply(a.context||this,[b,c,p])}}k=0<b("input[type=file]:enabled",this).filter(function(){return""!==
b(this).val()}).length;e="multipart/form-data"==p.attr("enctype")||"multipart/form-data"==p.attr("encoding");t=f&&g;d("fileAPI :"+t);var C;if(!1!==a.iframe&&(a.iframe||(k||e)&&!t))a.closeKeepAlive?b.get(a.closeKeepAlive,function(){C=c(l)}):C=c(l);else{if((k||e)&&t){var E=new FormData;for(e=0;e<l.length;e++)E.append(l[e].name,l[e].value);if(a.extraData){var D=b.param(a.extraData,a.traditional).split("&"),J=D.length;k=[];for(e=0;J>e;e++)D[e]=D[e].replace(/\+/g," "),t=D[e].split("="),k.push([decodeURIComponent(t[0]),
decodeURIComponent(t[1])]);for(e=0;e<k.length;e++)k[e]&&E.append(k[e][0],k[e][1])}a.data=null;k=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});a.uploadProgress&&(k.xhr=function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){var c=0,d=b.loaded||b.position,e=b.total;b.lengthComputable&&(c=Math.ceil(100*(d/e)));a.uploadProgress(b,d,e,c)},!1),c});k.data=null;var H=k.beforeSend;k=(k.beforeSend=function(b,c){c.data=
a.formData?a.formData:E;H&&H.call(this,b,c)},b.ajax(k))}else k=b.ajax(a);C=k}p.removeData("jqxhr").data("jqxhr",C);for(k=0;k<q.length;k++)q[k]=null;return this.trigger("form-submit-notify",[this,a]),this};b.fn.ajaxForm=function(f){if(f=f||{},f.delegation=f.delegation&&b.isFunction(b.fn.on),!f.delegation&&0===this.length){var n=this.selector,s=this.context;return!b.isReady&&n?(d("DOM not ready, queuing ajaxForm"),b(function(){b(n,s).ajaxForm(f)}),this):(d("terminating; zero elements found by selector"+
(b.isReady?"":" (DOM not ready)")),this)}return f.delegation?(b(document).off("submit.form-plugin",this.selector,a).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,f,a).on("click.form-plugin",this.selector,f,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",f,a).bind("click.form-plugin",f,c)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,c){var d=[];if(0===this.length)return d;var e,p=this[0],
g=this.attr("id"),k=a?p.getElementsByTagName("*"):p.elements;if(k&&!/MSIE [678]/.test(navigator.userAgent)&&(k=b(k).get()),g&&(e=b(':input[form="'+g+'"]').get(),e.length&&(k=(k||[]).concat(e))),!k||!k.length)return d;var q,l,m,r,y;e=0;for(r=k.length;r>e;e++)if(m=k[e],q=m.name,q&&!m.disabled)if(a&&p.clk&&"image"==m.type)p.clk==m&&(d.push({name:q,value:b(m).val(),type:m.type}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y}));else if(l=b.fieldValue(m,!0),l&&l.constructor==Array){c&&c.push(m);
g=0;for(y=l.length;y>g;g++)d.push({name:q,value:l[g]})}else if(f&&"file"==m.type)if(c&&c.push(m),y=m.files,y.length)for(g=0;g<y.length;g++)d.push({name:q,value:y[g],type:m.type});else d.push({name:q,value:"",type:m.type});else null!==l&&"undefined"!=typeof l&&(c&&c.push(m),d.push({name:q,value:l,type:m.type,required:m.required}));!a&&p.clk&&(k=b(p.clk),l=k[0],(q=l.name)&&!l.disabled&&"image"==l.type&&(d.push({name:q,value:k.val()}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y})));
return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var c=[];return this.each(function(){var d=this.name;if(d){var e=b.fieldValue(this,a);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),b.param(c)};b.fn.fieldValue=function(a){for(var c=[],d=0,e=this.length;e>d;d++){var f=b.fieldValue(this[d],a);null===f||"undefined"==typeof f||f.constructor==
Array&&!f.length||(f.constructor==Array?b.merge(c,f):c.push(f))}return c};b.fieldValue=function(a,c){var d=a.name,e=a.type,f=a.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||a.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!a.checked||("submit"==e||"image"==e)&&a.form&&a.form.clk!=a||"select"==f&&-1==a.selectedIndex))return null;if("select"==f){var g=a.selectedIndex;if(0>g)return null;for(var d=[],f=a.options,k=(e="select-one"==e)?g+1:f.length,g=e?g:0;k>g;g++){var q=f[g];if(q.selected){var l=
q.value;if(l||(l=q.attributes&&q.attributes.value&&!q.attributes.value.specified?q.text:q.value),e)return l;d.push(l)}}return d}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value=
"":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(d)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=
!a})};b.fn.selected=function(a){return void 0===a&&(a=!0),this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=a:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),a&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});


var InGameMenubarAuth = {
	checkIfLoggedIn:function(token_id){
		$.ajax({
	        type: 'GET',
	        dataType: 'json',
			url: 'http://smartfun.club' + '/api/login/check/' + token_id + '',
            beforeSend:function (){
				console.log('InGameMenubarAuth.checkIfLoggedIn: beforeSend')
			},			
		}).done(function(response){
			console.log(response)								
			$('#in-game-menubar-user-panel').html(response.data.template);	
			
			if(response.status.code==200){				
				if(mjs_user_token_id){
					// Update portal domain
					var old_href = 'index.html';
					console.log('old_href:',old_href);
					
					$('#in-game-menubar-main-portal-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString());				

					// Update header
					$('#in-game-menubar-header-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString())					
				}

			}
		});			
	},	
}

// GLOBAL
var mjs_user_token_id;

// getQueryVariable
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

// In Game Menubar Script Template here
var InGameMenubar = {
	enabled:eval('false'),
	
	activateLeaderboard:function(){
		$('#in-game-menubar-main').hide()
		$('#in-game-menubar-leaderboard').show();		
	},
	
	showActivator:function(){
		$('#in-game-menubar-activator').show();
	},
	activate: function(){
		// Resolve in pixels
		var height = $('#in-game-menubar-main').css('height')
		if(height=='0px'){
			console.log('weird bug with 0px ... forcing something')
			$('#in-game-menubar-main').css('height',window.innerHeight*0.6)
		}
		
		$('#in-game-menubar-activator').hide(200);
		//$('#in-game-menubar-main').css('top',$('#in-game-menubar-activator').css('top'))
		$('#in-game-menubar-main').show(200);
	},		
	deactivate: function(){
		$('#in-game-menubar-activator').show(200);
		$('#in-game-menubar-main').hide(200);
	},
}

var Cookie = {
	IsEnabled: function(){
		return navigator.cookieEnabled ||
	        ('cookie' in document && (document.cookie.length > 0 ||
	        (document.cookie = 'mjstestcookie').indexOf.call(document.cookie, 'mjstestcookie') > -1));	
	},	
	DoesExist: function(cname) {
	    var name = cname + '=';
	    var ca = document.cookie.split(';');
		var value;
	    for(var i=0; i<ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1);
	        if (c.indexOf(name) == 0){
				return true;
			} 
	    }
	    return false;
	},
	// TEST
	SetFiveSecondCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (5*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetHourlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetDailyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
 	SetMonthlyCookie: function(cname) { // averages to 30 days
	    var d = new Date();
	    d.setTime(d.getTime() + (1*30*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},		
	SetYearlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*365*24*60*60*1000)); // averages to 365 days
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},			
}

var MarketJS = {
	Log:{
		Game:function(metric_name){ // Eg: MarketJS.Log.Game('Initialize'), MarketJS.Log.Game('EndGame'), MarketJS.Log.Game('LaunchGame)
			console.log('MarketJS API Log Game Event: ',metric_name)
			$.ajax({
		        type: 'GET',
				dataType:'json',
				url: 'http://smartfun.club/api/log/game/' + metric_name + '/' + mjs_game_id + '?mjs_user_token_id=' + mjs_user_token_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		Portal:function(metric_name){ // Eg: MarketJS.Log.Portal('UserLogin'), MarketJS.Log.Portal('UserRegister')
			console.log('MarketJS API Log Portal Event: ',metric_name)
			$.ajax({
		        type: 'POST',
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		TimeSpent:function(metric_value){
			console.log('MarketJS API Log Time Spent: ',metric_value)
			var metric_name = 'TimeSpent';
			$.ajax({
		        type: 'POST',
				data:{'metric_value':metric_value},
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},	
		// Specially developed
		UniqueVisitor:function(){
			console.log('MarketJS API Log Unique Visitor Event')

			// if unique_visitor_params[xxxx] = 'True', means it will be logged in the server			
			var unique_visitor_params = {
				'singular':'True', // to invoke singular counter increments. Special case
				'hourly':'False',
				'daily':'False',
				'monthly':'False',
				'yearly':'False',
			}
			
			var submit_hourly_cookie = false;
			var submit_daily_cookie = false;
			var submit_monthly_cookie = false;
			var submit_yearly_cookie = false;
			
			if(Cookie.IsEnabled()){
				/*
				if(!Cookie.DoesExist('mjstest')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetFiveSecondCookie('mjstest');
					submit_hourly_cookie = true;
				}*/
				
				if(!Cookie.DoesExist('mjshourly')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetHourlyCookie('mjshourly');
					submit_hourly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsdaily')){
					unique_visitor_params['daily'] = 'True';
					Cookie.SetDailyCookie('mjsdaily');
					submit_daily_cookie = true;
				}

				if(!Cookie.DoesExist('mjsmonthly')){
					unique_visitor_params['monthly'] = 'True';
					Cookie.SetMonthlyCookie('mjsmonthly');					
					submit_monthly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsyearly')){
					unique_visitor_params['yearly'] = 'True';
					Cookie.SetYearlyCookie('mjsyearly');
					submit_yearly_cookie = true;
				}																
			}	

			/* SAMPLE:
			unique_visitor_params:{
				hourly:hourly, // 'True'
				daily:daily,	// 'False'
				monthly:monthly, // 'False'
				yearly:yearly, // 'False'
			},
			*/						
			if(submit_hourly_cookie || submit_daily_cookie || submit_monthly_cookie || submit_yearly_cookie){
				console.log('Submitting ...')
				$.ajax({
			        type: 'POST',
					dataType:'json',
					data:unique_visitor_params,
					url: 'http://smartfun.club/api/log/portal/' + 'UniqueVisitor' + '/' + mjs_portal_id,
				}).done(function(response){
					console.log(response.status.code);							
				});					
			}else{
				console.log('Not submitting ... all data is current')
			}					
		},
	},
	
	Leaderboard:{
		SubmitScore:function(points){ // (token_id,game_id,points)
			// what's the drawback? users can post as often as they want, but we have a filter for frequency and value
			if(!mjs_user_token_id){
				console.log('No user session detected. No score submitted')
				return
			}
			$.ajax({
		        type: 'POST',
				data:{
					'token_id':mjs_user_token_id,//token_id,
					'game_id':mjs_game_id,//game_id,
					'points':points,
				},
		        dataType: 'json',
				url: 'http://smartfun.club/leaderboard/write',		
			}).done(function(response){
				console.log(response);
				if(response.status.code==200){
					console.log('SUCCESSFUL')
				}else{
					console.log('FAILED')
				}							
			});			
		},			
	}
}

// Steps

// Good thing we only have mobile and non-mobile
function isMobile(){
	var userAgent = navigator.userAgent;
	var list = ['iPhone','iPad','android','Android','Windows Phone','Silk','BB10','PlayBook'];
	for(i=0;i<list.length;i++){
		if(userAgent.indexOf(list[i])!=-1){
			return true
		}
	}
	return false;
}

// ENABLER
// temporaryly use localStorage, instead of jStorage
$(document).ready(function(){
	if(isMobile() && InGameMenubar.enabled){
		InGameMenubar.showActivator();
	}
	
	mjs_user_token_id = getQueryVariable('mjs_user_token_id');
	if(mjs_user_token_id){
		console.log('mjs_user_token_id found in url param')

		if(isMobile() && InGameMenubar.enabled){
			InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id);
		}		
	}else{
		if(localStorage){
			mjs_user_token_id = localStorage.getItem('mjs_user_token_id')
			
			if(isMobile() && InGameMenubar.enabled){
				if(mjs_user_token_id){
					console.log('mjs_user_token_id found in localStorage');
					InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id)
				}else{
					console.log('No user token id found in localStorage ... perform a dummy check')
					InGameMenubarAuth.checkIfLoggedIn('12345678') // SOMEHOW THIS NEEDS TO BE HERE
				}				
			}			
			
		}else{
			console.log('no localstorage found')
		}
	}	
});

/* OBSOLETE
// Record TimeSpent
var TimeSpent = 0;
window.setInterval(function () {TimeSpent+=1}, 1000);
var isSmartphone = eval('false');
var isTablet = eval('false');
var isDesktop;
if(isSmartphone || isTablet){
	isDesktop = false;
}else{
	isDesktop = true;
}
if(!isDesktop){
	window.setInterval(function () {
		MarketJS.Log.TimeSpent(TimeSpent); // NEEDS TO BE OPTIMIZED, TO REDUCE LOAD
		TimeSpent = 0;					
	}, 31000);	
}
*/


var BrandingSplashScreen={enabled:eval('true'),}
function InitializeSplashScreen(){if(BrandingSplashScreen.enabled){this.START_BRANDING_SPLASH;ig.module('plugins.branding.splash').requires('impact.impact','impact.entity').defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0);}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},splash:new ig.Image('http://lh3.googleusercontent.com/YADmEGMQG8Rabw_t5RDwpddpX7r0VqS8lIQj6R65PozZt1KyTX_NvlOK5UBYqZOE6pwsXlxdOI7UWcHy6sz51525x82aH1fXLq_1Og=s480'),init:function(x,y,settings){this.parent(x,y,settings); if(ig.system.width<=320){this.size.x=320;this.size.y=200;}else{this.size.x=480;this.size.y=240;} 
this.pos.x=(ig.system.width-this.size.x)/2;this.pos.y=-this.size.y-200; this.endPosY=(ig.system.height-this.size.y)/2;var tween1=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});var tween2=this.tween({},eval('3')-0.5,{onComplete:function(){ ig.game.director.loadLevel(ig.game.director.currentLevel);}});tween1.chain(tween2);tween1.start();this.currentAnim=this.anims.idle;},createClickableLayer:function(){ console.log('Build clickable layer')
this.checkClickableLayer('branding-splash','SPLASH_SCREEN_CLICKABLE_LOGO_URL',true);},doesClickableLayerExist:function(id){for(k in dynamicClickableEntityDivs){if(k==id)return true;}
return false;},checkClickableLayer:function(divID,outboundLink,open_new_window){if(typeof(wm)=='undefined'){ if(this.doesClickableLayerExist(divID)){ ig.game.showOverlay([divID]); $('#'+divID).find('[href]').attr('href',outboundLink);}else{this.createClickableOutboundLayer(divID,outboundLink,'static/test/images/branding/splash_screen/invisible.png',open_new_window);}}}, createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window){ var div=ig.$new('div');div.id=id;document.body.appendChild(div); $('#'+div.id).css('float','left');$('#'+div.id).css('position','absolute');if(ig.ua.mobile){var heightRatio=window.innerHeight/mobileHeight;var widthRatio=window.innerWidth/mobileWidth;$('#'+div.id).css('left',this.pos.x*widthRatio);$('#'+div.id).css('top',this.pos.y*heightRatio);$('#'+div.id).css('width',this.size.x*widthRatio);$('#'+div.id).css('height',this.size.y*heightRatio);}else{ var reference={x:(w/2)-(destW/2),y:(h/2)-(destH/2),}
console.log(reference.x,reference.y);$('#'+div.id).css('left',reference.x+this.pos.x*multiplier);$('#'+div.id).css('top',reference.y+this.pos.y*multiplier);$('#'+div.id).css('width',this.size.x*multiplier);$('#'+div.id).css('height',this.size.y*multiplier);} 
if(open_new_window){$('#'+div.id).html('<a target=\'_blank\' href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}else{$('#'+div.id).html('<a href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');} 
dynamicClickableEntityDivs[id]={};dynamicClickableEntityDivs[id]['width']=this.size.x*multiplier;dynamicClickableEntityDivs[id]['height']=this.size.y*multiplier;dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;},draw:function(){ig.system.context.fillStyle='#ffffff';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.parent();if(this.splash)
{ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y);}}});});this.END_BRANDING_SPLASH;}}

//BRANDING_IN_GAME_MENUBAR_LOGIN_SCRIPT

//BRANDING_IN_GAME_MENUBAR_REGISTER_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LOGOUT_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LEADERBOARD_SCRIPT

//BRANDING_CHANGE_USERNAME_SCRIPT


var AdInGamePreroll={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGamePreroll disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGamePreroll']={'box-width':AdInGamePreroll.ad_width+2,'box-height':AdInGamePreroll.ad_height+20,}}
this.selectedOverlayName='AdInGamePreroll'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGamePreroll.boxContents.header.text(AdInGamePreroll.ready_in+' '+i+'...');AdInGamePreroll.boxContents.footer.text(AdInGamePreroll.loading);i--;if(i<0){clearInterval(inter);AdInGamePreroll.boxContents.close.css('left',AdInGamePreroll.boxContents.body.width()-23);AdInGamePreroll.boxContents.close.show();AdInGamePreroll.boxContents.header.html(AdInGamePreroll.close);AdInGamePreroll.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};



var AdInGameEndgame={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGameEndgame disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGameEndgame']={'box-width':AdInGameEndgame.ad_width+2,'box-height':AdInGameEndgame.ad_height+20,}}
this.selectedOverlayName='AdInGameEndgame'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGameEndgame.boxContents.header.text(AdInGameEndgame.ready_in+' '+i+'...');AdInGameEndgame.boxContents.footer.text(AdInGameEndgame.loading);i--;if(i<0){clearInterval(inter);AdInGameEndgame.boxContents.close.css('left',AdInGameEndgame.boxContents.body.width()-23);AdInGameEndgame.boxContents.close.show();AdInGameEndgame.boxContents.header.html(AdInGameEndgame.close);AdInGameEndgame.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};

//BRANDING_FACEBOOK_SCRIPT


var BrandingInGameMoreGames={enabled:eval('true'),url:'http://smartfun.club',}

//PORTAL_ANALYTICS_CODE</script> 
<script type='text/javascript'>var _STRINGS={"Ad":{"Mobile":{"Preroll":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"Header":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"End":{"ReadyIn":"Advertisement ends in ","Loading":"Please wait ...","Close":"Close",},},},"Splash":{"Loading":"Loading ...","LogoLine1":"Some text here","LogoLine2":"powered by MarketJS","LogoLine3":"none","TapToStart":"TAP TO START"},"Game":{"SelectPlayer":"Select Player","You":"YOU","Win":"WIN","Lose":"LOSE","Score":"Score","Highscore":"Highscore","Coin":"Coin","Time":"Time","Music":"MUSIC","Sound":"SOUND","Paused":"PAUSED","Game":"GAME","Over":"OVER","Settings":"SETTINGS","Levels":"LEVELS","ArmoCombo":"Extras Combo","PopCombo":"Pop Combo","DropCombo":"Drop Combo","level":"Level:","score":"Score:","READY":"READY","GO":"GO","Proceed":"tap to proceed",},"Results":{"Title":"High score",},};var _LVL={"lvl0":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[10,10,0,0],"armoEachArmo":10,"armoExtra":1,"starScore":[2000,3000,3312],"rainbow":0,"arrow":[{x:108,y:354},{x:108,y:354},{x:121,y:615}],"rowOffset":0,"speech":["My babies are trapped in these bubbles!","Let's pop these bubbles and rescue them!","Click on the arrow button or press B to use the floating bubble"],"speechMobile":["My babies are trapped in these bubbles!","Let's pop these bubbles and rescue them!","Click on the arrow button to use the floating bubble"],"map":[[,0,,0,0,0,0,,0,],[,0,0,,0,"baby0",0,,0,0,],[0,"baby0",0,,0,0,,0,"baby0",0],[0,0,0,0,,0,,0,0,0,0],[,1,,1,1,1,1,,1,],[,1,1,,1,"baby1",1,,1,1,],[1,"baby1",1,,1,1,,1,"baby1",1],[1,1,1,1,,1,,1,1,1,1],[,0,,0,0,0,0,,0,],[,0,0,,0,"baby0",0,,0,0,],[0,"baby0",0,,0,0,,0,"baby0",0],[0,0,0,0,,0,,0,0,0,0]]},"lvl1":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[5,5,5,5],"armoEachArmo":6,"armoExtra":1,"starScore":[1700,2816,3349],"rainbow":0,"rowOffset":0,"map":[[0,0,,,1,1,,,2,2,],[0,0,0,,1,"baby1",1,,2,2,2],[0,0,3,3,1,1,3,3,2,2,],[,,,3,,,,3,,,],[1,1,3,3,2,2,3,3,0,0,],[1,"baby1",1,,2,2,2,,0,"baby0",0],[1,1,3,3,2,2,3,3,0,0,],[,,,3,,,,3,,,],[2,2,3,3,0,0,3,3,1,1,],[2,2,2,,0,"baby0",0,,1,1,1],[2,2,,,0,0,,,1,1,]]},"lvl2":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":13,"armoExtra":1,"starScore":[3400,5010,6000],"rainbow":0,"rowOffset":0,"map":[[,0,"baby0",0,,,1,"baby1",1,],[,,0,0,,2,,1,1,,],[,3,3,3,2,2,3,3,3,],[,3,0,0,2,2,2,0,0,3],[3,0,3,0,1,1,0,3,0,3],[3,1,1,3,1,"baby1",1,3,1,1,3],[2,1,0,1,1,1,1,0,1,2],[2,3,3,3,0,0,0,3,3,3,2],[2,2,1,3,0,0,3,1,2,2],[3,1,"baby1",0,2,2,2,0,"baby1",1,3],[3,0,1,2,3,3,2,1,0,3],[3,0,2,0,0,0,0,0,2,0,3],[0,1,2,0,0,0,0,2,1,0],[3,0,1,2,0,0,0,2,1,0,2],[3,0,1,2,0,0,3,1,0,2,],[1,3,3,2,1,1,1,3,2,2,1],[1,2,2,,1,1,,3,3,1],[1,,,,,1,,,,,1]]},"lvl3":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[15,15,15,15],"armoEachArmo":15,"starScore":[3000,4347,5000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[,,1,1,,,2,2,,],[,,,"baby1",,,,"baby2",,,],[,,0,3,,,3,0,,],[,,3,0,2,,2,0,3,,],[,3,0,1,2,2,1,0,3,],[3,2,2,1,0,"baby0",0,1,2,2,3],[3,3,2,1,0,0,1,2,3,3],[1,2,1,0,2,1,2,0,1,2,1],[1,2,2,3,1,1,3,3,3,1],[2,3,1,0,1,3,1,2,2,0,3],[2,3,1,0,3,2,3,2,0,3],[0,2,2,3,3,0,2,3,1,1,3],[0,0,1,1,1,0,1,1,3,1],[2,1,3,0,3,1,0,0,2,2,3],[3,0,1,3,,1,2,3,1,3],[0,0,3,3,,,1,2,2,1,1]]},"lvl4":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":13,"starScore":[3000,4500,6000],"armoExtra":1,"rainbow":0,"rowOffset":0,"arrow":{x:109,y:284},"speech":["Avoid hitting the - bubbles!","You'll lose 3 bubble ammo for popping one of those!"],"map":[[2,"baby2",2,3,3,0,"baby0",0,1,1],[2,2,"minus3","minus3",1,3,2,2,2,1,1],[0,0,0,1,1,1,3,2,2,3],[3,0,0,2,1,1,1,3,3,0,3],[3,3,3,"minus2","minus2",1,1,3,0,3],[1,3,3,"minus2","minus2",3,0,"minus0","minus0",0,3],[1,1,1,1,3,3,2,"minus0",1,3],[3,1,1,3,3,3,2,2,1,1,1],[3,2,2,2,2,1,2,2,2,2],["minus3","minus3",2,1,2,1,3,3,"minus3",0,2],[1,"minus3",3,1,1,1,2,"minus3",3,0],[1,1,0,0,3,3,1,2,0,0,0],[1,1,0,0,0,3,3,2,2,2],[1,2,2,2,0,0,3,3,3,2,2]]},"lvl5":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":13,"starScore":[2000,3252,4000],"armoExtra":1,"rainbow":0,"rowOffset":0,"speech":["Bubble block can't be popped!","Drop them to get rid of them!"],"arrow":{x:88,y:356},"map":[[,3,"baby3",3,,,2,"baby2",2,],[,,2,2,,,,1,1,,],[,,"wood",,,,,"wood",,],[,,2,2,2,"baby0",3,3,3,,],[,0,"wood",1,0,3,2,"wood",2,],[,0,"wood",1,3,0,1,2,"wood",3,],[3,"wood",3,"wood",1,2,"wood",2,"wood",1],[,3,"wood",3,0,0,3,0,"wood",0,],[1,2,2,"wood",1,3,"wood",1,3,0],[1,"wood",0,3,2,1,0,1,2,"wood",3],[0,3,,,,,,,2,0]]},"lvl6":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[10,10,10,10],"armoEachArmo":13,"starScore":[3900,4403,5075],"armoExtra":1,"rainbow":0,"rowOffset":0,"speech":["Try popping bubbles beside the clear bubbles","They take over the colour of the popped bubble"],"arrow":{x:89,y:354},"map":[[3,2,"baby1",0,3,2,1,"baby0",3,2],[0,3,2,1,0,3,2,1,0,3,2],[0,3,2,1,0,3,2,1,0,3],["ice","ice","babyice","ice","ice","ice","ice","ice","babyice","ice","ice"],[0,3,2,1,0,3,2,1,0,3],[1,0,3,2,1,0,3,2,1,0,3],[1,0,3,2,1,0,3,2,1,0],["ice","ice","ice","babyice","ice","ice","ice","babyice","ice","ice","ice"],[1,0,3,2,1,0,3,2,1,0],[2,1,0,3,2,1,0,3,2,1,0],[2,1,0,3,2,1,0,3,2,1],["ice","ice","babyice","ice","ice","ice","ice","ice","babyice","ice","ice"],[2,1,0,3,2,1,0,3,2,1]]},"lvl7":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":13,"starScore":[3100,4000,4900],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[,,1,3,3,2,3,1,,],[,,,0,2,"baby2",3,0,,,],[,,,0,0,2,0,,,],[,,,1,1,1,0,0,,,],[,,,2,2,2,2,,,],[,,,"wood",0,"baby3",1,1,,,],[,,,0,3,1,"wood",,,],[,,,"ice","ice","ice","ice","ice",,,],[,,,0,"wood",1,3,,,],[,,,0,0,1,2,3,,,],[,,,3,1,2,3,,,],[,,,3,1,2,0,0,,,],[,,,3,1,0,0,,,],[,,,"ice","ice","babyice","ice","ice",,,],[,,,0,"wood",1,3,,,],[,,,0,0,1,2,3,,,],[,,,3,1,2,3,,,],[,,,3,1,2,0,0,,,],[,,,3,1,0,0,,,],[,,,"ice","ice","babyice","ice","ice",,,],[,1,0,1,3,3,1,0,2,],[,,1,0,1,3,1,0,2,,],[,,1,0,3,1,0,2,,],[,,,3,3,2,2,2,,,],[,,,0,0,1,3,,,],[,,,,0,3,3,,,,],[,,,,0,3,,,,],[,,,,,3,,,,,]]},"lvl8":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":16,"starScore":[2500,3800,4300],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[,,,,"ice","ice",,,,],[,"ice","ice",,"ice",2,"ice",,"ice","ice",],["ice","baby1","ice","ice","ice","ice","ice","ice","baby3","ice"],[,"ice","ice",,"ice","ice","ice",,"ice","ice",],["ice",3,"ice","ice",0,2,"ice","ice",1,"ice"],[,"ice","ice",,0,"babyice",2,,"ice","ice",],["ice",2,"ice","ice",1,3,"ice","ice",0,"ice"],[,"ice","ice","ice","ice","ice","ice","ice","ice","ice",],["ice","ice","ice",3,"ice","ice",1,"ice","ice","ice"],["ice","ice",1,"ice","ice","ice","ice","ice",2,"ice","ice"],["ice","ice","ice",0,"ice","ice",3,"ice","ice","ice"],["ice","ice","baby2","ice","ice",3,"ice","ice","baby0","ice","ice"],["ice","ice","ice","ice",0,2,"ice","ice","ice","ice"],["ice",3,"ice",0,"ice","ice","ice",2,"ice",1,"ice"]]},"lvl9":{"colourSet":[["green","pink","purple","cyan"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[16,16,16,16],"armoEachArmo":16,"starScore":[1500,2405,4000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["ice","ice",,,"ice","ice",,,"ice","ice"],["ice","baby0","ice",,"ice","baby1","ice",,"ice","baby2","ice"],["ice","ice",,,"ice","ice",,,"ice","ice"],["ice","ice","ice",3,"ice","ice","ice",1,"ice","ice","ice"],[3,0,2,3,0,1,3,1,2,2],[0,1,3,0,2,3,0,2,3,1,1],[2,0,3,0,"ice","ice",1,0,2,3],[3,3,2,1,"ice","baby3","ice",1,3,2,0],[0,0,1,3,"ice","ice",2,2,0,0],[1,2,3,1,2,3,0,0,1,3,1],[1,1,2,3,3,2,2,3,0,1],["ice","ice","ice","ice","ice","ice","ice","ice","ice","ice","ice"],[0,1,2,3,2,3,2,3,0,1]]},"lvl10":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":16,"starScore":[3000,4000,5000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[3,2,"ice",2,1,"baby1","baby0",3,3,"ice"],[3,"babyice",2,"ice","ice","ice","ice","ice","ice","ice",2],[0,1,"ice","ice",2,0,0,1,"ice",3],["ice","ice","ice",1,"ice",1,"baby0",3,"ice",1,3],[0,3,"ice",2,"ice",2,3,"ice",1,1],[1,0,3,"ice","ice","ice",2,"ice",2,2,1],["ice","ice","ice","ice",0,"ice","ice","ice","ice",3],[1,0,3,"ice",2,0,"ice",2,3,"ice",3],[0,1,"ice",1,"baby2",3,"ice",0,3,"ice"],["ice","ice","ice",1,1,3,3,"ice",0,3,"ice"],[0,"ice","ice","ice","ice","ice","ice","ice",2,"ice"],[0,1,0,1,2,3,2,3,"ice","ice",3],[1,0,1,0,1,2,3,2,"ice",3]]},"lvl11":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[0,15,15,15],"armoEachArmo":15,"starScore":[1100,2000,3000],"armoExtra":1,"rainbow":0,"rowOffset":0,"speech":["Popping each + bubble will give you 3 extra bubbles"],"arrow":{x:72,y:318},"map":[[1,1,,,3,3,,,3,3],[2,"babyice",3,,2,"babyice",1,,2,"babyice",1],["minus2",3,,,"minus2","plus1",,,2,"minus1"],[,"babyice",,,,"babyice",,,,"babyice",],["plus2",2,,,3,1,,,"plus1",1],[3,"babyice",2,,"plus3","babyice","minus1",,1,"babyice","minus2"],[3,"plus3",,,3,"minus1",,,"minus2",2],[,"babyice",,,,"babyice",,,,"babyice",],[3,"minus3",,,1,1,,,2,2],["plus2","babyice","minus3",,3,"babyice",2,,"plus2","babyice","minus3"],[2,2,,,3,2,,,3,3],[,"babyice",,,,"babyice",,,,"babyice",],["plus2",2,,,3,2,,,"minus3",3],[1,"babyice",2,,"minus3","babyice","minus2",,3,"babyice",1],[1,1,,,1,1,,,1,1]]},"lvl12":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":20,"starScore":[2000,3000,4000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["baby0",0,,,1,3,,,2,"baby2"],[0,3,0,3,2,,0,1,2,1,2],[,3,3,,,,,1,1,],["ice","ice","ice","ice","ice","ice","ice","ice","ice","ice","ice"],[0,1,2,3,0,1,2,3,0,1],[1,2,"plus0",1,2,"plus3",0,"minus2",1,3,0],[3,1,2,3,0,"minus1",2,3,"plus0",1],["ice",2,"minus0",3,"plus2","ice",3,1,2,3,"ice"],[0,1,"ice",3,0,3,0,"ice","minus1",2],[3,2,"plus2",0,"minus1",3,1,2,0,0,1],[3,3,2,0,0,2,"plus2",0,1,1],[1,1,0,3,2,1,0,3,2,"minus0",3],[2,3,"ice",1,0,3,2,"ice",3,1]]},"lvl13":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[0,20,20,20],"armoEachArmo":24,"starScore":[3000,4000,5000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["babyice","babyice","babyice","babyice","babyice","babyice","babyice","babyice","babyice",],["ice","ice","ice","ice","ice","ice","ice","ice","ice","ice",],[,2,2,3,3,1,2,2,3,"ice"],[,,2,1,1,3,"ice",1,1,"ice","ice"],[,"ice","ice","ice","ice","ice","ice","ice","ice","ice"],[,"ice","ice",2,1,1,3,2,2,1,],["ice","ice",1,3,2,3,1,3,3,],[,"ice","ice",1,3,"ice",2,2,1,1,],[,"ice","ice","ice","ice","ice","ice","ice","ice",],[,,1,1,3,2,3,2,1,"ice",],[,,2,3,1,1,"ice",1,"ice","ice"],[,,"ice","ice","ice","ice","ice","ice","ice","ice",],[,"ice",2,3,1,2,3,1,1,],[,"ice","ice",2,"ice",3,3,2,3,1,],[,"ice","ice","ice","ice","ice","ice","ice","ice",],[,1,2,1,3,3,1,1,3,"ice",],[2,3,3,1,2,"ice",2,2,"ice","ice"],["ice","ice","ice","ice","ice","ice","ice","ice","ice","ice",]]},"lvl14":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,0],"armoEachArmo":16,"starScore":[2800,4000,6000],"armoExtra":1,"rainbow":0,"rowOffset":0,"arrow":{x:241,y:385},"speech":["Hitting thunder bubble will pop the whole row of bubbles!"],"map":[["babyice","babyice","babyice","babyice","babyice","wood","wood","thunder","wood","wood"],[2,2,0,0,1,1,0,"ice","ice",0,0],[1,0,"ice",2,1,2,2,"ice",2,2],[0,1,"ice","ice",1,0,2,0,1,1,0],[0,0,2,2,0,1,0,1,2,0],["wood","wood","thunder","wood","wood",2,2,"ice","ice",2,0],[0,"ice","ice",1,0,2,0,2,1,0],[0,2,"ice",1,2,1,1,0,2,1,1],[2,0,0,0,2,2,1,1,0,0],[2,1,"ice","ice",1,1,"wood","wood","thunder","wood","wood"],[0,1,0,2,0,1,1,"ice","ice",0],[0,0,1,2,0,0,2,0,"ice",0,0],[0,2,0,2,1,0,2,2,2,0],["wood","wood","wood","wood","wood","thunder","wood","wood","wood","wood","wood"],]},"lvl15":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[0,13,13,13],"armoEachArmo":20,"starScore":[1500,2500,3000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["wood","ice","ice","babyice","ice","ice","babyice","ice","ice","wood"],["baby1","wood","wood","wood","wood","thunder","wood","wood","wood","wood","baby3"],["wood","ice","ice","ice","ice","ice","ice","ice","ice","wood"],["baby2","wood",2,2,"ice","ice","ice","ice","ice","wood","baby2"],["wood",1,"thunder",3,"ice","minus1","minus1","minus2","minus3","wood"],["baby3","wood",1,3,"ice",3,3,"minus2","minus3","wood","baby1"],["wood","ice","ice","ice","minus2",1,"ice","ice","ice","wood"],["baby1","wood",2,1,2,1,"ice",2,3,"wood","baby3"],["wood","minus3",2,3,3,"ice",1,"thunder",1,"wood"],["baby2","wood","minus3",1,3,2,"ice",3,2,"wood","baby2"],["wood",1,1,2,"ice","minus2","ice","ice","ice","wood"],["baby3","wood","ice",2,1,1,2,"ice",3,"wood","baby1"],["wood","ice",2,"ice",1,"ice","ice",2,"ice","wood"]]},"lvl16":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":13,"starScore":[2000,4000,5000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["thunder",,3,3,,,,"ice",2,2],[,,2,"babyice",0,,,"ice",3,"babyice",1],[,,2,0,1,1,"ice",,3,1],[,3,3,"ice","ice",3,,0,,2,],[3,,,,,3,,0,,2],["ice","ice",2,2,"ice","ice",2,,1,,],[,0,,"ice","thunder","ice",,,1,],[,0,,3,"ice","ice",1,,,,],[2,,3,,2,,1,,,],[2,,0,,2,"ice",,1,0,0,],[,0,,3,,"babyice","ice",3,"thunder",0],[,,,3,,"ice",,,3,1,],[,,,"ice",2,2,2,1,,],[,0,0,"ice",3,,0,,1,,],[3,"babyice",1,,3,,0,,2,],[,3,2,,,0,,1,,2,],[,,,,,0,,1,,]]},"lvl17":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[16,16,16,16],"armoEachArmo":16,"starScore":[2000,3000,4200],"armoExtra":1,"rainbow":0,"rowOffset":0,"speech":["Avoid hitting skull bubbles at all course!","Otherwise you'll lose the game!"],"arrow":{x:127,y:182},"map":[["ice","ice","babyice","ice","ice","ice","ice","ice","babyice","ice"],[,1,2,"evil",0,,1,"evil",2,3,],[,1,2,0,,,1,2,3,],[,,0,1,,,,3,0,,],[1,0,2,1,1,3,3,2,1,1],[1,3,2,0,0,"evil",2,0,0,2,1],[,1,3,3,0,2,0,1,2,],[,1,"evil",2,3,,2,1,"evil",0,],[,1,2,,,,,3,0,],[,,"ice",,,,,,"ice",,],[1,"ice",3,2,1,2,1,0,"ice",3],["ice",0,3,"ice",1,0,1,"ice",2,0,"ice"],["ice",0,1,"ice",2,0,"ice",1,3,"ice"],[0,1,2,3,0,1,2,3,0,1,2]]},"lvl18":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"armoEachArmo":13,"starScore":[1800,3000,4000],"armoExtra":1,"rainbow":0,"rowOffset":0,"speech":["Shoot star bubble to pop all bubbles with the same colour with your shooting bubble"],"arrow":{x:243,y:183},"map":[[0,0,,2,2,1,1,,2,2],[1,"star",3,3,"evil","evil","evil",0,0,"star",3],[1,3,,"evil","baby0","baby0","evil",,0,3],[,,,"evil","baby3","baby1","baby2","evil",,,],[,3,3,"evil","baby3","baby2","evil",0,0,],[,,,3,"evil","evil","evil",0,,,],[,,,,1,1,,,,],[3,3,"evil",2,2,"star",2,2,"evil",3,3],[1,0,0,3,3,3,3,1,1,0],[1,0,1,2,1,2,0,"ice",0,1,3],[2,2,0,1,0,1,"evil","ice",2,3],[2,1,"ice","evil","ice",3,2,1,3,2,2],[1,2,3,1,2,3,2,1,0,3],[0,0,3,2,3,2,1,0,2,1,1]]},"lvl19":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[20,20,20,20],"armoEachArmo":26,"starScore":[1500,2500,4000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[3,"ice","babyice","ice",0,0,"ice","babyice","ice",1],["ice",,,,"ice","babyice","ice",,,,"ice"],["babyice","ice",3,1,0,2,2,1,"ice","babyice"],[,,,,"ice",,"ice",,,,],[,,1,1,0,0,2,2,,],[,,"evil",,"ice",,"evil",,1,,],[,2,,3,3,1,1,,3,],[,1,,"evil",,0,,1,,0,],[3,,1,,1,2,,2,,1],["ice","ice",2,"ice",3,"babyice",3,"ice",3,"ice",2],["ice",,3,,2,1,,0,,3],[,2,,"evil",,"ice",,"evil",,0,],[,0,,0,1,2,3,,"evil",],[,,0,"ice",,"ice",,"ice","ice",,],[,,1,3,2,0,1,3,,]]},"lvl20":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[20,20,20,20],"armoEachArmo":20,"starScore":[3000,5000,6000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[3,2,2,"baby1","baby1",3,3,3,"ice","ice"],[3,"ice","ice","ice",2,1,0,2,"ice","baby3","ice"],[1,0,0,2,3,3,0,3,"ice","ice"],[1,"wood","wood",0,1,3,2,2,1,3,1],["wood","thunder","ice","evil","evil","evil","evil","evil","evil","evil"],[3,"ice","ice",0,3,3,"baby2","baby0","baby3",1,1],[3,2,2,0,1,3,0,2,1,3],[0,2,"ice","ice","ice",1,1,"ice","ice","ice",3],[0,1,3,2,0,3,3,1,1,2],[0,1,1,3,0,2,0,1,"wood","wood",2],["evil","evil","evil","evil","evil","evil","evil","ice","thunder","wood"],[3,0,"baby3","baby2","baby0",2,3,2,"ice","ice",3],[3,2,0,1,1,3,1,2,0,3],[2,"ice","ice","ice",3,0,3,"ice","ice","ice",3],[2,2,0,0,3,2,0,1,3,1],[3,"wood","wood",3,2,2,1,3,0,0,1],["wood","thunder","ice","evil","evil","evil","evil","evil","evil","evil"],[0,"ice","ice",3,2,0,3,2,1,3,0],[3,1,2,3,2,0,2,0,2,1]]},"lvl21":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[20,20,20,0],"armoEachArmo":25,"starScore":[4000,5500,7000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[2,0,2,"ice","wood","ice",1,1,1,0],[2,1,1,"ice","wood","ice",2,"wood","wood",0,2],[1,0,"ice","thunder","ice",1,"wood","baby2","wood",2],[2,2,0,"ice","wood","ice",2,"wood","wood",1,1],[0,"wood","wood","ice","wood","ice",2,0,0,2],[0,"wood","baby1","wood","ice","thunder","ice",0,1,1,2],[1,"wood","wood",0,"ice","wood","ice",0,2,0],[1,0,0,1,0,"ice","wood","ice",2,1,0],[1,2,2,1,2,"ice","thunder","ice",0,1],[2,0,1,2,"ice","wood","ice","wood","wood",2,0],[0,1,0,"ice","thunder","ice","wood","baby0","wood",2],[2,1,2,"ice","wood","ice",2,"wood","wood",1,1],[2,0,"ice","wood","ice",1,2,0,0,1],[1,1,2,1,"ice","wood","ice",1,2,2,0],[0,2,0,1,"ice","wood","ice",1,1,0],[0,1,1,2,0,"ice","wood","ice",0,2,2]]},"lvl22":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[0,20,20,20],"armoEachArmo":30,"starScore":[1500,3000,5000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["ice","babyice",2,"babyice",2,1,"babyice","ice","babyice","ice"],[,"ice",,1,3,,3,2,,"ice",],[,"ice","ice",,1,2,,"evil",1,],[,,"evil",,,"ice",,,"ice",,],[,1,3,,"ice","ice",,2,1,],[,1,"babyice","evil",3,,"ice","evil","babyice",1,],[,1,2,"ice","ice","evil","ice",2,1,],[,,"ice",,,,,,"ice",,],[,"ice",3,,3,3,,1,"ice",],[,"ice",,"ice",1,,2,"evil",,"ice",],["evil","ice",1,"ice",1,2,"ice","ice",2,"ice"],[,,,,,"ice",,,,,],[,,,,"ice","ice",,,,],[,1,1,,"ice",,"evil",,2,2,],[1,"babyice",1,"ice","ice","ice","ice",2,"babyice",2],[,1,1,,"evil",,2,,2,2,],[,"ice",,,1,"ice",,,"evil",],[,"evil",1,,,"ice",,,"ice","evil",],["ice",,"ice",,3,"evil",,"ice",,"ice"],[1,"ice",3,"ice",3,"babyice",3,"ice",3,"ice",2],[,,,,3,3,,,,]]},"lvl23":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[20,20,20,20],"armoEachArmo":30,"starScore":[5000,7000,10000],"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[["babyice","babyice","thunder","babyice","thunder","babyice","babyice","thunder","babyice","babyice"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r","r"],["r","r","r","r","r","r","r","r","r","r"]]},"lvl24":{"colourSet":[["cyan","pink","purple","green"],["red","orange","pink","purple"],["green","yellow","orange","purple"]],"armo":[13,13,13,13],"starScore":[100,500,600],"armoEachArmo":20,"armoExtra":1,"rainbow":0,"rowOffset":0,"map":[[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],[,,,,,,,,,],[,,,,,,,,,,],]},};
var _SETTINGS={DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!0,Link:"http://google.com",LinkEnabled:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:BrandingSplashScreen.enabled},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,Width:166,Height:61}},MoreGames:{Enabled:BrandingInGameMoreGames.enabled,Link:BrandingInGameMoreGames.url,NewWindow:!0}};!function(b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?c(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return c(b)}:c(b)}("undefined"!=typeof window?window:this,function(b,c){function d(b,c){c=c||I;var t=c.createElement("script");t.text=b;c.head.appendChild(t).parentNode.removeChild(t)}function e(b){var c=!!b&&"length"in b&&b.length,t=f.type(b);return"function"!==t&&!f.isWindow(b)&&("array"===t||0===c||"number"==
typeof c&&0<c&&c-1 in b)}function g(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()}function l(b,c,t){return f.isFunction(c)?f.grep(b,function(b,y){return!!c.call(b,y,b)!==t}):c.nodeType?f.grep(b,function(b){return b===c!==t}):"string"!=typeof c?f.grep(b,function(b){return-1<Da.call(c,b)!==t}):Fc.test(c)?f.filter(c,b,t):(c=f.filter(c,b),f.grep(b,function(b){return-1<Da.call(c,b)!==t&&1===b.nodeType}))}function p(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function n(b){return b}
function q(b){throw b;}function u(b,c,t,d){var D;try{b&&f.isFunction(D=b.promise)?D.call(b).done(c).fail(t):b&&f.isFunction(D=b.then)?D.call(b,c,t):c.apply(void 0,[b].slice(d))}catch(e){t.apply(void 0,[e])}}function s(){I.removeEventListener("DOMContentLoaded",s);b.removeEventListener("load",s);f.ready()}function j(){this.expando=f.expando+j.uid++}function m(b,c,t){var d;if(void 0===t&&1===b.nodeType)if(d="data-"+c.replace(Gc,"-$&").toLowerCase(),t=b.getAttribute(d),"string"==typeof t){try{t="true"===
t||"false"!==t&&("null"===t?null:t===+t+""?+t:Hc.test(t)?JSON.parse(t):t)}catch(f){}T.set(b,c,t)}else t=void 0;return t}function r(b,c,t,d){var D,e=1,E=20,j=d?function(){return d.cur()}:function(){return f.css(b,c,"")},g=j(),m=t&&t[3]||(f.cssNumber[c]?"":"px"),n=(f.cssNumber[c]||"px"!==m&&+g)&&Ea.exec(f.css(b,c));if(n&&n[3]!==m){m=m||n[3];t=t||[];n=+g||1;do e=e||".5",n/=e,f.style(b,c,n+m);while(e!==(e=j()/g)&&1!==e&&--E)}return t&&(n=+n||+g||0,D=t[1]?n+(t[1]+1)*t[2]:+t[2],d&&(d.unit=m,d.start=n,d.end=
D)),D}function x(b,c){for(var t,d,D=[],e=0,E=b.length;e<E;e++)if(d=b[e],d.style)if(t=d.style.display,c){if("none"===t&&(D[e]=H.get(d,"display")||null,D[e]||(d.style.display="")),""===d.style.display&&Na(d)){t=D;var j=e,g,n=void 0;g=d.ownerDocument;var m=d.nodeName;g=(d=Eb[m])?d:(n=g.body.appendChild(g.createElement(m)),d=f.css(n,"display"),n.parentNode.removeChild(n),"none"===d&&(d="block"),Eb[m]=d,d);t[j]=g}}else"none"!==t&&(D[e]="none",H.set(d,"display",t));for(e=0;e<E;e++)null!=D[e]&&(b[e].style.display=
D[e]);return b}function z(b,c){var t;return t="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[],void 0===c||c&&g(b,c)?f.merge([b],t):t}function A(b,c){for(var t=0,d=b.length;t<d;t++)H.set(b[t],"globalEval",!c||H.get(c[t],"globalEval"))}function J(b,c,t,d,D){for(var e,E,j,g,n=c.createDocumentFragment(),m=[],l=0,r=b.length;l<r;l++)if(e=b[l],e||0===e)if("object"===f.type(e))f.merge(m,e.nodeType?[e]:e);else if(Ic.test(e)){E=
E||n.appendChild(c.createElement("div"));j=(Fb.exec(e)||["",""])[1].toLowerCase();j=W[j]||W._default;E.innerHTML=j[1]+f.htmlPrefilter(e)+j[2];for(j=j[0];j--;)E=E.lastChild;f.merge(m,E.childNodes);E=n.firstChild;E.textContent=""}else m.push(c.createTextNode(e));n.textContent="";for(l=0;e=m[l++];)if(d&&-1<f.inArray(e,d))D&&D.push(e);else if(g=f.contains(e.ownerDocument,e),E=z(n.appendChild(e),"script"),g&&A(E),t)for(j=0;e=E[j++];)Gb.test(e.type||"")&&t.push(e);return n}function Fa(){return!0}function K(){return!1}
function Q(){try{return I.activeElement}catch(b){}}function R(b,c,t,d,D,e){var E,j;if("object"==typeof c){"string"!=typeof t&&(d=d||t,t=void 0);for(j in c)R(b,j,t,d,c[j],e);return b}if(null==d&&null==D?(D=t,d=t=void 0):null==D&&("string"==typeof t?(D=d,d=void 0):(D=d,d=t,t=void 0)),!1===D)D=K;else if(!D)return b;return 1===e&&(E=D,D=function(b){return f().off(b),E.apply(this,arguments)},D.guid=E.guid||(E.guid=f.guid++)),b.each(function(){f.event.add(this,c,D,d,t)})}function Oa(b,c){return g(b,"table")&&
g(11!==c.nodeType?c:c.firstChild,"tr")?f(">tbody",b)[0]||b:b}function jb(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function Pa(b){var c=Jc.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function Hb(b,c){var t,d,D,e,E,j;if(1===c.nodeType){if(H.hasData(b)&&(t=H.access(b),d=H.set(c,t),j=t.events))for(D in delete d.handle,d.events={},j){t=0;for(d=j[D].length;t<d;t++)f.event.add(c,D,j[D][t])}T.hasData(b)&&(e=T.access(b),E=f.extend({},e),T.set(c,E))}}function xa(b,c,t,
B){c=Ib.apply([],c);var D,e,j,g,n=0,m=b.length,l=m-1,r=c[0],q=f.isFunction(r);if(q||1<m&&"string"==typeof r&&!M.checkClone&&Kc.test(r))return b.each(function(d){var f=b.eq(d);q&&(c[0]=r.call(this,d,f.html()));xa(f,c,t,B)});if(m&&(D=J(c,b[0].ownerDocument,!1,b,B),e=D.firstChild,1===D.childNodes.length&&(D=e),e||B)){e=f.map(z(D,"script"),jb);for(j=e.length;n<m;n++)g=D,n!==l&&(g=f.clone(g,!0,!0),j&&f.merge(e,z(g,"script"))),t.call(b[n],g,n);if(j){D=e[e.length-1].ownerDocument;f.map(e,Pa);for(n=0;n<j;n++)g=
e[n],Gb.test(g.type||"")&&!H.access(g,"globalEval")&&f.contains(D,g)&&(g.src?f._evalUrl&&f._evalUrl(g.src):d(g.textContent.replace(Mc,""),D))}}return b}function Jb(b,c,t){for(var d=c?f.filter(c,b):b,D=0;null!=(c=d[D]);D++)t||1!==c.nodeType||f.cleanData(z(c)),c.parentNode&&(t&&f.contains(c.ownerDocument,c)&&A(z(c,"script")),c.parentNode.removeChild(c));return b}function Ga(b,c,t){var d,D,e,j,g=b.style;return t=t||Qa(b),t&&(j=t.getPropertyValue(c)||t[c],""!==j||f.contains(b.ownerDocument,b)||(j=f.style(b,
c)),!M.pixelMarginRight()&&kb.test(j)&&Kb.test(c)&&(d=g.width,D=g.minWidth,e=g.maxWidth,g.minWidth=g.maxWidth=g.width=j,j=t.width,g.width=d,g.minWidth=D,g.maxWidth=e)),void 0!==j?j+"":j}function Lb(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function Mb(b){var c=f.cssProps[b];if(!c){var c=f.cssProps,t;a:if(t=b,!(t in Nb)){for(var d=t[0].toUpperCase()+t.slice(1),D=Ob.length;D--;)if(t=Ob[D]+d,t in Nb)break a;t=void 0}c=c[b]=t||b}return c}function Pb(b,
c,t){return(b=Ea.exec(c))?Math.max(0,b[2]-(t||0))+(b[3]||"px"):c}function Qb(b,c,t,d,D){var e=0;for(c=t===(d?"border":"content")?4:"width"===c?1:0;4>c;c+=2)"margin"===t&&(e+=f.css(b,t+oa[c],!0,D)),d?("content"===t&&(e-=f.css(b,"padding"+oa[c],!0,D)),"margin"!==t&&(e-=f.css(b,"border"+oa[c]+"Width",!0,D))):(e+=f.css(b,"padding"+oa[c],!0,D),"padding"!==t&&(e+=f.css(b,"border"+oa[c]+"Width",!0,D)));return e}function Rb(b,c,t){var d,e=Qa(b),j=Ga(b,c,e),E="border-box"===f.css(b,"boxSizing",!1,e);return kb.test(j)?
j:(d=E&&(M.boxSizingReliable()||j===b.style[c]),"auto"===j&&(j=b["offset"+c[0].toUpperCase()+c.slice(1)]),j=parseFloat(j)||0,j+Qb(b,c,t||(E?"border":"content"),d,e)+"px")}function U(b,c,t,d,f){return new U.prototype.init(b,c,t,d,f)}function lb(){Ra&&(!1===I.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(lb):b.setTimeout(lb,f.fx.interval),f.fx.tick())}function Sb(){return b.setTimeout(function(){ya=void 0}),ya=f.now()}function Sa(b,c){var t,d=0,f={height:b};for(c=c?1:0;4>d;d+=2-c)t=oa[d],
f["margin"+t]=f["padding"+t]=b;return c&&(f.opacity=f.width=b),f}function Tb(b,c,t){for(var d,f=(ba.tweeners[c]||[]).concat(ba.tweeners["*"]),e=0,j=f.length;e<j;e++)if(d=f[e].call(t,c,b))return d}function ba(b,c,t){var d,e,j=0,E=ba.prefilters.length,g=f.Deferred().always(function(){delete n.elem}),n=function(){if(e)return!1;for(var c=ya||Sb(),c=Math.max(0,m.startTime+m.duration-c),C=1-(c/m.duration||0),d=0,t=m.tweens.length;d<t;d++)m.tweens[d].run(C);return g.notifyWith(b,[m,C,c]),1>C&&t?c:(t||g.notifyWith(b,
[m,1,0]),g.resolveWith(b,[m]),!1)},m=g.promise({elem:b,props:f.extend({},c),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},t),originalProperties:c,originalOptions:t,startTime:ya||Sb(),duration:t.duration,tweens:[],createTween:function(c,C){var d=f.Tween(b,m.opts,c,C,m.opts.specialEasing[c]||m.opts.easing);return m.tweens.push(d),d},stop:function(c){var C=0,d=c?m.tweens.length:0;if(e)return this;for(e=!0;C<d;C++)m.tweens[C].run(1);return c?(g.notifyWith(b,[m,1,0]),g.resolveWith(b,[m,
c])):g.rejectWith(b,[m,c]),this}});c=m.props;t=m.opts.specialEasing;var l,r,q,u;for(d in c)if(l=f.camelCase(d),r=t[l],q=c[d],Array.isArray(q)&&(r=q[1],q=c[d]=q[0]),d!==l&&(c[l]=q,delete c[d]),u=f.cssHooks[l],u&&"expand"in u)for(d in q=u.expand(q),delete c[l],q)d in c||(c[d]=q[d],t[d]=r);else t[l]=r;for(;j<E;j++)if(d=ba.prefilters[j].call(m,b,c,m.opts))return f.isFunction(d.stop)&&(f._queueHooks(m.elem,m.opts.queue).stop=f.proxy(d.stop,d)),d;return f.map(c,Tb,m),f.isFunction(m.opts.start)&&m.opts.start.call(b,
m),m.progress(m.opts.progress).done(m.opts.done,m.opts.complete).fail(m.opts.fail).always(m.opts.always),f.fx.timer(f.extend(n,{elem:b,anim:m,queue:m.opts.queue})),m}function pa(b){return(b.match(X)||[]).join(" ")}function qa(b){return b.getAttribute&&b.getAttribute("class")||""}function mb(b,c,d,B){var e;if(Array.isArray(c))f.each(c,function(c,C){d||Nc.test(b)?B(b,C):mb(b+"["+("object"==typeof C&&null!=C?c:"")+"]",C,d,B)});else if(d||"object"!==f.type(c))B(b,c);else for(e in c)mb(b+"["+e+"]",c[e],
d,B)}function Ub(b){return function(c,d){"string"!=typeof c&&(d=c,c="*");var B,e=0,j=c.toLowerCase().match(X)||[];if(f.isFunction(d))for(;B=j[e++];)"+"===B[0]?(B=B.slice(1)||"*",(b[B]=b[B]||[]).unshift(d)):(b[B]=b[B]||[]).push(d)}}function Vb(b,c,d,B){function e(g){var m;return j[g]=!0,f.each(b[g]||[],function(b,y){var f=y(c,d,B);return"string"!=typeof f||E||j[f]?E?!(m=f):void 0:(c.dataTypes.unshift(f),e(f),!1)}),m}var j={},E=b===nb;return e(c.dataTypes[0])||!j["*"]&&e("*")}function ob(b,c){var d,
B,e=f.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((e[d]?b:B||(B={}))[d]=c[d]);return B&&f.extend(!0,b,B),b}var ra=[],I=b.document,Oc=Object.getPrototypeOf,sa=ra.slice,Ib=ra.concat,pb=ra.push,Da=ra.indexOf,Ta={},Wb=Ta.toString,Ua=Ta.hasOwnProperty,Xb=Ua.toString,Pc=Xb.call(Object),M={},f=function(b,c){return new f.fn.init(b,c)},Qc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Rc=/^-ms-/,Sc=/-([a-z])/g,Tc=function(b,c){return c.toUpperCase()};f.fn=f.prototype={jquery:"3.2.1",constructor:f,length:0,
toArray:function(){return sa.call(this)},get:function(b){return null==b?sa.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=f.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return f.each(this,b)},map:function(b){return this.pushStack(f.map(this,function(c,d){return b.call(c,d,c)}))},slice:function(){return this.pushStack(sa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=
+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:pb,sort:ra.sort,splice:ra.splice};f.extend=f.fn.extend=function(){var b,c,d,B,e,j,E=arguments[0]||{},g=1,m=arguments.length,n=!1;"boolean"==typeof E&&(n=E,E=arguments[g]||{},g++);"object"==typeof E||f.isFunction(E)||(E={});for(g===m&&(E=this,g--);g<m;g++)if(null!=(b=arguments[g]))for(c in b)d=E[c],B=b[c],E!==B&&(n&&B&&(f.isPlainObject(B)||(e=Array.isArray(B)))?(e?(e=!1,j=d&&
Array.isArray(d)?d:[]):j=d&&f.isPlainObject(d)?d:{},E[c]=f.extend(n,j,B)):void 0!==B&&(E[c]=B));return E};f.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===f.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=f.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,d;return!(!b||"[object Object]"!==
Wb.call(b))&&(!(c=Oc(b))||(d=Ua.call(c,"constructor")&&c.constructor,"function"==typeof d&&Xb.call(d)===Pc))},isEmptyObject:function(b){for(var c in b)return!1;return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?Ta[Wb.call(b)]||"object":typeof b},globalEval:function(b){d(b)},camelCase:function(b){return b.replace(Rc,"ms-").replace(Sc,Tc)},each:function(b,c){var d,B=0;if(e(b))for(d=b.length;B<d&&!1!==c.call(b[B],B,b[B]);B++);else for(B in b)if(!1===c.call(b[B],B,
b[B]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Qc,"")},makeArray:function(b,c){var d=c||[];return null!=b&&(e(Object(b))?f.merge(d,"string"==typeof b?[b]:b):pb.call(d,b)),d},inArray:function(b,c,d){return null==c?-1:Da.call(c,b,d)},merge:function(b,c){for(var d=+c.length,B=0,f=b.length;B<d;B++)b[f++]=c[B];return b.length=f,b},grep:function(b,c,d){for(var B=[],f=0,e=b.length,j=!d;f<e;f++)d=!c(b[f],f),d!==j&&B.push(b[f]);return B},map:function(b,c,d){var B,f,j=0,g=[];if(e(b))for(B=
b.length;j<B;j++)f=c(b[j],j,d),null!=f&&g.push(f);else for(j in b)f=c(b[j],j,d),null!=f&&g.push(f);return Ib.apply([],g)},guid:1,proxy:function(b,c){var d,B,e;if("string"==typeof c&&(d=b[c],c=b,b=d),f.isFunction(b))return B=sa.call(arguments,2),e=function(){return b.apply(c||this,B.concat(sa.call(arguments)))},e.guid=b.guid=b.guid||f.guid++,e},now:Date.now,support:M});"function"==typeof Symbol&&(f.fn[Symbol.iterator]=ra[Symbol.iterator]);f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(b,c){Ta["[object "+c+"]"]=c.toLowerCase()});var ka,qb=b,G=function(b,c,d,B){var f,e,j,g,m,n=c&&c.ownerDocument,l=c?c.nodeType:9;if(d=d||[],"string"!=typeof b||!b||1!==l&&9!==l&&11!==l)return d;if(!B&&((c?c.ownerDocument||c:Y)!==F&&la(c),c=c||F,Z)){if(11!==l&&(g=Uc.exec(b)))if(f=g[1])if(9===l){if(!(e=c.getElementById(f)))return d;if(e.id===f)return d.push(e),d}else{if(n&&(e=n.getElementById(f))&&Ha(c,e)&&e.id===f)return d.push(e),d}else{if(g[2])return ma.apply(d,c.getElementsByTagName(b)),
d;if((f=g[3])&&O.getElementsByClassName&&c.getElementsByClassName)return ma.apply(d,c.getElementsByClassName(f)),d}if(O.qsa&&!Va[b+" "]&&(!S||!S.test(b))){if(1!==l)n=c,m=b;else if("object"!==c.nodeName.toLowerCase()){(j=c.getAttribute("id"))?j=j.replace(Yb,Zb):c.setAttribute("id",j=P);e=Ia(b);for(f=e.length;f--;)e[f]="#"+j+" "+Wa(e[f]);m=e.join(",");n=rb.test(b)&&sb(c.parentNode)||c}if(m)try{return ma.apply(d,n.querySelectorAll(m)),d}catch(r){}finally{j===P&&c.removeAttribute("id")}}}return $b(b.replace(Xa,
"$1"),c,d,B)},tb=function(){function b(d,f){return c.push(d+" ")>L.cacheLength&&delete b[c.shift()],b[d+" "]=f}var c=[];return b},ca=function(b){return b[P]=!0,b},fa=function(b){var c=F.createElement("fieldset");try{return!!b(c)}catch(d){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}},ub=function(b,c){for(var d=b.split("|"),f=d.length;f--;)L.attrHandle[d[f]]=c},ac=function(b,c){var d=c&&b,f=d&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(f)return f;if(d)for(;d=d.nextSibling;)if(d===
c)return-1;return b?1:-1},Vc=function(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}},Wc=function(b){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===b}},bc=function(b){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===b:c.disabled===b:c.isDisabled===b||c.isDisabled!==!b&&Xc(c)===b:c.disabled===b:"label"in c&&c.disabled===b}},ta=function(b){return ca(function(c){return c=
+c,ca(function(d,f){for(var e,j=b([],d.length,c),g=j.length;g--;)d[e=j[g]]&&(d[e]=!(f[e]=d[e]))})})},sb=function(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b},cc=function(){},Wa=function(b){for(var c=0,d=b.length,f="";c<d;c++)f+=b[c].value;return f},Ya=function(b,c,d){var f=c.dir,e=c.next,j=e||f,g=d&&"parentNode"===j,m=Yc++;return c.first?function(c,d,C){for(;c=c[f];)if(1===c.nodeType||g)return b(c,d,C);return!1}:function(c,d,C){var t,n,l,r=[ga,m];if(C)for(;c=c[f];){if((1===c.nodeType||
g)&&b(c,d,C))return!0}else for(;c=c[f];)if(1===c.nodeType||g)if(l=c[P]||(c[P]={}),n=l[c.uniqueID]||(l[c.uniqueID]={}),e&&e===c.nodeName.toLowerCase())c=c[f]||c;else{if((t=n[j])&&t[0]===ga&&t[1]===m)return r[2]=t[2];if(n[j]=r,r[2]=b(c,d,C))return!0}return!1}},vb=function(b){return 1<b.length?function(c,d,f){for(var e=b.length;e--;)if(!b[e](c,d,f))return!1;return!0}:b[0]},Za=function(b,c,d,f,e){for(var j,g=[],m=0,n=b.length,l=null!=c;m<n;m++)(j=b[m])&&(d&&!d(j,f,e)||(g.push(j),l&&c.push(m)));return g},
wb=function(b,c,d,f,e,j){return f&&!f[P]&&(f=wb(f)),e&&!e[P]&&(e=wb(e,j)),ca(function(j,g,m,ea){var n,l,r=[],q=[],u=g.length,p;if(!(p=j)){p=c||"*";for(var x=m.nodeType?[m]:m,s=[],z=0,A=x.length;z<A;z++)G(p,x[z],s);p=s}p=!b||!j&&c?p:Za(p,r,b,m,ea);x=d?e||(j?b:u||f)?[]:g:p;if(d&&d(p,x,m,ea),f){n=Za(x,q);f(n,[],m,ea);for(m=n.length;m--;)(l=n[m])&&(x[q[m]]=!(p[q[m]]=l))}if(j){if(e||b){if(e){n=[];for(m=x.length;m--;)(l=x[m])&&n.push(p[m]=l);e(null,x=[],n,ea)}for(m=x.length;m--;)(l=x[m])&&-1<(n=e?ua(j,
l):r[m])&&(j[n]=!(g[n]=l))}}else x=Za(x===g?x.splice(u,x.length):x),e?e(null,g,x,ea):ma.apply(g,x)})},xb=function(b){var c,d,f,e=b.length,j=L.relative[b[0].type];d=j||L.relative[" "];for(var g=j?1:0,m=Ya(function(b){return b===c},d,!0),n=Ya(function(b){return-1<ua(c,b)},d,!0),l=[function(b,y,d){b=!j&&(d||y!==$a)||((c=y).nodeType?m(b,y,d):n(b,y,d));return c=null,b}];g<e;g++)if(d=L.relative[b[g].type])l=[Ya(vb(l),d)];else{if(d=L.filter[b[g].type].apply(null,b[g].matches),d[P]){for(f=++g;f<e&&!L.relative[b[f].type];f++);
return wb(1<g&&vb(l),1<g&&Wa(b.slice(0,g-1).concat({value:" "===b[g-2].type?"*":""})).replace(Xa,"$1"),d,g<f&&xb(b.slice(g,f)),f<e&&xb(b=b.slice(f)),f<e&&Wa(b))}l.push(d)}return vb(l)},za,O,L,ab,dc,Ia,yb,$b,$a,na,Aa,la,F,aa,Z,S,va,bb,Ha,P="sizzle"+1*new Date,Y=qb.document,ga=0,Yc=0,ec=tb(),fc=tb(),Va=tb(),zb=function(b,c){return b===c&&(Aa=!0),0},Zc={}.hasOwnProperty,wa=[],$c=wa.pop,ad=wa.push,ma=wa.push,gc=wa.slice,ua=function(b,c){for(var d=0,f=b.length;d<f;d++)if(b[d]===c)return d;return-1},bd=
/[\x20\t\r\n\f]+/g,Xa=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,cd=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,dd=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ed=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,fd=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
gd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,cb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},hd=/^(?:input|select|textarea|button)$/i,id=/^h\d$/i,Ja=/^[^{]+\{\s*\[native \w/,Uc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rb=/[+~]/,ha=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ia=function(b,c,d){b="0x"+c-65536;return b!==b||d?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},Yb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Zb=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},hc=function(){la()},
Xc=Ya(function(b){return!0===b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{ma.apply(wa=gc.call(Y.childNodes),Y.childNodes),wa[Y.childNodes.length].nodeType}catch(Ld){ma={apply:wa.length?function(b,c){ad.apply(b,gc.call(c))}:function(b,c){for(var d=b.length,f=0;b[d++]=c[f++];);b.length=d-1}}}O=G.support={};dc=G.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};la=G.setDocument=function(b){var c,d;b=b?b.ownerDocument||b:Y;return b!==
F&&9===b.nodeType&&b.documentElement?(F=b,aa=F.documentElement,Z=!dc(F),Y!==F&&(d=F.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",hc,!1):d.attachEvent&&d.attachEvent("onunload",hc)),O.attributes=fa(function(b){return b.className="i",!b.getAttribute("className")}),O.getElementsByTagName=fa(function(b){return b.appendChild(F.createComment("")),!b.getElementsByTagName("*").length}),O.getElementsByClassName=Ja.test(F.getElementsByClassName),O.getById=fa(function(b){return aa.appendChild(b).id=
P,!F.getElementsByName||!F.getElementsByName(P).length}),O.getById?(L.filter.ID=function(b){var c=b.replace(ha,ia);return function(b){return b.getAttribute("id")===c}},L.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&Z){var y=c.getElementById(b);return y?[y]:[]}}):(L.filter.ID=function(b){var c=b.replace(ha,ia);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}},L.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&
Z){var y,d,C,t=c.getElementById(b);if(t){if(y=t.getAttributeNode("id"),y&&y.value===b)return[t];C=c.getElementsByName(b);for(d=0;t=C[d++];)if(y=t.getAttributeNode("id"),y&&y.value===b)return[t]}return[]}}),L.find.TAG=O.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):O.qsa?c.querySelectorAll(b):void 0}:function(b,c){var y,d=[],C=0,t=c.getElementsByTagName(b);if("*"===b){for(;y=t[C++];)1===y.nodeType&&d.push(y);return d}return t},L.find.CLASS=
O.getElementsByClassName&&function(b,c){if("undefined"!=typeof c.getElementsByClassName&&Z)return c.getElementsByClassName(b)},va=[],S=[],(O.qsa=Ja.test(F.querySelectorAll))&&(fa(function(b){aa.appendChild(b).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+P+"-]").length||S.push("~=");b.querySelectorAll(":checked").length||S.push(":checked");b.querySelectorAll("a#"+P+"+*").length||S.push(".#.+[+~]")}),fa(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=F.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
S.push(":enabled",":disabled");aa.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&S.push(":enabled",":disabled");b.querySelectorAll("*,:x");S.push(",.*:")})),(O.matchesSelector=Ja.test(bb=aa.matches||aa.webkitMatchesSelector||aa.mozMatchesSelector||aa.oMatchesSelector||aa.msMatchesSelector))&&fa(function(b){O.disconnectedMatch=bb.call(b,"*");bb.call(b,"[s!='']:x");va.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
S=S.length&&RegExp(S.join("|")),va=va.length&&RegExp(va.join("|")),c=Ja.test(aa.compareDocumentPosition),Ha=c||Ja.test(aa.contains)?function(b,c){var y=9===b.nodeType?b.documentElement:b,d=c&&c.parentNode;return b===d||!(!d||1!==d.nodeType||!(y.contains?y.contains(d):b.compareDocumentPosition&&16&b.compareDocumentPosition(d)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},zb=c?function(b,c){if(b===c)return Aa=!0,0;var y=!b.compareDocumentPosition-!c.compareDocumentPosition;
return y?y:(y=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&y||!O.sortDetached&&c.compareDocumentPosition(b)===y?b===F||b.ownerDocument===Y&&Ha(Y,b)?-1:c===F||c.ownerDocument===Y&&Ha(Y,c)?1:na?ua(na,b)-ua(na,c):0:4&y?-1:1)}:function(b,c){if(b===c)return Aa=!0,0;var y,d=0;y=b.parentNode;var C=c.parentNode,t=[b],f=[c];if(!y||!C)return b===F?-1:c===F?1:y?-1:C?1:na?ua(na,b)-ua(na,c):0;if(y===C)return ac(b,c);for(y=b;y=y.parentNode;)t.unshift(y);for(y=c;y=y.parentNode;)f.unshift(y);
for(;t[d]===f[d];)d++;return d?ac(t[d],f[d]):t[d]===Y?-1:f[d]===Y?1:0},F):F};G.matches=function(b,c){return G(b,null,null,c)};G.matchesSelector=function(b,c){if((b.ownerDocument||b)!==F&&la(b),c=c.replace(ed,"='$1']"),O.matchesSelector&&Z&&!Va[c+" "]&&(!va||!va.test(c))&&(!S||!S.test(c)))try{var d=bb.call(b,c);if(d||O.disconnectedMatch||b.document&&11!==b.document.nodeType)return d}catch(f){}return 0<G(c,F,null,[b]).length};G.contains=function(b,c){return(b.ownerDocument||b)!==F&&la(b),Ha(b,c)};G.attr=
function(b,c){(b.ownerDocument||b)!==F&&la(b);var d=L.attrHandle[c.toLowerCase()],d=d&&Zc.call(L.attrHandle,c.toLowerCase())?d(b,c,!Z):void 0;return void 0!==d?d:O.attributes||!Z?b.getAttribute(c):(d=b.getAttributeNode(c))&&d.specified?d.value:null};G.escape=function(b){return(b+"").replace(Yb,Zb)};G.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};G.uniqueSort=function(b){var c,d=[],f=0,e=0;if(Aa=!O.detectDuplicates,na=!O.sortStable&&b.slice(0),b.sort(zb),Aa){for(;c=b[e++];)c===
b[e]&&(f=d.push(e));for(;f--;)b.splice(d[f],1)}return na=null,b};ab=G.getText=function(b){var c,d="",f=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=ab(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[f++];)d+=ab(c);return d};L=G.selectors={cacheLength:50,createPseudo:ca,match:cb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},
"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(ha,ia),b[3]=(b[3]||b[4]||b[5]||"").replace(ha,ia),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||G.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&G.error(b[0]),b},PSEUDO:function(b){var c,d=!b[6]&&b[2];return cb.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":d&&fd.test(d)&&
(c=Ia(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(b[0]=b[0].slice(0,c),b[2]=d.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(ha,ia).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=ec[b+" "];return c||(c=RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))&&ec(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||
"")})},ATTR:function(b,c,d){return function(f){f=G.attr(f,b);return null==f?"!="===c:!c||(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&-1<f.indexOf(d):"$="===c?d&&f.slice(-d.length)===d:"~="===c?-1<(" "+f.replace(bd," ")+" ").indexOf(d):"|="===c&&(f===d||f.slice(0,d.length+1)===d+"-"))}},CHILD:function(b,c,d,f,e){var j="nth"!==b.slice(0,3),g="last"!==b.slice(-4),m="of-type"===c;return 1===f&&0===e?function(b){return!!b.parentNode}:function(c,d,C){var t,n,l,r,q,u;d=j!==
g?"nextSibling":"previousSibling";var x=c.parentNode,p=m&&c.nodeName.toLowerCase();C=!C&&!m;var s=!1;if(x){if(j){for(;d;){for(r=c;r=r[d];)if(m?r.nodeName.toLowerCase()===p:1===r.nodeType)return!1;u=d="only"===b&&!u&&"nextSibling"}return!0}if(u=[g?x.firstChild:x.lastChild],g&&C){r=x;l=r[P]||(r[P]={});n=l[r.uniqueID]||(l[r.uniqueID]={});t=n[b]||[];s=(q=t[0]===ga&&t[1])&&t[2];for(r=q&&x.childNodes[q];r=++q&&r&&r[d]||(s=q=0)||u.pop();)if(1===r.nodeType&&++s&&r===c){n[b]=[ga,q,s];break}}else if(C&&(r=
c,l=r[P]||(r[P]={}),n=l[r.uniqueID]||(l[r.uniqueID]={}),t=n[b]||[],q=t[0]===ga&&t[1],s=q),!1===s)for(;(r=++q&&r&&r[d]||(s=q=0)||u.pop())&&(!(m?r.nodeName.toLowerCase()===p:1===r.nodeType)||!++s||!(C&&(l=r[P]||(r[P]={}),n=l[r.uniqueID]||(l[r.uniqueID]={}),n[b]=[ga,s]),r===c)););return s-=e,s===f||0===s%f&&0<=s/f}}},PSEUDO:function(b,c){var d,f=L.pseudos[b]||L.setFilters[b.toLowerCase()]||G.error("unsupported pseudo: "+b);return f[P]?f(c):1<f.length?(d=[b,b,"",c],L.setFilters.hasOwnProperty(b.toLowerCase())?
ca(function(b,d){for(var y,t=f(b,c),e=t.length;e--;)y=ua(b,t[e]),b[y]=!(d[y]=t[e])}):function(b){return f(b,0,d)}):f}},pseudos:{not:ca(function(b){var c=[],d=[],f=yb(b.replace(Xa,"$1"));return f[P]?ca(function(b,c,d,y){var C;d=f(b,null,y,[]);for(y=b.length;y--;)(C=d[y])&&(b[y]=!(c[y]=C))}):function(b,y,e){return c[0]=b,f(c,null,e,d),c[0]=null,!d.pop()}}),has:ca(function(b){return function(c){return 0<G(b,c).length}}),contains:ca(function(b){return b=b.replace(ha,ia),function(c){return-1<(c.textContent||
c.innerText||ab(c)).indexOf(b)}}),lang:ca(function(b){return gd.test(b||"")||G.error("unsupported lang: "+b),b=b.replace(ha,ia).toLowerCase(),function(c){var d;do if(d=Z?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(b){var c=qb.location&&qb.location.hash;return c&&c.slice(1)===b.id},root:function(b){return b===aa},focus:function(b){return b===F.activeElement&&(!F.hasFocus||
F.hasFocus())&&!(!b.type&&!b.href&&!~b.tabIndex)},enabled:bc(!1),disabled:bc(!0),checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!L.pseudos.empty(b)},header:function(b){return id.test(b.nodeName)},input:function(b){return hd.test(b.nodeName)},
button:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:ta(function(){return[0]}),last:ta(function(b,c){return[c-1]}),eq:ta(function(b,c,d){return[0>d?d+c:d]}),even:ta(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:ta(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:ta(function(b,c,
d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:ta(function(b,c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};L.pseudos.nth=L.pseudos.eq;for(za in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})L.pseudos[za]=Vc(za);for(za in{submit:!0,reset:!0})L.pseudos[za]=Wc(za);cc.prototype=L.filters=L.pseudos;L.setFilters=new cc;Ia=G.tokenize=function(b,c){var d,f,e,j,g,m,n;if(g=fc[b+" "])return c?0:g.slice(0);g=b;m=[];for(n=L.preFilter;g;){d&&!(f=cd.exec(g))||(f&&(g=g.slice(f[0].length)||g),m.push(e=
[]));d=!1;(f=dd.exec(g))&&(d=f.shift(),e.push({value:d,type:f[0].replace(Xa," ")}),g=g.slice(d.length));for(j in L.filter)!(f=cb[j].exec(g))||n[j]&&!(f=n[j](f))||(d=f.shift(),e.push({value:d,type:j,matches:f}),g=g.slice(d.length));if(!d)break}return c?g.length:g?G.error(b):fc(b,m).slice(0)};ka=(yb=G.compile=function(b,c){var d,f=[],e=[],j=Va[b+" "];if(!j){c||(c=Ia(b));for(d=c.length;d--;)j=xb(c[d]),j[P]?f.push(j):e.push(j);d=Va;var g=0<f.length,m=0<e.length,j=function(b,c,d,y,C){var t,j,n,l=0,r="0",
ea=b&&[],q=[],u=$a,x=b||m&&L.find.TAG("*",C),p=ga+=null==u?1:Math.random()||0.1,s=x.length;for(C&&($a=c===F||c||C);r!==s&&null!=(t=x[r]);r++){if(m&&t){j=0;for(c||t.ownerDocument===F||(la(t),d=!Z);n=e[j++];)if(n(t,c||F,d)){y.push(t);break}C&&(ga=p)}g&&((t=!n&&t)&&l--,b&&ea.push(t))}if(l+=r,g&&r!==l){for(j=0;n=f[j++];)n(ea,q,c,d);if(b){if(0<l)for(;r--;)ea[r]||q[r]||(q[r]=$c.call(y));q=Za(q)}ma.apply(y,q);C&&!b&&0<q.length&&1<l+f.length&&G.uniqueSort(y)}return C&&(ga=p,$a=u),ea},j=g?ca(j):j,j=d(b,j);
j.selector=b}return j},$b=G.select=function(b,c,d,f){var e,j,g,m,n,l="function"==typeof b&&b,r=!f&&Ia(b=l.selector||b);if(d=d||[],1===r.length){if(j=r[0]=r[0].slice(0),2<j.length&&"ID"===(g=j[0]).type&&9===c.nodeType&&Z&&L.relative[j[1].type]){if(c=(L.find.ID(g.matches[0].replace(ha,ia),c)||[])[0],!c)return d;l&&(c=c.parentNode);b=b.slice(j.shift().value.length)}for(e=cb.needsContext.test(b)?0:j.length;e--&&!(g=j[e],L.relative[m=g.type]);)if((n=L.find[m])&&(f=n(g.matches[0].replace(ha,ia),rb.test(j[0].type)&&
sb(c.parentNode)||c))){if(j.splice(e,1),b=f.length&&Wa(j),!b)return ma.apply(d,f),d;break}}return(l||yb(b,r))(f,c,!Z,d,!c||rb.test(b)&&sb(c.parentNode)||c),d},O.sortStable=P.split("").sort(zb).join("")===P,O.detectDuplicates=!!Aa,la(),O.sortDetached=fa(function(b){return 1&b.compareDocumentPosition(F.createElement("fieldset"))}),fa(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||ub("type|href|height|width",function(b,c,d){if(!d)return b.getAttribute(c,
"type"===c.toLowerCase()?1:2)}),O.attributes&&fa(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||ub("value",function(b,c,d){if(!d&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),fa(function(b){return null==b.getAttribute("disabled")})||ub("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,d){var f;if(!d)return!0===b[c]?c.toLowerCase():
(f=b.getAttributeNode(c))&&f.specified?f.value:null}),G);f.find=ka;f.expr=ka.selectors;f.expr[":"]=f.expr.pseudos;f.uniqueSort=f.unique=ka.uniqueSort;f.text=ka.getText;f.isXMLDoc=ka.isXML;f.contains=ka.contains;f.escapeSelector=ka.escape;var Ba=function(b,c,d){for(var e=[],j=void 0!==d;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(j&&f(b).is(d))break;e.push(b)}return e},ic=function(b,c){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&d.push(b);return d},jc=f.expr.match.needsContext,kc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Fc=/^.[^:#\[\.,]*$/;f.filter=function(b,c,d){var e=c[0];return d&&(b=":not("+b+")"),1===c.length&&1===e.nodeType?f.find.matchesSelector(e,b)?[e]:[]:f.find.matches(b,f.grep(c,function(b){return 1===b.nodeType}))};f.fn.extend({find:function(b){var c,d,e=this.length,j=this;if("string"!=typeof b)return this.pushStack(f(b).filter(function(){for(c=0;c<e;c++)if(f.contains(j[c],this))return!0}));d=this.pushStack([]);for(c=0;c<e;c++)f.find(b,j[c],d);return 1<e?f.uniqueSort(d):d},filter:function(b){return this.pushStack(l(this,
b||[],!1))},not:function(b){return this.pushStack(l(this,b||[],!0))},is:function(b){return!!l(this,"string"==typeof b&&jc.test(b)?f(b):b||[],!1).length}});var lc,jd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(f.fn.init=function(b,c,d){var e,j;if(!b)return this;if(d=d||lc,"string"==typeof b){if(e="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:jd.exec(b),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(b):this.constructor(c).find(b);if(e[1]){if(c=c instanceof f?c[0]:c,f.merge(this,f.parseHTML(e[1],
c&&c.nodeType?c.ownerDocument||c:I,!0)),kc.test(e[1])&&f.isPlainObject(c))for(e in c)f.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}return j=I.getElementById(e[2]),j&&(this[0]=j,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):f.isFunction(b)?void 0!==d.ready?d.ready(b):b(f):f.makeArray(b,this)}).prototype=f.fn;lc=f(I);var kd=/^(?:parents|prev(?:Until|All))/,ld={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({has:function(b){var c=f(b,this),d=c.length;
return this.filter(function(){for(var b=0;b<d;b++)if(f.contains(this,c[b]))return!0})},closest:function(b,c){var d,e=0,j=this.length,g=[],m="string"!=typeof b&&f(b);if(!jc.test(b))for(;e<j;e++)for(d=this[e];d&&d!==c;d=d.parentNode)if(11>d.nodeType&&(m?-1<m.index(d):1===d.nodeType&&f.find.matchesSelector(d,b))){g.push(d);break}return this.pushStack(1<g.length?f.uniqueSort(g):g)},index:function(b){return b?"string"==typeof b?Da.call(f(b),this[0]):Da.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});f.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Ba(b,"parentNode")},parentsUntil:function(b,c,d){return Ba(b,"parentNode",d)},next:function(b){return p(b,"nextSibling")},prev:function(b){return p(b,"previousSibling")},nextAll:function(b){return Ba(b,
"nextSibling")},prevAll:function(b){return Ba(b,"previousSibling")},nextUntil:function(b,c,d){return Ba(b,"nextSibling",d)},prevUntil:function(b,c,d){return Ba(b,"previousSibling",d)},siblings:function(b){return ic((b.parentNode||{}).firstChild,b)},children:function(b){return ic(b.firstChild)},contents:function(b){return g(b,"iframe")?b.contentDocument:(g(b,"template")&&(b=b.content||b),f.merge([],b.childNodes))}},function(b,c){f.fn[b]=function(d,e){var j=f.map(this,c,d);return"Until"!==b.slice(-5)&&
(e=d),e&&"string"==typeof e&&(j=f.filter(e,j)),1<this.length&&(ld[b]||f.uniqueSort(j),kd.test(b)&&j.reverse()),this.pushStack(j)}});var X=/[^\x20\t\r\n\f]+/g;f.Callbacks=function(b){var c;if("string"==typeof b){var d={};c=(f.each(b.match(X)||[],function(b,c){d[c]=!0}),d)}else c=f.extend({},b);b=c;var e,j,g,m,n=[],l=[],r=-1,q=function(){m=m||b.once;for(g=e=!0;l.length;r=-1)for(j=l.shift();++r<n.length;)!1===n[r].apply(j[0],j[1])&&b.stopOnFalse&&(r=n.length,j=!1);b.memory||(j=!1);e=!1;m&&(n=j?[]:"")},
u={add:function(){return n&&(j&&!e&&(r=n.length-1,l.push(j)),function Lc(c){f.each(c,function(c,d){f.isFunction(d)?b.unique&&u.has(d)||n.push(d):d&&d.length&&"string"!==f.type(d)&&Lc(d)})}(arguments),j&&!e&&q()),this},remove:function(){return f.each(arguments,function(b,c){for(var d;-1<(d=f.inArray(c,n,d));)n.splice(d,1),d<=r&&r--}),this},has:function(b){return b?-1<f.inArray(b,n):0<n.length},empty:function(){return n&&(n=[]),this},disable:function(){return m=l=[],n=j="",this},disabled:function(){return!n},
lock:function(){return m=l=[],j||e||(n=j=""),this},locked:function(){return!!m},fireWith:function(b,c){return m||(c=c||[],c=[b,c.slice?c.slice():c],l.push(c),e||q()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!g}};return u};f.extend({Deferred:function(c){var d=[["notify","progress",f.Callbacks("memory"),f.Callbacks("memory"),2],["resolve","done",f.Callbacks("once memory"),f.Callbacks("once memory"),0,"resolved"],["reject","fail",f.Callbacks("once memory"),
f.Callbacks("once memory"),1,"rejected"]],e="pending",j={state:function(){return e},always:function(){return g.done(arguments).fail(arguments),this},"catch":function(b){return j.then(null,b)},pipe:function(){var b=arguments;return f.Deferred(function(c){f.each(d,function(d,y){var e=f.isFunction(b[y[4]])&&b[y[4]];g[y[1]](function(){var b=e&&e.apply(this,arguments);b&&f.isFunction(b.promise)?b.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[y[0]+"With"](this,e?[b]:arguments)})});b=null}).promise()},
then:function(c,y,e){function t(c,d,y,e){return function(){var C=this,g=arguments,B=function(){var b,B;if(!(c<j)){if(b=y.apply(C,g),b===d.promise())throw new TypeError("Thenable self-resolution");B=b&&("object"==typeof b||"function"==typeof b)&&b.then;f.isFunction(B)?e?B.call(b,t(j,d,n,e),t(j,d,q,e)):(j++,B.call(b,t(j,d,n,e),t(j,d,q,e),t(j,d,n,d.notifyWith))):(y!==n&&(C=void 0,g=[b]),(e||d.resolveWith)(C,g))}},m=e?B:function(){try{B()}catch(b){f.Deferred.exceptionHook&&f.Deferred.exceptionHook(b,
m.stackTrace),c+1>=j&&(y!==q&&(C=void 0,g=[b]),d.rejectWith(C,g))}};c?m():(f.Deferred.getStackHook&&(m.stackTrace=f.Deferred.getStackHook()),b.setTimeout(m))}}var j=0;return f.Deferred(function(b){d[0][3].add(t(0,b,f.isFunction(e)?e:n,b.notifyWith));d[1][3].add(t(0,b,f.isFunction(c)?c:n));d[2][3].add(t(0,b,f.isFunction(y)?y:q))}).promise()},promise:function(b){return null!=b?f.extend(b,j):j}},g={};return f.each(d,function(b,c){var y=c[2],f=c[5];j[c[1]]=y.add;f&&y.add(function(){e=f},d[3-b][2].disable,
d[0][2].lock);y.add(c[3].fire);g[c[0]]=function(){return g[c[0]+"With"](this===g?void 0:this,arguments),this};g[c[0]+"With"]=y.fireWith}),j.promise(g),c&&c.call(g,g),g},when:function(b){var c=arguments.length,d=c,e=Array(d),j=sa.call(arguments),g=f.Deferred(),m=function(b){return function(d){e[b]=this;j[b]=1<arguments.length?sa.call(arguments):d;--c||g.resolveWith(e,j)}};if(1>=c&&(u(b,g.done(m(d)).resolve,g.reject,!c),"pending"===g.state()||f.isFunction(j[d]&&j[d].then)))return g.then();for(;d--;)u(j[d],
m(d),g.reject);return g.promise()}});var md=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;f.Deferred.exceptionHook=function(c,d){b.console&&b.console.warn&&c&&md.test(c.name)&&b.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)};f.readyException=function(c){b.setTimeout(function(){throw c;})};var Ab=f.Deferred();f.fn.ready=function(b){return Ab.then(b)["catch"](function(b){f.readyException(b)}),this};f.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--f.readyWait:
f.isReady)||(f.isReady=!0,!0!==b&&0<--f.readyWait||Ab.resolveWith(I,[f]))}});f.ready.then=Ab.then;"complete"===I.readyState||"loading"!==I.readyState&&!I.documentElement.doScroll?b.setTimeout(f.ready):(I.addEventListener("DOMContentLoaded",s),b.addEventListener("load",s));var ja=function(b,c,d,e,j,g,m){var n=0,l=b.length,r=null==d;if("object"===f.type(d))for(n in j=!0,d)ja(b,c,n,d[n],!0,g,m);else if(void 0!==e&&(j=!0,f.isFunction(e)||(m=!0),r&&(m?(c.call(b,e),c=null):(r=c,c=function(b,c,d){return r.call(f(b),
d)})),c))for(;n<l;n++)c(b[n],d,m?e:e.call(b[n],n,c(b[n],d)));return j?b:r?c.call(b):l?c(b[0],d):g},db=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};j.uid=1;j.prototype={cache:function(b){var c=b[this.expando];return c||(c={},db(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,d){var e;b=this.cache(b);if("string"==typeof c)b[f.camelCase(c)]=d;else for(e in c)b[f.camelCase(e)]=c[e];return b},get:function(b,c){return void 0===
c?this.cache(b):b[this.expando]&&b[this.expando][f.camelCase(c)]},access:function(b,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(b,c):(this.set(b,c,d),void 0!==d?d:c)},remove:function(b,c){var d,e=b[this.expando];if(void 0!==e){if(void 0!==c){Array.isArray(c)?c=c.map(f.camelCase):(c=f.camelCase(c),c=c in e?[c]:c.match(X)||[]);for(d=c.length;d--;)delete e[c[d]]}(void 0===c||f.isEmptyObject(e))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=
b[this.expando];return void 0!==b&&!f.isEmptyObject(b)}};var H=new j,T=new j,Hc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Gc=/[A-Z]/g;f.extend({hasData:function(b){return T.hasData(b)||H.hasData(b)},data:function(b,c,d){return T.access(b,c,d)},removeData:function(b,c){T.remove(b,c)},_data:function(b,c,d){return H.access(b,c,d)},_removeData:function(b,c){H.remove(b,c)}});f.fn.extend({data:function(b,c){var d,e,j,g=this[0],n=g&&g.attributes;if(void 0===b){if(this.length&&(j=T.get(g),1===g.nodeType&&!H.get(g,
"hasDataAttrs"))){for(d=n.length;d--;)n[d]&&(e=n[d].name,0===e.indexOf("data-")&&(e=f.camelCase(e.slice(5)),m(g,e,j[e])));H.set(g,"hasDataAttrs",!0)}return j}return"object"==typeof b?this.each(function(){T.set(this,b)}):ja(this,function(c){var d;if(g&&void 0===c){if((d=T.get(g,b),void 0!==d)||(d=m(g,b),void 0!==d))return d}else this.each(function(){T.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){T.remove(this,b)})}});f.extend({queue:function(b,
c,d){var e;if(b)return c=(c||"fx")+"queue",e=H.get(b,c),d&&(!e||Array.isArray(d)?e=H.access(b,c,f.makeArray(d)):e.push(d)),e||[]},dequeue:function(b,c){c=c||"fx";var d=f.queue(b,c),e=d.length,j=d.shift(),g=f._queueHooks(b,c),m=function(){f.dequeue(b,c)};"inprogress"===j&&(j=d.shift(),e--);j&&("fx"===c&&d.unshift("inprogress"),delete g.stop,j.call(b,m,g));!e&&g&&g.empty.fire()},_queueHooks:function(b,c){var d=c+"queueHooks";return H.get(b,d)||H.access(b,d,{empty:f.Callbacks("once memory").add(function(){H.remove(b,
[c+"queue",d])})})}});f.fn.extend({queue:function(b,c){var d=2;return"string"!=typeof b&&(c=b,b="fx",d--),arguments.length<d?f.queue(this[0],b):void 0===c?this:this.each(function(){var d=f.queue(this,b,c);f._queueHooks(this,b);"fx"===b&&"inprogress"!==d[0]&&f.dequeue(this,b)})},dequeue:function(b){return this.each(function(){f.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var d,e=1,j=f.Deferred(),g=this,m=this.length,n=function(){--e||j.resolveWith(g,
[g])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";m--;)(d=H.get(g[m],b+"queueHooks"))&&d.empty&&(e++,d.empty.add(n));return n(),j.promise(c)}});var mc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ea=RegExp("^(?:([+-])=|)("+mc+")([a-z%]*)$","i"),oa=["Top","Right","Bottom","Left"],Na=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&f.contains(b.ownerDocument,b)&&"none"===f.css(b,"display")},nc=function(b,c,d,e){var f,j={};for(f in c)j[f]=b.style[f],b.style[f]=c[f];d=
d.apply(b,e||[]);for(f in c)b.style[f]=j[f];return d},Eb={};f.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){Na(this)?f(this).show():f(this).hide()})}});var oc=/^(?:checkbox|radio)$/i,Fb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Gb=/^$|\/(?:java|ecma)script/i,W={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};W.optgroup=W.option;W.tbody=W.tfoot=W.colgroup=W.caption=W.thead;W.th=W.td;var Ic=/<|&#?\w+;/,eb=I.createDocumentFragment().appendChild(I.createElement("div")),fb=I.createElement("input");fb.setAttribute("type","radio");fb.setAttribute("checked","checked");fb.setAttribute("name","t");eb.appendChild(fb);M.checkClone=eb.cloneNode(!0).cloneNode(!0).lastChild.checked;eb.innerHTML="<textarea>x</textarea>";
M.noCloneChecked=!!eb.cloneNode(!0).lastChild.defaultValue;!0;var gb=I.documentElement,nd=/^key/,od=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pc=/^([^.]*)(?:\.(.+)|)/;f.event={global:{},add:function(b,c,d,e,j){var g,m,n,l,r,q,u,x,p,s;if(r=H.get(b)){d.handler&&(g=d,d=g.handler,j=g.selector);j&&f.find.matchesSelector(gb,j);d.guid||(d.guid=f.guid++);(l=r.events)||(l=r.events={});(m=r.handle)||(m=r.handle=function(c){return"undefined"!=typeof f&&f.event.triggered!==c.type?f.event.dispatch.apply(b,
arguments):void 0});c=(c||"").match(X)||[""];for(r=c.length;r--;)n=pc.exec(c[r])||[],p=s=n[1],n=(n[2]||"").split(".").sort(),p&&(u=f.event.special[p]||{},p=(j?u.delegateType:u.bindType)||p,u=f.event.special[p]||{},q=f.extend({type:p,origType:s,data:e,handler:d,guid:d.guid,selector:j,needsContext:j&&f.expr.match.needsContext.test(j),namespace:n.join(".")},g),(x=l[p])||(x=l[p]=[],x.delegateCount=0,u.setup&&!1!==u.setup.call(b,e,n,m)||b.addEventListener&&b.addEventListener(p,m)),u.add&&(u.add.call(b,
q),q.handler.guid||(q.handler.guid=d.guid)),j?x.splice(x.delegateCount++,0,q):x.push(q),f.event.global[p]=!0)}},remove:function(b,c,d,e,j){var g,m,n,r,l,q,u,p,x,s,z,A=H.hasData(b)&&H.get(b);if(A&&(r=A.events)){c=(c||"").match(X)||[""];for(l=c.length;l--;)if(n=pc.exec(c[l])||[],x=z=n[1],s=(n[2]||"").split(".").sort(),x){u=f.event.special[x]||{};x=(e?u.delegateType:u.bindType)||x;p=r[x]||[];n=n[2]&&RegExp("(^|\\.)"+s.join("\\.(?:.*\\.|)")+"(\\.|$)");for(m=g=p.length;g--;)q=p[g],!j&&z!==q.origType||
d&&d.guid!==q.guid||n&&!n.test(q.namespace)||e&&e!==q.selector&&("**"!==e||!q.selector)||(p.splice(g,1),q.selector&&p.delegateCount--,u.remove&&u.remove.call(b,q));m&&!p.length&&(u.teardown&&!1!==u.teardown.call(b,s,A.handle)||f.removeEvent(b,x,A.handle),delete r[x])}else for(x in r)f.event.remove(b,x+c[l],d,e,!0);f.isEmptyObject(r)&&H.remove(b,"handle events")}},dispatch:function(b){var c=f.event.fix(b),d,e,j,g,m,n,r=Array(arguments.length);e=(H.get(this,"events")||{})[c.type]||[];var l=f.event.special[c.type]||
{};r[0]=c;for(d=1;d<arguments.length;d++)r[d]=arguments[d];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){n=f.event.handlers.call(this,c,e);for(d=0;(g=n[d++])&&!c.isPropagationStopped();){c.currentTarget=g.elem;for(e=0;(m=g.handlers[e++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(m.namespace)||(c.handleObj=m,c.data=m.data,j=((f.event.special[m.origType]||{}).handle||m.handler).apply(g.elem,r),void 0!==j&&!1===(c.result=j)&&(c.preventDefault(),
c.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(b,c){var d,e,j,g,m,n=[],r=c.delegateCount,l=b.target;if(r&&l.nodeType&&!("click"===b.type&&1<=b.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==b.type||!0!==l.disabled)){g=[];m={};for(d=0;d<r;d++)e=c[d],j=e.selector+" ",void 0===m[j]&&(m[j]=e.needsContext?-1<f(j,this).index(l):f.find(j,this,null,[l]).length),m[j]&&g.push(e);g.length&&n.push({elem:l,handlers:g})}return l=this,
r<c.length&&n.push({elem:l,handlers:c.slice(r)}),n},addProp:function(b,c){Object.defineProperty(f.Event.prototype,b,{enumerable:!0,configurable:!0,get:f.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[f.expando]?b:new f.Event(b)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
Q()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g(this,"input"))return this.click(),!1},_default:function(b){return g(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};f.removeEvent=function(b,c,d){b.removeEventListener&&b.removeEventListener(c,
d)};f.Event=function(b,c){return this instanceof f.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?Fa:K,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&f.extend(this,c),this.timeStamp=b&&b.timeStamp||f.now(),void(this[f.expando]=!0)):new f.Event(b,c)};f.Event.prototype={constructor:f.Event,
isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=Fa;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=Fa;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=Fa;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};
f.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&nd.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&od.test(b.type)?1&c?1:2&c?3:4&
c?2:0:b.which}},f.event.addProp);f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){f.event.special[b]={delegateType:c,bindType:c,handle:function(b){var d,e=b.relatedTarget,y=b.handleObj;return e&&(e===this||f.contains(this,e))||(b.type=y.origType,d=y.handler.apply(this,arguments),b.type=c),d}}});f.fn.extend({on:function(b,c,d,e){return R(this,b,c,d,e)},one:function(b,c,d,e){return R(this,b,c,d,e,1)},off:function(b,c,d){var e,j;
if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,f(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(j in b)this.off(j,c,b[j]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=void 0),!1===d&&(d=K),this.each(function(){f.event.remove(this,b,d,c)})}});var pd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qd=/<script|<style|<link/i,Kc=/checked\s*(?:[^=]|=\s*.checked.)/i,
Jc=/^true\/(.*)/,Mc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;f.extend({htmlPrefilter:function(b){return b.replace(pd,"<$1></$2>")},clone:function(b,c,d){var e,j,g,m,n=b.cloneNode(!0),l=f.contains(b.ownerDocument,b);if(!M.noCloneChecked&&!(1!==b.nodeType&&11!==b.nodeType||f.isXMLDoc(b))){m=z(n);g=z(b);e=0;for(j=g.length;e<j;e++){var r=g[e],q=m[e],u=q.nodeName.toLowerCase();"input"===u&&oc.test(r.type)?q.checked=r.checked:"input"!==u&&"textarea"!==u||(q.defaultValue=r.defaultValue)}}if(c)if(d){g=
g||z(b);m=m||z(n);e=0;for(j=g.length;e<j;e++)Hb(g[e],m[e])}else Hb(b,n);return m=z(n,"script"),0<m.length&&A(m,!l&&z(b,"script")),n},cleanData:function(b){for(var c,d,e,j=f.event.special,g=0;void 0!==(d=b[g]);g++)if(db(d)){if(c=d[H.expando]){if(c.events)for(e in c.events)j[e]?f.event.remove(d,e):f.removeEvent(d,e,c.handle);d[H.expando]=void 0}d[T.expando]&&(d[T.expando]=void 0)}}});f.fn.extend({detach:function(b){return Jb(this,b,!0)},remove:function(b){return Jb(this,b)},text:function(b){return ja(this,
function(b){return void 0===b?f.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return xa(this,arguments,function(b){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&Oa(this,b).appendChild(b)})},prepend:function(){return xa(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=Oa(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return xa(this,
arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return xa(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===b.nodeType&&(f.cleanData(z(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return f.clone(this,b,c)})},html:function(b){return ja(this,function(b){var c=this[0]||{},d=0,e=this.length;
if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!qd.test(b)&&!W[(Fb.exec(b)||["",""])[1].toLowerCase()]){b=f.htmlPrefilter(b);try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(f.cleanData(z(c,!1)),c.innerHTML=b);c=0}catch(j){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return xa(this,arguments,function(c){var d=this.parentNode;0>f.inArray(this,b)&&(f.cleanData(z(this)),d&&d.replaceChild(c,this))},b)}});f.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){f.fn[b]=function(b){for(var d=[],e=f(b),j=e.length-1,y=0;y<=j;y++)b=y===j?this:this.clone(!0),f(e[y])[c](b),pb.apply(d,b.get());return this.pushStack(d)}});var Kb=/^margin/,kb=RegExp("^("+mc+")(?!px)[a-z%]+$","i"),Qa=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=b),d.getComputedStyle(c)},ib=function(){if(da){da.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
da.innerHTML="";gb.appendChild(hb);var c=b.getComputedStyle(da);qc="1%"!==c.top;rc="2px"===c.marginLeft;sc="4px"===c.width;da.style.marginRight="50%";tc="4px"===c.marginRight;gb.removeChild(hb);da=null}},qc,sc,tc,rc,hb=I.createElement("div"),da=I.createElement("div");da.style&&(da.style.backgroundClip="content-box",da.cloneNode(!0).style.backgroundClip="",M.clearCloneStyle="content-box"===da.style.backgroundClip,hb.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
hb.appendChild(da),f.extend(M,{pixelPosition:function(){return ib(),qc},boxSizingReliable:function(){return ib(),sc},pixelMarginRight:function(){return ib(),tc},reliableMarginLeft:function(){return ib(),rc}}));!0;var rd=/^(none|table(?!-c[ea]).+)/,uc=/^--/,sd={position:"absolute",visibility:"hidden",display:"block"},vc={letterSpacing:"0",fontWeight:"400"},Ob=["Webkit","Moz","ms"],Nb=I.createElement("div").style;f.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=Ga(b,"opacity");return""===
d?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,d,e){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var j,g,m,n=f.camelCase(c),l=uc.test(c),q=b.style;return l||(c=Mb(n)),m=f.cssHooks[c]||f.cssHooks[n],void 0===d?m&&"get"in m&&void 0!==(j=m.get(b,!1,e))?j:q[c]:(g=typeof d,"string"===g&&(j=Ea.exec(d))&&j[1]&&
(d=r(b,c,j),g="number"),null!=d&&d===d&&("number"===g&&(d+=j&&j[3]||(f.cssNumber[n]?"":"px")),M.clearCloneStyle||""!==d||0!==c.indexOf("background")||(q[c]="inherit"),m&&"set"in m&&void 0===(d=m.set(b,d,e))||(l?q.setProperty(c,d):q[c]=d)),void 0)}},css:function(b,c,d,e){var j,g,m,n=f.camelCase(c);return uc.test(c)||(c=Mb(n)),m=f.cssHooks[c]||f.cssHooks[n],m&&"get"in m&&(j=m.get(b,!0,d)),void 0===j&&(j=Ga(b,c,e)),"normal"===j&&c in vc&&(j=vc[c]),""===d||d?(g=parseFloat(j),!0===d||isFinite(g)?g||0:
j):j}});f.each(["height","width"],function(b,c){f.cssHooks[c]={get:function(b,d,e){if(d)return!rd.test(f.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?Rb(b,c,e):nc(b,sd,function(){return Rb(b,c,e)})},set:function(b,d,e){var j,y=e&&Qa(b);e=e&&Qb(b,c,e,"border-box"===f.css(b,"boxSizing",!1,y),y);return e&&(j=Ea.exec(d))&&"px"!==(j[3]||"px")&&(b.style[c]=d,d=f.css(b,c)),Pb(b,d,e)}}});f.cssHooks.marginLeft=Lb(M.reliableMarginLeft,function(b,c){if(c)return(parseFloat(Ga(b,
"marginLeft"))||b.getBoundingClientRect().left-nc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});f.each({margin:"",padding:"",border:"Width"},function(b,c){f.cssHooks[b+c]={expand:function(d){var e=0,f={};for(d="string"==typeof d?d.split(" "):[d];4>e;e++)f[b+oa[e]+c]=d[e]||d[e-2]||d[0];return f}};Kb.test(b)||(f.cssHooks[b+c].set=Pb)});f.fn.extend({css:function(b,c){return ja(this,function(b,c,d){var e,j={},y=0;if(Array.isArray(c)){d=Qa(b);for(e=c.length;y<e;y++)j[c[y]]=
f.css(b,c[y],!1,d);return j}return void 0!==d?f.style(b,c,d):f.css(b,c)},b,c,1<arguments.length)}});f.Tween=U;U.prototype={constructor:U,init:function(b,c,d,e,j,g){this.elem=b;this.prop=d;this.easing=j||f.easing._default;this.options=c;this.start=this.now=this.cur();this.end=e;this.unit=g||(f.cssNumber[d]?"":"px")},cur:function(){var b=U.propHooks[this.prop];return b&&b.get?b.get(this):U.propHooks._default.get(this)},run:function(b){var c,d=U.propHooks[this.prop];return this.options.duration?this.pos=
c=f.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=c=b,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):U.propHooks._default.set(this),this}};U.prototype.init.prototype=U.prototype;U.propHooks={_default:{get:function(b){var c;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(c=f.css(b.elem,b.prop,""),c&&"auto"!==c?c:0)},set:function(b){f.fx.step[b.prop]?
f.fx.step[b.prop](b):1!==b.elem.nodeType||null==b.elem.style[f.cssProps[b.prop]]&&!f.cssHooks[b.prop]?b.elem[b.prop]=b.now:f.style(b.elem,b.prop,b.now+b.unit)}}};U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};f.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2},_default:"swing"};f.fx=U.prototype.init;f.fx.step={};var ya,Ra,td=/^(?:toggle|show|hide)$/,ud=/queueHooks$/;f.Animation=f.extend(ba,
{tweeners:{"*":[function(b,c){var d=this.createTween(b,c);return r(d.elem,b,Ea.exec(c),d),d}]},tweener:function(b,c){f.isFunction(b)?(c=b,b=["*"]):b=b.match(X);for(var d,e=0,j=b.length;e<j;e++)d=b[e],ba.tweeners[d]=ba.tweeners[d]||[],ba.tweeners[d].unshift(c)},prefilters:[function(b,c,d){var e,j,g,m,n,l,r,q,u="width"in c||"height"in c,p=this,s={},z=b.style,A=b.nodeType&&Na(b),J=H.get(b,"fxshow");d.queue||(m=f._queueHooks(b,"fx"),null==m.unqueued&&(m.unqueued=0,n=m.empty.fire,m.empty.fire=function(){m.unqueued||
n()}),m.unqueued++,p.always(function(){p.always(function(){m.unqueued--;f.queue(b,"fx").length||m.empty.fire()})}));for(e in c)if(j=c[e],td.test(j)){if(delete c[e],g=g||"toggle"===j,j===(A?"hide":"show")){if("show"!==j||!J||void 0===J[e])continue;A=!0}s[e]=J&&J[e]||f.style(b,e)}if(l=!f.isEmptyObject(c),l||!f.isEmptyObject(s))for(e in u&&1===b.nodeType&&(d.overflow=[z.overflow,z.overflowX,z.overflowY],r=J&&J.display,null==r&&(r=H.get(b,"display")),q=f.css(b,"display"),"none"===q&&(r?q=r:(x([b],!0),
r=b.style.display||r,q=f.css(b,"display"),x([b]))),("inline"===q||"inline-block"===q&&null!=r)&&"none"===f.css(b,"float")&&(l||(p.done(function(){z.display=r}),null==r&&(q=z.display,r="none"===q?"":q)),z.display="inline-block")),d.overflow&&(z.overflow="hidden",p.always(function(){z.overflow=d.overflow[0];z.overflowX=d.overflow[1];z.overflowY=d.overflow[2]})),l=!1,s)l||(J?"hidden"in J&&(A=J.hidden):J=H.access(b,"fxshow",{display:r}),g&&(J.hidden=!A),A&&x([b],!0),p.done(function(){A||x([b]);H.remove(b,
"fxshow");for(e in s)f.style(b,e,s[e])})),l=Tb(A?J[e]:0,e,p),e in J||(J[e]=l.start,A&&(l.end=l.start,l.start=0))}],prefilter:function(b,c){c?ba.prefilters.unshift(b):ba.prefilters.push(b)}});f.speed=function(b,c,d){var e=b&&"object"==typeof b?f.extend({},b):{complete:d||!d&&c||f.isFunction(b)&&b,duration:b,easing:d&&c||c&&!f.isFunction(c)&&c};return f.fx.off?e.duration=0:"number"!=typeof e.duration&&(e.duration in f.fx.speeds?e.duration=f.fx.speeds[e.duration]:e.duration=f.fx.speeds._default),null!=
e.queue&&!0!==e.queue||(e.queue="fx"),e.old=e.complete,e.complete=function(){f.isFunction(e.old)&&e.old.call(this);e.queue&&f.dequeue(this,e.queue)},e};f.fn.extend({fadeTo:function(b,c,d,e){return this.filter(Na).css("opacity",0).show().end().animate({opacity:c},b,d,e)},animate:function(b,c,d,e){var j=f.isEmptyObject(b),g=f.speed(c,d,e);c=function(){var c=ba(this,f.extend({},b),g);(j||H.get(this,"finish"))&&c.stop(!0)};return c.finish=c,j||!1===g.queue?this.each(c):this.queue(g.queue,c)},stop:function(b,
c,d){var e=function(b){var c=b.stop;delete b.stop;c(d)};return"string"!=typeof b&&(d=c,c=b,b=void 0),c&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var c=!0,j=null!=b&&b+"queueHooks",g=f.timers,m=H.get(this);if(j)m[j]&&m[j].stop&&e(m[j]);else for(j in m)m[j]&&m[j].stop&&ud.test(j)&&e(m[j]);for(j=g.length;j--;)g[j].elem!==this||null!=b&&g[j].queue!==b||(g[j].anim.stop(d),c=!1,g.splice(j,1));!c&&d||f.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var c,
d=H.get(this),e=d[b+"queue"];c=d[b+"queueHooks"];var j=f.timers,g=e?e.length:0;d.finish=!0;f.queue(this,b,[]);c&&c.stop&&c.stop.call(this,!0);for(c=j.length;c--;)j[c].elem===this&&j[c].queue===b&&(j[c].anim.stop(!0),j.splice(c,1));for(c=0;c<g;c++)e[c]&&e[c].finish&&e[c].finish.call(this);delete d.finish})}});f.each(["toggle","show","hide"],function(b,c){var d=f.fn[c];f.fn[c]=function(b,e,f){return null==b||"boolean"==typeof b?d.apply(this,arguments):this.animate(Sa(c,!0),b,e,f)}});f.each({slideDown:Sa("show"),
slideUp:Sa("hide"),slideToggle:Sa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){f.fn[b]=function(b,d,e){return this.animate(c,b,d,e)}});f.timers=[];f.fx.tick=function(){var b,c=0,d=f.timers;for(ya=f.now();c<d.length;c++)b=d[c],b()||d[c]!==b||d.splice(c--,1);d.length||f.fx.stop();ya=void 0};f.fx.timer=function(b){f.timers.push(b);f.fx.start()};f.fx.interval=13;f.fx.start=function(){Ra||(Ra=!0,lb())};f.fx.stop=function(){Ra=null};f.fx.speeds=
{slow:600,fast:200,_default:400};f.fn.delay=function(c,d){return c=f.fx?f.fx.speeds[c]||c:c,d=d||"fx",this.queue(d,function(d,e){var f=b.setTimeout(d,c);e.stop=function(){b.clearTimeout(f)}})};var Ca=I.createElement("input"),vd=I.createElement("select").appendChild(I.createElement("option"));Ca.type="checkbox";M.checkOn=""!==Ca.value;M.optSelected=vd.selected;Ca=I.createElement("input");Ca.value="t";Ca.type="radio";M.radioValue="t"===Ca.value;var wc,Ka=f.expr.attrHandle;f.fn.extend({attr:function(b,
c){return ja(this,f.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){f.removeAttr(this,b)})}});f.extend({attr:function(b,c,d){var e,j,g=b.nodeType;if(3!==g&&8!==g&&2!==g)return"undefined"==typeof b.getAttribute?f.prop(b,c,d):(1===g&&f.isXMLDoc(b)||(j=f.attrHooks[c.toLowerCase()]||(f.expr.match.bool.test(c)?wc:void 0)),void 0!==d?null===d?void f.removeAttr(b,c):j&&"set"in j&&void 0!==(e=j.set(b,d,c))?e:(b.setAttribute(c,d+""),d):j&&"get"in j&&null!==(e=j.get(b,c))?e:
(e=f.find.attr(b,c),null==e?void 0:e))},attrHooks:{type:{set:function(b,c){if(!M.radioValue&&"radio"===c&&g(b,"input")){var d=b.value;return b.setAttribute("type",c),d&&(b.value=d),c}}}},removeAttr:function(b,c){var d,e=0,f=c&&c.match(X);if(f&&1===b.nodeType)for(;d=f[e++];)b.removeAttribute(d)}});wc={set:function(b,c,d){return!1===c?f.removeAttr(b,d):b.setAttribute(d,d),d}};f.each(f.expr.match.bool.source.match(/\w+/g),function(b,c){var d=Ka[c]||f.find.attr;Ka[c]=function(b,c,e){var f,j,g=c.toLowerCase();
return e||(j=Ka[g],Ka[g]=f,f=null!=d(b,c,e)?g:null,Ka[g]=j),f}});var wd=/^(?:input|select|textarea|button)$/i,xd=/^(?:a|area)$/i;f.fn.extend({prop:function(b,c){return ja(this,f.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[f.propFix[b]||b]})}});f.extend({prop:function(b,c,d){var e,j,g=b.nodeType;if(3!==g&&8!==g&&2!==g)return 1===g&&f.isXMLDoc(b)||(c=f.propFix[c]||c,j=f.propHooks[c]),void 0!==d?j&&"set"in j&&void 0!==(e=j.set(b,d,c))?e:b[c]=d:j&&"get"in
j&&null!==(e=j.get(b,c))?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=f.find.attr(b,"tabindex");return c?parseInt(c,10):wd.test(b.nodeName)||xd.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});M.optSelected||(f.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});f.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){f.propFix[this.toLowerCase()]=this});f.fn.extend({addClass:function(b){var c,d,e,j,g,m,n=0;if(f.isFunction(b))return this.each(function(c){f(this).addClass(b.call(this,c,qa(this)))});if("string"==typeof b&&b)for(c=b.match(X)||[];d=this[n++];)if(j=qa(d),e=1===d.nodeType&&" "+pa(j)+" "){for(m=0;g=c[m++];)0>e.indexOf(" "+g+" ")&&(e+=g+" ");e=pa(e);j!==e&&d.setAttribute("class",e)}return this},removeClass:function(b){var c,d,e,j,g,m,n=0;if(f.isFunction(b))return this.each(function(c){f(this).removeClass(b.call(this,
c,qa(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(X)||[];d=this[n++];)if(j=qa(d),e=1===d.nodeType&&" "+pa(j)+" "){for(m=0;g=c[m++];)for(;-1<e.indexOf(" "+g+" ");)e=e.replace(" "+g+" "," ");e=pa(e);j!==e&&d.setAttribute("class",e)}return this},toggleClass:function(b,c){var d=typeof b;return"boolean"==typeof c&&"string"===d?c?this.addClass(b):this.removeClass(b):f.isFunction(b)?this.each(function(d){f(this).toggleClass(b.call(this,d,qa(this),c),
c)}):this.each(function(){var c,e,j,g;if("string"===d){e=0;j=f(this);for(g=b.match(X)||[];c=g[e++];)j.hasClass(c)?j.removeClass(c):j.addClass(c)}else void 0!==b&&"boolean"!==d||(c=qa(this),c&&H.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":H.get(this,"__className__")||""))})},hasClass:function(b){var c,d=0;for(b=" "+b+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+pa(qa(c))+" ").indexOf(b))return!0;return!1}});var yd=/\r/g;f.fn.extend({val:function(b){var c,d,
e,j=this[0];if(arguments.length)return e=f.isFunction(b),this.each(function(d){var j;1===this.nodeType&&(j=e?b.call(this,d,f(this).val()):b,null==j?j="":"number"==typeof j?j+="":Array.isArray(j)&&(j=f.map(j,function(b){return null==b?"":b+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,j,"value")||(this.value=j))});if(j)return c=f.valHooks[j.type]||f.valHooks[j.nodeName.toLowerCase()],c&&"get"in c&&void 0!==(d=c.get(j,"value"))?d:(d=j.value,
"string"==typeof d?d.replace(yd,""):null==d?"":d)}});f.extend({valHooks:{option:{get:function(b){var c=f.find.attr(b,"value");return null!=c?c:pa(f.text(b))}},select:{get:function(b){var c,d,e=b.options,j=b.selectedIndex,m="select-one"===b.type,n=m?null:[],l=m?j+1:e.length;for(d=0>j?l:m?j:0;d<l;d++)if(c=e[d],(c.selected||d===j)&&!c.disabled&&(!c.parentNode.disabled||!g(c.parentNode,"optgroup"))){if(b=f(c).val(),m)return b;n.push(b)}return n},set:function(b,c){for(var d,e,j=b.options,g=f.makeArray(c),
m=j.length;m--;)e=j[m],(e.selected=-1<f.inArray(f.valHooks.option.get(e),g))&&(d=!0);return d||(b.selectedIndex=-1),g}}}});f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(b,c){if(Array.isArray(c))return b.checked=-1<f.inArray(f(b).val(),c)}};M.checkOn||(f.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var xc=/^(?:focusinfocus|focusoutblur)$/;f.extend(f.event,{trigger:function(c,d,e,j){var g,m,n,l,r,q,u,p=[e||I],x=Ua.call(c,"type")?c.type:
c;g=Ua.call(c,"namespace")?c.namespace.split("."):[];if(m=n=e=e||I,3!==e.nodeType&&8!==e.nodeType&&!xc.test(x+f.event.triggered)&&(-1<x.indexOf(".")&&(g=x.split("."),x=g.shift(),g.sort()),r=0>x.indexOf(":")&&"on"+x,c=c[f.expando]?c:new f.Event(x,"object"==typeof c&&c),c.isTrigger=j?2:3,c.namespace=g.join("."),c.rnamespace=c.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=e),d=null==d?[c]:f.makeArray(d,[c]),u=f.event.special[x]||{},j||!u.trigger||
!1!==u.trigger.apply(e,d))){if(!j&&!u.noBubble&&!f.isWindow(e)){l=u.delegateType||x;for(xc.test(l+x)||(m=m.parentNode);m;m=m.parentNode)p.push(m),n=m;n===(e.ownerDocument||I)&&p.push(n.defaultView||n.parentWindow||b)}for(g=0;(m=p[g++])&&!c.isPropagationStopped();)c.type=1<g?l:u.bindType||x,(q=(H.get(m,"events")||{})[c.type]&&H.get(m,"handle"))&&q.apply(m,d),(q=r&&m[r])&&q.apply&&db(m)&&(c.result=q.apply(m,d),!1===c.result&&c.preventDefault());return c.type=x,j||c.isDefaultPrevented()||u._default&&
!1!==u._default.apply(p.pop(),d)||!db(e)||r&&f.isFunction(e[x])&&!f.isWindow(e)&&(n=e[r],n&&(e[r]=null),f.event.triggered=x,e[x](),f.event.triggered=void 0,n&&(e[r]=n)),c.result}},simulate:function(b,c,d){b=f.extend(new f.Event,d,{type:b,isSimulated:!0});f.event.trigger(b,null,c)}});f.fn.extend({trigger:function(b,c){return this.each(function(){f.event.trigger(b,c,this)})},triggerHandler:function(b,c){var d=this[0];if(d)return f.event.trigger(b,c,d,!0)}});f.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(b,c){f.fn[c]=function(b,d){return 0<arguments.length?this.on(c,null,b,d):this.trigger(c)}});f.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});M.focusin="onfocusin"in b;M.focusin||f.each({focus:"focusin",blur:"focusout"},function(b,c){var d=function(b){f.event.simulate(c,b.target,f.event.fix(b))};f.event.special[c]={setup:function(){var e=this.ownerDocument||this,f=H.access(e,c);f||e.addEventListener(b,d,!0);H.access(e,c,(f||0)+1)},teardown:function(){var e=this.ownerDocument||
this,f=H.access(e,c)-1;f?H.access(e,c,f):(e.removeEventListener(b,d,!0),H.remove(e,c))}}});var La=b.location,yc=f.now(),Bb=/\?/;f.parseXML=function(c){var d;if(!c||"string"!=typeof c)return null;try{d=(new b.DOMParser).parseFromString(c,"text/xml")}catch(e){d=void 0}return d&&!d.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+c),d};var Nc=/\[\]$/,zc=/\r?\n/g,zd=/^(?:submit|button|image|reset|file)$/i,Ad=/^(?:input|select|textarea|keygen)/i;f.param=function(b,c){var d,e=[],j=function(b,
c){var d=f.isFunction(c)?c():c;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==d?"":d)};if(Array.isArray(b)||b.jquery&&!f.isPlainObject(b))f.each(b,function(){j(this.name,this.value)});else for(d in b)mb(d,b[d],c,j);return e.join("&")};f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=f.prop(this,"elements");return b?f.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!f(this).is(":disabled")&&
Ad.test(this.nodeName)&&!zd.test(b)&&(this.checked||!oc.test(b))}).map(function(b,c){var d=f(this).val();return null==d?null:Array.isArray(d)?f.map(d,function(b){return{name:c.name,value:b.replace(zc,"\r\n")}}):{name:c.name,value:d.replace(zc,"\r\n")}}).get()}});var Bd=/%20/g,Cd=/#.*$/,Dd=/([?&])_=[^&]*/,Ed=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fd=/^(?:GET|HEAD)$/,Gd=/^\/\//,Ac={},nb={},Bc="*/".concat("*"),Cb=I.createElement("a");Cb.href=La.href;f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:La.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(La.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?ob(ob(b,f.ajaxSettings),c):ob(f.ajaxSettings,b)},ajaxPrefilter:Ub(Ac),ajaxTransport:Ub(nb),ajax:function(c,d){function e(c,d,n,r){var t,y,x,p,C=d;if(!q){q=!0;l&&b.clearTimeout(l);j=void 0;m=r||"";N.readyState=0<c?4:0;r=200<=c&&300>c||304===c;if(n){x=s;for(var E=N,F,I,K,G,P=x.contents,M=x.dataTypes;"*"===M[0];)M.shift(),void 0===F&&(F=x.mimeType||E.getResponseHeader("Content-Type"));if(F)for(I in P)if(P[I]&&P[I].test(F)){M.unshift(I);
break}if(M[0]in n)K=M[0];else{for(I in n){if(!M[0]||x.converters[I+" "+M[0]]){K=I;break}G||(G=I)}K=K||G}n=K?(K!==M[0]&&M.unshift(K),n[K]):void 0;x=n}var O;a:{n=s;F=x;I=N;K=r;var V,R,Q;x={};E=n.dataTypes.slice();if(E[1])for(V in n.converters)x[V.toLowerCase()]=n.converters[V];for(G=E.shift();G;)if(n.responseFields[G]&&(I[n.responseFields[G]]=F),!Q&&K&&n.dataFilter&&(F=n.dataFilter(F,n.dataType)),Q=G,G=E.shift())if("*"===G)G=Q;else if("*"!==Q&&Q!==G){if(V=x[Q+" "+G]||x["* "+G],!V)for(O in x)if(R=O.split(" "),
R[1]===G&&(V=x[Q+" "+R[0]]||x["* "+R[0]])){!0===V?V=x[O]:!0!==x[O]&&(G=R[0],E.unshift(R[1]));break}if(!0!==V)if(V&&n["throws"])F=V(F);else try{F=V(F)}catch(S){O={state:"parsererror",error:V?S:"No conversion from "+Q+" to "+G};break a}}O={state:"success",data:F}}x=O;r?(s.ifModified&&(p=N.getResponseHeader("Last-Modified"),p&&(f.lastModified[g]=p),p=N.getResponseHeader("etag"),p&&(f.etag[g]=p)),204===c||"HEAD"===s.type?C="nocontent":304===c?C="notmodified":(C=x.state,t=x.data,y=x.error,r=!y)):(y=C,
!c&&C||(C="error",0>c&&(c=0)));N.status=c;N.statusText=(d||C)+"";r?J.resolveWith(z,[t,C,N]):J.rejectWith(z,[N,C,y]);N.statusCode(L);L=void 0;u&&A.trigger(r?"ajaxSuccess":"ajaxError",[N,s,r?t:y]);H.fireWith(z,[N,C]);u&&(A.trigger("ajaxComplete",[N,s]),--f.active||f.event.trigger("ajaxStop"))}}"object"==typeof c&&(d=c,c=void 0);d=d||{};var j,g,m,n,l,r,q,u,x,p,s=f.ajaxSetup({},d),z=s.context||s,A=s.context&&(z.nodeType||z.jquery)?f(z):f.event,J=f.Deferred(),H=f.Callbacks("once memory"),L=s.statusCode||
{},F={},K={},G="canceled",N={readyState:0,getResponseHeader:function(b){var c;if(q){if(!n)for(n={};c=Ed.exec(m);)n[c[1].toLowerCase()]=c[2];c=n[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return q?m:null},setRequestHeader:function(b,c){return null==q&&(b=K[b.toLowerCase()]=K[b.toLowerCase()]||b,F[b]=c),this},overrideMimeType:function(b){return null==q&&(s.mimeType=b),this},statusCode:function(b){var c;if(b)if(q)N.always(b[N.status]);else for(c in b)L[c]=[L[c],b[c]];return this},
abort:function(b){b=b||G;return j&&j.abort(b),e(0,b),this}};if(J.promise(N),s.url=((c||s.url||La.href)+"").replace(Gd,La.protocol+"//"),s.type=d.method||d.type||s.method||s.type,s.dataTypes=(s.dataType||"*").toLowerCase().match(X)||[""],null==s.crossDomain){r=I.createElement("a");try{r.href=s.url,r.href=r.href,s.crossDomain=Cb.protocol+"//"+Cb.host!=r.protocol+"//"+r.host}catch(M){s.crossDomain=!0}}if(s.data&&s.processData&&"string"!=typeof s.data&&(s.data=f.param(s.data,s.traditional)),Vb(Ac,s,d,
N),q)return N;(u=f.event&&s.global)&&0===f.active++&&f.event.trigger("ajaxStart");s.type=s.type.toUpperCase();s.hasContent=!Fd.test(s.type);g=s.url.replace(Cd,"");s.hasContent?s.data&&s.processData&&0===(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(s.data=s.data.replace(Bd,"+")):(p=s.url.slice(g.length),s.data&&(g+=(Bb.test(g)?"&":"?")+s.data,delete s.data),!1===s.cache&&(g=g.replace(Dd,"$1"),p=(Bb.test(g)?"&":"?")+"_="+yc++ +p),s.url=g+p);s.ifModified&&(f.lastModified[g]&&N.setRequestHeader("If-Modified-Since",
f.lastModified[g]),f.etag[g]&&N.setRequestHeader("If-None-Match",f.etag[g]));(s.data&&s.hasContent&&!1!==s.contentType||d.contentType)&&N.setRequestHeader("Content-Type",s.contentType);N.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+Bc+"; q=0.01":""):s.accepts["*"]);for(x in s.headers)N.setRequestHeader(x,s.headers[x]);if(s.beforeSend&&(!1===s.beforeSend.call(z,N,s)||q))return N.abort();if(G="abort",H.add(s.complete),N.done(s.success),
N.fail(s.error),j=Vb(nb,s,d,N)){if(N.readyState=1,u&&A.trigger("ajaxSend",[N,s]),q)return N;s.async&&0<s.timeout&&(l=b.setTimeout(function(){N.abort("timeout")},s.timeout));try{q=!1,j.send(F,e)}catch(P){if(q)throw P;e(-1,P)}}else e(-1,"No Transport");return N},getJSON:function(b,c,d){return f.get(b,c,d,"json")},getScript:function(b,c){return f.get(b,void 0,c,"script")}});f.each(["get","post"],function(b,c){f[c]=function(b,d,e,j){return f.isFunction(d)&&(j=j||e,e=d,d=void 0),f.ajax(f.extend({url:b,
type:c,dataType:j,data:d,success:e},f.isPlainObject(b)&&b))}});f._evalUrl=function(b){return f.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};f.fn.extend({wrapAll:function(b){var c;return this[0]&&(f.isFunction(b)&&(b=b.call(this[0])),c=f(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(b){return f.isFunction(b)?
this.each(function(c){f(this).wrapInner(b.call(this,c))}):this.each(function(){var c=f(this),d=c.contents();d.length?d.wrapAll(b):c.append(b)})},wrap:function(b){var c=f.isFunction(b);return this.each(function(d){f(this).wrapAll(c?b.call(this,d):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){f(this).replaceWith(this.childNodes)}),this}});f.expr.pseudos.hidden=function(b){return!f.expr.pseudos.visible(b)};f.expr.pseudos.visible=function(b){return!(!b.offsetWidth&&!b.offsetHeight&&
!b.getClientRects().length)};f.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(c){}};var Hd={"0":200,1223:204},Ma=f.ajaxSettings.xhr();M.cors=!!Ma&&"withCredentials"in Ma;M.ajax=Ma=!!Ma;f.ajaxTransport(function(c){var d,e;if(M.cors||Ma&&!c.crossDomain)return{send:function(f,j){var g,m=c.xhr();if(m.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(g in c.xhrFields)m[g]=c.xhrFields[g];c.mimeType&&m.overrideMimeType&&m.overrideMimeType(c.mimeType);c.crossDomain||f["X-Requested-With"]||
(f["X-Requested-With"]="XMLHttpRequest");for(g in f)m.setRequestHeader(g,f[g]);d=function(b){return function(){d&&(d=e=m.onload=m.onerror=m.onabort=m.onreadystatechange=null,"abort"===b?m.abort():"error"===b?"number"!=typeof m.status?j(0,"error"):j(m.status,m.statusText):j(Hd[m.status]||m.status,m.statusText,"text"!==(m.responseType||"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}};m.onload=d();e=m.onerror=d("error");void 0!==m.onabort?
m.onabort=e:m.onreadystatechange=function(){4===m.readyState&&b.setTimeout(function(){d&&e()})};d=d("abort");try{m.send(c.hasContent&&c.data||null)}catch(n){if(d)throw n;}},abort:function(){d&&d()}}});f.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return f.globalEval(b),b}}});
f.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});f.ajaxTransport("script",function(b){if(b.crossDomain){var c,d;return{send:function(e,j){c=f("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",d=function(b){c.remove();d=null;b&&j("error"===b.type?404:200,b.type)});I.head.appendChild(c[0])},abort:function(){d&&d()}}}});var Cc=[],Db=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Cc.pop()||f.expando+
"_"+yc++;return this[b]=!0,b}});f.ajaxPrefilter("json jsonp",function(c,d,e){var j,g,m,n=!1!==c.jsonp&&(Db.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Db.test(c.data)&&"data");if(n||"jsonp"===c.dataTypes[0])return j=c.jsonpCallback=f.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,n?c[n]=c[n].replace(Db,"$1"+j):!1!==c.jsonp&&(c.url+=(Bb.test(c.url)?"&":"?")+c.jsonp+"="+j),c.converters["script json"]=function(){return m||
f.error(j+" was not called"),m[0]},c.dataTypes[0]="json",g=b[j],b[j]=function(){m=arguments},e.always(function(){void 0===g?f(b).removeProp(j):b[j]=g;c[j]&&(c.jsonpCallback=d.jsonpCallback,Cc.push(j));m&&f.isFunction(g)&&g(m[0]);m=g=void 0}),"script"});var Id=M,Dc,Ec=I.implementation.createHTMLDocument("").body;Dc=(Ec.innerHTML="<form></form><form></form>",2===Ec.childNodes.length);Id.createHTMLDocument=Dc;f.parseHTML=function(b,c,d){if("string"!=typeof b)return[];"boolean"==typeof c&&(d=c,c=!1);
var e,j,g;return c||(M.createHTMLDocument?(c=I.implementation.createHTMLDocument(""),e=c.createElement("base"),e.href=I.location.href,c.head.appendChild(e)):c=I),j=kc.exec(b),g=!d&&[],j?[c.createElement(j[1])]:(j=J([b],c,g),g&&g.length&&f(g).remove(),f.merge([],j.childNodes))};f.fn.load=function(b,c,d){var e,j,g,m=this,n=b.indexOf(" ");return-1<n&&(e=pa(b.slice(n)),b=b.slice(0,n)),f.isFunction(c)?(d=c,c=void 0):c&&"object"==typeof c&&(j="POST"),0<m.length&&f.ajax({url:b,type:j||"GET",dataType:"html",
data:c}).done(function(b){g=arguments;m.html(e?f("<div>").append(f.parseHTML(b)).find(e):b)}).always(d&&function(b,c){m.each(function(){d.apply(this,g||[b.responseText,c,b])})}),this};f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){f.fn[c]=function(b){return this.on(c,b)}});f.expr.pseudos.animated=function(b){return f.grep(f.timers,function(c){return b===c.elem}).length};f.offset={setOffset:function(b,c,d){var e,j,g,m,n,r,l=f.css(b,"position"),q=f(b),
s={};"static"===l&&(b.style.position="relative");n=q.offset();g=f.css(b,"top");r=f.css(b,"left");("absolute"===l||"fixed"===l)&&-1<(g+r).indexOf("auto")?(e=q.position(),m=e.top,j=e.left):(m=parseFloat(g)||0,j=parseFloat(r)||0);f.isFunction(c)&&(c=c.call(b,d,f.extend({},n)));null!=c.top&&(s.top=c.top-n.top+m);null!=c.left&&(s.left=c.left-n.left+j);"using"in c?c.using.call(b,s):q.css(s)}};f.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){f.offset.setOffset(this,
b,c)});var c,d,e,j,g=this[0];if(g)return g.getClientRects().length?(e=g.getBoundingClientRect(),c=g.ownerDocument,d=c.documentElement,j=c.defaultView,{top:e.top+j.pageYOffset-d.clientTop,left:e.left+j.pageXOffset-d.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var b,c,d=this[0],e={top:0,left:0};return"fixed"===f.css(d,"position")?c=d.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),g(b[0],"html")||(e=b.offset()),e={top:e.top+f.css(b[0],"borderTopWidth",!0),left:e.left+
f.css(b[0],"borderLeftWidth",!0)}),{top:c.top-e.top-f.css(d,"marginTop",!0),left:c.left-e.left-f.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===f.css(b,"position");)b=b.offsetParent;return b||gb})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;f.fn[b]=function(e){return ja(this,function(b,e,j){var g;return f.isWindow(b)?g=b:9===b.nodeType&&(g=b.defaultView),void 0===j?g?g[c]:
b[e]:void(g?g.scrollTo(d?g.pageXOffset:j,d?j:g.pageYOffset):b[e]=j)},b,e,arguments.length)}});f.each(["top","left"],function(b,c){f.cssHooks[c]=Lb(M.pixelPosition,function(b,d){if(d)return d=Ga(b,c),kb.test(d)?f(b).position()[c]+"px":d})});f.each({Height:"height",Width:"width"},function(b,c){f.each({padding:"inner"+b,content:c,"":"outer"+b},function(d,e){f.fn[e]=function(j,g){var m=arguments.length&&(d||"boolean"!=typeof j),n=d||(!0===j||!0===g?"margin":"border");return ja(this,function(c,d,j){var g;
return f.isWindow(c)?0===e.indexOf("outer")?c["inner"+b]:c.document.documentElement["client"+b]:9===c.nodeType?(g=c.documentElement,Math.max(c.body["scroll"+b],g["scroll"+b],c.body["offset"+b],g["offset"+b],g["client"+b])):void 0===j?f.css(c,d,n):f.style(c,d,j,n)},c,m?j:void 0,m)}})});f.fn.extend({bind:function(b,c,d){return this.on(b,null,c,d)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,c,d,e){return this.on(c,b,d,e)},undelegate:function(b,c,d){return 1===arguments.length?
this.off(b,"**"):this.off(c,b||"**",d)}});f.holdReady=function(b){b?f.readyWait++:f.ready(!0)};f.isArray=Array.isArray;f.parseJSON=JSON.parse;f.nodeName=g;"function"==typeof define&&define.amd&&define("jquery",[],function(){return f});var Jd=b.jQuery,Kd=b.$;return f.noConflict=function(c){return b.$===f&&(b.$=Kd),c&&b.jQuery===f&&(b.jQuery=Jd),f},c||(b.jQuery=b.$=f),f});var portraitMode=!0,mobilePortraitWidth=480,mobilePortraitHeight=640,mobileLandscapeWidth=640,mobileLandscapeHeight=480,mobileWidth=portraitMode?mobilePortraitWidth:mobileLandscapeWidth,mobileHeight=portraitMode?mobilePortraitHeight:mobileLandscapeHeight,desktopWidth=480,desktopHeight=640,w,h,multiplier,destW,destH,dynamicClickableEntityDivs={},coreDivsToResize=["canvas","bgcanvas","play","orientate"],advancedDivsToResize={};
function adjustLayers(b){for(i=0;i<coreDivsToResize.length;i++)ig.ua.mobile?($("#"+coreDivsToResize[i]).width(w),$("#"+coreDivsToResize[i]).height(h)):($("#"+coreDivsToResize[i]).width(destW),$("#"+coreDivsToResize[i]).height(destH),$("#"+coreDivsToResize[i]).css("left",b?0:w/2-destW/2));for(key in advancedDivsToResize)try{$("#"+key).width(w),$("#"+key).height(h),$("#"+key+"-Box").css("left",(w-advancedDivsToResize[key]["box-width"])/2),$("#"+key+"-Box").css("top",(h-advancedDivsToResize[key]["box-height"])/
2)}catch(c){console.log(c)}$("#ajaxbar").width(w);$("#ajaxbar").height(h)}var minHeight=99999999;
function sizeHandler(){if($("#game")){w=window.innerWidth;h=window.innerHeight;ig.ua.mobile?(multiplier=Math.min(h/mobileHeight,w/mobileWidth),destW=mobileWidth*multiplier,destH=mobileHeight*multiplier):(multiplier=Math.min(h/desktopHeight,w/desktopWidth),destW=desktopWidth*multiplier,destH=desktopHeight*multiplier);widthRatio=window.innerWidth/mobileWidth;heightRatio=window.innerHeight/mobileHeight;adjustLayers();window.scrollTo(0,1);for(var b=navigator.userAgent.split(" "),c=0;c<b.length;c++)b[c].substr(0,
8);navigator.userAgent.indexOf("wv");navigator.userAgent.indexOf("SamsungBrowser")}}function orientationHandler(){console.log("changing orientation ...");ig.ua.mobile&&((portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth)?($("#orientate").show(),$("#game").hide()):($("#orientate").hide(),$("#game").show()));sizeHandler()}
function fixSamsungHandler(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",
function(b){b.preventDefault();return!1},!1))}window.addEventListener("resize",function(){orientationHandler()},!1);window.addEventListener("orientationchange",function(){orientationHandler()},!1);document.ontouchmove=function(b){window.scrollTo(0,1);b.preventDefault()};function getInternetExplorerVersion(){var b=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b}var ie=getInternetExplorerVersion();function getQueryVariable(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==b)return decodeURIComponent(e[1])}};this.jukebox={};
jukebox.Player=function(b,c){this.id=++jukebox.__jukeboxId;this.origin=c||null;this.settings={};for(var d in this.defaults)this.settings[d]=this.defaults[d];if("[object Object]"===Object.prototype.toString.call(b))for(var e in b)this.settings[e]=b[e];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||
null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var b=this,c=this.settings,d={},e;jukebox.Manager&&void 0!==jukebox.Manager.features&&(d=jukebox.Manager.features);if(!0===d.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var g=function(c){b.__addToManager(c)};
this.context.addEventListener("canplaythrough",g,!0);window.setTimeout(function(){b.context.removeEventListener("canplaythrough",g,!0);g("timeout")},c.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(e in this.HTML5API)this[e]=this.HTML5API[e];1<d.channels?!0===c.autoplay?this.context.autoplay=!0:void 0!==c.spritemap[c.autoplay]&&this.play(c.autoplay):1===d.channels&&void 0!==c.spritemap[c.autoplay]&&(this.backgroundMusic=c.spritemap[c.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(c.autoplay));1==d.channels&&!0!==c.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==b.isPlaying&&(b.pause(),b.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){b.__wasAutoPaused&&(b.resume(),delete b._wasAutoPaused)}))}else if(!0===d.flashaudio){for(e in this.FLASHAPI)this[e]=this.FLASHAPI[e];d=["id=jukebox-flashstream-"+this.id,"autoplay="+c.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(d);
!0===c.autoplay?this.play(0):c.spritemap[c.autoplay]&&this.play(c.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(b){var c,d=this.settings.flashMediaElement,e,g={flashvars:b.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){c=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(c);var l=document.createElement("object");
l.id="jukebox-flashstream-"+this.id;l.setAttribute("type","application/x-shockwave-flash");l.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");l.setAttribute("width","0");l.setAttribute("height","0");g.movie=d+"?x="+(Date.now?Date.now():+new Date);g.flashvars=b.join("&amp;");for(e in g)b=document.createElement("param"),b.setAttribute("name",e),b.setAttribute("value",g[e]),l.appendChild(b);c.outerHTML=l.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{c=
document.createElement("embed");c.id="jukebox-flashstream-"+this.id;c.setAttribute("type","application/x-shockwave-flash");c.setAttribute("width","100");c.setAttribute("height","100");g.play=!1;g.loop=!1;g.src=d+"?x="+(Date.now?Date.now():+new Date);for(e in g)c.setAttribute(e,g[e]);document.getElementsByTagName("body")[0].appendChild(c);this.context=c}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var b=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
b,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(b-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(b,c){if(null!==this.isPlaying&&!0!==c)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(b,this.id);else{var d=this.settings.spritemap,e;if(void 0!==d[b])e=d[b].start;else if("number"===typeof b){e=b;for(var g in d)if(e>=d[g].start&&e<=
d[g].end){b=g;break}}void 0!==e&&"[object Object]"===Object.prototype.toString.call(d[b])&&(this.isPlaying=this.settings.spritemap[b],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(e))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(b){b="number"===
typeof b?b:this.__lastPosition;if(null!==b)return this.play(b),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(b){this.context.volume=b;return 1E-4>Math.abs(this.context.volume-b)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(b){try{return this.context.currentTime=b,!0}catch(c){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(b){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(b),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(b){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(b):!1}}};if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(b){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var c in this.defaults)this.settings[c]=this.defaults[c];if("[object Object]"===Object.prototype.toString.call(b))for(var d in b)this.settings[d]=b[d];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var b=window.Audio&&new Audio;if(b&&b.canPlayType&&!1===this.settings.useFlash){for(var c=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
d,e,g=0,l=c.length;g<l;g++)if(e=c[g].e,c[g].m.length&&"object"===typeof c[g].m)for(var p=0,n=c[g].m.length;p<n;p++)if(d=c[g].m[p],""!==b.canPlayType(d)){this.codecs[e]=d;break}else this.codecs[e]||(this.codecs[e]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;b.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(b.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(q){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(b){return this.__players&&void 0!==this.__players[b]?this.__players[b]:null},__getClone:function(b,c){for(var d in this.__clones){var e=this.__clones[d];if(null===e.isPlaying&&e.origin===b)return e}if("[object Object]"===Object.prototype.toString.call(c)){d={};for(var g in c)d[g]=c[g];d.autoplay=!1;g=new jukebox.Player(d,b);g.isClone=!0;g.wasReady=!1;return this.__clones[g.id]=g}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var b=this.__queue[0],c=this.__getPlayerById(b.origin);if(null!==c){var d=this.__getClone(b.origin,c.settings);null!==d&&(!0===this.features.volume&&(c=this.__players[b.origin])&&d.setVolume(c.getVolume()),this.add(d),d.play(b.pointer,!0))}this.__queue.splice(0,1)}else for(d in this.__queue.length&&1===this.features.channels&&(b=this.__queue[0],c=this.__getPlayerById(b.origin),null!==c&&c.play(b.pointer,!0),this.__queue.splice(0,1)),this.__players)b=this.__players[d],
c=b.getCurrentTime()||0,b.isPlaying&&!1===b.wasReady?b.wasReady=b.setCurrentTime(b.isPlaying.start):b.isPlaying&&!0===b.wasReady?c>b.isPlaying.end&&(!0===b.isPlaying.loop?b.play(b.isPlaying.start,!0):b.stop()):b.isClone&&null===b.isPlaying?this.remove(b):void 0!==b.backgroundMusic&&null===b.isPlaying&&c>b.backgroundMusic.end&&b.backgroundHackForiOS()},getPlayableResource:function(b){"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);for(var c=0,d=b.length;c<d;c++){var e=b[c],g=e.match(/\.([^\.]*)$/)[1];
if(g&&this.codecs[g])return e}return null},add:function(b){return b instanceof jukebox.Player&&void 0===this.__players[b.id]?(this.__playersLength++,this.__players[b.id]=b,!0):!1},remove:function(b){return b instanceof jukebox.Player&&void 0!==this.__players[b.id]?(this.__playersLength--,delete this.__players[b.id],!0):!1},addToQueue:function(b,c){return("string"===typeof b||"number"===typeof b)&&void 0!==this.__players[c]?(this.__queue.push({pointer:b,origin:c}),!0):!1}};(function(){var b={},c=null,d=!0,e=!1;if("undefined"!==typeof AudioContext)c=new AudioContext;else if("undefined"!==typeof webkitAudioContext)c=new webkitAudioContext;else if("undefined"!==typeof Audio){d=!1;try{new Audio}catch(g){e=!0}}else d=!1,e=!0;if(d){var l="undefined"===typeof c.createGain?c.createGainNode():c.createGain();l.gain.value=1;l.connect(c.destination)}var p=function(){this._volume=1;this._muted=!1;this.usingWebAudio=d;this.noAudio=e;this._howls=[]};p.prototype={volume:function(b){b=
parseFloat(b);if(0<=b&&1>=b){this._volume=b;d&&(l.gain.value=b);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(b=0;b<this._howls[c]._audioNode.length;b++)this._howls[c]._audioNode[b].volume=this._howls[c]._volume*this._volume;return this}return d?l.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(b){this._muted=b;d&&(l.gain.value=b?0:this._volume);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&
!1===this._howls[c]._webAudio)for(var e=0;e<this._howls[c]._audioNode.length;e++)this._howls[c]._audioNode[e].muted=b}};var n=new p,p=null;if(!e)var p=new Audio,q={mp3:!!p.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!p.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!p.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!p.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(p.canPlayType("audio/x-m4a;")||p.canPlayType("audio/aac;")).replace(/^no$/,
""),mp4:!!(p.canPlayType("audio/x-mp4;")||p.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!p.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")};var u=function(b){this._autoplay=b.autoplay||!1;this._buffer=b.buffer||!1;this._duration=b.duration||0;this._format=b.format||null;this._loop=b.loop||!1;this._loaded=!1;this._sprite=b.sprite||{};this._src=b.src||"";this._pos3d=b.pos3d||[0,0,-0.5];this._volume=void 0!==b.volume?b.volume:1;this._urls=b.urls||[];this._rate=b.rate||1;this._onload=
[b.onload||function(){}];this._onloaderror=[b.onloaderror||function(){}];this._onend=[b.onend||function(){}];this._onpause=[b.onpause||function(){}];this._onplay=[b.onplay||function(){}];this._onendTimer=[];this._webAudio=d&&!this._buffer;this._audioNode=[];this._webAudio&&this._setupAudioNode();n._howls.push(this);this.load()};u.prototype={load:function(){var d=this,g=null;if(!e){for(var r=0;r<d._urls.length;r++){var l,u;if(d._format)l=d._format;else if(u=d._urls[r].toLowerCase().split("?")[0],l=
(l=u.match(/.+\.([^?]+)(\?|$)/))&&2<=l.length?l:u.match(/data\:audio\/([^?]+);/))l=l[1];else{d.on("loaderror");return}if(q[l]){g=d._urls[r];break}}if(g){d._src=g;if(d._webAudio){var p=g;if(p in b)d._duration=b[p].duration,s(d);else{var J=new XMLHttpRequest;J.open("GET.html",p,!0);J.responseType="arraybuffer";J.onload=function(){c.decodeAudioData(J.response,function(c){c&&(b[p]=c,s(d,c))},function(){d.on("loaderror")})};J.onerror=function(){d._webAudio&&(d._buffer=!0,d._webAudio=!1,d._audioNode=[],delete d._gainNode,
d.load())};try{J.send()}catch(Fa){J.onerror()}}}else{var K=new Audio;d._audioNode.push(K);K.src=g;K._pos=0;K.preload="auto";K.volume=n._muted?0:d._volume*n.volume();b[g]=d;var Q=function(){d._duration=Math.ceil(10*K.duration)/10;0===Object.getOwnPropertyNames(d._sprite).length&&(d._sprite={_default:[0,1E3*d._duration]});d._loaded||(d._loaded=!0,d.on("load"));d._autoplay&&d.play();K.removeEventListener("canplaythrough",Q,!1)};K.addEventListener("canplaythrough",Q,!1);K.load()}return d}}d.on("loaderror")},
urls:function(b){return b?(this.stop(),this._urls="string"===typeof b?[b]:b,this._loaded=!1,this.load(),this):this._urls},play:function(d,e){var g=this;"function"===typeof d&&(e=d);if(!d||"function"===typeof d)d="_default";if(!g._loaded)return g.on("load",function(){g.play(d,e)}),g;if(!g._sprite[d])return"function"===typeof e&&e(),g;g._inactiveNode(function(l){l._sprite=d;var q=0<l._pos?l._pos:g._sprite[d][0]/1E3,s=g._sprite[d][1]/1E3-l._pos,u=!(!g._loop&&!g._sprite[d][2]),p="string"===typeof e?e:
Math.round(Date.now()*Math.random())+"",K,Q={id:p,sprite:d,loop:u};K=setTimeout(function(){!g._webAudio&&u&&g.stop(Q.id,Q.timer).play(d,Q.id);g._webAudio&&!u&&(g._nodeById(Q.id).paused=!0,g._nodeById(Q.id)._pos=0);!g._webAudio&&!u&&g.stop(Q.id,Q.timer);g.on("end",p)},1E3*s);g._onendTimer.push(K);Q.timer=g._onendTimer[g._onendTimer.length-1];if(g._webAudio){K=g._sprite[d][0]/1E3;var R=g._sprite[d][1]/1E3;l.id=p;l.paused=!1;K=[u,K,R];R=g._nodeById(p);R.bufferSource=c.createBufferSource();R.bufferSource.buffer=
b[g._src];R.bufferSource.connect(R.panner);R.bufferSource.loop=K[0];K[0]&&(R.bufferSource.loopStart=K[1],R.bufferSource.loopEnd=K[1]+K[2]);R.bufferSource.playbackRate.value=g._rate;g._playStart=c.currentTime;l.gain.value=g._volume;"undefined"===typeof l.bufferSource.start?l.bufferSource.noteGrainOn(0,q,s):l.bufferSource.start(0,q,s)}else if(4===l.readyState)l.id=p,l.currentTime=q,l.muted=n._muted,l.volume=g._volume*n.volume(),setTimeout(function(){l.play()},0);else{g._clearEndTimer(K);var Oa=d,jb=
e,Pa=function(){g.play(Oa,jb);l.removeEventListener("canplaythrough",Pa,!1)};l.addEventListener("canplaythrough",Pa,!1);return g}g.on("play");"function"===typeof e&&e(p);return g});return g},pause:function(b,c){var d=this;if(!d._loaded)return d.on("play",function(){d.pause(b)}),d;d._clearEndTimer(c||0);var e=b?d._nodeById(b):d._activeNode();if(e)if(e._pos=d.pos(null,b),d._webAudio){if(!e.bufferSource||e.paused)return d;e.paused=!0;"undefined"===typeof e.bufferSource.stop?e.bufferSource.noteOff(0):
e.bufferSource.stop(0)}else e.pause();d.on("pause");return d},stop:function(b,c){var d=this;if(!d._loaded)return d.on("play",function(){d.stop(b)}),d;d._clearEndTimer(c||0);var e=b?d._nodeById(b):d._activeNode();if(e)if(e._pos=0,d._webAudio){if(!e.bufferSource||e.paused)return d;e.paused=!0;"undefined"===typeof e.bufferSource.stop?e.bufferSource.noteOff(0):e.bufferSource.stop(0)}else e.pause(),e.currentTime=0;return d},mute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.mute(b)}),
c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=0:d.volume=0);return c},unmute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.unmute(b)}),c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=c._volume:d.volume=c._volume);return c},volume:function(b,c){var d=this;b=parseFloat(b);if(0<=b&&1>=b){d._volume=b;if(!d._loaded)return d.on("play",function(){d.volume(b,c)}),d;var e=c?d._nodeById(c):d._activeNode();e&&(d._webAudio?e.gain.value=b:e.volume=
b*n.volume());return d}return d._volume},loop:function(b){return"boolean"===typeof b?(this._loop=b,this):this._loop},sprite:function(b){return"object"===typeof b?(this._sprite=b,this):this._sprite},pos:function(b,d){var e=this;if(!e._loaded)return e.on("load",function(){e.pos(b)}),"number"===typeof b?e:e._pos||0;b=parseFloat(b);var g=d?e._nodeById(d):e._activeNode();if(g)return 0<=b?(e.pause(d),g._pos=b,e.play(g._sprite,d),e):e._webAudio?g._pos+(c.currentTime-e._playStart):g.currentTime;if(0<=b)return e;
for(g=0;g<e._audioNode.length;g++)if(e._audioNode[g].paused&&4===e._audioNode[g].readyState)return e._webAudio?e._audioNode[g]._pos:e._audioNode[g].currentTime},pos3d:function(b,c,d,e){var g=this;c="undefined"===typeof c||!c?0:c;d="undefined"===typeof d||!d?-0.5:d;if(!g._loaded)return g.on("play",function(){g.pos3d(b,c,d,e)}),g;if(0<=b||0>b){if(g._webAudio){var n=e?g._nodeById(e):g._activeNode();n&&(g._pos3d=[b,c,d],n.panner.setPosition(b,c,d))}}else return g._pos3d;return g},fade:function(b,c,d,
e,g){var n=this,l=Math.abs(b-c),q=b>c?"down":"up",l=l/0.01,s=d/l;if(!n._loaded)return n.on("load",function(){n.fade(b,c,d,e,g)}),n;n.volume(b,g);for(var u=1;u<=l;u++)(function(){var b=Math.round(1E3*(n._volume+("up"===q?0.01:-0.01)*u))/1E3;setTimeout(function(){n.volume(b,g);b===c&&e&&e()},s*u)})()},fadeIn:function(b,c,d){return this.volume(0).play().fade(0,b,c,d)},fadeOut:function(b,c,d,e){var g=this;return g.fade(g._volume,b,c,function(){d&&d();g.pause(e);g.on("end")},e)},_nodeById:function(b){for(var c=
this._audioNode[0],d=0;d<this._audioNode.length;d++)if(this._audioNode[d].id===b){c=this._audioNode[d];break}return c},_activeNode:function(){for(var b=null,c=0;c<this._audioNode.length;c++)if(!this._audioNode[c].paused){b=this._audioNode[c];break}this._drainPool();return b},_inactiveNode:function(b){for(var c=null,d=0;d<this._audioNode.length;d++)if(this._audioNode[d].paused&&4===this._audioNode[d].readyState){b(this._audioNode[d]);c=!0;break}this._drainPool();if(!c){var e;this._webAudio?(e=this._setupAudioNode(),
b(e)):(this.load(),e=this._audioNode[this._audioNode.length-1],e.addEventListener("loadedmetadata",function(){b(e)}))}},_drainPool:function(){var b=0,c;for(c=0;c<this._audioNode.length;c++)this._audioNode[c].paused&&b++;for(c=this._audioNode.length-1;0<=c&&!(5>=b);c--)this._audioNode[c].paused&&(this._webAudio&&this._audioNode[c].disconnect(0),b--,this._audioNode.splice(c,1))},_clearEndTimer:function(b){b=this._onendTimer.indexOf(b);b=0<=b?b:0;this._onendTimer[b]&&(clearTimeout(this._onendTimer[b]),
this._onendTimer.splice(b,1))},_setupAudioNode:function(){var b=this._audioNode,d=this._audioNode.length;b[d]="undefined"===typeof c.createGain?c.createGainNode():c.createGain();b[d].gain.value=this._volume;b[d].paused=!0;b[d]._pos=0;b[d].readyState=4;b[d].connect(l);b[d].panner=c.createPanner();b[d].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);b[d].panner.connect(b[d]);return b[d]},on:function(b,c){var d=this["_on"+b];if("function"===typeof c)d.push(c);else for(var e=0;e<d.length;e++)c?
d[e].call(this,c):d[e].call(this);return this},off:function(b,c){for(var d=this["_on"+b],e=c.toString(),g=0;g<d.length;g++)if(e===d[g].toString()){d.splice(g,1);break}return this},unload:function(){for(var c=this._audioNode,d=0;d<this._audioNode.length;d++)c[d].paused||this.stop(c[d].id),this._webAudio?c[d].disconnect(0):c[d].src="";c=n._howls.indexOf(this);null!==c&&0<=c&&n._howls.splice(c,1);delete b[this._src]}};if(d)var s=function(b,c){b._duration=c?c.duration:b._duration;0===Object.getOwnPropertyNames(b._sprite).length&&
(b._sprite={_default:[0,1E3*b._duration]});b._loaded||(b._loaded=!0,b.on("load"));b._autoplay&&b.play()};"function"===typeof define&&define.amd&&define(function(){return{Howler:n,Howl:u}});"undefined"!==typeof exports&&(exports.Howler=n,exports.Howl=u);window.Howler=n;window.Howl=u})();(function(b){Number.prototype.map=function(b,c,d,e){return d+(e-d)*((this-b)/(c-b))};Number.prototype.limit=function(b,c){return Math.min(c,Math.max(b,this))};Number.prototype.round=function(b){b=Math.pow(10,b||0);return Math.round(this*b)/b};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(b){for(var c=this.length;c--;)this[c]===b&&this.splice(c,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),d=this,e=function(){},g=function(){return d.apply(this instanceof e&&b?
this:b,c.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;g.prototype=new e;return g};b.ig={game:null,debug:null,version:"1.23",global:b,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:b.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(b){return"#"==b.charAt(0)?document.getElementById(b.substr(1)):document.getElementsByTagName(b)},$new:function(b){return document.createElement(b)},copy:function(b){if(!b||"object"!=typeof b||
b instanceof HTMLElement||b instanceof ig.Class)return b;if(b instanceof Array)for(var c=[],d=0,e=b.length;d<e;d++)c[d]=ig.copy(b[d]);else for(d in c={},b)c[d]=ig.copy(b[d]);return c},merge:function(b,c){for(var d in c){var e=c[d];if("object"!=typeof e||e instanceof HTMLElement||e instanceof ig.Class||null===e)b[d]=e;else{if(!b[d]||"object"!=typeof b[d])b[d]=e instanceof Array?[]:{};ig.merge(b[d],e)}}return b},ksort:function(b){if(!b||"object"!=typeof b)return[];var c=[],d=[],e;for(e in b)c.push(e);
c.sort();for(e=0;e<c.length;e++)d.push(b[c[e]]);return d},setVendorAttribute:function(b,c,d){var e=c.charAt(0).toUpperCase()+c.substr(1);b[c]="undefined"!==typeof b.imageSmoothingEnabled?b["ms"+e]=b["moz"+e]=b["o"+e]=d:b["ms"+e]=b["moz"+e]=b["webkit"+e]=b["o"+e]=d},getVendorAttribute:function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);return"undefined"!==typeof b.imageSmoothingEnabled?b[c]||b["ms"+d]||b["moz"+d]||b["o"+d]:b[c]||b["ms"+d]||b["moz"+d]||b["webkit"+d]||b["o"+d]},normalizeVendorAttribute:function(b,
c){var d=ig.getVendorAttribute(b,c);!b[c]&&d&&(b[c]=d)},getImagePixels:function(b,c,d,e,g){var m=ig.$new("canvas");m.width=b.width;m.height=b.height;var l=m.getContext("2d");ig.System.SCALE.CRISP(m,l);var p=ig.getVendorAttribute(l,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(l,"getImageDataHD");var z=b.width/p,A=b.height/p;m.width=Math.ceil(z);m.height=Math.ceil(A);l.drawImage(b,0,0,z,A);return 1===p?l.getImageData(c,d,e,g):l.getImageDataHD(c,d,e,g)},module:function(b){if(ig._current)throw"Module '"+
ig._current.name+"' defines nothing";if(ig.modules[b]&&ig.modules[b].body)throw"Module '"+b+"' is already defined";ig._current={name:b,requires:[],loaded:!1,body:null};ig.modules[b]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(b){ig._current.body=b;ig._current=null;ig._initDOMReady()},addResource:function(b){ig.resources.push(b)},setNocache:function(b){ig.nocache=b?"?"+Date.now():""},
log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(b,c){ig.modules[b]={name:b,requires:[],loaded:!1,body:null};ig._waitForOnload++;var d=ig.prefix+ig.lib+b.replace(/\./g,"index.html")+".js"+ig.nocache,e=ig.$new("script");e.type="text/javascript";e.src=d;e.onload=function(){ig._waitForOnload--;ig._execModules()};e.onerror=function(){throw"Failed to load module "+b+" at "+d+" required from "+c;};ig.$("head")[0].appendChild(e)},_execModules:function(){for(var b=!1,c=
0;c<ig._loadQueue.length;c++){for(var d=ig._loadQueue[c],e=!0,g=0;g<d.requires.length;g++){var m=d.requires[g];ig.modules[m]?ig.modules[m].loaded||(e=!1):(e=!1,ig._loadScript(m,d.name))}e&&d.body&&(ig._loadQueue.splice(c,1),d.loaded=!0,d.body(),b=!0,c--)}if(b)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){b=[];for(c=0;c<ig._loadQueue.length;c++){e=[];m=ig._loadQueue[c].requires;for(g=0;g<m.length;g++)d=ig.modules[m[g]],(!d||!d.loaded)&&e.push(m[g]);b.push(ig._loadQueue[c].name+
" (requires: "+e.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+b.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=
b.devicePixelRatio||1;ig.ua.viewport={width:b.innerWidth,height:b.innerHeight};ig.ua.screen={width:b.screen.availWidth*ig.ua.pixelRatio,height:b.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
b||b.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),b.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(b,"requestAnimationFrame");
if(b.requestAnimationFrame){var c=1,d={};b.ig.setAnimation=function(e,g){var l=c++;d[l]=!0;var p=function(){d[l]&&(b.requestAnimationFrame(p,g),e())};b.requestAnimationFrame(p,g);return l};b.ig.clearAnimation=function(b){delete d[b]}}else b.ig.setAnimation=function(c){return b.setInterval(c,1E3/60)},b.ig.clearAnimation=function(c){b.clearInterval(c)};var e=!1,g=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,l=0;b.ig.Class=function(){};var p=function(b){var c=this.prototype,d={},e;for(e in b)"function"==
typeof b[e]&&"function"==typeof c[e]&&g.test(b[e])?(d[e]=c[e],c[e]=function(b,c){return function(){var e=this.parent;this.parent=d[b];var g=c.apply(this,arguments);this.parent=e;return g}}(e,b[e])):c[e]=b[e]};b.ig.Class.extend=function(c){function d(){if(!e){if(this.staticInstantiate){var b=this.staticInstantiate.apply(this,arguments);if(b)return b}for(var c in this)"object"==typeof this[c]&&(this[c]=ig.copy(this[c]));this.init&&this.init.apply(this,arguments)}return this}var u=this.prototype;e=!0;
var s=new this;e=!1;for(var j in c)s[j]="function"==typeof c[j]&&"function"==typeof u[j]&&g.test(c[j])?function(b,c){return function(){var d=this.parent;this.parent=u[b];var e=c.apply(this,arguments);this.parent=d;return e}}(j,c[j]):c[j];d.prototype=s;d.prototype.constructor=d;d.extend=b.ig.Class.extend;d.inject=p;d.classId=s.classId=++l;return d};b.ImpactMixin&&ig.merge(ig,b.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return ig.Image.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(b){var c=ig.getImagePixels(this.data,0,0,this.width,
this.height),d=this.width*b,e=this.height*b,g=ig.$new("canvas");g.width=d;g.height=e;for(var l=g.getContext("2d"),p=l.getImageData(0,0,d,e),n=0;n<e;n++)for(var q=0;q<d;q++){var u=4*(Math.floor(n/b)*this.width+Math.floor(q/b)),s=4*(n*d+q);p.data[s]=c.data[u];p.data[s+1]=c.data[u+1];p.data[s+2]=c.data[u+2];p.data[s+3]=c.data[u+3]}l.putImageData(p,0,0);this.data=g},draw:function(b,c,d,e,g,l){if(this.loaded){var p=ig.system.scale;g=(g?g:this.width)*p;l=(l?l:this.height)*p;ig.system.context.drawImage(this.data,
d?d*p:0,e?e*p:0,g,l,ig.system.getDrawPos(b),ig.system.getDrawPos(c),g,l);ig.Image.drawCount++}},drawTile:function(b,c,d,e,g,l,p){g=g?g:e;if(this.loaded&&!(e>this.width||g>this.height)){var n=ig.system.scale,q=Math.floor(e*n),u=Math.floor(g*n),s=l?-1:1,j=p?-1:1;if(l||p)ig.system.context.save(),ig.system.context.scale(s,j);ig.system.context.drawImage(this.data,Math.floor(d*e)%this.width*n,Math.floor(d*e/this.width)*g*n,q,u,ig.system.getDrawPos(b)*s-(l?q:0),ig.system.getDrawPos(c)*j-(p?u:0),q,u);(l||
p)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var b in ig.Image.cache)ig.Image.cache[b].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(b){this._loadMetrics(this.data);this.parent(b)},widthForString:function(b){if(-1!==b.indexOf("\n")){b=b.split("\n");for(var c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(b)},_widthForLine:function(b){for(var c=0,d=0;d<b.length;d++)c+=this.widthMap[b.charCodeAt(d)-this.firstChar]+
this.letterSpacing;return c},heightForString:function(b){return b.split("\n").length*(this.height+this.lineSpacing)},draw:function(b,c,d,e){"string"!=typeof b&&(b=b.toString());if(-1!==b.indexOf("\n")){b=b.split("\n");for(var g=this.height+this.lineSpacing,l=0;l<b.length;l++)this.draw(b[l],c,d+l*g,e)}else{if(e==ig.Font.ALIGN.RIGHT||e==ig.Font.ALIGN.CENTER)l=this._widthForLine(b),c-=e==ig.Font.ALIGN.CENTER?l/2:l;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(l=0;l<b.length;l++)e=b.charCodeAt(l),
c+=this._drawChar(e-this.firstChar,c,d);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=b.length}},_drawChar:function(b,c,d){if(!this.loaded||0>b||b>=this.indices.length)return 0;var e=ig.system.scale,g=this.widthMap[b]*e,l=(this.height-2)*e;ig.system.context.drawImage(this.data,this.indices[b]*e,0,g,l,ig.system.getDrawPos(c),ig.system.getDrawPos(d),g,l);return this.widthMap[b]+this.letterSpacing},_loadMetrics:function(b){this.height=b.height-1;this.widthMap=[];this.indices=
[];for(var c=ig.getImagePixels(b,0,b.height-1,b.width,1),d=0,e=0,g=0;g<b.width;g++){var l=4*g+3;127<c.data[l]?e++:128>c.data[l]&&e&&(this.widthMap.push(e),this.indices.push(g-e),d++,e=0)}this.widthMap.push(e);this.indices.push(g-e)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var b=new Audio,c=0;c<ig.Sound.use.length;c++){var d=ig.Sound.use[c];if(b.canPlayType(d.mime)){this.format=d;break}}this.format||(ig.Sound.enabled=!1)}},load:function(b,c,d){var e=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(c&&this.clips[b].length<ig.Sound.channels)for(c=this.clips[b].length;c<
ig.Sound.channels;c++){var g=new Audio(e);g.load();this.clips[b].push(g)}return this.clips[b][0]}var l=new Audio(e);d&&(l.addEventListener("canplaythrough",function n(c){l.removeEventListener("canplaythrough",n,!1);d(b,!0,c)},!1),l.addEventListener("error",function(c){d(b,!1,c)},!1));l.preload="auto";l.load();this.clips[b]=[l];if(c)for(c=1;c<ig.Sound.channels;c++)g=new Audio(e),g.load(),this.clips[b].push(g);return l},get:function(b){b=this.clips[b];for(var c=0,d;d=b[c++];)if(d.paused||d.ended)return d.ended&&
(d.currentTime=0),d;b[0].pause();b[0].currentTime=0;return b[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):
this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(b,c){if(ig.Sound.enabled){var d=ig.soundManager.load(b instanceof ig.Sound?b.path:b,!1);d.loop=this._loop;d.volume=this._volume;d.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(d);c&&(this.namedTracks[c]=d);this.currentTrack||
(this.currentTrack=d)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(b){if(b&&this.namedTracks[b])b=this.namedTracks[b],b!=this.currentTrack&&(this.stop(),
this.currentTrack=b);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var c in this.tracks)this.tracks[c].loop=b},getVolume:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,1);for(var c in this.tracks)this.tracks[c].volume=this._volume},fadeOut:function(b){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(b),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var b=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=b?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=b},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(b,c){this.path=b;this.multiChannel=!1!==c;this.load()},load:function(b){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,b):ig.addResource(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(b,c){this.gameClass=b;this.resources=c;this._loadCallbackBound=this._loadCallback.bind(this);for(var d=0;d<this.resources.length;d++)this._unloaded.push(this.resources[d].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var b=
0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(b){b.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(b,c){if(c)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=ig.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var b=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var b=Date.now();ig.Timer.time+=Math.min((b-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(b,c,d,e,g){this.fps=c;this.clock=new ig.Timer;this.canvas=ig.$(b);this.resize(d,e,g);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(b,c,d){this.width=b;this.height=c;this.scale=d||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(b){this.running?this.newGameClass=b:this.setGameNow(b)},setGameNow:function(b){ig.game=new b;ig.system.setDelegate(ig.game)},setDelegate:function(b){if("function"==typeof b.run)this.delegate=b,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(b){this.context.fillStyle=b;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});
ig.System.DRAW={AUTHENTIC:function(b){return Math.round(b)*this.scale},SMOOTH:function(b){return Math.round(b*this.scale)},SUBPIXEL:function(b){return b*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!1);b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},
SMOOTH:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!0);b.style.imageRendering="";b.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var b=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",b,!1);ig.system.canvas.addEventListener("DOMMouseScroll",b,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(b){var c=this.bindings[0<(b.wheelDelta?b.wheelDelta:-1*b.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];c&&(this.actions[c]=!0,this.presses[c]=!0,this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault())},mousemove:function(b){var c=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(c=ig.system.realWidth);var c=ig.system.scale*(c/ig.system.realWidth),d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());b=b.touches?b.touches[0]:b;this.mouse.x=(b.clientX-d.left)/c;this.mouse.y=(b.clientY-d.top)/c},contextmenu:function(b){this.bindings[ig.KEY.MOUSE2]&&(b.stopPropagation(),b.preventDefault())},keydown:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==
c))if(c="keydown"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,0>c&&window.focus(),("touchstart"==b.type||"mousedown"==b.type)&&this.mousemove(b),c=this.bindings[c])this.actions[c]=!0,this.locks[c]||(this.presses[c]=!0,this.locks[c]=!0),b.stopPropagation(),b.preventDefault()},keyup:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==c))if(c=this.bindings["keyup"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault()},
devicemotion:function(b){this.accel=b.accelerationIncludingGravity},bind:function(b,c){0>b?this.initMouse():0<b&&this.initKeyboard();this.bindings[b]=c},bindTouch:function(b,c){var d=ig.$(b),e=this;d.addEventListener("touchstart",function(b){e.touchStart(b,c)},!1);d.addEventListener("touchend",function(b){e.touchEnd(b,c)},!1);d.addEventListener("MSPointerDown",function(b){e.touchStart(b,c)},!1);d.addEventListener("MSPointerUp",function(b){e.touchEnd(b,c)},!1)},unbind:function(b){this.delayedKeyup[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(b){return this.actions[b]},pressed:function(b){return this.presses[b]},released:function(b){return!!this.delayedKeyup[b]},clearPressed:function(){for(var b in this.delayedKeyup)this.actions[b]=!1,this.locks[b]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(b,c){this.actions[c]=!0;this.presses[c]=!0;b.stopPropagation();b.preventDefault();return!1},
touchEnd:function(b,c){this.delayedKeyup[c]=!0;b.stopPropagation();b.preventDefault();return!1}})});ig.baked=!0;
ig.module("impact.sound-handler").defines(function(){ig.SoundHandler=ig.Class.extend({formats:{ogg:".ogg",mp3:".mp3"},jukebox:null,pausePosition:null,globalMute:!1,forceMuted:!1,muted:!1,bgmStarted:!1,bgmPlaying:!1,soundPlaying:!1,currentSoundPlaying:null,soundBuffer:[],voSoundLoaded:[],sfxSoundLoaded:[],SOUNDID:{},voSoundsToLoad:[],sfxSoundsToLoad:[{name:"staticSound",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/play/static"},{name:"openingSound",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/opening/opening"},
{name:"kittyopeningSound",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/opening/kittyopening"},{name:"bubble",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/bubble"},{name:"click",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/pop"},{name:"count",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/count"},{name:"over",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/over"},{name:"evil",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/evil"},{name:"hehe",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/yipee"},{name:"win",path:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/win"}],
debug:!1,init:function(){ig.ua.mobile?(this.initSfx(),this.setupJukebox()):(this.initSfx(),this.setupDesktopMusic());this.setupWindowHandler()},allVoSoundLoaded:function(){if(this.voSoundLoaded.length>=this.voSoundsToLoad.length){this.debug&&console.log("Vo ready");for(index=0;index<this.voSoundLoaded.length;index++)this.voSoundLoaded[index].on("end",function(b){b.isPlaying=!1;this.soundBuffer.pop()}.bind(this,this.voSoundLoaded[index])),this.voSoundLoaded[index].on("play",function(b){b.isPlaying=
!0}.bind(this,this.voSoundLoaded[index]));return!0}return!1},allSfxSoundLoaded:function(){return this.sfxSoundLoaded.length>=this.sfxSoundsToLoad.length?!0:!1},stopBackgroundMusic:function(){ig.ua.mobile?this.pausePosition=this.jukebox.player.pause():ig.music.pause();this.bgmPlaying=!1},playBackgroundMusic:function(){this.bgmPlaying||(this.bgmStarted=!0,ig.ua.mobile?this.pausePosition?this.jukebox.player.resume(this.pausePosition):this.jukebox.player.play(this.jukebox.player.settings.spritemap.music.start,
!0):ig.music.play(),this._unMuteBackgroundMusic(),this.bgmPlaying=!0)},playSound:function(b){if((b=this[b])&&(!this.forceMuted||!this.muted)&&!b.isPlaying)this.soundBuffer.push(b),b.play()},stopAllAndPlaySound:function(b){this.stopAllSounds();this.playSound(b)},stopAllSounds:function(){for(index=0;index<this.soundBuffer.length;index++)this.soundBuffer[index].isPlaying=!1,this.soundBuffer.splice(0,1)[0].stop()},addSound:function(b,c,d){var e=c+this.formats.ogg;c+=this.formats.mp3;this.SOUNDID[b]=b;
this[b]=d?new Howl({urls:[e,c],onload:d}):new Howl({urls:[e,c]})},_muteSounds:function(){for(i=0;i<ig.resources.length;i++)ig.resources[i].multiChannel&&ig.resources[i].stop();Howler.mute();this.debug&&console.log("Sounds muted")},_unMuteSounds:function(){Howler.unmute();ig.Sound.enabled=!0;this.debug&&console.log("Sounds can play")},_muteBackgroundMusic:function(){ig.ua.mobile?(this.stopBackgroundMusic(),this.jukebox.player.setVolume(0)):ig.music.volume=0;this.debug&&console.log("BGM muted");this.bgmPlaying=
!1},_unMuteBackgroundMusic:function(){this.bgmStarted&&(ig.ua.mobile?(this.pausePosition?this.jukebox.player.resume(this.pausePosition):this.jukebox.player.play(this.jukebox.player.settings.spritemap.music.start,!0),this.jukebox.player.setVolume(1)):ig.music.volume=1,this.debug&&console.log("BGM can play"),this.bgmPlaying=!0)},focusBlurMute:function(){this.forceMuted||this.mute()},focusBlurUnmute:function(){this.forceMuted||(this.unmute(),ig.game&&(ig.game.getSound(),ig.game.getMusic()))},setForceMuted:function(b){this.forceMuted=
b},mute:function(){this.muted||(this._muteSounds(),this._muteBackgroundMusic(),this.muted=!0)},unmute:function(){this.muted&&(this._unMuteSounds(),this._unMuteBackgroundMusic(),this.muted=!1)},setupWindowHandler:function(){"true"===getQueryVariable("webview")?($(window).focus(function(){ig.ua.mobile&&ig.game&&ig.game.resumeGame();ig.soundHandler&&ig.soundHandler.focusBlurUnmute()}),$(window).blur(function(){ig.soundHandler&&ig.soundHandler.focusBlurMute()})):(window.onfocus=function(){ig.ua.mobile&&
ig.game&&ig.game.resumeGame();ig.soundHandler&&ig.soundHandler.focusBlurUnmute()},window.onblur=function(){ig.soundHandler&&ig.soundHandler.focusBlurMute()})},initSfx:function(){for(index=0;index<this.sfxSoundsToLoad.length;index++){var b=function(b){this.sfxSoundLoaded.push(this[b])}.bind(this,this.sfxSoundsToLoad[index].name);this.addSound(this.sfxSoundsToLoad[index].name,this.sfxSoundsToLoad[index].path,b)}},initVoSfx:function(){for(index=0;index<this.voSoundsToLoad.length;index++){var b=function(b){this.voSoundLoaded.push(this[b])}.bind(this,
this.voSoundsToLoad[index].name);this.addSound(this.voSoundsToLoad[index].name,this.voSoundsToLoad[index].path,b)}},setupDesktopMusic:function(){ig.music.add("http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/bgm.*","background")},setupJukebox:function(){ig.ua.mobile&&(this.jukebox=new ig.Jukebox,this.pausePosition=this.jukebox.player.settings.spritemap.music.start)},forceLoopBGM:function(){if(ig.ua.winPhone&&!this.forceMuted&&this.bgmPlaying&&this.jukebox&&this.jukebox.player&&this.jukebox.player.settings.spritemap.music&&
this.jukebox.player.settings.spritemap.music.loop){if(0<=this.prevTime)if(this.jukebox.player.getCurrentTime()===this.prevTime){if(this.silentCounter||(this.silentCounter=0),this.silentCounter++,this.jukebox.player.getCurrentTime()>=this.jukebox.player.settings.spritemap.music.end||this.silentCounter>0.001*ig.soundHandler.jukebox.player.settings.timeout*ig.system.fps)ig.ua.mobile||this.jukebox.player.pause(),this.jukebox.player.play(this.jukebox.player.settings.spritemap.music.start,!0),this.silentCounter=
null}else this.silentCounter=null;this.prevTime=this.jukebox.player.getCurrentTime()}}})});function getHiddenProp(){var b=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var c=0;c<b.length;c++)if(b[c]+"Hidden"in document)return b[c]+"Hidden";return null}function isHidden(){var b=getHiddenProp();return!b?!1:document[b]}var visProp=getHiddenProp();if(visProp){var evtname=visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(evtname,visChange)}
window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.focusBlurMute()},!1);window.addEventListener("pageshow",function(){ig.ua.mobile&&ig.game&&ig.game.resumeGame();ig.soundHandler&&ig.soundHandler.focusBlurUnmute()},!1);function visChange(){isHidden()?ig.soundHandler&&ig.soundHandler.focusBlurMute():(ig.ua.mobile&&ig.game&&ig.game.resumeGame(),ig.soundHandler&&ig.soundHandler.focusBlurUnmute())}ig.baked=!0;
ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound","impact.sound-handler").defines(function(){ig.main=function(b,c,d,e,g,l,p){ig.system=new ig.System(b,d,e,g,l||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;ig.soundHandler=new ig.SoundHandler;(new (p||ig.Loader)(c,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(b,c,d){this.width=c;this.height=d;this.image=new ig.Image(b)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(b,c,d,e){this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=c;this.sequence=d;
this.stop=!!e;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:b%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(b,c){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(c>ig.system.height||0>b+d||0>c+d)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(c+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(b,
c,d){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=b;this.pos.y=this.last.y=c;ig.merge(this,d)},reset:function(b,c,d){var e=this.constructor.prototype;this.pos.x=b;this.pos.y=c;this.last.x=b;this.last.y=c;this.vel.x=e.vel.x;this.vel.y=e.vel.y;this.accel.x=e.accel.x;this.accel.y=e.accel.y;this.health=e.health;this._killed=e._killed;this.standing=e.standing;this.type=e.type;this.checkAgainst=e.checkAgainst;this.collides=e.collides;ig.merge(this,d)},addAnim:function(b,c,d,e){if(!this.animSheet)throw"No animSheet to add the animation "+
b+" to.";c=new ig.Animation(this.animSheet,c,d,e);this.anims[b]=c;this.currentAnim||(this.currentAnim=c);return c},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(b,c,d,e){return c?(b+c*ig.system.tick).limit(-e,e):d?(c=d*ig.system.tick,0<b-c?b-c:0>b+c?b+c:0):b.limit(-e,e)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&c<this.slopeStanding.max&&(this.standing=!0)}this.pos=b.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(b){this.health-=b;0>=this.health&&this.kill()},touches:function(b){return!(this.pos.x>=b.pos.x+b.size.x||this.pos.x+this.size.x<=b.pos.x||this.pos.y>=b.pos.y+b.size.y||this.pos.y+this.size.y<=b.pos.y)},distanceTo:function(b){var c=this.pos.x+this.size.x/2-(b.pos.x+b.size.x/2);b=this.pos.y+this.size.y/2-(b.pos.y+b.size.y/2);return Math.sqrt(c*c+b*b)},angleTo:function(b){return Math.atan2(b.pos.y+
b.size.y/2-(this.pos.y+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(b,c){b.checkAgainst&c.type&&b.check(c);c.checkAgainst&b.type&&c.check(b);b.collides&&(c.collides&&b.collides+c.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(b,c)};ig.Entity.solveCollision=
function(b,c){var d=null;if(b.collides==ig.Entity.COLLIDES.LITE||c.collides==ig.Entity.COLLIDES.FIXED)d=b;else if(c.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)d=c;b.last.x+b.size.x>c.last.x&&b.last.x<c.last.x+c.size.x?(b.last.y<c.last.y?ig.Entity.seperateOnYAxis(b,c,d):ig.Entity.seperateOnYAxis(c,b,d),b.collideWith(c,"y"),c.collideWith(b,"y")):b.last.y+b.size.y>c.last.y&&b.last.y<c.last.y+c.size.y&&(b.last.x<c.last.x?ig.Entity.seperateOnXAxis(b,c,d):ig.Entity.seperateOnXAxis(c,
b,d),b.collideWith(c,"x"),c.collideWith(b,"x"))};ig.Entity.seperateOnXAxis=function(b,c,d){var e=b.pos.x+b.size.x-c.pos.x;d?(d.vel.x=-d.vel.x*d.bounciness+(b===d?c:b).vel.x,c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,d==b?-e:e,0,d.size.x,d.size.y),d.pos.x=c.pos.x):(d=(b.vel.x-c.vel.x)/2,b.vel.x=-d,c.vel.x=d,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,-e/2,0,b.size.x,b.size.y),b.pos.x=Math.floor(d.pos.x),b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e/2,0,c.size.x,c.size.y),c.pos.x=Math.ceil(b.pos.x))};
ig.Entity.seperateOnYAxis=function(b,c,d){var e=b.pos.y+b.size.y-c.pos.y;if(d){c=b===d?c:b;d.vel.y=-d.vel.y*d.bounciness+c.vel.y;var g=0;d==b&&Math.abs(d.vel.y-c.vel.y)<d.minBounceVelocity&&(d.standing=!0,g=c.vel.x*ig.system.tick);b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,g,d==b?-e:e,d.size.x,d.size.y);d.pos.y=b.pos.y;d.pos.x=b.pos.x}else ig.game.gravity&&(c.standing||0<b.vel.y)?(d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,-(b.pos.y+b.size.y-c.pos.y),b.size.x,b.size.y),b.pos.y=d.pos.y,0<b.bounciness&&
b.vel.y>b.minBounceVelocity?b.vel.y*=-b.bounciness:(b.standing=!0,b.vel.y=0)):(d=(b.vel.y-c.vel.y)/2,b.vel.y=-d,c.vel.y=d,g=c.vel.x*ig.system.tick,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,g,-e/2,b.size.x,b.size.y),b.pos.y=d.pos.y,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,0,e/2,c.size.x,c.size.y),c.pos.y=b.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(b,c){this.tilesize=b;this.data=c;this.height=c.length;this.width=c[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(b,c){var d=Math.floor(b/this.tilesize),e=Math.floor(c/this.tilesize);return 0<=d&&d<this.width&&0<=e&&e<this.height?this.data[e][d]:0},setTile:function(b,c,d){b=Math.floor(b/this.tilesize);c=Math.floor(c/
this.tilesize);0<=b&&b<this.width&&(0<=c&&c<this.height)&&(this.data[c][b]=d)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(b,c,g){this.parent(b,c);this.tiledef=g||ig.CollisionMap.defaultTileDef;for(var l in this.tiledef)l|0>this.lastSlope&&(this.lastSlope=l|0)},trace:function(b,c,g,l,p,n){var q={collision:{x:!1,y:!1,slope:!1},pos:{x:b,y:c},tile:{x:0,y:0}},u=Math.ceil(Math.max(Math.abs(g),Math.abs(l))/this.tilesize);if(1<u)for(var s=g/u,j=l/u,m=0;m<u&&(s||j)&&!(this._traceStep(q,
b,c,s,j,p,n,g,l,m),b=q.pos.x,c=q.pos.y,q.collision.x&&(g=s=0),q.collision.y&&(l=j=0),q.collision.slope);m++);else this._traceStep(q,b,c,g,l,p,n,g,l,0);return q},_traceStep:function(b,c,g,l,p,n,q,u,s,j){b.pos.x+=l;b.pos.y+=p;var m=0;if(l){var r=0<l?n:0,x=0>l?this.tilesize:0,m=Math.max(Math.floor(g/this.tilesize),0),z=Math.min(Math.ceil((g+q)/this.tilesize),this.height);l=Math.floor((b.pos.x+r)/this.tilesize);var A=Math.floor((c+r)/this.tilesize);if(0<j||l==A||0>A||A>=this.width)A=-1;if(0<=l&&l<this.width)for(var J=
m;J<z&&!(-1!=A&&(m=this.data[J][A],1<m&&m<=this.lastSlope&&this._checkTileDef(b,m,c,g,u,s,n,q,A,J)));J++)if(m=this.data[J][l],1==m||m>this.lastSlope||1<m&&this._checkTileDef(b,m,c,g,u,s,n,q,l,J)){if(1<m&&m<=this.lastSlope&&b.collision.slope)break;b.collision.x=!0;b.tile.x=m;c=b.pos.x=l*this.tilesize-r+x;u=0;break}}if(p){r=0<p?q:0;p=0>p?this.tilesize:0;m=Math.max(Math.floor(b.pos.x/this.tilesize),0);x=Math.min(Math.ceil((b.pos.x+n)/this.tilesize),this.width);J=Math.floor((b.pos.y+r)/this.tilesize);
z=Math.floor((g+r)/this.tilesize);if(0<j||J==z||0>z||z>=this.height)z=-1;if(0<=J&&J<this.height)for(l=m;l<x&&!(-1!=z&&(m=this.data[z][l],1<m&&m<=this.lastSlope&&this._checkTileDef(b,m,c,g,u,s,n,q,l,z)));l++)if(m=this.data[J][l],1==m||m>this.lastSlope||1<m&&this._checkTileDef(b,m,c,g,u,s,n,q,l,J)){if(1<m&&m<=this.lastSlope&&b.collision.slope)break;b.collision.y=!0;b.tile.y=m;b.pos.y=J*this.tilesize-r+p;break}}},_checkTileDef:function(b,c,g,l,p,n,q,u,s,j){var m=this.tiledef[c];if(!m)return!1;c=(m[2]-
m[0])*this.tilesize;var r=(m[3]-m[1])*this.tilesize,x=m[4];q=g+p+(0>r?q:0)-(s+m[0])*this.tilesize;u=l+n+(0<c?u:0)-(j+m[1])*this.tilesize;if(0<c*u-r*q){if(0>p*-r+n*c)return x;s=Math.sqrt(c*c+r*r);j=r/s;s=-c/s;var z=q*j+u*s,m=j*z,z=s*z;if(m*m+z*z>=p*p+n*n)return x||0.5>c*(u-n)-r*(q-p);b.pos.x=g+p-m;b.pos.y=l+n-z;b.collision.slope={x:c,y:r,nx:j,ny:s};return!0}return!1}});var b=1/3,c=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,c,!0],6:[0,c,1,b,!0],7:[0,b,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[c,1,1,0,!0],43:[b,1,c,0,!0],54:[0,1,b,0,!0],27:[0,0,1,b,!0],28:[0,b,1,c,!0],29:[0,c,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,b,1,!0],44:[b,0,c,1,!0],55:[c,0,1,1,!0],16:[1,b,0,0,!0],17:[1,c,0,b,!0],18:[1,1,0,c,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[b,1,0,0,!0],41:[c,1,b,0,!0],52:[1,1,c,0,!0],38:[1,c,0,1,!0],39:[1,b,0,c,!0],40:[1,0,
0,b,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,c,1,!0],42:[c,0,b,1,!0],53:[b,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(b,c,g,l){return{collision:{x:!1,y:!1,slope:!1},pos:{x:b+g,y:c+l},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(b,c,d){this.parent(b,c);this.setTileset(d)},setTileset:function(b){this.tilesetName=b instanceof ig.Image?b.path:b;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(b,
c){this.scroll.x=b/this.distance;this.scroll.y=c/this.distance},preRenderMapToChunks:function(){var b=this.width*this.tilesize*ig.system.scale,c=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(b,c),this.chunkSize);var d=Math.ceil(b/this.chunkSize),e=Math.ceil(c/this.chunkSize);this.preRenderedChunks=[];for(var g=0;g<e;g++){this.preRenderedChunks[g]=[];for(var l=0;l<d;l++)this.preRenderedChunks[g][l]=this.preRenderChunk(l,g,l==d-1?b-l*this.chunkSize:this.chunkSize,g==e-1?
c-g*this.chunkSize:this.chunkSize)}},preRenderChunk:function(b,c,d,e){var g=d/this.tilesize/ig.system.scale+1,l=e/this.tilesize/ig.system.scale+1,p=b*this.chunkSize/ig.system.scale%this.tilesize,n=c*this.chunkSize/ig.system.scale%this.tilesize;b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);c=Math.floor(c*this.chunkSize/this.tilesize/ig.system.scale);var q=ig.$new("canvas");q.width=d;q.height=e;q.retinaResolutionEnabled=!1;e=q.getContext("2d");ig.System.scaleMode(q,e);d=ig.system.context;
ig.system.context=e;for(e=0;e<g;e++)for(var u=0;u<l;u++)if(e+b<this.width&&u+c<this.height){var s=this.data[u+c][e+b];s&&this.tiles.drawTile(e*this.tilesize-p,u*this.tilesize-n,s-1,this.tilesize)}ig.system.context=d;return q},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var b=ig.system.getDrawPos(this.scroll.x),c=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var d=
this.width*this.tilesize*ig.system.scale,b=(b%d+d)%d,d=this.height*this.tilesize*ig.system.scale,c=(c%d+d)%d;var d=Math.max(Math.floor(b/this.chunkSize),0),e=Math.max(Math.floor(c/this.chunkSize),0),g=Math.ceil((b+ig.system.realWidth)/this.chunkSize),l=Math.ceil((c+ig.system.realHeight)/this.chunkSize),p=this.preRenderedChunks[0].length,n=this.preRenderedChunks.length;this.repeat||(g=Math.min(g,p),l=Math.min(l,n));for(var q=0;e<l;e++){for(var u=0,s=d;s<g;s++){var j=this.preRenderedChunks[e%n][s%p],
m=-b+s*this.chunkSize-u,r=-c+e*this.chunkSize-q;ig.system.context.drawImage(j,m,r);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(m,r,this.chunkSize,this.chunkSize));this.repeat&&(j.width<this.chunkSize&&m+j.width<ig.system.realWidth)&&(u+=this.chunkSize-j.width,g++)}this.repeat&&(j.height<this.chunkSize&&r+j.height<ig.system.realHeight)&&(q+=this.chunkSize-j.height,l++)}},drawTiled:function(){for(var b=0,c=null,d=(this.scroll.x/this.tilesize).toInt(),
e=(this.scroll.y/this.tilesize).toInt(),g=this.scroll.x%this.tilesize,l=this.scroll.y%this.tilesize,p=-g-this.tilesize,g=ig.system.width+this.tilesize-g,n=ig.system.height+this.tilesize-l,q=-1,l=-l-this.tilesize;l<n;q++,l+=this.tilesize){var u=q+e;if(u>=this.height||0>u){if(!this.repeat)continue;u=(u%this.height+this.height)%this.height}for(var s=-1,j=p;j<g;s++,j+=this.tilesize){b=s+d;if(b>=this.width||0>b){if(!this.repeat)continue;b=(b%this.width+this.width)%this.width}if(b=this.data[u][b])(c=this.anims[b-
1])?c.draw(j,l):this.tiles.drawTile(j,l,b-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(b){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var c=0;c<b.entities.length;c++){var d=b.entities[c];this.spawnEntity(d.type,d.x,d.y,d.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(c=0;c<b.layer.length;c++)if(d=b.layer[c],"collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);e.anims=this.backgroundAnims[d.tilesetName]||
{};e.repeat=d.repeat;e.distance=d.distance;e.foreground=!!d.foreground;e.preRender=!!d.preRender;e.name=d.name;this.backgroundMaps.push(e)}for(c=0;c<this.entities.length;c++)this.entities[c].ready()},loadLevelDeferred:function(b){this._levelToLoad=b},getMapByName:function(b){if("collision"==b)return this.collisionMap;for(var c=0;c<this.backgroundMaps.length;c++)if(this.backgroundMaps[c].name==b)return this.backgroundMaps[c];return null},getEntityByName:function(b){return this.namedEntities[b]},getEntitiesByType:function(b){b=
"string"===typeof b?ig.global[b]:b;for(var c=[],d=0;d<this.entities.length;d++){var e=this.entities[d];e instanceof b&&!e._killed&&c.push(e)}return c},spawnEntity:function(b,c,d,e){var g="string"===typeof b?ig.global[b]:b;if(!g)throw"Can't spawn entity of type "+b;b=new g(c,d,e||{});this.entities.push(b);b.name&&(this.namedEntities[b.name]=b);return b},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(b){b.name&&
delete this.namedEntities[b.name];b._killed=!0;b.type=ig.Entity.TYPE.NONE;b.checkAgainst=ig.Entity.TYPE.NONE;b.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(b)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var b=0;b<this._deferredKill.length;b++)this._deferredKill[b].erase(),this.entities.erase(this._deferredKill[b]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var c in this.backgroundAnims){var b=this.backgroundAnims[c],d;for(d in b)b[d].update()}},updateEntities:function(){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c._killed||c.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);ig.system.context.clearRect(0,0,ig.system.width,ig.system.height);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/
ig.system.scale;var b;for(b=0;b<this.backgroundMaps.length;b++){var c=this.backgroundMaps[b];if(c.foreground)break;c.setScreenPos(this.screen.x,this.screen.y);c.draw()}this.drawEntities();for(b;b<this.backgroundMaps.length;b++)c=this.backgroundMaps[b],c.setScreenPos(this.screen.x,this.screen.y),c.draw()},drawEntities:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].draw()},checkEntities:function(){for(var b={},c=0;c<this.entities.length;c++){var d=this.entities[c];if(!(d.type==ig.Entity.TYPE.NONE&&
d.checkAgainst==ig.Entity.TYPE.NONE&&d.collides==ig.Entity.COLLIDES.NEVER))for(var e={},g=Math.floor(d.pos.y/this.cellSize),l=Math.floor((d.pos.x+d.size.x)/this.cellSize)+1,p=Math.floor((d.pos.y+d.size.y)/this.cellSize)+1,n=Math.floor(d.pos.x/this.cellSize);n<l;n++)for(var q=g;q<p;q++)if(b[n])if(b[n][q]){for(var u=b[n][q],s=0;s<u.length;s++)d.touches(u[s])&&!e[u[s].id]&&(e[u[s].id]=!0,ig.Entity.checkPair(d,u[s]));u.push(d)}else b[n][q]=[d];else b[n]={},b[n][q]=[d]}}});ig.Game.SORT={Z_INDEX:function(b,
c){return b.zIndex-c.zIndex},POS_X:function(b,c){return b.pos.x+b.size.x-(c.pos.x+c.size.x)},POS_Y:function(b,c){return b.pos.y+b.size.y-(c.pos.y+c.size.y)}}});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({bgIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/home-bg.png"),barIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bar.png"),baseIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bar-base.png"),bg:{scX:1,scY:1.005,twnScX:!0,twnScY:!0},bar:{scX:1,scY:1,twnScX:!0,twnScY:!0},desktopCoverDIVID:"play-desktop",init:function(b,c){this.ctx=
ig.system.context;this.parent(b,c);console.log("Checking for AdInGamePreroll ...");"undefined"!=typeof AdInGamePreroll&&AdInGamePreroll.Initialize();console.log("Checking for BrandingSplashScreen ...");"undefined"!=typeof BrandingSplashScreen&&InitializeSplashScreen();console.log("Injecting Loading Game API ...");try{console.log('enabled loading api12');}catch(d){console.log(d.message)}},end:function(){this.parent();ig.ua.mobile?ig.system.setGame(MyGame):this.tapToStartDiv()},setupCustomAnimation:function(){this.customAnim=
new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},tweenHolder:function(b,c,d,e){!1==this[b.targ][b.bol]?(this[b.targ][b.inner]=this.tinyTween(this[b.targ][b.inner],
c,e),this[b.targ][b.inner]==c&&(this[b.targ][b.bol]=!0)):(this[b.targ][b.inner]=this.tinyTween(this[b.targ][b.inner],d,e),this[b.targ][b.inner]==d&&(this[b.targ][b.bol]=!1))},tinyTween:function(b,c,d){if(b>c)return b-=d,b<c&&(b=c),b;if(b<c)return b+=d,b>c&&(b=c),b;if(b==c)return b},drawer:function(b){var c=b.ctx||ig.system.context,d=b.offX||0,e=b.offY||0,g=b.cent||!1,l=null==b.scX?1:b.scX,p=null==b.scY?1:b.scY,n=null==b.alp&&0!=b.alp?1:b.alp,q=null==b.rot?0:b.rot,u=b.frameX||1,s=b.frameY||1,j=b.frame||
0,m=b.pic.width/u*(j%u),j=b.pic.height/s*Math.floor(j/u),r=b.pic.width/u,x=b.pic.height/s,u=b.pic.width/u*l,s=b.pic.height/s*p;if(!(0>=n))if(0<q||0>l||0>p){var z=b.x,A=b.y,d=g?-r/2+d:d||0,e=g?-x/2+e:e||0;0<r&&0<x&&(c.save(),c.translate(z,A),c.scale(l,p),c.rotate(2*Math.PI/360*q),c.globalAlpha=n,c.drawImage(b.pic.data,m,j,r,x,d,e,r,x),c.restore())}else z=g?b.x-u/2+d:b.x+d,A=g?b.y-s/2+e:b.y+e,0<r&&0<x&&(c.globalAlpha=n,c.drawImage(b.pic.data,m,j,r,x,z,A,u,s),c.globalAlpha=1)},textW:function(b){return this.ctxRef.measureText(b).width},
textDraw:function(b){var c=b.rot?b.rot:0,d=b.tx?b.tx:0,e=b.x?b.x:0,g=b.y?b.y:0,l=void 0==b.scX?1:b.scX,p=void 0==b.scY?1:b.scY,n=b.stroke?b.stroke:!1,q=void 0==b.strokeAlp?1:b.strokeAlp,u=b.strokeColour?b.strokeColour:"black",s=void 0==b.alp?1:b.alp,j=b.col?b.col:this.ctx.fillStyle,m=b.font||"archivoblackregular",r=b.px||10,x=b.strokeLine||3,z=b.align||"center",A=b.ctx||ig.system.context;this.ctxRef=b.ctx||ig.system.context;A.font=r+"px "+m;"left"==z?e+=0.5*this.textW(d):"right"==z&&(e-=0.5*this.textW(d));
A.save();b=A.measureText("M").width*p;A.translate(e,g+b/2);A.scale(l,p);A.rotate(c?2*Math.PI/360*c:0);A.fillStyle=j;A.globalAlpha=q;!0==n&&(A.lineWidth=x,A.strokeStyle=u,A.strokeText(d,-this.textW(d)/2,0));A.globalAlpha=s;A.fillText(d,-this.textW(d)/2,0);A.restore()},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;this.textDraw({x:-100,y:-100,tx:"loading",px:10});this.ctx.clearRect(0,0,ig.system.width,ig.system.height);ig.ua.mobile?this.bgIm.draw(0,0):(this.tweenHolder({targ:"bg",
inner:"scX",bol:"twnScX"},1,1.008,2E-4),this.tweenHolder({targ:"bg",inner:"scY",bol:"twnScY"},1.008,1,2E-4),this.tweenHolder({targ:"bar",inner:"scX",bol:"twnScX"},1,0.95,2E-4),this.tweenHolder({targ:"bar",inner:"scY",bol:"twnScY"},0.95,1,2E-4),this.drawer({x:ig.system.width/2,y:ig.system.height/2,scX:this.bg.scX,scY:this.bg.scY,pic:this.bgIm,cent:!0}));this.ctx.drawImage(this.baseIm.data,0,0,this.baseIm.width-1,this.baseIm.height-1,(ig.system.width-this.baseIm.width*this.bar.scX)/2,540-this.baseIm.height/
2*this.bar.scY,this.baseIm.width*this.bar.scX,this.baseIm.height*this.bar.scY);0<this._drawStatus&&this.ctx.drawImage(this.barIm.data,0,0,this.barIm.width*this._drawStatus>this.barIm.width-1?this.barIm.width-1:this.barIm.width*this._drawStatus,this.barIm.height,(ig.system.width-this.barIm.width*this.bar.scX)/2,540-this.barIm.height/2*this.bar.scY,this.barIm.width*this._drawStatus*this.bar.scX,this.barIm.height*this.bar.scY)},tapToStartDiv:function(b){this.desktopCoverDIV=document.getElementById(this.desktopCoverDIVID);
if(!this.desktopCoverDIV){this.desktopCoverDIV=document.createElement("div");this.desktopCoverDIV.id=this.desktopCoverDIVID;this.desktopCoverDIV.setAttribute("class","play");this.desktopCoverDIV.setAttribute("style","position: absolute; display: block; z-index: 999999; background-color: rgba(23, 32, 53, 0.7); visibility: visible; font-size: 10vmin; text-align: center; vertical-align: middle; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;");
this.desktopCoverDIV.innerHTML="<div style='color:white;background-color: rgba(255, 255, 255, 0.3); border: 2px solid #fff; font-size:20px; border-radius: 5px; position: relative; float: left; top: 50%; left: 50%; transform: translate(-50%, -50%);'><div style='padding:20px 50px; font-family: Arial;'>"+_STRINGS.Splash.TapToStart+"</div></div>";(document.getElementById("play").parentNode||document.getElementById("ajaxbar")).appendChild(this.desktopCoverDIV);try{"undefined"!==typeof ig.sizeHandler?"undefined"!==
typeof ig.sizeHandler.coreDivsToResize&&(ig.sizeHandler.coreDivsToResize.push("#"+this.desktopCoverDIVID),"function"===typeof ig.sizeHandler.reorient&&ig.sizeHandler.reorient()):"undefined"!==typeof coreDivsToResize&&(coreDivsToResize.push(this.desktopCoverDIVID),"function"===typeof sizeHandler&&sizeHandler())}catch(c){console.log(c)}this.desktopCoverDIV.addEventListener("click",function(){try{"undefined"!==typeof ig.soundHandler?("undefined"!==typeof ig.soundHandler.bgmPlayer?"undefined"!==typeof ig.soundHandler.bgmPlayer.webaudio&&
"undefined"!==typeof ig.soundHandler.bgmPlayer.webaudio.context&&ig.soundHandler.bgmPlayer.webaudio.context.resume():(ig.soundHandler=null,ig.soundHandler="undefined"!==typeof ig.soundList?new ig.SoundHandler(ig.soundList):new ig.SoundHandler),"undefined"!==typeof ig.soundHandler.sfxPlayer?"function"===typeof ig.soundHandler.sfxPlayer.play&&ig.soundHandler.sfxPlayer.play("staticSound"):"undefined"!==typeof ig.soundHandler.staticSound?"function"===typeof ig.soundHandler.staticSound.play&&ig.soundHandler.staticSound.play():
"function"===typeof ig.soundHandler.playSound&&ig.soundHandler.playSound("staticSound")):"undefined"!==typeof Howl?(ig.global.staticSound=new Howl({src:["http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/play/static.ogg","http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/play/static.mp3"]}),ig.global.staticSound.play()):"undefined"!==typeof createjs&&"undefined"!==typeof createjs.Sound&&"function"===typeof createjs.Sound.play&&createjs.Sound.play("opening")}catch(c){console.log(c)}this.setAttribute("style","visibility: hidden;");
"function"===typeof b&&b();ig.system.setGame(MyGame)})}}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var c=0;c<this.length;++c)if(this[c]===b)return c;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);this.tweens=
b}};ig.Entity.prototype.tween=function(b,c,d){b=new ig.Tween(this,b,c,d);this.tweens.push(b);return b};ig.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};ig.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};ig.Entity.prototype.stopTweens=function(b){for(var c=0;c<this.tweens.length;c++)this.tweens[c].stop(b)};ig.Tween=function(b,c,d,e){var g={},l={},p={},n=0,q=!1,u=!1,s=!1;this.duration=d;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,e);this.loopNum=this.loopCount;this.chain=function(b){s=b};this.initEnd=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.initEnd(subprop,c[b],d[b])};this.initStart=function(b,c,d,e){if("object"!==typeof d[b])"undefined"!==typeof c[b]&&(e[b]=d[b]);else for(subprop in d[b])e[b]||(e[b]={}),"undefined"!==typeof c[b]&&this.initStart(subprop,
c[b],d[b],e[b])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;n=0;-1==b.tweens.indexOf(this)&&b.tweens.push(this);u=!0;q=new ig.Timer;for(var d in c)this.initEnd(d,c,l);for(d in l)this.initStart(d,l,b,g),this.initDelta(d,p,b,l)};this.initDelta=function(b,c,d,e){if("object"!==typeof e[b])c[b]=e[b]-d[b];else for(subprop in e[b])c[b]||(c[b]={}),this.initDelta(subprop,c[b],d[b],e[b])};this.propUpdate=function(b,c,d,e,g){if("object"!==typeof d[b])c[b]="undefined"!=typeof d[b]?
d[b]+e[b]*g:c[b];else for(subprop in d[b])this.propUpdate(subprop,c[b],d[b],e[b],g)};this.propSet=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.propSet(subprop,c[b],d[b])};this.update=function(){if(!u)return!1;if(this.delay){if(q.delta()<this.delay)return;this.delay=0;q.reset()}if(this.paused||this.complete)return!1;var c=(q.delta()+n)/this.duration,c=1<c?1:c,d=this.easing(c);for(property in p)this.propUpdate(property,b,g,p,d);if(1<=c){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();s&&s.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in g)this.propSet(property,g,b);n=0;q.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){c={};d={};ig.merge(c,l);ig.merge(d,g);ig.merge(g,c);ig.merge(l,d);for(property in l)this.initDelta(property,p,b,l);n=0;q.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;n+=q.delta()};this.resume=function(){this.paused=
!1;q.reset()};this.stop=function(b){b&&(this.loop=this.complete=this.paused=!1,n+=d,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(b){return b};ig.Tween.Easing.Quadratic.EaseIn=function(b){return b*b};ig.Tween.Easing.Quadratic.EaseOut=function(b){return-b*(b-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(b){return b*b*b};ig.Tween.Easing.Cubic.EaseOut=function(b){return--b*b*b+1};ig.Tween.Easing.Cubic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};ig.Tween.Easing.Quartic.EaseIn=function(b){return b*b*b*b};ig.Tween.Easing.Quartic.EaseOut=function(b){return-(--b*b*b*b-1)};ig.Tween.Easing.Quartic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)};ig.Tween.Easing.Quintic.EaseIn=
function(b){return b*b*b*b*b};ig.Tween.Easing.Quintic.EaseOut=function(b){return(b-=1)*b*b*b*b+1};ig.Tween.Easing.Quintic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(b){return-Math.cos(b*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(b){return Math.sin(b*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(b){return-0.5*(Math.cos(Math.PI*b)-1)};ig.Tween.Easing.Exponential.EaseIn=function(b){return 0==b?0:Math.pow(2,
10*(b-1))};ig.Tween.Easing.Exponential.EaseOut=function(b){return 1==b?1:-Math.pow(2,-10*b)+1};ig.Tween.Easing.Exponential.EaseInOut=function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(b){return-(Math.sqrt(1-b*b)-1)};ig.Tween.Easing.Circular.EaseOut=function(b){return Math.sqrt(1- --b*b)};ig.Tween.Easing.Circular.EaseInOut=function(b){return 1>(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e))};ig.Tween.Easing.Elastic.EaseOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*b)*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Elastic.EaseInOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;
e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return 1>(b*=2)?-0.5*d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e):0.5*d*Math.pow(2,-10*(b-=1))*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Back.EaseIn=function(b){return b*b*(2.70158*b-1.70158)};ig.Tween.Easing.Back.EaseOut=function(b){return(b-=1)*b*(2.70158*b+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(b){return 1-ig.Tween.Easing.Bounce.EaseOut(1-b)};ig.Tween.Easing.Bounce.EaseOut=function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(b){return 0.5>b?0.5*ig.Tween.Easing.Bounce.EaseIn(2*b):0.5*ig.Tween.Easing.Bounce.EaseOut(2*b-1)+0.5}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var b=getQueryVariable("webview");if(b)switch(b){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(b=getQueryVariable("debug"))switch(b){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;ig.module("plugins.jukebox").defines(function(){ig.Jukebox=ig.Class.extend({init:function(){this.player=new jukebox.Player({resources:["http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/bgm.mp3","http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/audio/bgm.ogg"],autoplay:!1,spritemap:{music:{start:0,end:23.9,loop:!0}},timeout:1E3})}})});ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(b,c){this.game=b;this.levels=[];this.currentLevel=0;this.append(c)},loadLevel:function(b){for(key in dynamicClickableEntityDivs)ig.game.hideOverlay([key]);this.currentLevel=b;this.game.loadLevel(this.levels[b]);return!0},loadLevelWithoutEntities:function(b){this.currentLevel=b;this.game.loadLevelWithoutEntities(this.levels[b]);return!0},append:function(b){newLevels=[];return"object"===
typeof b?(b.constructor===[].constructor?newLevels=b:newLevels[0]=b,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(b){var c=null;for(i=0;i<this.levels.length;i++)this.levels[i]==b&&(c=i);return 0<=c?this.loadLevel(c):!1},firstLevel:function(){return this.loadLevel(0)},lastLevel:function(){return this.loadLevel(this.levels.length-
1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=function(b,c){this.x=b||0;this.y=c||0};Vector2.prototype={valType:"number",neg:function(){this.x=-this.x;this.y=-this.y;return this},row:function(b){typeof b===this.valType&&(this.y=b);return this.y},col:function(b){typeof b===this.valType&&(this.x=b);return this.x},add:function(b){b instanceof Vector2?(this.x+=b.x,this.y+=b.y):(this.x+=b,this.y+=b);return this},sub:function(b){b instanceof Vector2?(this.x-=b.x,this.y-=b.y):(this.x-=b,this.y-=
b);return this},mul:function(b){b instanceof Vector2?(this.x*=b.x,this.y*=b.y):(this.x*=b,this.y*=b);return this},div:function(b){b instanceof Vector2?(0!=b.x&&(this.x/=b.x),0!=b.y&&(this.y/=b.y)):0!=b&&(this.x/=b,this.y/=b);return this},equals:function(b){return this.x==b.x&&this.y==b.y},dot:function(b){return this.x*b.x+this.y*b.y},cross:function(b){return this.x*b.y-this.y*b.x},length:function(){return Math.sqrt(this.dot(this))},norm:function(){return this.divide(this.length())},min:function(){return Math.min(this.x,
this.y)},max:function(){return Math.max(this.x,this.y)},toAngles:function(){return-Math.atan2(-this.y,this.x)},angleTo:function(b){return Math.acos(this.dot(b)/(this.length()*b.length()))},toArray:function(b){return[this.x,this.y].slice(0,b||2)},clone:function(){return new Vector2(this.x,this.y)},set:function(b,c){this.x=b;this.y=c;return this},unit:function(){var b=this.length();if(0<b)return new Vector2(this.x/b,this.y/b);throw"Divide by 0 error in unitVector function of vector:"+this;},turnRight:function(){var b=
this.x;this.x=-this.y;this.y=b;return this},turnLeft:function(){var b=this.x;this.x=this.y;this.y=-b;return this},rotate:function(b){var c=this.clone();this.x=c.x*Math.cos(b)-c.y*Math.sin(b);this.y=c.x*Math.sin(b)+c.y*Math.cos(b);return this}};Vector2.negative=function(b){return new Vector2(-b.x,-b.y)};Vector2.add=function(b,c){return c instanceof Vector2?new Vector2(b.x+c.x,b.y+c.y):new Vector2(b.x+v,b.y+v)};Vector2.subtract=function(b,c){return c instanceof Vector2?new Vector2(b.x-c.x,b.y-c.y):
new Vector2(b.x-v,b.y-v)};Vector2.multiply=function(b,c){return c instanceof Vector2?new Vector2(b.x*c.x,b.y*c.y):new Vector2(b.x*v,b.y*v)};Vector2.divide=function(b,c){return c instanceof Vector2?new Vector2(b.x/c.x,b.y/c.y):new Vector2(b.x/v,b.y/v)};Vector2.equals=function(b,c){return b.x==c.x&&b.y==c.y};Vector2.dot=function(b,c){return b.x*c.x+b.y*c.y};Vector2.cross=function(b,c){return b.x*c.y-b.y*c.x}});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,disableStretchToFitOnMobileFlag:!1,enableStretchToFitOnAntiPortraitModeFlag:!0,enableScalingLimitsOnMobileFlag:!1,minScalingOnMobile:0,maxScalingOnMobile:1,enableStretchToFitOnDesktopFlag:!1,enableScalingLimitsOnDesktopFlag:!1,minScalingOnDesktop:0,maxScalingOnDesktop:1,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(480,
640)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(480,640)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#bgcanvas","#play","#orientate"],adsToResize:{},init:function(b){this.domHandler=b;if("undefined"===typeof b)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();
this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var b=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/b.x,this.mobile.actualSize.y/b.y);if(this.disableStretchToFitOnMobileFlag){var c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.enableScalingLimitsOnMobileFlag&&
(c=c.limit(this.minScalingOnMobile,this.maxScalingOnMobile));this.mobile.actualSize.x=b.x*c;this.mobile.actualSize.y=b.y*c;this.scaleRatioMultiplier.x=c;this.scaleRatioMultiplier.y=c}else this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=1}else this.desktop.actualSize=new Vector2(window.innerWidth,window.innerHeight),b=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=
new Vector2(this.desktop.actualSize.x/b.x,this.desktop.actualSize.y/b.y),this.enableStretchToFitOnDesktopFlag?(this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=1):(c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.enableScalingLimitsOnDesktopFlag&&(c=c.limit(this.minScalingOnDesktop,this.maxScalingOnDesktop)),this.desktop.actualSize.x=b.x*c,this.desktop.actualSize.y=b.y*c,this.scaleRatioMultiplier.x=
c,this.scaleRatioMultiplier.y=c)},resizeLayers:function(){for(var b=0;b<this.coreDivsToResize.length;b++){var c=ig.domHandler.getElementById(this.coreDivsToResize[b]);if(ig.ua.mobile)if(this.disableStretchToFitOnMobileFlag){var d=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.mobile.actualSize.x/2),e=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.mobile.actualSize.y/2);0>d&&(d=0);0>e&&(e=0);ig.domHandler.resizeOffset(c,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y),
d,e);var g=!1;if(g=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth)if(this.enableStretchToFitOnAntiPortraitModeFlag)ig.domHandler.resizeOffset(c,Math.floor(window.innerWidth),Math.floor(window.innerHeight),0,0);else{var g=new Vector2(window.innerWidth/this.mobile.actualResolution.y,window.innerHeight/this.mobile.actualResolution.x),d=Math.min(g.x,g.y),g=this.mobile.actualResolution.y*d,l=this.mobile.actualResolution.x*d,d=Math.floor(ig.sizeHandler.windowSize.x/
2-g/2),e=Math.floor(ig.sizeHandler.windowSize.y/2-l/2);0>d&&(d=0);0>e&&(e=0);ig.domHandler.resizeOffset(c,Math.floor(g),Math.floor(l),d,e)}}else ig.domHandler.resize(c,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y));else this.enableStretchToFitOnDesktopFlag?ig.domHandler.resize(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y)):(d=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/
2),e=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.desktop.actualSize.y/2),0>d&&(d=0),0>e&&(e=0),ig.domHandler.resizeOffset(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),d,e))}for(var p in this.adsToResize)b=ig.domHandler.getElementById("#"+p),c=ig.domHandler.getElementById("#"+p+"-Box"),g=(window.innerWidth-this.adsToResize[p]["box-width"])/2+"px",d=(window.innerHeight-this.adsToResize[p]["box-height"])/2+"px",b&&ig.domHandler.css(b,{width:window.innerWidth,
height:window.innerHeight}),c&&ig.domHandler.css(c,{left:g,top:d});b=ig.domHandler.getElementById("#canvas");c=ig.domHandler.getOffsets(b);b=c.left;c=c.top;g=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);for(p in this.dynamicClickableEntityDivs){d=ig.domHandler.getElementById("#"+p);if(ig.ua.mobile){var l=this.dynamicClickableEntityDivs[p].entity_pos_x,n=this.dynamicClickableEntityDivs[p].entity_pos_y,q=this.dynamicClickableEntityDivs[p].width,e=this.dynamicClickableEntityDivs[p].height;
this.disableStretchToFitOnMobileFlag?(l=Math.floor(b+l*this.scaleRatioMultiplier.x)+"px",n=Math.floor(c+n*this.scaleRatioMultiplier.y)+"px",q=Math.floor(q*this.scaleRatioMultiplier.x)+"px",e=Math.floor(e*this.scaleRatioMultiplier.y)+"px"):(l=Math.floor(l*this.sizeRatio.x)+"px",n=Math.floor(n*this.sizeRatio.y)+"px",q=Math.floor(q*this.sizeRatio.x)+"px",e=Math.floor(e*this.sizeRatio.y)+"px")}else l=this.dynamicClickableEntityDivs[p].entity_pos_x,n=this.dynamicClickableEntityDivs[p].entity_pos_y,q=this.dynamicClickableEntityDivs[p].width,
e=this.dynamicClickableEntityDivs[p].height,this.enableStretchToFitOnDesktopFlag?(l=Math.floor(l*this.sizeRatio.x)+"px",n=Math.floor(n*this.sizeRatio.y)+"px",q=Math.floor(q*this.sizeRatio.x)+"px",e=Math.floor(e*this.sizeRatio.y)+"px"):(l=Math.floor(b+l*this.scaleRatioMultiplier.x)+"px",n=Math.floor(c+n*this.scaleRatioMultiplier.y)+"px",q=Math.floor(q*this.scaleRatioMultiplier.x)+"px",e=Math.floor(e*this.scaleRatioMultiplier.y)+"px");ig.domHandler.css(d,{"float":"left",position:"absolute",left:l,top:n,
width:q,height:e,"z-index":3});this.dynamicClickableEntityDivs[p]["font-size"]&&ig.domHandler.css(d,{"font-size":this.dynamicClickableEntityDivs[p]["font-size"]*g+"px"})}$("#ajaxbar").width(this.windowSize.x);$("#ajaxbar").height(this.windowSize.y)},resize:function(){this.sizeCalcs();this.resizeLayers()},reorient:function(){console.log("changing orientation ...");if(ig.ua.mobile){var b=!1,b=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,c=this.domHandler.getElementById("#orientate"),
d=this.domHandler.getElementById("#game");b?(this.domHandler.show(c),this.domHandler.hide(d),console.log("portrait"+window.innerWidth+","+window.innerHeight)):(this.domHandler.show(d),this.domHandler.hide(c),console.log("landscape"+window.innerWidth+","+window.innerHeight))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize()},resizeAds:function(){for(var b in this.adsToResize){var c=ig.domHandler.getElementById("#"+b),d=ig.domHandler.getElementById("#"+b+"-Box"),e=(window.innerWidth-this.adsToResize[b]["box-width"])/
2+"px",g=(window.innerHeight-this.adsToResize[b]["box-height"])/2+"px";c&&ig.domHandler.css(c,{width:window.innerWidth,height:window.innerHeight});d&&ig.domHandler.css(d,{left:e,top:g})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",
function(b){b.preventDefault();return!1},!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",function(b){b.preventDefault();return!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&(this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100));null==this.orientationTimeout&&
(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2E3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),window.addEventListener("resize",this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",
this.orientationHandler.bind(this)),window.addEventListener("resize",this.orientationHandler.bind(this)));document.ontouchmove=function(b){window.scrollTo(0,1);b.preventDefault()};this.chromePullDownRefreshFix()},chromePullDownRefreshFix:function(){var b=window.chrome||navigator.userAgent.match("CriOS"),c="ontouchstart"in document.documentElement;if(b&&c){var d=b=!1,e=0,g=!1;try{CSS.supports("overscroll-behavior-y","contain")&&(b=!0)}catch(l){}try{if(b)return document.body.style.overscrollBehaviorY=
"contain"}catch(p){}b=document.head||document.body;c=document.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText="\n      ::-webkit-scrollbar {\n        width: 500x;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    ":c.appendChild(document.createTextNode("\n      ::-webkit-scrollbar {\n        width: 500px;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    "));
b.appendChild(c);try{addEventListener("test",null,{get passive(){d=!0}})}catch(n){}document.addEventListener("touchstart",function(b){1===b.touches.length&&(e=b.touches[0].clientY,g=0===window.pageYOffset)},!!d&&{passive:!0});document.addEventListener("touchmove",function(b){var c;if(c=g){g=!1;c=b.touches[0].clientY;var d=c-e;c=(e=c,0<d)}if(c)return b.preventDefault()},!!d&&{passive:!1})}}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(b,c,d,e){if(this.JQUERYAVAILABLE)b.on(c,d);else b.addEventListener(c,d,e)},create:function(b){return this.JQUERYAVAILABLE?$("<"+b+">"):ig.$new(b)},getElementByClass:function(b){return this.JQUERYAVAILABLE?$("."+b):document.getElementsByClassName(b)},
getElementById:function(b){return this.JQUERYAVAILABLE?0<$(b).length?$(b):null:ig.$(b)},appendChild:function(b,c){this.JQUERYAVAILABLE?b.append(c):b.appendChild(c)},appendToBody:function(b){this.JQUERYAVAILABLE?$("body").append(b):document.body.appendChild(b)},resize:function(b,c,d){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2));else{var e=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=e}},resizeOffsetLeft:function(b,
c,d,e){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2)),b.css("left",e);else{var g=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px; left: "+e.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=g}},resizeOffset:function(b,c,d,e,g){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2)),b.css("left",e),b.css("top",g);else{var l=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px; left: "+e.toFixed(2)+"px; top: "+
g.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=l}},css:function(b,c){if(this.JQUERYAVAILABLE)b.css(c);else{var d="",e;for(e in c)d+=e+":"+c[e]+";";this.attr(b,"style",d)}},getOffsets:function(b){return this.JQUERYAVAILABLE?(b=b.offset(),{left:b.left,top:b.top}):{left:b.offsetLeft,top:b.offsetTop}},attr:function(b,c,d){if("undefined"===typeof d)return this.JQUERYAVAILABLE?b.attr(c):b.getAttribute(c);this.JQUERYAVAILABLE?b.attr(c,d):b.setAttribute(c,d)},show:function(b){b&&"undefined"!==
typeof b&&(this.JQUERYAVAILABLE?(b.show(),b.css("visibility","visible")):b&&(b.style?b.style.visibility="visible":b[0]&&(b[0].style.visibility="visible")))},hide:function(b){b&&"undefined"!==typeof b&&(this.JQUERYAVAILABLE?(b.hide(),b.css("visibility","hidden")):b&&(b.style?b.style.visibility="hidden":b[0]&&(b[0].style.visibility="hidden")))},getQueryVariable:function(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==
b)return decodeURIComponent(e[1])}},forcedDeviceDetection:function(){var b=this.getQueryVariable("device");if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},forcedDeviceRotation:function(){var b=this.getQueryVariable("force-rotate");if(b)switch(b){case "portrait":console.log("force rotate to portrait");
window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}}})});ig.baked=!0;
ig.module("plugins.fullscreen").requires("impact.entity","plugins.handlers.size-handler","plugins.handlers.dom-handler","plugins.director").defines(function(){ig.Fullscreen={enableFullscreenButton:!0,_isEnabled:"notChecked",isEnabled:function(){"notChecked"==this._isEnabled&&(console.log("Fullscreen plugin v1.1"),this._isEnabled=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled?!0:!1);return this._isEnabled},isFullscreen:function(){return ig.Fullscreen.isEnabled()&&
(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)?!0:!1},toggleFullscreen:function(){ig.Fullscreen.isFullscreen()?ig.Fullscreen.exitFullscreen():ig.Fullscreen.requestFullscreen();ig.sizeHandler.orientationDelayHandler()},requestFullscreen:function(){var b=document.documentElement;b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.msRequestFullscreen?
b.msRequestFullscreen():console.log("no request fullscreen method available")},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("no exit fullscreen method available")},divs:{}};ig.Director.inject({loadLevel:function(b){var c=ig.Fullscreen.divs,d;for(d in c)c=ig.domHandler.getElementById("#"+
d),ig.domHandler.hide(c);return this.parent(b)}});ig.SizeHandler.inject({resize:function(){this.parent();var b=ig.Fullscreen.divs,c;for(c in b){var d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y),e=ig.domHandler.getElementById("#"+c),g=b[c].entity_pos_x,l=b[c].entity_pos_y,p=b[c].width,n=b[c].height,q=ig.domHandler.getElementById("#canvas"),u=ig.domHandler.getOffsets(q);ig.ua.mobile?(q=u.left,u=u.top,ig.sizeHandler.disableStretchToFitOnMobileFlag?(g=Math.floor(q+
g*ig.sizeHandler.scaleRatioMultiplier.x)+"px",l=Math.floor(u+l*ig.sizeHandler.scaleRatioMultiplier.y)+"px",p=Math.floor(p*ig.sizeHandler.scaleRatioMultiplier.x)+"px",n=Math.floor(n*ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(g=Math.floor(g*ig.sizeHandler.sizeRatio.x)+"px",l=Math.floor(l*ig.sizeHandler.sizeRatio.y)+"px",p=Math.floor(p*ig.sizeHandler.sizeRatio.x)+"px",n=Math.floor(n*ig.sizeHandler.sizeRatio.y)+"px")):(q=u.left,u=u.top,g=Math.floor(q+g*d)+"px",l=Math.floor(u+l*d)+"px",p=Math.floor(p*
d)+"px",n=Math.floor(n*d)+"px");ig.domHandler.css(e,{"float":"left",position:"absolute",left:g,top:l,width:p,height:n,"z-index":3});b[c]["font-size"]&&ig.domHandler.css(e,{"font-size":b[c]["font-size"]*d+"px"})}}});ig.FullscreenButton=ig.Entity.extend({enterImage:null,exitImage:null,isReady:!1,isShown:!0,zIndex:999999,identifier:null,prevPos:{x:0,y:0},invisImagePath:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/misc/invisible.png",init:function(b,c,d){this.parent(b,c,d);ig.Fullscreen.isEnabled()&&ig.Fullscreen.enableFullscreenButton?
this.enterImage.loaded?this.initSize():this.enterImage.loadCallback=function(){this.initSize()}.bind(this):this.kill()},kill:function(){this.parent();var b=ig.domHandler.getElementById("#"+this.identifier);b&&ig.domHandler.hide(b)},show:function(){this.isShown=!0;var b=ig.domHandler.getElementById("#"+this.identifier);b&&ig.domHandler.show(b)},hide:function(){this.isShown=!1;var b=ig.domHandler.getElementById("#"+this.identifier);b&&ig.domHandler.hide(b)},initSize:function(){this.size.x=this.enterImage.width;
this.size.y=this.enterImage.height;this.createClickableLayer();this.isReady=!0},createClickableLayer:function(){this.identifier="fullscreen-button-layer";var b=ig.domHandler.getElementById("#"+this.identifier);b?(ig.domHandler.show(b),ig.domHandler.attr(b,"onclick","ig.Fullscreen.toggleFullscreen()")):this.createClickableOutboundLayer()},update:function(b,c){b=this.pos.x;c=this.pos.y;this.isReady&&!(this.prevPos.x===b&&this.prevPos.y===c)&&(ig.Fullscreen.divs[this.identifier]={},ig.Fullscreen.divs[this.identifier].width=
this.size.x,ig.Fullscreen.divs[this.identifier].height=this.size.y,ig.Fullscreen.divs[this.identifier].entity_pos_x=this.pos.x,ig.Fullscreen.divs[this.identifier].entity_pos_y=this.pos.y,this.prevPos.x=b,this.prevPos.y=c)},draw:function(){this.isReady&&this.isShown&&(ig.Fullscreen.isFullscreen()?this.exitImage.draw(this.pos.x,this.pos.y):this.enterImage.draw(this.pos.x,this.pos.y))},createClickableOutboundLayer:function(){var b=this.identifier,c=this.invisImagePath,d=ig.domHandler.create("div");ig.domHandler.attr(d,
"id",b);ig.domHandler.attr(d,"onclick","ig.Fullscreen.toggleFullscreen()");var e=ig.domHandler.create("a"),g=ig.domHandler.create("img");ig.domHandler.css(g,{width:"100%",height:"100%"});ig.domHandler.attr(g,"src",c);c=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){var l=ig.domHandler.getElementById("#canvas"),l=ig.domHandler.getOffsets(l),p=l.left,n=l.top;console.log(l.left);ig.sizeHandler.disableStretchToFitOnMobileFlag?(l=Math.floor(p+this.pos.x*
ig.sizeHandler.scaleRatioMultiplier.x)+"px",n=Math.floor(n+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",p=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(l=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",n=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",p=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px")}else l=ig.domHandler.getElementById("#canvas"),
l=ig.domHandler.getOffsets(l),p=l.left,n=l.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(l=Math.floor(p+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",n=Math.floor(n+this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",p=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",c=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(l=Math.floor(p+this.pos.x*c)+"px",n=Math.floor(n+this.pos.y*c)+"px",p=Math.floor(this.size.x*c)+"px",c=Math.floor(this.size.y*c)+"px");ig.domHandler.css(d,{"float":"left",
position:"absolute",left:l,top:n,width:p,height:c,"z-index":3});ig.domHandler.addEvent(d,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(e,g);ig.domHandler.appendChild(d,e);ig.domHandler.appendToBody(d);ig.Fullscreen.divs[b]={};ig.Fullscreen.divs[b].width=this.size.x;ig.Fullscreen.divs[b].height=this.size.y;ig.Fullscreen.divs[b].entity_pos_x=this.pos.x;ig.Fullscreen.divs[b].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:"http://cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/misc/invisible.png",init:function(b){this.pos=new Vector2(b.pos.x,b.pos.y);this.size=new Vector2(b.size.x,b.size.y);var c="more-games",d="www.google.com",e=!1;b.div_layer_name&&(c=b.div_layer_name);b.link&&(d=b.link);b.newWindow&&(e=b.newWindow);this.createClickableLayer(c,
d,e)},createClickableLayer:function(b,c,d){this.identifier=b;var e=ig.domHandler.getElementById("#"+b);e?(ig.domHandler.show(e),ig.domHandler.attr(e,"href",c)):this.createClickableOutboundLayer(b,c,this.invisImagePath,d)},update:function(b,c){this.pos.x===b&&this.pos.y===c||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(b,c,d,e){var g=ig.domHandler.create("div");ig.domHandler.attr(g,"id",b);var l=ig.domHandler.create("a");ig.domHandler.addEvent(g,"mousedown",function(b){b.preventDefault()});e?(ig.domHandler.attr(l,"href",c),ig.domHandler.attr(l,"target","_blank")):ig.domHandler.attr(l,"href",c);c=ig.domHandler.create("img");ig.domHandler.css(c,{width:"100%",height:"100%"});ig.domHandler.attr(c,
"src",d);d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){e=ig.domHandler.getElementById("#canvas");e=ig.domHandler.getOffsets(e);var p=e.left,n=e.top;console.log(e.left);ig.sizeHandler.disableStretchToFitOnMobileFlag?(e=Math.floor(p+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",n=Math.floor(n+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",p=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",d=Math.floor(this.size.y*
ig.sizeHandler.scaleRatioMultiplier.y)+"px"):(e=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",n=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",p=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",d=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px")}else e=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(e),p=e.left,n=e.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(e=Math.floor(p+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",n=Math.floor(n+this.pos.y*
ig.sizeHandler.sizeRatio.y)+"px",p=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",d=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(e=Math.floor(p+this.pos.x*d)+"px",n=Math.floor(n+this.pos.y*d)+"px",p=Math.floor(this.size.x*d)+"px",d=Math.floor(this.size.y*d)+"px");ig.domHandler.css(g,{"float":"left",position:"absolute",left:e,top:n,width:p,height:d,"z-index":3});ig.domHandler.addEvent(g,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(l,c);ig.domHandler.appendChild(g,
l);ig.domHandler.appendToBody(g);ig.sizeHandler.dynamicClickableEntityDivs[b]={};ig.sizeHandler.dynamicClickableEntityDivs[b].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[b].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.plain").requires("impact.entity").defines(function(){EntityPlain=ig.Entity.extend({redraw:!1,sc:{x:1,y:1},maxVel:{x:5E3,y:5E3},sheetX:1,sheetY:1,gravityFactor:0,clearColor:null,tweening:!1,which:0,size:{x:50,y:50},halfSize:{x:50,y:50},ctxRef:null,init:function(b,c,d){this.parent(b,c,d);ig.global.wm||(this.ctx=ig.system.context)},circleHitTest:function(b,c,d,e,g,l){b-=e;c-=g;return Math.sqrt(b*b+c*c)<d+l?!0:!1},getSize:function(b){this.size.x=this[b].width;this.size.y=this[b].height;
this.halfSize.x=this[b].width/2;this.halfSize.y=this[b].height/2},ready:function(){this.parent();this.main=ig.game.getEntitiesByType(EntityPlainGame)[0];this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},soundLooper:function(b){null==this[b+"sTimer"]&&(this[b+"sTimer"]=new ig.Timer,this[b+"sTime"]=this.sLoop[b].duration,this.sounder(b));this[b+"sTimer"].delta()>this[b+"sTime"]&&(this[b+"sTimer"].reset(),this.sounder(b))},soundLoopReset:function(b){this[b+"sTimer"].reset()},sounder:function(b){try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID[b])}catch(c){console.log(c)}},
posXY:function(b){b.pos.x=this.pointer.pos.x;b.pos.y=this.pointer.pos.y;console.log(this.pos.x,this.pos.y)},resetFrame:function(b){this[b].ended=!1;this[b].frame=0},runAnim:function(b){void 0==this[b]&&(this[b]={});this[b].ended=this[b].ended||!1;this[b].loop=this[b].loop||!1;this[b].frame=this[b].frame||0;this[b].frameTimer=this[b].frameTimer||new ig.Timer;this[b].frameTime=this[b].frameTime||0.03;!0!=this[b].ended&&(!1==this[b].loop&&this[b].frame==this[b].frames.length-1?(this[b].ended=!0,this.done&&
this.done(b)):1<this[b].frames.length&&this[b].frameTimer.delta()>this[b].frameTime&&(this[b].frameTimer.reset(),this[b].frame=(this[b].frame+1)%this[b].frames.length))},tweener:function(b,c,d,e,g){var l={};l[b]=c;null==g&&(g=0);null==e&&(e="none");this.tween("this"==b?c:l,d,{delay:g,targ:b,seq:e,onComplete:function(){null!=e&&this.tweenF(e,b)}.bind(this),easing:ig.Tween.Easing.Quadratic.EaseOut}).start()},tweener2:function(b,c,d,e,g){var l={};l[b]=c;null==g&&(g=0);null==e&&(e="none");this.tween("this"==
b?c:l,d,{delay:g,targ:b,seq:e,onComplete:function(){null!=e&&this.tweenF(e,b)}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start()},sizer:function(b,c,d,e,g,l,p,n){this.size.x=b.width/c*this.base.oriSc+(p||0);this.size.y=b.height/d*this.base.oriSc+(n||0);!0==l?(this.pos.x=e-this.size.x/2,this.pos.y=g-this.size.y/2):(this.pos.x=e,this.pos.y=g)},pauseT:function(){this.pauseTweens()},unpauseT:function(){this.resumeTweens()},unpause:function(){for(var b=0;b<this.main.timers.length;b++)this.main.timers[b].unpause();
this.unpauseT()},pause:function(){for(var b=0;b<this.main.timers.length;b++)this.main.timers[b].pause();this.pauseT()},tinyTween:function(b,c,d){if(b>c)return b-=d,b<c&&(b=c),b;if(b<c)return b+=d,b>c&&(b=c),b;if(b==c)return b},clearBg:function(){ig.system.bgcontext.clearRect(0,0,ig.system.width,ig.system.height);ig.game.redrawEntities()},centDraw:function(b,c,d,e,g){this.drawer("game",b,1,1,0,c,d,e,e,!0,1,g)},ctxDrawer:function(b){var c=b.ctx||ig.system.context,d=b.offX||0,e=b.offY||0,g=b.cent||!1,
l=null==b.scX?1:b.scX,p=null==b.scY?1:b.scY,n=null==b.alp&&0!=b.alp?1:b.alp,q=null==b.rot?0:b.rot,u=b.sx,s=b.sy,j=b.sw,m=b.sh,r=j*l,x=m*p;if(!(0>=n))if(0<q||0>l||0>p){var z=b.x,A=b.y,d=g?-j/2+d:d||0,e=g?-m/2+e:e||0;0<j&&0<m&&(c.save(),c.translate(z,A),c.scale(l,p),c.rotate(2*Math.PI/360*q),c.globalAlpha=n,c.drawImage(b.pic,u,s,j,m,d,e,j,m),c.restore())}else z=g?b.x-r/2+d:b.x+d,A=g?b.y-x/2+e:b.y+e,0<j&&0<m&&(c.globalAlpha=n,c.drawImage(b.pic,u,s,j,m,z,A,r,x),c.globalAlpha=1)},frameDrawer:function(b){var c=
b.ctx||ig.system.context,d=b.offX||0,e=b.offY||0,g=b.cent||!1,l=null==b.scX?1:b.scX,p=null==b.scY?1:b.scY,n=null==b.alp&&0!=b.alp?1:b.alp,q=null==b.rot?0:b.rot,u=b.frame.x,s=b.frame.y,j=b.frame.w,m=b.frame.h,r=j*l,x=m*p;if(!(0>=n))if(0<q||0>l||0>p){var z=b.x,A=b.y,d=g?-j/2+d:d||0,e=g?-m/2+e:e||0;0<j&&0<m&&(c.save(),c.translate(z,A),c.scale(l,p),c.rotate(2*Math.PI/360*q),c.globalAlpha=n,c.drawImage(b.pic,u,s,j,m,d,e,j,m),c.restore())}else z=g?b.x-r/2+d:b.x+d,A=g?b.y-x/2+e:b.y+e,0<j&&0<m&&(c.globalAlpha=
n,c.drawImage(b.pic,u,s,j,m,z,A,r,x),c.globalAlpha=1)},drawer:function(b){var c=b.ctx||ig.system.context,d=b.offX||0,e=b.offY||0,g=b.cent||!1,l=null==b.scX?1:b.scX,p=null==b.scY?1:b.scY,n=null==b.alp&&0!=b.alp?1:b.alp,q=null==b.rot?0:b.rot,u=b.frameX||1,s=b.frameY||1,j=b.frame||0,m=b.pic.width/u*(j%u),j=b.pic.height/s*Math.floor(j/u),r=b.pic.width/u,x=b.pic.height/s,u=b.pic.width/u*l,s=b.pic.height/s*p;if(!(0>=n))if(0<q||0>l||0>p){var z=b.x,A=b.y,d=g?-r/2+d:d||0,e=g?-x/2+e:e||0;0<r&&0<x&&(c.save(),
c.translate(z,A),c.scale(l,p),c.rotate(2*Math.PI/360*q),c.globalAlpha=n,c.drawImage(b.pic.data,m,j,r,x,d,e,r,x),c.restore())}else z=g?b.x-u/2+d:b.x+d,A=g?b.y-s/2+e:b.y+e,0<r&&0<x&&(c.globalAlpha=n,c.drawImage(b.pic.data,m,j,r,x,z,A,u,s),c.globalAlpha=1)},textSet:function(b,c,d,e){this.ctxRef=e=e||ig.system.context;e.font=b+"px "+(d||"archivoblackregular");e.fillStyle=c},textLib:function(b,c,d){d=d||0;this.textDraw("game",_STRINGS.Game[b][3],_STRINGS.Game[b][4],_STRINGS.Game[b][0],(c||0)+_STRINGS.Game[b][1]-
this.ctx.measureText(_STRINGS.Game[b][0]).width/2*_STRINGS.Game[b][3],_STRINGS.Game[b][2]+d)},textLibLeft:function(b,c,d){this.textDraw("game",_STRINGS.Game[b][3],_STRINGS.Game[b][4],_STRINGS.Game[b][0],(c||0)+_STRINGS.Game[b][1],_STRINGS.Game[b][2]+(d||0))},textW:function(b){return this.ctxRef.measureText(b).width},textDraw:function(b){var c=b.rot?b.rot:0,d=b.tx?b.tx:0,e=b.x?b.x:0,g=b.y?b.y:0,l=void 0==b.scX?1:b.scX,p=void 0==b.scY?1:b.scY,n=b.stroke?b.stroke:!1,q=void 0==b.strokeAlp?1:b.strokeAlp,
u=b.strokeColour?b.strokeColour:"black",s=void 0==b.alp?1:b.alp,j=b.col?b.col:this.ctx.fillStyle,m=b.font||"archivoblackregular",r=b.px||10,x=b.strokeLine||3,z=b.align||"center",A=b.ctx||ig.system.context;this.ctxRef=b.ctx||ig.system.context;A.font=r+"px "+m;void 0!=b.maxWidth&&this.textW(d)>b.maxWidth&&(p=l=b.maxWidth/this.textW(d));"left"==z?e+=0.5*this.textW(d):"right"==z&&(e-=0.5*this.textW(d));A.save();b=A.measureText("M").width*p;A.translate(e,g+b/2);A.scale(l,p);A.rotate(c?2*Math.PI/360*c:
0);A.fillStyle=j;A.globalAlpha=q;!0==n&&(A.lineWidth=x,A.strokeStyle=u,A.strokeText(d,-this.textW(d)/2,0));A.globalAlpha=s;A.fillText(d,-this.textW(d)/2,0);A.restore()},angleTo:function(b){return Math.atan2(b.pos.y+b.size.y/2-(this.pos.y+26+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/2))},checkStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),"localStorage"in window&&null!==window.localStorage}catch(b){return!1}},textLeft:function(b,c,
d,e,g){var l=ig.system.context;l.save();var p=l.measureText("M").width*g;l.translate(c,d+p/2);l.scale(e,g);l.fillText(b,0,0);l.restore()},shuffleArray:function(b){for(var c=b.length,d,e;0<c;)e=Math.floor(Math.random()*c),c--,d=b[c],b[c]=b[e],b[e]=d;return b}})});ig.baked=!0;
ig.module("game.entities.button-more-games").requires("plugins.clickable-div-layer","game.entities.plain").defines(function(){EntityButtonMoreGames=EntityPlain.extend({gravityFactor:0,moreIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/more.png"),butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/btn_more_games.png"),size:{x:64,y:66},oriSc:1,sc:1,mouseSc:0.95,zIndex:1E3,oriPos:{x:0,y:0},clickableLayer:null,link:"",newWindow:!1,update:function(){ig.global.wm||(this.parent(),
!0!=this.tweening&&(this.mouseSc=this.pointer.hoveringItem==this?1:0.95))},draw:function(){ig.global.wm||this.drawer({pic:this.butIm,x:this.pos.x+this.butIm.width/2,y:this.pos.y+this.butIm.height/2,scX:this.oriSc*this.sc*this.mouseSc,scY:this.oriSc*this.sc*this.mouseSc,cent:!0})},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},tweenF:function(b){switch(b){case "floatUp":this.tweener("pos",{y:this.oriPos.y-5},0.8,"floatDown");break;case "floatDown":this.tweener("pos",{y:this.oriPos.y+
8},1,"floatUp")}},init:function(b,c,d){this.parent(b,c,d);this.oriPos.x=b;this.oriPos.y=c;this.logo=new ig.AnimationSheet(this.moreIm.path,this.moreIm.width,this.moreIm.height);this.size.x=this.butIm.width;this.size.y=this.butIm.height;"undefined"==typeof wm&&(_SETTINGS.MoreGames.Enabled?(d.div_layer_name?(console.log("settings found ... using that div layer name"),b=d.div_layer_name):b="more-games",console.log("div_layer_name:",b),this.div_layer_name=b,this.link=_SETTINGS.MoreGames.Link,this.newWindow=
_SETTINGS.MoreGames.NewWindow,this.clickableLayer=new ClickableDivLayer(this)):this.kill());this.anims.idle=new ig.Animation(this.logo,0,[0],!0);this.currentAnim=this.anims.idle},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return console.log("clickable layer already exists ..."),!0;console.log("doesnt exist yet ...");return!1},checkClickableLayer:function(b,c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",
c)):this.createClickableOutboundLayer(b,c,"../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("position","absolute");if(ig.ua.mobile){var l=window.innerHeight/mobileHeight,p=window.innerWidth/mobileWidth;$("#"+g.id).css("left",this.pos.x*p);$("#"+g.id).css("top",this.pos.y*l);$("#"+g.id).css("width",this.size.x*p);$("#"+g.id).css("height",
this.size.y*l)}else l=document.getElementById("game").offsetLeft,p=document.getElementById("game").offsetTop,$("#"+g.id).css("left",l+this.pos.x*multiplier),$("#"+g.id).css("top",p+this.pos.y*multiplier),$("#"+g.id).css("width",this.size.x*multiplier),$("#"+g.id).css("height",this.size.y*multiplier);e?$("#"+g.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+g.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]=
{};dynamicClickableEntityDivs[b].width=this.size.x*multiplier;dynamicClickableEntityDivs[b].height=this.size.y*multiplier;dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/opening/shield.png"),mIconImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/opening/m_icon.png"),titleImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/opening/title.png"),init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=
new ig.Timer(0.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateOriginalShieldOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&
0<this.initTimer.delta()&&(this.initTimer=null,this.sheildTimer=new ig.Timer(0.05));this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(0.001),this.mIconTimer=new ig.Timer(0.05),this.titleTimer=new ig.Timer(0.15)));this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=0.3,this.moveTimer.reset());this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):
this.mIconTimer=null);this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var b=ig.system.context;b.save();var c=ig.system.width/2,d=ig.system.height/2;b.translate(c,d);b.rotate(this.move*Math.PI/
180);b.beginPath();b.moveTo(0,0);for(var e=0,g=1;48>=g;g+=1)b.lineTo(0+800*Math.cos(2*g*Math.PI/48),0+800*Math.sin(2*g*Math.PI/48)),e++,2==e&&(e=0,b.lineTo(0,0));b.translate(-c,-d);c=b.createRadialGradient(c,d,100,c,d,250);c.addColorStop(0,"rgba(255,255,255,0.1)");c.addColorStop(1,"rgba(0,0,0,0)");b.fillStyle=c;b.fill();b.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768);this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/
2-70,this.mIconAnim,166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/opening/kittytitle.png"),init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.kittyopeningSound)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),
ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateKittyOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=new ig.Timer(0.15));this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):
(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var b=ig.system.context.createLinearGradient(0,0,0,ig.system.height);b.addColorStop(0,"#ffed94");b.addColorStop(1,"#ffcd85");ig.system.context.fillStyle=b;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);0<=this.kittyAnim&&(this.kittyImage.drawTile(ig.system.width/
2-this.kittyImage.width/8,ig.system.height/2-this.kittyImage.height/4,this.kittyAnim,218,325),this.kittyTitleImage.drawTile(ig.system.width/2-this.kittyTitleImage.width/2,ig.system.height/2+this.kittyImage.height/4+10,this.kittyAnim,380,37));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,isClicking:!1,isHovering:!1,firstClick:!1,isReleased:!1,hoveringItem:null,objectArray:[],ignorePause:!0,zIndex:0,check:function(b){this.objectArray.push(b)},clickObject:function(b){this.isClicking&&!this.firstClick&&"function"==typeof b.clicked&&(b.clicked(),this.firstClick=!0);this.firstClick&&!this.isReleased&&"function"==typeof b.clicking&&
b.clicking();this.firstClick&&this.isReleased&&"function"==typeof b.released&&(b.released(),this.firstClick=!1)},update:function(){if(ig.ua.mobile){var b=window.innerHeight/mobileHeight;this.pos.x=ig.input.mouse.x/(window.innerWidth/mobileWidth)-this.size.x/2+ig.game.screen.x;this.pos.y=ig.input.mouse.y/b-this.size.y/2}else this.pos.x=ig.input.mouse.x-this.size.x/2,this.pos.y=ig.input.mouse.y-this.size.y/2;var b=null,c=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>c&&(c=this.objectArray[a].zIndex,
b=this.objectArray[a]);null!=b?("close"==b.name&&console.log(b),null!=this.hoveringItem&&"function"==typeof this.hoveringItem.idle&&this.hoveringItem!=b&&this.hoveringItem.idle(),this.hoveringItem=b,this.clickObject(b),this.objectArray=[]):null!=this.hoveringItem&&"function"==typeof this.hoveringItem.idle&&(this.hoveringItem.idle(),this.hoveringItem=null);this.isClicking=ig.input.pressed("click");this.isReleased=ig.input.released("click")}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(b,c,d){this.parent(b,c,d)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(b,c,d){this.parent(b,c,d);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,
c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("width",this.size.x*multiplier);$("#"+g.id).css("height",this.size.y*multiplier);$("#"+g.id).css("position","absolute");
var l=w/2-destW/2,p=h/2-destH/2;w==mobileWidth?($("#"+g.id).css("left",this.pos.x),$("#"+g.id).css("top",this.pos.y)):($("#"+g.id).css("left",l+this.pos.x*multiplier),$("#"+g.id).css("top",p+this.pos.y*multiplier));e?$("#"+g.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+g.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=$("#"+g.id).width();dynamicClickableEntityDivs[b].height=
$("#"+g.id).height();dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isHovering=!1)},deselectOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;
ig.module("game.entities.plain-baby").requires("game.entities.plain").defines(function(){EntityPlainBaby=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:10,w:800,sc:2,size:{x:50,y:50},im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/baby.png"),shadowIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/babyshadow.png"),speed:{x:50,y:0},sheetX:8,sheetY:1,vel:{x:0,y:-100},accel:{x:0,y:600},floorPos:560,floorOffset:10,drawSheetCent:function(){},init:function(b,c,d){ig.global.wm||
(this.parent(b,c,d),this.pointer=ig.game.getEntitiesByType(EntityPointer)[0],this.reGen(),this.zIndex=2E3,ig.game.sortEntitiesDeferred(),this.zIndex=800,this.pickWalkSide(),this.main.soundLooper("hehe"))},reGen:function(){this.animSheet=new ig.AnimationSheet(this.im.path,this.im.width/this.sheetX,this.im.height/this.sheetY);this.size.x=this.im.width/this.sheetX;this.size.y=this.im.height/this.sheetY;this.addAnim("idle",0.1,[0,1]);this.currentAnim=this.anims.idle},pickWalkSide:function(){this.walkEdge=
50+100*Math.random()},tweenF:function(){},update:function(){!ig.global.wm&&!0!=this.main.gamePaused&&(this.parent(),!0==this.walkSides?0<this.vel.x?this.pos.x>ig.system.width-this.walkEdge&&(this.pickWalkSide(),this.vel.x=-this.speed.x):this.pos.x<this.walkEdge+100&&(this.pickWalkSide(),this.vel.x=this.speed.x):(this.pos.y>this.floorPos-this.floorOffset-200&&ig.game.sortEntitiesDeferred(),this.pos.y>this.floorPos-this.floorOffset&&(this.walkSides=!0,this.vel.y=0,this.accel.y=0,this.vel.x=0.5<1*Math.random()?
this.speed.x:-this.speed.x,this.pos.y=this.floorPos-this.floorOffset)))},ready:function(){},draw:function(){this.parent();ig.global.wm||(this.drawer({cent:!0,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y-4,pic:this.shadowIm}),this.parent())}})});ig.baked=!0;
ig.module("game.entities.plain-tile").requires("game.entities.plain","game.entities.plain-baby").defines(function(){EntityPlainTile=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:100,name:"tile",renderer:!1,renderFrame:0,tweening:!1,hitThunder:!1,baby:!1,iceDelay:!1,drawIce:!1,w:800,sc:2,size:{x:50,y:50},causer:"pop",offBounce:!1,killDelay:0,delayTime:0.03,eviled:!1,evilActive:!1,tileHit:{x:0,y:0},evilCauser:!1,dropPopHeight:420,iceBubble:{sc:0,alp:0},iceFrame:0,iceEndFrame:48,ice:{frame:0,frameTime:0.015},
drawBurst:!1,burstFrame:0,burstEndFrame:48,burst:{frame:0,frameTime:0.015},im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bubbles.png"),plusIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/plus.png"),minusIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/minus.png"),skullIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/skull.png"),skull:{sc:0,alp:1},skull2:{sc:0,alp:0},darkAuraIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/darkaura.png"),
darkAura:{sc:0,alp:0},score:{sc:0,alp:0,gradp1:-10,gradp2:-3,offY:0,tx:"normal"},sheetX:8,sheetY:4,angle:0,sc:{x:1,y:1},oriPos:{x:0,y:0},tile:{x:0,y:0},offset:{x:2,y:4},off:{x:0,y:0},bouncy:{x:0,y:0},bubbleKilled:!1,linkedColours:[],refLinked:[],hanging:!0,killStuff:!1,hangingChecked:!1,checkedTiles:[],linkTeams:[],innerNeighbour:[[-1,0],[1,0],[0,-1],[1,-1],[0,1],[1,1]],sideNeighbour:[[-1,0],[1,0],[-1,-1],[0,-1],[-1,1],[0,1]],scoreChoice:{normal:{where:0,tx:"10",sx:5,sy:205,sw:50,sh:50},plus:{where:1,
tx:"+3",sx:65,sy:205,sw:50,sh:50},minus:{where:2,tx:"-3",sx:125,sy:205,sw:50,sh:50}},score:{sc:0,alp:0,gradp1:-10,gradp2:-3,offY:0,tx:"normal"},linkedBubbleArray:[],killBubble:function(){this.tweener("this",{},this.killDelay,"kill")},dropAndPopBubble:function(){this.main.resetCombo();this.bubble.basicArmoUpdate();for(var b=0;b<this.linkTeams.length;b++)if(!1==this.linkTeams[b][1])for(var c=0;c<this.linkTeams[b][0].length;c++){var d=this.linkTeams[b][0][c];d.hanging=!1;d.tweening=!0;this.main.scoreVault+=
10;this.main.dropAll.total++;d.vel.y=-(50*Math.random()+80);d.accel.y=600;d.accel.x=-150+300*Math.random();d.zIndex=101;!0==d.baby&&this.main.babyRescued++;this.main.tiles[d.tile.y][d.tile.x]=void 0}ig.game.sortEntitiesDeferred();b=ig.game.getEntitiesByType(EntityPlainTile);for(c=0;c<b.length;c++)!0==b[c].bubbleKilled&&(this.main.doneCombo=!1,this.main.scoreVault+=10,this.main.popAll.total++,b[c].killBubble(),!0==b[c].baby&&this.main.babyRescued++);if(!0==this.hitThunder)for(c=0;c<b.length;c++)b[c].tile.y>=
this.tile.y&&!1==b[c].bubbleKilled&&!0==b[c].hanging&&(console.log("hihihi"),b[c].hanging=!1,b[c].tweening=!0,this.main.scoreVault+=10,this.main.dropAll.total++,b[c].vel.y=-(50*Math.random()+80),b[c].accel.y=600,b[c].accel.x=-150+300*Math.random(),b[c].zIndex=101,!0==b[c].baby&&this.main.babyRescued++,this.main.tiles[b[c].tile.y][b[c].tile.x]=void 0);this.main.showComboText();ig.game.redraw=!0},init:function(b,c,d){if(!ig.global.wm){this.main=ig.game.getEntitiesByType(EntityPlainGame)[0];this.stage=
ig.game.getEntitiesByType(EntityPlainStage)[0];this.parent(b,c,d);this.tile.x=d.i;this.tile.y=d.j;void 0==this.main.tiles[this.tile.y]&&(this.main.tiles[this.tile.y]=[]);this.main.tiles[this.tile.y][this.tile.x]=this;this.aniStuff();this.dropPopHeight-=100*Math.random();if(void 0!=d.bubblePos){this.bubble=ig.game.getEntitiesByType(EntityPlainBubble)[0];this.main.scoreVault=0;this.oriPos.x=d.bubblePos.x-this.stage.topLeft.x;this.oriPos.y=d.bubblePos.y-this.stage.pos.y-this.stage.topGap-this.stage.topLeft.y;
this.which=d.which;this.tweenF("snap");this.shooter=ig.game.getEntitiesByType(EntityPlainShooter)[0];this.shooter.drawGuide=!0;ig.game.redraw=!0;b=ig.game.getEntitiesByType(EntityPlainTile);for(c=0;c<b.length;c++)b[c].offBounce=!0,b[c].tileHit={x:d.i,y:d.j}}else this.readPresetTile();this.aniStuff();this.pos.x=this.oriPos.x+this.stage.topLeft.x;this.pos.y=this.oriPos.y+this.stage.pos.y+this.stage.topLeft.y;this.bubbleTypeRegen();ig.game.sortEntitiesDeferred();this.burst.frames=ig.game.burstRender.frames;
this.ice.frames=ig.game.iceRender.frames}},handleBubbleCheck:function(){this.refLinked.push(this);this.linkBubbles(this);if(!0!=this.evilActive){for(var b=0;b<this.linkedBubbleArray.length;b++)for(var c=0;c<this.linkedBubbleArray[b].length;c++)if(3<=this.linkedBubbleArray[b].length){var d=this.linkedBubbleArray[b][c];!0!=d.bubbleKilled&&(d.bubbleKilled=!0,d.tweening=!0,d.killDelay=(Math.abs(d.tile.x-this.tile.x)+Math.abs(d.tile.y-this.tile.y))*this.delayTime,-1==this.checkedTiles.indexOf(d)&&this.checkedTiles.push(d),
this.killStuff=!0)}!0==this.bubbleKilled&&this.triggerHangingCheck();this.dropAndPopBubble()}},openLinkTeam:function(b){this.linkTeams[b]=[];this.linkTeams[b][0]=[];this.linkTeams[b][1]=!1},triggerHangingCheck:function(){for(var b=ig.game.getEntitiesByType(EntityPlainTile),c=0;this.checkedTiles.length!=b.length&&!(10<c);)for(var d=0;d<b.length;d++)if(-1==this.checkedTiles.indexOf(b[d])){this.openLinkTeam(this.linkTeams.length);this.findHangingCluster(b[d],this.linkTeams[this.linkTeams.length-1]);
c++;break}},findHangingCluster:function(b,c){var d=this.getNeighbour(b.tile);d.push(b);for(var e=0;e<d.length;e++)-1==this.checkedTiles.indexOf(d[e])&&(!0==d[e].bubbleKilled?this.checkedTiles.push(d[e]):(0==d[e].tile.y&&(c[1]=!0),c[0].push(d[e]),this.checkedTiles.push(d[e]),this.findHangingCluster(d[e],c)))},getNeighbour:function(b){for(var c=b.y%2==this.main.rowOffset?this.sideNeighbour:this.innerNeighbour,d=[],e=0;e<c.length;e++){var g=b.x+c[e][0],l=b.y+c[e][1];void 0!=this.main.tiles[l]&&void 0!=
this.main.tiles[l][g]&&d.push(this.main.tiles[l][g])}return d},iceStuff:function(){if(!0==this.hanging&&"pop"==this.causer)for(var b=this.getNeighbour(this.tile),c=0;c<b.length;c++)"ice"==b[c].refType&&(b[c].frame=this.getFrame("ice"),b[c].which=!0==b[c].baby?"baby"+this.refColour:this.refColour,b[c].refType="normal",b[c].tweenF("ice"))},readPresetTile:function(){this.oriPos.x=this.tile.y%2==this.main.rowOffset?this.tile.x*this.size.x:this.tile.x*this.size.x+this.size.x/2;this.oriPos.y=this.tile.y*
this.size.y;var b=this.main.map[this.tile.y][this.tile.x];"r"==b&&(b=0.05>1*Math.random()?this.main.choice[Math.floor(Math.random()*this.main.choice.length)]:0.2>1*Math.random()?this.main.choice[Math.floor(Math.random()*(this.main.choice.length-2))]:this.main.choice[Math.floor(4*Math.random())]);"string"==typeof b?(-1<b.indexOf("baby")&&(this.baby=!0,this.main.totalBaby++),this.which=-1<b.indexOf("baby")&&-1==b.indexOf("ice")?"baby"+this.main.colourSet[Number(b.replace("baby",""))]:-1<b.indexOf("minus")?
"minus"+this.main.colourSet[Number(b.replace("minus",""))]:-1<b.indexOf("plus")?"plus"+this.main.colourSet[Number(b.replace("plus",""))]:b):this.which=this.main.colourSet[b]},bubbleTypeRegen:function(){-1<this.which.indexOf("baby")?("babyice"==this.which?(this.refType="ice",this.refColour="none"):(this.refType="baby",this.refColour=this.which.replace("baby","")),this.frame=this.getFrame(this.which)):-1<this.which.indexOf("plus")?(this.refType="plus",this.refColour=this.which.replace("plus",""),this.frame=
this.getFrame(this.refColour)):-1<this.which.indexOf("minus")?(this.refType="minus",this.refColour=this.which.replace("minus",""),this.frame=this.getFrame(this.refColour)):(-1<this.main.bubbleColours.indexOf(this.which)?(this.refType="normal",this.refColour=this.which):(this.refType=this.which,this.refColour="none"),this.frame=this.getFrame(this.which))},aniStuff:function(){this.size.x=(this.im.width/this.sheetX-4)*this.sc.x;this.size.y=(this.im.height/this.sheetY-8)*this.sc.y;this.animList=[["red",
0],["orange",1],["yellow",2],["green",3],["cyan",4],["blue",5],["purple",6],["pink",7],["super",19],["babyred",8],["babyorange",9],["babyyellow",10],["babygreen",11],["babycyan",12],["babyblue",13],["babypurple",14],["babypink",15],["ice",16],["grey",17],["babyice",18],["rainbow",19],["thunder",20],["star",21],["time",22],["bomb",23],["steel",26],["evil",25],["wood",26],["guide",27],["change",28],["pick",29],["search",30],["armo",31]]},getFrame:function(b){return this.animList[this.animIndex(b)][1]},
animIndex:function(b){for(var c=0;c<this.animList.length;c++)if(-1<this.animList[c].indexOf(b))return c},powerBubbleCheck:function(b,c){if(void 0!=this.main.tiles[b.y]&&this.main.tiles[b.y][b.x])switch(this.main.tiles[b.y][b.x].which){case "evil":this.sounder("evil");this.main.tiles[b.y][b.x].evilCauser=!0;this.main.tiles[b.y][b.x].zIndex+=1;ig.game.sortEntitiesDeferred();this.main.tiles[b.y][b.x].tweenF("skullExpand");for(var d=ig.game.getEntitiesByType(EntityPlainTile),e=0;e<d.length;e++)d[e].killDelay=
0.05*(Math.abs(d[e].tile.x-this.tile.x)+Math.abs(d[e].tile.y-this.tile.y)),d[e].tweenF("evil");this.tweening=this.evilActive=!0;break;case "thunder":for(e=0;e<this.main.tiles[b.y].length;e++)void 0!=this.main.tiles[b.y]&&void 0!=this.main.tiles[b.y][e]&&(this.main.tiles[b.y][e].causer="thunder",this.main.tiles[b.y][e].bubbleKilled=!0,this.main.tiles[b.y][e].tweening=!0,this.main.tiles[b.y][e].killDelay=Math.abs(e-b.x)*this.delayTime);this.main.tiles[c.y][c.x].bubbleKilled=!0;this.main.tiles[c.y][c.x].tweening=
!0;this.main.tiles[b.y][b.x].killDelay=(Math.abs(this.main.tiles[b.y][b.x].tile.x-this.tile.x)+Math.abs(this.main.tiles[b.y][b.x].tile.y-this.tile.y))*this.delayTime;this.tweening=this.hitThunder=!0;break;case "star":d=ig.game.getEntitiesByType(EntityPlainTile);for(e=0;e<d.length;e++)d[e].refColour==this.refColour&&(-1==this.checkedTiles.indexOf(d[e])&&this.checkedTiles.push(d[e]),d[e].causer="star",d[e].bubbleKilled=!0,d[e].tweening=!0,d[e].killDelay=(Math.abs(d[e].tile.x-this.tile.x)+Math.abs(d[e].tile.y-
this.tile.y))*this.delayTime);-1==this.checkedTiles.indexOf(this.main.tiles[b.y][b.x])&&this.checkedTiles.push(this.main.tiles[b.y][b.x]);this.main.tiles[b.y][b.x].bubbleKilled=!0;this.main.tiles[b.y][b.x].tweening=!0;this.main.tiles[b.y][b.x].killDelay=(Math.abs(this.main.tiles[b.y][b.x].tile.x-this.tile.x)+Math.abs(this.main.tiles[b.y][b.x].tile.y-this.tile.y))*this.delayTime;this.tweening=!0}},slotBubbles:function(b){-1==this.refLinked.indexOf(b)&&this.refLinked.push(b)},slotLinkedBubble:function(b,
c){this.slotBubbles(c);for(var d=0;d<this.linkedBubbleArray.length;d++)"super"==c.refColour?0==this.linkedBubbleArray[d].length?this.linkedBubbleArray[d].push(c):-1<this.linkedBubbleArray[d].indexOf(b)&&this.linkedBubbleArray[d].push(c):-1<this.linkedBubbleArray[d].indexOf(b)&&this.linkedColours[d]==c.refColour&&this.linkedBubbleArray[d].push(c)},slotBubbleCheck:function(b,c){-1==this.refLinked.indexOf(c)&&(this.slotLinkedBubble(b,c),this.linkBubbles(c))},initiateColourTeam:function(b){for(var c=
0;c<this.main.bubbleColours.length-1;c++)this.linkedColours.push(this.main.bubbleColours[c]),this.linkedBubbleArray[this.linkedBubbleArray.length]=[];this.slotBubbles(b);if("super"==b.refColour)for(c=0;c<this.linkedBubbleArray.length;c++)this.linkedBubbleArray[c].push(b);else for(c=0;c<this.linkedBubbleArray.length;c++)this.linkedColours[c]==b.refColour&&this.linkedBubbleArray[c].push(b)},linkBubbles:function(b){var c=this.getNeighbour(b.tile);b==this&&this.initiateColourTeam(b);for(var d=0;d<c.length;d++)b==
this&&this.powerBubbleCheck(c[d].tile,b.tile),c[d].refColour==b.refColour&&"super"!=b.refColour?this.slotBubbleCheck(b,c[d]):("super"==b.refColour||"super"==c[d].refColour)&&this.slotBubbleCheck(b,c[d])},tileCheck:function(b,c){return void 0!=this.main.tiles[c]?void 0!=this.main.tiles[c][b]?!0:!1:!1},plusStuff:function(b){switch(b){case "changeScoreText":"plus"==this.refType&&!0==this.hanging&&(this.bubble.plusVault+=3,this.score.tx="plus")}},minusStuff:function(b){switch(b){case "changeScoreText":"minus"==
this.refType&&!0==this.hanging&&(this.bubble.minusVault+=3,this.score.tx="minus")}},tweenF:function(b){switch(b){case "auraExpand":this.darkAura.sc=0;this.darkAura.alp=1;this.tweener("darkAura",{sc:0.8},1.8,"auraExpand");this.tweener("darkAura",{alp:0},1.3,"none",0.5);break;case "skullExpand":this.skull.alp=0.75;this.tweener("skull",{sc:2.5},0.8);this.tweener("skull",{alp:0},0.4,"skullFade",0.2);this.tweener("this",{},0.2,"skull2Expand");break;case "skull2Expand":this.skull2.alp=1;this.tweener("skull2",
{sc:1.5},2);this.tweener("skull2",{alp:0},0.3,"none",0.3);break;case "evil":this.tweener("this",{},this.killDelay,"evil2");break;case "evil2":this.eviled=!0;this.tweener("this",{},1,"evilGameOver");break;case "evilGameOver":this.main.loseGame();break;case "bounceBack":this.tweener("bouncy",{x:0,y:0},0.03);break;case "snap":this.tweening=!0;this.tweener("oriPos",{x:this.tile.y%2==this.main.rowOffset?this.tile.x*this.size.x:this.tile.x*this.size.x+this.size.x/2,y:this.tile.y*this.size.y},0.08,"snap2");
break;case "snap2":this.tweening=!1;ig.game.redraw=!0;this.handleBubbleCheck();break;case "ice":this.drawIce=this.tweening=!0;this.tweener("iceBubble",{sc:1.2,alp:1},0.2,"ice3",0.3);break;case "ice3":this.tweener("iceBubble",{sc:1},0.1,"convertColour");ig.game.redraw=!0;this.bubbleTypeRegen();break;case "convertColour":this.drawIce=!1;this.iceDelay=!0;break;case "babyTall":this.tweener("sc",{x:0.99,y:1.01},1,"babyFat");break;case "babyFat":this.tweener("sc",{x:1.01,y:0.99},1,"babyTall");break;case "kill":if(!0==
this.eviled)break;this.drawBurst=!0;this.main.soundLooper("bubble");this.main.tiles[this.tile.y][this.tile.x]=void 0;this.zIndex+=10;ig.game.sortEntitiesDeferred();this.vel.x=0;this.vel.y=-30;this.accel.x=0;this.accel.y=0;!0==this.baby&&ig.game.spawnEntity(EntityPlainBaby,this.pos.x,this.pos.y,{main:this.main});this.bubble=ig.game.getEntitiesByType(EntityPlainBubble)[0];this.minusStuff("changeScoreText");this.plusStuff("changeScoreText");this.iceStuff();this.tweener("score",{sc:1.3,alp:1},0.1,"scoreFadeOut");
break;case "scoreFadeOut":this.tweener("score",{alp:0},0.1,"killTile",0.2);this.tweener("score",{offY:-20},1);break;case "killTile":!0==this.hanging?this.main.popAll.killed++:this.main.dropAll.killed++,this.kill()}},update:function(){if(!ig.global.wm&&(!1==this.hanging&&(this.tweening=!0),!0!=this.main.gamePaused&&(!0==this.iceDelay&&!0==ig.game.redraw&&(this.iceDelay=!1,!0==this.hanging&&(this.tweening=!1)),this.parent(),void 0!=this.stage))){if(!0==this.hanging||!0==this.bubbleKilled)this.pos.x=
this.oriPos.x+this.stage.topLeft.x,this.pos.y=this.oriPos.y+this.stage.pos.y+this.stage.topGap+this.stage.topLeft.y,!0==this.offBounce&&(this.offBounce=!1,this.tweenF("collideOffset"));!1==this.hanging&&(this.pos.x+this.size.x>ig.system.width-10?this.pos.x=ig.system.width-this.size.x-10:10>this.pos.x&&(this.pos.x=10),this.pos.y>this.dropPopHeight&&!1==this.drawBurst&&this.tweenF("kill"))}},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];"evil"==this.which&&(this.tweenF("auraExpand"),
this.zIndex+=1,ig.game.sortEntitiesDeferred());!0==this.baby&&this.tweenF("babyFat");"plus"==this.refType&&(this.bubble=ig.game.getEntitiesByType(EntityPlainBubble)[0],this.bubble.armoExtra+=3)},changeBubble:function(){this.which="super";this.frame=this.getFrame(this.which)},drawSheets:function(b){this[b].update()},drawEvilStuff:function(){!1==this.eviled&&("evil"==this.which&&!0==this.hanging&&!1==this.drawBurst)&&this.drawer({x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,pic:this.darkAuraIm,
scX:this.sc.x*this.darkAura.sc,scY:this.sc.y*this.darkAura.sc,cent:!0,alp:this.darkAura.alp});!0==this.eviled&&!1==this.evilCauser?this.drawer({pic:this.im,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,frame:this.getFrame("grey"),frameX:this.sheetX,frameY:this.sheetY,scX:this.sc.x,scY:this.sc.y,cent:!0}):!0==this.evilCauser&&(this.drawer({pic:this.im,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,frame:this.frame,frameX:this.sheetX,frameY:this.sheetY,scX:this.sc.x,scY:this.sc.y,cent:!0}),
this.drawer({x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,pic:this.skullIm,scX:this.sc.x*this.skull.sc,scY:this.sc.y*this.skull.sc,cent:!0,alp:this.skull.alp}),this.drawer({x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,pic:this.skullIm,scX:this.sc.x*this.skull2.sc,scY:this.sc.y*this.skull2.sc,cent:!0,alp:this.skull2.alp}))},drawBurstStuff:function(){this.burst.frame<this.burstEndFrame&&void 0!=ig.game.burstRender.frames[this.burst.frame]&&this.ctxDrawer({pic:ig.game.hidEle,x:this.pos.x+
this.size.x/2,y:this.pos.y+this.size.y/2+this.score.offY,sx:ig.game.burstRender.frames[Math.floor(this.burst.frame)].sx,sy:ig.game.burstRender.frames[Math.floor(this.burst.frame)].sy+200*this.scoreChoice[this.score.tx].where,sw:60,sh:60,cent:!0});!1==this.main.gamePaused&&(this.burstFrame+=1*ig.system.tick,this.runAnim("burst"))},drawIceStuff:function(b){!0==this.drawIce&&(this.ctxDrawer({ctx:b,x:this.pos.x+this.size.x/2+this.off.x,y:this.pos.y+this.size.y/2+this.off.y,pic:ig.game.hidEle,cent:!0,
sx:ig.game.iceRender.frames[this.ice.frame].sx,sy:ig.game.iceRender.frames[this.ice.frame].sy,sw:60,sh:60}),!1==this.iceDelay&&this.drawer({ctx:b,pic:this.im,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,frame:this.getFrame(this.which),frameX:this.sheetX,frameY:this.sheetY,scX:this.iceBubble.sc,scY:this.iceBubble.sc,alp:this.iceBubble.alp,cent:!0}),!1==this.main.gamePaused&&this.runAnim("ice"))},drawPlusStuff:function(b){"plus"==this.refType&&this.drawer({ctx:b,pic:this.plusIm,x:this.pos.x+
this.size.x/2+this.bouncy.x,y:this.pos.y+this.size.y/2+this.bouncy.y,cent:!0,alp:0.8,scX:0.8,scY:0.8})},drawMinusStuff:function(b){"minus"==this.refType&&this.drawer({ctx:b,pic:this.minusIm,x:this.pos.x+this.size.x/2+this.bouncy.x,y:this.pos.y+this.size.y/2+this.bouncy.y,cent:!0,alp:0.7,scX:0.8,scY:0.8})},draw:function(){0>this.pos.y||(this.drawEvilStuff(),!0!=this.eviled&&(!0==this.drawBurst?this.drawBurstStuff():!1==this.tweening?"evil"==this.which?this.drawer({pic:this.im,x:this.pos.x+this.size.x/
2,y:this.pos.y+this.size.y/2,frame:this.frame,frameX:this.sheetX,frameY:this.sheetY,scX:this.sc.x,scY:this.sc.y,cent:!0}):!0==ig.game.redraw&&(!1==this.drawIce&&this.drawer({ctx:ig.game.bgCtx,pic:this.im,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,frame:this.frame,frameX:this.sheetX,frameY:this.sheetY,scX:this.sc.x,scY:this.sc.y,cent:!0}),this.drawMinusStuff(ig.game.bgCtx),this.drawPlusStuff(ig.game.bgCtx),this.drawIceStuff(ig.game.bgCtx)):(!1==this.drawIce&&this.drawer({pic:this.im,x:this.pos.x+
this.size.x/2,y:this.pos.y+this.size.y/2,frame:this.frame,frameX:this.sheetX,frameY:this.sheetY,scX:this.sc.x,scY:this.sc.y,cent:!0}),this.drawMinusStuff(this.ctx),this.drawPlusStuff(this.ctx),this.drawIceStuff(this.ctx))))}})});ig.baked=!0;
ig.module("game.entities.plain-gui").requires("game.entities.plain").defines(function(){EntityPlainGui=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:2010,comboTextSize:18,w:800,sc:2,size:{x:50,y:50},gameOver:!1,gamePaused:!1,foregroundIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/top-wall.png"),bottomIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bottom-wall.png"),armoIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/armo.png"),gradIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/grad.png"),
startOffset:0,score:{x:100,y:20,gradp1:-10,gradp2:2},bubbleArmo:0,plus:{offY:0,alp:0,sc:1,gradp1:-10,gradp2:0},minus:{offY:0,alp:0,sc:1,gradp1:-10,gradp2:0},armoCombo:{x:350,y:478,alp:0,sc:0,offY:20},popCombo:{x:350,y:478,alp:0,sc:0,offY:20},dropCombo:{x:350,y:478,alp:0,sc:0,offY:20},starbarIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star-bar.png"),starbaseIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star-base.png"),star0Im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star_01.png"),
star1Im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star_02.png"),star2Im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star_03.png"),scoreIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/score.png"),lvlIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/level.png"),starBar:{x:3,y:18,percent:1,star1:0,star2:0,star3:0},oneBar:1/3,drawSheetCent:function(){},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.reGen(),this.score.grad=this.ctx.createLinearGradient(0,
this.score.gradp1,0,this.score.gradp2),this.score.grad.addColorStop(0,"#fffcea"),this.score.grad.addColorStop(0.8,"#ffd977"),this.score.grad.addColorStop(1,"#a85a15"),this.score.grad2=this.ctx.createLinearGradient(0,this.score.gradp1,0,this.score.gradp2+5),this.score.grad2.addColorStop(0,"#fffcea"),this.score.grad2.addColorStop(0.8,"#ffd977"),this.score.grad2.addColorStop(1,"#a85a15"),this.plus.grad=this.ctx.createLinearGradient(0,this.plus.gradp1,0,this.plus.gradp2+10),this.plus.grad.addColorStop(0,
"#e6e438"),this.plus.grad.addColorStop(0.3,"#c2d73a"),this.plus.grad.addColorStop(1,"#6d8225"),this.plus.strokeCol="#56612f",this.minus.grad=this.ctx.createLinearGradient(0,this.plus.gradp1,0,this.plus.gradp2+10),this.minus.grad.addColorStop(0,"#ff9c00"),this.minus.grad.addColorStop(1,"#e80000"),this.minus.strokeCol="#8b2929",this.renderScore(),this.renderLevel(),this.renderPopCombo(),this.renderDropCombo(),this.renderArmoCombo())},reGen:function(){},tweenF:function(b){switch(b){case "pauseFadeIn":this.tweener("pauseRect",
{alp:this.pauseRect.targAlp},0.3);break;case "armoPlusUpdate":this.bubble.plusMinusArmo();0<this.bubble.plusVault?(this.plus.offY=-10,this.renderPlus(),this.tweener("plus",{alp:1},0.1,"armoPlusUpdate2")):0<this.bubble.minusVault&&this.tweenF("armoPlusUpdate3");break;case "armoPlusUpdate2":this.tweener("plus",{alp:0,offY:10},0.1,"armoPlusUpdate3",0.1);break;case "armoPlusUpdate3":0==this.bubble.minusVault?this.tweenF("armoPlusUpdate5"):(this.renderMinus(),this.minus.offY=-10,this.tweener("minus",{alp:1},
0.1,"armoPlusUpdate4"));break;case "armoPlusUpdate4":this.tweener("minus",{alp:0,offY:10},0.1,"armoPlusUpdate5",0.1);break;case "armoPlusUpdate5":this.bubble.plusMinusArmoUpdate();break;case "armoCombo":0<this.main.armoCombo&&(this.armoCombo.offY=10,this.renderArmoCombo(),this.tweener("armoCombo",{sc:1,alp:1,offY:0},0.1));break;case "armoCombo2":this.tweener("armoCombo",{offY:-1,alp:0},0.1);break;case "popCombo":0<this.main.popAll.combo?(this.popCombo.offY=10,this.renderPopCombo(),this.tweener("popCombo",
{sc:1,alp:1,offY:0},0.1,"popCombo2")):this.main.doneCombo=!0;break;case "popCombo2":this.tweener("popCombo",{offY:-1,alp:0},0.1,"dropCombo",0.6);break;case "dropCombo":0<this.main.dropAll.combo?(this.dropCombo.offY=10,this.renderDropCombo(),this.tweener("dropCombo",{sc:1,alp:1,offY:0},0.1,"dropCombo2")):this.main.doneCombo=!0;break;case "dropCombo2":this.tweener("dropCombo",{offY:-10,alp:0},0.1,"doneCombo",0.6);break;case "endDropCombo":0<this.main.dropAll.combo?(this.dropCombo.offY=10,this.renderDropCombo(),
this.tweener("dropCombo",{sc:1,alp:1,offY:0},0.1)):this.main.doneCombo=!0;break;case "endDropCombo2":this.tweener("dropCombo",{offY:-10,alp:0},0.1);break;case "doneCombo":this.main.doneCombo=!0}},update:function(){if(!ig.global.wm){this.parent();this.bubbleArmo=this.bubble.armoVault.length-this.bubble.armoIndex-this.bubble.armoExtra+this.bubble.armoPlus-this.bubble.armoMinus;var b=this.main.starScore,c=this.main.score;c>=b[0]?(this.starBar.star1=this.oneBar,this.main.star=0,c>=b[1]?(this.starBar.star2=
this.oneBar,this.main.star=1,c>=b[2]?(this.starBar.star3=this.oneBar,this.main.star=2):this.starBar.star3=(c-b[1])/(b[2]-b[1])*this.oneBar):this.starBar.star2=(c-b[0])/(b[1]-b[0])*this.oneBar):this.starBar.star1=c/b[0]*this.oneBar;this.starBar.percent=this.starBar.star1+this.starBar.star2+this.starBar.star3}},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0];this.startOffset=Math.abs(this.stage.startOffset);this.bubble=
ig.game.getEntitiesByType(EntityPlainBubble)[0];this.over=ig.game.getEntitiesByType(EntityPlainOver)[0];this.renderPlus();this.renderMinus()},renderArmoCombo:function(){ig.game.hidCtx.clearRect(880,140,200,100);this.textDraw({ctx:ig.game.hidCtx,px:40,tx:this.main.armoCombo,x:980,y:177,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:"#92551c"});this.textDraw({ctx:ig.game.hidCtx,px:40,tx:this.main.armoCombo,x:980,y:175,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:this.score.grad2});this.textDraw({ctx:ig.game.hidCtx,
px:this.comboTextSize,tx:_STRINGS.Game.ArmoCombo,x:980,y:212,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:"#92551c"});this.textDraw({ctx:ig.game.hidCtx,px:this.comboTextSize,tx:_STRINGS.Game.ArmoCombo,x:980,y:210,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:this.score.grad2})},renderPopCombo:function(){ig.game.hidCtx.clearRect(480,140,200,100);this.textDraw({ctx:ig.game.hidCtx,px:40,tx:this.main.popAll.combo,x:580,y:177,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:"#92551c"});this.textDraw({ctx:ig.game.hidCtx,
px:40,tx:this.main.popAll.combo,x:580,y:175,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:this.score.grad2});this.textDraw({ctx:ig.game.hidCtx,px:this.comboTextSize,tx:_STRINGS.Game.PopCombo,x:580,y:212,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:"#92551c"});this.textDraw({ctx:ig.game.hidCtx,px:this.comboTextSize,tx:_STRINGS.Game.PopCombo,x:580,y:210,stroke:!0,strokeLine:5,strokeColour:"#92551c",col:this.score.grad2})},renderDropCombo:function(){ig.game.hidCtx.clearRect(680,140,200,100);
this.textDraw({ctx:ig.game.hidCtx,px:40,strokeLine:2,tx:this.main.dropAll.combo,x:780,y:177,strokeLine:5,stroke:!0,strokeColour:"#92551c",col:"#92551c"});this.textDraw({ctx:ig.game.hidCtx,px:40,tx:this.main.dropAll.combo,x:780,y:175,strokeLine:5,stroke:!0,strokeColour:"#92551c",col:this.score.grad2});this.textDraw({ctx:ig.game.hidCtx,px:this.comboTextSize,tx:_STRINGS.Game.DropCombo,x:780,y:212,strokeLine:5,stroke:!0,strokeColour:"#92551c",col:"#92551c"});this.textDraw({ctx:ig.game.hidCtx,px:this.comboTextSize,
tx:_STRINGS.Game.DropCombo,x:780,y:210,strokeLine:5,stroke:!0,strokeColour:"#92551c",col:this.score.grad2})},renderLevel:function(){ig.game.hidCtx.clearRect(680,100,200,40);this.drawer({ctx:ig.game.hidCtx,pic:this.lvlIm,x:780,y:122,cent:!0});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:_STRINGS.Game.level,x:746,y:122,stroke:!0,strokeColour:"#92551c",col:"#92551c",align:"left"});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:_STRINGS.Game.level,x:746,y:121,stroke:!0,strokeColour:"#92551c",col:this.score.grad,
align:"left"});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:ig.game.lvl+1,x:808,y:122,stroke:!0,strokeColour:"#92551c",col:"#92551c",align:"center"});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:ig.game.lvl+1,x:808,y:121,stroke:!0,strokeColour:"#92551c",col:this.score.grad,align:"center"})},renderScore:function(){ig.game.hidCtx.clearRect(480,100,200,40);this.drawer({ctx:ig.game.hidCtx,pic:this.scoreIm,x:580,y:122,cent:!0});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:_STRINGS.Game.score,x:530,y:120,stroke:!0,
strokeColour:"#92551c",col:"#92551c",align:"left"});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:_STRINGS.Game.score,x:530,y:119,stroke:!0,strokeColour:"#92551c",col:this.score.grad,align:"left"});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:Math.floor(this.main.score),x:608,y:120,stroke:!0,strokeColour:"#92551c",col:"#92551c",align:"center"});this.textDraw({ctx:ig.game.hidCtx,px:14,tx:Math.floor(this.main.score),x:608,y:119,stroke:!0,strokeColour:"#92551c",col:this.score.grad,align:"center"})},drawPopCombo:function(){0<
this.popCombo.alp&&this.ctxDrawer({pic:ig.game.hidEle,x:this.popCombo.x,y:this.popCombo.y+this.popCombo.offY,sx:480,sy:140,sw:200,sh:100,scX:0.8*this.popCombo.sc,scY:0.8*this.popCombo.sc,alp:this.popCombo.alp,cent:!0})},drawDropCombo:function(){0<this.dropCombo.alp&&this.ctxDrawer({pic:ig.game.hidEle,x:this.dropCombo.x,y:this.dropCombo.y+this.dropCombo.offY,sx:680,sy:140,sw:200,sh:100,scX:0.8*this.dropCombo.sc,scY:0.8*this.dropCombo.sc,alp:this.dropCombo.alp,cent:!0})},drawArmoCombo:function(){0<
this.armoCombo.alp&&this.ctxDrawer({pic:ig.game.hidEle,x:this.armoCombo.x,y:this.armoCombo.y+this.armoCombo.offY,sx:880,sy:140,sw:200,sh:100,scX:0.8*this.armoCombo.sc,scY:0.8*this.armoCombo.sc,alp:this.armoCombo.alp,cent:!0})},renderPlus:function(){ig.game.hidCtx.clearRect(880,50,100,40);this.textDraw({tx:"+"+this.bubble.plusVault,x:930,y:70,px:19,col:"white",strokeLine:4,stroke:!0,strokeColour:this.plus.strokeCol,col:this.plus.grad,ctx:ig.game.hidCtx})},renderMinus:function(){ig.game.hidCtx.clearRect(980,
50,100,40);this.textDraw({tx:"-"+this.bubble.minusVault,x:1030,y:70,px:19,col:"white",strokeLine:4,stroke:!0,strokeColour:this.minus.strokeCol,col:this.minus.grad,ctx:ig.game.hidCtx})},drawPlus:function(){0!=this.plus.alp&&this.ctxDrawer({pic:ig.game.hidEle,x:50,y:ig.system.height-this.armoIm.height+this.plus.offY+5,px:19,col:"white",alp:this.plus.alp,scX:this.plus.sc,scY:this.plus.sc,sx:880,sy:50,sw:100,sh:40,cent:!0})},drawMinus:function(){0!=this.minus.alp&&this.ctxDrawer({pic:ig.game.hidEle,x:50,
y:ig.system.height-this.armoIm.height+this.minus.offY+5,px:19,col:"white",alp:this.minus.alp,scX:this.minus.sc,scY:this.minus.sc,sx:980,sy:50,sw:100,sh:40,cent:!0})},renderCount:function(){ig.game.hidCtx.clearRect(300,1100,400,100);this.textDraw({tx:0>this.main.countDown?0:Math.floor(this.main.countDown),x:500,y:1150,px:80,col:"white",ctx:ig.game.hidCtx});ig.game.hidCtx.globalCompositeOperation="source-atop";ig.game.hidCtx.drawImage(this.gradIm.data,300,1100,400,100);ig.game.hidCtx.globalCompositeOperation=
"source-over"},draw:function(){this.parent();!ig.global.wm&&void 0!=this.stage&&(this.foregroundIm.draw(0,0),this.starbaseIm.draw(this.starBar.x,this.starBar.y),0<this.starBar.percent&&this.ctx.drawImage(this.starbarIm.data,0,this.starbarIm.height*(1-this.starBar.percent),this.starbarIm.width,this.starbarIm.height*this.starBar.percent,this.starBar.x+1,this.starBar.y+this.starbarIm.height*(1-this.starBar.percent),this.starbarIm.width,this.starbarIm.height*this.starBar.percent),this.ctx.globalAlpha=
this.starBar.star3==this.oneBar?1:0.8,this.star2Im.draw(this.starBar.x-5,this.starBar.y-10),this.ctx.globalAlpha=this.starBar.star2==this.oneBar?1:0.8,this.star1Im.draw(this.starBar.x,this.starBar.y+28),this.ctx.globalAlpha=this.starBar.star1==this.oneBar?1:0.8,this.star0Im.draw(this.starBar.x+5,this.starBar.y+58),this.ctx.globalAlpha=1,this.drawPopCombo(),this.drawDropCombo(),this.drawArmoCombo(),this.ctxDrawer({pic:ig.game.hidEle,x:this.score.x,y:this.score.y+5,sx:480,sy:100,sw:200,sh:40,cent:!0}),
this.ctxDrawer({pic:ig.game.hidEle,x:370,y:this.score.y+5,sx:680,sy:100,sw:200,sh:40,cent:!0}),!1==this.stage.startTween?(this.bottomIm.draw(0,ig.system.height-this.bottomIm.height),this.armoIm.draw(0,ig.system.height-this.armoIm.height),!0==this.main.gameOver?this.textDraw({px:28,col:"white",tx:0>this.main.countDown?0:Math.floor(this.main.countDown),x:50,y:ig.system.height-this.armoIm.height+25,rot:-16,scX:this.main.scoreSc,scY:this.main.scoreSc}):this.textDraw({px:28,col:"white",tx:0>this.bubble.armoLeft?
0:this.bubble.armoLeft,x:50,y:ig.system.height-this.armoIm.height+25,rot:-16})):(this.bottomIm.draw(0,ig.system.height-this.bottomIm.height+this.stage.pos.y+this.startOffset),this.armoIm.draw(0,ig.system.height-this.armoIm.height+this.stage.pos.y+this.startOffset),this.textDraw({px:28,col:"white",tx:this.bubble.armoLeft,x:50,y:ig.system.height-this.armoIm.height+25+this.stage.pos.y+this.startOffset,rot:-16})),this.drawPlus(),this.drawMinus())}})});ig.baked=!0;
ig.module("game.entities.plain-tut").requires("game.entities.plain").defines(function(){EntityPlainTut=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2028,size:{x:50,y:50},textSize:14,arrowIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/tut-arrow.png"),arrow:{offY:0,alp:1},speechIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/speech.png"),speech:{sc:0},buttons:[],offY:-600,tutIndex:0,init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.main=d.main,
this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0],this.size.x=this.speechIm.width,this.size.y=this.speechIm.height,this.main.levelStat.speech?(this.main.tutOn=!0,this.prepareText(),this.tweenF("fadeIn"),this.tweenF("alpFadeIn")):this.kill())},clicked:function(){},released:function(){},handleText:function(b){var c=b.tx.split(" "),d=[],e="";this.textSet(b.px,"white",null,ig.game.hidCtx);for(var g=0;g<c.length;g++)""==e?e+=c[g]:this.textW(e+" "+c[g])<b.maxWidth?e=0==e.length?e+c[g]:e+(" "+c[g]):
(d.push(e),e=c[g]);0!=e.length&&d.push(e);this.textSet(b.px,"white",null,ig.game.hidCtx);c=1.3*this.textW("M");return d.length*c>b.maxHeight?this.handleText({px:b.px-1,tx:b.tx,maxWidth:b.maxWidth,maxHeight:b.maxHeight}):{px:b.px,lines:d}},tweenF:function(b){switch(b){case "expandSpeech":this.speech.sc=0;0==this.tutIndex&&this.sounder("click");this.tweener("speech",{sc:1.1},0.1,"expandSpeech2");break;case "expandSpeech2":this.tweener("speech",{sc:1},0.1);break;case "fadeIn":this.tweener("arrow",{offY:10},
0.5,"fadeOut");break;case "fadeOut":this.tweener("arrow",{offY:0},0.5,"fadeIn");break;case "alpFadeIn":this.tweener("arrow",{alp:0},1,"alpFadeOut",1);break;case "alpFadeOut":this.tweener("arrow",{alp:1},1,"alpFadeIn")}},runTask:function(){},update:function(){!ig.global.wm&&!0!=this.main.gamePaused&&(this.parent(),ig.input.released("click")&&(!1==this.stage.startTween&&!0!=this.main.gamePaused)&&1==this.speech.sc&&(this.sounder("click"),this.tutIndex++,this.main.levelStat.speech[this.tutIndex]?this.prepareText():
(this.main.tutOn=!1,this.kill())))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},prepareText:function(){this.speech.sc=0;this.textLines=ig.ua.mobile?this.main.levelStat.speechMobile?this.handleText({tx:this.main.levelStat.speechMobile[this.tutIndex],px:this.textSize,maxWidth:0.86*this.size.x,maxHeight:0.8*this.size.y}):this.handleText({tx:this.main.levelStat.speech[this.tutIndex],px:this.textSize,maxWidth:0.86*this.size.x,maxHeight:0.8*this.size.y}):this.handleText({tx:this.main.levelStat.speech[this.tutIndex],
px:this.textSize,maxWidth:0.86*this.size.x,maxHeight:0.8*this.size.y});this.renderText();!1==this.stage.startTween&&this.tweenF("expandSpeech")},renderText:function(){ig.game.hidCtx.clearRect(0,1100,this.size.x,this.size.y);this.drawer({ctx:ig.game.hidCtx,pic:this.speechIm,x:0,y:1100});this.textSet(this.textLines.px,"#92551c",null,ig.game.hidCtx);for(var b=1.3*this.textW("M"),c=0.5*(b*this.textLines.lines.length-0.5*b),d=0;d<this.textLines.lines.length;d++)this.textDraw({ctx:ig.game.hidCtx,px:this.textLines.px,
tx:this.textLines.lines[d],x:0+0.07*this.size.x,y:1100+this.size.y/2-c+d*b,align:"left",col:"#92551c"})},draw:function(){this.parent();ig.global.wm||(this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0],!1==this.stage.startTween&&!0==this.main.gameStarted&&(0==this.speech.sc&&this.tweenF("expandSpeech"),this.main.levelStat.arrow&&(this.main.levelStat.arrow[this.tutIndex]?this.drawer({pic:this.arrowIm,x:this.main.levelStat.arrow[this.tutIndex].x,y:this.main.levelStat.arrow[this.tutIndex].y+this.arrow.offY,
cent:!0,scX:0.8,scY:0.8}):this.drawer({pic:this.arrowIm,x:this.main.levelStat.arrow.x,y:this.main.levelStat.arrow.y+this.arrow.offY,cent:!0,scX:0.8,scY:0.8})),this.ctxDrawer({pic:ig.game.hidEle,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,cent:!0,scX:this.speech.sc,scY:this.speech.sc,sx:0,sy:1100,sw:this.size.x,sh:this.size.y}),this.textDraw({tx:_STRINGS.Game.Proceed,col:"white",px:8,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y-2,scX:this.speech.sc,scY:this.speech.sc})))}})});
ig.baked=!0;
ig.module("game.entities.plain-stage").requires("game.entities.plain").defines(function(){EntityPlainStage=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:99,w:800,sc:2,size:{x:50,y:50},topLeft:{x:32,y:0},size:{x:50,y:50},oriPos:{x:55,y:128},im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/line_star.png"),wallIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/wall.png"),sheetX:8,sheetY:4,topGap:75,sc:{x:1,y:1},startOffset:0,startTween:!0,stageHeight:0.4,tweening:!1,drawSheetCent:function(){},
init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.reGen())},reGen:function(){},tweenF:function(b){switch(b){case "triggerPosDelay":this.tweener(this,{},0.3,"triggerPos");break;case "triggerPos":this.stagePos();break;case "startTween":this.startTween=!1;this.shooter=ig.game.getEntitiesByType(EntityPlainShooter)[0];this.shooter.oriPos.y=490;this.shooter.pos.y=this.shooter.oriPos.y;this.shooter.shadow.y=this.shooter.pos.y+110;this.tweening=!1;ig.game.redraw=!0;break;case "endTween":this.tweening=
!1}},update:function(){ig.global.wm||!0!=this.main.gamePaused&&this.parent()},stagePos:function(){var b=0;this.bubble=ig.game.getEntitiesByType(EntityPlainBubble)[0];for(var c=this.main.tiles.length-1;0<c;c--){var d=!1;if(void 0!=this.main.tiles[c])for(var e=0;e<this.main.tiles[c].length;e++)void 0!=this.main.tiles[c][e]&&(d=!0);!0==d&&b++}b=ig.system.height*this.stageHeight-b*this.tile[0].size.y;0<b&&(b=0);this.startOffset=b;this.tweening=this.main.allowShoot=!0;ig.game.redraw=!0;this.tweener("pos",
{y:this.startOffset},0.5,"endTween")},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.tile=ig.game.getEntitiesByType(EntityPlainTile);this.shooter=ig.game.getEntitiesByType(EntityPlainShooter)[0];for(var b=0,c=this.main.tiles.length-1;0<c;c--){for(var d=!1,e=0;e<this.main.tiles[c].length;e++)void 0!=this.main.tiles[c][e]&&(d=!0);!0==d&&b++}this.startOffset=ig.system.height*this.stageHeight-b*this.tile[0].size.y;this.tweening=!0;ig.game.redraw=!0;this.tweener2("pos",
{y:this.startOffset},Math.abs(this.startOffset)/100,"startTween");this.shooter.setStartPosition()},draw:function(){this.parent();if(!ig.global.wm){this.ctx.drawImage(this.im.data,(ig.system.width-this.im.width*this.sc.x)/2,this.pos.y-12+this.topGap-this.im.height/2*this.sc.y,this.im.width*this.sc.x,this.im.height*this.sc.y);for(var b=0;b<Math.floor(Math.abs(this.pos.y/this.wallIm.height))+5;b++)0<this.pos.y+this.wallIm.height*b+this.wallIm.height&&(this.drawer({x:-1,y:this.pos.y+this.wallIm.height*
b,frameX:2,frameY:1,frame:0,cent:!1,pic:this.wallIm}),this.drawer({x:ig.system.width-this.wallIm.width/2+1,y:this.pos.y+this.wallIm.height*b,frameX:2,frameY:1,frame:1,cent:!1,pic:this.wallIm}))}}})});ig.baked=!0;
ig.module("game.entities.plain-bubble").requires("game.entities.plain").defines(function(){EntityPlainBubble=EntityPlain.extend({type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,zIndex:2002,sheetX:8,sheetY:4,tile:{x:0,y:0},size:{x:50,y:50},friction:{x:0,y:0},gameOver:!1,gamePaused:!1,im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bubbles.png"),speed:800,shooted:!1,which:"red",realPos:{x:0,y:0},hitPos:{x:0,y:0},disPos:{},count:0,spawned:!1,collided:!1,firstBubble:!0,ani:"red",refColour:"red",
refType:"normal",arrowIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/arrow.png"),woodIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/log.png"),woodFrontIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/log-front.png"),rayIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/ray.png"),lightIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/dot.png"),giveBubble:!1,showPrevBubble:!1,drawShootBubble:!0,prevBubble:"red",armoLeft:0,armoIndex:-1,
armoVault:[],activeBubble:0,oriPos:{x:0,y:0},armoPlus:0,armoMinus:0,armoExtra:10,minusVault:0,plusVault:0,light:{x:10,y:0,sc:0,alp:0},light2:{x:2,y:10,sc:0,alp:0},light3:{x:-10,y:-20,sc:0,alp:0},ray:{x:123,y:-93,alp:1},wood:{x:121,y:-30},woodOff:{x:-112,y:-60},woodAniOff:{x:-112,y:-60},nextBubbleToggle:0,onHandPos:{x:212,y:-49},onWoodPos:{x:99,y:-117},nextBubble0:{x:99,y:-37,allow:!0},nextBubble1:{x:99,y:-37,allow:!0},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.main=d.main,this.aniStuff(),
this.prepareBubbleArmo())},prepareBubbleArmo:function(){for(var b=[],c=0;c<this.main.armo.length;c++)0<this.main.armo[c]&&b.push(this.main.colourSet[c]);for(c=0;c<this.main.levelStat.armoEachArmo;c++){this.shuffleArray(b);for(var d=0;d<b.length;d++)this.armoVault.push(b[d])}this.nextBubble0.index=1;this.nextBubble1.index=2;this.armoExtra=this.main.armoExtra;this.armoLeft=this.armoVault.length-this.armoExtra+1},basicArmoUpdate:function(){this.armoLeft-=1},plusMinusArmo:function(){this.armoPlus+=this.plusVault;
this.armoMinus+=this.minusVault},plusMinusArmoUpdate:function(){this.minusVault=this.plusVault=0;this.armoLeft=this.armoLeft+this.armoPlus-this.armoMinus;this.armoMinus=this.armoPlus=0},bubbleTypeRegen:function(){-1<this.which.indexOf("baby")?(this.refType="baby",this.refColour=this.which.replace("baby","")):this.main.bubbleColours.indexOf(this.which)?(this.refType="normal",this.refColour=this.which):(this.refType=this.which,this.refColour="none");this.currentAnim=this.anims[this.which]},followShooterPosition:function(){this.pos.x=
this.shooter.pos.x+this.shooter.size.x/2-this.size.x/2;this.pos.y=this.shooter.pos.y+this.shooter.anims.idle.pivot.y-43;this.oriPos.x=this.pos.x;this.oriPos.y=this.pos.y},toggleBubble:function(){if(!(void 0==this.armoVault[this.armoIndex+1]||1>=this.armoLeft)&&!1!=this.main.allowShoot){var b=[this.armoVault[this.armoIndex]+"",this.armoVault[this.armoIndex+1]+""];this.armoVault[this.armoIndex]=b[1];this.armoVault[this.armoIndex+1]=b[0];this.which=this.armoVault[this.armoIndex];this.bubbleTypeRegen()}},
reGen:function(){!0==this.shooted&&(this.shooted=this.giveBubble=!1);this.shooter.allowShoot=!0;this.armoIndex+=1;void 0!=this.armoVault[this.armoIndex]?(this.which=this.armoVault[this.armoIndex],this.bubbleTypeRegen()):this.main.noArmo=!0},bubblesCollision:function(){var b=this.pos.x+this.size.x/2,c=this.pos.y+this.size.y/2,d=this.size.y/2-2;this.tiles=ig.game.getEntitiesByType(EntityPlainTile);for(var e=0;e<this.tiles.length;e++){var g=this.tiles[e].pos.x+this.tiles[e].size.x/2,l=this.tiles[e].pos.y+
this.tiles[e].size.y/2,p=this.tiles[e].size.y/2;if(!1==this.tiles[e].bubbleKilled&&!0==this.tiles[e].hanging&&!0==this.circleHitTest(b,c,d,g,l,p)){this.bubbleHitted(b-g,c-l);break}}0>this.pos.y-this.stage.pos.y-this.stage.topGap-this.stage.topLeft.y&&this.bubbleHitted(-this.vel.x,10)},getTilePos:function(){this.tile.y=Math.floor((this.realPos.y+this.size.y/2)/this.size.y);this.tile.y%2==this.main.rowOffset?(this.tile.x=Math.floor((this.realPos.x+this.size.x/2)/this.size.x),10<this.tile.x&&(this.tile.x=
10)):(this.tile.x=Math.floor(this.realPos.x/this.size.x),9<this.tile.x&&(this.tile.x=9));0>this.tile.x&&(this.tile.x=0)},bubbleHitted:function(b,c){!0!=this.collided&&(this.hitPos.x=this.pos.x,this.hitPos.y=this.pos.y,this.disPos={x:b,y:c},this.collided=!0,this.spawned=!1,this.realPos.x=this.pos.x-this.stage.topLeft.x,this.realPos.y=this.pos.y-this.stage.pos.y-this.stage.topGap-this.stage.topLeft.y,this.count=0,this.handleSnap())},getPosfromTile:function(){this.oriPos.x=this.tile.y%2==this.main.rowOffset?
this.tile.x*this.size.x:this.tile.x*this.size.x+this.size.x/2;this.oriPos.y=this.tile.y*this.size.y},snap:function(){!0!=this.spawned&&(this.spawned=!0,this.main.tiles[this.tile.y][this.tile.x]=this.which,ig.game.spawnEntity(EntityPlainTile,175,490,{main:this.main,which:this.which,i:this.tile.x,j:this.tile.y,bubblePos:{x:this.hitPos.x,y:this.hitPos.y}}),this.drawShootBubble=!1,this.reGen())},handleSnap:function(){!0!=this.spawned&&(this.count++,this.getTilePos(),void 0==this.main.tiles[this.tile.y]&&
(this.main.tiles[this.tile.y]=[]),void 0==this.main.tiles[this.tile.y][this.tile.x]||"empty"==this.main.tiles[this.tile.y][this.tile.x]?this.snap():ig.ua.mobile?1==this.count?(this.realPos.x=this.pos.x-(this.pos.x-this.last.x)*(this.count/2)-this.stage.topLeft.x,this.realPos.y=this.pos.y-(this.pos.y-this.last.y)*(this.count/2)-this.stage.pos.y-this.stage.topGap-this.stage.topLeft.y,this.handleSnap()):2==this.count?(this.realPos.x=this.last.x-this.stage.topLeft.x,this.realPos.y=this.last.y-this.stage.pos.y-
this.stage.topGap-this.stage.topLeft.y,this.handleSnap()):this.mobileSnapCheck():(this.realPos.y+=5,this.handleSnap()))},snapMobile:function(b,c){this.tile.y=b;this.tile.x=c;this.getPosfromTile();this.snap()},mobileSnapCheck:function(){var b,c,d,e;this.tile.y%2==this.main.rowOffset?(b=-1,c=0,d=10,e=9):(b=0,c=1,d=9,e=10);0<this.disPos.x?void 0==this.checkTile(this.tile.y+1,this.tile.x+c)&&this.tile.x+1<=e?this.snapMobile(this.tile.y+1,this.tile.x+c):void 0==this.checkTile(this.tile.y,this.tile.x+1)&&
this.tile.x+1<=d?this.snapMobile(this.tile.y,this.tile.x+1):void 0==this.checkTile(this.tile.y-1,this.tile.x+c)&&this.tile.x+1<=e&&-1<this.tile.y-1?this.snapMobile(this.tile.y-1,this.tile.x+c):void 0==this.checkTile(this.tile.y+1,this.tile.x+b)&&-1<this.tile.x-1?this.snapMobile(this.tile.y+1,this.tile.x+b):void 0==this.checkTile(this.tile.y,this.tile.x-1)&&-1<this.tile.x-1?this.snapMobile(this.tile.y,this.tile.x-1):void 0==this.checkTile(this.tile.y-1,this.tile.x+b)&&(-1<this.tile.x-1&&-1<this.tile.y-
1)&&this.snapMobile(this.tile.y-1,this.tile.x+b):void 0==this.checkTile(this.tile.y+1,this.tile.x+b)&&-1<this.tile.x-1?this.snapMobile(this.tile.y+1,this.tile.x+b):void 0==this.checkTile(this.tile.y,this.tile.x-1)&&-1<this.tile.x-1?this.snapMobile(this.tile.y,this.tile.x-1):void 0==this.checkTile(this.tile.y-1,this.tile.x+b)&&-1<this.tile.x-1&&-1<this.tile.y-1?this.snapMobile(this.tile.y-1,this.tile.x+b):void 0==this.checkTile(this.tile.y+1,this.tile.x+c)&&this.tile.x+1<=e?this.snapMobile(this.tile.y+
1,this.tile.x+c):void 0==this.checkTile(this.tile.y,this.tile.x+1)&&this.tile.x+1<=d?this.snapMobile(this.tile.y,this.tile.x+1):void 0==this.checkTile(this.tile.y-1,this.tile.x+c)&&(this.tile.x+1<=e&&-1<this.tile.y-1)&&this.snapMobile(this.tile.y-1,this.tile.x+c)},checkTile:function(b,c){return void 0==this.main.tiles[b]?(this.main.tiles[b]=[],this.main.tiles[b][c]):"empty"==this.main.tiles[b][c]?void 0:this.main.tiles[b][c]},aniStuff:function(){this.animSheet=new ig.AnimationSheet(this.im.path,this.im.width/
this.sheetX,this.im.height/this.sheetY);this.size.x=(this.animSheet.width-4)*this.sc.x;this.size.y=(this.animSheet.height-8)*this.sc.y;this.addAnim("red",0.1,[0],!0);this.addAnim("orange",0.1,[1],!0);this.addAnim("yellow",0.1,[2],!0);this.addAnim("green",0.1,[3],!0);this.addAnim("cyan",0.1,[4],!0);this.addAnim("blue",0.1,[5],!0);this.addAnim("purple",0.1,[6],!0);this.addAnim("pink",0.1,[7],!0);this.addAnim("super",0.05,[19],!1);this.addAnim("babyred",0.1,[8],!0);this.addAnim("babyorange",0.1,[9],
!0);this.addAnim("babyyellow",0.1,[10],!0);this.addAnim("babygreen",0.1,[11],!0);this.addAnim("babycyan",0.1,[12],!0);this.addAnim("babyblue",0.1,[13],!0);this.addAnim("babypurple",0.1,[14],!0);this.addAnim("babypink",0.1,[15],!0);this.addAnim("ice",0.1,[16],!0);this.addAnim("right",0.1,[17],!0);this.addAnim("up",0.1,[18],!0);this.addAnim("rainbow",0.1,[19],!0);this.addAnim("thunder",0.1,[20],!0);this.addAnim("star",0.1,[21],!0);this.addAnim("time",0.1,[22],!0);this.addAnim("bomb",0.1,[23],!0);this.addAnim("steel",
0.1,[24],!0);this.addAnim("evil",0.1,[25],!0);this.addAnim("wood",0.1,[26],!0);this.addAnim("guide",0.1,[27],!0);this.addAnim("change",0.1,[28],!0);this.addAnim("pick",0.1,[29],!0);this.addAnim("search",0.1,[30],!0);this.addAnim("armo",0.1,[31],!0);this.currentAnim=this.anims.super},shootBubble:function(b){!0==this["nextBubble"+this.nextBubbleToggle].allow&&(this["nextBubble"+this.nextBubbleToggle].allow=!1,this.angle=b,this.firstBubble=!1,this.drawShootBubble=!0,this.vel.x=this.speed*Math.cos(this.angle),
this.vel.y=this.speed*Math.sin(this.angle),this.collided=!1,this.shooted=!0,this.giveNextBubble())},giveNextBubble:function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].targ=="nextBubble"+this.nextBubbleToggle&&this.tweens[b].stop();this["nextBubble"+(this.nextBubbleToggle+1)%2].x=this.onWoodPos.x;this["nextBubble"+(this.nextBubbleToggle+1)%2].y=this.onWoodPos.y+80;this["nextBubble"+(this.nextBubbleToggle+1)%2].index=this["nextBubble"+this.nextBubbleToggle].index+1;this.tweenF("giveBubbleUp",
"nextBubble"+this.nextBubbleToggle);this.nextBubbleToggle=(this.nextBubbleToggle+1)%2},tweenF:function(b,c){switch(b){case "giveBubbleUp":this.oriPos.x=this.shooter.pos.x+this.shooter.size.x/2-this.size.x/2;this.oriPos.y=this.shooter.pos.y+this.shooter.anims.idle.pivot.y-43;c.y=this.onWoodPos.y;this.tweener(c,{x:this.onHandPos.x},0.3);this.tweener(c,{y:this[c].y-30},0.2,"giveBubbleDown");break;case "giveBubbleDown":this.tweener(c,{y:this.onHandPos.y},0.3);this.tweenF("nextBubbleUp","nextBubble"+this.nextBubbleToggle);
break;case "nextBubbleUp":this.tweener(c,{y:this.onWoodPos.y-20},0.3,"floatDown");break;case "floatUp":this.tweener(c,{y:this.onWoodPos.y-3},0.6,"floatDown");break;case "floatDown":this.drawShootBubble=this[c].allow=!0;this.tweener(c,{y:this.onWoodPos.y+3},0.5,"floatUp");break;case "gameOver":for(var d=0;d<this.tweens.length;d++)("nextBubble0"==this.tweens[d].targ||"nextBubble1"==this.tweens[d].targ)&&this.tweens[d].stop();this.tweener("nextBubble0",{y:this.onWoodPos.y+80},0.1);this.tweener("nextBubble1",
{y:this.onWoodPos.y+80},0.1);break;case "rayBright":this.tweener("ray",{alp:1},1,"rayDim");break;case "rayDim":this.tweener("ray",{alp:0.8},2,"rayBright");break;case "light":this[c].alp=0;this[c].sc=0;this[c].x=-10+20*Math.random();this[c].y=40;this.tweener2(c,{alp:1,sc:0.5+0.5*Math.random(),x:this[c].x-30+60*Math.random(),y:this[c].y-20-30*Math.random()},0.8+0.5*Math.random(),"light2",1*Math.random());break;case "light2":this.tweener2(c,{alp:0,sc:0,x:this[c].x-30+60*Math.random(),y:this[c].y-20-
50*Math.random()},1.2,"light")}},update:function(){!ig.global.wm&&!0!=this.main.gamePaused&&(this.parent(),!1==this.shooted?(this.vel.x=0,this.vel.y=0,this.followShooterPosition()):!1==this.collided&&this.bubblesCollision(),30>this.pos.x?0>this.vel.x&&(this.vel.x=-this.vel.x):this.pos.x+this.size.x>ig.system.width-30&&0<this.vel.x&&(this.vel.x=-this.vel.x))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.tiles=ig.game.getEntitiesByType(EntityPlainTile);this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0];
this.shooter=ig.game.getEntitiesByType(EntityPlainShooter)[0];this.gui=ig.game.getEntitiesByType(EntityPlainGui)[0];this.followShooterPosition();this.reGen();this.tweenF("floatUp","nextBubble"+this.nextBubbleToggle);this.tweenF("rayDim");this.tweenF("light","light");this.tweenF("light","light2");this.tweenF("light","light3");this.armoLeft=this.armoVault.length-this.armoExtra+1},draw:function(){ig.global.wm||(this.drawer({pic:this.woodIm,x:this.wood.x,y:this.wood.y+this.shooter.shadow.y,cent:!0}),
this.drawer({pic:this.rayIm,x:this.ray.x,y:this.ray.y+this.shooter.shadow.y,cent:!0,alp:this.ray.alp}),!0==this.shooted&&this.parent(),!0==this.firstBubble&&this.parent(),void 0!=this.armoVault[this.nextBubble0.index]&&this.anims[this.armoVault[this.nextBubble0.index]].draw(this.nextBubble0.x,this.shooter.shadow.y+this.nextBubble0.y),void 0!=this.armoVault[this.nextBubble1.index]&&this.anims[this.armoVault[this.nextBubble1.index]].draw(this.nextBubble1.x,this.shooter.shadow.y+this.nextBubble1.y),
this.drawer({pic:this.woodFrontIm,x:this.wood.x,y:this.wood.y+this.shooter.shadow.y,cent:!0}),this.drawer({pic:this.lightIm,x:this.wood.x+this.light.x,y:this.wood.y+this.shooter.shadow.y+this.light.y-60,cent:!0,scX:this.light.sc,scY:this.light.sc,alp:this.light.alp}),this.drawer({pic:this.lightIm,x:this.wood.x+this.light2.x,y:this.wood.y+this.shooter.shadow.y+this.light2.y-60,cent:!0,scX:this.light2.sc,scY:this.light2.sc,alp:this.light2.alp}),this.drawer({pic:this.lightIm,x:this.wood.x+this.light3.x,
y:this.wood.y+this.shooter.shadow.y+this.light3.y-60,cent:!0,scX:this.light3.sc,scY:this.light3.sc,alp:this.light3.alp}))}})});ig.baked=!0;
ig.module("game.entities.plain-shooter").requires("game.entities.plain","game.entities.plain-bubble").defines(function(){EntityPlainShooter=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:2E3,w:800,sc:2,flip:{x:!1},size:{x:50,y:50},gameOver:!1,gamePaused:!1,im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/mushroom.png"),sc:{x:1,y:1},sheetX:3,sheetY:1,oriPos:{x:55,y:128},shadowIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/shadow.png"),shadow:{scX:1,alp:1,offX:0,y:0},
offset:{x:0,y:10},guide:{x:0,y:0},p1:{x:0,y:0},p2:{x:0,y:0},rad:0,tweening:!1,refAngle:0,angleRange:70,allowShoot:!0,wallSide:35,drawGuide:!0,guideOffY:22,drawSheetCent:function(){},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.oriPos.x=b,this.oriPos.y=c,this.aniStuff(),this.reGen())},guideReflect:function(b,c,d,e){b<d?(b=d+Math.abs(b-d),1<e&&(c+=5)):b>ig.system.width-d&&(d=ig.system.width-d,b=d-(b-d),1<e&&(c+=5));return{x:b,y:c}},setGuide:function(){if(!0!=this.tweening){this.guides=
[];this.p1={x:this.oriPos.x+this.size.x/2+4,y:this.oriPos.y+this.size.y/2+4};for(var b=0;40>b;b++){var c={x:0,y:0},d=!1;c.x=this.p1.x+50*b*Math.sin(2*Math.PI-this.rad+Math.PI/2);c.y=this.p1.y+50*b*Math.cos(2*Math.PI-this.rad+Math.PI/2)+this.guideOffY;for(var e=0;4>e;e++){var g=this.guideReflect(c.x,c.y,this.wallSide,e);c.x=g.x;c.y=g.y}e=ig.game.getEntitiesByType(EntityPlainTile);for(g=0;g<e.length;g++)if(!0==this.circleHitTest(c.x,c.y,10,e[g].pos.x+e[g].size.x/2,e[g].pos.y+e[g].size.y/2,25)&&!1==
e[g].bubbleKilled&&!0==e[g].hanging){d=!0;break}75>c.y&&(d=!0);if(!0==d)break;this.guides.push(c)}}},reGen:function(){},setStartPosition:function(){this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0];this.startOffset=Math.abs(this.stage.startOffset);this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y+this.stage.pos.y},shoot:function(){!0!=this.main.tutOn&&(!0!=this.main.noArmo&&!0!=this.tweening&&!0!=this.stage.tween&&!1!=this.main.allowShoot&&!1!=this.allowShoot&&!1!=this.main.doneCombo&&this.main.totalBaby!=
this.main.babyRescued&&!1!=this.main.gameStarted&&!0!=this.main.gameOver&&!0!=this.main.gamePaused&&!1!=this.bubble["nextBubble"+this.bubble.nextBubbleToggle].allow)&&(this.sounder("click"),this.drawGuide=!1,this.main.gameStarted=!0,this.allowShoot=this.main.allowShoot=!1,this.flip.x=this.pointer.pos.x+this.pointer.size.x/2>ig.system.width/2?!1:!0,this.tweenF("toss1"))},aniStuff:function(){this.animSheet=new ig.AnimationSheet(this.im.path,this.im.width/this.sheetX,this.im.height/this.sheetY);this.size.x=
(this.animSheet.width-4)*this.sc.x;this.size.y=(this.animSheet.height-8)*this.sc.y;this.addAnim("idle",0.1,[0],!0);this.addAnim("middle",0.1,[1],!0);this.addAnim("top",0.1,[2],!0);this.currentAnim=this.anims.idle;this.currentAnim.pivot.x+=20;this.currentAnim.pivot.y+=40},tweenF:function(b){switch(b){case "toss1":this.bubble.shootBubble(this.rad);this.tweening=!0;this.tweener("this",{pos:{y:this.oriPos.y-(this.angleRange-Math.abs(this.rot)),x:this.oriPos.x+2*this.rot},refAngle:this.getRad(1.8*this.rot),
shadow:{scX:1.2,alp:0.5,offX:this.rot}},0.2,"toss2");this.tweener("this",{},0.1,"anim0");break;case "toss2":this.tweener("this",{pos:{y:this.oriPos.y,x:this.oriPos.x},refAngle:0,shadow:{scX:1,alp:1,offX:0}},0.2);break;case "anim0":this.currentAnim=this.anims.middle;this.tweener("this",{},0.03,"anim1");break;case "anim1":this.currentAnim=this.anims.top;this.tweener("this",{},0.2,"anim2");break;case "anim2":this.currentAnim=this.anims.middle;this.tweener("this",{},0.03,"anim3");break;case "anim3":this.currentAnim=
this.anims.idle,this.tweening=!1}},getDeg:function(b){return b*(180/Math.PI)},getRad:function(b){return b*(Math.PI/180)},update:function(){!ig.global.wm&&!0!=this.main.gamePaused&&(this.parent(),this.currentAnim.flip.x=this.flip.x,this.pointer.update(),this.offset.x=!0==this.currentAnim.flip.x?-20:22,!0==this.stage.startTween&&(this.pos.y=this.oriPos.y+this.stage.pos.y+this.startOffset,this.shadow.y=this.oriPos.y+this.stage.pos.y+this.startOffset+110),this.currentAnim.angle=this.refAngle,500>this.pointer.pos.y&&
(this.rot=this.angleRange-Math.abs(this.angleTo(this.pointer))/3.142*2*this.angleRange,this.rad=this.angleTo(this.pointer),this.setGuide(),ig.input.released("click")&&(!0==this.stage.startTween&&!0==this.main.gameStarted?(this.stage.stopTweens(),this.stage.tweener2("pos",{y:this.stage.startOffset},0.3,"startTween")):this.shoot())))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.bubble=ig.game.getEntitiesByType(EntityPlainBubble)[0];this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0]},
draw:function(){if(!ig.global.wm&&void 0!=this.guides){if(500>this.pointer.pos.y&&!0==this.drawGuide)for(var b=0;b<this.guides.length;b++)this.ctx.fillStyle="white",this.ctx.beginPath(),this.ctx.arc(this.guides[b].x,this.guides[b].y,4,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill();this.drawer({pic:this.shadowIm,x:ig.system.width/2-2-0.5*this.offset.x+this.shadow.offX,y:this.shadow.y,cent:!0,scX:this.shadow.scX,scY:1,alp:this.shadow.alp});this.parent()}}})});ig.baked=!0;
ig.module("game.entities.plain-menu-but").requires("game.entities.plain").defines(function(){EntityPlainMenuBut=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2040,sc:0,mouseSc:0.95,runTask:!1,tweening:!1,oriPos:{x:0,y:0},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.name=d.name,this.menu=d.menu,void 0!=this.menu&&this.menu.buttons.push(this),this.size.x=this.butIm.width,this.size.y=this.butIm.height,this.oriPos.x=b,this.oriPos.y=c,this.hide(),this.oriStat&&this.oriStat())},
clicked:function(){this.sc=0.9;this.buttonTask();this.sounder("click")},released:function(){!0!=this.tweening&&(this.sc=1)},hide:function(){this.pos.x=-200;this.pos.y=-200},show:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y+this.menu.offY},tweenF:function(b){switch(b){case "delayTask":this.tweener("this",{},0.05,"delayTask2");break;case "delayTask2":this.delayTask();break;case "floatUp":this.tweener("pos",{y:this.oriPos.y-10},0.3,"floatDown");break;case "floatDown":this.tweener("pos",
{y:this.oriPos.y+10},0.3,"floatUp");break;case "fadeIn":this.show();this.tweening=!0;this.tweener("this",{sc:1},0.3,"doneFade");break;case "doneFade":this.tweening=!1;break;case "fadeOut":this.tweening=!0;this.tweener("this",{sc:0},0.3,"fadeOut2");break;case "fadeOut2":this.tweening=!1,this.oriPos.x=this.pos.x,this.hide()}},update:function(){ig.global.wm||(this.parent(),!0==this.menu.tweening&&(this.pos.y=this.oriPos.y+this.menu.offY),!0!=this.tweening&&(this.mouseSc=this.pointer.hoveringItem==this?
1:0.95))},drawInit:function(){},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},draw:function(){this.parent();ig.global.wm||this.drawer({pic:this.butIm,x:this.pos.x+this.butIm.width/2,y:this.pos.y+this.butIm.height/2,scX:this.oriSc*this.sc*this.mouseSc,scY:this.oriSc*this.sc*this.mouseSc,cent:!0})}});EntityCloseBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/close.png"),buttonTask:function(){!0!=this.tweening&&
!1!=this.main.gamePaused&&(this.menu.task="unpause",this.menu.tweenF("pauseFadeOut"))}});EntityOkayBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/ok.png"),buttonTask:function(){!0!=this.tweening&&!1!=this.main.gamePaused&&(this.menu.task="unpause",this.menu.tweenF("pauseFadeOut"))}});EntityMenuBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/menu.png"),buttonTask:function(){!0!=
this.tweening&&(this.main.gamePaused=!0,this.menu.task="home",this.menu.tweenF("pauseFadeOut"))}});EntityMusicKnot=EntityPlainMenuBut.extend({oriSc:0.98,hold:{x:0,y:0},holding:!1,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/music.png"),posRef:{x:0,y:0},oriStat:function(){this.posRef.x=this.oriPos.x},ready:function(){this.parent();this.oriPos.x=this.posRef.x+128*ig.game.musicVolume},buttonTask:function(){!0!=this.tweening&&!1==this.holding&&(this.holding=!0,this.hold.x=this.pos.x-
this.pointer.pos.x)},update:function(){!0==this.holding&&(this.pos.x=this.pointer.pos.x+this.hold.x,this.pos.x<this.posRef.x&&(this.pos.x=this.posRef.x),this.pos.x>this.posRef.x+128&&(this.pos.x=this.posRef.x+128),ig.ua.mobile?ig.soundHandler.jukebox.player.setVolume((this.pos.x-this.posRef.x)/128):ig.music.volume=(this.pos.x-this.posRef.x)/128,ig.input.released("click")&&(this.released(),this.holding=this.pointer.firstClick=!1,ig.game.setMusic((this.pos.x-this.posRef.x)/128),this.sounder("click")));
this.parent()}});EntitySoundKnot=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/sound.png"),holding:!1,hold:{x:0,y:0},posRef:{x:0,y:0},oriStat:function(){this.posRef.x=this.oriPos.x},ready:function(){this.parent();this.oriPos.x=this.posRef.x+128*ig.game.soundVolume},buttonTask:function(){!0!=this.tweening&&!1==this.holding&&(this.holding=!0,this.hold.x=this.pos.x-this.pointer.pos.x)},update:function(){!0==this.holding&&(this.pos.x=this.pointer.pos.x+
this.hold.x,this.pos.x<this.posRef.x&&(this.pos.x=this.posRef.x),this.pos.x>this.posRef.x+128&&(this.pos.x=this.posRef.x+128),ig.input.released("click")&&(this.released(),this.pointer.firstClick=!1,ig.game.setSound((this.pos.x-this.posRef.x)/128),this.holding=!1,this.sounder("click")));this.parent()}});EntityContinueBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/play.png"),buttonTask:function(){!0!=this.tweening&&!1!=this.main.gamePaused&&
(this.menu.task="unpause",this.menu.tweenF("pauseFadeOut"))}});EntityReplayBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/replay.png"),buttonTask:function(){!0!=this.tweening&&(this.main.gamePaused=!0,this.menu.task="replay",this.menu.tweenF("pauseFadeOut"))}});EntityProceedBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/continue.png"),ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.menu=ig.game.getEntitiesByType(EntityPlainOver)[0]},buttonTask:function(){!0!=this.tweening&&(this.main.gamePaused=!0,this.menu.task="next",this.menu.tweenF("pauseFadeOut"))}});EntityLevelNextBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/next.png"),ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.menu=ig.game.getEntitiesByType(EntityPlainLevel)[0]},buttonTask:function(){!0!=this.tweening&&this.tweenF("delayTask")},
delayTask:function(){!0!=this.tweening&&(this.menu.page=2)},draw:function(){1==this.menu.page&&this.parent()}});EntityLevelPrevBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/prev.png"),ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.menu=ig.game.getEntitiesByType(EntityPlainLevel)[0]},buttonTask:function(){!0!=this.tweening&&this.tweenF("delayTask")},delayTask:function(){!0!=this.tweening&&(this.menu.page=
1)},draw:function(){2==this.menu.page&&this.parent()}});EntityLevelCloseBut=EntityPlainMenuBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/close.png"),ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.menu=ig.game.getEntitiesByType(EntityPlainLevel)[0]},buttonTask:function(){!0!=this.tweening&&!1!=this.main.gamePaused&&(this.menu.task="unpause",this.menu.tweenF("pauseFadeOut"),this.tweening=!0,ig.game.showOverlay(["more-games"]))}})});
ig.baked=!0;
ig.module("game.entities.plain-but").requires("game.entities.plain").defines(function(){EntityPlainBut=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2040,sc:0,mouseSc:0.95,runTask:!1,tweening:!1,oriPos:{x:0,y:0},alp:1,init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.name=d.name,this.menu=d.menu,void 0!=this.menu&&this.menu.buttons.push(this),this.size.x=this.butIm.width,this.size.y=this.butIm.height,this.oriPos.x=b,this.oriPos.y=c,this.hide(),this.oriStat&&this.oriStat())},
clicked:function(){this.sc=0.9;this.buttonTask()},released:function(){!0!=this.tweening&&(this.sc=1)},hide:function(){this.pos.x=-200;this.pos.y=-200},show:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y},tweenF:function(b){switch(b){case "delayTask":this.tweener("this",{},0.05,"delayTask2")}},update:function(){!ig.global.wm&&!0!=this.tweening&&(this.mouseSc=this.pointer.hoveringItem==this?1:0.95)},drawInit:function(){},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},
draw:function(){this.parent();ig.global.wm||this.drawer({pic:this.butIm,x:this.pos.x+this.butIm.width/2,y:this.pos.y+this.butIm.height/2,scX:this.oriSc*this.sc*this.mouseSc,scY:this.oriSc*this.sc*this.mouseSc,cent:!0,alp:this.alp})}});EntityPauseBut=EntityPlainBut.extend({zIndex:2020,oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/pause.png"),oriStat:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y;this.sc=1},buttonTask:function(){if(!0!=this.main.gameOver&&
!0!=this.main.gamePaused&&!0!=this.tweening){this.sounder("click");this.main.gamePaused=!0;this.menu.tweenF("pauseFadeIn");for(var b=0;b<ig.game.entities.length;b++){var c=ig.game.entities[b];(c instanceof EntityPlainTile||c instanceof EntityPlainStage||c instanceof EntityPlainBubble||c instanceof EntityPlainGame||c instanceof EntityPlainShooter||c instanceof EntityPlainReady||c instanceof EntityPlainGui)&&c.pauseTweens()}}},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.menu=ig.game.getEntitiesByType(EntityPlainPause)[0]}});EntityToggleBubbleBut=EntityPlainBut.extend({zIndex:2020,oriSc:0.7,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/arrow.png"),oriStat:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y;this.sc=1},buttonTask:function(){!1!=this.main.gameStarted&&(!0!=this.main.gameOver&&!0!=this.main.gamePaused&&!0!=this.tweening)&&(this.sounder("click"),this.bubble.toggleBubble())},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.bubble=ig.game.getEntitiesByType(EntityPlainBubble)[0];this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0];this.startOffset=Math.abs(this.stage.startOffset)},update:function(){ig.global.wm||(this.alp=1>=this.bubble.armoLeft?0.5:1,this.pos.y=!0==this.stage.startTween?this.oriPos.y+this.stage.pos.y+this.startOffset:this.oriPos.y,!0!=this.tweening&&(this.mouseSc=this.pointer.hoveringItem==this?1:0.95,ig.input.released("toggle")&&this.buttonTask()))}})});ig.baked=!0;
ig.module("game.entities.plain-pause").requires("game.entities.plain").defines(function(){EntityPlainPause=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2030,size:{x:50,y:50},task:"unpause",pauseRect:{alp:0,targAlp:0.5,colour:"black"},boardIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/board.png"),musicIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/music.png"),soundIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/sound.png"),settingIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/setting.png"),
sliderIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/slider.png"),headerIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/header.png"),titleIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/paused.png"),buttons:[],offY:-600,init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),ig.game.spawnEntity(EntityCloseBut,363,186,{main:this.main,menu:this}),ig.game.spawnEntity(EntityMusicKnot,205,237,{main:this.main,menu:this}),ig.game.spawnEntity(EntitySoundKnot,205,
290,{main:this.main,menu:this}),ig.game.spawnEntity(EntityMenuBut,ig.system.width/2-50-70,350,{main:this.main,menu:this}),ig.game.spawnEntity(EntityReplayBut,ig.system.width/2-35,350,{main:this.main,menu:this}),ig.game.spawnEntity(EntityContinueBut,ig.system.width/2+50,350,{main:this.main,menu:this}),ig.game.spawnEntity(EntityProceedBut,ig.system.width/2+50,350,{main:this.main}),this.board={x:ig.system.width/2,y:300,offX:0,offY:0,scX:0,scY:0},this.header={x:0,y:-100,offX:0,offY:0,scX:1,scY:1},this.title=
{x:0,y:-5,offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:3},this.title.grad=this.ctx.createLinearGradient(0,this.title.grad1,0,this.title.grad2),this.title.grad.addColorStop(0,"#fbf513"),this.title.grad.addColorStop(0.5,"#fcd60b"),this.title.grad.addColorStop(1,"#feb203"),this.music={x:-90,y:-43,lineX:50,lineY:-40,offX:0,offY:0,scX:1,scY:1},this.sound={x:-90,y:8,lineX:50,lineY:10,offX:0,offY:0,scX:1,scY:1},this.renderText())},renderText:function(){},tweenF:function(b){switch(b){case "pauseFadeIn":this.tweening=
!0;this.tweener("pauseRect",{alp:this.pauseRect.targAlp},0.3,"boardfadeIn");break;case "boardfadeIn":this.tweener("this",{offY:50},0.3,"boardfadeIn2");this.tweener("board",{scX:1.1,scY:0.9},0.3,"boardSize4");break;case "boardSize2":this.tweener("board",{scX:1.1,scY:0.9},0.1,"boardSize3");break;case "boardSize3":this.tweener("board",{scX:0.95,scY:1.05},0.1,"boardSize4");break;case "boardSize4":this.tweener("board",{scX:1,scY:1},0.1);break;case "boardfadeIn2":this.tweener("this",{offY:0},0.3,"donefadeIn");
for(b=0;b<this.buttons.length;b++)this.buttons[b].tweenF("fadeIn");break;case "donefadeIn":this.tweening=!1;break;case "pauseFadeOut":this.tweening=!0;for(b=0;b<this.buttons.length;b++)this.buttons[b].tweenF("fadeOut");this.tweener("this",{offY:50},0.3,"boardfadeOut2");this.tweener("board",{scX:1.1,scY:0.9},0.3,"boardSizeOut");break;case "boardSizeOut":this.tweener("board",{scX:0.95,scY:1.1},0.3,"boardSizeOut2");this.tweener("pauseRect",{alp:0},0.3);break;case "boardSizeOut":this.tweener("board",
{scX:0,scY:0},0.3);break;case "boardfadeOut2":this.tweener("this",{offY:-500},0.3,"donefadeOut");break;case "donefadeOut":this.tweening=!1,this.runTask()}},runTask:function(){switch(this.task){case "unpause":this.main.gamePaused=!1;for(var b=0;b<ig.game.entities.length;b++){var c=ig.game.entities[b];(c instanceof EntityPlainTile||c instanceof EntityPlainStage||c instanceof EntityPlainBubble||c instanceof EntityPlainGame||c instanceof EntityPlainShooter||c instanceof EntityPlainReady||c instanceof
EntityPlainGui)&&c.resumeTweens()}break;case "replay":ig.game.director.jumpTo(LevelGame);break;case "home":this.main.gamePaused=!1,ig.game.showLvlMenu=!0,ig.game.director.jumpTo(LevelHome)}},update:function(){ig.global.wm||this.parent()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];for(var b=0;b<this.buttons.length;b++)this.buttons[b].menu=this},draw:function(){this.parent();ig.global.wm||(!0==this.main.gamePaused&&(this.ctx.fillStyle=this.pauseRect.colour,this.ctx.globalAlpha=
this.pauseRect.alp,this.ctx.fillRect(0,0,ig.system.width,ig.system.height)),this.drawer({x:this.board.x,y:this.board.y+this.offY,cent:!0,scX:this.board.scX,scY:this.board.scY,pic:this.settingIm}),this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:this.headerIm}),this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*
this.header.scY,pic:this.titleIm}),this.drawer({x:this.board.x+this.music.lineX,y:this.board.y+this.music.lineY+this.offY,cent:!0,scX:this.board.scX*this.music.scX,scY:this.board.scY*this.music.scY,pic:this.sliderIm}),this.textDraw({px:20,tx:_STRINGS.Game.Music,x:this.board.x+this.music.x,y:this.board.y+this.music.y+this.offY,col:this.title.grad}),this.drawer({x:this.board.x+this.sound.lineX,y:this.board.y+this.sound.lineY+this.offY,cent:!0,scX:this.board.scX*this.sound.scX,scY:this.board.scY*this.sound.scY,
pic:this.sliderIm}),this.textDraw({px:20,tx:_STRINGS.Game.Sound,x:this.board.x+this.sound.x,y:this.board.y+this.sound.y+this.offY,col:this.title.grad}))}})});ig.baked=!0;
ig.module("game.entities.plain-level-box").requires("game.entities.plain","game.entities.plain-menu-but").defines(function(){EntityPlainLevelBox=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2031,size:{x:50,y:50},oriPos:{x:0,y:0},mouseSc:0.95,infiLockedIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/infi-locked.png"),infiIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/infi.png"),lvlIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/lvl.png"),
starIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/rank-small.png"),baseIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/rank-base-small.png"),sc:1,buttons:[],grad:null,clicked:function(){this.sc=0.9;this.tweenF("delayTask");this.sounder("click")},released:function(){!0!=this.tweening&&(this.sounder("click"),this.sc=1)},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.oriPos.x=b,this.oriPos.y=c,this.level=d.level,this.main=d.main,this.getSize("lvlIm"),this.grad=
this.ctx.createLinearGradient(0,-20,0,3),this.grad.addColorStop(0,"#fbf513"),this.grad.addColorStop(0.5,"#fcd60b"),this.grad.addColorStop(1,"#feb203"))},buttonTask:function(){!1!=ig.game.levelStat[this.level+12*(this.menu.page-1)].unlocked&&(ig.game.lvl=this.level+12*(this.menu.page-1),ig.game.director.jumpTo(LevelGame))},tweenF:function(b){switch(b){case "fadeIn":this.tweener("this",{sc:1},0.3);break;case "fadeOut":this.tweener("this",{sc:0},0.3);break;case "delayTask":this.tweener("this",{},0.01,
"runTask");break;case "runTask":this.buttonTask()}},runTask:function(){switch(this.task){case "unpause":this.main.gamePaused=!1;break;case "replay":this.menu.offY=-600;ig.game.director.jumpTo(LevelGame);break;case "home":this.main.gamePaused=!1,ig.game.director.jumpTo(LevelHome)}},update:function(){ig.global.wm||(this.parent(),this.pos.y=this.oriPos.y+this.menu.offY,!0!=this.tweening&&(this.mouseSc=this.pointer.hoveringItem==this?1:0.95))},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];
this.menu=ig.game.getEntitiesByType(EntityPlainLevel)[0]},draw:function(){this.parent();if(!1!=this.menu.drawing&&!ig.global.wm){this.drawer({x:this.pos.x+this.halfSize.x,y:this.pos.y+this.halfSize.y,cent:!0,pic:this.lvlIm,scX:0.9*this.menu.board.scX*this.sc*this.mouseSc,scY:0.9*this.menu.board.scY*this.sc*this.mouseSc});24==this.level+12*(this.menu.page-1)+1?this.drawer({pic:!0==ig.game.levelStat[this.level+12*(this.menu.page-1)].unlocked?this.infiIm:this.infiLockedIm,x:this.pos.x+this.halfSize.x,
y:this.pos.y+0.71*this.halfSize.y+2,cent:!0,scX:this.menu.board.scX*this.sc*this.mouseSc,scY:this.menu.board.scY*this.sc*this.mouseSc}):this.textDraw({tx:this.level+12*(this.menu.page-1)+1,px:27,x:this.pos.x+this.halfSize.x,y:this.pos.y+0.71*this.halfSize.y,col:!0==ig.game.levelStat[this.level+12*(this.menu.page-1)].unlocked?this.grad:"#553600",scX:0.9*this.menu.board.scX*this.sc*this.mouseSc,scY:0.9*this.menu.board.scY*this.sc*this.mouseSc});for(var b=0;3>b;b++)b<ig.game.levelStat[this.level+12*
(this.menu.page-1)].star?this.drawer({pic:this.starIm,x:this.pos.x+this.halfSize.x+16*(b-1)*this.mouseSc*this.sc,y:this.pos.y+this.halfSize.y+0.55*this.halfSize.y*this.mouseSc*this.sc,cent:!0,scX:0.8*this.menu.board.scX*this.sc*this.mouseSc,scY:0.8*this.menu.board.scY*this.sc*this.mouseSc}):this.drawer({pic:this.baseIm,x:this.pos.x+this.halfSize.x+16*(b-1)*this.mouseSc*this.sc,y:this.pos.y+this.halfSize.y+0.55*this.halfSize.y*this.mouseSc*this.sc,cent:!0,scX:0.8*this.menu.board.scX*this.sc*this.mouseSc,
scY:0.8*this.menu.board.scY*this.sc*this.mouseSc})}}})});ig.baked=!0;
ig.module("game.entities.plain-ready").requires("game.entities.plain").defines(function(){EntityPlainReady=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:2E3,w:800,sc:2,size:{x:50,y:50},textSize:80,strokeSize:7,shadowCol:"#fffbe3",readyText:{seq:0,x:240,y:50,scX:1,scY:1,alp:1,offX:0,offY:0,rot:0},goText:{seq:0,x:240,y:150,scX:1,scY:1,alp:1,offX:0,offY:0,rot:0},r:{seq:0,x:135,y:250,scX:0,scY:0,alp:0,offX:0,offY:0,rot:0},e:{seq:1,x:187,y:250,scX:0,scY:0,alp:0,offX:0,offY:0,rot:0},a:{seq:2,x:245,y:250,
scX:0,scY:0,alp:0,offX:0,offY:0,rot:0},d:{seq:3,x:305,y:250,scX:0,scY:0,alp:0,offX:0,offY:0,rot:0},y:{seq:4,x:350,y:250,scX:0,scY:0,alp:0,offX:0,offY:0,rot:0},g:{seq:0,x:205,y:250,scX:0,scY:0,alp:1,offX:0,offY:0,rot:0},o:{seq:1,x:275,y:250,scX:0,scY:0,alp:1,offX:0,offY:0,rot:0},grad1:-60,grad2:10,drawSheetCent:function(){},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.main=d.main,this.grad=this.ctx.createLinearGradient(0,this.grad1,0,this.grad2),this.grad.addColorStop(0,"#fffcea"),this.grad.addColorStop(0.8,
"#ffd05c"),this.grad.addColorStop(1,"#a85a15"),this.shadowGrad=this.ctx.createLinearGradient(0,this.grad1,0,this.grad2),this.shadowGrad.addColorStop(0,"#FFFFFF"),this.shadowGrad.addColorStop(1,"#fffbe3"),this.strokeGrad=this.ctx.createLinearGradient(0,this.grad1,0,this.grad2),this.strokeGrad.addColorStop(0,"#6d3a08"),this.strokeGrad.addColorStop(0.7,"#8a470b"),this.strokeGrad.addColorStop(1,"#6d3a08"),this.preRender())},tweenF:function(b){switch(b){case "ready":this.readyText={seq:0,x:250,y:250,scX:1,
scY:1,alp:0,offX:0,offY:0,rot:0};this.goText={seq:0,x:250,y:250,scX:1,scY:1,alp:0,offX:0,offY:0,rot:0};this.tweener("readyText",{alp:1,scX:1.3,scY:1.3},0.2,"ready2");break;case "ready2":this.tweener("readyText",{scX:1,scY:1},0.2,"ready3");this.sounder("count");break;case "ready3":this.tweener("readyText",{scX:1.3,scY:1.3},0.1,"ready4",0.3);break;case "ready4":this.tweener("readyText",{scX:0,scY:0,alp:0},0.2,"go");break;case "go":this.tweener("goText",{alp:1,scX:1.3,scY:1.3},0.2,"go2");break;case "go2":this.sounder("count");
this.tweener("goText",{scX:1,scY:1},0.2,"go3");break;case "go3":this.tweener("goText",{scX:1.3,scY:1.3},0.1,"go4",0.3);break;case "go4":this.tweener("goText",{scX:0,scY:0,alp:0},0.2,"startGame");break;case "startGame":this.main.startGame()}},update:function(){ig.global.wm||!0!=this.main.gamePaused&&this.parent()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.tweenF("ready")},preRender:function(){!0!=ig.game.played&&(this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,
tx:_STRINGS.Game.READY,x:this.readyText.x+this.readyText.offX,y:this.readyText.y+this.readyText.offY+2,stroke:!0,strokeColour:this.strokeGrad,strokeLine:8,col:"#92551c",scX:this.readyText.scX,scY:this.readyText.scY,alp:this.readyText.alp,strokeAlp:this.readyText.alp}),this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,tx:_STRINGS.Game.READY,x:this.readyText.x+this.readyText.offX,y:this.readyText.y+this.readyText.offY,stroke:!0,strokeColour:this.strokeGrad,strokeLine:this.strokeSize,col:"#92551c",
scX:this.readyText.scX,scY:this.readyText.scY,alp:this.readyText.alp,strokeAlp:this.readyText.alp}),this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,tx:_STRINGS.Game.READY,x:this.readyText.x+this.readyText.offX,y:this.readyText.y+this.readyText.offY-1,stroke:!0,strokeColour:this.strokeGrad,strokeLine:this.strokeSize,col:this.shadowGrad,scX:this.readyText.scX,scY:this.readyText.scY,alp:this.readyText.alp,strokeAlp:this.readyText.alp}),this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,tx:_STRINGS.Game.READY,
x:this.readyText.x+this.readyText.offX-1,y:this.readyText.y+this.readyText.offY,col:this.grad,scX:this.readyText.scX,scY:this.readyText.scY,alp:this.readyText.alp}),this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,tx:_STRINGS.Game.GO,x:this.goText.x+this.goText.offX,y:this.goText.y+this.goText.offY+2,stroke:!0,strokeColour:this.strokeGrad,strokeLine:this.strokeSize,col:"#92551c",scX:this.goText.scX,scY:this.goText.scY,alp:this.goText.alp,strokeAlp:this.goText.alp}),this.textDraw({ctx:ig.game.hidCtx,
px:this.textSize,tx:_STRINGS.Game.GO,x:this.goText.x+this.goText.offX,y:this.goText.y+this.goText.offY,stroke:!0,strokeColour:this.strokeGrad,strokeLine:this.strokeSize,col:"#92551c",scX:this.goText.scX,scY:this.goText.scY,alp:this.goText.alp,strokeAlp:this.goText.alp}),this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,tx:_STRINGS.Game.GO,x:this.goText.x+this.goText.offX,y:this.goText.y+this.goText.offY-1,stroke:!0,strokeColour:this.strokeGrad,strokeLine:this.strokeSize,col:this.shadowGrad,scX:this.goText.scX,
scY:this.goText.scY,alp:this.goText.alp,strokeAlp:this.goText.alp}),this.textDraw({ctx:ig.game.hidCtx,px:this.textSize,tx:_STRINGS.Game.GO,x:this.goText.x+this.goText.offX-1,y:this.goText.y+this.goText.offY,col:this.grad,scX:this.goText.scX,scY:this.goText.scY,alp:this.goText.alp}),this.readyText={seq:0,x:240,y:50,scX:1,scY:1,alp:1,offX:0,offY:0,rot:0},this.goText={seq:0,x:240,y:150,scX:1,scY:1,alp:1,offX:0,offY:0,rot:0})},draw:function(){this.parent();ig.global.wm||(this.ctxDrawer({pic:ig.game.hidEle,
x:this.goText.x+this.goText.offX,y:this.goText.y+this.goText.offY+2,scX:this.goText.scX,scY:this.goText.scY,alp:this.goText.alp,sx:40,sy:100,sw:400,sh:100,cent:!0}),this.ctxDrawer({pic:ig.game.hidEle,x:this.readyText.x+this.readyText.offX,y:this.readyText.y+this.readyText.offY+2,scX:this.readyText.scX,scY:this.readyText.scY,alp:this.readyText.alp,sx:40,sy:0,sw:400,sh:100,cent:!0}))}})});ig.baked=!0;
ig.module("game.entities.plain-over").requires("game.entities.plain").defines(function(){EntityPlainOver=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:3E3,h:600,w:800,sc:2,offY:-500,size:{x:50,y:50},gameOver:!1,gamePaused:!1,bgIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bg.png"),rect:{alp:0,targAlp:0.5,colour:"black"},boardIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/board.png"),buttons:[],starIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/rank-big.png"),
baseIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/rank-base-big.png"),headerIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/header.png"),slotIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/text-base.png"),winIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/you-win.png"),loseIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/you-lose.png"),task:"unpause",textGap:30,winGap:30,loseGap:35,win:!0,tx:[],init:function(b,c,d){ig.global.wm||
(this.parent(b,c,d),this.main=d.main,this.tx[0]=this.main.score,this.tx[1]=this.main.score,this.tx[2]=this.main.score,this.spawner(),this.board={x:ig.system.width/2,y:300,offX:0,offY:0,scX:0,scY:0},this.header={x:0,y:-120,offX:0,offY:0,scX:1,scY:1},this.title={x:0,y:-5,offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:0},this.slot0={textX:-130,x:50,y:0,offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:0,col:"#553600",align:"left",tx:_STRINGS.Game.Score.toUpperCase()},this.slot1={textX:-130,x:50,y:this.slot0.y+33,
offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:0,align:"left",tx:_STRINGS.Game.Highscore.toUpperCase()},this.slot2={textX:-50,x:50,y:this.slot0.y+60,offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:0,tx:_STRINGS.Game.Coin},this.star0={x:-70,y:-63,offX:0,offY:0,sc:0,oriSc:0.8,grad1:-20,grad2:0,im:this.baseIm,rot:0,delay:0},this.star1={x:0,y:-63,offX:0,offY:0,sc:0,oriSc:0.8,grad1:-20,grad2:0,im:this.baseIm,rot:0,delay:0.1},this.star2={x:70,y:-63,offX:0,offY:0,sc:0,oriSc:0.8,grad1:-20,grad2:0,im:this.baseIm,rot:0,
delay:0.2},this.title.grad=this.ctx.createLinearGradient(0,this.title.grad1,0,this.title.grad2),this.title.grad.addColorStop(0,"#fbf513"),this.title.grad.addColorStop(0.5,"#fcd60b"),this.title.grad.addColorStop(1,"#feb203"),this.renderText())},spawner:function(){},tweenF:function(b,c){switch(b){case "pauseFadeIn":for(var d=0;d<this.buttons.length;d++)this.buttons[d].menu=this,this.buttons[d].zIndex=3002,this.buttons[d].oriPos.y+=20,ig.game.sortEntitiesDeferred();this.calculateStar();this.tweening=
!0;this.tweener("rect",{alp:this.rect.targAlp},0.3,"boardfadeIn");break;case "boardfadeIn":this.tweener("this",{offY:50},0.4,"boardfadeIn2");this.tweener("board",{scX:1.1,scY:0.9},0.3,"boardSize4");break;case "boardSize2":this.tweener("board",{scX:1.1,scY:0.9},0.1,"boardSize3");break;case "boardSize3":this.tweener("board",{scX:0.95,scY:1.05},0.1,"boardSize4");break;case "boardSize4":this.tweener("board",{scX:1,scY:1},0.3);break;case "boardfadeIn2":!1==this.win?this.sounder("over"):this.sounder("win");
this.tweener("this",{offY:0},0.3,"donefadeIn");for(d=0;d<this.buttons.length;d++)this.buttons[d].tweenF("fadeIn");for(d=0;3>d;d++)this.tweener("star"+d,{sc:1.2},0.2,"star2",this["star"+d].delay);break;case "star2":this.tweener(c,{sc:1},0.11);break;case "donefadeIn":this.tweening=!1;break;case "pauseFadeOut":this.tweening=!0;for(d=0;d<this.buttons.length;d++)this.buttons[d].tweenF("fadeOut");this.tweener("this",{offY:50},0.3,"boardfadeOut2");this.tweener("board",{scX:1.1,scY:0.9},0.3,"boardSizeOut");
break;case "boardSizeOut":this.tweener("board",{scX:0.95,scY:1.1},0.3,"boardSizeOut2");this.tweener("rect",{alp:0},0.3);break;case "boardSizeOut":this.tweener("board",{scX:0,scY:0},0.3);break;case "boardfadeOut2":this.tweener("this",{offY:-500},0.3,"donefadeOut");break;case "donefadeOut":this.tweening=!1,this.runTask()}},calculateStar:function(){!1!=this.win&&(this.main.score>=this.main.starScore[0]&&(this.star0.im=this.starIm),this.main.score>=this.main.starScore[1]&&(this.star1.im=this.starIm),
this.main.score>=this.main.starScore[2]&&(this.star2.im=this.starIm))},update:function(){ig.global.wm||this.parent()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.buttons=[ig.game.getEntitiesByType(EntityMenuBut)[0],ig.game.getEntitiesByType(EntityReplayBut)[0],ig.game.getEntitiesByType(EntityProceedBut)[0]]},runTask:function(){switch(this.task){case "unpause":this.main.gamePaused=!1;break;case "replay":ig.game.director.jumpTo(LevelGame);break;case "next":!0==this.win&&
23>ig.game.lvl&&ig.game.lvl++;ig.game.director.jumpTo(LevelGame);break;case "home":this.main.gamePaused=!1,ig.game.showLvlMenu=!0,ig.game.director.jumpTo(LevelHome)}},renderText:function(){},draw:function(){this.parent();if(!ig.global.wm&&!1!=this.main.gameOver){this.ctx.fillStyle=this.rect.colour;this.ctx.globalAlpha=this.rect.alp;this.ctx.fillRect(0,0,ig.system.width,ig.system.height);this.drawer({x:this.board.x,y:this.board.y+this.offY,cent:!0,scX:this.board.scX,scY:this.board.scY,pic:this.boardIm});
this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:this.headerIm});this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:!0==this.win?this.winIm:this.loseIm});for(var b=0;2>b;b++)this.drawer({x:this.board.x+this["slot"+b].x,y:this.board.y+this["slot"+b].y+this.offY,cent:!0,scX:this.board.scX,
scY:this.board.scY,pic:this.slotIm}),this.textDraw({px:14,tx:this["slot"+b].tx,x:this.board.x+this.slot0.textX,y:this.board.y+this["slot"+b].y+this.offY-1,col:this.slot0.col,scX:1,scY:1,align:this.slot0.align,col:this.title.grad}),this.textDraw({px:14,tx:Math.floor(this.tx[b]),x:this.board.x+this["slot"+b].x,y:this.board.y+this["slot"+b].y+this.offY-1,col:"white",scX:1,scY:1});for(b=0;3>b;b++)this.drawer({x:this.board.x+this["star"+b].x,y:this.board.y+this["star"+b].y+this.offY+10,cent:!0,scX:this.board.scX*
this["star"+b].sc*this["star"+b].oriSc,scY:this.board.scY*this["star"+b].sc*this["star"+b].oriSc,pic:this["star"+b].im,rot:this["star"+b].rot})}}})});ig.baked=!0;
ig.module("game.entities.plain-count").requires("game.entities.plain").defines(function(){EntityPlainCount=EntityPlain.extend({type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,zIndex:2003,gravityFactor:1,vel:{x:50,y:-200},sheetX:8,sheetY:4,im:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bubbles.png"),drawBurst:!1,burstFrame:0,burstEndFrame:48,burst:{frame:0,frameTime:0.012},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.burst.frameTimer=new ig.Timer,this.popTime=0.6+
0.3*Math.random(),this.popTimer=new ig.Timer,this.main=d.main,this.aniStuff(),this.vel.x=350*Math.random(),this.vel.y=-(700+300*Math.random()),this.accel.x=-500+1E3*Math.random())},update:function(){this.parent();this.popTimer.delta()>this.popTime&&!1==this.drawBurst&&(this.main.soundLooper("bubble"),this.drawBurst=!0,this.vel.x=0,this.vel.y=0,this.accel.x=0,this.gravityFactor=this.accel.y=0)},drawBurstStuff:function(){this.burst.frame<this.burstEndFrame?(void 0!=ig.game.burstRender.frames[this.burst.frame]&&
this.ctxDrawer({pic:ig.game.hidEle,x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2,sx:ig.game.burstRender.frames[Math.floor(this.burst.frame)].sx,sy:ig.game.burstRender.frames[Math.floor(this.burst.frame)].sy,sw:60,sh:60,cent:!0}),this.burst.frameTimer.delta()>this.burst.frameTime&&(this.burst.frameTimer.reset(),this.burst.frame++)):this.kill()},draw:function(){!0==this.drawBurst?this.drawBurstStuff():this.parent()},bubbleTypeRegen:function(){-1<this.which.indexOf("baby")?(this.refType="baby",
this.refColour=this.which.replace("baby","")):this.main.bubbleColours.indexOf(this.which)?(this.refType="normal",this.refColour=this.which):(this.refType=this.which,this.refColour="none");this.currentAnim=this.anims[this.which]},aniStuff:function(){this.animSheet=new ig.AnimationSheet(this.im.path,this.im.width/this.sheetX,this.im.height/this.sheetY);this.size.x=(this.animSheet.width-4)*this.sc.x;this.size.y=(this.animSheet.height-8)*this.sc.y;this.addAnim("red",0.1,[0],!0);this.addAnim("orange",
0.1,[1],!0);this.addAnim("yellow",0.1,[2],!0);this.addAnim("green",0.1,[3],!0);this.addAnim("cyan",0.1,[4],!0);this.addAnim("blue",0.1,[5],!0);this.addAnim("purple",0.1,[6],!0);this.addAnim("pink",0.1,[7],!0);this.addAnim("super",0.05,[19],!1);this.addAnim("babyred",0.1,[8],!0);this.addAnim("babyorange",0.1,[9],!0);this.addAnim("babyyellow",0.1,[10],!0);this.addAnim("babygreen",0.1,[11],!0);this.addAnim("babycyan",0.1,[12],!0);this.addAnim("babyblue",0.1,[13],!0);this.addAnim("babypurple",0.1,[14],
!0);this.addAnim("babypink",0.1,[15],!0);this.addAnim("ice",0.1,[16],!0);this.addAnim("right",0.1,[17],!0);this.addAnim("up",0.1,[18],!0);this.addAnim("rainbow",0.1,[19],!0);this.addAnim("thunder",0.1,[20],!0);this.addAnim("star",0.1,[21],!0);this.addAnim("time",0.1,[22],!0);this.addAnim("bomb",0.1,[23],!0);this.addAnim("steel",0.1,[24],!0);this.addAnim("evil",0.1,[25],!0);this.addAnim("wood",0.1,[26],!0);this.addAnim("guide",0.1,[27],!0);this.addAnim("change",0.1,[28],!0);this.addAnim("pick",0.1,
[29],!0);this.addAnim("search",0.1,[30],!0);this.addAnim("armo",0.1,[31],!0);this.currentAnim=this.anims[this.which]}})});ig.baked=!0;
ig.module("game.entities.plain-game").requires("game.entities.plain","game.entities.plain-tile","game.entities.plain-gui","game.entities.plain-tut","game.entities.plain-stage","game.entities.plain-shooter","game.entities.plain-menu-but","game.entities.plain-but","game.entities.plain-pause","game.entities.plain-level-box","game.entities.plain-ready","game.entities.plain-over","game.entities.plain-count").defines(function(){this.START_WHITELABEL_ENCAPSULATOR;
	EntityPlainGame = EntityPlain.extend({
		gravityFactor: 0,
		type: ig.Entity.TYPE.B,
		zIndex: 1,
		h:600,
		w:800,
		score:0,
		star:0,
		countSound:false,
		choice:[0,1,2,3,"plus0","plus1","plus2","plus3","minus0","minus1","minus2","minus3","evil","wood","ice","star","thunder"],
		tutOn:false,

		sLoop:{bubble:{duration:0.05},
			   hehe:{duration:0.5},
			   count:{duration:0.05}},
		scoreSc:1,

		sc:2,
		size:{x:50,y:50},

		gameOver:false,
		gamePaused:false,
		gameStarted:false,

		doneOver:false,

		totalBaby:0,
		babyRescued:0,

		burstScore:10,
		allowShoot:true,

		armoCombo:0,
		popAll:{done:false,total:0,killed:-1,combo:0},
		dropAll:{done:false,total:0,killed:-1,combo:0},

		showCombo:true,
		doneCombo:true,
		combo:0,

		countDown:0,

		noArmo:false,
		bgIm: new ig.Image('../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/bg.png'),
		rowOffset:1,
		tiles:[],
		bubbleTypes:["red","orange","yellow","green","cyan","blue","purple","pink",
					 "babyred","babyorange","babyyellow","babygreen","babycyan","babyblue","babypurple","babypink",
					 "left","right","up","rainbow","thunder","star","time","bomb"
					 ,"steel","steelglow","wood","guide","change","pick","search","armo","super"],

		bubbleColours:["red","orange","yellow","green","cyan","blue","purple","pink","super"],
		colourSet:[],
		floorIm: new ig.Image('../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/floor.png'),



		//prerender tile burst animation



		init: function(x, y, settings) {
			if (ig.global.wm) return;
			this.parent(x, y, settings);

			ig.game.redraw=true;
			ig.game.getMusic();
			ig.game.getSound();

			this.hidCtx=ig.game.hidCtx;

			//ig.game.hidCtx.clearRect(0,0,1200,1000);

			ig.game.gravity=1000;

			this.colourSet=_LVL["lvl"+ig.game.lvl]["colourSet"][Math.floor(Math.random()*_LVL["lvl"+ig.game.lvl]["colourSet"].length)];

			this.levelStat=_LVL["lvl"+ig.game.lvl];

			this.armo=this.levelStat.armo;

			//console.log(this.armo)
			this.armoExtra=this.levelStat.armoExtra;

			this.starScore=this.levelStat.starScore;
			//console.log(this.starScore)
			this.map=this.levelStat["map"]
			this.spawner();

		},


		spawner: function() {

			ig.game.spawnEntity(EntityPointer,0,0,{main:this});

			ig.game.spawnEntity(EntityPlainStage,0,0,{main:this});

			ig.game.spawnEntity(EntityPlainTut,259,387,{main:this});

			ig.game.spawnEntity(EntityPlainPause,0,0,{main:this});

			ig.game.spawnEntity(EntityPlainOver,0,0,{main:this});

			ig.game.spawnEntity(EntityPlainReady,0,0,{main:this});



			ig.game.spawnEntity(EntityToggleBubbleBut,97,556,{main:this});


			ig.game.spawnEntity(EntityPauseBut,ig.system.width-55,10,{main:this});



				for(var j=0;j<this.map.length;j++){
					for(var i=0;i<this.map[j].length;i++){

				   if(this.map[j][i]=="empty" || this.map[j][i]==undefined){
						this.map[j][i]=undefined;

				   }else{
				   ig.game.spawnEntity(EntityPlainTile,0,0,{main:this,j:j,i:i});

				   }

				}
			}
			ig.game.spawnEntity(EntityPlainShooter,175,490,{main:this});
			ig.game.spawnEntity(EntityPlainBubble,175,490,{main:this});


			ig.game.spawnEntity(EntityPlainGui,0,0,{main:this});





		},

		dropBubbles: function(targ) {

				targ.tweening=true;
				targ.hanging = false;
				targ.vel.y = -(Math.random() * 50+80);
				targ.accel.y = 600;
				targ.accel.x = -150 + Math.random() * 300;
				targ.zIndex=101;

				this.tiles[targ.tile.y][targ.tile.x] = undefined;

		},



		genBubbles: function() {


		},


		bubbleHeight: function() {


		},

		winDropBubbles: function() {
			this.dropAll.killed=0;
			this.dropAll.total=0;
			this.dropAll.done=false;

			var tiles = ig.game.getEntitiesByType(EntityPlainTile);

			for(var j = 0; j < tiles.length; j++) {

				var targ=tiles[j];

				this.scoreVault+=10;
				this.dropAll.total++;
				this.dropBubbles(targ);

			}


			this.dropAll.combo=Math.floor(this.dropAll.total/5)*(55+Math.floor(this.dropAll.total/5)*2);
			//this.score+=this.dropAll.combo;
			this.tweener("this",{score:this.score+this.dropAll.combo+this.scoreVault},0.3,"drawScore");

			if( this.dropAll.combo>0){

				this.gui.tweenF("endDropCombo");

			}else{




			}
		},


		winGame: function(step) {


			if(this.over.win==false) return;
			switch(step) {

			case "stopGame":

				if(this.gameOver==true) return;

				this.gameOver=true;
				this.countDown=this.bubble.armoLeft;
				//console.log(this.countDown);
				this.armoCombo=this.countDown*50;
				this.winDropBubbles();

			break;

			case "overScreen":

				this.over=ig.game.getEntitiesByType(EntityPlainOver)[0];
				//this.over.win=true;
				this.over.textGap=this.over.winGap;
				this.over.tweenF("pauseFadeIn");
				this.recordGame();
				this.over.tx[0]=this.score;
				this.over.calculateStar();
					//console.log("hi")
				this.over.tx[1]=ig.game.levelStat[ig.game.lvl].highScore;
			break;



			}



		},










		loseGame: function() {
			if(this.gameOver==true) return;

			this.gameOver=true;
			this.countDown=this.bubble.armoLeft;
			this.over=ig.game.getEntitiesByType(EntityPlainOver)[0];
			this.over.win=false;
			this.over.textGap=this.over.loseGap;
			this.over.tweenF("pauseFadeIn");
			this.over.tx[0]=this.score;
			this.over.tx[1]=ig.game.levelStat[ig.game.lvl].highScore;


			//remove replay button and center menu and replay buttons
			this.over.buttons.pop();

			for(var i=0;i<this.over.buttons.length;i++){


				 this.over.buttons[i].oriPos.x+=43;

			}



		},


		startGame: function() {

			this.doneCombo=true;
			this.gameStarted=true;

		},


		resetCombo: function() {

			this.popAll.done=false;
			this.dropAll.done=false;
			this.showCombo=false;
			this.doneCombo=false;
			this.popAll.total=0;
			this.dropAll.total=0;
			this.popAll.killed=0;
			this.dropAll.killed=0;
			this.popAll.combo=0;
			this.dropAll.combo=0;

		},



		showComboText:function(){




			 if(this.popAll.total>3){

					this.popAll.combo=Math.floor(this.popAll.total/5)*(50+Math.floor(this.popAll.total/5)*2);
					//this.score+=this.popAll.combo;

			 }

				this.dropAll.combo=Math.floor(this.dropAll.total/5)*(55+Math.floor(this.dropAll.total/5)*2);

			if(this.popAll.total>3){

			this.gui.tweenF("popCombo");



			}else if(this.dropAll.combo>0){

				this.gui.tweenF("dropCombo");

			}else{

				this.doneCombo=true;



			}
				//this.score+=this.dropAll.combo;
//console.log(this.score,this.popAll.combo,this.dropAll.combo,this.scoreVault)

			this.tweener("this",{score:this.score+this.popAll.combo+this.dropAll.combo+this.scoreVault},0.3,"drawScore");

		},





		recordGame: function() {




			if( ig.game.levelStat[ig.game.lvl].highScore<this.score){

			ig.game.levelStat[ig.game.lvl].highScore=this.score;


			}


			 if(this.score>=this.starScore[0]){

			 if(ig.game.levelStat[ig.game.lvl].star<this.star+1){
					ig.game.levelStat[ig.game.lvl].star=this.star+1;
			 }

			// API_END_GAME
			// Score: this.score, Level:ig.game.lvl, Star: this.star+1
			// WHITELABEL END GAME ADS
			console.log('Checking for AdInGameEndgame ...');
			if(typeof(AdInGameEndgame)!="undefined"){
				console.log('AdInGameEndgame Initializing ...');
				AdInGameEndgame.Initialize()                        
			}
			// WHITELABEL LEADERBOARD
			console.log('Submitting to MarketJS Leaderboard: ', this.score);
			if(typeof(MarketJS)!="undefined"){
				console.log('Leaderboard SubmitScore ...');
				MarketJS.Leaderboard.SubmitScore(this.score);
			}
			// WHITELABEL END GAME API
			console.log('Injecting End Game API ...');
			try{
				console.log('enabled endgame api11');;
			}catch(err){
				console.log(err.message);
			}
			}else{

			// API_END_GAME
			// Score: this.score, Level:ig.game.lvl, Star: 0
			console.log('Checking for AdInGameEndgame ...');
			if(typeof(AdInGameEndgame)!="undefined"){
				console.log('AdInGameEndgame Initializing ...');
				AdInGameEndgame.Initialize()                        
			}
			// WHITELABEL LEADERBOARD
			console.log('Submitting to MarketJS Leaderboard: ', this.score);
			if(typeof(MarketJS)!="undefined"){
				console.log('Leaderboard SubmitScore ...');
				MarketJS.Leaderboard.SubmitScore(this.score);
			}
			// WHITELABEL END GAME API
			console.log('Injecting End Game API ...');
			try{
				console.log('enabled endgame api11');;
			}catch(err){
				console.log(err.message);
			}

			}




			if(ig.game.levelStat[ig.game.lvl+1]!=undefined){

			ig.game.levelStat[ig.game.lvl+1].unlocked=true;
			}

			ig.game.setScore();
		},




		tweenF: function(num,targ) {

			switch(num) {



			case "drawScore":

				this.gui.renderScore();

			break;


			case "countDownOld":



			break;


			case "countDown":

					/*
					if(ig.ua.mobile){

						if(this.countDown>0){

							this.countSound=true;
							this.tweener("this",{countDown:0,score:this.score+this.countDown*100},2,"winGame");

						}else{
							this.tweenF("winGame")

						}



					}else{*/

						if(this.countDown>0){
							this.sounder("count");
							this.countDown--;
							this.score+=50;
							if(!ig.ua.mobile){
							this.gui.renderScore();
							this.gui.renderCount();
							}
							this.scoreSc=1.2;
							this.tweener("this",{scoreSc:1,score:this.score+50},0.08,"countDown")

						}else{
							this.gui.renderScore();
							this.gui.tweenF("armoCombo2");
							this.winGame("overScreen");

						}

					//}
					if(this.countDown>0){

						ig.game.spawnEntity(EntityPlainCount,97,530,{main:this,which:this.bubble.armoVault[this.bubble.armoVault.length-this.countDown]});
						this.bubble.tweenF("gameOver");
					}


			break;




			case "winGame":
				this.countSound=false;
				this.gui.renderScore();
				this.gui.tweenF("armoCombo2");
				this.winGame("overScreen");

			break;



			}

		},

		update: function() {

			if (ig.global.wm) return;


			if(this.gamePaused==true) return;

			this.parent();


			if(this.countSound==true){

			this.soundLooper("count");

			}

			ig.game.played=true;

			if(this.gameOver==false){

				if(this.gameStarted==false) return;

				if(this.popAll.done==true && this.dropAll.done==true){
					this.doneCombo=true;

					if(this.showCombo==false){
						this.showCombo=true;

						this.stage.tweenF("triggerPos");
						this.gui.tweenF("armoPlusUpdate")



					}else{

						if(this.doneCombo==true){
							if(this.babyRescued==this.totalBaby){

								this.winGame("stopGame");

							}else if(this.bubble.armoLeft<=0){

						if(this.bubble.plusVault-this.bubble.minusVault<=0 && this.babyRescued<this.totalBaby){

							this.loseGame();

						}else{



						}


						}



						}


					}



				}else{

					if(this.popAll.done==false){

					if(this.popAll.total==this.popAll.killed){
					this.doneCombo=true;

					this.popAll.done=true;


					}

					}


					if(this.dropAll.done==false){

					if(this.dropAll.total==this.dropAll.killed){

						this.dropAll.done=true;

					}

					}



				}


			}else{


				if(this.dropAll.total==this.dropAll.killed){

					if(this.doneOver==false){

						this.doneOver=true;
						this.gui.renderScore();

						this.gui.tweenF("endDropCombo2");
						if(this.over.win==true){

						this.tweenF("countDown");
						}

						this.gui.tweenF("armoCombo");


					}

				}



			}

		},


		ready: function() {

			//this.parent();

			this.pointer = ig.game.getEntitiesByType(EntityPointer)[0];
			this.shooter = ig.game.getEntitiesByType(EntityPlainShooter)[0];
			this.bubble = ig.game.getEntitiesByType(EntityPlainBubble)[0];
			this.gui = ig.game.getEntitiesByType(EntityPlainGui)[0];
			this.stage = ig.game.getEntitiesByType(EntityPlainStage)[0];
			this.over = ig.game.getEntitiesByType(EntityPlainOver)[0];

		},


		draw: function() {

			this.parent();

			if(ig.global.wm)   return;
			if(ig.game.redraw==true){

			this.drawer({
						pic: this.bgIm,
						x: 0,
						y: 0,
						ctx: ig.game.bgCtx
				});


			}


			this.drawer({
						pic: this.floorIm,
						x: ig.system.width / 2,
						y: this.shooter.shadow.y-38,
						cent: true
				});

		},

	});
	this.END_WHITELABEL_ENCAPSULATOR;});ig.baked=!0;ig.module("game.levels.game").requires("impact.image","game.entities.plain-game").defines(function(){LevelGame={entities:[{type:"EntityPlainGame",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.entities.plain-home-but").requires("game.entities.plain").defines(function(){EntityPlainHomeBut=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2040,sc:0,mouseSc:0.95,runTask:!1,tweening:!1,oriPos:{x:0,y:0},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.name=d.name,this.menu=d.menu,void 0!=this.menu&&this.menu.buttons.push(this),this.size.x=this.butIm.width,this.size.y=this.butIm.height,this.oriPos.x=b,this.oriPos.y=c,this.hide(),this.oriStat&&this.oriStat())},
clicked:function(){this.sc=0.9;this.buttonTask();this.sounder("click")},released:function(){!0!=this.tweening&&(this.sounder("click"),this.sc=1)},hide:function(){this.pos.x=-200;this.pos.y=-200},show:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y+this.menu.offY},tweenF:function(b){switch(b){case "floatUp":this.tweener("pos",{y:this.oriPos.y-5},this.floatTime,"floatDown");break;case "floatDown":this.tweener("pos",{y:this.oriPos.y+8},this.floatTime,"floatUp")}},update:function(){ig.global.wm||
(this.parent(),!0!=this.tweening&&(this.mouseSc=this.pointer.hoveringItem==this?1:0.95))},drawInit:function(){},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},draw:function(){this.parent();ig.global.wm||this.drawer({pic:this.butIm,x:this.pos.x+this.butIm.width/2,y:this.pos.y+this.butIm.height/2,scX:this.oriSc*this.sc*this.mouseSc,scY:this.oriSc*this.sc*this.mouseSc,cent:!0})}});EntityPlayBut=EntityPlainHomeBut.extend({oriSc:0.98,zIndex:1E3,floatTime:0.95,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/start.png"),
oriStat:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y;this.sc=1},clicked:function(){this.sc=0.9;this.sounder("click")},released:function(){!0!=this.tweening&&(this.sc=1,this.buttonTask())},buttonTask:function(){!0!=this.main.gamePaused&&!0!=this.tweening&&(this.main.gamePaused=!0,this.level=ig.game.getEntitiesByType(EntityPlainLevel)[0],this.level.tweenF("rectFadeIn"),ig.game.hideOverlay(["more-games"]))}});EntitySettingBut=EntityPlainHomeBut.extend({oriSc:0.98,butIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/gear.png"),
zIndex:1E3,floatTime:0.7,oriStat:function(){this.pos.x=this.oriPos.x;this.pos.y=this.oriPos.y;this.sc=1},clicked:function(){this.sc=0.9;this.sounder("click")},released:function(){!0!=this.tweening&&(this.sc=1,this.buttonTask())},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.menu=ig.game.getEntitiesByType(EntityPlainSetting)[0]},buttonTask:function(){!0!=this.main.gamePaused&&!0!=this.tweening&&(this.main.gamePaused=!0,this.menu.tweenF("pauseFadeIn"),ig.game.hideOverlay(["more-games"]))}})});
ig.baked=!0;
ig.module("game.entities.plain-setting").requires("game.entities.plain","game.entities.plain-menu-but").defines(function(){EntityPlainSetting=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2030,size:{x:50,y:50},task:"unpause",pauseRect:{alp:0,targAlp:0.5,colour:"black"},boardIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/board.png"),musicIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/music.png"),soundIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/sound.png"),settingIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/setting.png"),
sliderIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/slider.png"),headerIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/header.png"),titleIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/settings.png"),buttons:[],offY:-600,init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.main=d.main,ig.game.spawnEntity(EntityCloseBut,363,186,{main:this.main,menu:this}),ig.game.spawnEntity(EntityMusicKnot,205,237,{main:this.main,menu:this}),ig.game.spawnEntity(EntitySoundKnot,
205,290,{main:this.main,menu:this}),ig.game.spawnEntity(EntityOkayBut,ig.system.width/2-35,350,{main:this.main,menu:this}),this.board={x:ig.system.width/2,y:300,offX:0,offY:0,scX:0,scY:0},this.header={x:0,y:-100,offX:0,offY:0,scX:1,scY:1},this.title={x:0,y:-5,offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:3},this.title.grad=this.ctx.createLinearGradient(0,this.title.grad1,0,this.title.grad2),this.title.grad.addColorStop(0,"#fbf513"),this.title.grad.addColorStop(0.5,"#fcd60b"),this.title.grad.addColorStop(1,
"#feb203"),this.music={x:-90,y:-43,lineX:50,lineY:-40,offX:0,offY:0,scX:1,scY:1},this.sound={x:-90,y:8,lineX:50,lineY:10,offX:0,offY:0,scX:1,scY:1},this.renderText())},tweenF:function(b){switch(b){case "pauseFadeIn":this.tweening=!0;this.tweener("pauseRect",{alp:this.pauseRect.targAlp},0.3,"boardfadeIn");break;case "boardfadeIn":this.tweener("this",{offY:50},0.3,"boardfadeIn2");this.tweener("board",{scX:1.1,scY:0.9},0.1,"boardSize4");break;case "boardSize2":this.tweener("board",{scX:1.1,scY:0.9},
0.1,"boardSize3");break;case "boardSize3":this.tweener("board",{scX:0.95,scY:1.05},0.1,"boardSize4");break;case "boardSize4":this.tweener("board",{scX:1,scY:1},0.1);break;case "boardfadeIn2":this.tweener("this",{offY:0},0.3,"donefadeIn");for(b=0;b<this.buttons.length;b++)this.buttons[b].tweenF("fadeIn");break;case "donefadeIn":this.tweening=!1;break;case "pauseFadeOut":this.tweening=!0;for(b=0;b<this.buttons.length;b++)this.buttons[b].tweenF("fadeOut");this.tweener("this",{offY:50},0.3,"boardfadeOut2");
this.tweener("board",{scX:1.1,scY:0.9},0.3,"boardSizeOut");break;case "boardSizeOut":this.tweener("board",{scX:0.95,scY:1.1},0.3,"boardSizeOut2");this.tweener("pauseRect",{alp:0},0.3);break;case "boardSizeOut":this.tweener("board",{scX:0,scY:0},0.3);break;case "boardfadeOut2":this.tweener("this",{offY:-500},0.3,"donefadeOut");break;case "donefadeOut":this.tweening=!1,this.runTask()}},runTask:function(){switch(this.task){case "unpause":this.main.gamePaused=!1;ig.game.showOverlay(["more-games"]);break;
case "replay":ig.game.director.jumpTo(LevelGame);break;case "home":this.main.gamePaused=!1,ig.game.director.jumpTo(LevelHome)}},update:function(){ig.global.wm||this.parent()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];this.buttons=[ig.game.getEntitiesByType(EntitySoundKnot)[0],ig.game.getEntitiesByType(EntityMusicKnot)[0],ig.game.getEntitiesByType(EntityOkayBut)[0],ig.game.getEntitiesByType(EntityCloseBut)[0]];for(var b=0;b<this.buttons.length;b++)this.buttons[b].menu=
this},renderText:function(){!0!=ig.game.played&&this.textDraw({ctx:ig.game.hidCtx,px:28,tx:_STRINGS.Game.Settings,x:560,y:70,stroke:!0,strokeColour:"#56612f",strokeLine:6,col:this.title.grad})},draw:function(){this.parent();ig.global.wm||(!0==this.main.gamePaused&&(this.ctx.fillStyle=this.pauseRect.colour,this.ctx.globalAlpha=this.pauseRect.alp,this.ctx.fillRect(0,0,ig.system.width,ig.system.height)),this.drawer({x:this.board.x,y:this.board.y+this.offY,cent:!0,scX:this.board.scX,scY:this.board.scY,
pic:this.settingIm}),this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:this.headerIm}),this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:this.titleIm}),this.drawer({x:this.board.x+this.music.lineX,y:this.board.y+this.music.lineY+this.offY,cent:!0,scX:this.board.scX*this.music.scX,
scY:this.board.scY*this.music.scY,pic:this.sliderIm}),this.textDraw({px:20,tx:_STRINGS.Game.Music,x:this.board.x+this.music.x,y:this.board.y+this.music.y+this.offY,col:this.title.grad}),this.drawer({x:this.board.x+this.sound.lineX,y:this.board.y+this.sound.lineY+this.offY,cent:!0,scX:this.board.scX*this.sound.scX,scY:this.board.scY*this.sound.scY,pic:this.sliderIm}),this.textDraw({px:20,tx:_STRINGS.Game.Sound,x:this.board.x+this.sound.x,y:this.board.y+this.sound.y+this.offY,col:this.title.grad}))}})});
ig.baked=!0;
ig.module("game.entities.plain-level").requires("game.entities.plain","game.entities.plain-menu-but","game.entities.plain-level-box").defines(function(){EntityPlainLevel=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:2030,size:{x:50,y:50},page:1,drawing:!1,task:"unpause",fadeRect:{alp:0,targAlp:0.5,colour:"black"},boardIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/board.png"),headerIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/header.png"),settingIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/setting.png"),
tittleIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/levels.png"),buttons:[],offY:-600,init:function(b,c,d){if(!ig.global.wm){this.parent(b,c,d);this.main=d.main;ig.game.spawnEntity(EntityLevelCloseBut,363,176,{main:this.main,menu:this});ig.game.spawnEntity(EntityLevelNextBut,379,272,{main:this.main,menu:this});ig.game.spawnEntity(EntityLevelPrevBut,70,272,{main:this.main,menu:this});this.board={x:ig.system.width/2,y:300,offX:0,offY:0,scX:0,scY:0};this.header={x:0,y:-115,offX:0,offY:0,
scX:1,scY:1};this.title={x:0,y:-5,offX:0,offY:0,scX:1,scY:1,grad1:-20,grad2:3};this.title.grad=this.ctx.createLinearGradient(0,this.title.grad1,0,this.title.grad2);this.title.grad.addColorStop(0,"#fbf513");this.title.grad.addColorStop(0.5,"#fcd60b");this.title.grad.addColorStop(1,"#feb203");for(c=b=0;3>c;c++)for(d=0;4>d;d++)ig.game.spawnEntity(EntityPlainLevelBox,ig.system.width/2-120+60*d,0.52*ig.system.height-120+55*c,{main:this,level:b}),b++;this.renderText();ig.ua.mobile&&(this.board.scX=1,this.board.scY=
1)}},tweenF:function(b){switch(b){case "rectFadeIn":this.tweening=!0;this.tweener("fadeRect",{alp:this.fadeRect.targAlp},0.3,"boardfadeIn");break;case "boardfadeIn":this.drawing=!0;this.tweener("this",{offY:50},0.3,"boardfadeIn2");ig.ua.mobile||this.tweener("board",{scX:0.9,scY:1.1},0.3,"boardSize2");break;case "boardfadeIn2":this.tweener("this",{offY:0},0.3,"donefadeIn");for(b=0;b<this.buttons.length;b++)this.buttons[b].tweenF("fadeIn");break;case "donefadeIn":this.tweening=!1;break;case "boardSize2":this.tweener("board",
{scX:1,scY:1},0.3);break;case "pauseFadeOut":this.tweening=!0;for(b=0;b<this.buttons.length;b++)this.buttons[b].tweenF("fadeOut");this.tweener("this",{offY:50},0.3,"boardfadeOut2");ig.ua.mobile||this.tweener("board",{scX:1.1,scY:0.9},0.3,"boardSizeOut");break;case "boardSizeOut":this.tweener("board",{scX:0.95,scY:1.1},0.3,"boardSizeOut2");break;case "boardSizeOut":this.tweener("board",{scX:0,scY:0},0.3);break;case "boardfadeOut2":this.tweener("this",{offY:-500},0.3,"donefadeOut");this.tweener("fadeRect",
{alp:0},0.3);break;case "donefadeOut":this.tweening=!1,this.runTask()}},runTask:function(){switch(this.task){case "unpause":this.main.gamePaused=!1;ig.game.showOverlay(["more-games"]);break;case "replay":ig.game.director.jumpTo(LevelGame);break;case "home":this.main.gamePaused=!1,ig.game.director.jumpTo(LevelHome)}},update:function(){ig.global.wm||this.parent()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},renderText:function(){},draw:function(){this.parent();!ig.global.wm&&
!1!=this.drawing&&(this.ctx.fillStyle=this.fadeRect.colour,this.ctx.globalAlpha=this.fadeRect.alp,this.ctx.fillRect(0,0,ig.system.width,ig.system.height),this.drawer({x:this.board.x,y:this.board.y+this.offY,cent:!0,scX:this.board.scX,scY:this.board.scY,pic:this.boardIm}),this.drawer({x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:this.headerIm}),this.drawer({x:this.board.x+this.header.x,y:this.board.y+
this.header.y+this.offY,cent:!0,scX:this.board.scX*this.header.scX,scY:this.board.scY*this.header.scY,pic:this.tittleIm}),this.ctxDrawer({pic:ig.game.hidEle,x:this.board.x+this.header.x,y:this.board.y+this.header.y+this.title.y+this.offY,sx:660,sy:50,sw:160,sh:40,cent:!0}))}})});ig.baked=!0;
ig.module("game.entities.plain-renderer").requires("game.entities.plain").defines(function(){EntityPlainRenderer=EntityPlain.extend({type:ig.Entity.TYPE.B,zIndex:3030,w:800,sc:2,startRendered:!1,burstFrame:0,iceFrame:0,off:{x:0,y:0},size:{x:50,y:50},sc:{x:1,y:1},star:{sc:1,alp:1,rot:0},iceStar:{sc:1,alp:1,rot:0},iceRing:{sc:1,alp:1,rot:0},iceBubble:{sc:0,alp:0},ring:{sc:0,alp:1,rot:0},blop:{sc:0.1,alp:1,rot:0},light:{sc:0,alp:1,rot:0,offX:0,offY:0},light2:{sc:0,alp:1,rot:0,offX:0,offY:0},light3:{sc:0,
alp:0.8,rot:0,offX:0,offY:0},burstIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/burst.png"),starIm1:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star1.png"),starIm2:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star2.png"),starIm3:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star3.png"),starIm4:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/star4.png"),lightIm1:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/light1.png"),
lightIm2:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/light2.png"),lightIm3:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/light3.png"),lightIm4:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/light4.png"),ringIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/ring.png"),scoreChoice:{normal:{where:0,tx:"10",sx:5,sy:205,sw:50,sh:50},plus:{where:1,tx:"+3",sx:65,sy:205,sw:50,sh:50},minus:{where:2,tx:"-3",sx:125,sy:205,sw:50,sh:50}},score:{sc:0,alp:0,
gradp1:-10,gradp2:0,offY:0,tx:"normal"},init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),this.main=d.main,this.score.grad=this.ctx.createLinearGradient(0,this.score.gradp1,0,this.score.gradp2),this.score.grad.addColorStop(0,"#fef1ba"),this.score.grad.addColorStop(1,"white"),this.scoreChoice.plus.grad=this.ctx.createLinearGradient(0,this.score.gradp1,0,this.score.gradp2+10),this.scoreChoice.plus.grad.addColorStop(0,"#e6e438"),this.scoreChoice.plus.grad.addColorStop(0.3,"#c2d73a"),this.scoreChoice.plus.grad.addColorStop(1,
"#6d8225"),this.scoreChoice.plus.strokeCol="#92551c",this.scoreChoice.minus.grad=this.ctx.createLinearGradient(0,this.score.gradp1,0,this.score.gradp2+10),this.scoreChoice.minus.grad.addColorStop(0,"#ff9c00"),this.scoreChoice.minus.grad.addColorStop(1,"#e80000"),this.scoreChoice.minus.strokeCol="#a02f2f",this.preRenderText(),this.renderTile())},renderTile:function(){!0!=ig.game.played&&!1==ig.game.burstRender.done&&(this.startRendered=!0,this.tweenF("preRenderBurst"),this.tweenF("preRenderIce"))},
tweenF:function(b,c){switch(b){case "preRenderBurst":this.tweener("score",{sc:1,alp:1},0.1,"scoreFadeOutRender",0.2);this.tweener("ring",{sc:0,alp:0.5},0.3);this.tweener("star",{sc:0.6,rot:280,alp:1},0.15,"lightFadeOut");this.tweener("blop",{sc:1.2},0.1,"blop2");this.tweener("light",{sc:2,offX:18,offY:-15,rot:280,alp:0.3},0.1,"light-2",0.1);this.tweener("light2",{sc:1.5,offX:-16,offY:15,rot:180,alp:0.3},0.15,"light2-2",0.2);this.tweener("light3",{sc:1,offX:-14,offY:-15,rot:130,alp:0.3},0.05,"light3-2",
0.3);break;case "scoreFadeOutRender":this.tweener("score",{alp:0},0.1,"doneRender",0.4);break;case "doneRender":!1==ig.game.burstRender.done&&(ig.game.burstRender.done=!0,ig.game.burstEndFrame=ig.game.burstRender.frames.length);break;case "light-2":this.tweener("light",{sc:0.3,offX:30,offY:5,rot:360,alp:0.1},0.1,"lightFadeOut");break;case "light2-2":this.tweener("light2",{sc:0.3,offX:-30,offY:35,rot:230,alp:0.5},0.1,"lightFadeOut");break;case "light3-2":this.tweener("light3",{sc:0.3,offX:-30,offY:5,
rot:280,alp:0.3},0.1,"lightFadeOut");break;case "lightFadeOut":this.tweener(c,{alp:0,sc:0},0.1);break;case "blop2":this.tweener("blop",{sc:0},0.02);break;case "preRenderIce":this.drawIce=!0;this.tweener("iceStar",{rot:360},0.6);this.tweener("iceStar",{sc:1.3},0.3,"iceStar");this.tweener("iceBubble",{sc:1.2,alp:1},0.2,"ice3",0.3);this.tweener("iceRing",{sc:1},0.1,"iceRing");break;case "iceRing":this.tweener("iceRing",{sc:0},0.1,"none",0.1);break;case "iceStar":this.tweener("iceStar",{sc:1},0.1);break;
case "ice3":this.tweener("iceBubble",{sc:1},0.1,"convertColour");break;case "convertColour":this.drawIce=!1,ig.game.iceEndFrame=ig.game.iceRender.frames.length}},update:function(){ig.global.wm||this.parent()},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},preRenderText:function(){!0!=ig.game.played&&(this.textDraw({ctx:ig.game.hidCtx,px:18,tx:this.scoreChoice.normal.tx,x:30,y:231,scX:1,scY:1,alp:1,stroke:!0,strokeColour:"#92551c",strokeAlp:0.5,col:"#92551c"}),this.textDraw({ctx:ig.game.hidCtx,
px:18,tx:this.scoreChoice.normal.tx,x:30,y:230,scX:1,scY:1,alp:1,stroke:!0,strokeColour:"#92551c",strokeAlp:0.5,col:this.score.grad}),this.textDraw({ctx:ig.game.hidCtx,px:18,tx:this.scoreChoice.plus.tx,x:90,y:231,scX:1,scY:1,alp:1,stroke:!0,strokeColour:this.scoreChoice.plus.strokeCol,strokeAlp:0.5,col:"#92551c"}),this.textDraw({ctx:ig.game.hidCtx,px:18,tx:this.scoreChoice.plus.tx,x:90,y:230,scX:1,scY:1,alp:1,stroke:!0,strokeColour:this.scoreChoice.plus.strokeCol,strokeAlp:0.5,col:this.scoreChoice.plus.grad}),
this.textDraw({ctx:ig.game.hidCtx,px:18,tx:this.scoreChoice.minus.tx,x:150,y:231,scX:1,scY:1,alp:1,stroke:!0,strokeColour:this.scoreChoice.minus.strokeCol,strokeAlp:0.5,col:this.scoreChoice.minus.grad}),this.textDraw({ctx:ig.game.hidCtx,px:18,tx:this.scoreChoice.minus.tx,x:150,y:230,scX:1,scY:1,alp:1,stroke:!0,strokeColour:this.scoreChoice.minus.strokeCol,strokeAlp:0.5,col:this.scoreChoice.minus.grad}),ig.game.burstTextRendered=!0)},drawIceStuff:function(){var b=Math.floor(this.iceFrame/16),c=this.iceFrame%
16,d=30+60*c,e=930+60*b;!0==this.drawIce&&(this.drawer({ctx:ig.game.hidCtx,x:d,y:e,pic:this.starIm3,scX:this.iceStar.sc,scY:this.iceStar.sc,cent:!0,alp:this.iceStar.alp,rot:this.iceStar.rot}),this.drawer({ctx:ig.game.hidCtx,x:d-1,y:e,pic:this.ringIm,scX:this.sc.x*this.iceRing.sc,scY:this.sc.y*this.iceRing.sc,cent:!0,alp:this.iceRing.alp}),this.iceFrame+=1);void 0==ig.game.iceRender.frames[this.iceFrame]&&ig.game.iceRender.frames.push({sx:60*c,sy:900+60*b})},renderBurstStuff:function(b,c){var d=Math.floor(this.burstFrame/
16),e=this.burstFrame%16,g=30+60*e,l=330+60*d+200*c;this.ctxDrawer({ctx:ig.game.hidCtx,pic:ig.game.hidEle,x:g,y:l,scX:this.score.sc,scY:this.score.sc,alp:this.score.alp,sx:this.scoreChoice[b].sx,sy:this.scoreChoice[b].sy,sw:this.scoreChoice[b].sw,sh:this.scoreChoice[b].sh,cent:!0});this.drawer({ctx:ig.game.hidCtx,x:g-1+this.off.x+this.light2.offX,y:l+this.off.y+this.light2.offY,pic:this.starIm3,scX:0.3*this.sc.x*this.light2.sc,scY:0.3*this.sc.y*this.light2.sc,cent:!0,alp:this.light2.alp,rot:this.light2.rot});
this.drawer({ctx:ig.game.hidCtx,x:g-1+this.off.x+this.light3.offX,y:l+this.off.y+this.light3.offY,pic:this.starIm3,scX:0.3*this.sc.x*this.light3.sc,scY:0.3*this.sc.y*this.light3.sc,cent:!0,alp:this.light2.alp,rot:this.light2.rot});this.drawer({ctx:ig.game.hidCtx,x:g-1+this.off.x+this.light.offX,y:l+this.off.y+this.light.offY,pic:this.starIm3,scX:0.3*this.sc.x*this.light.sc,scY:0.3*this.sc.y*this.light.sc,cent:!0,alp:this.light2.alp,rot:this.light2.rot});this.drawer({ctx:ig.game.hidCtx,x:g-1+this.off.x,
y:l+this.off.y,pic:this.starIm3,scX:this.sc.x*this.star.sc,scY:this.sc.y*this.star.sc,cent:!0,alp:this.star.alp,rot:this.star.rot});this.drawer({ctx:ig.game.hidCtx,x:g-1+this.off.x,y:l+this.off.y,pic:this.ringIm,scX:this.sc.x*this.ring.sc,scY:this.sc.y*this.ring.sc,cent:!0,alp:this.ring.alp});this.drawer({ctx:ig.game.hidCtx,x:g-1+this.off.x,y:l+this.off.y,pic:this.burstIm,scX:this.sc.x*this.blop.sc,scY:this.sc.y*this.blop.sc,cent:!0,alp:0.8});void 0==ig.game.burstRender.frames[this.burstFrame]&&ig.game.burstRender.frames.push({sx:60*
e,sy:300+60*d})},draw:function(){ig.global.wm||(this.parent(),this.drawIceStuff(),!0==this.startRendered&&!1==ig.game.burstRender.done&&(this.renderBurstStuff("normal",0),this.renderBurstStuff("plus",1),this.renderBurstStuff("minus",2),this.burstFrame+=1))}})});ig.baked=!0;
ig.module("game.entities.plain-home").requires("plugins.fullscreen","game.entities.plain","game.entities.plain-menu-but","game.entities.plain-home-but","game.entities.plain-setting","game.entities.plain-level","game.entities.plain-renderer").defines(function(){EntityPlainHome=EntityPlain.extend({gravityFactor:0,type:ig.Entity.TYPE.B,zIndex:1,h:600,w:800,sc:2,size:{x:50,y:50},gamePaused:!1,bgIm:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/home-bg.png"),fullscreenBtn:null,scX:1,scY:1.005,
init:function(b,c,d){ig.global.wm||(this.parent(b,c,d),ig.game.redraw=!0,this.spawner(),ig.game.getMusic(),ig.game.getSound())},spawner:function(){ig.game.spawnEntity(EntityPointer,800,800,{main:this});_SETTINGS.MoreGames.Enabled&&ig.game.spawnEntity(EntityButtonMoreGames,355,530,{main:this});ig.game.spawnEntity(EntityPlayBut,163,497,{main:this});ig.game.spawnEntity(EntitySettingBut,50,530,{main:this});ig.game.spawnEntity(EntityPlainSetting,0,0,{main:this});ig.game.spawnEntity(EntityPlainLevel,0,
0,{main:this});ig.game.spawnEntity(EntityPlainRenderer,0,0,{main:this});this.fullscreenBtn=ig.game.spawnEntity(ig.FullscreenButton,5,5,{enterImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/fullscreen.png"),exitImage:new ig.Image("../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/sprites/exit-fullscreen.png")})},tweenF:function(b){switch(b){case "fat":this.tweener("this",{scX:1.008,scY:1},1,"tall");break;case "tall":this.tweener("this",{scX:1,scY:1.008},1,"fat")}},update:function(){ig.global.wm||
(this.parent(),this.fullscreenBtn.update())},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0];!0==ig.game.showLvlMenu&&(this.gamePaused=!0,this.level=ig.game.getEntitiesByType(EntityPlainLevel)[0],this.level.tweenF("rectFadeIn"),ig.game.hideOverlay(["more-games"]));this.tweenF("fat")},draw:function(){this.parent();ig.global.wm||(this.fullscreenBtn.draw(0,0),ig.ua.mobile?this.bgIm.draw(0,0):this.drawer({x:ig.system.width/2,y:ig.system.height/2,scX:this.scX,scY:this.scY,pic:this.bgIm,
cent:!0}))}})});ig.baked=!0;ig.module("game.levels.home").requires("impact.image","game.entities.plain-home").defines(function(){LevelHome={entities:[{type:"EntityPlainHome",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.jukebox","plugins.director","plugins.impact-storage","plugins.fullscreen","plugins.handlers.dom-handler","plugins.handlers.size-handler","game.entities.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.levels.opening","game.levels.game","game.levels.home").defines(function(){this.MJSSOB;
MyGame=ig.Game.extend({lvl:0,levelStat:[],showLvlMenu:!1,storagable:!1,levelKey:"mjs-game-teddy-bubble-v1.0.0-level",soundKey:"mjs-game-teddy-bubble-v1.0.0-sound",musicKey:"mjs-game-teddy-bubble-v1.0.0-music",played:!1,burstRender:{done:!1,frames:[]},iceRender:{done:!1,frames:[]},burstTextRendered:!1,burstEndFrame:48,iceEndFrame:48,soundVolume:1,musicVolume:1,redraw:!0,startPop:!1,init:function(){this.hidEle=document.createElement("canvas");this.hidCtx=this.hidEle.getContext("2d");this.hidEle.width=
1200;this.hidEle.height=1600;this.bgEle=document.getElementById("bgcanvas");this.bgCtx=this.bgEle.getContext("2d");this.setupMarketJsGameCenter();this.setupControls();this.setupLocalStorage();this.removeLoadingWheel();this.injectMobileLink();this.setupURLParameters();this.finalize();this.storagable=this.checkStorage();for(var b=0;24>b;b++)this.levelStat.push({star:0,highScore:0,unlocked:0==b?!0:!1});!0==this.storagable&&(void 0==localStorage[this.levelKey]?ig.game.storage.set(this.levelKey,{levels:this.levelStat}):
this.levelStat=ig.game.storage.get(this.levelKey).levels);!0==this.storagable&&ig.game.storage.set(this.levelKey,{levels:this.levelStat})},hide:function(){var b="more-games";this.divLayerName&&(b=this.divLayerName);document.getElementById(b).style.visibility="hidden";$("#"+b).hide()},show:function(){var b="more-games";this.divLayerName&&(b=this.divLayerName);document.getElementById(b).style.visibility="visible";$("#"+b).show()},setSound:function(b){this.soundVolume=b;Howler.volume(this.soundVolume);
!0==this.storagable&&ig.game.storage.set(this.soundKey,this.soundVolume)},getMusic:function(){var b=this.musicVolume;!0==this.storagable&&void 0!=ig.game.storage.get(this.musicKey)&&(this.musicVolume=ig.game.storage.get(this.musicKey));ig.ua.iOS&&(0==b&&0<this.musicVolume&&ig.soundHandler.playBackgroundMusic(),0==this.musicVolume&&ig.soundHandler.stopBackgroundMusic());ig.ua.mobile?ig.soundHandler.jukebox.player.setVolume(this.musicVolume):ig.music.volume=this.musicVolume},getSound:function(){!0==
this.storagable&&void 0!=ig.game.storage.get(this.soundKey)&&(this.soundVolume=ig.game.storage.get(this.soundKey));Howler.volume(this.soundVolume)},setMusic:function(b){ig.ua.iOS&&(0==this.musicVolume&&0<b&&ig.soundHandler.playBackgroundMusic(),0==b&&ig.soundHandler.stopBackgroundMusic());this.musicVolume=b;ig.ua.mobile?ig.soundHandler.jukebox.player.setVolume(this.musicVolume):ig.music.volume=this.musicVolume;!0==this.storagable&&ig.game.storage.set(this.musicKey,this.musicVolume)},setScore:function(){!0==
this.storagable&&ig.game.storage.set(this.levelKey,{levels:this.levelStat})},getScore:function(){!0==this.storagable&&void 0!=localStorage[this.levelKey]&&(this.levelStat=ig.game.storage.get(this.levelKey).levels)},checkStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),"localStorage"in window&&null!==window.localStorage}catch(b){return!1}},setupMarketJsGameCenter:function(){_SETTINGS&&(_SETTINGS.MarketJSGameCenter?(_SETTINGS.MarketJSGameCenter.Activator.Enabled&&
_SETTINGS.MarketJSGameCenter.Activator.Position&&(console.log("MarketJSGameCenter activator settings present ...."),$(".gamecenter-activator").css("top",_SETTINGS.MarketJSGameCenter.Activator.Position.Top),$(".gamecenter-activator").css("left",_SETTINGS.MarketJSGameCenter.Activator.Position.Left)),$(".gamecenter-activator").show()):console.log("MarketJSGameCenter settings not defined in game settings"))},initSfx:function(){},finalize:function(){ig.ua.mobile?ig.game.showOverlay(["play"]):ig.game.startGame();
sizeHandler()},injectMobileLink:function(){$("#play").attr("onclick","ig.game.pressPlay();")},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(b){console.log(b)}},showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},setupLocalStorage:function(){this.storage=new ig.Storage},startGame:function(){this.resetPlayerStats();this.director=new ig.Director(this,[LevelOpening,LevelHome,LevelGame,LevelHome]);if(_SETTINGS.Branding.Splash.Enabled)try{this.branding=
new ig.BrandingSplash}catch(b){console.log(b),console.log("Loading original levels ..."),this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel);this.spawnEntity(EntityPointerSelector,50,50);ig.soundHandler.playBackgroundMusic();this.getSound();this.getMusic()},fpsCount:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()?null!=this.fpsCounter?this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,
this.fpsCounter=0,this.fpsTimer.reset())},endGame:function(){console.log("End game");ig.soundHandler.stopBackgroundMusic()},resetPlayerStats:function(){ig.log("resetting player stats ...");this.playerStats={id:this.playerStats?this.playerStats.id:null}},setupControls:function(){ig.input.unbindAll();ig.input.initMouse();ig.input.bind(ig.KEY.MOUSE1,"click");ig.input.bind(ig.KEY.B,"toggle")},setupURLParameters:function(){this.setupURLParameters=new ig.UrlParameters},pressPlay:function(){this.hideOverlay(["play"]);
this.startGame()},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);console.log("Game Paused");$("#pause").show()},resumeGame:function(){ig.system.startRunLoop.call(ig.system);console.log("Game Resumed");$("#pause").hide()},showOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).show(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility="visible")},hideOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).hide(),document.getElementById(b[i])&&
(document.getElementById(b[i]).style.visibility="hidden")},update:function(){if(this.paused)for(var b=0;b<this.entities.length;b++)this.entities[b].ignorePause&&this.entities[b].update();else this.parent(),ig.ua.mobile&&ig.soundHandler&&ig.soundHandler.forceLoopBGM()},dctf:function(){this.COPYRIGHT},draw:function(){if((this.stage=ig.game.getEntitiesByType(EntityPlainStage)[0])&&1<this.stage.tweens.length)this.redraw=!0;this.parent();this.stage&&0==this.stage.tweens.length&&(ig.game.redraw=!1);this.dctf()},
drawDebug:function(){if(!ig.global.wm&&(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=0.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px Arial",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(b){this.debug?
(50>this.debug.length||this.debug.splice(0,1),this.debug.push(b),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(b));console.log(b)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=this.viewDebug?!1:!0)}});var b=getQueryVariable("device");
if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...");if(b=getQueryVariable("force-rotate"))switch(b){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),
window.orientation=0}ig.domHandler=null;ig.domHandler=new ig.DomHandler;ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.sizeHandler=new ig.SizeHandler(ig.domHandler);ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,mobileWidth,mobileHeight,1,ig.SplashLoader)):ig.main("#canvas",MyGame,60,desktopWidth,desktopHeight,1,ig.SplashLoader);ig.ua.mobile&&orientationHandler();sizeHandler();fixSamsungHandler();this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.MJSEOB});
</script> 
<!-- Abstract --> 
</head>
<body onload="setTimeout(function(){window.scrollTo(0,1)},1);">
<!--body-->
	<div id="pause" onclick="ig.game.resumeGame();"></div> 
	<div id="ajaxbar"> 
		<div id="game"><canvas id="canvas"></canvas><canvas id="bgcanvas" width=480 height=640></canvas></canvas></canvas></div>
		<div id="orientate"><img src="../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/orientate/landscape.png" /></div>
		<div id="play" class="play" onclick=""><img src="../cdn.marketjs.net/games/teddy-bubble-rescue/localization/en/media/graphics/splash/mobile/cover-start.png" /></div>
		<!--<img id="scrollDown" width="220" height="277"></img>-->
	</div>
	<!-- <div id="tempdiv"><br><br><br></div> -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117180225-25"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117180225-25');

_SETTINGS.MoreGames.NewWindow=false;

</script>
</body>

<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=6210248042872832&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:03:12 GMT -->
</html>
