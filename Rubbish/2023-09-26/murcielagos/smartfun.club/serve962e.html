<!DOCTYPE html>
<html>


<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=4967995156725760&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:12:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
	<title>Spiral Stairs</title>
	<link rel="icon" type="image/x-icon" href="http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/misc/favicon.ico?v=2" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<!-- Use this metatag when Apple fixes their IOS 9
	<meta name="viewport" content="width=device-width,height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, minimal-ui"/>
	-->

	<!--Temporary fix for IOS 9-->
	<meta name="viewport" content="initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no, minimal-ui" />

	<meta name="apple-mobile-web-app-capable" content="yes" />


	<script type="text/javascript" src="../whitelabel-cdn.marketjs.com/jquery.min.js"></script>
<script type="text/javascript" src="../cdn.marketjs.net/games/spiral-stairs/abstracted-files/abstracted-files.js"></script> 
	<style>html,body{margin:0;padding:0;position:relative;font-family:"Arial";width:100%;background-color:#000}@font-face{font-family:'troika';src:url('http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/fonts/troika.woff') format('woff'),url('http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/fonts/troika.ttf')}#webgl{background-color:transparent;background:transparent;position:absolute;left:0;top:0;width:100%;height:100%}#pause{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:99999;display:none;font-size:2em;text-align:center;background:rgba(0,0,0,0.2);color:#fff}#game{background-color:transparent;background:transparent;position:absolute;left:0;top:0}#ajaxbar{background:url('../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/loading/ajax-loader.gif') center no-repeat}#canvas{background-color:transparent;position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1);filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='sample_600x600.html',sizingMethod='scale');background:none !important}#webglcanvas{background-color:transparent;position:absolute;left:0;top:0;width:100%;height:100%;-ms-interpolation-mode:nearest-neighbor;-webkit-transform:scale3d(1,1,1)}#orientate{position:absolute;float:left;width:100%;height:100%;top:0;left:0;z-index:10002;display:none}#orientate img{position:absolute;float:left;width:100%;height:100%}.play{position:absolute;float:left;width:100%;height:100%;z-index:1000;background-color:#fff;left:0;top:0;display:none}.play img{position:absolute;float:left;width:100%;height:100%;z-index:1000;left:0;top:0}#nohtml5{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1002;visibility:hidden}#nohtml5 img{position:absolute;width:100%;height:100%}#nohtml5-bubble{position:absolute;bottom:20px;left:50px;width:380px;height:100px;z-index:1002;color:#000;background:rgba(255,255,255,0.75);-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px}#nohtml5-text{padding:10px}.horizontal-seperator{height:10px;width:100%}.ig_debug{position:fixed;left:0;bottom:0;width:100%;background-color:#000;border-top:2px solid #f57401;font-size:12px;color:#fff;z-index:1000;-webkit-user-select:none;display:none}.ig_debug_panel_menu{height:28px;background:#222;background:-webkit-gradient(linear,left bottom,left top,color-stop(0,#000),color-stop(1,#333));background:-moz-linear-gradient(center bottom,#000 0,#333 100%);background:-o-linear-gradient(#333,#000)}.ig_debug_panel_menu div{float:left;height:22px;padding:6px 8px 0 8px;border-right:1px solid #333}.ig_debug_panel_menu .ig_debug_head{font-weight:bold;color:#888}.ig_debug_menu_item:hover{cursor:pointer;background-color:#fff;color:#000}.ig_debug_menu_item.active,.ig_debug_menu_item.active:hover{background-color:#000;color:#fff}.ig_debug_stats{position:absolute;right:0;top:0;float:right;color:#888;border-left:1px solid #333;text-align:right}.ig_debug_stats span{width:3em;display:inline-block;color:#fff !important;margin-right:.2em;margin-left:.3em;font-family:bitstream vera sans mono,courier new;white-space:nowrap}.ig_debug_panel{height:152px;overflow:auto;position:relative}.ig_debug_panel canvas{border-bottom:1px solid #444}.ig_debug_panel .ig_debug_panel{padding:8px;height:auto;float:left;background-color:#000;border-right:2px solid #222}.ig_debug_option{padding:2px 0 2px 8px;cursor:pointer}.ig_debug_option:first-child{margin-top:8px}.ig_debug_option:hover{background-color:#111}.ig_debug_graph_mark{position:absolute;color:#888;left:4px;font-size:10px;margin-top:-12px}.ig_debug_legend{color:#ccc}.ig_debug_label_mark{display:inline-block;width:10px;height:10px;margin-right:4px;-webkit-transition:.1s linear;-moz-transition:.1s linear}.ig_debug_legend_color{display:inline-block;width:6px;height:10px;margin-right:4px;margin-left:16px}.ig_debug_legend_number{width:3em;display:inline-block;text-align:right;font-family:bitstream vera sans mono,courier new;color:#fff;margin-right:.2em}.ig_debug_map_container{position:relative;overflow:hidden;border:1px solid #888}.ig_debug_map_container canvas{position:absolute}.ig_debug_map_screen{position:absolute;border:1px solid #f0f}</style>
	<!-- APICode -->
<!-- In Game Preroll Structure Template here --><div id='AdInGamePreroll'><div id='AdInGamePreroll-Box'><div id='AdInGamePreroll-Box-Header'></div><a id='AdInGamePreroll-Box-Close' onclick='AdInGamePreroll.Close();'></a><div id='AdInGamePreroll-Box-Body'><center></center></div><div id='AdInGamePreroll-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div><!-- In Game Endgame Structure Template here --><div id='AdInGameEndgame'><div id='AdInGameEndgame-Box'><div id='AdInGameEndgame-Box-Header'></div><a id='AdInGameEndgame-Box-Close' onclick='AdInGameEndgame.Close();'></a><div id='AdInGameEndgame-Box-Body'><center></center></div><div id='AdInGameEndgame-Box-Footer'></div></div></div>
<script type='text/javascript'>// Setup
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

var mjs_game_id = getQueryVariable('game_id')
var mjs_portal_id = getQueryVariable('portal_id')
var mjs_branding_id = getQueryVariable('branding_id')
var mjs_ad_id = getQueryVariable('ad_id')

console.log('mjs_game_id:',mjs_game_id)
console.log('mjs_portal_id:',mjs_portal_id)
console.log('mjs_branding_id:',mjs_branding_id)
console.log('mjs_ad_id:',mjs_ad_id)

//Base structure in script form
var css = "";
css+= "html,body,#sticky-container{margin:0;height:100%;color:#000;background:#e3f2fc;font-size:1.2em;font-family:Helvetica,Arial,sans-serif}#sticky-container{height:auto;min-height:100%}#sticky-footer{clear:both;position:relative;z-index:10}h1{padding:0;margin:0}h2{font-size:1.2em;padding:0;margin:0}h3{font-size:.8em;padding:0;margin:0}a{color:#128ccb}a.hover{color:#128ccb}.button{font-size:1em;font-weight:normal;-moz-border-radius:.5em;-webkit-border-radius:.5em;border-radius:.5em;padding:.5em 1em;text-decoration:none;color:#fff;background-color:#fbd305;display:inline-block}.button:hover{background-color:#fbd305;color:#fff;text-decoration:none !important}.button:active{position:relative;top:.05em}.button-large{font-size:2em}input[type=submit]{border:0}.valid{font-size:.8em;color:#1bdc24}.error{font-size:.8em;color:#ea1313;margin-top:.2em;margin-bottom:.5em;display:block}.tip{color:#ccc;font-size:.8em}.borderless{border:none !important}.pull-right{text-align:right}.padding-side{padding:0 1em 0 1em}.padding-side-small{padding:0 .5em 0 .5em}.padding-side-medium{padding:0 1.5em 0 1.5em}.container{clear:both;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-left:0 solid #ccc;border-right:0 solid #ccc;min-height:100%}.container-shadow{-webkit-box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc;box-shadow:5px 0 5px -2px #ccc,-5px 0 5px -2px #ccc}.overlay-container-basic{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10004;display:none}.overlay-container{background:rgba(0,0,0,0.4);width:100%;height:100%;min-height:100%;position:fixed;top:0;left:0;z-index:10005;display:none}.overlay-container img{position:fixed;top:50%;left:50%}.horizontal-seperator{height:1em;width:100%}.horizontal-seperator-small{height:.5em;width:100%}.horizontal-seperator-line{width:100%;border-bottom:1px solid #ccc;margin-top:.2em;margin-bottom:.2em}.section{clear:both;margin:0}.inner_section{clear:both;margin:0}.col{display:block;float:left;margin:0}.col:first-child{margin-left:0}.group:before,.group:after{content:'';display:table}.group:after{clear:both}.group{zoom:1}.span_4_of_4{width:100%}.span_3_of_4{width:74.6%}.span_2_of_4{width:49.2%}.span_1_of_4{width:23.8%}.span_3_of_3{width:100%}.span_2_of_3{width:76.1%}.span_1_of_3{width:20.2%}.span_10_of_10{width:100%}.span_9_of_10{width:89.84%}.span_8_of_10{width:79.68%}.span_7_of_10{width:69.52%}.span_6_of_10{width:59.36%}.span_5_of_10{width:49.2%}.span_4_of_10{width:39.04%}.span_3_of_10{width:28.88%}.span_2_of_10{width:18.72%}.span_1_of_10{width:8.56%}.span_8_of_8{width:100%}.span_7_of_8{width:87.3%}.span_6_of_8{width:74.6%}.span_5_of_8{width:61.9%}.span_4_of_8{width:49.2%}.span_3_of_8{width:36.5%}.span_2_of_8{width:23.8%}.span_1_of_8{width:11.1%}.span_6_of_6{width:100%}.span_5_of_6{width:83.06%}.span_4_of_6{width:66.13%}.span_3_of_6{width:49.2%}.span_2_of_6{width:33.00%}.span_1_of_6{width:16.00%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:32.26%}.overlay_span_side{width:32.26%}@media only screen and (max-width:480px){.col{margin:1% 0 1% 0}.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_4_of_4{width:100%}.span_3_of_4{width:100%}.span_2_of_4{width:100%}.span_1_of_4{width:100%}.span_2_of_6{width:100%}.span_1_of_6{width:33%}.span_10_of_10{width:100%}.span_9_of_10{width:100%}.span_8_of_10{width:100%}.span_7_of_10{width:100%}.span_6_of_10{width:100%}.span_5_of_10{width:100%}.span_4_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_10{width:100%}.span_1_of_10{width:100%}.overlay_span_middle{width:100%}.overlay_span_side{width:100%}.container{margin:0}.navigation{line-height:1.8em;font-size:.8em}.css_btn_class{font-size:2em}.right_bar_module_span_2_of_6{width:100%}.box-action{margin:.2em}.featured-short-description{display:none}.box-more-games{height:140px !important}}@media only screen and (min-width:480px) and (max-width:768px){.span_2_of_3{width:80%}.span_1_of_3{width:20%}.span_6_of_10{width:50.0%}.span_4_of_10{width:50.0%}.span_7_of_10{width:100%}.span_2_of_10{width:100%}.span_3_of_10{width:100%}.span_2_of_6{width:50%}.navigation{line-height:2em}.right_bar_module_span_2_of_6{width:50%}.span_1_of_4{width:100%}.span_3_of_4{width:100%}.overlay_span_middle{width:50%}.overlay_span_side{width:25%}}@media only screen and (min-width :768px) and (max-width:1152px){.tablet-left{width:60%}.tablet-right{width:40%}.span_3_of_4{width:65%}.span_1_of_4{width:33%}.span_2_of_6{width:50.00%}.span_1_of_6{width:19.7%}.right_bar_module_span_2_of_6{width:100%}.overlay_span_middle{width:45%}.overlay_span_side{width:27.5%}.container{margin:0}.navigation{line-height:1.8em}.box-embed{width:92%}}@media only screen and (max-width:1165px){.AdPortalLeaderboard{display:none}}@media only screen and (max-width:1280px){.container{margin:0}.AdPortalSkyscraperLeft{display:none}.AdPortalSkyscraperRight{display:none}}@media only screen and (min-device-width :320px) and (max-device-width :568px) and (orientation :landscape){.span_6_of_10{width:60.0%}.span_4_of_10{width:40.0%}}";
css+= "/*BRANDING_IN_GAME_MENUBAR_THEME*/"; //can't fit in one line. Do we minify and remove all spaces?
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_LOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_USER_PANEL_UNLOGGED_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGIN_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_REGISTER_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LOGOUT_THEME*/";
css+= "/*BRANDING_IN_GAME_MENUBAR_LEADERBOARD_THEME*/";
css+= "/*BRANDING_CHANGE_USERNAME_THEME*/";
css+= "#AdInGamePreroll{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGamePreroll-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGamePreroll-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGamePreroll-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGamePreroll-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGamePreroll-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";
css+= "#AdInGameEndgame{position:absolute;float:left;min-width:320px;z-index:10000;left:0;top:0;display:none;background:rgba(0,0,0,0.7);-webkit-transition:all .6s ease;-moz-transition:all .6s ease;-o-transition:all .6s ease}#AdInGameEndgame-Box{z-index:10000;position:absolute;width:302px;height:250px}#AdInGameEndgame-Box-Body{z-index:10000;position:relative;background:transparent}#AdInGameEndgame-Box-Footer{z-index:10000;position:relative;font-size:11px;height:20px;color:#fff;background:transparent}#AdInGameEndgame-Box-Header{z-index:10000;position:relative;margin-top:-2px;font-size:11px;height:20px;text-align:right;color:#fff;background:transparent}#AdInGameEndgame-Box-Close{position:absolute;z-index:10005;background-image:url('static/test/images/ad/close-button.png');background-repeat:no-repeat;width:22px;height:22px;top:-4px;margin-right:-1px;display:none}";

var html = "";
html+= "<!--BRANDING_IN_GAME_MENUBAR_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGIN_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_REGISTER_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LOGOUT_STRUCTURE-->";
html+= "<!--BRANDING_IN_GAME_MENUBAR_LEADERBOARD_STRUCTURE-->";
html+= "<!--BRANDING_CHANGE_USERNAME_STRUCTURE-->";
html+= "<!--AD_IN_GAME_PREROLL_STRUCTURE-->";
html+= "<!--AD_IN_GAME_ENDGAME_STRUCTURE-->";

$('head').append("<style>"+css+"</style>");
$('html').append(html);

//Base script contains all that important juice (language.jsvalidate,forms,validate extra,etc)

var _CONFIG={LOGGING:!0};var Language=new function(){this.en={Validation:{urlshort:"Please enter a valid url: Eg: mysite.com",alphanumeric:"Letters, numbers, and dashes only please",lettersonly:"Letters only please",letterswithbasicpunc:"Letters or punctuation only please",letterswithwhitespace:"Letters with white spaces only please",alphanumericnodash:"Letters and numbers only please",alphanumericwhitespace:"Letters and numbers only please",nowhitespace:"No white space please",ziprange:"Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx",
integer:"A positive or negative non-decimal number please",vinUS:"The specified vehicle identification number (VIN) is invalid",dateITA:"Please enter a correct date","user-password-retype":"Please type in the same password",maxWords:"Please enter {0} words or less",minWords:"Please enter at least {0} words",rangeWords:"Please enter between {0} and {1} words",valueNotEquals:"Value must not equal arg",required:"This field is required",remote:"Please fix this field",email:"Valid email address required",
url:"Please enter a valid URL",date:"Please enter a valid date",dateISO:"Please enter a valid date (ISO)",number:"Please enter a valid number",digits:"Please enter only digits",creditcard:"Please enter a valid credit card number",equalTo:"Please enter the same value again",accept:"Please enter a value with a valid extension",maxlength:"Please enter no more than {0} characters",minlength:"Please enter at least {0} characters",rangelength:"Please enter a value between {0} and {1} characters long",range:"Please enter a value between {0} and {1}",
max:"Please enter a value less than or equal to {0}",min:"Please enter a value greater than or equal to {0}"}};this.zh={}},Localization=Language.en;(function(b){b.extend(b.fn,{validate:function(a){if(this.length){var c=b.data(this[0],"validator");if(c)return c;this.attr("novalidate","novalidate");c=new b.validator(a,this[0]);b.data(this[0],"validator",c);c.settings.onsubmit&&(a=this.find("input, button"),a.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&a.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(a){function f(){if(c.settings.submitHandler){if(c.submitButton)var a=b("<input type='hidden'/>").attr("name",
c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&a.remove();return!1}return!0}c.settings.debug&&a.preventDefault();if(c.cancelSubmit)return c.cancelSubmit=!1,f();if(c.form())return c.pendingRequest?(c.formSubmitted=!0,!1):f();c.focusInvalid();return!1}));return c}a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(b(this[0]).is("form"))return this.validate().form();
var a=!0,c=b(this[0].form).validate();this.each(function(){a&=c.element(this)});return a},removeAttrs:function(a){var c={},d=this;b.each(a.split(/\s/),function(a,b){c[b]=d.attr(b);d.removeAttr(b)});return c},rules:function(a,c){var d=this[0];if(a){var f=b.data(d.form,"validator").settings,g=f.rules,r=b.validator.staticRules(d);switch(a){case "add":b.extend(r,b.validator.normalizeRule(c));g[d.name]=r;c.messages&&(f.messages[d.name]=b.extend(f.messages[d.name],c.messages));break;case "remove":if(!c)return delete g[d.name],
r;var u={};b.each(c.split(/\s/),function(a,b){u[b]=r[b];delete r[b]});return u}}d=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(d),b.validator.classRules(d),b.validator.attributeRules(d),b.validator.staticRules(d)),d);d.required&&(f=d.required,delete d.required,d=b.extend({required:f},d));return d}});b.extend(b.expr[":"],{blank:function(a){return!b.trim(""+a.value)},filled:function(a){return!!b.trim(""+a.value)},unchecked:function(a){return!a.checked}});b.validator=function(a,c){this.settings=
b.extend(!0,{},b.validator.defaults,a);this.currentForm=c;this.init()};b.validator.format=function(a,c){if(1==arguments.length)return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)};2<arguments.length&&c.constructor!=Array&&(c=b.makeArray(arguments).slice(1));c.constructor!=Array&&(c=[c]);b.each(c,function(b,c){a=a.replace(RegExp("\\{"+b+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",
errorElement:"label",focusInvalid:!0,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))&&this.element(a)},onkeyup:function(a){(a.name in
this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).addClass(c).removeClass(d):b(a).addClass(c).removeClass(d)},unhighlight:function(a,c,d){"radio"===a.type?this.findByName(a.name).removeClass(c).addClass(d):b(a).removeClass(c).addClass(d)}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:Localization.Validation.required,
remote:Localization.Validation.remote,email:Localization.Validation.email,url:Localization.Validation.url,date:Localization.Validation.date,dateISO:Localization.Validation.dateISO,number:Localization.Validation.number,digits:Localization.Validation.digits,creditcard:Localization.Validation.creditcard,equalTo:Localization.Validation.equalTo,accept:Localization.Validation.accept,maxlength:b.validator.format(Localization.Validation.maxlength),minlength:b.validator.format(Localization.Validation.minlength),
rangelength:b.validator.format(Localization.Validation.rangelength),range:b.validator.format(Localization.Validation.range),max:b.validator.format(Localization.Validation.max),min:b.validator.format(Localization.Validation.min)},autoCreateRanges:!1,prototype:{init:function(){function a(a){var c=b.data(this[0].form,"validator"),d="on"+a.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],a)}this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&
this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};b.each(this.settings.groups,function(a,d){b.each(d.split(/\s/),function(b,d){c[d]=a})});var d=this.settings.rules;b.each(d,function(a,c){d[a]=b.validator.normalizeRule(c)});b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ",
"focusin focusout keyup",a).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",a);this.settings.invalidHandler&&b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);this.valid()||b(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=
this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(a){this.lastElement=a=this.validationTargetFor(this.clean(a));this.prepareElement(a);this.currentElements=b(a);var c=this.check(a);c?delete this.invalid[a.name]:this.invalid[a.name]=!0;this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers));this.showErrors();return c},showErrors:function(a){if(a){b.extend(this.errorMap,a);this.errorList=[];for(var c in a)this.errorList.push({message:a[c],element:this.findByName(c)[0]});
this.successList=b.grep(this.successList,function(b){return!(b.name in a)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){b.fn.resetForm&&b(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b=0,d;for(d in a)b++;
return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}},findLastActive:function(){var a=this.lastActive;return a&&1==b.grep(this.errorList,function(b){return b.element.name==a.name}).length&&a},elements:function(){var a=
this,c={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&a.settings.debug&&window.console&&console.error("%o has no name assigned",this);return this.name in c||!a.objectLength(b(this).rules())?!1:c[this.name]=!0})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=
[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(a){a=this.validationTargetFor(this.clean(a));var c=b(a).rules(),d=!1,f;for(f in c){var g={method:f,parameters:c[f]};try{var r=b.validator.methods[f].call(this,a.value.replace(/\r/g,""),a,g.parameters);if("dependency-mismatch"==r)d=!0;else{d=!1;if("pending"==
r){this.toHide=this.toHide.not(this.errorsFor(a));return}if(!r)return this.formatAndAdd(a,g),!1}}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+a.id+", check the '"+g.method+"' method",u),u;}}if(!d)return this.objectLength(c)&&this.successList.push(a),!0},customMetaMessage:function(a,c){if(b.metadata){var d=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,
b){var d=this.settings.messages[a];return d&&(d.constructor==String?d:d[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(a,c){return this.findDefined(this.customMessage(a.name,c),this.customMetaMessage(a,c),!this.settings.ignoreTitle&&a.title||void 0,b.validator.messages[c],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(a,b){var d=this.defaultMessage(a,b.method),f=/\$?\{(\d+)\}/g;
"function"==typeof d?d=d.call(this,b.parameters,a):f.test(d)&&(d=jQuery.format(d.replace(f,"{$1}"),b.parameters));this.errorList.push({message:d,element:a});this.errorMap[a.name]=d;this.submitted[a.name]=d},addWrapper:function(a){this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper)));return a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);
this.showLabel(b.element,b.message)}this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight){a=0;for(b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass)}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},
invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(a,c){var d=this.errorsFor(a);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(a),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||
(this.settings.errorPlacement?this.settings.errorPlacement(d,b(a)):d.insertAfter(a)));!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d));this.toShow=this.toShow.add(d)},errorsFor:function(a){var c=this.idOrName(a);return this.errors().filter(function(){return b(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){this.checkable(a)&&
(a=this.findByName(a.name).not(this.settings.ignore)[0]);return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var c=this.currentForm;return b(document.getElementsByName(a)).map(function(b,f){return f.form==c&&f.name==a&&f||null})},getLength:function(a,c){switch(c.nodeName.toLowerCase()){case "select":return b("option:selected",c).length;case "input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return a.length},depend:function(a,
b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(a,c){return!!b(a,c.form).length},"function":function(a,b){return a(b)}},optional:function(a){return!b.validator.methods.required.call(this,b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(a,c){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=
0);delete this.pending[a.name];c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(b(this.currentForm).submit(),this.formSubmitted=!1):!c&&(0==this.pendingRequest&&this.formSubmitted)&&(b(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:!0,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},
dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(a,c){a.constructor==String?this.classRuleSettings[a]=c:b.extend(this.classRuleSettings,a)},classRules:function(a){var c={};(a=b(a).attr("class"))&&b.each(a.split(" "),function(){this in b.validator.classRuleSettings&&b.extend(c,b.validator.classRuleSettings[this])});return c},attributeRules:function(a){var c={};a=b(a);for(var d in b.validator.methods){var f;
(f="required"===d&&"function"===typeof b.fn.prop?a.prop(d):a.attr(d))?c[d]=f:a[0].getAttribute("type")===d&&(c[d]=!0)}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(a){if(!b.metadata)return{};var c=b.data(a.form,"validator").settings.meta;return c?b(a).metadata()[c]:b(a).metadata()},staticRules:function(a){var c={},d=b.data(a.form,"validator");d.settings.rules&&(c=b.validator.normalizeRule(d.settings.rules[a.name])||{});return c},normalizeRules:function(a,
c){b.each(a,function(d,f){if(!1===f)delete a[d];else if(f.param||f.depends){var g=!0;switch(typeof f.depends){case "string":g=!!b(f.depends,c.form).length;break;case "function":g=f.depends.call(c,c)}g?a[d]=void 0!==f.param?f.param:!0:delete a[d]}});b.each(a,function(d,f){a[d]=b.isFunction(f)?f(c):f});b.each(["minlength","maxlength","min","max"],function(){a[this]&&(a[this]=Number(a[this]))});b.each(["rangelength","range"],function(){a[this]&&(a[this]=[Number(a[this][0]),Number(a[this][1])])});b.validator.autoCreateRanges&&
(a.min&&a.max&&(a.range=[a.min,a.max],delete a.min,delete a.max),a.minlength&&a.maxlength&&(a.rangelength=[a.minlength,a.maxlength],delete a.minlength,delete a.maxlength));a.messages&&delete a.messages;return a},normalizeRule:function(a){if("string"==typeof a){var c={};b.each(a.split(/\s/),function(){c[this]=!0});a=c}return a},addMethod:function(a,c,d){b.validator.methods[a]=c;b.validator.messages[a]=void 0!=d?d:b.validator.messages[a];3>c.length&&b.validator.addClassRules(a,b.validator.normalizeRule(a))},
methods:{required:function(a,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case "select":return(a=b(c).val())&&0<a.length;case "input":if(this.checkable(c))return 0<this.getLength(a,c);default:return 0<b.trim(a).length}},remote:function(a,c,d){if(this.optional(c))return"dependency-mismatch";var f=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});f.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=
f.message;d="string"==typeof d&&{url:d}||d;if(this.pending[c.name])return"pending";if(f.old===a)return f.valid;f.old=a;var g=this;this.startRequest(c);var r={};r[c.name]=a;b.ajax(b.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:r,success:function(d){g.settings.messages[c.name].remote=f.originalMessage;var n=!0===d;if(n){var s=g.formSubmitted;g.prepareElement(c);g.formSubmitted=s;g.successList.push(c);g.showErrors()}else s={},d=d||g.defaultMessage(c,"remote"),s[c.name]=f.message=
b.isFunction(d)?d(a):d,g.showErrors(s);f.valid=n;g.stopRequest(c,n)}},d));return"pending"},minlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)>=d},maxlength:function(a,c,d){return this.optional(c)||this.getLength(b.trim(a),c)<=d},rangelength:function(a,c,d){a=this.getLength(b.trim(a),c);return this.optional(c)||a>=d[0]&&a<=d[1]},min:function(a,b,d){return this.optional(b)||a>=d},max:function(a,b,d){return this.optional(b)||a<=d},range:function(a,b,d){return this.optional(b)||
a>=d[0]&&a<=d[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},
url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},
date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var d=0,f=0,g=!1;a=a.replace(/\D/g,"");for(var r=a.length-1;0<=r;r--){f=
a.charAt(r);f=parseInt(f,10);if(g&&9<(f*=2))f-=9;d+=f;g=!g}return 0==d%10},accept:function(a,b,d){d="string"==typeof d?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||a.match(RegExp(".("+d+")$","i"))},equalTo:function(a,c,d){d=b(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(c).valid()});return a==d.val()}}});b.format=b.validator.format})(jQuery);
(function(b){var a={};if(b.ajaxPrefilter)b.ajaxPrefilter(function(b,c,g){c=b.port;"abort"==b.mode&&(a[c]&&a[c].abort(),a[c]=g)});else{var c=b.ajax;b.ajax=function(d){var f=("port"in d?d:b.ajaxSettings).port;return"abort"==("mode"in d?d:b.ajaxSettings).mode?(a[f]&&a[f].abort(),a[f]=c.apply(this,arguments)):c.apply(this,arguments)}}})(jQuery);
(function(b){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&b.each({focus:"focusin",blur:"focusout"},function(a,c){function d(a){a=b.event.fix(a);a.type=c;return b.event.handle.call(this,a)}b.event.special[c]={setup:function(){this.addEventListener(a,d,!0)},teardown:function(){this.removeEventListener(a,d,!0)},handler:function(a){arguments[0]=b.event.fix(a);arguments[0].type=c;return b.event.handle.apply(this,arguments)}}});b.extend(b.fn,{validateDelegate:function(a,
c,d){return this.bind(c,function(c){var g=b(c.target);if(g.is(a))return d.apply(g,arguments)})}})})(jQuery);(function(){function b(a){return a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,"")}jQuery.validator.addMethod("maxWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length<d},jQuery.validator.format(Localization.Validation.maxWords));jQuery.validator.addMethod("minWords",function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d},jQuery.validator.format(Localization.Validation.minWords));jQuery.validator.addMethod("rangeWords",
function(a,c,d){return this.optional(c)||b(a).match(/\b\w+\b/g).length>=d[0]&&a.match(/bw+b/g).length<d[1]},jQuery.validator.format(Localization.Validation.rangeWords))})();jQuery.validator.addMethod("valueNotEquals",function(b,a,c){return c!=b},Localization.Validation.valueNotEquals);jQuery.validator.addMethod("filesize",function(b,a,c){return this.optional(a)||a.files[0].size<=c});
jQuery.validator.addMethod("urlshort",function(b,a){"http://"!=b.substr(0,7)&&(b="http://"+b);"/"!=b.substr(b.length-1,1)&&(b+="/");return this.optional(a)||/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(b)},"Not valid url.");jQuery.validator.addMethod("letterswithbasicpunc",function(b,a){return this.optional(a)||/^[a-z-.,?!()'\"\s]+$/i.test(b)},Localization.Validation.letterswithbasicpunc);
jQuery.validator.addMethod("alphanumericnodash",function(b,a){return this.optional(a)||/^[\sa-zA-Z0-9]+$/i.test(b)},Localization.Validation.alphanumericnodash);jQuery.validator.addMethod("alphanumericwhitespace",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-\s]+$/i.test(b)},Localization.Validation.alphanumericwhitespace);jQuery.validator.addMethod("alphanumeric",function(b,a){return this.optional(a)||/^[a-zA-Z0-9-]+$/i.test(b)},Localization.Validation.alphanumeric);
jQuery.validator.addMethod("lettersonly",function(b,a){return this.optional(a)||/^[a-z]+$/i.test(b)},Localization.Validation.lettersonly);jQuery.validator.addMethod("nowhitespace",function(b,a){return this.optional(a)||/^\S+$/i.test(b)},Localization.Validation.nowhitespace);jQuery.validator.addMethod("ziprange",function(b,a){return this.optional(a)||/^90[2-5]\d\{2}-\d{4}$/.test(b)},Localization.Validation.ziprange);
jQuery.validator.addMethod("integer",function(b,a){return this.optional(a)||/^-?\d+$/.test(b)},Localization.Validation.integer);
jQuery.validator.addMethod("vinUS",function(b){if(17!=b.length)return!1;var a,c,d,f,g,r="ABCDEFGHJKLMNPRSTUVWXYZ".split(""),u=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],n=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],s=0;for(a=0;17>a;a++){f=n[a];d=b.slice(a,a+1);8==a&&(g=d);if(isNaN(d))for(c=0;c<r.length;c++){if(d.toUpperCase()===r[c]){d=u[c];d*=f;isNaN(g)&&8==c&&(g=r[c]);break}}else d*=f;s+=d}b=s%11;10==b&&(b="X");return b==g?!0:!1},Localization.Validation.vinUS);
jQuery.validator.addMethod("dateITA",function(b,a){var c=!1;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(b))var d=b.split("index.html"),c=parseInt(d[0],10),f=parseInt(d[1],10),d=parseInt(d[2],10),g=new Date(d,f-1,c),c=g.getFullYear()==d&&g.getMonth()==f-1&&g.getDate()==c?!0:!1;else c=!1;return this.optional(a)||c},Localization.Validation.dateITA);!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(b){function a(a){var c=a.data;a.isDefaultPrevented()||(a.preventDefault(),b(a.target).ajaxSubmit(c))}function c(a){var c=a.target,d=b(c);if(!d.is("[type=submit],[type=image]")){c=d.closest("[type=submit]");if(0===c.length)return;c=c[0]}var e=this;if(e.clk=c,"image"==c.type)void 0!==a.offsetX?(e.clk_x=a.offsetX,e.clk_y=a.offsetY):"function"==typeof b.fn.offset?(d=d.offset(),
e.clk_x=a.pageX-d.left,e.clk_y=a.pageY-d.top):(e.clk_x=a.pageX-c.offsetLeft,e.clk_y=a.pageY-c.offsetTop);setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)}function d(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}var f,g;f=void 0!==b("<input type='file'/>").get(0).files;g=void 0!==window.FormData;var r=!!b.fn.prop;b.fn.attr2=function(){if(!r)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)};b.fn.ajaxSubmit=function(a){function c(e){function f(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(e){d("cannot get iframe.contentDocument: "+e),b=a.document}return b}function g(){function a(){try{var b=f(z).readyState;d("state = "+
b);b&&"uninitialized"==b.toLowerCase()&&setTimeout(a,50)}catch(c){d("Server abort: ",c," (",c.name,")"),k(C),F&&clearTimeout(F),F=void 0}}var c=p.attr2("target"),e=p.attr2("action"),u=p.attr("enctype")||p.attr("encoding")||"multipart/form-data";w.setAttribute("target",l);(!s||/post/i.test(s))&&w.setAttribute("method","POST");e!=h.url&&w.setAttribute("action",h.url);h.skipEncodingOverride||s&&!/post/i.test(s)||p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});h.timeout&&(F=setTimeout(function(){y=
!0;k(G)},h.timeout));var j=[];try{if(h.extraData)for(var n in h.extraData)h.extraData.hasOwnProperty(n)&&j.push(b.isPlainObject(h.extraData[n])&&h.extraData[n].hasOwnProperty("name")&&h.extraData[n].hasOwnProperty("value")?b('<input type="hidden" name="'+h.extraData[n].name+'">').val(h.extraData[n].value).appendTo(w)[0]:b('<input type="hidden" name="'+n+'">').val(h.extraData[n]).appendTo(w)[0]);h.iframeTarget||m.appendTo("body");z.attachEvent?z.attachEvent("onload",k):z.addEventListener("load",k,
!1);setTimeout(a,15);try{w.submit()}catch(t){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",e),w.setAttribute("enctype",u),c?w.setAttribute("target",c):p.removeAttr("target"),b(j).remove()}}function k(a){if(!j.aborted&&!E){if(v=f(z),v||(d("cannot access response document"),a=C),a===G&&j)return j.abort("timeout"),void A.reject(j,"timeout");if(a==C&&j)return j.abort("server abort"),void A.reject(j,"error","server abort");if(v&&v.location.href!=h.iframeSrc||y){z.detachEvent?
z.detachEvent("onload",k):z.removeEventListener("load",k,!1);var c;a="success";try{if(y)throw"timeout";var e="xml"==h.dataType||v.XMLDocument||b.isXMLDoc(v);if(d("isXml="+e),!e&&window.opera&&(null===v.body||!v.body.innerHTML)&&--H)return d("requeing onLoad callback, DOM not available"),void setTimeout(k,250);var u=v.body?v.body:v.documentElement;j.responseText=u?u.innerHTML:null;j.responseXML=v.XMLDocument?v.XMLDocument:v;e&&(h.dataType="xml");j.getResponseHeader=function(a){return{"content-type":h.dataType}[a.toLowerCase()]};
u&&(j.status=Number(u.getAttribute("status"))||j.status,j.statusText=u.getAttribute("statusText")||j.statusText);var n=(h.dataType||"").toLowerCase(),s=/(json|script|text)/.test(n);if(s||h.textarea){var p=v.getElementsByTagName("textarea")[0];if(p)j.responseText=p.value,j.status=Number(p.getAttribute("status"))||j.status,j.statusText=p.getAttribute("statusText")||j.statusText;else if(s){var g=v.getElementsByTagName("pre")[0],l=v.getElementsByTagName("body")[0];g?j.responseText=g.textContent?g.textContent:
g.innerText:l&&(j.responseText=l.textContent?l.textContent:l.innerText)}}else"xml"==n&&!j.responseXML&&j.responseText&&(j.responseXML=I(j.responseText));try{var e=j,u=h,q=e.getResponseHeader("content-type")||"",r="xml"===n||!n&&0<=q.indexOf("xml"),B=r?e.responseXML:e.responseText;D=(r&&"parsererror"===B.documentElement.nodeName&&b.error&&b.error("parsererror"),u&&u.dataFilter&&(B=u.dataFilter(B,n)),"string"==typeof B&&("json"===n||!n&&0<=q.indexOf("json")?B=J(B):("script"===n||!n&&0<=q.indexOf("javascript"))&&
b.globalEval(B)),B)}catch(w){a="parsererror",j.error=c=w||a}}catch(x){d("error caught: ",x),a="error",j.error=c=x||a}j.aborted&&(d("upload aborted"),a=null);j.status&&(a=200<=j.status&&300>j.status||304===j.status?"success":"error");"success"===a?(h.success&&h.success.call(h.context,D,"success",j),A.resolve(j.responseText,"success",j),t&&b.event.trigger("ajaxSuccess",[j,h])):a&&(void 0===c&&(c=j.statusText),h.error&&h.error.call(h.context,j,a,c),A.reject(j,"error",c),t&&b.event.trigger("ajaxError",
[j,h,c]));t&&b.event.trigger("ajaxComplete",[j,h]);t&&!--b.active&&b.event.trigger("ajaxStop");h.complete&&h.complete.call(h.context,j,a);E=!0;h.timeout&&clearTimeout(F);setTimeout(function(){h.iframeTarget?m.attr("src",h.iframeSrc):m.remove();j.responseXML=null},100)}}}var n,h,t,l,m,z,j,x,y,F,w=p[0],A=b.Deferred();if(A.abort=function(a){j.abort(a)},e)for(n=0;n<q.length;n++)e=b(q[n]),r?e.prop("disabled",!1):e.removeAttr("disabled");if(h=b.extend(!0,{},b.ajaxSettings,a),h.context=h.context||h,l="jqFormIO"+
(new Date).getTime(),h.iframeTarget?(m=b(h.iframeTarget),x=m.attr2("name"),x?l=x:m.attr2("name",l)):(m=b('<iframe name="'+l+'" src="'+h.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),z=m[0],j={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var c="timeout"===a?"timeout":"aborted";d("aborting upload... "+c);this.aborted=1;try{z.contentWindow.document.execCommand&&
z.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",h.iframeSrc);j.error=c;h.error&&h.error.call(h.context,j,c,a);t&&b.event.trigger("ajaxError",[j,h,c]);h.complete&&h.complete.call(h.context,j,c)}},t=h.global,t&&0===b.active++&&b.event.trigger("ajaxStart"),t&&b.event.trigger("ajaxSend",[j,h]),h.beforeSend&&!1===h.beforeSend.call(h.context,j,h))return h.global&&b.active--,A.reject(),A;if(j.aborted)return A.reject(),A;(e=w.clk)&&(x=e.name,x&&!e.disabled&&(h.extraData=h.extraData||{},
h.extraData[x]=e.value,"image"==e.type&&(h.extraData[x+".x"]=w.clk_x,h.extraData[x+".y"]=w.clk_y)));var G=1,C=2;x=b("meta[name=csrf-token]").attr("content");(e=b("meta[name=csrf-param]").attr("content"))&&x&&(h.extraData=h.extraData||{},h.extraData[e]=x);h.forceSync?g():setTimeout(g,10);var D,v,E,H=50,I=b.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=
b.documentElement.nodeName?b:null},J=b.parseJSON||function(a){return window.eval("("+a+")")};return A}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var s,e,p=this;"function"==typeof a?a={success:a}:void 0===a&&(a={});s=a.type||this.attr2("method");e=a.url||this.attr2("action");(e=(e="string"==typeof e?b.trim(e):"")||window.location.href||"")&&(e=(e.match(/^([^#]+)/)||[])[1]);a=b.extend(!0,{url:e,success:b.ajaxSettings.success,type:s||b.ajaxSettings.type,
iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);e={};if(this.trigger("form-pre-serialize",[this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var t=a.traditional;void 0===t&&(t=b.ajaxSettings.traditional);var k,q=[],l=this.formToArray(a.semantic,q);if(a.data&&(a.extraData=a.data,k=b.param(a.data,
t)),a.beforeSubmit&&!1===a.beforeSubmit(l,this,a))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[l,this,a,e]),e.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;e=b.param(l,t);k&&(e=e?e+"&"+k:k);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+e,a.data=null):a.data=e;var m=[];if(a.resetForm&&m.push(function(){p.resetForm()}),a.clearForm&&m.push(function(){p.clearForm(a.includeHidden)}),
!a.dataType&&a.target){var G=a.success||function(){};m.push(function(c){var d=a.replaceTarget?"replaceWith":"html";b(a.target)[d](c).each(G,arguments)})}else a.success&&m.push(a.success);if(a.success=function(b,c,d){for(var e=a.context||this,f=0,h=m.length;h>f;f++)m[f].apply(e,[b,c,d||p,p])},a.error){var y=a.error;a.error=function(b,c,d){y.apply(a.context||this,[b,c,d,p])}}if(a.complete){var I=a.complete;a.complete=function(b,c){I.apply(a.context||this,[b,c,p])}}k=0<b("input[type=file]:enabled",this).filter(function(){return""!==
b(this).val()}).length;e="multipart/form-data"==p.attr("enctype")||"multipart/form-data"==p.attr("encoding");t=f&&g;d("fileAPI :"+t);var C;if(!1!==a.iframe&&(a.iframe||(k||e)&&!t))a.closeKeepAlive?b.get(a.closeKeepAlive,function(){C=c(l)}):C=c(l);else{if((k||e)&&t){var E=new FormData;for(e=0;e<l.length;e++)E.append(l[e].name,l[e].value);if(a.extraData){var D=b.param(a.extraData,a.traditional).split("&"),J=D.length;k=[];for(e=0;J>e;e++)D[e]=D[e].replace(/\+/g," "),t=D[e].split("="),k.push([decodeURIComponent(t[0]),
decodeURIComponent(t[1])]);for(e=0;e<k.length;e++)k[e]&&E.append(k[e][0],k[e][1])}a.data=null;k=b.extend(!0,{},b.ajaxSettings,a,{contentType:!1,processData:!1,cache:!1,type:s||"POST"});a.uploadProgress&&(k.xhr=function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){var c=0,d=b.loaded||b.position,e=b.total;b.lengthComputable&&(c=Math.ceil(100*(d/e)));a.uploadProgress(b,d,e,c)},!1),c});k.data=null;var H=k.beforeSend;k=(k.beforeSend=function(b,c){c.data=
a.formData?a.formData:E;H&&H.call(this,b,c)},b.ajax(k))}else k=b.ajax(a);C=k}p.removeData("jqxhr").data("jqxhr",C);for(k=0;k<q.length;k++)q[k]=null;return this.trigger("form-submit-notify",[this,a]),this};b.fn.ajaxForm=function(f){if(f=f||{},f.delegation=f.delegation&&b.isFunction(b.fn.on),!f.delegation&&0===this.length){var n=this.selector,s=this.context;return!b.isReady&&n?(d("DOM not ready, queuing ajaxForm"),b(function(){b(n,s).ajaxForm(f)}),this):(d("terminating; zero elements found by selector"+
(b.isReady?"":" (DOM not ready)")),this)}return f.delegation?(b(document).off("submit.form-plugin",this.selector,a).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,f,a).on("click.form-plugin",this.selector,f,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",f,a).bind("click.form-plugin",f,c)};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a,c){var d=[];if(0===this.length)return d;var e,p=this[0],
g=this.attr("id"),k=a?p.getElementsByTagName("*"):p.elements;if(k&&!/MSIE [678]/.test(navigator.userAgent)&&(k=b(k).get()),g&&(e=b(':input[form="'+g+'"]').get(),e.length&&(k=(k||[]).concat(e))),!k||!k.length)return d;var q,l,m,r,y;e=0;for(r=k.length;r>e;e++)if(m=k[e],q=m.name,q&&!m.disabled)if(a&&p.clk&&"image"==m.type)p.clk==m&&(d.push({name:q,value:b(m).val(),type:m.type}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y}));else if(l=b.fieldValue(m,!0),l&&l.constructor==Array){c&&c.push(m);
g=0;for(y=l.length;y>g;g++)d.push({name:q,value:l[g]})}else if(f&&"file"==m.type)if(c&&c.push(m),y=m.files,y.length)for(g=0;g<y.length;g++)d.push({name:q,value:y[g],type:m.type});else d.push({name:q,value:"",type:m.type});else null!==l&&"undefined"!=typeof l&&(c&&c.push(m),d.push({name:q,value:l,type:m.type,required:m.required}));!a&&p.clk&&(k=b(p.clk),l=k[0],(q=l.name)&&!l.disabled&&"image"==l.type&&(d.push({name:q,value:k.val()}),d.push({name:q+".x",value:p.clk_x},{name:q+".y",value:p.clk_y})));
return d};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var c=[];return this.each(function(){var d=this.name;if(d){var e=b.fieldValue(this,a);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),b.param(c)};b.fn.fieldValue=function(a){for(var c=[],d=0,e=this.length;e>d;d++){var f=b.fieldValue(this[d],a);null===f||"undefined"==typeof f||f.constructor==
Array&&!f.length||(f.constructor==Array?b.merge(c,f):c.push(f))}return c};b.fieldValue=function(a,c){var d=a.name,e=a.type,f=a.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||a.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!a.checked||("submit"==e||"image"==e)&&a.form&&a.form.clk!=a||"select"==f&&-1==a.selectedIndex))return null;if("select"==f){var g=a.selectedIndex;if(0>g)return null;for(var d=[],f=a.options,k=(e="select-one"==e)?g+1:f.length,g=e?g:0;k>g;g++){var q=f[g];if(q.selected){var l=
q.value;if(l||(l=q.attributes&&q.attributes.value&&!q.attributes.value.specified?q.text:q.value),e)return l;d.push(l)}}return d}return b(a).val()};b.fn.clearForm=function(a){return this.each(function(){b("input,select,textarea",this).clearFields(a)})};b.fn.clearFields=b.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value=
"":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?b(this).replaceWith(b(this).clone(!0)):b(this).val(""):a&&(!0===a&&/hidden/.test(d)||"string"==typeof a&&b(this).is(a))&&(this.value="")})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};b.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=
!a})};b.fn.selected=function(a){return void 0===a&&(a=!0),this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=a:"option"==this.tagName.toLowerCase()&&(c=b(this).parent("select"),a&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=a)})};b.fn.ajaxSubmit.debug=!1});


var InGameMenubarAuth = {
	checkIfLoggedIn:function(token_id){
		$.ajax({
	        type: 'GET',
	        dataType: 'json',
			url: 'http://smartfun.club' + '/api/login/check/' + token_id + '',
            beforeSend:function (){
				console.log('InGameMenubarAuth.checkIfLoggedIn: beforeSend')
			},			
		}).done(function(response){
			console.log(response)								
			$('#in-game-menubar-user-panel').html(response.data.template);	
			
			if(response.status.code==200){				
				if(mjs_user_token_id){
					// Update portal domain
					var old_href = 'index.html';
					console.log('old_href:',old_href);
					
					$('#in-game-menubar-main-portal-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString());				

					// Update header
					$('#in-game-menubar-header-url').attr('href',old_href+'?mjs_user_token_id='+mjs_user_token_id.toString())					
				}

			}
		});			
	},	
}

// GLOBAL
var mjs_user_token_id;

// getQueryVariable
function getQueryVariable(variable) {
    var query = window.location.search.substring(1); // search in parent
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
}

// In Game Menubar Script Template here
var InGameMenubar = {
	enabled:eval('false'),
	
	activateLeaderboard:function(){
		$('#in-game-menubar-main').hide()
		$('#in-game-menubar-leaderboard').show();		
	},
	
	showActivator:function(){
		$('#in-game-menubar-activator').show();
	},
	activate: function(){
		// Resolve in pixels
		var height = $('#in-game-menubar-main').css('height')
		if(height=='0px'){
			console.log('weird bug with 0px ... forcing something')
			$('#in-game-menubar-main').css('height',window.innerHeight*0.6)
		}
		
		$('#in-game-menubar-activator').hide(200);
		//$('#in-game-menubar-main').css('top',$('#in-game-menubar-activator').css('top'))
		$('#in-game-menubar-main').show(200);
	},		
	deactivate: function(){
		$('#in-game-menubar-activator').show(200);
		$('#in-game-menubar-main').hide(200);
	},
}

var Cookie = {
	IsEnabled: function(){
		return navigator.cookieEnabled ||
	        ('cookie' in document && (document.cookie.length > 0 ||
	        (document.cookie = 'mjstestcookie').indexOf.call(document.cookie, 'mjstestcookie') > -1));	
	},	
	DoesExist: function(cname) {
	    var name = cname + '=';
	    var ca = document.cookie.split(';');
		var value;
	    for(var i=0; i<ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0)==' ') c = c.substring(1);
	        if (c.indexOf(name) == 0){
				return true;
			} 
	    }
	    return false;
	},
	// TEST
	SetFiveSecondCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (5*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetHourlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
	SetDailyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},
 	SetMonthlyCookie: function(cname) { // averages to 30 days
	    var d = new Date();
	    d.setTime(d.getTime() + (1*30*24*60*60*1000));
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},		
	SetYearlyCookie: function(cname) {
	    var d = new Date();
	    d.setTime(d.getTime() + (1*365*24*60*60*1000)); // averages to 365 days
	    var expires = 'expires='+d.toUTCString();
	    document.cookie = cname + '=' + 'yes' + '; ' + expires;
	},			
}

var MarketJS = {
	Log:{
		Game:function(metric_name){ // Eg: MarketJS.Log.Game('Initialize'), MarketJS.Log.Game('EndGame'), MarketJS.Log.Game('LaunchGame)
			console.log('MarketJS API Log Game Event: ',metric_name)
			$.ajax({
		        type: 'GET',
				dataType:'json',
				url: 'http://smartfun.club/api/log/game/' + metric_name + '/' + mjs_game_id + '?mjs_user_token_id=' + mjs_user_token_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		Portal:function(metric_name){ // Eg: MarketJS.Log.Portal('UserLogin'), MarketJS.Log.Portal('UserRegister')
			console.log('MarketJS API Log Portal Event: ',metric_name)
			$.ajax({
		        type: 'POST',
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},
		TimeSpent:function(metric_value){
			console.log('MarketJS API Log Time Spent: ',metric_value)
			var metric_name = 'TimeSpent';
			$.ajax({
		        type: 'POST',
				data:{'metric_value':metric_value},
				dataType:'json',
				url: 'http://smartfun.club/api/log/portal/' + metric_name + '/' + mjs_portal_id,		
			}).done(function(response){
				console.log(response.status.code);							
			});				
		},	
		// Specially developed
		UniqueVisitor:function(){
			console.log('MarketJS API Log Unique Visitor Event')

			// if unique_visitor_params[xxxx] = 'True', means it will be logged in the server			
			var unique_visitor_params = {
				'singular':'True', // to invoke singular counter increments. Special case
				'hourly':'False',
				'daily':'False',
				'monthly':'False',
				'yearly':'False',
			}
			
			var submit_hourly_cookie = false;
			var submit_daily_cookie = false;
			var submit_monthly_cookie = false;
			var submit_yearly_cookie = false;
			
			if(Cookie.IsEnabled()){
				/*
				if(!Cookie.DoesExist('mjstest')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetFiveSecondCookie('mjstest');
					submit_hourly_cookie = true;
				}*/
				
				if(!Cookie.DoesExist('mjshourly')){ // If cookie does not exist
					unique_visitor_params['hourly'] = 'True';
					Cookie.SetHourlyCookie('mjshourly');
					submit_hourly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsdaily')){
					unique_visitor_params['daily'] = 'True';
					Cookie.SetDailyCookie('mjsdaily');
					submit_daily_cookie = true;
				}

				if(!Cookie.DoesExist('mjsmonthly')){
					unique_visitor_params['monthly'] = 'True';
					Cookie.SetMonthlyCookie('mjsmonthly');					
					submit_monthly_cookie = true;
				}

				if(!Cookie.DoesExist('mjsyearly')){
					unique_visitor_params['yearly'] = 'True';
					Cookie.SetYearlyCookie('mjsyearly');
					submit_yearly_cookie = true;
				}																
			}	

			/* SAMPLE:
			unique_visitor_params:{
				hourly:hourly, // 'True'
				daily:daily,	// 'False'
				monthly:monthly, // 'False'
				yearly:yearly, // 'False'
			},
			*/						
			if(submit_hourly_cookie || submit_daily_cookie || submit_monthly_cookie || submit_yearly_cookie){
				console.log('Submitting ...')
				$.ajax({
			        type: 'POST',
					dataType:'json',
					data:unique_visitor_params,
					url: 'http://smartfun.club/api/log/portal/' + 'UniqueVisitor' + '/' + mjs_portal_id,
				}).done(function(response){
					console.log(response.status.code);							
				});					
			}else{
				console.log('Not submitting ... all data is current')
			}					
		},
	},
	
	Leaderboard:{
		SubmitScore:function(points){ // (token_id,game_id,points)
			// what's the drawback? users can post as often as they want, but we have a filter for frequency and value
			if(!mjs_user_token_id){
				console.log('No user session detected. No score submitted')
				return
			}
			$.ajax({
		        type: 'POST',
				data:{
					'token_id':mjs_user_token_id,//token_id,
					'game_id':mjs_game_id,//game_id,
					'points':points,
				},
		        dataType: 'json',
				url: 'http://smartfun.club/leaderboard/write',		
			}).done(function(response){
				console.log(response);
				if(response.status.code==200){
					console.log('SUCCESSFUL')
				}else{
					console.log('FAILED')
				}							
			});			
		},			
	}
}

// Steps

// Good thing we only have mobile and non-mobile
function isMobile(){
	var userAgent = navigator.userAgent;
	var list = ['iPhone','iPad','android','Android','Windows Phone','Silk','BB10','PlayBook'];
	for(i=0;i<list.length;i++){
		if(userAgent.indexOf(list[i])!=-1){
			return true
		}
	}
	return false;
}

// ENABLER
// temporaryly use localStorage, instead of jStorage
$(document).ready(function(){
	if(isMobile() && InGameMenubar.enabled){
		InGameMenubar.showActivator();
	}
	
	mjs_user_token_id = getQueryVariable('mjs_user_token_id');
	if(mjs_user_token_id){
		console.log('mjs_user_token_id found in url param')

		if(isMobile() && InGameMenubar.enabled){
			InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id);
		}		
	}else{
		if(localStorage){
			mjs_user_token_id = localStorage.getItem('mjs_user_token_id')
			
			if(isMobile() && InGameMenubar.enabled){
				if(mjs_user_token_id){
					console.log('mjs_user_token_id found in localStorage');
					InGameMenubarAuth.checkIfLoggedIn(mjs_user_token_id)
				}else{
					console.log('No user token id found in localStorage ... perform a dummy check')
					InGameMenubarAuth.checkIfLoggedIn('12345678') // SOMEHOW THIS NEEDS TO BE HERE
				}				
			}			
			
		}else{
			console.log('no localstorage found')
		}
	}	
});

/* OBSOLETE
// Record TimeSpent
var TimeSpent = 0;
window.setInterval(function () {TimeSpent+=1}, 1000);
var isSmartphone = eval('false');
var isTablet = eval('false');
var isDesktop;
if(isSmartphone || isTablet){
	isDesktop = false;
}else{
	isDesktop = true;
}
if(!isDesktop){
	window.setInterval(function () {
		MarketJS.Log.TimeSpent(TimeSpent); // NEEDS TO BE OPTIMIZED, TO REDUCE LOAD
		TimeSpent = 0;					
	}, 31000);	
}
*/


var BrandingSplashScreen={enabled:eval('true'),}
function InitializeSplashScreen(){if(BrandingSplashScreen.enabled){this.START_BRANDING_SPLASH;ig.module('plugins.branding.splash').requires('impact.impact','impact.entity').defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0);}});EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},splash:new ig.Image('http://lh3.googleusercontent.com/YADmEGMQG8Rabw_t5RDwpddpX7r0VqS8lIQj6R65PozZt1KyTX_NvlOK5UBYqZOE6pwsXlxdOI7UWcHy6sz51525x82aH1fXLq_1Og=s480'),init:function(x,y,settings){this.parent(x,y,settings); if(ig.system.width<=320){this.size.x=320;this.size.y=200;}else{this.size.x=480;this.size.y=240;} 
this.pos.x=(ig.system.width-this.size.x)/2;this.pos.y=-this.size.y-200; this.endPosY=(ig.system.height-this.size.y)/2;var tween1=this.tween({pos:{y:this.endPosY}},0.5,{easing:ig.Tween.Easing.Bounce.EaseIn});var tween2=this.tween({},eval('3')-0.5,{onComplete:function(){ ig.game.director.loadLevel(ig.game.director.currentLevel);}});tween1.chain(tween2);tween1.start();this.currentAnim=this.anims.idle;},createClickableLayer:function(){ console.log('Build clickable layer')
this.checkClickableLayer('branding-splash','SPLASH_SCREEN_CLICKABLE_LOGO_URL',true);},doesClickableLayerExist:function(id){for(k in dynamicClickableEntityDivs){if(k==id)return true;}
return false;},checkClickableLayer:function(divID,outboundLink,open_new_window){if(typeof(wm)=='undefined'){ if(this.doesClickableLayerExist(divID)){ ig.game.showOverlay([divID]); $('#'+divID).find('[href]').attr('href',outboundLink);}else{this.createClickableOutboundLayer(divID,outboundLink,'static/test/images/branding/splash_screen/invisible.png',open_new_window);}}}, createClickableOutboundLayer:function(id,outbound_link,image_path,open_new_window){ var div=ig.$new('div');div.id=id;document.body.appendChild(div); $('#'+div.id).css('float','left');$('#'+div.id).css('position','absolute');if(ig.ua.mobile){var heightRatio=window.innerHeight/mobileHeight;var widthRatio=window.innerWidth/mobileWidth;$('#'+div.id).css('left',this.pos.x*widthRatio);$('#'+div.id).css('top',this.pos.y*heightRatio);$('#'+div.id).css('width',this.size.x*widthRatio);$('#'+div.id).css('height',this.size.y*heightRatio);}else{ var reference={x:(w/2)-(destW/2),y:(h/2)-(destH/2),}
console.log(reference.x,reference.y);$('#'+div.id).css('left',reference.x+this.pos.x*multiplier);$('#'+div.id).css('top',reference.y+this.pos.y*multiplier);$('#'+div.id).css('width',this.size.x*multiplier);$('#'+div.id).css('height',this.size.y*multiplier);} 
if(open_new_window){$('#'+div.id).html('<a target=\'_blank\' href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');}else{$('#'+div.id).html('<a href=\''+outbound_link+'\'><img style=\'width:100%;height:100%\' src=\''+image_path+'\'></a>');} 
dynamicClickableEntityDivs[id]={};dynamicClickableEntityDivs[id]['width']=this.size.x*multiplier;dynamicClickableEntityDivs[id]['height']=this.size.y*multiplier;dynamicClickableEntityDivs[id]['entity_pos_x']=this.pos.x;dynamicClickableEntityDivs[id]['entity_pos_y']=this.pos.y;},draw:function(){ig.system.context.fillStyle='#ffffff';ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);this.parent();if(this.splash)
{ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y);}}});});this.END_BRANDING_SPLASH;}}

//BRANDING_IN_GAME_MENUBAR_LOGIN_SCRIPT

//BRANDING_IN_GAME_MENUBAR_REGISTER_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LOGOUT_SCRIPT

//BRANDING_IN_GAME_MENUBAR_LEADERBOARD_SCRIPT

//BRANDING_CHANGE_USERNAME_SCRIPT


var AdInGamePreroll={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGamePreroll disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGamePreroll']={'box-width':AdInGamePreroll.ad_width+2,'box-height':AdInGamePreroll.ad_height+20,}}
this.selectedOverlayName='AdInGamePreroll'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGamePreroll.boxContents.header.text(AdInGamePreroll.ready_in+' '+i+'...');AdInGamePreroll.boxContents.footer.text(AdInGamePreroll.loading);i--;if(i<0){clearInterval(inter);AdInGamePreroll.boxContents.close.css('left',AdInGamePreroll.boxContents.body.width()-23);AdInGamePreroll.boxContents.close.show();AdInGamePreroll.boxContents.header.html(AdInGamePreroll.close);AdInGamePreroll.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};



var AdInGameEndgame={enabled:eval('false'),ad_duration:eval('5'),ad_width:eval('300'),ad_height:eval('250'),ready_in:'Ready in',loading:'Loading ...',close:'Close'+'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',Initialize:function(){if(!this.enabled){console.log('AdInGameEndgame disabled in CMS ...')
return;} 
if(advancedDivsToResize){advancedDivsToResize['AdInGameEndgame']={'box-width':AdInGameEndgame.ad_width+2,'box-height':AdInGameEndgame.ad_height+20,}}
this.selectedOverlayName='AdInGameEndgame'
console.log('selected:',this.selectedOverlayName); this.overlay=$('#'+this.selectedOverlayName);this.box=$('#'+this.selectedOverlayName+'-Box');this.game=$('#game');this.boxContents={footer:$('#'+this.selectedOverlayName+'-Box-Footer'),header:$('#'+this.selectedOverlayName+'-Box-Header'),close:$('#'+this.selectedOverlayName+'-Box-Close'),body:$('#'+this.selectedOverlayName+'-Box-Body'),}; this.box.width(this.ad_width);this.box.height(this.ad_height);this.box.css('left',(this.overlay.width()-this.box.width())/2);this.box.css('top',(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2); this.overlay.show(this.Timer(this.ad_duration)); sizeHandler();},Timer:function(duration){var i=duration;var inter=setInterval(function(){AdInGameEndgame.boxContents.header.text(AdInGameEndgame.ready_in+' '+i+'...');AdInGameEndgame.boxContents.footer.text(AdInGameEndgame.loading);i--;if(i<0){clearInterval(inter);AdInGameEndgame.boxContents.close.css('left',AdInGameEndgame.boxContents.body.width()-23);AdInGameEndgame.boxContents.close.show();AdInGameEndgame.boxContents.header.html(AdInGameEndgame.close);AdInGameEndgame.boxContents.footer.text('');}},1000);},Close:function(){this.boxContents.close.hide();this.overlay.hide();}};

//BRANDING_FACEBOOK_SCRIPT


var BrandingInGameMoreGames={enabled:eval('true'),url:'http://smartfun.club',}

//PORTAL_ANALYTICS_CODE</script>
	<script type='text/javascript'>var _STRINGS={"Ad":{"Mobile":{"Preroll":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"Header":{"ReadyIn":"The game is ready in ","Loading":"Your game is loading...","Close":"Close",},"End":{"ReadyIn":"Advertisement ends in ","Loading":"Please wait ...","Close":"Close",},},},"Splash":{"Loading":"Loading ...","LogoLine1":"Some text here","LogoLine2":"powered by MarketJS","LogoLine3":"none",},"Game":{"SelectPlayer":"Select Player","Win":"You win!","shop":"SHOP","paused":"PAUSED","highscore":"HIGHSCORE: ","score":"SCORE: ","gameover":"GAME OVER","achieve1":"Achieve  highscore  of  ","achieve2":"  to  unlock"},"Results":{"Title":"High score",},};
var _SETTINGS={DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!0,Link:"http://google.com",LinkEnabled:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:BrandingSplashScreen.enabled},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,Width:166,Height:61}},MoreGames:{Enabled:BrandingInGameMoreGames.enabled,Link:BrandingInGameMoreGames.url,NewWindow:!0}};!function(b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?c(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return c(b)}:c(b)}("undefined"!=typeof window?window:this,function(b,c){function d(b,y){y=y||D;var c=y.createElement("script");c.text=b;y.head.appendChild(c).parentNode.removeChild(c)}function e(b){var y=!!b&&"length"in b&&b.length,c=g.type(b);return"function"!==c&&!g.isWindow(b)&&("array"===c||0===y||"number"==
typeof y&&0<y&&y-1 in b)}function f(b,y){return b.nodeName&&b.nodeName.toLowerCase()===y.toLowerCase()}function l(b,y,c){return g.isFunction(y)?g.grep(b,function(b,A){return!!y.call(b,A,b)!==c}):y.nodeType?g.grep(b,function(b){return b===y!==c}):"string"!=typeof y?g.grep(b,function(b){return-1<Ea.call(y,b)!==c}):Fc.test(y)?g.filter(y,b,c):(y=g.filter(y,b),g.grep(b,function(b){return-1<Ea.call(y,b)!==c&&1===b.nodeType}))}function u(b,y){for(;(b=b[y])&&1!==b.nodeType;);return b}function m(b){return b}
function r(b){throw b;}function t(b,y,c,d){var C;try{b&&g.isFunction(C=b.promise)?C.call(b).done(y).fail(c):b&&g.isFunction(C=b.then)?C.call(b,y,c):y.apply(void 0,[b].slice(d))}catch(J){c.apply(void 0,[J])}}function s(){D.removeEventListener("DOMContentLoaded",s);b.removeEventListener("load",s);g.ready()}function v(){this.expando=g.expando+v.uid++}function B(b,y,c){var d;if(void 0===c&&1===b.nodeType)if(d="data-"+y.replace(Gc,"-$&").toLowerCase(),c=b.getAttribute(d),"string"==typeof c){try{c="true"===
c||"false"!==c&&("null"===c?null:c===+c+""?+c:Hc.test(c)?JSON.parse(c):c)}catch(g){}T.set(b,y,c)}else c=void 0;return c}function F(b,y,c,d){var C,J=1,e=20,f=d?function(){return d.cur()}:function(){return g.css(b,y,"")},n=f(),R=c&&c[3]||(g.cssNumber[y]?"":"px"),j=(g.cssNumber[y]||"px"!==R&&+n)&&Fa.exec(g.css(b,y));if(j&&j[3]!==R){R=R||j[3];c=c||[];j=+n||1;do J=J||".5",j/=J,g.style(b,y,j+R);while(J!==(J=f()/n)&&1!==J&&--e)}return c&&(j=+j||+n||0,C=c[1]?j+(c[1]+1)*c[2]:+c[2],d&&(d.unit=R,d.start=j,d.end=
C)),C}function n(b,y){for(var c,d,C=[],e=0,q=b.length;e<q;e++)if(d=b[e],d.style)if(c=d.style.display,y){if("none"===c&&(C[e]=I.get(d,"display")||null,C[e]||(d.style.display="")),""===d.style.display&&Na(d)){c=C;var f=e,n,j=void 0;n=d.ownerDocument;var m=d.nodeName;n=(d=Fb[m])?d:(j=n.body.appendChild(n.createElement(m)),d=g.css(j,"display"),j.parentNode.removeChild(j),"none"===d&&(d="block"),Fb[m]=d,d);c[f]=n}}else"none"!==c&&(C[e]="none",I.set(d,"display",c));for(e=0;e<q;e++)null!=C[e]&&(b[e].style.display=
C[e]);return b}function j(b,y){var c;return c="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(y||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(y||"*"):[],void 0===y||y&&f(b,y)?g.merge([b],c):c}function x(b,c){for(var d=0,p=b.length;d<p;d++)I.set(b[d],"globalEval",!c||I.get(c[d],"globalEval"))}function z(b,c,d,p,C){for(var e,q,f,n,R=c.createDocumentFragment(),m=[],l=0,r=b.length;l<r;l++)if(e=b[l],e||0===e)if("object"===g.type(e))g.merge(m,e.nodeType?[e]:e);else if(Ic.test(e)){q=
q||R.appendChild(c.createElement("div"));f=(Gb.exec(e)||["",""])[1].toLowerCase();f=V[f]||V._default;q.innerHTML=f[1]+g.htmlPrefilter(e)+f[2];for(f=f[0];f--;)q=q.lastChild;g.merge(m,q.childNodes);q=R.firstChild;q.textContent=""}else m.push(c.createTextNode(e));R.textContent="";for(l=0;e=m[l++];)if(p&&-1<g.inArray(e,p))C&&C.push(e);else if(n=g.contains(e.ownerDocument,e),q=j(R.appendChild(e),"script"),n&&x(q),d)for(f=0;e=q[f++];)Hb.test(e.type||"")&&d.push(e);return R}function fa(){return!0}function P(){return!1}
function Oa(){try{return D.activeElement}catch(b){}}function Pa(b,c,d,p,C,e){var q,f;if("object"==typeof c){"string"!=typeof d&&(p=p||d,d=void 0);for(f in c)Pa(b,f,d,p,c[f],e);return b}if(null==p&&null==C?(C=d,p=d=void 0):null==C&&("string"==typeof d?(C=p,p=void 0):(C=p,p=d,d=void 0)),!1===C)C=P;else if(!C)return b;return 1===e&&(q=C,C=function(b){return g().off(b),q.apply(this,arguments)},C.guid=q.guid||(q.guid=g.guid++)),b.each(function(){g.event.add(this,c,C,p,d)})}function Q(b,c){return f(b,"table")&&
f(11!==c.nodeType?c:c.firstChild,"tr")?g(">tbody",b)[0]||b:b}function Qa(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function Jc(b){var c=Kc.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function Ra(b,c){var d,p,C,e,q,f;if(1===c.nodeType){if(I.hasData(b)&&(d=I.access(b),p=I.set(c,d),f=d.events))for(C in delete p.handle,p.events={},f){d=0;for(p=f[C].length;d<p;d++)g.event.add(c,C,f[C][d])}T.hasData(b)&&(e=T.access(b),q=g.extend({},e),T.set(c,q))}}function ga(b,c,G,
p){c=Ib.apply([],c);var C,e,q,f,n=0,R=b.length,m=R-1,l=c[0],x=g.isFunction(l);if(x||1<R&&"string"==typeof l&&!M.checkClone&&Lc.test(l))return b.each(function(d){var g=b.eq(d);x&&(c[0]=l.call(this,d,g.html()));ga(g,c,G,p)});if(R&&(C=z(c,b[0].ownerDocument,!1,b,p),e=C.firstChild,1===C.childNodes.length&&(C=e),e||p)){e=g.map(j(C,"script"),Qa);for(q=e.length;n<R;n++)f=C,n!==m&&(f=g.clone(f,!0,!0),q&&g.merge(e,j(f,"script"))),G.call(b[n],f,n);if(q){C=e[e.length-1].ownerDocument;g.map(e,Jc);for(n=0;n<q;n++)f=
e[n],Hb.test(f.type||"")&&!I.access(f,"globalEval")&&g.contains(C,f)&&(f.src?g._evalUrl&&g._evalUrl(f.src):d(f.textContent.replace(Mc,""),C))}}return b}function Jb(b,c,d){for(var p=c?g.filter(c,b):b,C=0;null!=(c=p[C]);C++)d||1!==c.nodeType||g.cleanData(j(c)),c.parentNode&&(d&&g.contains(c.ownerDocument,c)&&x(j(c,"script")),c.parentNode.removeChild(c));return b}function Ga(b,c,d){var p,C,e,q,f=b.style;return d=d||Sa(b),d&&(q=d.getPropertyValue(c)||d[c],""!==q||g.contains(b.ownerDocument,b)||(q=g.style(b,
c)),!M.pixelMarginRight()&&lb.test(q)&&Kb.test(c)&&(p=f.width,C=f.minWidth,e=f.maxWidth,f.minWidth=f.maxWidth=f.width=q,q=d.width,f.width=p,f.minWidth=C,f.maxWidth=e)),void 0!==q?q+"":q}function Lb(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function Mb(b){var c=g.cssProps[b];if(!c){var c=g.cssProps,d;a:if(d=b,!(d in Nb)){for(var p=d[0].toUpperCase()+d.slice(1),C=Ob.length;C--;)if(d=Ob[C]+p,d in Nb)break a;d=void 0}c=c[b]=d||b}return c}function Pb(b,
c,d){return(b=Fa.exec(c))?Math.max(0,b[2]-(d||0))+(b[3]||"px"):c}function Qb(b,c,d,p,C){var e=0;for(c=d===(p?"border":"content")?4:"width"===c?1:0;4>c;c+=2)"margin"===d&&(e+=g.css(b,d+pa[c],!0,C)),p?("content"===d&&(e-=g.css(b,"padding"+pa[c],!0,C)),"margin"!==d&&(e-=g.css(b,"border"+pa[c]+"Width",!0,C))):(e+=g.css(b,"padding"+pa[c],!0,C),"padding"!==d&&(e+=g.css(b,"border"+pa[c]+"Width",!0,C)));return e}function Rb(b,c,d){var p,C=Sa(b),e=Ga(b,c,C),q="border-box"===g.css(b,"boxSizing",!1,C);return lb.test(e)?
e:(p=q&&(M.boxSizingReliable()||e===b.style[c]),"auto"===e&&(e=b["offset"+c[0].toUpperCase()+c.slice(1)]),e=parseFloat(e)||0,e+Qb(b,c,d||(q?"border":"content"),p,C)+"px")}function U(b,c,d,p,g){return new U.prototype.init(b,c,d,p,g)}function mb(){Ta&&(!1===D.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(mb):b.setTimeout(mb,g.fx.interval),g.fx.tick())}function Sb(){return b.setTimeout(function(){za=void 0}),za=g.now()}function Ua(b,c){var d,p=0,g={height:b};for(c=c?1:0;4>p;p+=2-c)d=pa[p],
g["margin"+d]=g["padding"+d]=b;return c&&(g.opacity=g.width=b),g}function Tb(b,c,d){for(var p,g=(aa.tweeners[c]||[]).concat(aa.tweeners["*"]),e=0,q=g.length;e<q;e++)if(p=g[e].call(d,c,b))return p}function aa(b,c,d){var p,e,J=0,q=aa.prefilters.length,f=g.Deferred().always(function(){delete n.elem}),n=function(){if(e)return!1;for(var c=za||Sb(),c=Math.max(0,j.startTime+j.duration-c),y=1-(c/j.duration||0),d=0,G=j.tweens.length;d<G;d++)j.tweens[d].run(y);return f.notifyWith(b,[j,y,c]),1>y&&G?c:(G||f.notifyWith(b,
[j,1,0]),f.resolveWith(b,[j]),!1)},j=f.promise({elem:b,props:g.extend({},c),opts:g.extend(!0,{specialEasing:{},easing:g.easing._default},d),originalProperties:c,originalOptions:d,startTime:za||Sb(),duration:d.duration,tweens:[],createTween:function(c,y){var d=g.Tween(b,j.opts,c,y,j.opts.specialEasing[c]||j.opts.easing);return j.tweens.push(d),d},stop:function(c){var y=0,d=c?j.tweens.length:0;if(e)return this;for(e=!0;y<d;y++)j.tweens[y].run(1);return c?(f.notifyWith(b,[j,1,0]),f.resolveWith(b,[j,
c])):f.rejectWith(b,[j,c]),this}});c=j.props;d=j.opts.specialEasing;var m,l,x,ya;for(p in c)if(m=g.camelCase(p),l=d[m],x=c[p],Array.isArray(x)&&(l=x[1],x=c[p]=x[0]),p!==m&&(c[m]=x,delete c[p]),ya=g.cssHooks[m],ya&&"expand"in ya)for(p in x=ya.expand(x),delete c[m],x)p in c||(c[p]=x[p],d[p]=l);else d[m]=l;for(;J<q;J++)if(p=aa.prefilters[J].call(j,b,c,j.opts))return g.isFunction(p.stop)&&(g._queueHooks(j.elem,j.opts.queue).stop=g.proxy(p.stop,p)),p;return g.map(c,Tb,j),g.isFunction(j.opts.start)&&j.opts.start.call(b,
j),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always),g.fx.timer(g.extend(n,{elem:b,anim:j,queue:j.opts.queue})),j}function qa(b){return(b.match(W)||[]).join(" ")}function ra(b){return b.getAttribute&&b.getAttribute("class")||""}function nb(b,c,d,p){var e;if(Array.isArray(c))g.each(c,function(c,y){d||Nc.test(b)?p(b,y):nb(b+"["+("object"==typeof y&&null!=y?c:"")+"]",y,d,p)});else if(d||"object"!==g.type(c))p(b,c);else for(e in c)nb(b+"["+e+"]",c[e],
d,p)}function Ub(b){return function(c,d){"string"!=typeof c&&(d=c,c="*");var p,e=0,J=c.toLowerCase().match(W)||[];if(g.isFunction(d))for(;p=J[e++];)"+"===p[0]?(p=p.slice(1)||"*",(b[p]=b[p]||[]).unshift(d)):(b[p]=b[p]||[]).push(d)}}function Vb(b,c,d,p){function e(f){var n;return J[f]=!0,g.each(b[f]||[],function(b,A){var g=A(c,d,p);return"string"!=typeof g||q||J[g]?q?!(n=g):void 0:(c.dataTypes.unshift(g),e(g),!1)}),n}var J={},q=b===ob;return e(c.dataTypes[0])||!J["*"]&&e("*")}function pb(b,c){var d,
p,e=g.ajaxSettings.flatOptions||{};for(d in c)void 0!==c[d]&&((e[d]?b:p||(p={}))[d]=c[d]);return p&&g.extend(!0,b,p),b}var sa=[],D=b.document,Oc=Object.getPrototypeOf,ta=sa.slice,Ib=sa.concat,qb=sa.push,Ea=sa.indexOf,Va={},Wb=Va.toString,Wa=Va.hasOwnProperty,Xb=Wa.toString,Pc=Xb.call(Object),M={},g=function(b,c){return new g.fn.init(b,c)},Qc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Rc=/^-ms-/,Sc=/-([a-z])/g,Tc=function(b,c){return c.toUpperCase()};g.fn=g.prototype={jquery:"3.2.1",constructor:g,length:0,
toArray:function(){return ta.call(this)},get:function(b){return null==b?ta.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=g.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return g.each(this,b)},map:function(b){return this.pushStack(g.map(this,function(c,d){return b.call(c,d,c)}))},slice:function(){return this.pushStack(ta.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=
+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:qb,sort:sa.sort,splice:sa.splice};g.extend=g.fn.extend=function(){var b,c,d,p,e,J,q=arguments[0]||{},f=1,n=arguments.length,j=!1;"boolean"==typeof q&&(j=q,q=arguments[f]||{},f++);"object"==typeof q||g.isFunction(q)||(q={});for(f===n&&(q=this,f--);f<n;f++)if(null!=(b=arguments[f]))for(c in b)d=q[c],p=b[c],q!==p&&(j&&p&&(g.isPlainObject(p)||(e=Array.isArray(p)))?(e?(e=!1,J=d&&
Array.isArray(d)?d:[]):J=d&&g.isPlainObject(d)?d:{},q[c]=g.extend(j,J,p)):void 0!==p&&(q[c]=p));return q};g.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===g.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=g.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,d;return!(!b||"[object Object]"!==
Wb.call(b))&&(!(c=Oc(b))||(d=Wa.call(c,"constructor")&&c.constructor,"function"==typeof d&&Xb.call(d)===Pc))},isEmptyObject:function(b){for(var c in b)return!1;return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?Va[Wb.call(b)]||"object":typeof b},globalEval:function(b){d(b)},camelCase:function(b){return b.replace(Rc,"ms-").replace(Sc,Tc)},each:function(b,c){var d,p=0;if(e(b))for(d=b.length;p<d&&!1!==c.call(b[p],p,b[p]);p++);else for(p in b)if(!1===c.call(b[p],p,
b[p]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Qc,"")},makeArray:function(b,c){var d=c||[];return null!=b&&(e(Object(b))?g.merge(d,"string"==typeof b?[b]:b):qb.call(d,b)),d},inArray:function(b,c,d){return null==c?-1:Ea.call(c,b,d)},merge:function(b,c){for(var d=+c.length,p=0,g=b.length;p<d;p++)b[g++]=c[p];return b.length=g,b},grep:function(b,c,d){for(var p=[],g=0,e=b.length,q=!d;g<e;g++)d=!c(b[g],g),d!==q&&p.push(b[g]);return p},map:function(b,c,d){var p,g,J=0,q=[];if(e(b))for(p=
b.length;J<p;J++)g=c(b[J],J,d),null!=g&&q.push(g);else for(J in b)g=c(b[J],J,d),null!=g&&q.push(g);return Ib.apply([],q)},guid:1,proxy:function(b,c){var d,p,e;if("string"==typeof c&&(d=b[c],c=b,b=d),g.isFunction(b))return p=ta.call(arguments,2),e=function(){return b.apply(c||this,p.concat(ta.call(arguments)))},e.guid=b.guid=b.guid||g.guid++,e},now:Date.now,support:M});"function"==typeof Symbol&&(g.fn[Symbol.iterator]=sa[Symbol.iterator]);g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(b,c){Va["[object "+c+"]"]=c.toLowerCase()});var la,rb=b,K=function(b,c,d,p){var g,e,q,f,n,j=c&&c.ownerDocument,m=c?c.nodeType:9;if(d=d||[],"string"!=typeof b||!b||1!==m&&9!==m&&11!==m)return d;if(!p&&((c?c.ownerDocument||c:X)!==H&&ma(c),c=c||H,Y)){if(11!==m&&(f=Uc.exec(b)))if(g=f[1])if(9===m){if(!(e=c.getElementById(g)))return d;if(e.id===g)return d.push(e),d}else{if(j&&(e=j.getElementById(g))&&Ha(c,e)&&e.id===g)return d.push(e),d}else{if(f[2])return na.apply(d,c.getElementsByTagName(b)),
d;if((g=f[3])&&O.getElementsByClassName&&c.getElementsByClassName)return na.apply(d,c.getElementsByClassName(g)),d}if(O.qsa&&!Xa[b+" "]&&(!S||!S.test(b))){if(1!==m)j=c,n=b;else if("object"!==c.nodeName.toLowerCase()){(q=c.getAttribute("id"))?q=q.replace(Yb,Zb):c.setAttribute("id",q=L);e=Ia(b);for(g=e.length;g--;)e[g]="#"+q+" "+Ya(e[g]);n=e.join(",");j=sb.test(b)&&tb(c.parentNode)||c}if(n)try{return na.apply(d,j.querySelectorAll(n)),d}catch(l){}finally{q===L&&c.removeAttribute("id")}}}return $b(b.replace(Za,
"$1"),c,d,p)},ub=function(){function b(d,p){return c.push(d+" ")>E.cacheLength&&delete b[c.shift()],b[d+" "]=p}var c=[];return b},ba=function(b){return b[L]=!0,b},da=function(b){var c=H.createElement("fieldset");try{return!!b(c)}catch(d){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}},vb=function(b,c){for(var d=b.split("|"),p=d.length;p--;)E.attrHandle[d[p]]=c},ac=function(b,c){var d=c&&b,p=d&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(p)return p;if(d)for(;d=d.nextSibling;)if(d===
c)return-1;return b?1:-1},Vc=function(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}},Wc=function(b){return function(c){var d=c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===b}},bc=function(b){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===b:c.disabled===b:c.isDisabled===b||c.isDisabled!==!b&&Xc(c)===b:c.disabled===b:"label"in c&&c.disabled===b}},ua=function(b){return ba(function(c){return c=
+c,ba(function(d,p){for(var g,e=b([],d.length,c),q=e.length;q--;)d[g=e[q]]&&(d[g]=!(p[g]=d[g]))})})},tb=function(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b},cc=function(){},Ya=function(b){for(var c=0,d=b.length,p="";c<d;c++)p+=b[c].value;return p},$a=function(b,c,d){var p=c.dir,g=c.next,e=g||p,q=d&&"parentNode"===e,f=Yc++;return c.first?function(c,d,y){for(;c=c[p];)if(1===c.nodeType||q)return b(c,d,y);return!1}:function(c,d,y){var G,n,j,m=[ea,f];if(y)for(;c=c[p];){if((1===c.nodeType||
q)&&b(c,d,y))return!0}else for(;c=c[p];)if(1===c.nodeType||q)if(j=c[L]||(c[L]={}),n=j[c.uniqueID]||(j[c.uniqueID]={}),g&&g===c.nodeName.toLowerCase())c=c[p]||c;else{if((G=n[e])&&G[0]===ea&&G[1]===f)return m[2]=G[2];if(n[e]=m,m[2]=b(c,d,y))return!0}return!1}},wb=function(b){return 1<b.length?function(c,d,p){for(var g=b.length;g--;)if(!b[g](c,d,p))return!1;return!0}:b[0]},ab=function(b,c,d,p,g){for(var e,q=[],f=0,n=b.length,j=null!=c;f<n;f++)(e=b[f])&&(d&&!d(e,p,g)||(q.push(e),j&&c.push(f)));return q},
xb=function(b,c,d,p,g,e){return p&&!p[L]&&(p=xb(p)),g&&!g[L]&&(g=xb(g,e)),ba(function(e,J,f,n){var j,m,l=[],x=[],r=J.length,v;if(!(v=e)){v=c||"*";for(var s=f.nodeType?[f]:f,t=[],z=0,B=s.length;z<B;z++)K(v,s[z],t);v=t}v=!b||!e&&c?v:ab(v,l,b,f,n);s=d?g||(e?b:r||p)?[]:J:v;if(d&&d(v,s,f,n),p){j=ab(s,x);p(j,[],f,n);for(f=j.length;f--;)(m=j[f])&&(s[x[f]]=!(v[x[f]]=m))}if(e){if(g||b){if(g){j=[];for(f=s.length;f--;)(m=s[f])&&j.push(v[f]=m);g(null,s=[],j,n)}for(f=s.length;f--;)(m=s[f])&&-1<(j=g?va(e,m):l[f])&&
(e[j]=!(J[j]=m))}}else s=ab(s===J?s.splice(r,s.length):s),g?g(null,J,s,n):na.apply(J,s)})},yb=function(b){var c,d,p,g=b.length,e=E.relative[b[0].type];d=e||E.relative[" "];for(var q=e?1:0,f=$a(function(b){return b===c},d,!0),n=$a(function(b){return-1<va(c,b)},d,!0),j=[function(b,A,d){b=!e&&(d||A!==bb)||((c=A).nodeType?f(b,A,d):n(b,A,d));return c=null,b}];q<g;q++)if(d=E.relative[b[q].type])j=[$a(wb(j),d)];else{if(d=E.filter[b[q].type].apply(null,b[q].matches),d[L]){for(p=++q;p<g&&!E.relative[b[p].type];p++);
return xb(1<q&&wb(j),1<q&&Ya(b.slice(0,q-1).concat({value:" "===b[q-2].type?"*":""})).replace(Za,"$1"),d,q<p&&yb(b.slice(q,p)),p<g&&yb(b=b.slice(p)),p<g&&Ya(b))}j.push(d)}return wb(j)},Aa,O,E,cb,dc,Ia,zb,$b,bb,oa,Ba,ma,H,Z,Y,S,wa,db,Ha,L="sizzle"+1*new Date,X=rb.document,ea=0,Yc=0,ec=ub(),fc=ub(),Xa=ub(),Ab=function(b,c){return b===c&&(Ba=!0),0},Zc={}.hasOwnProperty,xa=[],$c=xa.pop,ad=xa.push,na=xa.push,gc=xa.slice,va=function(b,c){for(var d=0,p=b.length;d<p;d++)if(b[d]===c)return d;return-1},bd=
/[\x20\t\r\n\f]+/g,Za=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,cd=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,dd=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ed=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,fd=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
gd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,eb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},hd=/^(?:input|select|textarea|button)$/i,id=/^h\d$/i,Ja=/^[^{]+\{\s*\[native \w/,Uc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sb=/[+~]/,ha=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ia=function(b,c,d){b="0x"+c-65536;return b!==b||d?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},Yb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Zb=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},hc=function(){ma()},
Xc=$a(function(b){return!0===b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{na.apply(xa=gc.call(X.childNodes),X.childNodes),xa[X.childNodes.length].nodeType}catch(Ld){na={apply:xa.length?function(b,c){ad.apply(b,gc.call(c))}:function(b,c){for(var d=b.length,p=0;b[d++]=c[p++];);b.length=d-1}}}O=K.support={};dc=K.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};ma=K.setDocument=function(b){var c,d;b=b?b.ownerDocument||b:X;return b!==
H&&9===b.nodeType&&b.documentElement?(H=b,Z=H.documentElement,Y=!dc(H),X!==H&&(d=H.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",hc,!1):d.attachEvent&&d.attachEvent("onunload",hc)),O.attributes=da(function(b){return b.className="i",!b.getAttribute("className")}),O.getElementsByTagName=da(function(b){return b.appendChild(H.createComment("")),!b.getElementsByTagName("*").length}),O.getElementsByClassName=Ja.test(H.getElementsByClassName),O.getById=da(function(b){return Z.appendChild(b).id=
L,!H.getElementsByName||!H.getElementsByName(L).length}),O.getById?(E.filter.ID=function(b){var c=b.replace(ha,ia);return function(b){return b.getAttribute("id")===c}},E.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&Y){var A=c.getElementById(b);return A?[A]:[]}}):(E.filter.ID=function(b){var c=b.replace(ha,ia);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}},E.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&
Y){var A,d,y,g=c.getElementById(b);if(g){if(A=g.getAttributeNode("id"),A&&A.value===b)return[g];y=c.getElementsByName(b);for(d=0;g=y[d++];)if(A=g.getAttributeNode("id"),A&&A.value===b)return[g]}return[]}}),E.find.TAG=O.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):O.qsa?c.querySelectorAll(b):void 0}:function(b,c){var A,d=[],y=0,g=c.getElementsByTagName(b);if("*"===b){for(;A=g[y++];)1===A.nodeType&&d.push(A);return d}return g},E.find.CLASS=
O.getElementsByClassName&&function(b,c){if("undefined"!=typeof c.getElementsByClassName&&Y)return c.getElementsByClassName(b)},wa=[],S=[],(O.qsa=Ja.test(H.querySelectorAll))&&(da(function(b){Z.appendChild(b).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&S.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||S.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+L+"-]").length||S.push("~=");b.querySelectorAll(":checked").length||S.push(":checked");b.querySelectorAll("a#"+L+"+*").length||S.push(".#.+[+~]")}),da(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=H.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&S.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
S.push(":enabled",":disabled");Z.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&S.push(":enabled",":disabled");b.querySelectorAll("*,:x");S.push(",.*:")})),(O.matchesSelector=Ja.test(db=Z.matches||Z.webkitMatchesSelector||Z.mozMatchesSelector||Z.oMatchesSelector||Z.msMatchesSelector))&&da(function(b){O.disconnectedMatch=db.call(b,"*");db.call(b,"[s!='']:x");wa.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
S=S.length&&RegExp(S.join("|")),wa=wa.length&&RegExp(wa.join("|")),c=Ja.test(Z.compareDocumentPosition),Ha=c||Ja.test(Z.contains)?function(b,c){var A=9===b.nodeType?b.documentElement:b,d=c&&c.parentNode;return b===d||!(!d||1!==d.nodeType||!(A.contains?A.contains(d):b.compareDocumentPosition&&16&b.compareDocumentPosition(d)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},Ab=c?function(b,c){if(b===c)return Ba=!0,0;var A=!b.compareDocumentPosition-!c.compareDocumentPosition;return A?
A:(A=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&A||!O.sortDetached&&c.compareDocumentPosition(b)===A?b===H||b.ownerDocument===X&&Ha(X,b)?-1:c===H||c.ownerDocument===X&&Ha(X,c)?1:oa?va(oa,b)-va(oa,c):0:4&A?-1:1)}:function(b,c){if(b===c)return Ba=!0,0;var A,d=0;A=b.parentNode;var y=c.parentNode,g=[b],e=[c];if(!A||!y)return b===H?-1:c===H?1:A?-1:y?1:oa?va(oa,b)-va(oa,c):0;if(A===y)return ac(b,c);for(A=b;A=A.parentNode;)g.unshift(A);for(A=c;A=A.parentNode;)e.unshift(A);
for(;g[d]===e[d];)d++;return d?ac(g[d],e[d]):g[d]===X?-1:e[d]===X?1:0},H):H};K.matches=function(b,c){return K(b,null,null,c)};K.matchesSelector=function(b,c){if((b.ownerDocument||b)!==H&&ma(b),c=c.replace(ed,"='$1']"),O.matchesSelector&&Y&&!Xa[c+" "]&&(!wa||!wa.test(c))&&(!S||!S.test(c)))try{var d=db.call(b,c);if(d||O.disconnectedMatch||b.document&&11!==b.document.nodeType)return d}catch(g){}return 0<K(c,H,null,[b]).length};K.contains=function(b,c){return(b.ownerDocument||b)!==H&&ma(b),Ha(b,c)};K.attr=
function(b,c){(b.ownerDocument||b)!==H&&ma(b);var d=E.attrHandle[c.toLowerCase()],d=d&&Zc.call(E.attrHandle,c.toLowerCase())?d(b,c,!Y):void 0;return void 0!==d?d:O.attributes||!Y?b.getAttribute(c):(d=b.getAttributeNode(c))&&d.specified?d.value:null};K.escape=function(b){return(b+"").replace(Yb,Zb)};K.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};K.uniqueSort=function(b){var c,d=[],g=0,e=0;if(Ba=!O.detectDuplicates,oa=!O.sortStable&&b.slice(0),b.sort(Ab),Ba){for(;c=b[e++];)c===
b[e]&&(g=d.push(e));for(;g--;)b.splice(d[g],1)}return oa=null,b};cb=K.getText=function(b){var c,d="",g=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=cb(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[g++];)d+=cb(c);return d};E=K.selectors={cacheLength:50,createPseudo:ba,match:eb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},
"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(ha,ia),b[3]=(b[3]||b[4]||b[5]||"").replace(ha,ia),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||K.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&K.error(b[0]),b},PSEUDO:function(b){var c,d=!b[6]&&b[2];return eb.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":d&&fd.test(d)&&
(c=Ia(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(b[0]=b[0].slice(0,c),b[2]=d.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(ha,ia).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=ec[b+" "];return c||(c=RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))&&ec(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||
"")})},ATTR:function(b,c,d){return function(g){g=K.attr(g,b);return null==g?"!="===c:!c||(g+="","="===c?g===d:"!="===c?g!==d:"^="===c?d&&0===g.indexOf(d):"*="===c?d&&-1<g.indexOf(d):"$="===c?d&&g.slice(-d.length)===d:"~="===c?-1<(" "+g.replace(bd," ")+" ").indexOf(d):"|="===c&&(g===d||g.slice(0,d.length+1)===d+"-"))}},CHILD:function(b,c,d,g,e){var f="nth"!==b.slice(0,3),q="last"!==b.slice(-4),n="of-type"===c;return 1===g&&0===e?function(b){return!!b.parentNode}:function(c,d,y){var G,j,m,l,x,r;d=f!==
q?"nextSibling":"previousSibling";var s=c.parentNode,v=n&&c.nodeName.toLowerCase();y=!y&&!n;var t=!1;if(s){if(f){for(;d;){for(l=c;l=l[d];)if(n?l.nodeName.toLowerCase()===v:1===l.nodeType)return!1;r=d="only"===b&&!r&&"nextSibling"}return!0}if(r=[q?s.firstChild:s.lastChild],q&&y){l=s;m=l[L]||(l[L]={});j=m[l.uniqueID]||(m[l.uniqueID]={});G=j[b]||[];t=(x=G[0]===ea&&G[1])&&G[2];for(l=x&&s.childNodes[x];l=++x&&l&&l[d]||(t=x=0)||r.pop();)if(1===l.nodeType&&++t&&l===c){j[b]=[ea,x,t];break}}else if(y&&(l=
c,m=l[L]||(l[L]={}),j=m[l.uniqueID]||(m[l.uniqueID]={}),G=j[b]||[],x=G[0]===ea&&G[1],t=x),!1===t)for(;(l=++x&&l&&l[d]||(t=x=0)||r.pop())&&(!(n?l.nodeName.toLowerCase()===v:1===l.nodeType)||!++t||!(y&&(m=l[L]||(l[L]={}),j=m[l.uniqueID]||(m[l.uniqueID]={}),j[b]=[ea,t]),l===c)););return t-=e,t===g||0===t%g&&0<=t/g}}},PSEUDO:function(b,c){var d,g=E.pseudos[b]||E.setFilters[b.toLowerCase()]||K.error("unsupported pseudo: "+b);return g[L]?g(c):1<g.length?(d=[b,b,"",c],E.setFilters.hasOwnProperty(b.toLowerCase())?
ba(function(b,d){for(var A,e=g(b,c),G=e.length;G--;)A=va(b,e[G]),b[A]=!(d[A]=e[G])}):function(b){return g(b,0,d)}):g}},pseudos:{not:ba(function(b){var c=[],d=[],g=zb(b.replace(Za,"$1"));return g[L]?ba(function(b,c,d,A){var y;d=g(b,null,A,[]);for(A=b.length;A--;)(y=d[A])&&(b[A]=!(c[A]=y))}):function(b,A,e){return c[0]=b,g(c,null,e,d),c[0]=null,!d.pop()}}),has:ba(function(b){return function(c){return 0<K(b,c).length}}),contains:ba(function(b){return b=b.replace(ha,ia),function(c){return-1<(c.textContent||
c.innerText||cb(c)).indexOf(b)}}),lang:ba(function(b){return gd.test(b||"")||K.error("unsupported lang: "+b),b=b.replace(ha,ia).toLowerCase(),function(c){var d;do if(d=Y?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(b){var c=rb.location&&rb.location.hash;return c&&c.slice(1)===b.id},root:function(b){return b===Z},focus:function(b){return b===H.activeElement&&(!H.hasFocus||
H.hasFocus())&&!(!b.type&&!b.href&&!~b.tabIndex)},enabled:bc(!1),disabled:bc(!0),checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!E.pseudos.empty(b)},header:function(b){return id.test(b.nodeName)},input:function(b){return hd.test(b.nodeName)},
button:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:ua(function(){return[0]}),last:ua(function(b,c){return[c-1]}),eq:ua(function(b,c,d){return[0>d?d+c:d]}),even:ua(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:ua(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:ua(function(b,c,
d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:ua(function(b,c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};E.pseudos.nth=E.pseudos.eq;for(Aa in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[Aa]=Vc(Aa);for(Aa in{submit:!0,reset:!0})E.pseudos[Aa]=Wc(Aa);cc.prototype=E.filters=E.pseudos;E.setFilters=new cc;Ia=K.tokenize=function(b,c){var d,g,e,f,q,n,j;if(q=fc[b+" "])return c?0:q.slice(0);q=b;n=[];for(j=E.preFilter;q;){d&&!(g=cd.exec(q))||(g&&(q=q.slice(g[0].length)||q),n.push(e=
[]));d=!1;(g=dd.exec(q))&&(d=g.shift(),e.push({value:d,type:g[0].replace(Za," ")}),q=q.slice(d.length));for(f in E.filter)!(g=eb[f].exec(q))||j[f]&&!(g=j[f](g))||(d=g.shift(),e.push({value:d,type:f,matches:g}),q=q.slice(d.length));if(!d)break}return c?q.length:q?K.error(b):fc(b,n).slice(0)};la=(zb=K.compile=function(b,c){var d,g=[],e=[],f=Xa[b+" "];if(!f){c||(c=Ia(b));for(d=c.length;d--;)f=yb(c[d]),f[L]?g.push(f):e.push(f);d=Xa;var q=0<g.length,n=0<e.length,f=function(b,c,d,A,y){var G,f,j,J=0,m="0",
l=b&&[],x=[],r=bb,s=b||n&&E.find.TAG("*",y),v=ea+=null==r?1:Math.random()||0.1,t=s.length;for(y&&(bb=c===H||c||y);m!==t&&null!=(G=s[m]);m++){if(n&&G){f=0;for(c||G.ownerDocument===H||(ma(G),d=!Y);j=e[f++];)if(j(G,c||H,d)){A.push(G);break}y&&(ea=v)}q&&((G=!j&&G)&&J--,b&&l.push(G))}if(J+=m,q&&m!==J){for(f=0;j=g[f++];)j(l,x,c,d);if(b){if(0<J)for(;m--;)l[m]||x[m]||(x[m]=$c.call(A));x=ab(x)}na.apply(A,x);y&&!b&&0<x.length&&1<J+g.length&&K.uniqueSort(A)}return y&&(ea=v,bb=r),l},f=q?ba(f):f,f=d(b,f);f.selector=
b}return f},$b=K.select=function(b,c,d,g){var e,f,q,n,j,m="function"==typeof b&&b,l=!g&&Ia(b=m.selector||b);if(d=d||[],1===l.length){if(f=l[0]=l[0].slice(0),2<f.length&&"ID"===(q=f[0]).type&&9===c.nodeType&&Y&&E.relative[f[1].type]){if(c=(E.find.ID(q.matches[0].replace(ha,ia),c)||[])[0],!c)return d;m&&(c=c.parentNode);b=b.slice(f.shift().value.length)}for(e=eb.needsContext.test(b)?0:f.length;e--&&!(q=f[e],E.relative[n=q.type]);)if((j=E.find[n])&&(g=j(q.matches[0].replace(ha,ia),sb.test(f[0].type)&&
tb(c.parentNode)||c))){if(f.splice(e,1),b=g.length&&Ya(f),!b)return na.apply(d,g),d;break}}return(m||zb(b,l))(g,c,!Y,d,!c||sb.test(b)&&tb(c.parentNode)||c),d},O.sortStable=L.split("").sort(Ab).join("")===L,O.detectDuplicates=!!Ba,ma(),O.sortDetached=da(function(b){return 1&b.compareDocumentPosition(H.createElement("fieldset"))}),da(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||vb("type|href|height|width",function(b,c,d){if(!d)return b.getAttribute(c,
"type"===c.toLowerCase()?1:2)}),O.attributes&&da(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||vb("value",function(b,c,d){if(!d&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),da(function(b){return null==b.getAttribute("disabled")})||vb("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,d){var g;if(!d)return!0===b[c]?c.toLowerCase():
(g=b.getAttributeNode(c))&&g.specified?g.value:null}),K);g.find=la;g.expr=la.selectors;g.expr[":"]=g.expr.pseudos;g.uniqueSort=g.unique=la.uniqueSort;g.text=la.getText;g.isXMLDoc=la.isXML;g.contains=la.contains;g.escapeSelector=la.escape;var Ca=function(b,c,d){for(var e=[],f=void 0!==d;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(f&&g(b).is(d))break;e.push(b)}return e},ic=function(b,c){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&d.push(b);return d},jc=g.expr.match.needsContext,kc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Fc=/^.[^:#\[\.,]*$/;g.filter=function(b,c,d){var e=c[0];return d&&(b=":not("+b+")"),1===c.length&&1===e.nodeType?g.find.matchesSelector(e,b)?[e]:[]:g.find.matches(b,g.grep(c,function(b){return 1===b.nodeType}))};g.fn.extend({find:function(b){var c,d,e=this.length,f=this;if("string"!=typeof b)return this.pushStack(g(b).filter(function(){for(c=0;c<e;c++)if(g.contains(f[c],this))return!0}));d=this.pushStack([]);for(c=0;c<e;c++)g.find(b,f[c],d);return 1<e?g.uniqueSort(d):d},filter:function(b){return this.pushStack(l(this,
b||[],!1))},not:function(b){return this.pushStack(l(this,b||[],!0))},is:function(b){return!!l(this,"string"==typeof b&&jc.test(b)?g(b):b||[],!1).length}});var lc,jd=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(g.fn.init=function(b,c,d){var e,f;if(!b)return this;if(d=d||lc,"string"==typeof b){if(e="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:jd.exec(b),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(b):this.constructor(c).find(b);if(e[1]){if(c=c instanceof g?c[0]:c,g.merge(this,g.parseHTML(e[1],
c&&c.nodeType?c.ownerDocument||c:D,!0)),kc.test(e[1])&&g.isPlainObject(c))for(e in c)g.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}return f=D.getElementById(e[2]),f&&(this[0]=f,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):g.isFunction(b)?void 0!==d.ready?d.ready(b):b(g):g.makeArray(b,this)}).prototype=g.fn;lc=g(D);var kd=/^(?:parents|prev(?:Until|All))/,ld={children:!0,contents:!0,next:!0,prev:!0};g.fn.extend({has:function(b){var c=g(b,this),d=c.length;
return this.filter(function(){for(var b=0;b<d;b++)if(g.contains(this,c[b]))return!0})},closest:function(b,c){var d,e=0,f=this.length,n=[],q="string"!=typeof b&&g(b);if(!jc.test(b))for(;e<f;e++)for(d=this[e];d&&d!==c;d=d.parentNode)if(11>d.nodeType&&(q?-1<q.index(d):1===d.nodeType&&g.find.matchesSelector(d,b))){n.push(d);break}return this.pushStack(1<n.length?g.uniqueSort(n):n)},index:function(b){return b?"string"==typeof b?Ea.call(g(b),this[0]):Ea.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});g.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Ca(b,"parentNode")},parentsUntil:function(b,c,d){return Ca(b,"parentNode",d)},next:function(b){return u(b,"nextSibling")},prev:function(b){return u(b,"previousSibling")},nextAll:function(b){return Ca(b,
"nextSibling")},prevAll:function(b){return Ca(b,"previousSibling")},nextUntil:function(b,c,d){return Ca(b,"nextSibling",d)},prevUntil:function(b,c,d){return Ca(b,"previousSibling",d)},siblings:function(b){return ic((b.parentNode||{}).firstChild,b)},children:function(b){return ic(b.firstChild)},contents:function(b){return f(b,"iframe")?b.contentDocument:(f(b,"template")&&(b=b.content||b),g.merge([],b.childNodes))}},function(b,c){g.fn[b]=function(d,e){var f=g.map(this,c,d);return"Until"!==b.slice(-5)&&
(e=d),e&&"string"==typeof e&&(f=g.filter(e,f)),1<this.length&&(ld[b]||g.uniqueSort(f),kd.test(b)&&f.reverse()),this.pushStack(f)}});var W=/[^\x20\t\r\n\f]+/g;g.Callbacks=function(b){var c;if("string"==typeof b){var d={};c=(g.each(b.match(W)||[],function(b,c){d[c]=!0}),d)}else c=g.extend({},b);b=c;var e,f,n,q,j=[],m=[],l=-1,x=function(){q=q||b.once;for(n=e=!0;m.length;l=-1)for(f=m.shift();++l<j.length;)!1===j[l].apply(f[0],f[1])&&b.stopOnFalse&&(l=j.length,f=!1);b.memory||(f=!1);e=!1;q&&(j=f?[]:"")},
r={add:function(){return j&&(f&&!e&&(l=j.length-1,m.push(f)),function ya(c){g.each(c,function(c,d){g.isFunction(d)?b.unique&&r.has(d)||j.push(d):d&&d.length&&"string"!==g.type(d)&&ya(d)})}(arguments),f&&!e&&x()),this},remove:function(){return g.each(arguments,function(b,c){for(var d;-1<(d=g.inArray(c,j,d));)j.splice(d,1),d<=l&&l--}),this},has:function(b){return b?-1<g.inArray(b,j):0<j.length},empty:function(){return j&&(j=[]),this},disable:function(){return q=m=[],j=f="",this},disabled:function(){return!j},
lock:function(){return q=m=[],f||e||(j=f=""),this},locked:function(){return!!q},fireWith:function(b,c){return q||(c=c||[],c=[b,c.slice?c.slice():c],m.push(c),e||x()),this},fire:function(){return r.fireWith(this,arguments),this},fired:function(){return!!n}};return r};g.extend({Deferred:function(c){var d=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),
g.Callbacks("once memory"),1,"rejected"]],e="pending",p={state:function(){return e},always:function(){return f.done(arguments).fail(arguments),this},"catch":function(b){return p.then(null,b)},pipe:function(){var b=arguments;return g.Deferred(function(c){g.each(d,function(d,A){var e=g.isFunction(b[A[4]])&&b[A[4]];f[A[1]](function(){var b=e&&e.apply(this,arguments);b&&g.isFunction(b.promise)?b.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[A[0]+"With"](this,e?[b]:arguments)})});b=null}).promise()},
then:function(c,A,e){function p(c,d,A,e){return function(){var y=this,G=arguments,q=function(){var b,q;if(!(c<f)){if(b=A.apply(y,G),b===d.promise())throw new TypeError("Thenable self-resolution");q=b&&("object"==typeof b||"function"==typeof b)&&b.then;g.isFunction(q)?e?q.call(b,p(f,d,m,e),p(f,d,r,e)):(f++,q.call(b,p(f,d,m,e),p(f,d,r,e),p(f,d,m,d.notifyWith))):(A!==m&&(y=void 0,G=[b]),(e||d.resolveWith)(y,G))}},j=e?q:function(){try{q()}catch(b){g.Deferred.exceptionHook&&g.Deferred.exceptionHook(b,
j.stackTrace),c+1>=f&&(A!==r&&(y=void 0,G=[b]),d.rejectWith(y,G))}};c?j():(g.Deferred.getStackHook&&(j.stackTrace=g.Deferred.getStackHook()),b.setTimeout(j))}}var f=0;return g.Deferred(function(b){d[0][3].add(p(0,b,g.isFunction(e)?e:m,b.notifyWith));d[1][3].add(p(0,b,g.isFunction(c)?c:m));d[2][3].add(p(0,b,g.isFunction(A)?A:r))}).promise()},promise:function(b){return null!=b?g.extend(b,p):p}},f={};return g.each(d,function(b,c){var A=c[2],g=c[5];p[c[1]]=A.add;g&&A.add(function(){e=g},d[3-b][2].disable,
d[0][2].lock);A.add(c[3].fire);f[c[0]]=function(){return f[c[0]+"With"](this===f?void 0:this,arguments),this};f[c[0]+"With"]=A.fireWith}),p.promise(f),c&&c.call(f,f),f},when:function(b){var c=arguments.length,d=c,e=Array(d),f=ta.call(arguments),j=g.Deferred(),q=function(b){return function(d){e[b]=this;f[b]=1<arguments.length?ta.call(arguments):d;--c||j.resolveWith(e,f)}};if(1>=c&&(t(b,j.done(q(d)).resolve,j.reject,!c),"pending"===j.state()||g.isFunction(f[d]&&f[d].then)))return j.then();for(;d--;)t(f[d],
q(d),j.reject);return j.promise()}});var md=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(c,d){b.console&&b.console.warn&&c&&md.test(c.name)&&b.console.warn("jQuery.Deferred exception: "+c.message,c.stack,d)};g.readyException=function(c){b.setTimeout(function(){throw c;})};var Bb=g.Deferred();g.fn.ready=function(b){return Bb.then(b)["catch"](function(b){g.readyException(b)}),this};g.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--g.readyWait:
g.isReady)||(g.isReady=!0,!0!==b&&0<--g.readyWait||Bb.resolveWith(D,[g]))}});g.ready.then=Bb.then;"complete"===D.readyState||"loading"!==D.readyState&&!D.documentElement.doScroll?b.setTimeout(g.ready):(D.addEventListener("DOMContentLoaded",s),b.addEventListener("load",s));var ja=function(b,c,d,e,f,j,q){var n=0,m=b.length,l=null==d;if("object"===g.type(d))for(n in f=!0,d)ja(b,c,n,d[n],!0,j,q);else if(void 0!==e&&(f=!0,g.isFunction(e)||(q=!0),l&&(q?(c.call(b,e),c=null):(l=c,c=function(b,c,d){return l.call(g(b),
d)})),c))for(;n<m;n++)c(b[n],d,q?e:e.call(b[n],n,c(b[n],d)));return f?b:l?c.call(b):m?c(b[0],d):j},fb=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};v.uid=1;v.prototype={cache:function(b){var c=b[this.expando];return c||(c={},fb(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,d){var e;b=this.cache(b);if("string"==typeof c)b[g.camelCase(c)]=d;else for(e in c)b[g.camelCase(e)]=c[e];return b},get:function(b,c){return void 0===
c?this.cache(b):b[this.expando]&&b[this.expando][g.camelCase(c)]},access:function(b,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(b,c):(this.set(b,c,d),void 0!==d?d:c)},remove:function(b,c){var d,e=b[this.expando];if(void 0!==e){if(void 0!==c){Array.isArray(c)?c=c.map(g.camelCase):(c=g.camelCase(c),c=c in e?[c]:c.match(W)||[]);for(d=c.length;d--;)delete e[c[d]]}(void 0===c||g.isEmptyObject(e))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=
b[this.expando];return void 0!==b&&!g.isEmptyObject(b)}};var I=new v,T=new v,Hc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Gc=/[A-Z]/g;g.extend({hasData:function(b){return T.hasData(b)||I.hasData(b)},data:function(b,c,d){return T.access(b,c,d)},removeData:function(b,c){T.remove(b,c)},_data:function(b,c,d){return I.access(b,c,d)},_removeData:function(b,c){I.remove(b,c)}});g.fn.extend({data:function(b,c){var d,e,f,j=this[0],n=j&&j.attributes;if(void 0===b){if(this.length&&(f=T.get(j),1===j.nodeType&&!I.get(j,
"hasDataAttrs"))){for(d=n.length;d--;)n[d]&&(e=n[d].name,0===e.indexOf("data-")&&(e=g.camelCase(e.slice(5)),B(j,e,f[e])));I.set(j,"hasDataAttrs",!0)}return f}return"object"==typeof b?this.each(function(){T.set(this,b)}):ja(this,function(c){var d;if(j&&void 0===c){if((d=T.get(j,b),void 0!==d)||(d=B(j,b),void 0!==d))return d}else this.each(function(){T.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){T.remove(this,b)})}});g.extend({queue:function(b,
c,d){var e;if(b)return c=(c||"fx")+"queue",e=I.get(b,c),d&&(!e||Array.isArray(d)?e=I.access(b,c,g.makeArray(d)):e.push(d)),e||[]},dequeue:function(b,c){c=c||"fx";var d=g.queue(b,c),e=d.length,f=d.shift(),j=g._queueHooks(b,c),n=function(){g.dequeue(b,c)};"inprogress"===f&&(f=d.shift(),e--);f&&("fx"===c&&d.unshift("inprogress"),delete j.stop,f.call(b,n,j));!e&&j&&j.empty.fire()},_queueHooks:function(b,c){var d=c+"queueHooks";return I.get(b,d)||I.access(b,d,{empty:g.Callbacks("once memory").add(function(){I.remove(b,
[c+"queue",d])})})}});g.fn.extend({queue:function(b,c){var d=2;return"string"!=typeof b&&(c=b,b="fx",d--),arguments.length<d?g.queue(this[0],b):void 0===c?this:this.each(function(){var d=g.queue(this,b,c);g._queueHooks(this,b);"fx"===b&&"inprogress"!==d[0]&&g.dequeue(this,b)})},dequeue:function(b){return this.each(function(){g.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var d,e=1,f=g.Deferred(),j=this,n=this.length,m=function(){--e||f.resolveWith(j,
[j])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";n--;)(d=I.get(j[n],b+"queueHooks"))&&d.empty&&(e++,d.empty.add(m));return m(),f.promise(c)}});var mc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fa=RegExp("^(?:([+-])=|)("+mc+")([a-z%]*)$","i"),pa=["Top","Right","Bottom","Left"],Na=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&g.contains(b.ownerDocument,b)&&"none"===g.css(b,"display")},nc=function(b,c,d,e){var g,f={};for(g in c)f[g]=b.style[g],b.style[g]=c[g];d=
d.apply(b,e||[]);for(g in c)b.style[g]=f[g];return d},Fb={};g.fn.extend({show:function(){return n(this,!0)},hide:function(){return n(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){Na(this)?g(this).show():g(this).hide()})}});var oc=/^(?:checkbox|radio)$/i,Gb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Hb=/^$|\/(?:java|ecma)script/i,V={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};V.optgroup=V.option;V.tbody=V.tfoot=V.colgroup=V.caption=V.thead;V.th=V.td;var Ic=/<|&#?\w+;/,gb=D.createDocumentFragment().appendChild(D.createElement("div")),hb=D.createElement("input");hb.setAttribute("type","radio");hb.setAttribute("checked","checked");hb.setAttribute("name","t");gb.appendChild(hb);M.checkClone=gb.cloneNode(!0).cloneNode(!0).lastChild.checked;gb.innerHTML="<textarea>x</textarea>";
M.noCloneChecked=!!gb.cloneNode(!0).lastChild.defaultValue;!0;var ib=D.documentElement,nd=/^key/,od=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pc=/^([^.]*)(?:\.(.+)|)/;g.event={global:{},add:function(b,c,d,e,f){var j,n,m,l,x,r,s,v,t,z;if(x=I.get(b)){d.handler&&(j=d,d=j.handler,f=j.selector);f&&g.find.matchesSelector(ib,f);d.guid||(d.guid=g.guid++);(l=x.events)||(l=x.events={});(n=x.handle)||(n=x.handle=function(c){return"undefined"!=typeof g&&g.event.triggered!==c.type?g.event.dispatch.apply(b,
arguments):void 0});c=(c||"").match(W)||[""];for(x=c.length;x--;)m=pc.exec(c[x])||[],t=z=m[1],m=(m[2]||"").split(".").sort(),t&&(s=g.event.special[t]||{},t=(f?s.delegateType:s.bindType)||t,s=g.event.special[t]||{},r=g.extend({type:t,origType:z,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&g.expr.match.needsContext.test(f),namespace:m.join(".")},j),(v=l[t])||(v=l[t]=[],v.delegateCount=0,s.setup&&!1!==s.setup.call(b,e,m,n)||b.addEventListener&&b.addEventListener(t,n)),s.add&&(s.add.call(b,
r),r.handler.guid||(r.handler.guid=d.guid)),f?v.splice(v.delegateCount++,0,r):v.push(r),g.event.global[t]=!0)}},remove:function(b,c,d,e,f){var j,n,m,l,x,r,s,v,t,z,B,u=I.hasData(b)&&I.get(b);if(u&&(l=u.events)){c=(c||"").match(W)||[""];for(x=c.length;x--;)if(m=pc.exec(c[x])||[],t=B=m[1],z=(m[2]||"").split(".").sort(),t){s=g.event.special[t]||{};t=(e?s.delegateType:s.bindType)||t;v=l[t]||[];m=m[2]&&RegExp("(^|\\.)"+z.join("\\.(?:.*\\.|)")+"(\\.|$)");for(n=j=v.length;j--;)r=v[j],!f&&B!==r.origType||
d&&d.guid!==r.guid||m&&!m.test(r.namespace)||e&&e!==r.selector&&("**"!==e||!r.selector)||(v.splice(j,1),r.selector&&v.delegateCount--,s.remove&&s.remove.call(b,r));n&&!v.length&&(s.teardown&&!1!==s.teardown.call(b,z,u.handle)||g.removeEvent(b,t,u.handle),delete l[t])}else for(t in l)g.event.remove(b,t+c[x],d,e,!0);g.isEmptyObject(l)&&I.remove(b,"handle events")}},dispatch:function(b){var c=g.event.fix(b),d,e,f,j,n,m,l=Array(arguments.length);e=(I.get(this,"events")||{})[c.type]||[];var x=g.event.special[c.type]||
{};l[0]=c;for(d=1;d<arguments.length;d++)l[d]=arguments[d];if(c.delegateTarget=this,!x.preDispatch||!1!==x.preDispatch.call(this,c)){m=g.event.handlers.call(this,c,e);for(d=0;(j=m[d++])&&!c.isPropagationStopped();){c.currentTarget=j.elem;for(e=0;(n=j.handlers[e++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(n.namespace)||(c.handleObj=n,c.data=n.data,f=((g.event.special[n.origType]||{}).handle||n.handler).apply(j.elem,l),void 0!==f&&!1===(c.result=f)&&(c.preventDefault(),
c.stopPropagation()))}return x.postDispatch&&x.postDispatch.call(this,c),c.result}},handlers:function(b,c){var d,e,f,j,n,m=[],l=c.delegateCount,x=b.target;if(l&&x.nodeType&&!("click"===b.type&&1<=b.button))for(;x!==this;x=x.parentNode||this)if(1===x.nodeType&&("click"!==b.type||!0!==x.disabled)){j=[];n={};for(d=0;d<l;d++)e=c[d],f=e.selector+" ",void 0===n[f]&&(n[f]=e.needsContext?-1<g(f,this).index(x):g.find(f,this,null,[x]).length),n[f]&&j.push(e);j.length&&m.push({elem:x,handlers:j})}return x=this,
l<c.length&&m.push({elem:x,handlers:c.slice(l)}),m},addProp:function(b,c){Object.defineProperty(g.Event.prototype,b,{enumerable:!0,configurable:!0,get:g.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[g.expando]?b:new g.Event(b)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==
Oa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Oa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&f(this,"input"))return this.click(),!1},_default:function(b){return f(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};g.removeEvent=function(b,c,d){b.removeEventListener&&b.removeEventListener(c,
d)};g.Event=function(b,c){return this instanceof g.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?fa:P,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&g.extend(this,c),this.timeStamp=b&&b.timeStamp||g.now(),void(this[g.expando]=!0)):new g.Event(b,c)};g.Event.prototype={constructor:g.Event,
isDefaultPrevented:P,isPropagationStopped:P,isImmediatePropagationStopped:P,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=fa;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=fa;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=fa;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};
g.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&nd.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&od.test(b.type)?1&c?1:2&c?3:4&
c?2:0:b.which}},g.event.addProp);g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){g.event.special[b]={delegateType:c,bindType:c,handle:function(b){var d,e=b.relatedTarget,A=b.handleObj;return e&&(e===this||g.contains(this,e))||(b.type=A.origType,d=A.handler.apply(this,arguments),b.type=c),d}}});g.fn.extend({on:function(b,c,d,e){return Pa(this,b,c,d,e)},one:function(b,c,d,e){return Pa(this,b,c,d,e,1)},off:function(b,c,d){var e,
f;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,g(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(f in b)this.off(f,c,b[f]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=void 0),!1===d&&(d=P),this.each(function(){g.event.remove(this,b,d,c)})}});var pd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qd=/<script|<style|<link/i,Lc=/checked\s*(?:[^=]|=\s*.checked.)/i,
Kc=/^true\/(.*)/,Mc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;g.extend({htmlPrefilter:function(b){return b.replace(pd,"<$1></$2>")},clone:function(b,c,d){var e,f,n,q,m=b.cloneNode(!0),l=g.contains(b.ownerDocument,b);if(!M.noCloneChecked&&!(1!==b.nodeType&&11!==b.nodeType||g.isXMLDoc(b))){q=j(m);n=j(b);e=0;for(f=n.length;e<f;e++){var r=n[e],s=q[e],v=s.nodeName.toLowerCase();"input"===v&&oc.test(r.type)?s.checked=r.checked:"input"!==v&&"textarea"!==v||(s.defaultValue=r.defaultValue)}}if(c)if(d){n=
n||j(b);q=q||j(m);e=0;for(f=n.length;e<f;e++)Ra(n[e],q[e])}else Ra(b,m);return q=j(m,"script"),0<q.length&&x(q,!l&&j(b,"script")),m},cleanData:function(b){for(var c,d,e,f=g.event.special,j=0;void 0!==(d=b[j]);j++)if(fb(d)){if(c=d[I.expando]){if(c.events)for(e in c.events)f[e]?g.event.remove(d,e):g.removeEvent(d,e,c.handle);d[I.expando]=void 0}d[T.expando]&&(d[T.expando]=void 0)}}});g.fn.extend({detach:function(b){return Jb(this,b,!0)},remove:function(b){return Jb(this,b)},text:function(b){return ja(this,
function(b){return void 0===b?g.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return ga(this,arguments,function(b){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&Q(this,b).appendChild(b)})},prepend:function(){return ga(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=Q(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return ga(this,
arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return ga(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===b.nodeType&&(g.cleanData(j(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return g.clone(this,b,c)})},html:function(b){return ja(this,function(b){var c=this[0]||{},d=0,e=this.length;
if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!qd.test(b)&&!V[(Gb.exec(b)||["",""])[1].toLowerCase()]){b=g.htmlPrefilter(b);try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(g.cleanData(j(c,!1)),c.innerHTML=b);c=0}catch(A){}}c&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return ga(this,arguments,function(c){var d=this.parentNode;0>g.inArray(this,b)&&(g.cleanData(j(this)),d&&d.replaceChild(c,this))},b)}});g.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){g.fn[b]=function(b){for(var d=[],e=g(b),A=e.length-1,f=0;f<=A;f++)b=f===A?this:this.clone(!0),g(e[f])[c](b),qb.apply(d,b.get());return this.pushStack(d)}});var Kb=/^margin/,lb=RegExp("^("+mc+")(?!px)[a-z%]+$","i"),Sa=function(c){var d=c.ownerDocument.defaultView;return d&&d.opener||(d=b),d.getComputedStyle(c)},kb=function(){if(ca){ca.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
ca.innerHTML="";ib.appendChild(jb);var c=b.getComputedStyle(ca);qc="1%"!==c.top;rc="2px"===c.marginLeft;sc="4px"===c.width;ca.style.marginRight="50%";tc="4px"===c.marginRight;ib.removeChild(jb);ca=null}},qc,sc,tc,rc,jb=D.createElement("div"),ca=D.createElement("div");ca.style&&(ca.style.backgroundClip="content-box",ca.cloneNode(!0).style.backgroundClip="",M.clearCloneStyle="content-box"===ca.style.backgroundClip,jb.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
jb.appendChild(ca),g.extend(M,{pixelPosition:function(){return kb(),qc},boxSizingReliable:function(){return kb(),sc},pixelMarginRight:function(){return kb(),tc},reliableMarginLeft:function(){return kb(),rc}}));!0;var rd=/^(none|table(?!-c[ea]).+)/,uc=/^--/,sd={position:"absolute",visibility:"hidden",display:"block"},vc={letterSpacing:"0",fontWeight:"400"},Ob=["Webkit","Moz","ms"],Nb=D.createElement("div").style;g.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=Ga(b,"opacity");return""===
d?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,d,e){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var f,j,n,m=g.camelCase(c),l=uc.test(c),x=b.style;return l||(c=Mb(m)),n=g.cssHooks[c]||g.cssHooks[m],void 0===d?n&&"get"in n&&void 0!==(f=n.get(b,!1,e))?f:x[c]:(j=typeof d,"string"===j&&(f=Fa.exec(d))&&f[1]&&
(d=F(b,c,f),j="number"),null!=d&&d===d&&("number"===j&&(d+=f&&f[3]||(g.cssNumber[m]?"":"px")),M.clearCloneStyle||""!==d||0!==c.indexOf("background")||(x[c]="inherit"),n&&"set"in n&&void 0===(d=n.set(b,d,e))||(l?x.setProperty(c,d):x[c]=d)),void 0)}},css:function(b,c,d,e){var f,j,n,m=g.camelCase(c);return uc.test(c)||(c=Mb(m)),n=g.cssHooks[c]||g.cssHooks[m],n&&"get"in n&&(f=n.get(b,!0,d)),void 0===f&&(f=Ga(b,c,e)),"normal"===f&&c in vc&&(f=vc[c]),""===d||d?(j=parseFloat(f),!0===d||isFinite(j)?j||0:
f):f}});g.each(["height","width"],function(b,c){g.cssHooks[c]={get:function(b,d,e){if(d)return!rd.test(g.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?Rb(b,c,e):nc(b,sd,function(){return Rb(b,c,e)})},set:function(b,d,e){var A,f=e&&Sa(b);e=e&&Qb(b,c,e,"border-box"===g.css(b,"boxSizing",!1,f),f);return e&&(A=Fa.exec(d))&&"px"!==(A[3]||"px")&&(b.style[c]=d,d=g.css(b,c)),Pb(b,d,e)}}});g.cssHooks.marginLeft=Lb(M.reliableMarginLeft,function(b,c){if(c)return(parseFloat(Ga(b,
"marginLeft"))||b.getBoundingClientRect().left-nc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});g.each({margin:"",padding:"",border:"Width"},function(b,c){g.cssHooks[b+c]={expand:function(d){var e=0,g={};for(d="string"==typeof d?d.split(" "):[d];4>e;e++)g[b+pa[e]+c]=d[e]||d[e-2]||d[0];return g}};Kb.test(b)||(g.cssHooks[b+c].set=Pb)});g.fn.extend({css:function(b,c){return ja(this,function(b,c,d){var e,f={},A=0;if(Array.isArray(c)){d=Sa(b);for(e=c.length;A<e;A++)f[c[A]]=
g.css(b,c[A],!1,d);return f}return void 0!==d?g.style(b,c,d):g.css(b,c)},b,c,1<arguments.length)}});g.Tween=U;U.prototype={constructor:U,init:function(b,c,d,e,f,j){this.elem=b;this.prop=d;this.easing=f||g.easing._default;this.options=c;this.start=this.now=this.cur();this.end=e;this.unit=j||(g.cssNumber[d]?"":"px")},cur:function(){var b=U.propHooks[this.prop];return b&&b.get?b.get(this):U.propHooks._default.get(this)},run:function(b){var c,d=U.propHooks[this.prop];return this.options.duration?this.pos=
c=g.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=c=b,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):U.propHooks._default.set(this),this}};U.prototype.init.prototype=U.prototype;U.propHooks={_default:{get:function(b){var c;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(c=g.css(b.elem,b.prop,""),c&&"auto"!==c?c:0)},set:function(b){g.fx.step[b.prop]?
g.fx.step[b.prop](b):1!==b.elem.nodeType||null==b.elem.style[g.cssProps[b.prop]]&&!g.cssHooks[b.prop]?b.elem[b.prop]=b.now:g.style(b.elem,b.prop,b.now+b.unit)}}};U.propHooks.scrollTop=U.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};g.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2},_default:"swing"};g.fx=U.prototype.init;g.fx.step={};var za,Ta,td=/^(?:toggle|show|hide)$/,ud=/queueHooks$/;g.Animation=g.extend(aa,
{tweeners:{"*":[function(b,c){var d=this.createTween(b,c);return F(d.elem,b,Fa.exec(c),d),d}]},tweener:function(b,c){g.isFunction(b)?(c=b,b=["*"]):b=b.match(W);for(var d,e=0,f=b.length;e<f;e++)d=b[e],aa.tweeners[d]=aa.tweeners[d]||[],aa.tweeners[d].unshift(c)},prefilters:[function(b,c,d){var e,f,j,m,l,x,r,s,v="width"in c||"height"in c,t=this,z={},B=b.style,u=b.nodeType&&Na(b),F=I.get(b,"fxshow");d.queue||(m=g._queueHooks(b,"fx"),null==m.unqueued&&(m.unqueued=0,l=m.empty.fire,m.empty.fire=function(){m.unqueued||
l()}),m.unqueued++,t.always(function(){t.always(function(){m.unqueued--;g.queue(b,"fx").length||m.empty.fire()})}));for(e in c)if(f=c[e],td.test(f)){if(delete c[e],j=j||"toggle"===f,f===(u?"hide":"show")){if("show"!==f||!F||void 0===F[e])continue;u=!0}z[e]=F&&F[e]||g.style(b,e)}if(x=!g.isEmptyObject(c),x||!g.isEmptyObject(z))for(e in v&&1===b.nodeType&&(d.overflow=[B.overflow,B.overflowX,B.overflowY],r=F&&F.display,null==r&&(r=I.get(b,"display")),s=g.css(b,"display"),"none"===s&&(r?s=r:(n([b],!0),
r=b.style.display||r,s=g.css(b,"display"),n([b]))),("inline"===s||"inline-block"===s&&null!=r)&&"none"===g.css(b,"float")&&(x||(t.done(function(){B.display=r}),null==r&&(s=B.display,r="none"===s?"":s)),B.display="inline-block")),d.overflow&&(B.overflow="hidden",t.always(function(){B.overflow=d.overflow[0];B.overflowX=d.overflow[1];B.overflowY=d.overflow[2]})),x=!1,z)x||(F?"hidden"in F&&(u=F.hidden):F=I.access(b,"fxshow",{display:r}),j&&(F.hidden=!u),u&&n([b],!0),t.done(function(){u||n([b]);I.remove(b,
"fxshow");for(e in z)g.style(b,e,z[e])})),x=Tb(u?F[e]:0,e,t),e in F||(F[e]=x.start,u&&(x.end=x.start,x.start=0))}],prefilter:function(b,c){c?aa.prefilters.unshift(b):aa.prefilters.push(b)}});g.speed=function(b,c,d){var e=b&&"object"==typeof b?g.extend({},b):{complete:d||!d&&c||g.isFunction(b)&&b,duration:b,easing:d&&c||c&&!g.isFunction(c)&&c};return g.fx.off?e.duration=0:"number"!=typeof e.duration&&(e.duration in g.fx.speeds?e.duration=g.fx.speeds[e.duration]:e.duration=g.fx.speeds._default),null!=
e.queue&&!0!==e.queue||(e.queue="fx"),e.old=e.complete,e.complete=function(){g.isFunction(e.old)&&e.old.call(this);e.queue&&g.dequeue(this,e.queue)},e};g.fn.extend({fadeTo:function(b,c,d,e){return this.filter(Na).css("opacity",0).show().end().animate({opacity:c},b,d,e)},animate:function(b,c,d,e){var f=g.isEmptyObject(b),j=g.speed(c,d,e);c=function(){var c=aa(this,g.extend({},b),j);(f||I.get(this,"finish"))&&c.stop(!0)};return c.finish=c,f||!1===j.queue?this.each(c):this.queue(j.queue,c)},stop:function(b,
c,d){var e=function(b){var c=b.stop;delete b.stop;c(d)};return"string"!=typeof b&&(d=c,c=b,b=void 0),c&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var c=!0,f=null!=b&&b+"queueHooks",j=g.timers,n=I.get(this);if(f)n[f]&&n[f].stop&&e(n[f]);else for(f in n)n[f]&&n[f].stop&&ud.test(f)&&e(n[f]);for(f=j.length;f--;)j[f].elem!==this||null!=b&&j[f].queue!==b||(j[f].anim.stop(d),c=!1,j.splice(f,1));!c&&d||g.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var c,
d=I.get(this),e=d[b+"queue"];c=d[b+"queueHooks"];var f=g.timers,j=e?e.length:0;d.finish=!0;g.queue(this,b,[]);c&&c.stop&&c.stop.call(this,!0);for(c=f.length;c--;)f[c].elem===this&&f[c].queue===b&&(f[c].anim.stop(!0),f.splice(c,1));for(c=0;c<j;c++)e[c]&&e[c].finish&&e[c].finish.call(this);delete d.finish})}});g.each(["toggle","show","hide"],function(b,c){var d=g.fn[c];g.fn[c]=function(b,e,g){return null==b||"boolean"==typeof b?d.apply(this,arguments):this.animate(Ua(c,!0),b,e,g)}});g.each({slideDown:Ua("show"),
slideUp:Ua("hide"),slideToggle:Ua("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){g.fn[b]=function(b,d,e){return this.animate(c,b,d,e)}});g.timers=[];g.fx.tick=function(){var b,c=0,d=g.timers;for(za=g.now();c<d.length;c++)b=d[c],b()||d[c]!==b||d.splice(c--,1);d.length||g.fx.stop();za=void 0};g.fx.timer=function(b){g.timers.push(b);g.fx.start()};g.fx.interval=13;g.fx.start=function(){Ta||(Ta=!0,mb())};g.fx.stop=function(){Ta=null};g.fx.speeds=
{slow:600,fast:200,_default:400};g.fn.delay=function(c,d){return c=g.fx?g.fx.speeds[c]||c:c,d=d||"fx",this.queue(d,function(d,e){var g=b.setTimeout(d,c);e.stop=function(){b.clearTimeout(g)}})};var Da=D.createElement("input"),vd=D.createElement("select").appendChild(D.createElement("option"));Da.type="checkbox";M.checkOn=""!==Da.value;M.optSelected=vd.selected;Da=D.createElement("input");Da.value="t";Da.type="radio";M.radioValue="t"===Da.value;var wc,Ka=g.expr.attrHandle;g.fn.extend({attr:function(b,
c){return ja(this,g.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){g.removeAttr(this,b)})}});g.extend({attr:function(b,c,d){var e,f,j=b.nodeType;if(3!==j&&8!==j&&2!==j)return"undefined"==typeof b.getAttribute?g.prop(b,c,d):(1===j&&g.isXMLDoc(b)||(f=g.attrHooks[c.toLowerCase()]||(g.expr.match.bool.test(c)?wc:void 0)),void 0!==d?null===d?void g.removeAttr(b,c):f&&"set"in f&&void 0!==(e=f.set(b,d,c))?e:(b.setAttribute(c,d+""),d):f&&"get"in f&&null!==(e=f.get(b,c))?e:
(e=g.find.attr(b,c),null==e?void 0:e))},attrHooks:{type:{set:function(b,c){if(!M.radioValue&&"radio"===c&&f(b,"input")){var d=b.value;return b.setAttribute("type",c),d&&(b.value=d),c}}}},removeAttr:function(b,c){var d,e=0,g=c&&c.match(W);if(g&&1===b.nodeType)for(;d=g[e++];)b.removeAttribute(d)}});wc={set:function(b,c,d){return!1===c?g.removeAttr(b,d):b.setAttribute(d,d),d}};g.each(g.expr.match.bool.source.match(/\w+/g),function(b,c){var d=Ka[c]||g.find.attr;Ka[c]=function(b,c,e){var g,f,j=c.toLowerCase();
return e||(f=Ka[j],Ka[j]=g,g=null!=d(b,c,e)?j:null,Ka[j]=f),g}});var wd=/^(?:input|select|textarea|button)$/i,xd=/^(?:a|area)$/i;g.fn.extend({prop:function(b,c){return ja(this,g.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[g.propFix[b]||b]})}});g.extend({prop:function(b,c,d){var e,f,j=b.nodeType;if(3!==j&&8!==j&&2!==j)return 1===j&&g.isXMLDoc(b)||(c=g.propFix[c]||c,f=g.propHooks[c]),void 0!==d?f&&"set"in f&&void 0!==(e=f.set(b,d,c))?e:b[c]=d:f&&"get"in
f&&null!==(e=f.get(b,c))?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=g.find.attr(b,"tabindex");return c?parseInt(c,10):wd.test(b.nodeName)||xd.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});M.optSelected||(g.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});g.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){g.propFix[this.toLowerCase()]=this});g.fn.extend({addClass:function(b){var c,d,e,f,j,n,m=0;if(g.isFunction(b))return this.each(function(c){g(this).addClass(b.call(this,c,ra(this)))});if("string"==typeof b&&b)for(c=b.match(W)||[];d=this[m++];)if(f=ra(d),e=1===d.nodeType&&" "+qa(f)+" "){for(n=0;j=c[n++];)0>e.indexOf(" "+j+" ")&&(e+=j+" ");e=qa(e);f!==e&&d.setAttribute("class",e)}return this},removeClass:function(b){var c,d,e,f,j,n,m=0;if(g.isFunction(b))return this.each(function(c){g(this).removeClass(b.call(this,
c,ra(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(W)||[];d=this[m++];)if(f=ra(d),e=1===d.nodeType&&" "+qa(f)+" "){for(n=0;j=c[n++];)for(;-1<e.indexOf(" "+j+" ");)e=e.replace(" "+j+" "," ");e=qa(e);f!==e&&d.setAttribute("class",e)}return this},toggleClass:function(b,c){var d=typeof b;return"boolean"==typeof c&&"string"===d?c?this.addClass(b):this.removeClass(b):g.isFunction(b)?this.each(function(d){g(this).toggleClass(b.call(this,d,ra(this),c),
c)}):this.each(function(){var c,e,f,j;if("string"===d){e=0;f=g(this);for(j=b.match(W)||[];c=j[e++];)f.hasClass(c)?f.removeClass(c):f.addClass(c)}else void 0!==b&&"boolean"!==d||(c=ra(this),c&&I.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":I.get(this,"__className__")||""))})},hasClass:function(b){var c,d=0;for(b=" "+b+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+qa(ra(c))+" ").indexOf(b))return!0;return!1}});var yd=/\r/g;g.fn.extend({val:function(b){var c,d,
e,f=this[0];if(arguments.length)return e=g.isFunction(b),this.each(function(d){var f;1===this.nodeType&&(f=e?b.call(this,d,g(this).val()):b,null==f?f="":"number"==typeof f?f+="":Array.isArray(f)&&(f=g.map(f,function(b){return null==b?"":b+""})),c=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,f,"value")||(this.value=f))});if(f)return c=g.valHooks[f.type]||g.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&void 0!==(d=c.get(f,"value"))?d:(d=f.value,
"string"==typeof d?d.replace(yd,""):null==d?"":d)}});g.extend({valHooks:{option:{get:function(b){var c=g.find.attr(b,"value");return null!=c?c:qa(g.text(b))}},select:{get:function(b){var c,d,e=b.options,j=b.selectedIndex,n="select-one"===b.type,m=n?null:[],l=n?j+1:e.length;for(d=0>j?l:n?j:0;d<l;d++)if(c=e[d],(c.selected||d===j)&&!c.disabled&&(!c.parentNode.disabled||!f(c.parentNode,"optgroup"))){if(b=g(c).val(),n)return b;m.push(b)}return m},set:function(b,c){for(var d,e,f=b.options,j=g.makeArray(c),
n=f.length;n--;)e=f[n],(e.selected=-1<g.inArray(g.valHooks.option.get(e),j))&&(d=!0);return d||(b.selectedIndex=-1),j}}}});g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(b,c){if(Array.isArray(c))return b.checked=-1<g.inArray(g(b).val(),c)}};M.checkOn||(g.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var xc=/^(?:focusinfocus|focusoutblur)$/;g.extend(g.event,{trigger:function(c,d,e,f){var j,n,m,l,x,r,s,t=[e||D],v=Wa.call(c,"type")?c.type:
c;j=Wa.call(c,"namespace")?c.namespace.split("."):[];if(n=m=e=e||D,3!==e.nodeType&&8!==e.nodeType&&!xc.test(v+g.event.triggered)&&(-1<v.indexOf(".")&&(j=v.split("."),v=j.shift(),j.sort()),x=0>v.indexOf(":")&&"on"+v,c=c[g.expando]?c:new g.Event(v,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=j.join("."),c.rnamespace=c.namespace?RegExp("(^|\\.)"+j.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=void 0,c.target||(c.target=e),d=null==d?[c]:g.makeArray(d,[c]),s=g.event.special[v]||{},f||!s.trigger||
!1!==s.trigger.apply(e,d))){if(!f&&!s.noBubble&&!g.isWindow(e)){l=s.delegateType||v;for(xc.test(l+v)||(n=n.parentNode);n;n=n.parentNode)t.push(n),m=n;m===(e.ownerDocument||D)&&t.push(m.defaultView||m.parentWindow||b)}for(j=0;(n=t[j++])&&!c.isPropagationStopped();)c.type=1<j?l:s.bindType||v,(r=(I.get(n,"events")||{})[c.type]&&I.get(n,"handle"))&&r.apply(n,d),(r=x&&n[x])&&r.apply&&fb(n)&&(c.result=r.apply(n,d),!1===c.result&&c.preventDefault());return c.type=v,f||c.isDefaultPrevented()||s._default&&
!1!==s._default.apply(t.pop(),d)||!fb(e)||x&&g.isFunction(e[v])&&!g.isWindow(e)&&(m=e[x],m&&(e[x]=null),g.event.triggered=v,e[v](),g.event.triggered=void 0,m&&(e[x]=m)),c.result}},simulate:function(b,c,d){b=g.extend(new g.Event,d,{type:b,isSimulated:!0});g.event.trigger(b,null,c)}});g.fn.extend({trigger:function(b,c){return this.each(function(){g.event.trigger(b,c,this)})},triggerHandler:function(b,c){var d=this[0];if(d)return g.event.trigger(b,c,d,!0)}});g.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(b,c){g.fn[c]=function(b,d){return 0<arguments.length?this.on(c,null,b,d):this.trigger(c)}});g.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});M.focusin="onfocusin"in b;M.focusin||g.each({focus:"focusin",blur:"focusout"},function(b,c){var d=function(b){g.event.simulate(c,b.target,g.event.fix(b))};g.event.special[c]={setup:function(){var e=this.ownerDocument||this,g=I.access(e,c);g||e.addEventListener(b,d,!0);I.access(e,c,(g||0)+1)},teardown:function(){var e=this.ownerDocument||
this,g=I.access(e,c)-1;g?I.access(e,c,g):(e.removeEventListener(b,d,!0),I.remove(e,c))}}});var La=b.location,yc=g.now(),Cb=/\?/;g.parseXML=function(c){var d;if(!c||"string"!=typeof c)return null;try{d=(new b.DOMParser).parseFromString(c,"text/xml")}catch(e){d=void 0}return d&&!d.getElementsByTagName("parsererror").length||g.error("Invalid XML: "+c),d};var Nc=/\[\]$/,zc=/\r?\n/g,zd=/^(?:submit|button|image|reset|file)$/i,Ad=/^(?:input|select|textarea|keygen)/i;g.param=function(b,c){var d,e=[],f=function(b,
c){var d=g.isFunction(c)?c():c;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==d?"":d)};if(Array.isArray(b)||b.jquery&&!g.isPlainObject(b))g.each(b,function(){f(this.name,this.value)});else for(d in b)nb(d,b[d],c,f);return e.join("&")};g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=g.prop(this,"elements");return b?g.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!g(this).is(":disabled")&&
Ad.test(this.nodeName)&&!zd.test(b)&&(this.checked||!oc.test(b))}).map(function(b,c){var d=g(this).val();return null==d?null:Array.isArray(d)?g.map(d,function(b){return{name:c.name,value:b.replace(zc,"\r\n")}}):{name:c.name,value:d.replace(zc,"\r\n")}}).get()}});var Bd=/%20/g,Cd=/#.*$/,Dd=/([?&])_=[^&]*/,Ed=/^(.*?):[ \t]*([^\r\n]*)$/gm,Fd=/^(?:GET|HEAD)$/,Gd=/^\/\//,Ac={},ob={},Bc="*/".concat("*"),Db=D.createElement("a");Db.href=La.href;g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:La.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(La.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":g.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?pb(pb(b,g.ajaxSettings),c):pb(g.ajaxSettings,b)},ajaxPrefilter:Ub(Ac),ajaxTransport:Ub(ob),ajax:function(c,d){function e(c,d,m,x){var A,q,y,v,t=d;if(!r){r=!0;l&&b.clearTimeout(l);f=void 0;n=x||"";N.readyState=0<c?4:0;x=200<=c&&300>c||304===c;if(m){y=z;for(var G=N,P,E,H,D,Q=y.contents,K=y.dataTypes;"*"===K[0];)K.shift(),void 0===P&&(P=y.mimeType||G.getResponseHeader("Content-Type"));if(P)for(E in Q)if(Q[E]&&Q[E].test(P)){K.unshift(E);
break}if(K[0]in m)H=K[0];else{for(E in m){if(!K[0]||y.converters[E+" "+K[0]]){H=E;break}D||(D=E)}H=H||D}m=H?(H!==K[0]&&K.unshift(H),m[H]):void 0;y=m}var M;a:{m=z;P=y;E=N;H=x;var L,O,ka;y={};G=m.dataTypes.slice();if(G[1])for(L in m.converters)y[L.toLowerCase()]=m.converters[L];for(D=G.shift();D;)if(m.responseFields[D]&&(E[m.responseFields[D]]=P),!ka&&H&&m.dataFilter&&(P=m.dataFilter(P,m.dataType)),ka=D,D=G.shift())if("*"===D)D=ka;else if("*"!==ka&&ka!==D){if(L=y[ka+" "+D]||y["* "+D],!L)for(M in y)if(O=
M.split(" "),O[1]===D&&(L=y[ka+" "+O[0]]||y["* "+O[0]])){!0===L?L=y[M]:!0!==y[M]&&(D=O[0],G.unshift(O[1]));break}if(!0!==L)if(L&&m["throws"])P=L(P);else try{P=L(P)}catch(Oa){M={state:"parsererror",error:L?Oa:"No conversion from "+ka+" to "+D};break a}}M={state:"success",data:P}}y=M;x?(z.ifModified&&(v=N.getResponseHeader("Last-Modified"),v&&(g.lastModified[j]=v),v=N.getResponseHeader("etag"),v&&(g.etag[j]=v)),204===c||"HEAD"===z.type?t="nocontent":304===c?t="notmodified":(t=y.state,A=y.data,q=y.error,
x=!q)):(q=t,!c&&t||(t="error",0>c&&(c=0)));N.status=c;N.statusText=(d||t)+"";x?F.resolveWith(B,[A,t,N]):F.rejectWith(B,[N,t,q]);N.statusCode(fa);fa=void 0;s&&u.trigger(x?"ajaxSuccess":"ajaxError",[N,z,x?A:q]);I.fireWith(B,[N,t]);s&&(u.trigger("ajaxComplete",[N,z]),--g.active||g.event.trigger("ajaxStop"))}}"object"==typeof c&&(d=c,c=void 0);d=d||{};var f,j,n,m,l,x,r,s,v,t,z=g.ajaxSetup({},d),B=z.context||z,u=z.context&&(B.nodeType||B.jquery)?g(B):g.event,F=g.Deferred(),I=g.Callbacks("once memory"),
fa=z.statusCode||{},P={},E={},H="canceled",N={readyState:0,getResponseHeader:function(b){var c;if(r){if(!m)for(m={};c=Ed.exec(n);)m[c[1].toLowerCase()]=c[2];c=m[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return r?n:null},setRequestHeader:function(b,c){return null==r&&(b=E[b.toLowerCase()]=E[b.toLowerCase()]||b,P[b]=c),this},overrideMimeType:function(b){return null==r&&(z.mimeType=b),this},statusCode:function(b){var c;if(b)if(r)N.always(b[N.status]);else for(c in b)fa[c]=
[fa[c],b[c]];return this},abort:function(b){b=b||H;return f&&f.abort(b),e(0,b),this}};if(F.promise(N),z.url=((c||z.url||La.href)+"").replace(Gd,La.protocol+"//"),z.type=d.method||d.type||z.method||z.type,z.dataTypes=(z.dataType||"*").toLowerCase().match(W)||[""],null==z.crossDomain){x=D.createElement("a");try{x.href=z.url,x.href=x.href,z.crossDomain=Db.protocol+"//"+Db.host!=x.protocol+"//"+x.host}catch(Q){z.crossDomain=!0}}if(z.data&&z.processData&&"string"!=typeof z.data&&(z.data=g.param(z.data,
z.traditional)),Vb(Ac,z,d,N),r)return N;(s=g.event&&z.global)&&0===g.active++&&g.event.trigger("ajaxStart");z.type=z.type.toUpperCase();z.hasContent=!Fd.test(z.type);j=z.url.replace(Cd,"");z.hasContent?z.data&&z.processData&&0===(z.contentType||"").indexOf("application/x-www-form-urlencoded")&&(z.data=z.data.replace(Bd,"+")):(t=z.url.slice(j.length),z.data&&(j+=(Cb.test(j)?"&":"?")+z.data,delete z.data),!1===z.cache&&(j=j.replace(Dd,"$1"),t=(Cb.test(j)?"&":"?")+"_="+yc++ +t),z.url=j+t);z.ifModified&&
(g.lastModified[j]&&N.setRequestHeader("If-Modified-Since",g.lastModified[j]),g.etag[j]&&N.setRequestHeader("If-None-Match",g.etag[j]));(z.data&&z.hasContent&&!1!==z.contentType||d.contentType)&&N.setRequestHeader("Content-Type",z.contentType);N.setRequestHeader("Accept",z.dataTypes[0]&&z.accepts[z.dataTypes[0]]?z.accepts[z.dataTypes[0]]+("*"!==z.dataTypes[0]?", "+Bc+"; q=0.01":""):z.accepts["*"]);for(v in z.headers)N.setRequestHeader(v,z.headers[v]);if(z.beforeSend&&(!1===z.beforeSend.call(B,N,z)||
r))return N.abort();if(H="abort",I.add(z.complete),N.done(z.success),N.fail(z.error),f=Vb(ob,z,d,N)){if(N.readyState=1,s&&u.trigger("ajaxSend",[N,z]),r)return N;z.async&&0<z.timeout&&(l=b.setTimeout(function(){N.abort("timeout")},z.timeout));try{r=!1,f.send(P,e)}catch(K){if(r)throw K;e(-1,K)}}else e(-1,"No Transport");return N},getJSON:function(b,c,d){return g.get(b,c,d,"json")},getScript:function(b,c){return g.get(b,void 0,c,"script")}});g.each(["get","post"],function(b,c){g[c]=function(b,d,e,f){return g.isFunction(d)&&
(f=f||e,e=d,d=void 0),g.ajax(g.extend({url:b,type:c,dataType:f,data:d,success:e},g.isPlainObject(b)&&b))}});g._evalUrl=function(b){return g.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};g.fn.extend({wrapAll:function(b){var c;return this[0]&&(g.isFunction(b)&&(b=b.call(this[0])),c=g(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),
this},wrapInner:function(b){return g.isFunction(b)?this.each(function(c){g(this).wrapInner(b.call(this,c))}):this.each(function(){var c=g(this),d=c.contents();d.length?d.wrapAll(b):c.append(b)})},wrap:function(b){var c=g.isFunction(b);return this.each(function(d){g(this).wrapAll(c?b.call(this,d):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){g(this).replaceWith(this.childNodes)}),this}});g.expr.pseudos.hidden=function(b){return!g.expr.pseudos.visible(b)};g.expr.pseudos.visible=
function(b){return!(!b.offsetWidth&&!b.offsetHeight&&!b.getClientRects().length)};g.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(c){}};var Hd={"0":200,1223:204},Ma=g.ajaxSettings.xhr();M.cors=!!Ma&&"withCredentials"in Ma;M.ajax=Ma=!!Ma;g.ajaxTransport(function(c){var d,e;if(M.cors||Ma&&!c.crossDomain)return{send:function(g,f){var j,n=c.xhr();if(n.open(c.type,c.url,c.async,c.username,c.password),c.xhrFields)for(j in c.xhrFields)n[j]=c.xhrFields[j];c.mimeType&&n.overrideMimeType&&
n.overrideMimeType(c.mimeType);c.crossDomain||g["X-Requested-With"]||(g["X-Requested-With"]="XMLHttpRequest");for(j in g)n.setRequestHeader(j,g[j]);d=function(b){return function(){d&&(d=e=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===b?n.abort():"error"===b?"number"!=typeof n.status?f(0,"error"):f(n.status,n.statusText):f(Hd[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}};
n.onload=d();e=n.onerror=d("error");void 0!==n.onabort?n.onabort=e:n.onreadystatechange=function(){4===n.readyState&&b.setTimeout(function(){d&&e()})};d=d("abort");try{n.send(c.hasContent&&c.data||null)}catch(m){if(d)throw m;}},abort:function(){d&&d()}}});g.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return g.globalEval(b),
b}}});g.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});g.ajaxTransport("script",function(b){if(b.crossDomain){var c,d;return{send:function(e,f){c=g("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",d=function(b){c.remove();d=null;b&&f("error"===b.type?404:200,b.type)});D.head.appendChild(c[0])},abort:function(){d&&d()}}}});var Cc=[],Eb=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Cc.pop()||g.expando+
"_"+yc++;return this[b]=!0,b}});g.ajaxPrefilter("json jsonp",function(c,d,e){var f,j,n,m=!1!==c.jsonp&&(Eb.test(c.url)?"url":"string"==typeof c.data&&0===(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Eb.test(c.data)&&"data");if(m||"jsonp"===c.dataTypes[0])return f=c.jsonpCallback=g.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,m?c[m]=c[m].replace(Eb,"$1"+f):!1!==c.jsonp&&(c.url+=(Cb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return n||
g.error(f+" was not called"),n[0]},c.dataTypes[0]="json",j=b[f],b[f]=function(){n=arguments},e.always(function(){void 0===j?g(b).removeProp(f):b[f]=j;c[f]&&(c.jsonpCallback=d.jsonpCallback,Cc.push(f));n&&g.isFunction(j)&&j(n[0]);n=j=void 0}),"script"});var Id=M,Dc,Ec=D.implementation.createHTMLDocument("").body;Dc=(Ec.innerHTML="<form></form><form></form>",2===Ec.childNodes.length);Id.createHTMLDocument=Dc;g.parseHTML=function(b,c,d){if("string"!=typeof b)return[];"boolean"==typeof c&&(d=c,c=!1);
var e,f,j;return c||(M.createHTMLDocument?(c=D.implementation.createHTMLDocument(""),e=c.createElement("base"),e.href=D.location.href,c.head.appendChild(e)):c=D),f=kc.exec(b),j=!d&&[],f?[c.createElement(f[1])]:(f=z([b],c,j),j&&j.length&&g(j).remove(),g.merge([],f.childNodes))};g.fn.load=function(b,c,d){var e,f,j,n=this,m=b.indexOf(" ");return-1<m&&(e=qa(b.slice(m)),b=b.slice(0,m)),g.isFunction(c)?(d=c,c=void 0):c&&"object"==typeof c&&(f="POST"),0<n.length&&g.ajax({url:b,type:f||"GET",dataType:"html",
data:c}).done(function(b){j=arguments;n.html(e?g("<div>").append(g.parseHTML(b)).find(e):b)}).always(d&&function(b,c){n.each(function(){d.apply(this,j||[b.responseText,c,b])})}),this};g.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){g.fn[c]=function(b){return this.on(c,b)}});g.expr.pseudos.animated=function(b){return g.grep(g.timers,function(c){return b===c.elem}).length};g.offset={setOffset:function(b,c,d){var e,f,j,n,m,l,x=g.css(b,"position"),r=g(b),
s={};"static"===x&&(b.style.position="relative");m=r.offset();j=g.css(b,"top");l=g.css(b,"left");("absolute"===x||"fixed"===x)&&-1<(j+l).indexOf("auto")?(e=r.position(),n=e.top,f=e.left):(n=parseFloat(j)||0,f=parseFloat(l)||0);g.isFunction(c)&&(c=c.call(b,d,g.extend({},m)));null!=c.top&&(s.top=c.top-m.top+n);null!=c.left&&(s.left=c.left-m.left+f);"using"in c?c.using.call(b,s):r.css(s)}};g.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){g.offset.setOffset(this,
b,c)});var c,d,e,f,j=this[0];if(j)return j.getClientRects().length?(e=j.getBoundingClientRect(),c=j.ownerDocument,d=c.documentElement,f=c.defaultView,{top:e.top+f.pageYOffset-d.clientTop,left:e.left+f.pageXOffset-d.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var b,c,d=this[0],e={top:0,left:0};return"fixed"===g.css(d,"position")?c=d.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),f(b[0],"html")||(e=b.offset()),e={top:e.top+g.css(b[0],"borderTopWidth",!0),left:e.left+
g.css(b[0],"borderLeftWidth",!0)}),{top:c.top-e.top-g.css(d,"marginTop",!0),left:c.left-e.left-g.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===g.css(b,"position");)b=b.offsetParent;return b||ib})}});g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;g.fn[b]=function(e){return ja(this,function(b,e,f){var j;return g.isWindow(b)?j=b:9===b.nodeType&&(j=b.defaultView),void 0===f?j?j[c]:
b[e]:void(j?j.scrollTo(d?j.pageXOffset:f,d?f:j.pageYOffset):b[e]=f)},b,e,arguments.length)}});g.each(["top","left"],function(b,c){g.cssHooks[c]=Lb(M.pixelPosition,function(b,d){if(d)return d=Ga(b,c),lb.test(d)?g(b).position()[c]+"px":d})});g.each({Height:"height",Width:"width"},function(b,c){g.each({padding:"inner"+b,content:c,"":"outer"+b},function(d,e){g.fn[e]=function(f,j){var n=arguments.length&&(d||"boolean"!=typeof f),m=d||(!0===f||!0===j?"margin":"border");return ja(this,function(c,d,f){var j;
return g.isWindow(c)?0===e.indexOf("outer")?c["inner"+b]:c.document.documentElement["client"+b]:9===c.nodeType?(j=c.documentElement,Math.max(c.body["scroll"+b],j["scroll"+b],c.body["offset"+b],j["offset"+b],j["client"+b])):void 0===f?g.css(c,d,m):g.style(c,d,f,m)},c,n?f:void 0,n)}})});g.fn.extend({bind:function(b,c,d){return this.on(b,null,c,d)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,c,d,e){return this.on(c,b,d,e)},undelegate:function(b,c,d){return 1===arguments.length?
this.off(b,"**"):this.off(c,b||"**",d)}});g.holdReady=function(b){b?g.readyWait++:g.ready(!0)};g.isArray=Array.isArray;g.parseJSON=JSON.parse;g.nodeName=f;"function"==typeof define&&define.amd&&define("jquery",[],function(){return g});var Jd=b.jQuery,Kd=b.$;return g.noConflict=function(c){return b.$===g&&(b.$=Kd),c&&b.jQuery===g&&(b.jQuery=Jd),g},c||(b.jQuery=b.$=g),g});function getInternetExplorerVersion(){var b=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b}var ie=getInternetExplorerVersion();function getQueryVariable(b){for(var c=window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==b)return decodeURIComponent(e[1])}};this.jukebox={};
jukebox.Player=function(b,c){this.id=++jukebox.__jukeboxId;this.origin=c||null;this.settings={};for(var d in this.defaults)this.settings[d]=this.defaults[d];if("[object Object]"===Object.prototype.toString.call(b))for(var e in b)this.settings[e]=b[e];"[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager);this.resource=this.isPlaying=null;this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||
null;if(null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";this.__init();return this};jukebox.__jukeboxId=0;
jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1E3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var b=this,c=this.settings,d={},e;jukebox.Manager&&void 0!==jukebox.Manager.features&&(d=jukebox.Manager.features);if(!0===d.html5audio){this.context=new Audio;this.context.src=this.resource;if(null===this.origin){var f=function(c){b.__addToManager(c)};
this.context.addEventListener("canplaythrough",f,!0);window.setTimeout(function(){b.context.removeEventListener("canplaythrough",f,!0);f("timeout")},c.timeout)}this.context.autobuffer=!0;this.context.preload=!0;for(e in this.HTML5API)this[e]=this.HTML5API[e];1<d.channels?!0===c.autoplay?this.context.autoplay=!0:void 0!==c.spritemap[c.autoplay]&&this.play(c.autoplay):1===d.channels&&void 0!==c.spritemap[c.autoplay]&&(this.backgroundMusic=c.spritemap[c.autoplay],this.backgroundMusic.started=Date.now?
Date.now():+new Date,this.play(c.autoplay));1==d.channels&&!0!==c.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==b.isPlaying&&(b.pause(),b.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){b.__wasAutoPaused&&(b.resume(),delete b._wasAutoPaused)}))}else if(!0===d.flashaudio){for(e in this.FLASHAPI)this[e]=this.FLASHAPI[e];d=["id=jukebox-flashstream-"+this.id,"autoplay="+c.autoplay,"file="+window.encodeURIComponent(this.resource)];this.__initFlashContext(d);
!0===c.autoplay?this.play(0):c.spritemap[c.autoplay]&&this.play(c.autoplay)}else throw"Your Browser does not support Flash Audio or HTML5 Audio.";},__initFlashContext:function(b){var c,d=this.settings.flashMediaElement,e,f={flashvars:b.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){c=document.createElement("div");document.getElementsByTagName("body")[0].appendChild(c);var l=document.createElement("object");
l.id="jukebox-flashstream-"+this.id;l.setAttribute("type","application/x-shockwave-flash");l.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000");l.setAttribute("width","0");l.setAttribute("height","0");f.movie=d+"?x="+(Date.now?Date.now():+new Date);f.flashvars=b.join("&amp;");for(e in f)b=document.createElement("param"),b.setAttribute("name",e),b.setAttribute("value",f[e]),l.appendChild(b);c.outerHTML=l.outerHTML;this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{c=
document.createElement("embed");c.id="jukebox-flashstream-"+this.id;c.setAttribute("type","application/x-shockwave-flash");c.setAttribute("width","100");c.setAttribute("height","100");f.play=!1;f.loop=!1;f.src=d+"?x="+(Date.now?Date.now():+new Date);for(e in f)c.setAttribute(e,f[e]);document.getElementsByTagName("body")[0].appendChild(c);this.context=c}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var b=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=
b,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(b-this.backgroundMusic.started)/1E3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(b,c){if(null!==this.isPlaying&&!0!==c)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(b,this.id);else{var d=this.settings.spritemap,e;if(void 0!==d[b])e=d[b].start;else if("number"===typeof b){e=b;for(var f in d)if(e>=d[f].start&&e<=
d[f].end){b=f;break}}void 0!==e&&"[object Object]"===Object.prototype.toString.call(d[b])&&(this.isPlaying=this.settings.spritemap[b],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(e))}},stop:function(){this.__lastPosition=0;this.isPlaying=null;this.backgroundMusic?this.backgroundHackForiOS():this.context.pause();return!0},pause:function(){this.isPlaying=null;this.__lastPosition=this.getCurrentTime();this.context.pause();return this.__lastPosition},resume:function(b){b="number"===
typeof b?b:this.__lastPosition;if(null!==b)return this.play(b),this.__lastPosition=null,!0;this.context.play();return!1},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(b){this.context.volume=b;return 1E-4>Math.abs(this.context.volume-b)?!0:!1},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(b){try{return this.context.currentTime=b,!0}catch(c){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"===typeof this.context.getVolume?
this.context.getVolume():1},setVolume:function(b){return this.context&&"function"===typeof this.context.setVolume?(this.context.setVolume(b),!0):!1},getCurrentTime:function(){return this.context&&"function"===typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(b){return this.context&&"function"===typeof this.context.setCurrentTime?this.context.setCurrentTime(b):!1}}};
if(void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";
jukebox.Manager=function(b){this.features={};this.codecs={};this.__players={};this.__playersLength=0;this.__clones={};this.__queue=[];this.settings={};for(var c in this.defaults)this.settings[c]=this.defaults[c];if("[object Object]"===Object.prototype.toString.call(b))for(var d in b)this.settings[d]=b[d];this.__detectFeatures();jukebox.Manager.__initialized=!1===this.settings.useGameLoop?window.setInterval(function(){jukebox.Manager.loop()},20):!0};
jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var b=window.Audio&&new Audio;if(b&&b.canPlayType&&!1===this.settings.useFlash){for(var c=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},
{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],
d,e,f=0,l=c.length;f<l;f++)if(e=c[f].e,c[f].m.length&&"object"===typeof c[f].m)for(var u=0,m=c[f].m.length;u<m;u++)if(d=c[f].m[u],""!==b.canPlayType(d)){this.codecs[e]=d;break}else this.codecs[e]||(this.codecs[e]=!1);this.features.html5audio=!(!this.codecs.mp3&&!this.codecs.ogg&&!this.codecs.webm&&!this.codecs.wav);this.features.channels=8;b.volume=0.1337;this.features.volume=!!(1E-4>Math.abs(b.volume-0.1337));navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}this.features.flashaudio=
!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(r){}!0===this.settings.useFlash&&(this.features.flashaudio=!0);!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",
this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(b){return this.__players&&void 0!==this.__players[b]?this.__players[b]:null},__getClone:function(b,c){for(var d in this.__clones){var e=this.__clones[d];if(null===e.isPlaying&&e.origin===b)return e}if("[object Object]"===Object.prototype.toString.call(c)){d={};for(var f in c)d[f]=c[f];d.autoplay=!1;f=new jukebox.Player(d,b);f.isClone=!0;f.wasReady=!1;return this.__clones[f.id]=f}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&
this.__playersLength<this.features.channels){var b=this.__queue[0],c=this.__getPlayerById(b.origin);if(null!==c){var d=this.__getClone(b.origin,c.settings);null!==d&&(!0===this.features.volume&&(c=this.__players[b.origin])&&d.setVolume(c.getVolume()),this.add(d),d.play(b.pointer,!0))}this.__queue.splice(0,1)}else for(d in this.__queue.length&&1===this.features.channels&&(b=this.__queue[0],c=this.__getPlayerById(b.origin),null!==c&&c.play(b.pointer,!0),this.__queue.splice(0,1)),this.__players)b=this.__players[d],
c=b.getCurrentTime()||0,b.isPlaying&&!1===b.wasReady?b.wasReady=b.setCurrentTime(b.isPlaying.start):b.isPlaying&&!0===b.wasReady?c>b.isPlaying.end&&(!0===b.isPlaying.loop?b.play(b.isPlaying.start,!0):b.stop()):b.isClone&&null===b.isPlaying?this.remove(b):void 0!==b.backgroundMusic&&null===b.isPlaying&&c>b.backgroundMusic.end&&b.backgroundHackForiOS()},getPlayableResource:function(b){"[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]);for(var c=0,d=b.length;c<d;c++){var e=b[c],f=e.match(/\.([^\.]*)$/)[1];
if(f&&this.codecs[f])return e}return null},add:function(b){return b instanceof jukebox.Player&&void 0===this.__players[b.id]?(this.__playersLength++,this.__players[b.id]=b,!0):!1},remove:function(b){return b instanceof jukebox.Player&&void 0!==this.__players[b.id]?(this.__playersLength--,delete this.__players[b.id],!0):!1},addToQueue:function(b,c){return("string"===typeof b||"number"===typeof b)&&void 0!==this.__players[c]?(this.__queue.push({pointer:b,origin:c}),!0):!1}};(function(){var b={},c=null,d=!0,e=!1;try{"undefined"!==typeof AudioContext?c=new AudioContext:"undefined"!==typeof webkitAudioContext?c=new webkitAudioContext:d=!1}catch(f){d=!1}if(!d)if("undefined"!==typeof Audio)try{new Audio}catch(l){e=!0}else e=!0;if(d){var u="undefined"===typeof c.createGain?c.createGainNode():c.createGain();u.gain.value=1;u.connect(c.destination)}var m=function(b){this._volume=1;this._muted=!1;this.usingWebAudio=d;this.ctx=c;this.noAudio=e;this._howls=[];this._codecs=b;this.iOSAutoEnable=
!0};m.prototype={volume:function(b){b=parseFloat(b);if(0<=b&&1>=b){this._volume=b;d&&(u.gain.value=b);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(b=0;b<this._howls[c]._audioNode.length;b++)this._howls[c]._audioNode[b].volume=this._howls[c]._volume*this._volume;return this}return d?u.gain.value:this._volume},mute:function(){this._setMuted(!0);return this},unmute:function(){this._setMuted(!1);return this},_setMuted:function(b){this._muted=b;d&&(u.gain.value=
b?0:this._volume);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(var e=0;e<this._howls[c]._audioNode.length;e++)this._howls[c]._audioNode[e].muted=b},codecs:function(b){return this._codecs[b]},_enableiOSAudio:function(){var b=this;if(!c||!b._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){b._iOSEnabled=!1;var d=function(){var e=c.createBuffer(1,1,22050),f=c.createBufferSource();f.buffer=e;f.connect(c.destination);"undefined"===typeof f.start?
f.noteOn(0):f.start(0);setTimeout(function(){if(f.playbackState===f.PLAYING_STATE||f.playbackState===f.FINISHED_STATE)b._iOSEnabled=!0,b.iOSAutoEnable=!1,window.removeEventListener("touchend",d,!1)},0)};window.addEventListener("touchend",d,!1);return b}}};var r=null,t={};e||(r=new Audio,t={mp3:!!r.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!r.canPlayType('audio/wav; codecs="1"').replace(/^no$/,
""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var s=new m(t),v=function(b){this._autoplay=b.autoplay||!1;this._buffer=b.buffer||!1;this._duration=b.duration||0;this._format=b.format||null;
this._loop=b.loop||!1;this._loaded=!1;this._sprite=b.sprite||{};this._src=b.src||"";this._pos3d=b.pos3d||[0,0,-0.5];this._volume=void 0!==b.volume?b.volume:1;this._urls=b.urls||[];this._rate=b.rate||1;this._model=b.model||null;this._onload=[b.onload||function(){}];this._onloaderror=[b.onloaderror||function(){}];this._onend=[b.onend||function(){}];this._onpause=[b.onpause||function(){}];this._onplay=[b.onplay||function(){}];this._onendTimer=[];this._webAudio=d&&!this._buffer;this._audioNode=[];this._webAudio&&
this._setupAudioNode();"undefined"!==typeof c&&(c&&s.iOSAutoEnable)&&s._enableiOSAudio();s._howls.push(this);this.load()};v.prototype={load:function(){var c=this,d=null;if(e)c.on("loaderror",Error("No audio support."));else{for(var f=0;f<c._urls.length;f++){var l,r;if(c._format)l=c._format;else if(r=c._urls[f],(l=/^data:audio\/([^;,]+);/i.exec(r))||(l=/\.([^.]+)$/.exec(r.split("?",1)[0])),l)l=l[1].toLowerCase();else{c.on("loaderror",Error("Could not extract format from passed URLs, please add format parameter."));
return}if(t[l]){d=c._urls[f];break}}if(d){c._src=d;if(c._webAudio){var v=d;if(v in b)c._duration=b[v].duration,F(c);else if(/^data:[^;]+;base64,/.test(v)){d=atob(v.split(",")[1]);f=new Uint8Array(d.length);for(l=0;l<d.length;++l)f[l]=d.charCodeAt(l);B(f.buffer,c,v)}else{var u=new XMLHttpRequest;u.open("GET.html",v,!0);u.responseType="arraybuffer";u.onload=function(){B(u.response,c,v)};u.onerror=function(){c._webAudio&&(c._buffer=!0,c._webAudio=!1,c._audioNode=[],delete c._gainNode,delete b[v],c.load())};
try{u.send()}catch(Pa){u.onerror()}}}else{var Q=new Audio;Q.addEventListener("error",function(){Q.error&&4===Q.error.code&&(m.noAudio=!0);c.on("loaderror",{type:Q.error?Q.error.code:0})},!1);c._audioNode.push(Q);Q.src=d;Q._pos=0;Q.preload="auto";Q.volume=s._muted?0:c._volume*s.volume();var Qa=function(){c._duration=Math.ceil(10*Q.duration)/10;0===Object.getOwnPropertyNames(c._sprite).length&&(c._sprite={_default:[0,1E3*c._duration]});c._loaded||(c._loaded=!0,c.on("load"));c._autoplay&&c.play();Q.removeEventListener("canplaythrough",
Qa,!1)};Q.addEventListener("canplaythrough",Qa,!1);Q.load()}return c}c.on("loaderror",Error("No codec support for selected audio sources."))}},urls:function(b){return b?(this.stop(),this._urls="string"===typeof b?[b]:b,this._loaded=!1,this.load(),this):this._urls},play:function(d,e){var f=this;"function"===typeof d&&(e=d);if(!d||"function"===typeof d)d="_default";if(!f._loaded)return f.on("load",function(){f.play(d,e)}),f;if(!f._sprite[d])return"function"===typeof e&&e(),f;f._inactiveNode(function(m){m._sprite=
d;var l=0<m._pos?m._pos:f._sprite[d][0]/1E3,r=0;f._webAudio?(r=f._sprite[d][1]/1E3-m._pos,0<m._pos&&(l=f._sprite[d][0]/1E3+l)):r=f._sprite[d][1]/1E3-(l-f._sprite[d][0]/1E3);var v=!(!f._loop&&!f._sprite[d][2]),t="string"===typeof e?e:Math.round(Date.now()*Math.random())+"",B;B=setTimeout(function(){!f._webAudio&&v&&f.stop(t).play(d,t);f._webAudio&&!v&&(f._nodeById(t).paused=!0,f._nodeById(t)._pos=0,f._clearEndTimer(t));!f._webAudio&&!v&&f.stop(t);f.on("end",t)},1E3*(r/f._rate));f._onendTimer.push({timer:B,
id:t});if(f._webAudio){B=f._sprite[d][0]/1E3;var u=f._sprite[d][1]/1E3;m.id=t;m.paused=!1;B=[v,B,u];u=f._nodeById(t);u.bufferSource=c.createBufferSource();u.bufferSource.buffer=b[f._src];u.bufferSource.connect(u.panner);u.bufferSource.loop=B[0];B[0]&&(u.bufferSource.loopStart=B[1],u.bufferSource.loopEnd=B[1]+B[2]);u.bufferSource.playbackRate.value=f._rate;f._playStart=c.currentTime;m.gain.value=f._volume;"undefined"===typeof m.bufferSource.start?v?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,
l,r):v?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,r)}else if(4===m.readyState||!m.readyState&&navigator.isCocoonJS)m.readyState=4,m.id=t,m.currentTime=l,m.muted=s._muted||m.muted,m.volume=f._volume*s.volume(),setTimeout(function(){m.play()},0);else{f._clearEndTimer(t);var F=d,Ra=e,ga=function(){f.play(F,Ra);m.removeEventListener("canplaythrough",ga,!1)};m.addEventListener("canplaythrough",ga,!1);return f}f.on("play");"function"===typeof e&&e(t);return f});return f},pause:function(b){var c=
this;if(!c._loaded)return c.on("play",function(){c.pause(b)}),c;c._clearEndTimer(b);var d=b?c._nodeById(b):c._activeNode();if(d)if(d._pos=c.pos(null,b),c._webAudio){if(!d.bufferSource||d.paused)return c;d.paused=!0;"undefined"===typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else d.pause();c.on("pause");return c},stop:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(b)}),c;c._clearEndTimer(b);var d=b?c._nodeById(b):c._activeNode();if(d)if(d._pos=
0,c._webAudio){if(!d.bufferSource||d.paused)return c;d.paused=!0;"undefined"===typeof d.bufferSource.stop?d.bufferSource.noteOff(0):d.bufferSource.stop(0)}else isNaN(d.duration)||(d.pause(),d.currentTime=0);return c},mute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.mute(b)}),c;var d=b?c._nodeById(b):c._activeNode();d&&(c._webAudio?d.gain.value=0:d.muted=!0);return c},unmute:function(b){var c=this;if(!c._loaded)return c.on("play",function(){c.unmute(b)}),c;var d=b?c._nodeById(b):
c._activeNode();d&&(c._webAudio?d.gain.value=c._volume:d.muted=!1);return c},volume:function(b,c){var d=this;b=parseFloat(b);if(0<=b&&1>=b){d._volume=b;if(!d._loaded)return d.on("play",function(){d.volume(b,c)}),d;var e=c?d._nodeById(c):d._activeNode();e&&(d._webAudio?e.gain.value=b:e.volume=b*s.volume());return d}return d._volume},loop:function(b){return"boolean"===typeof b?(this._loop=b,this):this._loop},sprite:function(b){return"object"===typeof b?(this._sprite=b,this):this._sprite},pos:function(b,
d){var e=this;if(!e._loaded)return e.on("load",function(){e.pos(b)}),"number"===typeof b?e:e._pos||0;b=parseFloat(b);var f=d?e._nodeById(d):e._activeNode();if(f)return 0<=b?(e.pause(d),f._pos=b,e.play(f._sprite,d),e):e._webAudio?f._pos+(c.currentTime-e._playStart):f.currentTime;if(0<=b)return e;for(f=0;f<e._audioNode.length;f++)if(e._audioNode[f].paused&&4===e._audioNode[f].readyState)return e._webAudio?e._audioNode[f]._pos:e._audioNode[f].currentTime},pos3d:function(b,c,d,e){var f=this;c="undefined"===
typeof c||!c?0:c;d="undefined"===typeof d||!d?-0.5:d;if(!f._loaded)return f.on("play",function(){f.pos3d(b,c,d,e)}),f;if(0<=b||0>b){if(f._webAudio){var m=e?f._nodeById(e):f._activeNode();m&&(f._pos3d=[b,c,d],m.panner.setPosition(b,c,d),m.panner.panningModel=f._model||"HRTF")}}else return f._pos3d;return f},fade:function(b,c,d,e,f){var m=this,l=Math.abs(b-c),r=b>c?"down":"up",l=l/0.01,v=d/l;if(!m._loaded)return m.on("load",function(){m.fade(b,c,d,e,f)}),m;m.volume(b,f);for(var s=1;s<=l;s++)(function(){var b=
Math.round(1E3*(m._volume+("up"===r?0.01:-0.01)*s))/1E3;setTimeout(function(){m.volume(b,f);b===c&&e&&e()},v*s)})()},fadeIn:function(b,c,d){return this.volume(0).play().fade(0,b,c,d)},fadeOut:function(b,c,d,e){var f=this;return f.fade(f._volume,b,c,function(){d&&d();f.pause(e);f.on("end")},e)},_nodeById:function(b){for(var c=this._audioNode[0],d=0;d<this._audioNode.length;d++)if(this._audioNode[d].id===b){c=this._audioNode[d];break}return c},_activeNode:function(){for(var b=null,c=0;c<this._audioNode.length;c++)if(!this._audioNode[c].paused){b=
this._audioNode[c];break}this._drainPool();return b},_inactiveNode:function(b){for(var c=null,d=0;d<this._audioNode.length;d++)if(this._audioNode[d].paused&&4===this._audioNode[d].readyState){b(this._audioNode[d]);c=!0;break}this._drainPool();if(!c){var e;if(this._webAudio)e=this._setupAudioNode(),b(e);else{this.load();e=this._audioNode[this._audioNode.length-1];var f=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",m=function(){e.removeEventListener(f,m,!1);b(e)};e.addEventListener(f,m,!1)}}},
_drainPool:function(){var b=0,c;for(c=0;c<this._audioNode.length;c++)this._audioNode[c].paused&&b++;for(c=this._audioNode.length-1;0<=c&&!(5>=b);c--)this._audioNode[c].paused&&(this._webAudio&&this._audioNode[c].disconnect(0),b--,this._audioNode.splice(c,1))},_clearEndTimer:function(b){for(var c=-1,d=0;d<this._onendTimer.length;d++)if(this._onendTimer[d].id===b){c=d;break}if(b=this._onendTimer[c])clearTimeout(b.timer),this._onendTimer.splice(c,1)},_setupAudioNode:function(){var b=this._audioNode,
d=this._audioNode.length;b[d]="undefined"===typeof c.createGain?c.createGainNode():c.createGain();b[d].gain.value=this._volume;b[d].paused=!0;b[d]._pos=0;b[d].readyState=4;b[d].connect(u);b[d].panner=c.createPanner();b[d].panner.panningModel=this._model||"equalpower";b[d].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]);b[d].panner.connect(b[d]);return b[d]},on:function(b,c){var d=this["_on"+b];if("function"===typeof c)d.push(c);else for(var e=0;e<d.length;e++)c?d[e].call(this,c):
d[e].call(this);return this},off:function(b,c){var d=this["_on"+b];if(c)for(var e=0;e<d.length;e++){if(c===d[e]){d.splice(e,1);break}}else this["_on"+b]=[];return this},unload:function(){for(var c=this._audioNode,d=0;d<this._audioNode.length;d++)c[d].paused||(this.stop(c[d].id),this.on("end",c[d].id)),this._webAudio?c[d].disconnect(0):c[d].src="";for(d=0;d<this._onendTimer.length;d++)clearTimeout(this._onendTimer[d].timer);c=s._howls.indexOf(this);null!==c&&0<=c&&s._howls.splice(c,1);delete b[this._src]}};
if(d)var B=function(d,e,f){c.decodeAudioData(d,function(c){c&&(b[f]=c,F(e,c))},function(b){e.on("loaderror",b)})},F=function(b,c){b._duration=c?c.duration:b._duration;0===Object.getOwnPropertyNames(b._sprite).length&&(b._sprite={_default:[0,1E3*b._duration]});b._loaded||(b._loaded=!0,b.on("load"));b._autoplay&&b.play()};"function"===typeof define&&define.amd&&define(function(){return{Howler:s,Howl:v}});"undefined"!==typeof exports&&(exports.Howler=s,exports.Howl=v);"undefined"!==typeof window&&(window.Howler=
s,window.Howl=v)})();(function(b){Number.prototype.map=function(b,c,d,e){return d+(e-d)*((this-b)/(c-b))};Number.prototype.limit=function(b,c){return Math.min(c,Math.max(b,this))};Number.prototype.round=function(b){b=Math.pow(10,b||0);return Math.round(this*b)/b};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Array.prototype.erase=function(b){for(var c=this.length;c--;)this[c]===b&&this.splice(c,1);return this};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Function.prototype.bind=Function.prototype.bind||function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),d=this,e=function(){},f=function(){return d.apply(this instanceof e&&b?
this:b,c.concat(Array.prototype.slice.call(arguments)))};e.prototype=this.prototype;f.prototype=new e;return f};b.ig={game:null,debug:null,version:"1.23",global:b,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:b.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(b){return"#"==b.charAt(0)?document.getElementById(b.substr(1)):document.getElementsByTagName(b)},$new:function(b){return document.createElement(b)},copy:function(b){if(!b||"object"!=typeof b||
b instanceof HTMLElement||b instanceof ig.Class)return b;if(b instanceof Array)for(var c=[],d=0,e=b.length;d<e;d++)c[d]=ig.copy(b[d]);else for(d in c={},b)c[d]=ig.copy(b[d]);return c},merge:function(b,c){for(var d in c)if(!("_mesh"===d||"_camera"===d)){var e=c[d];if("object"!=typeof e||e instanceof HTMLElement||e instanceof ig.Class||null===e)b[d]=e;else{if(!b[d]||"object"!=typeof b[d])b[d]=e instanceof Array?[]:{};ig.merge(b[d],e)}}return b},ksort:function(b){if(!b||"object"!=typeof b)return[];var c=
[],d=[],e;for(e in b)c.push(e);c.sort();for(e=0;e<c.length;e++)d.push(b[c[e]]);return d},setVendorAttribute:function(b,c,d){var e=c.charAt(0).toUpperCase()+c.substr(1);b[c]="undefined"!==typeof b.imageSmoothingEnabled?b["ms"+e]=b["moz"+e]=b["o"+e]=d:b["ms"+e]=b["moz"+e]=b["webkit"+e]=b["o"+e]=d},getVendorAttribute:function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);return"undefined"!==typeof b.imageSmoothingEnabled?b[c]||b["ms"+d]||b["moz"+d]||b["o"+d]:b[c]||b["ms"+d]||b["moz"+d]||b["webkit"+
d]||b["o"+d]},normalizeVendorAttribute:function(b,c){var d=ig.getVendorAttribute(b,c);!b[c]&&d&&(b[c]=d)},getImagePixels:function(b,c,d,e,f){var l=ig.$new("canvas");l.width=b.width;l.height=b.height;var u=l.getContext("2d");ig.System.SCALE.CRISP(l,u);var n=ig.getVendorAttribute(u,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(u,"getImageDataHD");var j=b.width/n,x=b.height/n;l.width=Math.ceil(j);l.height=Math.ceil(x);u.drawImage(b,0,0,j,x);return 1===n?u.getImageData(c,d,e,f):u.getImageDataHD(c,
d,e,f)},module:function(b){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[b]&&ig.modules[b].body)throw"Module '"+b+"' is already defined";ig._current={name:b,requires:[],loaded:!1,body:null};ig.modules[b]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(b){ig._current.body=b;ig._current=null;ig._initDOMReady()},addResource:function(b){ig.resources.push(b)},
setNocache:function(b){ig.nocache=b?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(b,c){ig.modules[b]={name:b,requires:[],loaded:!1,body:null};ig._waitForOnload++;var d=ig.prefix+ig.lib+b.replace(/\./g,"index.html")+".js"+ig.nocache,e=ig.$new("script");e.type="text/javascript";e.src=d;e.onload=function(){ig._waitForOnload--;ig._execModules()};e.onerror=function(){throw"Failed to load module "+b+" at "+d+" required from "+c;};ig.$("head")[0].appendChild(e)},
_execModules:function(){for(var b=!1,c=0;c<ig._loadQueue.length;c++){for(var d=ig._loadQueue[c],e=!0,f=0;f<d.requires.length;f++){var l=d.requires[f];ig.modules[l]?ig.modules[l].loaded||(e=!1):(e=!1,ig._loadScript(l,d.name))}e&&d.body&&(ig._loadQueue.splice(c,1),d.loaded=!0,d.body(),b=!0,c--)}if(b)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){b=[];for(c=0;c<ig._loadQueue.length;c++){e=[];l=ig._loadQueue[c].requires;for(f=0;f<l.length;f++)d=ig.modules[l[f]],(!d||
!d.loaded)&&e.push(l[f]);b.push(ig._loadQueue[c].name+" (requires: "+e.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+b.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&
ig.setNocache(!0);ig.ua.pixelRatio=b.devicePixelRatio||1;ig.ua.viewport={width:b.innerWidth,height:b.innerHeight};ig.ua.screen={width:b.screen.availWidth*ig.ua.pixelRatio,height:b.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);
ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in
b||b.navigator.msMaxTouchPoints;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),b.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(b,"requestAnimationFrame");
if(b.requestAnimationFrame){var c=1,d={};b.ig.setAnimation=function(e,f){var l=c++;d[l]=!0;var s=function(){d[l]&&(b.requestAnimationFrame(s,f),e())};b.requestAnimationFrame(s,f);return l};b.ig.clearAnimation=function(b){console.log(d);delete d[b]}}else b.ig.setAnimation=function(c){return b.setInterval(c,1E3/60)},b.ig.clearAnimation=function(c){b.clearInterval(c)};var e=!1,f=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,l=0;b.ig.Class=function(){};var u=function(b){var c=this.prototype,d={},e;for(e in b)"function"==
typeof b[e]&&"function"==typeof c[e]&&f.test(b[e])?(d[e]=c[e],c[e]=function(b,c){return function(){var e=this.parent;this.parent=d[b];var f=c.apply(this,arguments);this.parent=e;return f}}(e,b[e])):c[e]=b[e]};b.ig.Class.extend=function(c){function d(){if(!e){if(this.staticInstantiate){var b=this.staticInstantiate.apply(this,arguments);if(b)return b}for(var c in this)"object"==typeof this[c]&&(this[c]=ig.copy(this[c]));this.init&&this.init.apply(this,arguments)}return this}var t=this.prototype;e=!0;
var s=new this;e=!1;for(var v in c)s[v]="function"==typeof c[v]&&"function"==typeof t[v]&&f.test(c[v])?function(b,c){return function(){var d=this.parent;this.parent=t[b];var e=c.apply(this,arguments);this.parent=d;return e}}(v,c[v]):c[v];d.prototype=s;d.prototype.constructor=d;d.extend=b.ig.Class.extend;d.inject=u;d.classId=s.classId=++l;return d};b.ImpactMixin&&ig.merge(ig,b.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return ig.Image.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(b){var c=ig.getImagePixels(this.data,0,0,this.width,
this.height),d=this.width*b,e=this.height*b,f=ig.$new("canvas");f.width=d;f.height=e;for(var l=f.getContext("2d"),u=l.getImageData(0,0,d,e),m=0;m<e;m++)for(var r=0;r<d;r++){var t=4*(Math.floor(m/b)*this.width+Math.floor(r/b)),s=4*(m*d+r);u.data[s]=c.data[t];u.data[s+1]=c.data[t+1];u.data[s+2]=c.data[t+2];u.data[s+3]=c.data[t+3]}l.putImageData(u,0,0);this.data=f},draw:function(b,c,d,e,f,l){if(this.loaded){var u=ig.system.scale;f=(f?f:this.width)*u;l=(l?l:this.height)*u;ig.system.context.drawImage(this.data,
d?d*u:0,e?e*u:0,f,l,ig.system.getDrawPos(b),ig.system.getDrawPos(c),f,l);ig.Image.drawCount++}},drawTile:function(b,c,d,e,f,l,u){f=f?f:e;if(this.loaded&&!(e>this.width||f>this.height)){var m=ig.system.scale,r=Math.floor(e*m),t=Math.floor(f*m),s=l?-1:1,v=u?-1:1;if(l||u)ig.system.context.save(),ig.system.context.scale(s,v);ig.system.context.drawImage(this.data,Math.floor(d*e)%this.width*m,Math.floor(d*e/this.width)*f*m,r,t,ig.system.getDrawPos(b)*s-(l?r:0),ig.system.getDrawPos(c)*v-(u?t:0),r,t);(l||
u)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var b in ig.Image.cache)ig.Image.cache[b].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(b){this._loadMetrics(this.data);this.parent(b)},widthForString:function(b){if(-1!==b.indexOf("\n")){b=b.split("\n");for(var c=0,d=0;d<b.length;d++)c=Math.max(c,this._widthForLine(b[d]));return c}return this._widthForLine(b)},_widthForLine:function(b){for(var c=0,d=0;d<b.length;d++)c+=this.widthMap[b.charCodeAt(d)-this.firstChar]+
this.letterSpacing;return c},heightForString:function(b){return b.split("\n").length*(this.height+this.lineSpacing)},draw:function(b,c,d,e){"string"!=typeof b&&(b=b.toString());if(-1!==b.indexOf("\n")){b=b.split("\n");for(var f=this.height+this.lineSpacing,l=0;l<b.length;l++)this.draw(b[l],c,d+l*f,e)}else{if(e==ig.Font.ALIGN.RIGHT||e==ig.Font.ALIGN.CENTER)l=this._widthForLine(b),c-=e==ig.Font.ALIGN.CENTER?l/2:l;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(l=0;l<b.length;l++)e=b.charCodeAt(l),
c+=this._drawChar(e-this.firstChar,c,d);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=b.length}},_drawChar:function(b,c,d){if(!this.loaded||0>b||b>=this.indices.length)return 0;var e=ig.system.scale,f=this.widthMap[b]*e,l=(this.height-2)*e;ig.system.context.drawImage(this.data,this.indices[b]*e,0,f,l,ig.system.getDrawPos(c),ig.system.getDrawPos(d),f,l);return this.widthMap[b]+this.letterSpacing},_loadMetrics:function(b){this.height=b.height-1;this.widthMap=[];this.indices=
[];for(var c=ig.getImagePixels(b,0,b.height-1,b.width,1),d=0,e=0,f=0;f<b.width;f++){var l=4*f+3;127<c.data[l]?e++:128>c.data[l]&&e&&(this.widthMap.push(e),this.indices.push(f-e),d++,e=0)}this.widthMap.push(e);this.indices.push(f-e)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var b=new Audio,c=0;c<ig.Sound.use.length;c++){var d=ig.Sound.use[c];if(b.canPlayType(d.mime)){this.format=d;break}}this.format||(ig.Sound.enabled=!1)}},load:function(b,c,d){var e=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(c&&this.clips[b].length<ig.Sound.channels)for(c=this.clips[b].length;c<
ig.Sound.channels;c++){var f=new Audio(e);f.load();this.clips[b].push(f)}return this.clips[b][0]}var l=new Audio(e);d&&(l.addEventListener("canplaythrough",function m(c){l.removeEventListener("canplaythrough",m,!1);d(b,!0,c)},!1),l.addEventListener("error",function(c){d(b,!1,c)},!1));l.preload="auto";l.load();this.clips[b]=[l];if(c)for(c=1;c<ig.Sound.channels;c++)f=new Audio(e),f.load(),this.clips[b].push(f);return l},get:function(b){b=this.clips[b];for(var c=0,d;d=b[c++];)if(d.paused||d.ended)return d.ended&&
(d.currentTime=0),d;b[0].pause();b[0].currentTime=0;return b[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):
this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(b,c){if(ig.Sound.enabled){var d=ig.soundManager.load(b instanceof ig.Sound?b.path:b,!1);d.loop=this._loop;d.volume=this._volume;d.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(d);c&&(this.namedTracks[c]=d);this.currentTrack||
(this.currentTrack=d)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(b){if(b&&this.namedTracks[b])b=this.namedTracks[b],b!=this.currentTrack&&(this.stop(),
this.currentTrack=b);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var c in this.tracks)this.tracks[c].loop=b},getVolume:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,1);for(var c in this.tracks)this.tracks[c].volume=this._volume},fadeOut:function(b){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(b),this._fadeInterval=setInterval(this._fadeStep.bind(this),
50))},_fadeStep:function(){var b=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=b?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=b},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(b,c){this.path=b;this.multiChannel=!1!==c;this.load()},load:function(b){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,
this.multiChannel,b):ig.addResource(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},
CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(b,c){this.gameClass=b;this.resources=c;this._loadCallbackBound=this._loadCallback.bind(this);for(var d=0;d<this.resources.length;d++)this._unloaded.push(this.resources[d].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var b=
0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(b){b.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(b,c){if(c)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});
ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=ig.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var b=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=
ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var b=Date.now();ig.Timer.time+=Math.min((b-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(b,c,d,e,f){this.fps=c;this.clock=new ig.Timer;this.canvas=ig.$(b);this.resize(d,e,f);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(b,c,d){this.width=b;this.height=c;this.scale=d||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(b){this.running?this.newGameClass=b:this.setGameNow(b)},setGameNow:function(b){ig.game=new b;ig.system.setDelegate(ig.game)},setDelegate:function(b){if("function"==typeof b.run)this.delegate=b,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(b){this.context.fillStyle=b;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});
ig.System.DRAW={AUTHENTIC:function(b){return Math.round(b)*this.scale},SMOOTH:function(b){return Math.round(b*this.scale)},SUBPIXEL:function(b){return b*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!1);b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},
SMOOTH:function(b,c){ig.setVendorAttribute(c,"imageSmoothingEnabled",!0);b.style.imageRendering="";b.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=
!0;var b=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",b,!1);ig.system.canvas.addEventListener("DOMMouseScroll",b,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",
this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=
!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(b){var c=this.bindings[0<(b.wheelDelta?b.wheelDelta:-1*b.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];c&&(this.actions[c]=!0,this.presses[c]=!0,this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault())},mousemove:function(b){var c=
parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(c=ig.system.realWidth);var c=ig.system.scale*(c/ig.system.realWidth),d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());b=b.touches?b.touches[0]:b;this.mouse.x=(b.clientX-d.left)/c;this.mouse.y=(b.clientY-d.top)/c},contextmenu:function(b){this.bindings[ig.KEY.MOUSE2]&&(b.stopPropagation(),b.preventDefault())},keydown:function(b){var c=b.target.tagName;"INPUT"==c||"TEXTAREA"==
c||(c="keydown"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,("touchstart"==b.type||"mousedown"==b.type)&&this.mousemove(b),c=this.bindings[c],console.log(c),c&&(this.actions[c]=!0,this.locks[c]||(this.presses[c]=!0,this.locks[c]=!0),b.stopPropagation(),b.preventDefault()))},keyup:function(b){var c=b.target.tagName;if(!("INPUT"==c||"TEXTAREA"==c))if(c=this.bindings["keyup"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[c]=!0,b.stopPropagation(),b.preventDefault()},
devicemotion:function(b){this.accel=b.accelerationIncludingGravity},bind:function(b,c){0>b?this.initMouse():0<b&&this.initKeyboard();this.bindings[b]=c},bindTouch:function(b,c){var d=ig.$(b),e=this;d.addEventListener("touchstart",function(b){e.touchStart(b,c)},!1);d.addEventListener("touchend",function(b){e.touchEnd(b,c)},!1);d.addEventListener("MSPointerDown",function(b){e.touchStart(b,c)},!1);d.addEventListener("MSPointerUp",function(b){e.touchEnd(b,c)},!1)},unbind:function(b){this.delayedKeyup[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(b){return this.actions[b]},pressed:function(b){return this.presses[b]},released:function(b){return!!this.delayedKeyup[b]},clearPressed:function(){for(var b in this.delayedKeyup)this.actions[b]=!1,this.locks[b]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(b,c){this.actions[c]=!0;this.presses[c]=!0;b.stopPropagation();b.preventDefault();return!1},
touchEnd:function(b,c){this.delayedKeyup[c]=!0;b.stopPropagation();b.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(b,c,d,e,f,l,u){ig.system=new ig.System(b,d,e,f,l||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (u||ig.Loader)(c,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(b,c,d){this.width=c;this.height=d;this.image=new ig.Image(b)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(b,c,d,e){this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=c;this.sequence=d;
this.stop=!!e;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:b%this.sequence.length;
this.tile=this.sequence[this.frame]},draw:function(b,c){var d=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(c>ig.system.height||0>b+d||0>c+d)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(b,c,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(c+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(b,
c,d){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=b;this.pos.y=this.last.y=c;ig.merge(this,d)},reset:function(b,c,d){var e=this.constructor.prototype;this.pos.x=b;this.pos.y=c;this.last.x=b;this.last.y=c;this.vel.x=e.vel.x;this.vel.y=e.vel.y;this.accel.x=e.accel.x;this.accel.y=e.accel.y;this.health=e.health;this._killed=e._killed;this.standing=e.standing;this.type=e.type;this.checkAgainst=e.checkAgainst;this.collides=e.collides;ig.merge(this,d)},addAnim:function(b,c,d,e){if(!this.animSheet)throw"No animSheet to add the animation "+
b+" to.";c=new ig.Animation(this.animSheet,c,d,e);this.anims[b]=c;this.currentAnim||(this.currentAnim=c);return c},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(b,c,d,e){return c?(b+c*ig.system.tick).limit(-e,e):d?(c=d*ig.system.tick,0<b-c?b-c:0>b+c?b+c:0):b.limit(-e,e)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var c=b.collision.slope;if(0<this.bounciness){var d=this.vel.x*c.nx+this.vel.y*c.ny;this.vel.x=(this.vel.x-2*c.nx*d)*this.bounciness;this.vel.y=(this.vel.y-2*c.ny*d)*this.bounciness}else d=(this.vel.x*c.x+this.vel.y*c.y)/(c.x*c.x+c.y*c.y),this.vel.x=c.x*d,this.vel.y=c.y*d,c=Math.atan2(c.x,c.y),c>this.slopeStanding.min&&c<this.slopeStanding.max&&(this.standing=!0)}this.pos=b.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(b){this.health-=b;0>=this.health&&this.kill()},touches:function(b){return!(this.pos.x>=b.pos.x+b.size.x||this.pos.x+this.size.x<=b.pos.x||this.pos.y>=b.pos.y+b.size.y||this.pos.y+this.size.y<=b.pos.y)},distanceTo:function(b){var c=this.pos.x+this.size.x/2-(b.pos.x+b.size.x/2);b=this.pos.y+this.size.y/2-(b.pos.y+b.size.y/2);return Math.sqrt(c*c+b*b)},angleTo:function(b){return Math.atan2(b.pos.y+
b.size.y/2-(this.pos.y+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(b,c){b.checkAgainst&c.type&&b.check(c);c.checkAgainst&b.type&&c.check(b);b.collides&&(c.collides&&b.collides+c.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(b,c)};ig.Entity.solveCollision=
function(b,c){var d=null;if(b.collides==ig.Entity.COLLIDES.LITE||c.collides==ig.Entity.COLLIDES.FIXED)d=b;else if(c.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)d=c;b.last.x+b.size.x>c.last.x&&b.last.x<c.last.x+c.size.x?(b.last.y<c.last.y?ig.Entity.seperateOnYAxis(b,c,d):ig.Entity.seperateOnYAxis(c,b,d),b.collideWith(c,"y"),c.collideWith(b,"y")):b.last.y+b.size.y>c.last.y&&b.last.y<c.last.y+c.size.y&&(b.last.x<c.last.x?ig.Entity.seperateOnXAxis(b,c,d):ig.Entity.seperateOnXAxis(c,
b,d),b.collideWith(c,"x"),c.collideWith(b,"x"))};ig.Entity.seperateOnXAxis=function(b,c,d){var e=b.pos.x+b.size.x-c.pos.x;d?(d.vel.x=-d.vel.x*d.bounciness+(b===d?c:b).vel.x,c=ig.game.collisionMap.trace(d.pos.x,d.pos.y,d==b?-e:e,0,d.size.x,d.size.y),d.pos.x=c.pos.x):(d=(b.vel.x-c.vel.x)/2,b.vel.x=-d,c.vel.x=d,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,-e/2,0,b.size.x,b.size.y),b.pos.x=Math.floor(d.pos.x),b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e/2,0,c.size.x,c.size.y),c.pos.x=Math.ceil(b.pos.x))};
ig.Entity.seperateOnYAxis=function(b,c,d){var e=b.pos.y+b.size.y-c.pos.y;if(d){c=b===d?c:b;d.vel.y=-d.vel.y*d.bounciness+c.vel.y;var f=0;d==b&&Math.abs(d.vel.y-c.vel.y)<d.minBounceVelocity&&(d.standing=!0,f=c.vel.x*ig.system.tick);b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,f,d==b?-e:e,d.size.x,d.size.y);d.pos.y=b.pos.y;d.pos.x=b.pos.x}else ig.game.gravity&&(c.standing||0<b.vel.y)?(d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,-(b.pos.y+b.size.y-c.pos.y),b.size.x,b.size.y),b.pos.y=d.pos.y,0<b.bounciness&&
b.vel.y>b.minBounceVelocity?b.vel.y*=-b.bounciness:(b.standing=!0,b.vel.y=0)):(d=(b.vel.y-c.vel.y)/2,b.vel.y=-d,c.vel.y=d,f=c.vel.x*ig.system.tick,d=ig.game.collisionMap.trace(b.pos.x,b.pos.y,f,-e/2,b.size.x,b.size.y),b.pos.y=d.pos.y,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,0,e/2,c.size.x,c.size.y),c.pos.y=b.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(b,c){this.tilesize=b;this.data=c;this.height=c.length;this.width=c[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(b,c){var d=Math.floor(b/this.tilesize),e=Math.floor(c/this.tilesize);return 0<=d&&d<this.width&&0<=e&&e<this.height?this.data[e][d]:0},setTile:function(b,c,d){b=Math.floor(b/this.tilesize);c=Math.floor(c/
this.tilesize);0<=b&&b<this.width&&(0<=c&&c<this.height)&&(this.data[c][b]=d)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(b,c,f){this.parent(b,c);this.tiledef=f||ig.CollisionMap.defaultTileDef;for(var l in this.tiledef)l|0>this.lastSlope&&(this.lastSlope=l|0)},trace:function(b,c,f,l,u,m){var r={collision:{x:!1,y:!1,slope:!1},pos:{x:b,y:c},tile:{x:0,y:0}},t=Math.ceil(Math.max(Math.abs(f),Math.abs(l))/this.tilesize);if(1<t)for(var s=f/t,v=l/t,B=0;B<t&&(s||v)&&!(this._traceStep(r,
b,c,s,v,u,m,f,l,B),b=r.pos.x,c=r.pos.y,r.collision.x&&(f=s=0),r.collision.y&&(l=v=0),r.collision.slope);B++);else this._traceStep(r,b,c,f,l,u,m,f,l,0);return r},_traceStep:function(b,c,f,l,u,m,r,t,s,v){b.pos.x+=l;b.pos.y+=u;var B=0;if(l){var F=0<l?m:0,n=0>l?this.tilesize:0,B=Math.max(Math.floor(f/this.tilesize),0),j=Math.min(Math.ceil((f+r)/this.tilesize),this.height);l=Math.floor((b.pos.x+F)/this.tilesize);var x=Math.floor((c+F)/this.tilesize);if(0<v||l==x||0>x||x>=this.width)x=-1;if(0<=l&&l<this.width)for(var z=
B;z<j&&!(-1!=x&&(B=this.data[z][x],1<B&&B<=this.lastSlope&&this._checkTileDef(b,B,c,f,t,s,m,r,x,z)));z++)if(B=this.data[z][l],1==B||B>this.lastSlope||1<B&&this._checkTileDef(b,B,c,f,t,s,m,r,l,z)){if(1<B&&B<=this.lastSlope&&b.collision.slope)break;b.collision.x=!0;b.tile.x=B;c=b.pos.x=l*this.tilesize-F+n;t=0;break}}if(u){F=0<u?r:0;u=0>u?this.tilesize:0;B=Math.max(Math.floor(b.pos.x/this.tilesize),0);n=Math.min(Math.ceil((b.pos.x+m)/this.tilesize),this.width);z=Math.floor((b.pos.y+F)/this.tilesize);
j=Math.floor((f+F)/this.tilesize);if(0<v||z==j||0>j||j>=this.height)j=-1;if(0<=z&&z<this.height)for(l=B;l<n&&!(-1!=j&&(B=this.data[j][l],1<B&&B<=this.lastSlope&&this._checkTileDef(b,B,c,f,t,s,m,r,l,j)));l++)if(B=this.data[z][l],1==B||B>this.lastSlope||1<B&&this._checkTileDef(b,B,c,f,t,s,m,r,l,z)){if(1<B&&B<=this.lastSlope&&b.collision.slope)break;b.collision.y=!0;b.tile.y=B;b.pos.y=z*this.tilesize-F+u;break}}},_checkTileDef:function(b,c,f,l,u,m,r,t,s,v){var B=this.tiledef[c];if(!B)return!1;c=(B[2]-
B[0])*this.tilesize;var F=(B[3]-B[1])*this.tilesize,n=B[4];r=f+u+(0>F?r:0)-(s+B[0])*this.tilesize;t=l+m+(0<c?t:0)-(v+B[1])*this.tilesize;if(0<c*t-F*r){if(0>u*-F+m*c)return n;s=Math.sqrt(c*c+F*F);v=F/s;s=-c/s;var j=r*v+t*s,B=v*j,j=s*j;if(B*B+j*j>=u*u+m*m)return n||0.5>c*(t-m)-F*(r-u);b.pos.x=f+u-B;b.pos.y=l+m-j;b.collision.slope={x:c,y:F,nx:v,ny:s};return!0}return!1}});var b=1/3,c=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,c,!0],6:[0,c,1,b,!0],7:[0,b,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[c,1,1,0,!0],43:[b,1,c,0,!0],54:[0,1,b,0,!0],27:[0,0,1,b,!0],28:[0,b,1,c,!0],29:[0,c,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,b,1,!0],44:[b,0,c,1,!0],55:[c,0,1,1,!0],16:[1,b,0,0,!0],17:[1,c,0,b,!0],18:[1,1,0,c,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[b,1,0,0,!0],41:[c,1,b,0,!0],52:[1,1,c,0,!0],38:[1,c,0,1,!0],39:[1,b,0,c,!0],40:[1,0,
0,b,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,c,1,!0],42:[c,0,b,1,!0],53:[b,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(b,c,f,l){return{collision:{x:!1,y:!1,slope:!1},pos:{x:b+f,y:c+l},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(b,c,d){this.parent(b,c);this.setTileset(d)},setTileset:function(b){this.tilesetName=b instanceof ig.Image?b.path:b;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(b,
c){this.scroll.x=b/this.distance;this.scroll.y=c/this.distance},preRenderMapToChunks:function(){var b=this.width*this.tilesize*ig.system.scale,c=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(b,c),this.chunkSize);var d=Math.ceil(b/this.chunkSize),e=Math.ceil(c/this.chunkSize);this.preRenderedChunks=[];for(var f=0;f<e;f++){this.preRenderedChunks[f]=[];for(var l=0;l<d;l++)this.preRenderedChunks[f][l]=this.preRenderChunk(l,f,l==d-1?b-l*this.chunkSize:this.chunkSize,f==e-1?
c-f*this.chunkSize:this.chunkSize)}},preRenderChunk:function(b,c,d,e){var f=d/this.tilesize/ig.system.scale+1,l=e/this.tilesize/ig.system.scale+1,u=b*this.chunkSize/ig.system.scale%this.tilesize,m=c*this.chunkSize/ig.system.scale%this.tilesize;b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);c=Math.floor(c*this.chunkSize/this.tilesize/ig.system.scale);var r=ig.$new("canvas");r.width=d;r.height=e;r.retinaResolutionEnabled=!1;e=r.getContext("2d");ig.System.scaleMode(r,e);d=ig.system.context;
ig.system.context=e;for(e=0;e<f;e++)for(var t=0;t<l;t++)if(e+b<this.width&&t+c<this.height){var s=this.data[t+c][e+b];s&&this.tiles.drawTile(e*this.tilesize-u,t*this.tilesize-m,s-1,this.tilesize)}ig.system.context=d;return r},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var b=ig.system.getDrawPos(this.scroll.x),c=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var d=
this.width*this.tilesize*ig.system.scale,b=(b%d+d)%d,d=this.height*this.tilesize*ig.system.scale,c=(c%d+d)%d;var d=Math.max(Math.floor(b/this.chunkSize),0),e=Math.max(Math.floor(c/this.chunkSize),0),f=Math.ceil((b+ig.system.realWidth)/this.chunkSize),l=Math.ceil((c+ig.system.realHeight)/this.chunkSize),u=this.preRenderedChunks[0].length,m=this.preRenderedChunks.length;this.repeat||(f=Math.min(f,u),l=Math.min(l,m));for(var r=0;e<l;e++){for(var t=0,s=d;s<f;s++){var v=this.preRenderedChunks[e%m][s%u],
B=-b+s*this.chunkSize-t,F=-c+e*this.chunkSize-r;ig.system.context.drawImage(v,B,F);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(B,F,this.chunkSize,this.chunkSize));this.repeat&&(v.width<this.chunkSize&&B+v.width<ig.system.realWidth)&&(t+=this.chunkSize-v.width,f++)}this.repeat&&(v.height<this.chunkSize&&F+v.height<ig.system.realHeight)&&(r+=this.chunkSize-v.height,l++)}},drawTiled:function(){for(var b=0,c=null,d=(this.scroll.x/this.tilesize).toInt(),
e=(this.scroll.y/this.tilesize).toInt(),f=this.scroll.x%this.tilesize,l=this.scroll.y%this.tilesize,u=-f-this.tilesize,f=ig.system.width+this.tilesize-f,m=ig.system.height+this.tilesize-l,r=-1,l=-l-this.tilesize;l<m;r++,l+=this.tilesize){var t=r+e;if(t>=this.height||0>t){if(!this.repeat)continue;t=(t%this.height+this.height)%this.height}for(var s=-1,v=u;v<f;s++,v+=this.tilesize){b=s+d;if(b>=this.width||0>b){if(!this.repeat)continue;b=(b%this.width+this.width)%this.width}if(b=this.data[t][b])(c=this.anims[b-
1])?c.draw(v,l):this.tiles.drawTile(v,l,b-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(b){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var c=0;c<b.entities.length;c++){var d=b.entities[c];this.spawnEntity(d.type,d.x,d.y,d.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(c=0;c<b.layer.length;c++)if(d=b.layer[c],"collision"==d.name)this.collisionMap=new ig.CollisionMap(d.tilesize,d.data);else{var e=new ig.BackgroundMap(d.tilesize,d.data,d.tilesetName);e.anims=this.backgroundAnims[d.tilesetName]||
{};e.repeat=d.repeat;e.distance=d.distance;e.foreground=!!d.foreground;e.preRender=!!d.preRender;e.name=d.name;this.backgroundMaps.push(e)}for(c=0;c<this.entities.length;c++)this.entities[c].ready()},loadLevelDeferred:function(b){this._levelToLoad=b},getMapByName:function(b){if("collision"==b)return this.collisionMap;for(var c=0;c<this.backgroundMaps.length;c++)if(this.backgroundMaps[c].name==b)return this.backgroundMaps[c];return null},getEntityByName:function(b){return this.namedEntities[b]},getEntitiesByType:function(b){b=
"string"===typeof b?ig.global[b]:b;for(var c=[],d=0;d<this.entities.length;d++){var e=this.entities[d];e instanceof b&&!e._killed&&c.push(e)}return c},spawnEntity:function(b,c,d,e){var f="string"===typeof b?ig.global[b]:b;if(!f)throw"Can't spawn entity of type "+b;b=new f(c,d,e||{});this.entities.push(b);b.name&&(this.namedEntities[b.name]=b);return b},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(b){b.name&&
delete this.namedEntities[b.name];b._killed=!0;b.type=ig.Entity.TYPE.NONE;b.checkAgainst=ig.Entity.TYPE.NONE;b.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(b)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var b=0;b<this._deferredKill.length;b++)this._deferredKill[b].erase(),this.entities.erase(this._deferredKill[b]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var c in this.backgroundAnims){var b=this.backgroundAnims[c],d;for(d in b)b[d].update()}},updateEntities:function(){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c._killed||c.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var b;for(b=0;b<this.backgroundMaps.length;b++){var c=
this.backgroundMaps[b];if(c.foreground)break;c.setScreenPos(this.screen.x,this.screen.y);c.draw()}this.drawEntities();for(b;b<this.backgroundMaps.length;b++)c=this.backgroundMaps[b],c.setScreenPos(this.screen.x,this.screen.y),c.draw()},drawEntities:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].draw()},checkEntities:function(){for(var b={},c=0;c<this.entities.length;c++){var d=this.entities[c];if(!(d.type==ig.Entity.TYPE.NONE&&d.checkAgainst==ig.Entity.TYPE.NONE&&d.collides==ig.Entity.COLLIDES.NEVER))for(var e=
{},f=Math.floor(d.pos.y/this.cellSize),l=Math.floor((d.pos.x+d.size.x)/this.cellSize)+1,u=Math.floor((d.pos.y+d.size.y)/this.cellSize)+1,m=Math.floor(d.pos.x/this.cellSize);m<l;m++)for(var r=f;r<u;r++)if(b[m])if(b[m][r]){for(var t=b[m][r],s=0;s<t.length;s++)d.touches(t[s])&&!e[t[s].id]&&(e[t[s].id]=!0,ig.Entity.checkPair(d,t[s]));t.push(d)}else b[m][r]=[d];else b[m]={},b[m][r]=[d]}}});ig.Game.SORT={Z_INDEX:function(b,c){return b.zIndex-c.zIndex},POS_X:function(b,c){return b.pos.x+b.size.x-(c.pos.x+
c.size.x)},POS_Y:function(b,c){return b.pos.y+b.size.y-(c.pos.y+c.size.y)}}});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(b,c){c.imageSmoothingEnabled=c.msImageSmoothingEnabled=c.mozImageSmoothingEnabled=c.oImageSmoothingEnabled=!1;b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,c){c.imageSmoothingEnabled=c.msImageSmoothingEnabled=
c.mozImageSmoothingEnabled=c.oImageSmoothingEnabled=!0;b.style.imageRendering="";b.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").defines(function(){var b=!1;try{b=window.self!==window.top,!1===b&&(b=0<window.frames.length)}catch(c){b=!0}ig.Input.inject({keydown:function(c){var e=c.target.tagName;if(!("INPUT"==e||"TEXTAREA"==e))if(e="keydown"==c.type?c.keyCode:2==c.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,b&&0>e&&window.focus(),("touchstart"==c.type||"mousedown"==c.type)&&this.mousemove(c),e=this.bindings[e])this.actions[e]=!0,this.locks[e]||(this.presses[e]=!0,this.locks[e]=
!0),c.stopPropagation(),c.preventDefault()}})});ig.baked=!0;
ig.module("plugins.patches.mouse-move-patch").defines(function(){ig.Input.inject({move:new BABYLON.Vector2(0,0),initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=!0;var b=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",b,!1);ig.system.canvas.addEventListener("DOMMouseScroll",b,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",
this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},mousemove:function(b){var c=parseInt(wgl.system.canvas.offsetWidth);parseInt(wgl.system.canvas.offsetHeight);ig.ua.mobile&&(c=ig.system.realWidth);var c=ig.system.scale*(c/ig.system.realWidth),d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());var e=b.touches?b.touches[0]:b;this.mouse.x=(e.clientX-d.left)/c;this.mouse.y=(e.clientY-d.top)/c;void 0!==typeof b.movementX?(this.move.x=
b.movementX,this.move.y=b.movementY):(this.move.x=0,this.move.y=0)}})});ig.baked=!0;
ig.module("plugins.patches.patch-winsurface-input").defines(function(){ig.WinSurfaceTablet=ig.Class.extend({init:function(){console.log("ontouchstart"in window);console.log(window.navigator.msMaxTouchPoints);ig.ua.winSurface=(window.PointerEvent||1<window.navigator.maxTouchPoints||window.navigator.pointerEnabled||window.navigator.msPointerEnabled||window.MSPointerEvent)&&!("ontouchstart"in window);ig.ua.touchDevice="ontouchstart"in window||window.navigator.msMaxTouchPoints||ig.ua.winSurface}});ig.winSurfacePatch=
new ig.WinSurfaceTablet});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(b,c,d,e){if(this.JQUERYAVAILABLE)b.on(c,d);else b.addEventListener(c,d,e)},create:function(b){return this.JQUERYAVAILABLE?$("<"+b+">"):ig.$new(b)},getElementByClass:function(b){return this.JQUERYAVAILABLE?$("."+b):document.getElementsByClassName(b)},
getElementById:function(b){return this.JQUERYAVAILABLE?0<$(b).length?$(b):null:ig.$(b)},appendChild:function(b,c){this.JQUERYAVAILABLE?b.append(c):b.appendChild(c)},appendToBody:function(b){this.JQUERYAVAILABLE?$("body").append(b):document.body.appendChild(b)},resize:function(b,c,d){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2));else{var e=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=e}},resizeOffsetLeft:function(b,
c,d,e){if(this.JQUERYAVAILABLE)b.width(c.toFixed(2)),b.height(d.toFixed(2)),b.css("left",e);else{var f=b.style.visibility;c="width:"+c.toFixed(2)+"px; height:"+d.toFixed(2)+"px; left: "+e.toFixed(2)+"px;";this.attr(b,"style",c);b.style.visibility=f}},css:function(b,c){if(this.JQUERYAVAILABLE)b.css(c);else{var d="",e;for(e in c)d+=e+":"+c[e]+";";this.attr(b,"style",d)}},getOffsets:function(b){return this.JQUERYAVAILABLE?(b=b.offset(),{left:b.left,top:b.top}):{left:b.offsetLeft,top:b.offsetTop}},attr:function(b,
c,d){if("undefined"===typeof d)return this.JQUERYAVAILABLE?b.attr(c):b.getAttribute(c);this.JQUERYAVAILABLE?b.attr(c,d):b.setAttribute(c,d)},show:function(b){this.JQUERYAVAILABLE?(b.show(),b.css("visibility","visible")):b&&(b.style?b.style.visibility="visible":b[0]&&(b[0].style.visibility="visible"))},hide:function(b){this.JQUERYAVAILABLE?(b.hide(),b.css("visibility","hidden")):b&&(b.style?b.style.visibility="hidden":b[0]&&(b[0].style.visibility="hidden"))},getQueryVariable:function(b){for(var c=
window.location.search.substring(1).split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(decodeURIComponent(e[0])==b)return decodeURIComponent(e[1])}},forcedDeviceDetection:function(){var b=this.getQueryVariable("device");if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},
forcedDeviceRotation:function(){var b=this.getQueryVariable("force-rotate");if(b)switch(b){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}},setZIndex:function(b,c){this.JQUERYAVAILABLE?b.css("zIndex",c):b&&(b.style?b.style.zIndex=c:b[0]&&(b[0].style.zIndex=c))}})});
ig.baked=!0;
ig.module("plugins.handlers.size-handler").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,desktop:{actualSize:new BABYLON.Vector2(window.innerWidth,window.innerHeight),actualResolution:new BABYLON.Vector2(540,960)},mobile:{actualSize:new BABYLON.Vector2(window.innerWidth,window.innerHeight),actualResolution:new BABYLON.Vector2(540,960)},windowSize:new BABYLON.Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new BABYLON.Vector2(1,1),sizeRatio:new BABYLON.Vector2(1,1),
scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate","#webglcanvas"],adsToResize:{},init:function(b){this.domHandler=b;if("undefined"===typeof b)throw"undefined Dom Handler for Size Handler";this.sizeCalcs();this.eventListenerSetup();this.samsungFix()},sizeCalcs:function(){this.windowSize=new BABYLON.Vector2(window.innerWidth,window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new BABYLON.Vector2(window.innerWidth,window.innerHeight);var b=
new BABYLON.Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new BABYLON.Vector2(this.mobile.actualSize.x/b.x,this.mobile.actualSize.y/b.y);var c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.mobile.actualSize.x=b.x*this.scaleRatioMultiplier.x;this.mobile.actualSize.y=b.y*this.scaleRatioMultiplier.y}else this.desktop.actualSize=new BABYLON.Vector2(window.innerWidth,window.innerHeight),b=new BABYLON.Vector2(this.desktop.actualResolution.x,
this.desktop.actualResolution.y),this.scaleRatioMultiplier=new BABYLON.Vector2(this.desktop.actualSize.x/b.x,this.desktop.actualSize.y/b.y),c=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.desktop.actualSize.x=b.x*c,this.desktop.actualSize.y=b.y*c;this.sizeRatio.x=window.innerWidth/this.mobile.actualResolution.x;this.sizeRatio.y=window.innerHeight/this.mobile.actualResolution.y},resizeLayers:function(){for(var b=0;b<this.coreDivsToResize.length;b++){var c=ig.domHandler.getElementById(this.coreDivsToResize[b]);
c&&(ig.ua.mobile?ig.domHandler.resize(c,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y)):ig.domHandler.resizeOffsetLeft(c,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),Math.floor((ig.sizeHandler.windowSize.x>>1)-(ig.sizeHandler.desktop.actualSize.x>>1))))}for(var d in this.adsToResize){var b=ig.domHandler.getElementById("#"+d),c=ig.domHandler.getElementById("#"+d+"-Box"),e=(window.innerWidth-this.adsToResize[d]["box-width"]>>
1)+"px",f=(window.innerHeight-this.adsToResize[d]["box-height"]>>1)+"px";b&&ig.domHandler.css(b,{width:window.innerWidth,height:window.innerHeight});c&&ig.domHandler.css(c,{left:e,top:f})}for(d in this.dynamicClickableEntityDivs){c=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);b=ig.domHandler.getElementById("#"+d);if(ig.ua.mobile)var l=this.dynamicClickableEntityDivs[d].entity_pos_x,u=this.dynamicClickableEntityDivs[d].entity_pos_y,f=this.dynamicClickableEntityDivs[d].width,
e=this.dynamicClickableEntityDivs[d].height,m=Math.floor(l*this.scaleRatioMultiplier.x)+"px",u=Math.floor(u*this.scaleRatioMultiplier.y)+"px",f=Math.floor(f*this.scaleRatioMultiplier.x)+"px",c=Math.floor(e*this.scaleRatioMultiplier.y)+"px";else var e=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(e),m=e.left,r=e.top,l=this.dynamicClickableEntityDivs[d].entity_pos_x,u=this.dynamicClickableEntityDivs[d].entity_pos_y,f=this.dynamicClickableEntityDivs[d].width,e=this.dynamicClickableEntityDivs[d].height,
m=Math.floor(m+l*c)+"px",u=Math.floor(r+u*c)+"px",f=Math.floor(f*c)+"px",c=Math.floor(e*c)+"px";ig.domHandler.css(b,{"float":"left",position:"absolute",left:m,top:u,width:f,height:c,"z-index":3})}},resize:function(){ig.ua.touchDevice||wgl.system.engine.resize();this.sizeCalcs();this.resizeLayers()},reorient:function(){window.scrollTo(0,1);if(ig.ua.mobile){wgl.system.engine.resize();var b=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,c=this.domHandler.getElementById("#orientate"),
d=this.domHandler.getElementById("#game");b?(this.domHandler.show(c),this.domHandler.hide(d)):(this.domHandler.show(d),this.domHandler.hide(c))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize();wgl.system.engine.setSize(ig.system.width,ig.system.height)},resizeAds:function(){for(var b in this.adsToResize){var c=ig.domHandler.getElementById("#"+b),d=ig.domHandler.getElementById("#"+b+"-Box"),e=(window.innerWidth-this.adsToResize[b]["box-width"]>>1)+"px",f=(window.innerHeight-this.adsToResize[b]["box-height"]>>
1)+"px";c&&ig.domHandler.css(c,{width:window.innerWidth,height:window.innerHeight});d&&ig.domHandler.css(d,{left:e,top:f})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(b){b.preventDefault();return!1},
!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",function(b){b.preventDefault();return!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&(this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100));null==this.orientationTimeout&&(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),
2E3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),window.addEventListener("resize",this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",this.orientationHandler.bind(this)),window.addEventListener("resize",
this.orientationHandler.bind(this)));document.ontouchmove=function(b){window.scrollTo(0,1);b.preventDefault()}}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(){}})});ig.baked=!0;
ig.module("plugins.audio.sound-player").defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",stayMuteFlag:!1,debug:!1,init:function(){this.debug&&console.log(this.tagName)},play:function(b){this.debug&&console.log("play sound ",b)},stop:function(){this.debug&&console.log("stop sound ")},volume:function(){this.debug&&console.log("set volume")},mute:function(b){this.debug&&console.log("mute");"undefined"===typeof b?this.stayMuteFlag=!0:b&&(this.stayMuteFlag=!0)},unmute:function(b){this.debug&&
console.log("unmute");"undefined"===typeof b?this.stayMuteFlag=!1:b&&(this.stayMuteFlag=!1)}})});ig.baked=!0;
ig.module("plugins.audio.impact-music-player").requires("plugins.audio.sound-player").defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:!1,soundList:{},init:function(b,c){this.parent(b,c);for(var d in b)this.soundList[d]=d,ig.music.add(b[d].path+".*",d);c&&c.loop&&(ig.music.loop=c.loop)},play:function(b){this.stayMuteFlag||(this.bgmPlaying=!0,"undefined"===typeof b?ig.music.play(b):ig.music.play())},stop:function(){this.bgmPlaying=!1;ig.music.pause()},
volume:function(b){console.log("impactmusic:",b);ig.music.volume=0>b?0:isNaN(b)?1:1<b?1:b},getVolume:function(){return ig.music.volume},mute:function(b){this.parent(b);this.bgmPlaying&&this.stop()},unmute:function(b){this.parent(b);this.play()}})});ig.baked=!0;
ig.module("plugins.audio.impact-sound-player").requires("plugins.audio.sound-player").defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(b,c){this.parent(b,c);for(var d in b){var e=new ig.Sound(b[d].path+".*");this.soundList[d]=e}},play:function(b){this.stayMuteFlag||("object"===typeof b?(console.log(b+" exists"),b.play()):"string"===typeof b&&this.soundList[b].play())},stop:function(b){this.parent(b);b.stop()},volume:function(b){ig.soundManager.volume=
0>b?0:isNaN(b)?1:1<b?1:b},getVolume:function(){return ig.soundManager.volume},mute:function(b){this.parent(b);ig.Sound.enabled=!1},unmute:function(b){this.parent(b);ig.Sound.enabled=!0}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").requires("plugins.audio.sound-player").defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(b,c){this.parent(b,c);for(var d in b){var e=b[d].path,e=new Howl({urls:[e+"."+ig.Sound.FORMAT.OGG.ext,e+"."+ig.Sound.FORMAT.MP3.ext]});this.soundList[d]=e}},play:function(b){this.stayMuteFlag||("object"===typeof b?b.play():"string"===typeof b&&this.soundList[b].play())},stop:function(b){this.parent(b);b.stop()},volume:function(b){for(var c in this.soundList){if(0>
b){this.soundList[c].volume(0);break}isNaN(b)?this.soundList[c].volume(1):1<b?this.soundList[c].volume(1):this.soundList[c].volume(b)}},getVolume:function(){for(var b in this.soundList)return this.soundList[b].volume()},mute:function(b){this.parent(b);Howler.mute()},unmute:function(b){this.parent(b);Howler.unmute()}})});ig.baked=!0;
ig.module("plugins.audio.howler-music-player").requires("plugins.audio.sound-player").defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:!1,soundList:{},init:function(b,c){this.parent(b,c);for(var d in b){var e=b[d].path,e=new Howl({urls:[e+"."+ig.Sound.FORMAT.OGG.ext,e+"."+ig.Sound.FORMAT.MP3.ext],loop:!0,autoplay:!1,onend:function(){}.bind(this)});this.soundList[d]=e}},play:function(b){if(!this.stayMuteFlag&&!this.bgmPlaying)if("object"===typeof b)this.bgmPlaying=
!0,b.play();else if("string"===typeof b)this.bgmPlaying=!0,this.soundList[b].play();else for(var c in this.soundList){this.soundList[c].play();this.bgmPlaying=!0;break}},stop:function(b){this.parent(b);if(this.bgmPlaying){for(var c in this.soundList)this.soundList[c].stop();this.bgmPlaying=!1}},volume:function(b){for(var c in this.soundList){if(0>b){this.soundList[c].volume(0);break}isNaN(b)?this.soundList[c].volume(1):1<b?this.soundList[c].volume(1):this.soundList[c].volume(b)}},getVolume:function(){for(var b in this.soundList)return this.soundList[b].volume()},
mute:function(b){this.parent(b);Howler.mute()},unmute:function(b){this.parent(b);Howler.unmute()}})});ig.baked=!0;
ig.module("plugins.audio.jukebox-player").requires("plugins.audio.sound-player").defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:!1,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:0.001,init:function(b,c){this.parent(b,c);for(var d in b){this.soundList[d]=d;var e=b[d].path;this.jukeboxPlayer=new jukebox.Player({resources:[e+"."+ig.Sound.FORMAT.OGG.ext,e+"."+ig.Sound.FORMAT.MP3.ext],autoplay:!1,spritemap:{music:{start:b[d].startMp3,
end:b[d].endMp3,loop:!0}}})}},play:function(){this.stayMuteFlag||(this.bgmPlaying=!0,this.pausePosition?(console.log("resume"),this.jukeboxPlayer.resume(this.pausePosition)):(console.log("play"),this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,!0)),this.premuteVolume=this.getVolume())},stop:function(){this.bgmPlaying=!1;this.pausePosition=this.jukeboxPlayer.pause()},volume:function(b){console.log("jukebox:",b);0>=b?this.jukeboxPlayer.setVolume(this.minVolume):isNaN(b)?this.jukeboxPlayer.setVolume(1):
1<b?this.jukeboxPlayer.setVolume(1):this.jukeboxPlayer.setVolume(b)},getVolume:function(){return this.jukeboxPlayer.getVolume()},mute:function(b){this.parent(b);this.bgmPlaying&&(console.log("jukebox",this.premuteVolume),this.stayMuteFlag||(this.premuteVolume=this.getVolume()),this.jukeboxPlayer.pause(),this.jukeboxPlayer.setVolume(this.minVolume))},unmute:function(b){this.parent(b);this.stayMuteFlag||(console.log("jukebox",this.premuteVolume),this.jukeboxPlayer.setVolume(this.premuteVolume),this.jukeboxPlayer.resume())}})});
ig.baked=!0;
ig.module("plugins.audio.webaudio-music-player").requires("plugins.audio.sound-player").defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({tagName:"WebaudioMusicPlayer",bgmPlaying:!1,isSupported:!1,muteFlag:!1,pausedTime:0,webaudio:null,useHTML5Audio:!1,audio:null,inactiveAudio:null,codecs:null,_volume:1,soundList:{},init:function(b){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{this.AudioContext=window.AudioContext||window.webkitAudioContext,this.webaudio.context=
new this.AudioContext,this.isSupported=!0}catch(c){console.log("Web Audio API not supported in this browser."),this.webaudio=null,this.useHTML5Audio=!0}if(this.useHTML5Audio)if("undefined"!==typeof Audio)try{new Audio}catch(d){this.useHTML5Audio=!1}else this.useHTML5Audio=!1;this.useHTML5Audio&&(this.audio=new Audio,this.isSupported=!0,this.initHTML5Audio(b));if(!this.isSupported)return null;this.webaudio&&this.initWebAudio(b)},initWebAudio:function(b){ig.ua.iOS&&this.initIOSWebAudioUnlock();this.webaudio.gainNode=
this.webaudio.context.createGain();this.webaudio.gainNode.connect(this.webaudio.context.destination);this.webaudio.gainNode.gain.value=this._volume;var c="start",d="stop",e=this.webaudio.context.createBufferSource();"function"!==typeof e.start&&(c="noteOn");this.webaudio.compatibility.start=c;"function"!==typeof e.stop&&(d="noteOff");this.webaudio.compatibility.stop=d;for(var f in b){this.soundList[f]=f;c=b[f].path;b=c+"."+ig.Sound.FORMAT.MP3.ext;var l=c+"."+ig.Sound.FORMAT.OGG.ext;ig.ua.mobile?ig.ua.iOS&&
(l=b):(c=navigator.userAgent.toLowerCase(),-1!=c.indexOf("safari")&&-1>=c.indexOf("chrome")&&(l=b));var u=new XMLHttpRequest;u.open("GET.html",l,!0);u.responseType="arraybuffer";u.onload=function(){this.webaudio.context.decodeAudioData(u.response,function(b){this.webaudio.buffer=b;this.webaudio.source_loop={};this.bgmPlaying?this.play():this.stop()}.bind(this),function(){console.log('Error decoding audio "'+l+'".')})}.bind(this);u.send();break}},initIOSWebAudioUnlock:function(){if(this.webaudio){webaudio=
this.webaudio;var b=function(){var c=webaudio.context,d=c.createBuffer(1,1,22050),e=c.createBufferSource();e.buffer=d;e.connect(c.destination);"undefined"===typeof e.start?e.noteOn(0):e.start(0);setTimeout(function(){(e.playbackState===e.PLAYING_STATE||e.playbackState===e.FINISHED_STATE)&&window.removeEventListener("touchend",b,!1)},0)};window.addEventListener("touchend",b,!1)}},initHTML5Audio:function(b){if(this.useHTML5Audio&&this.audio){var c=this.audio;this.codecs={};this.codecs={mp3:!!c.canPlayType("audio/mpeg;").replace(/^no$/,
""),opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,
"")};this.is={ff:Boolean(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)};this.playDelay=-60;this.stopDelay=30;this.is.chrome&&(this.playDelay=-25);this.is.chrome&&(this.stopDelay=25);this.is.ff&&(this.playDelay=-25);this.is.ff&&
(this.stopDelay=85);this.is.opera&&(this.playDelay=5);this.is.opera&&(this.stopDelay=0);for(var d in b){this.soundList[d]=d;var e=b[d].path,c=e+"."+ig.Sound.FORMAT.OGG.ext,e=e+"."+ig.Sound.FORMAT.MP3.ext,f=null;this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]?f=c:this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]&&(f=e);if(f){ig.ua.mobile?ig.ua.iOS&&(f=e):(b=navigator.userAgent.toLowerCase(),-1!=b.indexOf("safari")&&-1>=b.indexOf("chrome")&&(f=e));this.audio.addEventListener("error",function(){this.audio.error&&
4===this.audio.error.code&&(this.isSupported=!1)},!1);this.audio.src=f;this.audio._pos=0;this.audio.preload="auto";this.audio.volume=this._volume;this.inactiveAudio=new Audio;this.inactiveAudio.src=f;this.inactiveAudio._pos=0;this.inactiveAudio.preload="auto";this.inactiveAudio.volume=this._volume;this.inactiveAudio.load();var l=function(){this._duration=this.audio.duration;this._loaded||(this._loaded=!0);this.bgmPlaying?this.play():this.stop();this.audio.removeEventListener("canplaythrough",l,!1)}.bind(this);
this.audio.addEventListener("canplaythrough",l,!1);this.audio.load();break}}}},play:function(b){if(this.isSupported)if(this.bgmPlaying=!0,this.webaudio)if(this.webaudio.buffer){if(!this.muteFlag&&(this.bgmPlaying=!0,!this.webaudio.source_loop._playing)){this.webaudio.source_loop=this.webaudio.context.createBufferSource();this.webaudio.source_loop.buffer=this.webaudio.buffer;this.webaudio.source_loop.loop=!0;this.webaudio.source_loop.connect(this.webaudio.gainNode);isNaN(b)&&(b=0,this.pausedTime&&
(b=this.pausedTime));this.webaudio.source_loop._startTime=this.webaudio.context.currentTime;if("noteOn"===this.webaudio.compatibility.start)this.webaudio.source_once=this.webaudio.context.createBufferSource(),this.webaudio.source_once.buffer=this.webaudio.buffer,this.webaudio.source_once.connect(this.webaudio.gainNode),this.webaudio.source_once.noteGrainOn(0,b,this.webaudio.buffer.duration-b),this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+(this.webaudio.buffer.duration-
b));else this.webaudio.source_loop[this.webaudio.compatibility.start](0,b);this.webaudio.source_loop._playing=!0}}else this.bgmPlaying=!0;else if(this.audio){var c=this.audio;if(!this.muteFlag){this.bgmPlaying=!0;isNaN(b)&&(b=0,this.pausedTime&&(b=this.pausedTime));var d=this._duration-b;this._onEndTimer&&(clearTimeout(this._onEndTimer),this._onEndTimer=null);this._onEndTimer=setTimeout(function(){this.audio.currentTime=0;this.audio.pause();this.pausedTime=0;if(this.inactiveAudio){var b=this.audio;
this.audio=this.inactiveAudio;this.inactiveAudio=b}this.play()}.bind(this),1E3*d+this.playDelay);4===c.readyState||!c.readyState&&navigator.isCocoonJS?(c.readyState=4,c.currentTime=b,c.muted=this.muteFlag||c.muted,c.volume=this._volume,setTimeout(function(){c.play()},0)):(clearTimeout(this._onEndTimer),this._onEndTimer=null,function(){var b=function(){this.play();c.removeEventListener("canplaythrough",b,!1)}.bind(this);c.addEventListener("canplaythrough",b,!1)}())}}},stop:function(){this.bgmPlaying=
!1;if(this.isSupported)if(this.webaudio){if(this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start))this.webaudio.source_once[this.webaudio.compatibility.stop](0)}else if(this.audio){var b=
this.audio;this.pausedTime=b.currentTime;b.currentTime=0;b.pause();clearTimeout(this._onEndTimer);this._onEndTimer=null}},volume:function(b){this.isSupported&&(this._volume=b,0>this._volume?this._volume=0:1<this._volume&&(this._volume=1),this.webaudio?this.webaudio.gainNode&&(this.webaudio.gainNode.gain.value=this._volume):this.audio&&(this.audio.volume=this._volume,this.inactiveAudio&&(this.inactiveAudio.volume=this._volume)))},getVolume:function(){return!this.isSupported?0:this._volume},mute:function(b){this.parent(b);
!1==this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying&&(this.stop(),this.bgmPlaying=!0))},unmute:function(b){this.parent(b);!this.stayMuteFlag&&!0==this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying&&this.play())}})});ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3"},sfx:{kittyopeningSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/opening/kittyopening"},staticSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/play/static"},openingSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/opening/opening"},decisionSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/decision"},failedSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/failed"},chooseSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/choose"},
rollingSound:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/rolling"}},bgm:{background:{path:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/audio/bgm",startOgg:0,endOgg:31.503,startMp3:0,endMp3:31.556}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.impact-music-player","plugins.audio.impact-sound-player","plugins.audio.howler-player","plugins.audio.howler-music-player","plugins.audio.jukebox-player","plugins.audio.webaudio-music-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:!1,soundInfo:new SoundInfo,init:function(){console.log("Initiating sound handler");this.initWindowHandler();ig.ua.mobile?
(this.initPowerButtonFix(),this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:!0}))):(this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:!0})));this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx);this.bgmPlayer.play();this.muteAll()},checkBGM:function(){return this.bgmPlayer.stayMuteFlag},
checkSFX:function(){return this.sfxPlayer.stayMuteFlag},muteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.mute(b)},muteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.mute(b)},unmuteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.unmute(b)},unmuteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.unmute(b)},muteAll:function(b){this.muteSFX(b);this.muteBGM(b)},unmuteAll:function(b){this.unmuteSFX(b);this.unmuteBGM(b)},forceMuteAll:function(){this.focusBlurMute||this.muteAll(!1);this.focusBlurMute=!0},forceUnMuteAll:function(){this.focusBlurMute&&
(this.unmuteAll(!1),this.focusBlurMute=!1)},initWindowHandler:function(){"true"===ig.domHandler.getQueryVariable("webview")?($(window).focus(function(){wgl.system&&!1==ig.game.gameOver&&!1==ig.game.gamePaused&&wgl.system.startRender();ig.soundHandler&&ig.soundHandler.forceUnMuteAll()}),$(window).blur(function(){wgl.system&&wgl.system.stopRender();ig.soundHandler&&ig.soundHandler.forceMuteAll()})):(window.onfocus=function(){wgl.system&&(wgl.system.stopRender(),!1==ig.game.gameOver&&!1==ig.game.gamePaused&&
wgl.system.startRender());ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},window.onblur=function(){wgl.system&&wgl.system.stopRender();ig.soundHandler&&ig.soundHandler.forceMuteAll()})},initPowerButtonFix:function(){var b=this.getHiddenProp();b&&(b=b.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(b,this.visChange));window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()},!1);window.addEventListener("pageshow",function(){ig.soundHandler&&
ig.soundHandler.forceUnMuteAll()},!1)},getHiddenProp:function(){var b=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var c=0;c<b.length;c++)if(b[c]+"Hidden"in document)return b[c]+"Hidden";return null},isHidden:function(){var b=this.getHiddenProp();return!b?!1:document[b]},visChange:function(){ig.soundHandler.isHidden()?ig.soundHandler&&ig.soundHandler.forceMuteAll():ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},saveVolume:function(){this.sfxPlayer&&ig.game.io.storageSet("soundVolume",
this.sfxPlayer.getVolume());this.bgmPlayer&&ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume())},forceLoopBGM:function(){var b;if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying&&this.bgmPlayer){var c=this.bgmPlayer.jukeboxPlayer;if(c){null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase());b=Boolean(window.chrome);!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase());var d=0.1;ig.ua.mobile&&(d=0.115,ig.ua.android&&(d=0.45,b&&(d=0.3)));c.settings.spritemap.music&&
(b=c.settings.spritemap.music.end-d,c.getCurrentTime()>=b&&(b=c.settings.spritemap.music.start,ig.ua.android?this.forcelooped||(c.play(b,!0),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},d)):c.setCurrentTime(b)))}else"ImpactMusicPlayer"==this.bgmPlayer.tagName&&(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),b=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase()),d=0.1,ig.ua.mobile&&(d=0.115,ig.ua.android&&
(d=0.45,b&&(d=0.3))),c=0,"mp3"==ig.soundManager.format.ext&&(c=0.05),ig.music.currentTrack&&(b=ig.music.currentTrack.duration-d,ig.music.currentTrack.currentTime>=b&&(ig.ua.android?this.forcelooped||(ig.music.currentTrack.pause(),ig.music.currentTrack.currentTime=c,ig.music.currentTrack.play(),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},d)):ig.music.currentTrack.currentTime=c)))}}})});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.io.mouse").defines(function(){Mouse=ig.Class.extend({bindings:{click:[ig.KEY.MOUSE1]},last:new BABYLON.Vector2.Zero,init:function(){ig.input.initMouse();for(var b in this.bindings){this[b]=b;for(var c=0;c<this.bindings[b].length;c++)ig.input.bind(this.bindings[b][c],b)}},getLast:function(){return this.last},getPos:function(){if(ig.ua.mobile)var b=ig.input.mouse.x/ig.sizeHandler.sizeRatio.x,c=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;else b=ig.input.mouse.x,c=ig.input.mouse.y;
this.last=new BABYLON.Vector2(b,c);return this.last.clone()}})});ig.baked=!0;ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{jump:[ig.KEY.W,ig.KEY.UP_ARROW],moveright:[ig.KEY.D,ig.KEY.RIGHT_ARROW],moveleft:[ig.KEY.A,ig.KEY.LEFT_ARROW],shoot:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var b in this.bindings){this[b]=b;for(var c=0;c<this.bindings[b].length;c++)ig.input.bind(this.bindings[b][c],b)}}})});ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var b=navigator.getGamepads||navigator.webkitGetGamepads;b&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=b}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(b){return"object"==typeof b?b.pressed:
1==b},buttonDown:function(b){if(b=this.bindings[b])this.states[b]=!0,this.downLocks[b]||(this.presses[b]=!0,this.downLocks[b]=!0)},buttonUp:function(b){if((b=this.bindings[b])&&this.downLocks[b]&&!this.upLocks[b])this.states[b]=!1,this.releases[b]=!0,this.upLocks[b]=!0},clearPressed:function(){for(var b in this.releases)this.states[b]=!1,this.downLocks[b]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(b,c){this.bindings[b]=c},unbind:function(b){this.releases[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(b){return this.states[b]},pressed:function(b){return this.presses[b]},released:function(b){return this.releases[b]},clamp:function(b,c,d){return b<c?c:b>d?d:b},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var b in this.bindings){for(var c=
!1,d=0;d<this.list.length;d++){var e=this.list[d];if(e&&e.buttons&&this.buttonPressed(e.buttons[b])){c=!0;break}}c?this.buttonDown(b):this.buttonUp(b)}for(d=0;d<this.list.length;d++)if((e=this.list[d])&&e.axes){b=e.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var c=e.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],f=e.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],e=e.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(b)?0:b;this.leftStick.y+=isNaN(c)?0:c;this.rightStick.x+=isNaN(f)?0:f;this.rightStick.y+=
isNaN(e)?0:e}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var b in this.bindings)for(var c=0;c<this.bindings[b].length;c++)ig.gamepadInput.bind(this.bindings[b][c],b)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:{},pressed:[],state:[],released:[],multitouchCapable:!1,lastEventUp:null,internalWidth:1,internalHeight:1,scaleX:1,scaleY:1,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),
!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchdown:function(b){if(ig.ua.touchDevice)if(this.updateSizeProperties(),
window.navigator.msPointerEnabled)this.windowKeyDown(b);else if(b.touches){this.pollMultitouch(b.touches.length);this.updateSizeProperties();var c={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(c=ig.system.canvas.getBoundingClientRect());for(var d=[],e=0;e<b.touches.length;e++)d.push(b.touches[e]);this.spliceFromArray(d,this.pressed);this.spliceFromArray(d,this.state);this.spliceFromArray(d,this.released);for(e=0;e<d.length;e++)b=d[e],this.pressed.push({identifier:b.identifier,x:(b.clientX-
c.left)/this.scaleX,y:(b.clientY-c.top)/this.scaleY})}},touchmove:function(b){if(ig.ua.touchDevice)if(this.updateSizeProperties(),window.navigator.msPointerEnabled)this.windowMove(b);else if(b.touches){this.pollMultitouch(b.touches.length);for(var c=0;c<b.touches.length;c++){var d=b.touches[c];this.upgrade(this.pressed,this.state,d);this.updateArray(this.state,d)}}},touchup:function(b){if(ig.ua.touchDevice)if(this.updateSizeProperties(),window.navigator.msPointerEnabled)this.windowKeyUp(b);else if(this.lastEventUp=
b,b.touches)for(var c=0;c<b.changedTouches.length;c++){var d=b.changedTouches[c];this.upgrade(this.state,this.released,d);this.upgrade(this.pressed,this.released,d)}},windowKeyDown:function(b){b=b.changedTouches?b.changedTouches:[b];this.pollMultitouch(b.length);this.updateSizeProperties();for(var c=[],d=0;d<b.length;d++)c.push(b[d]);var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());this.spliceFromArray(c,this.pressed);this.spliceFromArray(c,
this.state);this.spliceFromArray(c,this.released);for(d=0;d<c.length;d++){var f=b[d];this.pressed.push({identifier:"undefined"!=typeof f.identifier?f.identifier:"undefined"!=typeof f.pointerId?f.pointerId:1,x:(f.clientX-e.left)/this.scaleX,y:(f.clientY-e.top)/this.scaleY})}},windowKeyUp:function(b){this.lastEventUp=b;b=b.changedTouches?b.changedTouches:[b];for(var c=0;c<b.length;c++){var d=b[c],d={identifier:"undefined"!=typeof d.identifier?d.identifier:"undefined"!=typeof d.pointerId?d.pointerId:
1,clientX:d.clientX,clientY:d.clientY};this.upgrade(this.state,this.released,d);this.upgrade(this.pressed,this.released,d)}},windowMove:function(b){b=b.changedTouches?b.changedTouches:[b];this.pollMultitouch(b.length);for(var c=0;c<b.length;c++){var d=b[c],d={identifier:d.pointerId,clientX:d.clientX,clientY:d.clientY};this.upgrade(this.pressed,this.state,d);this.updateArray(this.state,d)}},clear:function(){for(var b=0;b<this.released.length;++b)this.released[b]&&(this.released.splice(b,1),b--)},pollMultitouch:function(b){!this.multitouchCapable&&
1<b&&(this.multitouchCapable=!0)},spliceFromArray:function(b,c){for(var d=0;d<c.length;d++)for(var e=0;e<b.length;e++)b[e].identifier===c[d].identifier&&(b.splice(e,1),e--)},updateSizeProperties:function(){var b=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,c=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;this.scaleX=ig.system.scale*(b/ig.system.realWidth);this.scaleY=ig.system.scale*(c/ig.system.realHeight)},upgrade:function(b,c,d){var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&
(e=ig.system.canvas.getBoundingClientRect());for(var f=(d.clientX-e.left)/this.scaleX,e=(d.clientY-e.top)/this.scaleY,l=0;l<b.length;l++)if(void 0!==typeof b[l].identifier&&void 0!==typeof d.identifier&&d.identifier===b[l].identifier){b.splice(l,1);c.push({identifier:d.identifier,x:f,y:e});break}},updateArray:function(b,c){var d={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(d=ig.system.canvas.getBoundingClientRect());for(var e=(c.clientX-d.left)/this.scaleX,d=(c.clientY-d.top)/this.scaleY,
f=0;f<b.length;f++)if(void 0!==typeof b[f].identifier&&void 0!==typeof c.identifier&&c.identifier===b[f].identifier){b[f].x=e;b[f].y=d;break}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch-input","plugins.io.gamepad-input").defines(function(){IoManager=ig.Class.extend({storage:null,localStorageSupport:!1,gamekey:"SurviveTheRoom",mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();this.initMouse();this.initKeyboard();
this.initMultitouch()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){this._supportsLocalStorage()&&(this.storage=new ig.Storage)},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){ig.multitouchInput.start()},initGamepad:function(){this.gamepad=new Gamepad},press:function(b){return ig.input.pressed(b)?!0:!1},held:function(b){return ig.input.state(b)||this.gamepad.state(b)?!0:!1},release:function(b){return ig.input.released(b)||
this.gamepad.released(b)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getLastClickPos:function(){return this.mouse.getLast()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(b,c,d,e,f){return b.x>c+e||b.x<c||b.y>d+f||b.y<d?!1:!0},clear:function(){ig.multitouchInput.clear()},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(b){return this.localStorageSupport}},
storageIsSet:function(b){return!this.localStorageSupport?null:this.storage.isSet(b)},storageGet:function(b){return!this.localStorageSupport?null:this.storage.get(b)},storageSet:function(b,c){if(!this.localStorageSupport)return null;this.storage.set(b,c)},assert:function(b,c,d){if(c!==d)throw"actualValue:"+c+" not equal to testValue:"+d+" at "+b;}})});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({splashDesktop:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/splash/desktop/cover.jpg"),splashMobile:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/splash/mobile/cover.jpg"),barEmpty:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/load-bar-empty.png"),barFill:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/load-bar-fill.png"),init:function(b,
c){this.parent(b,c);var d=ig.domHandler.getElementById("#game"),e=ig.domHandler.getElementById("#webgl");ig.domHandler.setZIndex(d,1);ig.domHandler.setZIndex(e,0);console.log("Checking for AdInGamePreroll ...");"undefined"!=typeof AdInGamePreroll&&AdInGamePreroll.Initialize();console.log("Checking for BrandingSplashScreen ...");"undefined"!=typeof BrandingSplashScreen&&InitializeSplashScreen();console.log("Injecting Loading Game API ...");try{console.log('enabled loading api11');}catch(f){console.log(f.message)}ig.apiHandler.run("MJSPreroll")},
end:function(){this.parent();if(ig.ua.mobile){var b=ig.domHandler.getElementById("#play");ig.domHandler.show(b)}ig.system.setGame(MyGame)},setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,0.05,[0,1,2,3,4,5]);this.customAnim.currentFrame=0;ig.loadingScreen=this;ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=
0;this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){ig.system.context.font="1px troika";ig.system.context.fillStyle="#000000";ig.system.context.fillText(" ",0,0);this._drawStatus+=(this.status-this._drawStatus)/5;ig.system.context.drawImage(this.splashDesktop.data,0,0,ig.system.width,ig.system.height);ig.system.context.drawImage(this.barEmpty.data,0.5*ig.system.width-230,0.7*ig.system.height,460,20);ig.system.context.drawImage(this.barFill.data,0.5*ig.system.width-230,0.7*ig.system.height,
460*this._drawStatus,20)}})});ig.baked=!0;
ig.module("babylon.plugins.wgl-entity").defines(function(){wgl.Entity=ig.Class.extend({pos:null,vel:null,acc:null,meshes:[],_killed:!1,init:function(b,c,d,e){ig.merge(this,e);this.pos=new BABYLON.Vector3(0,0,0);this.vel=new BABYLON.Vector3(0,0,0);this.acc=new BABYLON.Vector3(0,0,0);e&&e._mesh&&this.meshes.push(e._mesh);isNaN(b)||(this.pos.x=b);isNaN(c)||(this.pos.y=c);isNaN(d)||(this.pos.z=d)},update:function(){},render:function(){},kill:function(){for(var b=0;b<this.meshes.length;b++){var c=this.meshes[b];
wgl.game.currentScene.stopAnimation(c);c.dispose();this.meshes.splice(b,1);b--}this._killed=!0},reset:function(){},resize:function(){}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity","babylon.plugins.wgl-entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var c=0;c<this.length;++c)if(this[c]===b)return c;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);
this.tweens=b}};ig.Entity.prototype.tween=function(b,c,d){b=new ig.Tween(this,b,c,d);this.tweens.push(b);return b};ig.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};ig.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};ig.Entity.prototype.stopTweens=function(b){for(var c=0;c<this.tweens.length;c++)this.tweens[c].stop(b)};wgl.Entity.prototype.tweens=[];wgl.Entity.prototype._preTweenUpdate=wgl.Entity.prototype.update;
wgl.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],c=0;c<this.tweens.length;c++)this.tweens[c].update(),this.tweens[c].complete||b.push(this.tweens[c]);this.tweens=b}};wgl.Entity.prototype.tween=function(b,c,d){b=new ig.Tween(this,b,c,d);this.tweens.push(b);return b};wgl.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};wgl.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};
wgl.Entity.prototype.stopTweens=function(b){for(var c=0;c<this.tweens.length;c++)this.tweens[c].stop(b)};ig.Tween=function(b,c,d,e){var f={},l={},u={},m=0,r=!1,t=!1,s=!1;this.duration=d;this.paused=this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,e);this.loopNum=this.loopCount;this.chain=function(b){s=b};this.initEnd=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.initEnd(subprop,
c[b],d[b])};this.initStart=function(b,c,d,e){if("object"!==typeof d[b])"undefined"!==typeof c[b]&&(e[b]=d[b]);else for(subprop in d[b])e[b]||(e[b]={}),"undefined"!==typeof c[b]&&this.initStart(subprop,c[b],d[b],e[b])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;m=0;-1==b.tweens.indexOf(this)&&b.tweens.push(this);t=!0;r=new ig.Timer;for(var d in c)this.initEnd(d,c,l);for(d in l)this.initStart(d,l,b,f),this.initDelta(d,u,b,l)};this.initDelta=function(b,c,d,e){if("object"!==
typeof e[b])c[b]=e[b]-d[b];else for(subprop in e[b])c[b]||(c[b]={}),this.initDelta(subprop,c[b],d[b],e[b])};this.propUpdate=function(b,c,d,e,f){if("object"!==typeof d[b])c[b]="undefined"!=typeof d[b]?d[b]+e[b]*f:c[b];else for(subprop in d[b])this.propUpdate(subprop,c[b],d[b],e[b],f)};this.propSet=function(b,c,d){if("object"!==typeof c[b])d[b]=c[b];else for(subprop in c[b])d[b]||(d[b]={}),this.propSet(subprop,c[b],d[b])};this.update=function(){if(!t)return!1;if(this.delay){if(r.delta()<this.delay)return;
this.delay=0;r.reset()}if(this.paused||this.complete)return!1;var c=(r.delta()+m)/this.duration,c=1<c?1:c,d=this.easing(c);for(property in u)this.propUpdate(property,b,f,u,d);if(1<=c){if(0==this.loopNum||!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();s&&s.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in f)this.propSet(property,f,b);m=0;r.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){c={};d={};ig.merge(c,l);ig.merge(d,f);ig.merge(f,
c);ig.merge(l,d);for(property in l)this.initDelta(property,u,b,l);m=0;r.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;m+=r.delta()};this.resume=function(){this.paused=!1;r.reset()};this.stop=function(b){b&&(this.loop=this.complete=this.paused=!1,m+=d,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=
function(b){return b};ig.Tween.Easing.Quadratic.EaseIn=function(b){return b*b};ig.Tween.Easing.Quadratic.EaseOut=function(b){return-b*(b-2)};ig.Tween.Easing.Quadratic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(b){return b*b*b};ig.Tween.Easing.Cubic.EaseOut=function(b){return--b*b*b+1};ig.Tween.Easing.Cubic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};ig.Tween.Easing.Quartic.EaseIn=function(b){return b*b*b*b};ig.Tween.Easing.Quartic.EaseOut=
function(b){return-(--b*b*b*b-1)};ig.Tween.Easing.Quartic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)};ig.Tween.Easing.Quintic.EaseIn=function(b){return b*b*b*b*b};ig.Tween.Easing.Quintic.EaseOut=function(b){return(b-=1)*b*b*b*b+1};ig.Tween.Easing.Quintic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(b){return-Math.cos(b*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(b){return Math.sin(b*
Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(b){return-0.5*(Math.cos(Math.PI*b)-1)};ig.Tween.Easing.Exponential.EaseIn=function(b){return 0==b?0:Math.pow(2,10*(b-1))};ig.Tween.Easing.Exponential.EaseOut=function(b){return 1==b?1:-Math.pow(2,-10*b)+1};ig.Tween.Easing.Exponential.EaseInOut=function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(b){return-(Math.sqrt(1-b*b)-1)};ig.Tween.Easing.Circular.EaseOut=
function(b){return Math.sqrt(1- --b*b)};ig.Tween.Easing.Circular.EaseInOut=function(b){return 1>(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};ig.Tween.Easing.Elastic.EaseIn=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return-(d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e))};ig.Tween.Easing.Elastic.EaseOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,
c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return d*Math.pow(2,-10*b)*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Elastic.EaseInOut=function(b){var c,d=0.1,e=0.4;if(0==b)return 0;if(1==b)return 1;e||(e=0.3);!d||1>d?(d=1,c=e/4):c=e/(2*Math.PI)*Math.asin(1/d);return 1>(b*=2)?-0.5*d*Math.pow(2,10*(b-=1))*Math.sin((b-c)*2*Math.PI/e):0.5*d*Math.pow(2,-10*(b-=1))*Math.sin((b-c)*2*Math.PI/e)+1};ig.Tween.Easing.Back.EaseIn=function(b){return b*b*(2.70158*b-1.70158)};ig.Tween.Easing.Back.EaseOut=function(b){return(b-=
1)*b*(2.70158*b+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=function(b){return 1-ig.Tween.Easing.Bounce.EaseOut(1-b)};ig.Tween.Easing.Bounce.EaseOut=function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(b){return 0.5>b?0.5*ig.Tween.Easing.Bounce.EaseIn(2*
b):0.5*ig.Tween.Easing.Bounce.EaseOut(2*b-1)+0.5}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var b=getQueryVariable("webview");if(b)switch(b){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(b=getQueryVariable("debug"))switch(b){case "true":ig.game.showDebugMenu(),console.log("debug mode")}if(b=getQueryVariable("debugwgl"))switch(b){case "true":wgl.debug.debug=!0,console.log("wgl debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),
ig.game.endGame()}getQueryVariable("ad")}})});ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(b,c){this.game=b;this.levels=[];this.currentLevel=0;this.append(c)},loadLevel:function(b){for(var c in ig.sizeHandler.dynamicClickableEntityDivs){var d=ig.domHandler.getElementById("#"+c);ig.domHandler.hide(d)}this.currentLevel=b;this.game.loadLevel(this.levels[b]);return!0},loadLevelWithoutEntities:function(b){this.currentLevel=b;this.game.loadLevelWithoutEntities(this.levels[b]);
return!0},append:function(b){newLevels=[];return"object"===typeof b?(b.constructor===[].constructor?newLevels=b:newLevels[0]=b,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(b){var c=null;for(i=0;i<this.levels.length;i++)this.levels[i]==b&&(c=i);return 0<=c?this.loadLevel(c):!1},
firstLevel:function(){return this.loadLevel(0)},lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,c){null===this.get(b)&&this.set(b,c)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(c){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,c){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){console.log(d)}},setHighest:function(b,c){c>this.getFloat(b)&&this.set(b,c)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.datastructure.binary-heap").defines(function(){BinaryHeap=ig.Class.extend({content:[],getValue:null,minHeap:!0,tagName:"BinaryHeap",init:function(b,c){this.getValue=b;c&&(this.minHeap=!1)},push:function(b){this.content.push(b);this.sinkDown(this.content.length-1)},pop:function(){var b=this.content[0],c=this.content.pop();0<this.content.length&&(this.content[0]=c,this.bubbleUp(0));return b},remove:function(b){var c=this.content.indexOf(b),d=this.content.pop();c!==this.content.length-
1&&(this.content[c]=d,this.minHeap?this.getValue(d)<this.getValue(b)?this.sinkDown(c):this.bubbleUp(c):this.getValue(d)>this.getValue(b)?this.sinkDown(c):this.bubbleUp(c))},size:function(){return this.content.length},rescoreElement:function(b){this.sinkDown(this.content.indexOf(b))},sinkDown:function(b){for(var c=this.content[b];0<b;){var d=(b+1>>1)-1,e=this.content[d];if(this.minHeap)if(this.getValue(c)<this.getValue(e))this.content[d]=c,this.content[b]=e,b=d;else break;else if(this.getValue(c)>
this.getValue(e))this.content[d]=c,this.content[b]=e,b=d;else break}},bubbleUp:function(b){for(var c=this.content.length,d=this.content[b],e=this.getValue(d);;){var f=b+1<<1,l=f-1,u=null,m;l<c&&(m=this.getValue(this.content[l]),this.minHeap?m<e&&(u=l):m>e&&(u=l));if(f<c)if(l=this.getValue(this.content[f]),this.minHeap){if(l<(null===u?e:m))u=f}else if(l>(null===u?e:m))u=f;if(null!==u)this.content[b]=this.content[u],this.content[u]=d,b=u;else break}},empty:function(){for(;0<this.content.length;)this.content.pop()}})});
ig.baked=!0;
ig.module("game.entities.buttons.button").requires("impact.entity").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new BABYLON.Vector2(48,48),fillColor:null,zIndex:95E3,pos:{x:0,y:0},name:"button",init:function(b,c,d){this.parent(b,c,d);!ig.global.wm&&(d&&!isNaN(d.zIndex))&&(this.zIndex=d.zIndex);b=Math.floor(256*Math.random());c=Math.floor(256*Math.random());d=Math.floor(256*Math.random());this.fillColor="rgba("+b+","+d+","+c+",1)"},
clicked:function(){throw"no implementation on clicked()";},clicking:function(){throw"no implementation on clicking()";},released:function(){throw"no implementation on released()";}})});ig.baked=!0;
ig.module("plugins.clickable-div-layer").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new BABYLON.Vector2(0,0),size:new BABYLON.Vector2(0,0),identifier:null,invisImagePath:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/misc/invisible.png",init:function(b){this.pos=new BABYLON.Vector2(b.pos.x,b.pos.y);this.size=new BABYLON.Vector2(b.size.x,b.size.y);var c="more-games",d="www.google.com",e=!1;b.div_layer_name&&(c=b.div_layer_name);b.link&&(d=b.link);b.newWindow&&(e=b.newWindow);this.createClickableLayer(c,
d,e)},createClickableLayer:function(b,c,d){this.identifier=b;var e=ig.domHandler.getElementById("#"+b);e?(ig.domHandler.show(e),ig.domHandler.attr(e,"href",c)):this.createClickableOutboundLayer(b,c,this.invisImagePath,d)},update:function(b,c){this.pos.x===b&&this.pos.y===c||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(b,c,d,e){var f=ig.domHandler.create("div");ig.domHandler.attr(f,"id",b);var l=ig.domHandler.create("a");e?(ig.domHandler.attr(l,"href",c),ig.domHandler.attr(l,"target","_blank")):ig.domHandler.attr(l,"href",c);c=ig.domHandler.create("img");ig.domHandler.css(c,{width:"100%",height:"100%"});ig.domHandler.attr(c,"src",d);d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,
ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){e=Math.floor(this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var u=Math.floor(this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",m=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";d=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"}else e=ig.domHandler.getElementById("#canvas"),e=ig.domHandler.getOffsets(e),u=e.top,e=Math.floor(e.left+this.pos.x*d)+"px",u=Math.floor(u+this.pos.y*d)+"px",m=Math.floor(this.size.x*
d)+"px",d=Math.floor(this.size.y*d)+"px";ig.domHandler.css(f,{"float":"left",position:"absolute",left:e,top:u,width:m,height:d,"z-index":3});ig.domHandler.addEvent(f,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(l,c);ig.domHandler.appendChild(f,l);ig.domHandler.appendToBody(f);ig.sizeHandler.dynamicClickableEntityDivs[b]={};ig.sizeHandler.dynamicClickableEntityDivs[b].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[b].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_x=
this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-more-games.png",85,78),size:{x:85,y:87},zIndex:100,clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",name:"moregames",init:function(b,c,d){this.parent(b,c,d);ig.global.wm||(this.div_layer_name=
d.div_layer_name?d.div_layer_name:"more-games",_SETTINGS.MoreGames.Enabled?(this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this)):this.kill())},update:function(){this.parent()},show:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(b)},hide:function(){var b=
ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(b)},clicked:function(){},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/opening/shield.png"),mIconImage:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/opening/m_icon.png"),titleImage:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/opening/title.png"),init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=
new ig.Timer(0.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateOriginalShieldOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&
0<this.initTimer.delta()&&(this.initTimer=null,this.sheildTimer=new ig.Timer(0.05));this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(0.001),this.mIconTimer=new ig.Timer(0.05),this.titleTimer=new ig.Timer(0.15)));this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=0.3,this.moveTimer.reset());this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):
this.mIconTimer=null);this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var b=ig.system.context;b.save();var c=ig.system.width/2,d=ig.system.height/2;b.translate(c,d);b.rotate(this.move*Math.PI/
180);b.beginPath();b.moveTo(0,0);for(var e=0,f=1;48>=f;f+=1)b.lineTo(0+800*Math.cos(2*f*Math.PI/48),0+800*Math.sin(2*f*Math.PI/48)),e++,2==e&&(e=0,b.lineTo(0,0));b.translate(-c,-d);c=b.createRadialGradient(c,d,100,c,d,250);c.addColorStop(0,"rgba(255,255,255,0.1)");c.addColorStop(1,"rgba(0,0,0,0)");b.fillStyle=c;b.fill();b.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768);this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/
2-70,this.mIconAnim,166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/opening/kittytitle.png"),soundKey:"kittyopeningSound",init:function(b,c,d){this.parent(b,c,d)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(0.1);
try{ig.soundHandler.sfxPlayer.play(this.soundKey)}catch(b){console.log(b)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent();this.updateKittyOpening()},draw:function(){this.parent();ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=
new ig.Timer(0.15));this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2)));this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var b=ig.system.context.createLinearGradient(0,0,0,ig.system.height);b.addColorStop(0,"#ffed94");b.addColorStop(1,"#ffcd85");ig.system.context.fillStyle=
b;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);0<=this.kittyAnim&&(this.kittyImage.drawTile((ig.system.width>>>1)-(this.kittyImage.width>>>3),(ig.system.height>>>1)-(this.kittyImage.height>>>2),this.kittyAnim,218,325),this.kittyTitleImage.drawTile((ig.system.width>>>1)-(this.kittyTitleImage.width>>>1),(ig.system.height>>>1)+(this.kittyImage.height>>>2)+10,this.kittyAnim,380,37));ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5E3,name:"pointer",check:function(b){this.objectArray.push(b)},clickObject:function(b){this.isFirstPressed&&"function"==typeof b.clicked&&(b.clicked(),this.addToClickedObjectList(b));this.isPressed&&!this.isReleased&&"function"==
typeof b.clicking&&b.clicking();this.isReleased&&"function"==typeof b.released&&(b.released(),this.removeFromClickedObjectList(b))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var b=null,c=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>c&&(c=this.objectArray[a].zIndex,b=this.objectArray[a]);if(null!=b)null!=this.hoveringItem?this.hoveringItem!=b&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),
"function"==typeof b.over&&b.over()):"function"==typeof b.over&&b.over(),this.hoveringItem=this.lastEnt=b,this.clickObject(b),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(b=0;b<this.clickedObjectList.length;b++)c=this.clickedObjectList[b],"function"==typeof c.releasedOutside&&c.releasedOutside();this.lastEnt&&(this.lastEnt.released&&this.lastEnt.released(),this.lastEnt=null);
this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");this.isPressed=ig.input.state("click")},addToClickedObjectList:function(b){this.clickedObjectList.push(b)},removeFromClickedObjectList:function(b){for(var c=[],d=0;d<this.clickedObjectList.length;d++){var e=this.clickedObjectList[d];e!=b&&c.push(e)}this.clickedObjectList=c}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(b,c,d){this.parent(b,c,d)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(b,c,d){this.parent(b,c,d);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,
c,d){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",c)):this.createClickableOutboundLayer(b,c,"../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/misc/invisible.png",d))},createClickableOutboundLayer:function(b,c,d,e){var f=ig.$new("div");f.id=b;document.body.appendChild(f);$("#"+f.id).css("float","left");$("#"+f.id).css("width",this.size.x*multiplier);$("#"+f.id).css("height",this.size.y*multiplier);$("#"+f.id).css("position","absolute");
var l=w/2-destW/2,u=h/2-destH/2;w==mobileWidth?($("#"+f.id).css("left",this.pos.x),$("#"+f.id).css("top",this.pos.y)):($("#"+f.id).css("left",l+this.pos.x*multiplier),$("#"+f.id).css("top",u+this.pos.y*multiplier));e?$("#"+f.id).html("<a target='_blank' href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>"):$("#"+f.id).html("<a href='"+c+"'><img style='width:100%;height:100%' src='"+d+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=$("#"+f.id).width();dynamicClickableEntityDivs[b].height=
$("#"+f.id).height();dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isHovering=!1)},deselectOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;
ig.module("game.entities.start-button").requires("impact.entity").defines(function(){EntityStartButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:200,y:180},zIndex:100,text:"PLAY",buttonImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-play.png"),_pos:{x:0,y:0},init:function(b,c,d){this.parent(b,c,d);this._pos.x=0.5*ig.system.width-100;this._pos.y=0.6*ig.system.height},update:function(){this.parent();!0===ig.game.gameStarted&&this.kill()},clicked:function(){},clicking:function(){},
released:function(){ig.game.shopPageOpen||(ig.soundHandler.sfxPlayer.play("chooseSound"),ig.game.gameStarted=!0,this.control.soundButton.kill(),this.kill())},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";b.drawImage(this.buttonImg.data,this.pos.x,this.pos.y,this.size.x,this.size.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.level-end-dialog").requires("impact.entity").defines(function(){this.START_WHITELABEL_ENCAPSULATOR;
	EntityLevelEndDialog = ig.Entity.extend({
		type: ig.Entity.TYPE.B,
		size:{x:278,y:487},
		zIndex:150,

		//dialogImg: new ig.Image("http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/dialog-frame.png"),
		panelImg: new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/title-panel.png"),

		init: function(x,y,settings){
			this.parent(x,y,settings);
			this.size.x = this.size.x*1.5;
			this.size.y = this.size.y*1.5;
			this.homeButton = ig.game.spawnEntity(EntityHomeButton, ig.system.width*0.9-50,ig.system.height*0.05, {mParent: this});
			this.replayButton = ig.game.spawnEntity(EntityReplayButton, ig.system.width*0.5 - 150+75,ig.system.height*0.7, {mParent: this,size: {x:157,y:150}});

			ig.soundHandler.sfxPlayer.play("failedSound");

			wgl.system.stopRender();

			if(ig.game.score > ig.game.playerStats.highscore){
				ig.game.playerStats.highscore = ig.game.score;
				ig.game.submitStats();
			}

			// WHITELABEL END GAME ADS
			console.log('Checking for AdInGameEndgame ...');
			if(typeof(AdInGameEndgame) != "undefined") {
				console.log('AdInGameEndgame Initializing ...');
				AdInGameEndgame.Initialize()
			}
			// WHITELABEL LEADERBOARD
			console.log('Submitting to MarketJS Leaderboard: ', ig.game.score);
			if(typeof(MarketJS) != "undefined") {
				console.log('Leaderboard SubmitScore ...');
				MarketJS.Leaderboard.SubmitScore(ig.game.score);
			}
			// WHITELABEL END GAME API
			console.log('Injecting End Game API ...');
			try {
				console.log('enabled endgame api11');;
			} catch (err) {
				console.log(err.message);
			}
		},

		update: function(){
			this.parent();
		},

		draw: function(){
			this.parent();
			var ctx = ig.system.context;
			ctx.save();
			ctx.fillStyle = "#ffffff";
			ctx.globalAlpha = 0.8;
			ctx.fillRect(0, 0, ig.system.width, ig.system.height)

			ctx.fillStyle = "#000000";
			ctx.globalAlpha = 0.8;
			ctx.fillRect(ig.system.width*0.1, ig.system.height*0.35, ig.system.width*0.8, ig.system.height*0.2);

			ctx.globalAlpha = 1;
			ctx.fillStyle = "#000000";

			//ctx.drawImage(this.panelImg.data, 0, ig.system.height*0.5-this.size.y*0.5, 540, 150);
			ctx.font = "100px troika";
			ctx.textAlign = "center";
			ctx.fillStyle = "#ffffff";
			ctx.textBaseline = "middle";
			ctx.lineWidth = 12;
			ctx.strokeStyle = "#000000";
			ctx.strokeText(_STRINGS["Game"]["gameover"], ig.system.width*0.5, ig.system.height*0.25);
			ctx.fillText(_STRINGS["Game"]["gameover"], ig.system.width*0.5, ig.system.height*0.25);


			//ctx.drawImage(this.dialogImg.data, ig.system.width*0.5-this.size.x*0.5, ig.system.height*0.5-this.size.y*0.5, this.size.x, this.size.y);
			/*
			ctx.fillRect(this.pos.x, this.pos.y, this.size.x, this.size.y);
			ctx.font = "50px Arial";
			ctx.textAlign = "center";
			ctx.fillStyle = "#ffffff";
			ctx.textBaseline = "middle";
			ctx.fillText(this.text, this.pos.x + this.size.x * 0.5, this.pos.y + this.size.y * 0.5);
			*/

			this.drawScore(ctx);
			ctx.restore();
		},

		drawScore: function(ctx){
			ctx.font = "50px troika";
			ctx.textAlign = "center";
			ctx.fillStyle = "#ffffff";
			ctx.textBaseline = "middle";
			//ctx.lineWidth = 2;
			//ctx.strokeStyle = "#ffffff";
			//ctx.strokeText(_STRINGS["Game"]["score"] + ig.game.score, ig.system.width * 0.5, ig.system.height * 0.4 );
			ctx.fillText(_STRINGS["Game"]["score"] + ig.game.score, ig.system.width * 0.5, ig.system.height * 0.40 );
			//ctx.fillText(ig.game.score, ig.system.width * 0.5, ig.system.height * 0.3 );


			ctx.font = "50px troika";
			//ctx.lineWidth = 2;
			//ctx.strokeStyle = "#ffffff";
			//ctx.strokeText(_STRINGS["Game"]["highscore"] + ig.game.playerStats.highscore, ig.system.width * 0.5, ig.system.height * 0.5 );
			ctx.fillText(_STRINGS["Game"]["highscore"] + ig.game.playerStats.highscore, ig.system.width * 0.5, ig.system.height * 0.50 );

			//ctx.fillText(ig.game.playerStats.highscore, ig.system.width * 0.5, ig.system.height * 0.5 );
		}
	});
	this.END_WHITELABEL_ENCAPSULATOR;});ig.baked=!0;
ig.module("game.entities.replay-button").requires("impact.entity").defines(function(){EntityReplayButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:78},zIndex:170,buttonImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-replay.png"),activated:!1,init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},clicked:function(){!0!=ig.game.blockButton&&!1==this.activated&&(ig.soundHandler.sfxPlayer.play("decisionSound"),this.screenTransition=ig.game.spawnEntity(EntityScreenTransition,
0,0),this.tween({screenTransition:{alpha:1}},1,{onComplete:function(){this.platformSpawner=wgl.game.getEntityByName("platformSpawner");this.platformSpawner.checkPos=1;wgl.game.resetLevel();ig.game.director.reloadLevel();this.mParent.kill();this.kill();ig.game.gameReset=!0;ig.game.restarting=!0;ig.game.gameStarted=!0}.bind(this)}).start(),this.activated=!0)},clicking:function(){},released:function(){},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";b.drawImage(this.buttonImg.data,
this.pos.x,this.pos.y,this.size.x,this.size.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.home-button").requires("impact.entity").defines(function(){EntityHomeButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:78},zIndex:170,buttonImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-home.png"),activated:!1,init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},clicked:function(){!0!=ig.game.blockButton&&!1==this.activated&&(ig.soundHandler.sfxPlayer.play("decisionSound"),this.screenTransition=ig.game.spawnEntity(EntityScreenTransition,
0,0),this.tween({screenTransition:{alpha:1}},1,{onComplete:function(){wgl.game.resetLevel();ig.game.director.reloadLevel();this.mParent.kill();this.kill()}.bind(this)}).start(),this.activated=!0)},clicking:function(){},released:function(){},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";b.drawImage(this.buttonImg.data,this.pos.x,this.pos.y,this.size.x,this.size.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.shop-button").requires("impact.entity").defines(function(){EntityShopButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:78},zIndex:100,_pos:{x:0,y:0},text:"SHOP",buttonImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-shop.png"),init:function(b,c,d){this.parent(b,c,d);this._pos.x=0.5*ig.system.width-37.5;this._pos.y=0.85*ig.system.height},update:function(){this.parent();!0===ig.game.gameStarted&&this.kill()},clicked:function(){},clicking:function(){},
released:function(){ig.game.shopPageOpen||(ig.soundHandler.sfxPlayer.play("chooseSound"),ig.game.spawnEntity(EntityShopPage,0,0,{parentButton:this}),_SETTINGS.MoreGames.Enabled&&(this.control.moreGamesButton.hide(),this.tween({control:{moreGamesButton:{pos:{y:1.2*ig.system.height}}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start()),this.tween({control:{soundButton:{pos:{y:1.2*ig.system.height}}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start())},draw:function(){this.parent();var b=ig.system.context;
b.save();b.drawImage(this.buttonImg.data,this.pos.x,this.pos.y,this.size.x,this.size.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.shop-page").requires("impact.entity").defines(function(){EntityShopPage=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:1,y:1},zIndex:200,text:"SHOP",panelImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/title-panel.png"),frameImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/dialog-frame.png"),theme1:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-1.png"),theme2:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-2.png"),
theme3:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-3.png"),theme4:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-4.png"),theme5:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-5.png"),theme6:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-6.png"),theme7:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-7.png"),theme8:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-8.png"),
theme9:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-9.png"),theme10:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-10.png"),theme11:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-11.png"),theme12:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-12.png"),theme13:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/themes/buy-13.png"),titleOffsetY:-400,parentButton:null,alpha:0,colourChoice:0,frameOffsetX:0,
init:function(b,c,d){this.parent(b,c,d);this.colourChoice=ig.game.playerStats.themeColour;ig.game.shopPageOpen=!0;this.gameControl=ig.game.getEntitiesByType(EntityGameControl)[0];this.leftArrow=ig.game.spawnEntity(EntityArrowButton,-0.25*ig.system.width,0.5*ig.system.height,{direction:"left",shopPage:this});this.rightArrow=ig.game.spawnEntity(EntityArrowButton,1.25*ig.system.width-85,0.5*ig.system.height,{direction:"right",shopPage:this});this.selectButton=ig.game.spawnEntity(EntitySelectButton,0.5*
ig.system.width-58.5,1.35*ig.system.height,{shopPage:this});this.tween({parentButton:{pos:{y:1.2*ig.system.height}},gameControl:{startButton:{pos:{y:1.2*ig.system.height}},titleOffsetY:-400},titleOffsetY:0,alpha:0.8},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start()},update:function(){this.parent()},clicked:function(){},clicking:function(){},released:function(){},nextChoice:function(){this.tween1=this.tween({frameOffsetX:-10},0.06,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween2=this.tween({frameOffsetX:10},
0.06,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween3=this.tween({frameOffsetX:0},0.06,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween1.chain(this.tween2);this.tween2.chain(this.tween3);this.tween1.start();12>this.colourChoice?this.colourChoice++:this.colourChoice=0},prevChoice:function(){this.tween1=this.tween({frameOffsetX:10},0.06,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween2=this.tween({frameOffsetX:-10},0.06,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween3=this.tween({frameOffsetX:0},
0.06,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween1.chain(this.tween2);this.tween2.chain(this.tween3);this.tween1.start();0<this.colourChoice?this.colourChoice--:this.colourChoice=12},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#ffffff";b.globalAlpha=this.alpha;b.fillRect(0,0,ig.system.width,ig.system.height);b.globalAlpha=1;b.fillStyle="#000000";b.drawImage(this.panelImg.data,0,0.1*ig.system.height+this.titleOffsetY,540,150);b.font="80px troika";b.textAlign="center";
b.fillStyle="#ffffff";b.textBaseline="middle";b.fillText(_STRINGS.Game.shop,0.5*ig.system.width,0.1*ig.system.height+75+this.titleOffsetY);switch(this.colourChoice){case 0:b.drawImage(this.theme1.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 1:b.drawImage(this.theme2.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 2:b.drawImage(this.theme3.data,0.5*ig.system.width-146+this.frameOffsetX,
0.4*ig.system.height+this.titleOffsetY,292,292);break;case 3:b.drawImage(this.theme4.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 4:b.drawImage(this.theme5.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 5:b.drawImage(this.theme6.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 6:b.drawImage(this.theme7.data,0.5*ig.system.width-
146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 7:b.drawImage(this.theme8.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 8:b.drawImage(this.theme9.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 9:b.drawImage(this.theme10.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 10:b.drawImage(this.theme11.data,
0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 11:b.drawImage(this.theme12.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292);break;case 12:b.drawImage(this.theme13.data,0.5*ig.system.width-146+this.frameOffsetX,0.4*ig.system.height+this.titleOffsetY,292,292)}b.restore();b.restore()}})});ig.baked=!0;
ig.module("game.entities.screen-transition").requires("impact.entity").defines(function(){EntityScreenTransition=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:1,y:1},zIndex:300,alpha:0,reverse:!1,beginning:!1,duration:1,init:function(b,c,d){this.parent(b,c,d);ig.game.blockButton=!0;!0==this.reverse&&(this.alpha=1,!1==this.beginning&&ig.game.getEntitiesByType(EntitySoundButton)[0].kill(),this.tween({alpha:0},this.duration,{onComplete:function(){!1==this.beginning&&(ig.game.gameStarted=!0,ig.game.restarting=
!1);this.kill()}.bind(this)}).start(),this.reverse=!1)},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";b.globalAlpha=this.alpha;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore()},kill:function(){this.parent();ig.game.blockButton=!1}})});ig.baked=!0;
ig.module("game.entities.arrow-button").requires("impact.entity").defines(function(){EntityArrowButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:122},zIndex:205,_pos:{x:0,y:0},leftImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-prev.png"),rightImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-next.png"),direction:"left",frameOffsetX:0,shopPage:null,init:function(b,c,d){this.parent(b,c,d);switch(this.direction){case "left":this.tween({pos:{x:0.02*
ig.system.width}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case "right":this.tween({pos:{x:0.98*ig.system.width-85}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start()}},update:function(){this.parent();!0===ig.game.gameStarted&&this.kill()},clicked:function(){if(!0!=ig.game.blockButton)switch(ig.soundHandler.sfxPlayer.play("chooseSound"),this.direction){case "left":this.tween1=this.tween({frameOffsetX:-15},0.1,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween2=this.tween({frameOffsetX:5},
0.04,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween3=this.tween({frameOffsetX:0},0.04,{easing:ig.Tween.Easing.Cubic.EaseOut});this.tween1.chain(this.tween2);this.tween2.chain(this.tween3);this.tween1.start();this.shopPage.prevChoice();break;case "right":this.tween1=this.tween({frameOffsetX:15},0.1,{easing:ig.Tween.Easing.Cubic.EaseOut}),this.tween2=this.tween({frameOffsetX:-5},0.04,{easing:ig.Tween.Easing.Cubic.EaseOut}),this.tween3=this.tween({frameOffsetX:0},0.04,{easing:ig.Tween.Easing.Cubic.EaseOut}),
this.tween1.chain(this.tween2),this.tween2.chain(this.tween3),this.tween1.start(),this.shopPage.nextChoice()}},clicking:function(){},released:function(){},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";switch(this.direction){case "left":b.drawImage(this.leftImg.data,this.pos.x+this.frameOffsetX,this.pos.y,this.size.x,this.size.y);break;case "right":b.drawImage(this.rightImg.data,this.pos.x+this.frameOffsetX,this.pos.y,this.size.x,this.size.y)}b.restore()}});EntitySelectButton=
ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:117,y:107},zIndex:205,_pos:{x:0,y:0},shopPage:null,buttonImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-play.png"),panelImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/title-panel.png"),direction:"left",shopPage:null,activated:!1,unlockScore:[0,50,100,150,200,250,300,350,400,450,500,550,600],init:function(b,c,d){this.parent(b,c,d);this.tween({pos:{y:0.8*ig.system.height}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start()},
update:function(){this.parent();!0===ig.game.gameStarted&&this.kill()},clicked:function(){!0!=ig.game.blockButton&&(ig.game.playerStats.highscore>=this.unlockScore[this.shopPage.colourChoice]&&!1==this.activated)&&(ig.soundHandler.sfxPlayer.play("decisionSound"),ig.game.playerStats.themeColour=this.shopPage.colourChoice,ig.game.submitStats(),this.screenTransition=ig.game.spawnEntity(EntityScreenTransition,0,0),this.tween({screenTransition:{alpha:1}},1,{onComplete:function(){wgl.game.resetLevel();
ig.game.director.reloadLevel();this.kill()}.bind(this)}).start(),this.activated=!0)},clicking:function(){},released:function(){},draw:function(){this.parent();var b=ig.system.context;b.save();if(ig.game.playerStats.highscore>=this.unlockScore[this.shopPage.colourChoice])b.drawImage(this.buttonImg.data,this.pos.x,this.pos.y,this.size.x,this.size.y);else{b.drawImage(this.panelImg.data,0,this.pos.y-25,540,50);var c=_STRINGS.Game.achieve1+this.unlockScore[this.shopPage.colourChoice]+_STRINGS.Game.achieve2;
b.font="25px troika";b.textAlign="center";b.fillStyle="#ffffff";b.textBaseline="middle";b.fillText(c,0.5*ig.system.width,this.pos.y)}b.restore()}})});ig.baked=!0;
ig.module("game.entities.sound-button").requires("impact.entity").defines(function(){EntitySoundButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:78},zIndex:190,buttonIsOn:!0,buttonSoundOn:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-sound-on.png"),buttonSoundOff:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-sound-off.png"),init:function(b,c,d){this.parent(b,c,d);this.buttonIsOn=!0==ig.game.playerStats.soundSettings?!0:!1},update:function(){this.parent()},
clicked:function(){this.buttonIsOn?(this.buttonIsOn=!1,ig.soundHandler.muteAll(),ig.game.playerStats.soundSettings=!1,ig.game.submitStats()):(this.buttonIsOn=!0,ig.soundHandler.unmuteAll(),ig.game.playerStats.soundSettings=!0,ig.game.submitStats(),ig.soundHandler.sfxPlayer.play("decisionSound"))},clicking:function(){},released:function(){},draw:function(){this.parent();var b=ig.system.context;b.save();this.buttonIsOn?b.drawImage(this.buttonSoundOn.data,this.pos.x,this.pos.y,this.size.x,this.size.y):
b.drawImage(this.buttonSoundOff.data,this.pos.x,this.pos.y,this.size.x,this.size.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.pause-button").requires("impact.entity").defines(function(){EntityPauseButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:78},zIndex:100,isPaused:!1,buttonPauseImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-pause.png"),init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},clicked:function(){this.pauseGame()},clicking:function(){},released:function(){},pauseGame:function(){!0==ig.game.gameStarted&&!1==ig.game.gamePaused&&
(ig.soundHandler.sfxPlayer.play("chooseSound"),ig.game.gamePaused=!0,this.levelPauseDialog=ig.game.spawnEntity(EntityLevelPauseDialog,0,0))},draw:function(){this.parent();var b=ig.system.context;b.save();!0==ig.game.gameStarted&&b.drawImage(this.buttonPauseImg.data,this.pos.x,this.pos.y,this.size.x,this.size.y);b.restore()}});EntityResumeButton=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:85,y:78},zIndex:170,isPaused:!1,buttonPauseImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-resume.png"),
init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},clicked:function(){!0!=ig.game.blockButton&&(!0==ig.game.gameStarted&&!0==ig.game.gamePaused)&&(ig.soundHandler.sfxPlayer.play("chooseSound"),ig.game.gamePaused=!1,wgl.system.startRender(),this.mParent.homeButton.kill(),this.mParent.kill())},clicking:function(){},released:function(){},draw:function(){this.parent();var b=ig.system.context;b.save();!0==ig.game.gameStarted&&b.drawImage(this.buttonPauseImg.data,this.pos.x,this.pos.y,
this.size.x,this.size.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.level-pause-dialog").requires("impact.entity").defines(function(){EntityLevelPauseDialog=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:278,y:487},zIndex:150,panelImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/title-panel.png"),init:function(b,c,d){this.parent(b,c,d);this.size.x*=1.5;this.size.y*=1.5;this.resumeButton=ig.game.spawnEntity(EntityResumeButton,0.65*ig.system.width-42.5,0.45*ig.system.height,{mParent:this});this.soundButton=ig.game.spawnEntity(EntitySoundButton,
0.35*ig.system.width-42.5,0.45*ig.system.height,{mParent:this});this.homeButton=ig.game.spawnEntity(EntityHomeButton,0.5*ig.system.width-50,0.65*ig.system.height,{mParent:this});wgl.system.stopRender()},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle="#ffffff";b.globalAlpha=0.8;b.fillRect(0,0,ig.system.width,ig.system.height);b.globalAlpha=1;b.fillStyle="#000000";b.drawImage(this.panelImg.data,0,0.5*ig.system.height-0.5*this.size.y,540,150);
b.font="80px troika";b.textAlign="center";b.fillStyle="#ffffff";b.textBaseline="middle";b.fillText(_STRINGS.Game.paused,0.5*ig.system.width,0.2*ig.system.height);b.restore()},kill:function(){this.parent();this.resumeButton&&this.resumeButton.kill();this.soundButton&&this.soundButton.kill();this.soundButton=this.resumeButton=null}})});ig.baked=!0;
ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}});ig.baked=!0;
ig.module("game.entities.buttons.button-branding-logo").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,zIndex:10001,size:{x:64,y:66},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"branding-logo",name:"brandinglogo",init:function(b,c,d){this.parent(b,c,d);if(!ig.global.wm){if("undefined"==typeof wm)if(_SETTINGS.Branding.Logo.Enabled)this.size.x=_SETTINGS.Branding.Logo.Width,
this.size.y=_SETTINGS.Branding.Logo.Height,this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,d&&d.centralize&&(this.pos.x=(ig.system.width>>>1)-(this.size.x>>>1),console.log("centralize true ... centering branded logo ...")),_SETTINGS.Branding.Logo.LinkEnabled&&(this.link=_SETTINGS.Branding.Logo.Link,this.newWindow=_SETTINGS.Branding.Logo.NewWindow,this.clickableLayer=new ClickableDivLayer(this));else{this.kill();return}this.div_layer_name=d.div_layer_name?d.div_layer_name:
"branding-logo"}},show:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(b)},hide:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(b)},clicked:function(){},clicking:function(){},released:function(){}})});ig.baked=!0;
ig.module("game.entities.branding-logo-placeholder").requires("impact.entity","game.entities.buttons.button-branding-logo").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(b,c,d){this.parent(b,c,d);if(d)switch(console.log("settings found ... using that div layer name"),b=d.div_layer_name,console.log("settings.centralize:",d.centralize),d.centralize){case "true":console.log("centralize true");
centralize=!0;break;case "false":console.log("centralize false");centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else b="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:b,centralize:centralize})}catch(e){console.log(e)}this.kill()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-start").requires("game.entities.buttons.button").defines(function(){EntityButtonStart=EntityButton.extend({oriColor:"rgba(255,255,0,1)",altColor:"rgba(255,0,0,1)",fillColor:"rgba(255,0,0,1)",textColor:"rgba(255,255,255,1)",size:new BABYLON.Vector2(50,50),text:"Start",buttonImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/button-play.png"),init:function(b,c,d){this.parent(b,c,d)},update:function(){this.parent()},draw:function(){this.parent();var b=
ig.system.context;b.fillStyle=this.fillColor;b.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y);b.textAlign="center";b.fillStyle=this.textColor;b.fillText(this.text,this.pos.x+(this.size.y>>>1),this.pos.y+(this.size.y>>>1));b.textAlign="start"},clicked:function(){this.fillColor=this.altColor;wgl.game.reloadLevel();ig.game.director.jumpTo(LevelWebglGame)},clicking:function(){},released:function(){this.fillColor=this.oriColor}})});ig.baked=!0;
ig.module("game.levels.main-menu").requires("impact.image","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.pointer","game.entities.buttons.button-start").defines(function(){LevelMainMenu={entities:[{type:"EntityBrandingLogoPlaceholder",x:296,y:396,settings:{div_layer_name:"layer_mainmenu",centralize:"true"}},{type:"EntityButtonMoreGames",x:432,y:284,settings:{div_layer_name:"layer_moregames_mainmenu"}},{type:"EntityPointer",x:608,y:120},{type:"EntityButtonStart",
x:284,y:312}],layer:[{name:"background",width:40,height:30,linkWithCollision:!1,visible:1,tilesetName:"http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,
88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160],[161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],[201,202,203,204,205,206,207,208,209,210,211,212,213,214,
215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280],[281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320],[321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,
339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440],[441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,
463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520],[521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560],[561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,
587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640],[641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680],[681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,
711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,
835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920],[921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,
959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1E3],[1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040],[1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,
1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080],[1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120],[1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160],[1161,1162,1163,1164,1165,
1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200]]}]};LevelMainMenuResources=[new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.entities.controllers.game-control").requires("impact.entity").defines(function(){EntityGameControl=ig.Entity.extend({type:ig.Entity.TYPE.B,size:{x:480,y:640},pos:{x:1,y:1},controller:null,zIndex:1,initialMaxPlatform:13,animTransTime:0,score:0,titleLogo:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/title-logo.png"),titleOffsetY:0,playSoundTimer:0,playSoundTimerEnd:30,initialInstruction:!0,fingerImg:new ig.Image("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/sprites/hand.png"),
fingerAlpha:0,touchAlpha:0,fingerOffsetY:50,showInstruction:!0,bgColour:{c0:{r1:120,g1:220,b1:255,r2:255,g2:255,b2:255},c1:{r1:120,g1:220,b1:255,r2:255,g2:255,b2:255},c2:{r1:255,g1:100,b1:255,r2:255,g2:255,b2:150},c3:{r1:120,g1:255,b1:220,r2:255,g2:255,b2:150},c4:{r1:100,g1:100,b1:100,r2:240,g2:240,b2:180},c5:{r1:255,g1:30,b1:80,r2:240,g2:240,b2:180},c6:{r1:255,g1:120,b1:0,r2:255,g2:255,b2:150},c7:{r1:20,g1:20,b1:80,r2:180,g2:160,b2:160},c8:{r1:0,g1:0,b1:255,r2:120,g2:255,b2:255},c9:{r1:120,g1:50,
b1:255,r2:255,g2:60,b2:150},c10:{r1:120,g1:255,b1:220,r2:255,g2:255,b2:150},c11:{r1:0,g1:0,b1:100,r2:200,g2:200,b2:255},c12:{r1:20,g1:20,b1:80,r2:180,g2:160,b2:160},c13:{r1:90,g1:255,b1:255,r2:255,g2:255,b2:150}},init:function(b,c,d){this.parent(b,c,d);ig.game.gameStarted=!1;ig.game.gameOver=!1;ig.game.gamePaused=!1;ig.global.wm||(this.createScene(),this.createLight(),wgl.game.currentScene=this.scene,this.mainCamera=wgl.game.spawnEntity(wgl.modules.mainCamera,0,0,0),this.pointer=ig.game.spawnEntity(EntityPointer,
0,0),this.playerCharacter=wgl.game.spawnEntity(wgl.modules.playerCharacter,-55,60,-55,{control:this}),this.centerPillar=wgl.game.spawnEntity(wgl.modules.centerPillar,0,0,0),this.groundPlane=wgl.game.spawnEntity(wgl.modules.groundPlane,0,52,0),this.platformSpawner=wgl.game.spawnEntity(wgl.modules.platformSpawner,-60,185,-60,{initialMaxPlatform:this.initialMaxPlatform}),ig.game.spawnEntity(EntityScreenTransition,0,0,{duration:0.5,reverse:!0,beginning:!0}),this.startButton=ig.game.spawnEntity(EntityStartButton,
0.5*ig.system.width-100,0.6*ig.system.height,{control:this}),this.shopButton=ig.game.spawnEntity(EntityShopButton,0.5*ig.system.width-37.5,0.82*ig.system.height,{control:this}),_SETTINGS.MoreGames.Enabled&&(this.moreGamesButton=ig.game.spawnEntity(EntityButtonMoreGames,0.8*ig.system.width-37.5,0.75*ig.system.height,{control:this})),this.soundButton=ig.game.spawnEntity(EntitySoundButton,0.2*ig.system.width-37.5,0.75*ig.system.height,{control:this}),this.obstacleManager=wgl.game.spawnEntity(wgl.modules.obstacleManager,
0,0,0),this.pauseButton=ig.game.spawnEntity(EntityPauseButton,0.8*ig.system.width,0.05*ig.system.height),wgl.system.registerBeforeRender(),wgl.system.stopRender(),wgl.system.startRender(),this.cameraAlpha=-3.14159,this.mainCamera.camera.setTarget(this.playerCharacter.mesh),this.mainCamera.camera.alpha=this.cameraAlpha,ig.game.score=Math.floor(this.score))},createKeyboardControl:function(){ig.input.initKeyboard();ig.input.bind(ig.KEY.LEFT_ARROW,"left_arrow");ig.input.bind(ig.KEY.RIGHT_ARROW,"right_arrow")},
createScene:function(){switch(ig.game.playerStats.themeColour){case 0:var b=this.bgColour.c1.r1,c=this.bgColour.c1.g1,d=this.bgColour.c1.b1,e=this.bgColour.c1.r2,f=this.bgColour.c1.g2,l=this.bgColour.c1.b2;break;case 1:b=this.bgColour.c2.r1;c=this.bgColour.c2.g1;d=this.bgColour.c2.b1;e=this.bgColour.c2.r2;f=this.bgColour.c2.g2;l=this.bgColour.c2.b2;break;case 2:b=this.bgColour.c3.r1;c=this.bgColour.c3.g1;d=this.bgColour.c3.b1;e=this.bgColour.c3.r2;f=this.bgColour.c3.g2;l=this.bgColour.c3.b2;break;
case 3:b=this.bgColour.c4.r1;c=this.bgColour.c4.g1;d=this.bgColour.c4.b1;e=this.bgColour.c4.r2;f=this.bgColour.c4.g2;l=this.bgColour.c4.b2;break;case 4:b=this.bgColour.c5.r1;c=this.bgColour.c5.g1;d=this.bgColour.c5.b1;e=this.bgColour.c5.r2;f=this.bgColour.c5.g2;l=this.bgColour.c5.b2;break;case 5:b=this.bgColour.c6.r1;c=this.bgColour.c6.g1;d=this.bgColour.c6.b1;e=this.bgColour.c6.r2;f=this.bgColour.c6.g2;l=this.bgColour.c6.b2;break;case 6:b=this.bgColour.c7.r1;c=this.bgColour.c7.g1;d=this.bgColour.c7.b1;
e=this.bgColour.c7.r2;f=this.bgColour.c7.g2;l=this.bgColour.c7.b2;break;case 7:b=this.bgColour.c8.r1;c=this.bgColour.c8.g1;d=this.bgColour.c8.b1;e=this.bgColour.c8.r2;f=this.bgColour.c8.g2;l=this.bgColour.c8.b2;break;case 8:b=this.bgColour.c9.r1;c=this.bgColour.c9.g1;d=this.bgColour.c9.b1;e=this.bgColour.c9.r2;f=this.bgColour.c9.g2;l=this.bgColour.c9.b2;break;case 9:b=this.bgColour.c10.r1;c=this.bgColour.c10.g1;d=this.bgColour.c10.b1;e=this.bgColour.c10.r2;f=this.bgColour.c10.g2;l=this.bgColour.c10.b2;
break;case 10:b=this.bgColour.c11.r1;c=this.bgColour.c11.g1;d=this.bgColour.c11.b1;e=this.bgColour.c11.r2;f=this.bgColour.c11.g2;l=this.bgColour.c11.b2;break;case 11:b=this.bgColour.c12.r1;c=this.bgColour.c12.g1;d=this.bgColour.c12.b1;e=this.bgColour.c12.r2;f=this.bgColour.c12.g2;l=this.bgColour.c12.b2;break;case 12:b=this.bgColour.c13.r1,c=this.bgColour.c13.g1,d=this.bgColour.c13.b1,e=this.bgColour.c13.r2,f=this.bgColour.c13.g2,l=this.bgColour.c13.b2}this.scene=new BABYLON.Scene(wgl.system.engine);
this.createSkyBox(b,c,d,e,f,l)},createSkyBox:function(b,c,d,e,f,l){this.backgroundshader=ig.game.playerStats.backgroundShader;this.skybox=BABYLON.MeshBuilder.CreateSphere("skybox",{segments:12,diameter:1E3},this.scene);BABYLON.Effect.ShadersStore.gradientVertexShader="precision mediump float;attribute vec3 position;attribute vec3 normal;attribute vec2 uv;uniform mat4 worldViewProjection;varying vec4 vPosition;varying vec3 vNormal;void main(){vec4 p = vec4(position,1.);vPosition = p;vNormal = normal;gl_Position = worldViewProjection * p;}";
BABYLON.Effect.ShadersStore.gradientPixelShader="precision mediump float;uniform mat4 worldView;varying vec4 vPosition;varying vec3 vNormal;uniform float offset;uniform vec3 topColor;uniform vec3 bottomColor;void main(void){float h = normalize(vPosition+offset).y;gl_FragColor = vec4(mix(bottomColor,topColor,max(pow(max(h,0.0),0.6),0.0)),1.0);}";this.shader=new BABYLON.ShaderMaterial("gradient",this.scene,"gradient",{});this.shader.setFloat("offset",10);this.shader.setColor3("topColor",BABYLON.Color3.FromInts(b,
c,d));this.shader.setColor3("bottomColor",BABYLON.Color3.FromInts(e,f,l));this.shader.backFaceCulling=!1;this.skybox.material=this.shader},createLight:function(){this.light=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,1,0),this.scene);this.light.intensity=0.2;this.light2=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,0,1),this.scene);this.light2.intensity=0.1},update:function(){this.parent();!0==ig.game.gameReset&&(ig.game.gameReset=!1,ig.game.spawnEntity(EntityScreenTransition,
0,0,{reverse:!0}));!0==ig.game.gameStarted&&(_SETTINGS.MoreGames.Enabled&&(this.moreGamesButton.hide(),this.moreGamesButton.kill()),!0==this.initialInstruction&&this.instructionTween(),!0!=ig.game.restarting&&(ig.input.pressed("click")&&(wgl.game.currentScene.beginAnimation(ig.game.modelMesh,40,50,!0,1.5),this.animTransTime=0),ig.input.state("click")&&!wgl.system.engine._windowIsBackground&&!1==ig.game.gamePaused?(ig.game.movingPillar=!0,!0==this.showInstruction&&(this.showInstruction=!1),2>wgl.game.acceleration&&
(wgl.game.acceleration+=0.05),10>this.animTransTime?this.animTransTime++:(this.animsTransTime=10,wgl.game.currentScene.beginAnimation(ig.game.modelMesh,50,60,!0,1))):!0==ig.game.movingPillar&&(ig.game.movingPillar=!1,wgl.game.currentScene.beginAnimation(ig.game.modelMesh,1,40,!0,1),this.playerCharacter.mesh.rotation.x=0.2)),!0==ig.game.movingPillar&&(this.score+=0.16848*wgl.game.acceleration,this.playSoundTimerEnd=15<this.playSoundTimerEnd?this.playSoundTimerEnd-0.15:15,this.playSoundTimer<this.playSoundTimerEnd?
this.playSoundTimer++:(this.playSoundTimer=0,ig.soundHandler.sfxPlayer.play("rollingSound"))),!1==ig.game.movingPillar&&(0.3<wgl.game.acceleration?wgl.game.acceleration-=0.2:(this.playSoundTimer=wgl.game.acceleration=0,this.playSoundTimerEnd=30)));wgl.game.currentScene.cameras[0].alpha=this.cameraAlpha;wgl.game.currentScene.cameras[0].beta=1.3;ig.game.score=Math.floor(this.score);ig.game.sortEntitiesDeferred()},tapControl:function(){this.pointer.update()},draw:function(){ig.global.wm||(this.parent(),
ig.system.context.save(),ig.system.context.clearRect(0,0,ig.system.width,ig.system.height),!0==ig.game.gameStarted?(this.drawScore(),!0==this.showInstruction&&this.drawInstruction()):!1==ig.game.gameOver&&ig.system.context.drawImage(this.titleLogo.data,81,100+this.titleOffsetY,378,254.1),ig.system.context.restore())},drawScore:function(){ig.system.context.fillStyle="#ffffff";ig.system.context.font="110px troika";ig.system.context.textAlign="center";ig.system.context.lineWidth=8;ig.system.context.strokeStyle=
"#5c404f";ig.system.context.strokeText(ig.game.score,0.5*ig.system.width,125);ig.system.context.fillText(ig.game.score,0.5*ig.system.width,125)},drawInstruction:function(){ig.system.context.globalAlpha=this.touchAlpha;ig.system.context.globalAlpha=this.fingerAlpha;ig.system.context.drawImage(this.fingerImg.data,0.45*ig.system.width,0.7*ig.system.height+this.fingerOffsetY,85,132)},instructionTween:function(){this.tween1=this.tween({fingerAlpha:1,fingerOffsetY:0},0.3);this.tween2=this.tween({touchAlpha:0.4},
0.5);this.tween3=this.tween({touchAlpha:0.5},0.5);this.tween4=this.tween({touchAlpha:0},0.5);this.tween5=this.tween({fingerAlpha:0,touchAlpha:0,fingerOffsetY:50},0.5);this.tween6=this.tween({},0.3);this.tween1.chain(this.tween2);this.tween2.chain(this.tween3);this.tween3.chain(this.tween4);this.tween4.chain(this.tween5);this.tween5.chain(this.tween6);this.tween6.chain(this.tween1);this.tween1.start();this.initialInstruction=!1}})});ig.baked=!0;
ig.module("game.levels.gameplay").requires("impact.image","game.entities.controllers.game-control").defines(function(){LevelGameplay={entities:[{type:"EntityGameControl",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("babylon.plugins.wgl-game").defines(function(){wgl.Game=ig.Class.extend({entities:[],ready:!1,init:function(){},update:function(){this.entitiesIndexToKill=[];for(var b=0;b<this.entities.length;b++)this.entities[b]&&(this.entities[b].update(),this.entities[b]._killed&&this.entitiesIndexToKill.push(b));for(b=this.entitiesIndexToKill.length-1;0<=b;b--)this.entities.splice(this.entitiesIndexToKill[b],1)},render:function(){this.currentScene&&this.currentScene.render()},spawnEntity:function(b,
c,d,e,f){b=new b(c,d,e,f);this.entities.push(b);return b},getEntityByName:function(b){for(var c=[],d=0;d<this.entities.length;d++)this.entities[d].name===b&&c.push(this.entities[d]);return c},getMeshByName:function(b){for(var c=0;c<this.currentScene.meshes.length;c++)if(this.currentScene.meshes[c].name===b)return this.currentScene.meshes[c];return null},resizeAll:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].resize()}})});ig.baked=!0;
ig.module("babylon.plugins.wgl-timer").defines(function(){wgl.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=wgl.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=wgl.Timer.time;this.pausedAt=0},reset:function(){this.base=wgl.Timer.time;this.pausedAt=0},tick:function(){var b=wgl.Timer.time-this.last;this.last=wgl.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||wgl.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||
(this.pausedAt=wgl.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=wgl.Timer.time-this.pausedAt,this.pausedAt=0)}});wgl.Timer._last=0;wgl.Timer.time=Number.MIN_VALUE;wgl.Timer.timeScale=1;wgl.Timer.maxStep=0.05;wgl.Timer.step=function(){var b=Date.now();wgl.Timer.time+=Math.min((b-wgl.Timer._last)/1E3,wgl.Timer.maxStep)*wgl.Timer.timeScale;wgl.Timer._last=b}});ig.baked=!0;
ig.module("babylon.plugins.wgl-system").requires("babylon.plugins.wgl-timer").defines(function(){wgl.System=ig.Class.extend({fps:null,tick:0,loader:null,assets:{},canvas:null,engine:null,progress:0,babylonJSSupport:!1,finishLoadFunctions:[],finishSceneReadyFunctions:[],tempNewScene:null,canvas:null,started:!1,init:function(b,c){this.fps=c;this.canvas=ig.$(b);if(BABYLON.Engine.isSupported())this.engine=new BABYLON.Engine(this.canvas,!1),this.babylonJSSupport=!0;else throw"BabylonJS not supported";
},loadScene:function(b,c){wgl.game.ready=!1;if(this.babylonJSSupport)BABYLON.SceneLoader.Load(b,c,this.engine,this.onLoadSuccess.bind(this),this.progressCallback.bind(this),this.onLoadError.bind(this));else throw"Unable to load scene because BabylonJS is not supported";},progressCallback:function(b){this.progress=b;console.log("Progress:",b.loaded,"out of: "+b.total)},onLoadSuccess:function(b){console.log("load scene success");wgl.game.currentScene&&wgl.game.currentScene.dispose();wgl.game.currentScene=
b;for(b=0;b<this.finishLoadFunctions.length;b++)this.finishLoadFunctions[b]();this.loader=new BABYLON.AssetsManager(wgl.game.currentScene);wgl.game.currentScene.executeWhenReady(this.onSceneReady.bind(this))},onLoadError:function(b){console.log("ERROR:"+b)},onSceneReady:function(){wgl.debug.debug&&wgl.debug.enableDebug();this.loadCameras();this.loadMeshes();this.registerBeforeRender();for(var b=0;b<this.finishSceneReadyFunctions.length;b++)this.finishSceneReadyFunctions[b]();wgl.system.engine.hideLoadingUI();
wgl.game.ready=!0},registerBeforeRender:function(){wgl.game.currentScene.registerBeforeRender(this.advanceTime.bind(this));wgl.game.currentScene.registerBeforeRender(wgl.game.update.bind(wgl.game));this.startRender()},startRender:function(){this.engine.runRenderLoop(wgl.game.render.bind(wgl.game))},stopRender:function(){this.engine.stopRenderLoop()},unregisterBeforeRender:function(){wgl.game.currentScene&&(wgl.game.currentScene.unregisterBeforeRender(this.advanceTime.bind(this)),wgl.game.currentScene.unregisterBeforeRender(wgl.game.update.bind(wgl.game)),
wgl.game.currentScene.onBeforeRenderObservable.clear(),this.stopRender())},loadMeshes:function(){for(var b=wgl.game.currentScene.meshes,c=0;c<b.length;c++){var d=b[c].name.split(":");if(1<d.length){b[c].id=d[0];b[c].name=d[0];for(var e="",d=d[1].split("."),d=d[0].split("-"),f=0;f<d.length;f++)var l=""+d[f],l=l.charAt(0).toUpperCase()+l.slice(1),e=e+l;0<e.length&&wgl.game.entities.push(new wgl.modules[e](b[c].position.x,b[c].position.y,b[c].position.z,{_mesh:b[c]}))}}},loadCameras:function(){for(var b=
wgl.game.currentScene.cameras,c=0;c<b.length;c++){var d=b[c].name.split(":");if(1<d.length){b[c].id=d[0];b[c].name=d[0];for(var e="",d=d[1].split("."),d=d[0].split("-"),f=0;f<d.length;f++)var l=""+d[f],l=l.charAt(0).toUpperCase()+l.slice(1),e=e+l;wgl.game.entities.push(new wgl.modules[e](b[c].position.x,b[c].position.y,b[c].position.z,{_camera:b[c]}))}}},advanceTime:function(){wgl.Timer.step();this.tick=this.engine.getDeltaTime()}})});ig.baked=!0;
ig.module("babylon.plugins.wgl-debug").defines(function(){wgl.Debug=ig.Class.extend({debug:!1,init:function(){},enableDebug:function(){wgl.game.currentScene.debugLayer.show()},axis2:function(b,c){var d=BABYLON.Mesh.CreateCylinder("x",c,0.1,0.1,6,4,b,!1);d.material=new BABYLON.StandardMaterial("xColor",b);d.material.diffuseColor=new BABYLON.Color3(1,0,0);d.position=new BABYLON.Vector3(c/2,0,0);d.rotation.z=Math.PI>>>1;d=BABYLON.Mesh.CreateCylinder("y",c,0.1,0.1,6,4,b,!1);d.material=new BABYLON.StandardMaterial("yColor",
b);d.material.diffuseColor=new BABYLON.Color3(0,1,0);d.position=new BABYLON.Vector3(0,c/2,0);d=BABYLON.Mesh.CreateCylinder("z",c,0.1,0.1,6,4,b,!1);d.material=new BABYLON.StandardMaterial("zColor",b);d.material.diffuseColor=new BABYLON.Color3(0,0,1);d.position=new BABYLON.Vector3(0,0,c/2);d.rotation.x=Math.PI>>>1}})});ig.baked=!0;
ig.module("babylon.entities.game-camera").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.GameCamera=wgl.Entity.extend({camera:null,controlEnabled:!1,name:"Camera",cameraCounter:null,addedDebugDraw:!1,hitbox:null,init:function(b,c,d,e){this.parent(b,c,d,e);ig.merge(this,e);e._camera&&(this.camera=e.camera,wgl.game.camera=this._camera);ig.ua.touchDevice?(c=wgl.game.currentScene,b=c.activeCamera,c.activeCamera=b,b.attachControl(window),b.ellipsoid=new BABYLON.Vector3(2,2,2),wgl.game.currentScene.collisionsEnabled=
!0,b.checkCollisions=!0,c=wgl.game.getMeshByName("Cube"),c.checkCollisions=!0,this.camera=b):(c=wgl.game.currentScene,b=c.activeCamera,b.attachControl(window),b.ellipsoid=new BABYLON.Vector3(2,2,2),wgl.game.currentScene.collisionsEnabled=!0,b.checkCollisions=!0,c=wgl.game.getMeshByName("Cube"),c.checkCollisions=!0,this.camera=b,this.camera.keysUp.push(ig.KEY.W),this.camera.keysDown.push(ig.KEY.S),this.camera.keysLeft.push(ig.KEY.A));this.camera.keysRight.push(ig.KEY.D);this.camera.fov=1.1;this.camera.minZ=
0.1;this.camera.maxZ=1E3;this.camera.angularSensibility=2E3;this.camera.inertia=0.8;this.camera.speed=4;this.setupHitbox()},setupHitbox:function(){this.hitbox=BABYLON.Mesh.CreateBox("camHitbox",10,wgl.game.currentScene);this.hitbox.parent=this.camera},update:function(){this.parent();if(wgl.debug.debug){if(!this.addedDebugDraw){var b=function(){ig.system.context.fillText("FOV:"+this.camera.fov+" minZ: "+this.camera.minZ+" maxZ: "+this.camera.maxZ+" innertia: "+this.camera.inertia+" fovMode: "+this.camera.fovMode+
" speed: "+this.camera.speed+" angularSensibility: "+this.camera.angularSensibility,20,100)}.bind(this);ig.game.lastDraw.push(b)}this.addedDebugDraw=!0}},kill:function(){this.parent();this.hitbox.dispose();this.camera.dispose()}})});ig.baked=!0;
ig.module("babylon.entities.laser").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.Laser=wgl.Entity.extend({lifeTimer:null,lifeTime:10,indexID:null,deltaRotation:new BABYLON.Vector3.Zero,array:null,init:function(b,c,d,e){this.parent(b,c,d,e);this.lifeTimer=new ig.Timer;this.meshes.push(BABYLON.MeshBuilder.CreatePlane("pl",{width:2,height:50},wgl.game.currentScene));this.meshes[0].position=new BABYLON.Vector3.Zero;b=new BABYLON.StandardMaterial("texture1",wgl.game.currentScene);
b.emissiveColor=new BABYLON.Color3(1,0.2,0.7);b.backFaceCulling=!1;this.meshes[0].material=b;this.meshes[0].position=this.pos;e.indexID&&(this.indexID=e.indexID);e.array&&(this.array=e.array);e=1*Math.random();this.deltaRotation.x=0.5>e?10*Math.random():-10*Math.random();e=1*Math.random();this.deltaRotation.y=0.5>e?10*Math.random():-10*Math.random();e=1*Math.random();this.deltaRotation.z=0.5>e?10*Math.random():-10*Math.random()},update:function(){this.parent();this.lifeTimer&&this.lifeTimer.delta()>
this.lifeTime?this.kill():(this.meshes[0].rotation.x+=this.deltaRotation.x*ig.system.tick,this.meshes[0].rotation.y+=this.deltaRotation.y*ig.system.tick,this.meshes[0].rotation.z+=this.deltaRotation.z*ig.system.tick)},kill:function(){this.parent();this.array.splice(this.indexID,1)}})});ig.baked=!0;
ig.module("babylon.entities.laser-spawner").requires("babylon.plugins.wgl-entity","babylon.entities.laser").defines(function(){wgl.modules.LaserSpawner=wgl.Entity.extend({laserArray:[],laserLength:50,laserPattern:null,laserTimer:null,spawnTime:3,spawnLimit:3,name:"LaserSpawner",startSpawn:!1,init:function(b,c,d,e){this.parent(b,c,d,e);this.laserTimer=new ig.Timer},update:function(){this.parent();this.laserTimer&&(this.startSpawn||this.laserTimer.reset(),this.laserTimer.delta()>this.spawnTime&&this.laserArray.length<
this.spawnLimit&&(this.spawnLaser(),this.laserTimer.reset()))},start:function(){this.startSpawn=!0},spawnLaser:function(){this.laserArray.push(wgl.game.spawnEntity(wgl.modules.Laser,0,0,0,{indexID:this.laserArray.length,array:this.laserArray}))},kill:function(){this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.main-camera").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.mainCamera=wgl.Entity.extend({size:{x:0,y:0,z:0},targetRadius:null,targetOrtho:null,zooming:!1,free:!1,isOrtho:!1,init:function(b,c,d,e){this.parent(b,c,d,e);ig.global.wm||(this.createArcCamera(),wgl.game.currentScene.activeCamera=this.camera)},update:function(){this.parent();this.mesh.position=this.camera.position},createMesh:function(){this.options={width:this.size.x,height:this.size.y,
depth:this.size.z};this.mesh=BABYLON.MeshBuilder.CreateBox("box",{width:20,height:20,depth:20},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.isVisible=!0},createArcCamera:function(){this.camera=new BABYLON.ArcRotateCamera("ArcRotateCamera",0,0,200,new BABYLON.Vector3(0,50,0),wgl.game.currentScene);this.camera.mode=BABYLON.Camera.PERSPECTIVE_CAMERA;this.camera.setPosition(new BABYLON.Vector3(0,60,-200));this.options={width:this.size.x,height:this.size.y,depth:this.size.z};this.mesh=
BABYLON.MeshBuilder.CreateBox("box",{width:20,height:20,depth:20},wgl.game.currentScene);this.mesh.position=this.camera.position;this.mesh.isVisible=!0},createFreeCamera:function(){this.isOrtho?(this.camera=new BABYLON.FreeCamera("freeCamera",new BABYLON.Vector3(45,45,-45),wgl.game.currentScene),this.camera.mode=BABYLON.Camera.ORTHOGRAPHIC_CAMERA):(this.camera=new BABYLON.FreeCamera("freeCamera",new BABYLON.Vector3(250,250,-250),wgl.game.currentScene),this.camera.mode=BABYLON.Camera.PERSPECTIVE_CAMERA);
this.camera.fovMode=BABYLON.Camera.FOVMODE_VERTICAL_FIXED;this.camera.orthoTop=150;this.camera.orthoBottom=-150;this.camera.orthoLeft=-150;this.camera.orthoRight=150;this.camera.setTarget(new BABYLON.Vector3.Zero)},setOrtho:function(b){this.ortho=b;this.camera.orthoTop=this.ortho;this.camera.orthoBottom=-this.ortho;this.camera.orthoLeft=0.61*-this.ortho;this.camera.orthoRight=0.61*this.ortho;this.camera.heightOffset=0.8*this.camera.radius},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.player-character").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.playerCharacter=wgl.Entity.extend({size:{x:10,y:10,z:10},rotation:{x:0.2,y:0,z:0},name:"playerCharacter",control:null,cameraAlpha:0,renderOutline:!0,outlineWidth:0.05,meshLoaded:!1,init:function(b,c,d,e){this.parent(b,c,d,e);this.createMesh();this.createMeshBB();this.control=e.control;this.cameraAlpha=this.control.cameraAlpha;this.easeType=ig.Tween.Easing.Cubic.EaseOut;this.easeTime=
1.5;this.cameraOffset=0.3;wgl.game.acceleration=0},update:function(){this.parent();this.meshBB.pos=this.mesh.pos;this.platformSpawner||(this.platformSpawner=wgl.game.getEntityByName("platformSpawner"));this.obstacleManager||(this.obstacleManager=wgl.game.getEntityByName("obstacleManager")[0]);if(!0==ig.game.movingPillar){this.cornerCheck=this.checkCornerPos();var b=0.56*wgl.game.acceleration;1==this.cornerCheck?(this.pos.z+=b,this.mesh.rotation.x-=0.8*0.11*wgl.game.acceleration):2==this.cornerCheck?
(this.mesh.rotation.x-=0.8*0.11*wgl.game.acceleration,this.pos.x+=b):3==this.cornerCheck?(this.mesh.rotation.x-=0.8*0.11*wgl.game.acceleration,this.pos.z-=b):4==this.cornerCheck&&(this.mesh.rotation.x-=0.8*0.11*wgl.game.acceleration,this.pos.x-=b)}ig.game.modelMesh&&!this.meshLoaded&&(ig.game.modelMesh.position=this.pos,ig.game.modelMesh.rotation=this.rotation,ig.game.modelMesh.scaling.x=10,ig.game.modelMesh.scaling.y=10,ig.game.modelMesh.scaling.z=10,ig.game.modelMesh.material.emissiveColor.r=10,
ig.game.modelMesh.material.emissiveColor.g=10,ig.game.modelMesh.material.emissiveColor.b=10,ig.game.modelMesh.material.specularPower=5,ig.game.modelMesh.renderOutline=ig.ua.mobile?!1:this.renderOutline,ig.game.modelMesh.outlineWidth=this.outlineWidth,ig.game.modelMesh.outlineColor={r:1,g:1,b:1},this.meshLoaded=!0)},checkCornerPos:function(){return-55>=this.pos.x&&-55>=this.pos.z?(this.pos.x=-55,this.pos.z=-55,this.mesh.rotation.x=0,this.mesh.rotation.z=0,this.mesh.rotation.y=3.1416,1!==this.cornerCheck&&
(this.platformSpawner[0].spawnFollowingPlatform(),this.obstacleManager.spawnFollowingObstacle(1),this.tween({control:{cameraAlpha:-3.14159+this.cameraOffset}},this.easeTime,{easing:this.easeType}).start()),1):-55>=this.pos.x&&55<=this.pos.z?(this.pos.x=-55,this.pos.z=55,this.mesh.rotation.x=0,this.mesh.rotation.z=0,this.mesh.rotation.y=4.7124,2!==this.cornerCheck&&(this.platformSpawner[0].spawnFollowingPlatform(),this.obstacleManager.spawnFollowingObstacle(2),this.tween({control:{cameraAlpha:-4.71239+
this.cameraOffset}},this.easeTime,{easing:this.easeType}).start()),2):55<=this.pos.x&&55<=this.pos.z?(this.pos.x=55,this.pos.z=55,this.mesh.rotation.x=0,this.mesh.rotation.z=0,this.mesh.rotation.y=0,this.control.cameraAlpha=1.5708,3!==this.cornerCheck&&(this.platformSpawner[0].spawnFollowingPlatform(),this.obstacleManager.spawnFollowingObstacle(3),this.tween({control:{cameraAlpha:0+this.cameraOffset}},this.easeTime,{easing:this.easeType}).start()),3):55<=this.pos.x&&-55>=this.pos.z?(this.pos.x=55,
this.pos.z=-55,this.mesh.rotation.x=0,this.mesh.rotation.z=0,this.mesh.rotation.y=1.5708,4!==this.cornerCheck&&(this.platformSpawner[0].spawnFollowingPlatform(),this.obstacleManager.spawnFollowingObstacle(4),this.tween({control:{cameraAlpha:-1.5708+this.cameraOffset}},this.easeTime,{easing:this.easeType}).start()),4):this.cornerCheck},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("playerCharacter",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=
this.pos;this.mesh.rotation=this.rotation;this.mesh.rotation.y=3.1416;this.mesh.isVisible=!1;this.mesh.computeWorldMatrix(!0);this.ballMat=new BABYLON.StandardMaterial("ballMat",wgl.game.currentScene);this.ballMat.diffuseTexture=new BABYLON.Texture("../cdn.marketjs.net/games/spiral-stairs/localization/en/media/mesh/cat_cat_DIFFUSE_COLOR.jpg",wgl.game.currentScene);this.mesh.material=this.ballMat;this.ballMat.wireframe=!1;BABYLON.SceneLoader.ImportMesh("cat","http://cdn.marketjs.net/games/spiral-stairs/localization/en/media/mesh/","cat.babylon",wgl.game.currentScene,
function(b){for(var c=0;c<b.length;c++)"cat"==b[c].name&&(ig.game.modelMesh=b[c],this.idleAnimation=wgl.game.currentScene.beginAnimation(ig.game.modelMesh,1,40,!0,1))})},createMeshBB:function(){this.meshBB=BABYLON.MeshBuilder.CreateBox("characterBB",{width:0.5*this.size.x,height:0.5*this.size.y,depth:0.5*this.size.z},wgl.game.currentScene);this.meshBB.position=this.pos;this.meshBB.rotation=this.rotation;this.meshBB.isVisible=!1;this.meshBB.computeWorldMatrix(!0)},createBoundingBox:function(){this.bBox=
BABYLON.MeshBuilder.CreateBox("CubeObstacle",{width:this.size.x/2,height:this.size.y/2,depth:this.size.z/2},wgl.game.currentScene);this.bBox.position=this.pos;this.bBox.computeWorldMatrix(!0);this.bBox.material=this.ballMat;this.bBox.isVisible=!1;this.bBox.outlineColor={r:0,g:0,b:0};this.bBox.outlineWidth=0.1;this.bBox.renderOutline=!0},kill:function(){this.parent();ig.game.modelMesh.dispose();ig.game.modelMesh=null;this.mesh.dispose();this.meshBB.dispose()}})});ig.baked=!0;
ig.module("babylon.entities.center-pillar").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.centerPillar=wgl.Entity.extend({size:{x:90,y:550,z:90},rotation:{x:0,y:0,z:0},name:"centerPillar",colourPalette:{palette1:{r:8,g:4.5,b:6},palette2:{r:4.5,g:2,b:5.5},palette3:{r:7,g:4,b:3},palette4:{r:4,g:4,b:5},palette5:{r:7,g:5,b:2},palette6:{r:4,g:2,b:1},palette7:{r:7,g:5,b:2},palette8:{r:8,g:8,b:8},palette9:{r:7,g:5,b:2},palette10:{r:7,g:6,b:6},palette11:{r:8,g:4.5,b:6},palette12:{r:0,
g:7,b:8},palette13:{r:7,g:4.5,b:2}},init:function(b,c,d,e){this.parent(b,c,d,e);this.createMesh()},update:function(){this.parent()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("centerPillar",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!0;this.mesh.computeWorldMatrix(!0);this.pillarMat=new BABYLON.StandardMaterial("pillarMat",wgl.game.currentScene);this.mesh.material=
this.pillarMat;switch(ig.game.playerStats.themeColour){case 0:var b=this.colourPalette.palette1.r,c=this.colourPalette.palette1.g,d=this.colourPalette.palette1.b;break;case 1:b=this.colourPalette.palette2.r;c=this.colourPalette.palette2.g;d=this.colourPalette.palette2.b;break;case 2:b=this.colourPalette.palette3.r;c=this.colourPalette.palette3.g;d=this.colourPalette.palette3.b;break;case 3:b=this.colourPalette.palette4.r;c=this.colourPalette.palette4.g;d=this.colourPalette.palette4.b;break;case 4:b=
this.colourPalette.palette5.r;c=this.colourPalette.palette5.g;d=this.colourPalette.palette5.b;break;case 5:b=this.colourPalette.palette6.r;c=this.colourPalette.palette6.g;d=this.colourPalette.palette6.b;break;case 6:b=this.colourPalette.palette7.r;c=this.colourPalette.palette7.g;d=this.colourPalette.palette7.b;break;case 7:b=this.colourPalette.palette8.r;c=this.colourPalette.palette8.g;d=this.colourPalette.palette8.b;break;case 8:b=this.colourPalette.palette9.r;c=this.colourPalette.palette9.g;d=this.colourPalette.palette9.b;
break;case 9:b=this.colourPalette.palette10.r;c=this.colourPalette.palette10.g;d=this.colourPalette.palette10.b;break;case 10:b=this.colourPalette.palette11.r;c=this.colourPalette.palette11.g;d=this.colourPalette.palette11.b;break;case 11:b=this.colourPalette.palette12.r;c=this.colourPalette.palette12.g;d=this.colourPalette.palette12.b;break;case 12:b=this.colourPalette.palette13.r,c=this.colourPalette.palette13.g,d=this.colourPalette.palette13.b}this.pillarMat.diffuseColor=new BABYLON.Color3(b,c,
d);this.pillarMat.AmbientColor=new BABYLON.Color3(1,1,1);this.pillarMat.specularColor=new BABYLON.Color3(0,0,0);this.pillarMat.wireframe=!1},kill:function(){this.parent();this.mesh.dispose()}})});ig.baked=!0;
ig.module("babylon.entities.ground-platform").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.groundPlatform=wgl.Entity.extend({size:{x:20,y:3,z:20},rotation:{x:0,y:0,z:0},colourPalette:{palette1:{r:5,g:3.5,b:2},palette2:{r:4,g:1,b:3},palette3:{r:4.2,g:1.8,b:1.8},palette4:{r:1.5,g:4.3,b:4.6},palette5:{r:5,g:1.8,b:2.5},palette6:{r:5.2,g:3,b:1},palette7:{r:4.5,g:2,b:1},palette8:{r:5.5,g:4,b:3},palette9:{r:3.8,g:1,b:2.5},palette10:{r:3.2,g:1.7,b:1.2},palette11:{r:5.5,g:4,b:3},palette12:{r:5.5,
g:4,b:3},palette13:{r:5,g:2,b:2}},name:"groundPlatform",init:function(b,c,d,e){this.parent(b,c,d,e);this.createMesh();this.playerCharacter=wgl.game.getEntityByName("playerCharacter")},update:function(){this.parent();!0==ig.game.movingPillar&&(this.mesh.position.y-=0.16848*wgl.game.acceleration);0>this.mesh.position.y&&this.kill()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("groundPlatform",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=
this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!0;this.mesh.computeWorldMatrix(!0);this.groundMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.mesh.material=this.groundMat;switch(ig.game.playerStats.themeColour){case 0:var b=this.colourPalette.palette1.r,c=this.colourPalette.palette1.g,d=this.colourPalette.palette1.b;break;case 1:b=this.colourPalette.palette2.r;c=this.colourPalette.palette2.g;d=this.colourPalette.palette2.b;break;case 2:b=this.colourPalette.palette3.r;
c=this.colourPalette.palette3.g;d=this.colourPalette.palette3.b;break;case 3:b=this.colourPalette.palette4.r;c=this.colourPalette.palette4.g;d=this.colourPalette.palette4.b;break;case 4:b=this.colourPalette.palette5.r;c=this.colourPalette.palette5.g;d=this.colourPalette.palette5.b;break;case 5:b=this.colourPalette.palette6.r;c=this.colourPalette.palette6.g;d=this.colourPalette.palette6.b;break;case 6:b=this.colourPalette.palette7.r;c=this.colourPalette.palette7.g;d=this.colourPalette.palette7.b;break;
case 7:b=this.colourPalette.palette8.r;c=this.colourPalette.palette8.g;d=this.colourPalette.palette8.b;break;case 8:b=this.colourPalette.palette9.r;c=this.colourPalette.palette9.g;d=this.colourPalette.palette9.b;break;case 9:b=this.colourPalette.palette10.r;c=this.colourPalette.palette10.g;d=this.colourPalette.palette10.b;break;case 10:b=this.colourPalette.palette11.r;c=this.colourPalette.palette11.g;d=this.colourPalette.palette11.b;break;case 11:b=this.colourPalette.palette12.r;c=this.colourPalette.palette12.g;
d=this.colourPalette.palette12.b;break;case 12:b=this.colourPalette.palette13.r,c=this.colourPalette.palette13.g,d=this.colourPalette.palette13.b}this.groundMat.diffuseColor=new BABYLON.Color3(b,c,d);this.groundMat.AmbientColor=new BABYLON.Color3(1,1,1);this.groundMat.specularColor=new BABYLON.Color3(0,0,0)},kill:function(){this.mesh.dispose();this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.platform-spawner").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.platformSpawner=wgl.Entity.extend({size:{x:20,y:3,z:20},rotation:{x:0,y:0,z:0},name:"platformSpawner",platArr:[],initialMaxPlatform:0,init:function(b,c,d,e){this.parent(b,c,d,e);this.initialMaxPlatform=e.initialMaxPlatform;this.createMesh();this.spawnInitialPlatform();this.checkPos=1},update:function(){this.parent()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("platformSpawner",
{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!1;this.mesh.computeWorldMatrix(!0);this.spawnerMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.mesh.material=this.spawnerMat;this.spawnerMat.diffuseColor=new BABYLON.Color3(0.9,1,5);this.spawnerMat.AmbientColor=new BABYLON.Color3(1,1,1);this.spawnerMat.specularColor=new BABYLON.Color3(0,0,0);this.spawnerMat.wireframe=
!0},trackLastPlatform:function(){this.platArr[this.platArr.length-1].mesh.position.y<=this.pos.y&&this.spawnFollowingPlatform()},spawnInitialPlatform:function(){for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,this.pos.x+10*i,this.pos.y-3*i,this.pos.z,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform);for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,
this.pos.x+10*(this.initialMaxPlatform-1),this.pos.y-3*(this.initialMaxPlatform+i-2)-0.1,this.pos.z+10*i,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform);for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,this.pos.x-10*-this.initialMaxPlatform+10*-i-10,this.pos.y-3*(2*this.initialMaxPlatform+i-2)+6,this.pos.z+10*this.initialMaxPlatform-10,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform);
for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,this.pos.x+0*(this.initialMaxPlatform-1),this.pos.y-3*(3*this.initialMaxPlatform+i-2)+12,this.pos.z+10*this.initialMaxPlatform-10*i-10,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform)},spawnFollowingPlatform:function(){switch(this.checkPos){case 1:for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,
this.pos.x,this.pos.y+3*(i-1),this.pos.z+10*i,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform);break;case 2:for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,this.pos.x+10*i,this.pos.y+3*(i-1),this.pos.z,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform);break;case 3:for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,
this.pos.x,this.pos.y+3*(i-1),this.pos.z-10*i,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform);break;case 4:for(i=0;i<this.initialMaxPlatform;i++)this.cubePlatform=wgl.game.spawnEntity(wgl.modules.groundPlatform,this.pos.x-10*i,this.pos.y+3*(i-1),this.pos.z,{size:this.size,rotation:this.rotation,motherBranch:this}),this.platArr.push(this.cubePlatform)}this.changeSpawnerLocation()},checkCurrentPosition:function(){this.positionNow=this.pos;this.position1=
{x:-60,y:this.pos.y,z:-60};this.position2={x:-60,y:this.pos.y,z:60};this.position3={x:60,y:this.pos.y,z:60};this.position4={x:60,y:this.pos.y,z:-60};var b=JSON.stringify(this.positionNow),c=JSON.stringify(this.position1),d=JSON.stringify(this.position2),e=JSON.stringify(this.position3),f=JSON.stringify(this.position4);if(b==c)return 1;if(b==d)return 2;if(b==e)return 3;if(b==f)return 4},changeSpawnerLocation:function(){this.position1={x:-60,y:this.pos.y,z:-60};this.position2={x:-60,y:this.pos.y,z:60};
this.position3={x:60,y:this.pos.y,z:60};this.position4={x:60,y:this.pos.y,z:-60};switch(this.checkPos){case 1:this.pos.x=this.position2.x;this.pos.y=this.position2.y;this.pos.z=this.position2.z;break;case 2:this.pos.x=this.position3.x;this.pos.y=this.position3.y;this.pos.z=this.position3.z;break;case 3:this.pos.x=this.position4.x;this.pos.y=this.position4.y;this.pos.z=this.position4.z;break;case 4:this.pos.x=this.position1.x,this.pos.y=this.position1.y,this.pos.z=this.position1.z}4<=this.checkPos?
this.checkPos=1:this.checkPos++},spawnPlatform:function(){this.platformMesh=BABYLON.MeshBuilder.CreateBox("groundPlatform",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.platformMesh.position=this.pos;this.platformMesh.rotation=this.rotation;this.platformMesh.isVisible=!0;this.platformMesh.computeWorldMatrix(!0);this.groundMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.platformMesh.material=this.groundMat;this.groundMat.diffuseColor=
new BABYLON.Color3(0.9,1,5);this.groundMat.AmbientColor=new BABYLON.Color3(1,1,1);this.groundMat.specularColor=new BABYLON.Color3(0,0,0)},kill:function(){this.mesh.dispose();this.mesh=null;this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.obstacle-spawner").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.obstacleSpawner=wgl.Entity.extend({size:{x:10,y:10,z:10},rotation:{x:0,y:0,z:0},colourPalette:{palette1:{r:4,g:4,b:4},palette2:{r:1,g:3.5,b:4},palette3:{r:5,g:4,b:2},palette4:{r:4.5,g:4.5,b:4.5},palette5:{r:5,g:2,b:0},palette6:{r:5,g:5,b:5},palette7:{r:5,g:2,b:4},palette8:{r:7,g:2.2,b:1},palette9:{r:7,g:2.2,b:1},palette10:{r:6,g:3,b:2},palette11:{r:6,g:6,b:6},palette12:{r:6,g:6,b:6},
palette13:{r:3.5,g:4.5,b:6}},colourPalette2:{palette1:{r:5,g:2,b:3},palette2:{r:5,g:2.5,b:0},palette3:{r:0.5,g:3,b:2},palette4:{r:4.5,g:1,b:1},palette5:{r:3,g:0,b:3},palette6:{r:5,g:3,b:1},palette7:{r:4.5,g:2,b:1},palette8:{r:0,g:4.5,b:6},palette9:{r:3,g:0.7,b:1.8},palette10:{r:5,g:2,b:1},palette11:{r:5,g:2,b:1},palette12:{r:5,g:2,b:1},palette13:{r:3,g:2,b:1}},col:{r:0,g:0,b:0},col2:{r:0,g:0,b:0},obstacleSpawnCooldown:180,name:"obstacleSpawner",obstacleType:0,init:function(b,c,d,e){this.parent(b,
c,d,e);switch(ig.game.playerStats.themeColour){case 0:this.col.r=this.colourPalette.palette1.r;this.col.g=this.colourPalette.palette1.g;this.col.b=this.colourPalette.palette1.b;this.col2.r=this.colourPalette2.palette1.r;this.col2.g=this.colourPalette2.palette1.g;this.col2.b=this.colourPalette2.palette1.b;break;case 1:this.col.r=this.colourPalette.palette2.r;this.col.g=this.colourPalette.palette2.g;this.col.b=this.colourPalette.palette2.b;this.col2.r=this.colourPalette2.palette2.r;this.col2.g=this.colourPalette2.palette2.g;
this.col2.b=this.colourPalette2.palette2.b;break;case 2:this.col.r=this.colourPalette.palette3.r;this.col.g=this.colourPalette.palette3.g;this.col.b=this.colourPalette.palette3.b;this.col2.r=this.colourPalette2.palette3.r;this.col2.g=this.colourPalette2.palette3.g;this.col2.b=this.colourPalette2.palette3.b;break;case 3:this.col.r=this.colourPalette.palette4.r;this.col.g=this.colourPalette.palette4.g;this.col.b=this.colourPalette.palette4.b;this.col2.r=this.colourPalette2.palette4.r;this.col2.g=this.colourPalette2.palette4.g;
this.col2.b=this.colourPalette2.palette4.b;break;case 4:this.col.r=this.colourPalette.palette5.r;this.col.g=this.colourPalette.palette5.g;this.col.b=this.colourPalette.palette5.b;this.col2.r=this.colourPalette2.palette5.r;this.col2.g=this.colourPalette2.palette5.g;this.col2.b=this.colourPalette2.palette5.b;break;case 5:this.col.r=this.colourPalette.palette6.r;this.col.g=this.colourPalette.palette6.g;this.col.b=this.colourPalette.palette6.b;this.col2.r=this.colourPalette2.palette6.r;this.col2.g=this.colourPalette2.palette6.g;
this.col2.b=this.colourPalette2.palette6.b;break;case 6:this.col.r=this.colourPalette.palette7.r;this.col.g=this.colourPalette.palette7.g;this.col.b=this.colourPalette.palette7.b;this.col2.r=this.colourPalette2.palette7.r;this.col2.g=this.colourPalette2.palette7.g;this.col2.b=this.colourPalette2.palette7.b;break;case 7:this.col.r=this.colourPalette.palette8.r;this.col.g=this.colourPalette.palette8.g;this.col.b=this.colourPalette.palette8.b;this.col2.r=this.colourPalette2.palette8.r;this.col2.g=this.colourPalette2.palette8.g;
this.col2.b=this.colourPalette2.palette8.b;break;case 8:this.col.r=this.colourPalette.palette9.r;this.col.g=this.colourPalette.palette9.g;this.col.b=this.colourPalette.palette9.b;this.col2.r=this.colourPalette2.palette9.r;this.col2.g=this.colourPalette2.palette9.g;this.col2.b=this.colourPalette2.palette9.b;break;case 9:this.col.r=this.colourPalette.palette10.r;this.col.g=this.colourPalette.palette10.g;this.col.b=this.colourPalette.palette10.b;this.col2.r=this.colourPalette2.palette10.r;this.col2.g=
this.colourPalette2.palette10.g;this.col2.b=this.colourPalette2.palette10.b;break;case 10:this.col.r=this.colourPalette.palette11.r;this.col.g=this.colourPalette.palette11.g;this.col.b=this.colourPalette.palette11.b;this.col2.r=this.colourPalette2.palette11.r;this.col2.g=this.colourPalette2.palette11.g;this.col2.b=this.colourPalette2.palette11.b;break;case 11:this.col.r=this.colourPalette.palette12.r;this.col.g=this.colourPalette.palette12.g;this.col.b=this.colourPalette.palette12.b;this.col2.r=this.colourPalette2.palette12.r;
this.col2.g=this.colourPalette2.palette12.g;this.col2.b=this.colourPalette2.palette12.b;break;case 12:this.col.r=this.colourPalette.palette13.r,this.col.g=this.colourPalette.palette13.g,this.col.b=this.colourPalette.palette13.b,this.col2.r=this.colourPalette2.palette13.r,this.col2.g=this.colourPalette2.palette13.g,this.col2.b=this.colourPalette2.palette13.b}this.decideObstacle();this.rotation=e.rotation;this.obstacleSpawnTimer=0;this.createMesh();0==this.obstacleType?this.spawnSpinningObstacle():
1==this.obstacleType&&this.spawnSpikeObstacle()},update:function(){this.parent();2==this.obstacleType?this.spawnFallingObstacle():3==this.obstacleType&&this.spawnMultiFallingObstacle();this.movingMesh()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("testSpawner",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!1;this.mesh.computeWorldMatrix(!0);this.spawnerMat=new BABYLON.StandardMaterial("groundMat",
wgl.game.currentScene);this.mesh.material=this.spawnerMat;this.spawnerMat.diffuseColor=new BABYLON.Color3(0.9,1,5);this.spawnerMat.AmbientColor=new BABYLON.Color3(1,1,1);this.spawnerMat.specularColor=new BABYLON.Color3(0,0,0);this.spawnerMat.wireframe=!1},spawnFallingObstacle:function(){this.obstacleSpawnTimer>this.obstacleSpawnCooldown?(this.obstacleFalling=wgl.game.spawnEntity(wgl.modules.obstacleFalling,this.mesh.position.x,this.mesh.position.y,this.mesh.position.z,{rotation:{x:this.rotation.x,
y:this.rotation.y,z:this.rotation.z},col:{r:this.col2.r,g:this.col2.g,b:this.col2.b},motherBranch:this}),this.obstacleSpawnTimer=0):this.obstacleSpawnTimer++},spawnMultiFallingObstacle:function(){if(this.obstacleSpawnTimer>this.obstacleSpawnCooldown){switch(this.rotation.y){case 0:var b=0,c=-3;break;case 1.5708:b=-3;c=0;break;case 3.14159:b=0;c=3;break;case 4.71239:b=3,c=0}for(i=0;4>i;i++)this.obstacleFalling=wgl.game.spawnEntity(wgl.modules.obstacleFalling,this.mesh.position.x-b*i,this.mesh.position.y+
10*(3-i),this.mesh.position.z-c*i,{rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},col:{r:this.col2.r,g:this.col2.g,b:this.col2.b},motherBranch:this});this.obstacleSpawnTimer=0}else this.obstacleSpawnTimer++},spawnSpinningObstacle:function(){this.obstacleSpinning=wgl.game.spawnEntity(wgl.modules.obstacleSpinning,this.mesh.position.x,this.mesh.position.y-85,this.mesh.position.z,{rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},col:{r:this.col.r,g:this.col.g,b:this.col.b},
motherBranch:this})},spawnSpikeObstacle:function(){switch(this.rotation.y){case 0:var b=0;break;case 1.5708:b=1;break;case 3.14159:b=2;break;case 4.71239:b=3}this.obstacleSpike=wgl.game.spawnEntity(wgl.modules.obstacleSpike,this.mesh.position.x,this.mesh.position.y-110,this.mesh.position.z,{spikeSide:b,rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},col:{r:this.col.r,g:this.col.g,b:this.col.b},motherBranch:this})},movingMesh:function(){!0==ig.game.movingPillar&&(this.mesh.position.y-=
0.16848*wgl.game.acceleration);100>this.mesh.position.y&&this.kill()},decideObstacle:function(){var b=Math.random();this.obstacleType=0.3>b?0:0.5>b?1:0.7>b?2:0.9>b?3:-1},kill:function(){this.mesh.dispose();this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.obstacle-falling").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.obstacleFalling=wgl.Entity.extend({size:{x:4,y:4,z:4},rotation:{x:0,y:0,z:0},col:{r:0,g:0,b:0},init:function(b,c,d,e){this.parent(b,c,d,e);this.rotation=e.rotation;this.motherBranch=e.motherBranch;this.createMesh()},update:function(){this.parent();this.mesh&&(this.mesh.rotation.x+=0.05,this.mesh.rotation.z-=0.05,this.checkIntersect());this.mesh.position.y=!0==ig.game.movingPillar?this.mesh.position.y-
(0.66848+0.2*wgl.game.acceleration):this.mesh.position.y-0.5;50>this.mesh.position.y&&this.kill()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("obstacleFalling",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!0;this.mesh.computeWorldMatrix(!0);this.spawnerMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.mesh.material=this.spawnerMat;this.spawnerMat.diffuseColor=
new BABYLON.Color3(this.col.r,this.col.g,this.col.b);this.spawnerMat.AmbientColor=new BABYLON.Color3(1,1,1);this.spawnerMat.specularColor=new BABYLON.Color3(0,0,0);this.spawnerMat.wireframe=!1;this.mesh.renderOutline=ig.ua.mobile?!1:!0;this.mesh.outlineWidth=0.2;this.mesh.outlineColor={r:1,g:1,b:1}},checkIntersect:function(){this.platformGround=wgl.game.getEntityByName("groundPlatform");this.playerCharacter=wgl.game.getEntityByName("playerCharacter")[0];if(100>this.mesh.position.y)for(i=0;i<this.platformGround.length;i++)this.mesh.intersectsMesh(this.platformGround[i].mesh,
!1)&&this.kill();!0==ig.game.gameStarted&&this.mesh.intersectsMesh(this.playerCharacter.meshBB,!1)&&wgl.game.showEndDialog()},kill:function(){this.mesh.dispose();this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.obstacle-manager").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.obstacleManager=wgl.Entity.extend({size:{x:10,y:10,z:10},rotation:{x:0,y:0,z:0},obsArr:[],maxObstaclePerSide:3,name:"obstacleManager",init:function(b,c,d,e){this.parent(b,c,d,e);this.platformSpawner=wgl.game.getEntityByName("platformSpawner")[0]},update:function(){this.parent()},spawnInitialObstacle:function(){this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,55,
247,25,{motherBranch:this});this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,55,258,0,{motherBranch:this});this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,55,266,-25,{motherBranch:this})},spawnFollowingObstacle:function(b){if(!0===this.initialSpawn)this.spawnInitialObstacle(),this.initialSpawn=!1;else switch(b){case 1:this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,55,247,32,{rotation:{x:0,y:0,z:0},motherBranch:this});this.obstacleSpawner=
wgl.game.spawnEntity(wgl.modules.obstacleSpawner,55,258,0,{rotation:{x:0,y:0,z:0},motherBranch:this});this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,55,266,-32,{rotation:{x:0,y:0,z:0},motherBranch:this});break;case 2:this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,32,247,-55,{rotation:{x:0,y:1.5708,z:0},motherBranch:this});this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,0,258,-55,{rotation:{x:0,y:1.5708,z:0},motherBranch:this});this.obstacleSpawner=
wgl.game.spawnEntity(wgl.modules.obstacleSpawner,-32,266,-55,{rotation:{x:0,y:1.5708,z:0},motherBranch:this});break;case 3:this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,-55,247,-32,{rotation:{x:0,y:3.14159,z:0},motherBranch:this});this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,-55,258,0,{rotation:{x:0,y:3.14159,z:0},motherBranch:this});this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,-55,266,32,{rotation:{x:0,y:3.14159,z:0},motherBranch:this});
break;case 4:this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,-32,24,55,{rotation:{x:0,y:4.71239,z:0},motherBranch:this}),this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,0,258,55,{rotation:{x:0,y:4.71239,z:0},motherBranch:this}),this.obstacleSpawner=wgl.game.spawnEntity(wgl.modules.obstacleSpawner,32,266,55,{rotation:{x:0,y:4.71239,z:0},motherBranch:this})}}})});ig.baked=!0;
ig.module("babylon.entities.obstacle-spinning").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.obstacleSpinning=wgl.Entity.extend({size:{x:2,y:27,z:2},rotation:{x:0,y:0,z:0},col:{r:0,g:0,b:0},init:function(b,c,d,e){this.parent(b,c,d,e);this.rotation=e.rotation;this.motherBranch=e.motherBranch;this.createMesh();this.randomDirection=0.5>Math.random()?1:-1;this.randomSpeedModifier=0.05*Math.random()},update:function(){this.parent();this.mesh&&(this.mesh.rotation.x+=(0.02+this.randomSpeedModifier)*
this.randomDirection);this.checkIntersect();!0==ig.game.movingPillar&&(this.mesh.position.y-=0.16848*wgl.game.acceleration);50>this.mesh.position.y&&this.kill()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateBox("obstacleSpinning",{width:this.size.x,height:this.size.y,depth:this.size.z},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!0;this.mesh2=BABYLON.MeshBuilder.CreateBox("obstacleSpinning",{width:20,height:7,depth:7},wgl.game.currentScene);
this.mesh2.position=this.pos;this.mesh2.rotation=this.rotation;this.mesh2.isVisible=!0;this.mesh.computeWorldMatrix(!0);this.mesh2.computeWorldMatrix(!0);var b=BABYLON.Matrix.Translation(0,14.6,0),c=BABYLON.Matrix.Translation(-10,0,0);this.mesh.setPivotMatrix(b);this.mesh2.setPivotMatrix(c);this.spawnerMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.mesh.material=this.spawnerMat;this.mesh2.material=this.spawnerMat;this.spawnerMat.diffuseColor=new BABYLON.Color3(this.col.r,
this.col.g,this.col.b);this.spawnerMat.AmbientColor=new BABYLON.Color3(1,1,1);this.spawnerMat.specularColor=new BABYLON.Color3(0,0,0);this.spawnerMat.wireframe=!1;this.mesh.renderOutline=ig.ua.mobile?!1:!0;this.mesh.outlineWidth=0.2;this.mesh.outlineColor={r:1,g:1,b:1}},checkIntersect:function(){this.playerCharacter=wgl.game.getEntityByName("playerCharacter")[0];!0==ig.game.gameStarted&&this.mesh.intersectsMesh(this.playerCharacter.meshBB,!0)&&(this.kill(),wgl.game.showEndDialog())},kill:function(){this.mesh.dispose();
this.mesh2.dispose();this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.obstacle-spike").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.obstacleSpike=wgl.Entity.extend({size:{x:20,y:30,z:2},rotation:{x:0,y:0,z:-1.5708},col:{r:0,g:0,b:0},toggleTimer:90,trapActivated:!1,init:function(b,c,d,e){this.parent(b,c,d,e);this.motherBranch=e.motherBranch;this.spikeSide=e.spikeSide;this.createMesh();this.createMeshBB();if(this.mesh)switch(this.spikeSide){case 0:this.mesh.position.x-=30;this.mesh.rotation.z=-1.5708;break;case 1:this.mesh.position.z+=
30;this.mesh.rotation.z=-1.5708;break;case 2:this.mesh.position.x+=30;this.mesh.rotation.z=-1.5708;break;case 3:this.mesh.position.z-=30,this.mesh.rotation.z=-1.5708}this.currentToggleTimer=0},update:function(){this.parent();this.checkIntersect();this.intervalTimer();!0==ig.game.movingPillar&&(this.mesh.position.y-=0.16848*wgl.game.acceleration);50>this.meshBB.position.y&&this.kill()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreateCylinder("obstacleSpike",{height:this.size.y,diameterTop:0,
diameterBottom:this.size.x,tessellation:4},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=!0;this.mesh.computeWorldMatrix(!0);var b=BABYLON.Matrix.Translation(0,15,0);this.mesh.setPivotMatrix(b);this.spawnerMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.mesh.material=this.spawnerMat;this.spawnerMat.diffuseColor=new BABYLON.Color3(this.col.r,this.col.g,this.col.b);this.spawnerMat.AmbientColor=new BABYLON.Color3(1,1,
1);this.spawnerMat.specularColor=new BABYLON.Color3(0,0,0);this.spawnerMat.wireframe=!1;this.mesh.renderOutline=ig.ua.mobile?!1:!0;this.mesh.outlineWidth=0.2;this.mesh.outlineColor={r:1,g:1,b:1}},createMeshBB:function(){this.meshBB=BABYLON.MeshBuilder.CreateCylinder("obstacleSpike",{height:0.7*this.size.y,diameterTop:0,diameterBottom:0.7*this.size.x,tessellation:4},wgl.game.currentScene);this.meshBB.position=this.pos;this.meshBB.rotation=this.rotation;this.meshBB.isVisible=!0;this.meshBB.computeWorldMatrix(!0);
var b=BABYLON.Matrix.Translation(0,15,0);this.meshBB.setPivotMatrix(b)},checkIntersect:function(){this.playerCharacter=wgl.game.getEntityByName("playerCharacter")[0];!0==ig.game.gameStarted&&(this.damageMode&&this.meshBB.intersectsMesh(this.playerCharacter.meshBB,!0))&&(this.kill(),wgl.game.showEndDialog())},intervalTimer:function(){this.currentToggleTimer>this.toggleTimer?(this.activateTrigger(),this.currentToggleTimer=0):this.currentToggleTimer++},activateTrigger:function(){if(this.trapActivated){switch(this.spikeSide){case 0:this.newPosition=
this.mesh.position.x-20;this.tween({},0.25,{onComplete:function(){this.damageMode=!1}.bind(this)}).start();this.tween({mesh:{position:{x:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case 1:this.newPosition=this.mesh.position.z+20;this.tween({},0.25,{onComplete:function(){this.damageMode=!1}.bind(this)}).start();this.tween({mesh:{position:{z:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case 2:this.newPosition=this.mesh.position.x+20;
this.tween({},0.25,{onComplete:function(){this.damageMode=!1}.bind(this)}).start();this.tween({mesh:{position:{x:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case 3:this.newPosition=this.mesh.position.z-20,this.tween({},0.25,{onComplete:function(){this.damageMode=!1}.bind(this)}).start(),this.tween({mesh:{position:{z:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start()}this.trapActivated=!1}else{switch(this.spikeSide){case 0:this.newPosition=this.mesh.position.x+
20;this.tween({},0.25,{onComplete:function(){this.damageMode=!0}.bind(this)}).start();this.tween({mesh:{position:{x:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case 1:this.newPosition=this.mesh.position.z-20;this.tween({},0.25,{onComplete:function(){this.damageMode=!0}.bind(this)}).start();this.tween({mesh:{position:{z:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case 2:this.newPosition=this.mesh.position.x-20;this.tween({},0.25,{onComplete:function(){this.damageMode=
!0}.bind(this)}).start();this.tween({mesh:{position:{x:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start();break;case 3:this.newPosition=this.mesh.position.z+20,this.tween({},0.25,{onComplete:function(){this.damageMode=!0}.bind(this)}).start(),this.tween({mesh:{position:{z:this.newPosition}}},0.5,{easing:ig.Tween.Easing.Cubic.EaseOut}).start()}this.trapActivated=!0}},kill:function(){this.mesh.dispose();this.meshBB.dispose();this.parent()}})});ig.baked=!0;
ig.module("babylon.entities.ground-plane").requires("babylon.plugins.wgl-entity").defines(function(){wgl.modules.groundPlane=wgl.Entity.extend({size:{x:1E3,y:1,z:1E3},rotation:{x:1.57,y:0,z:0},colourPalette:{palette0:{r:0.5,g:2,b:0.8},palette1:{r:2.5,g:3.5,b:6},palette2:{r:3,g:2.5,b:5},palette3:{r:0.5,g:3,b:2.5},palette4:{r:2,g:2,b:2},palette5:{r:2.8,g:1.3,b:1.6},palette6:{r:1.5,g:2.5,b:0.5},palette7:{r:1.2,g:0.2,b:0.5},palette8:{r:0.2,g:1.9,b:4.2},palette9:{r:2.2,g:0.2,b:3},palette10:{r:0.5,g:3,
b:2},palette11:{r:0,g:0,b:3},palette12:{r:1,g:1,b:2},palette13:{r:3.4,g:3.7,b:1.2}},name:"groundPlane",init:function(b,c,d,e){this.parent(b,c,d,e);this.createMesh()},update:function(){this.parent();!0==ig.game.movingPillar&&(this.mesh.position.y-=0.16848*wgl.game.acceleration);-540>this.mesh.position.y&&this.kill()},createMesh:function(){this.mesh=BABYLON.MeshBuilder.CreatePlane("groundPlane",{size:this.size.x},wgl.game.currentScene);this.mesh.position=this.pos;this.mesh.rotation=this.rotation;this.mesh.isVisible=
!0;this.mesh.computeWorldMatrix(!0);this.groundMat=new BABYLON.StandardMaterial("groundMat",wgl.game.currentScene);this.mesh.material=this.groundMat;switch(ig.game.playerStats.themeColour){case 0:var b=this.colourPalette.palette1.r,c=this.colourPalette.palette1.g,d=this.colourPalette.palette1.b;break;case 1:b=this.colourPalette.palette2.r;c=this.colourPalette.palette2.g;d=this.colourPalette.palette2.b;break;case 2:b=this.colourPalette.palette3.r;c=this.colourPalette.palette3.g;d=this.colourPalette.palette3.b;
break;case 3:b=this.colourPalette.palette4.r;c=this.colourPalette.palette4.g;d=this.colourPalette.palette4.b;break;case 4:b=this.colourPalette.palette5.r;c=this.colourPalette.palette5.g;d=this.colourPalette.palette5.b;break;case 5:b=this.colourPalette.palette6.r;c=this.colourPalette.palette6.g;d=this.colourPalette.palette6.b;break;case 6:b=this.colourPalette.palette7.r;c=this.colourPalette.palette7.g;d=this.colourPalette.palette7.b;break;case 7:b=this.colourPalette.palette8.r;c=this.colourPalette.palette8.g;
d=this.colourPalette.palette8.b;break;case 8:b=this.colourPalette.palette9.r;c=this.colourPalette.palette9.g;d=this.colourPalette.palette9.b;break;case 9:b=this.colourPalette.palette10.r;c=this.colourPalette.palette10.g;d=this.colourPalette.palette10.b;break;case 10:b=this.colourPalette.palette11.r;c=this.colourPalette.palette11.g;d=this.colourPalette.palette11.b;break;case 11:b=this.colourPalette.palette12.r;c=this.colourPalette.palette12.g;d=this.colourPalette.palette12.b;break;case 12:b=this.colourPalette.palette13.r,
c=this.colourPalette.palette13.g,d=this.colourPalette.palette13.b}this.groundMat.diffuseColor=new BABYLON.Color3(b,c,d);this.groundMat.AmbientColor=new BABYLON.Color3(1,1,1);this.groundMat.specularColor=new BABYLON.Color3(0,0,0);this.groundMat.wireframe=!1},kill:function(){this.parent();this.mesh.dispose()}})});ig.baked=!0;
ig.module("babylon.game.wgl-main").requires("babylon.plugins.wgl-game","babylon.plugins.wgl-system","babylon.plugins.wgl-debug","babylon.plugins.wgl-game","babylon.entities.game-camera","babylon.entities.laser-spawner","babylon.entities.laser","babylon.entities.main-camera","babylon.entities.player-character","babylon.entities.center-pillar","babylon.entities.ground-platform","babylon.entities.platform-spawner","babylon.entities.obstacle-spawner","babylon.entities.obstacle-falling","babylon.entities.obstacle-manager",
"babylon.entities.obstacle-spinning","babylon.entities.obstacle-spike","babylon.entities.ground-plane").defines(function(){MyWGLGame=wgl.Game.extend({gameover:!1,debug:!1,init:function(){},reloadLevel:function(){for(wgl.system.unregisterBeforeRender();0<this.entities.length;)this.entities.pop();this.gameover=!1},resetLevel:function(){for(i=0;i<wgl.game.entities.length;i++)wgl.game.entities[i].kill();wgl.game.entities=[];ig.game.movingPillar=!1;ig.game.gameOver=!1;ig.game.shopPageOpen=!1;ig.game.gamePaused=
!1;for(i=0;i<ig.game.entities.length;i++)ig.game.entities[i].kill();ig.game.entities=[]},showEndDialog:function(){this.dialogBox=ig.game.spawnEntity(EntityLevelEndDialog,0,0);ig.game.gameStarted=!1;ig.game.movingPillar=!1;ig.game.gameOver=!0}});wgl.webglmain=function(b,c){wgl.debug=new wgl.Debug;wgl.system=new wgl.System(b,c);wgl.game=new MyWGLGame}});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.patches.mouse-move-patch","plugins.patches.patch-winsurface-input","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.datastructure.binary-heap",
"game.entities.buttons.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.entities.start-button","game.entities.level-end-dialog","game.entities.replay-button","game.entities.home-button","game.entities.shop-button","game.entities.shop-page","game.entities.screen-transition","game.entities.arrow-button","game.entities.sound-button","game.entities.pause-button","game.entities.level-pause-dialog",
"game.levels.opening","game.levels.main-menu","game.levels.gameplay","babylon.game.wgl-main").defines(function(){this.MJSSOB;MyGame=ig.Game.extend({io:null,paused:!1,lastDraw:[],scorelist:null,score:0,peoplecount:[0,0,0],init:function(){this.setupLocalStorage();!0==this.playerStats.soundSettings&&ig.soundHandler.unmuteAll();for(var b=0;1E3>b;b++){var c=Math.floor(3*Math.random());this.peoplecount[c]++}for(b=c=0;b<this.peoplecount.length;b++)this.peoplecount[b]>this.peoplecount[c]&&(c=b);this.setupMarketJsGameCenter();
this.io=new IoManager;this.setupUrlParams=new ig.UrlParameters;this.removeLoadingWheel();this.finalize()},setupMarketJsGameCenter:function(){if(_SETTINGS)if(_SETTINGS.MarketJSGameCenter){var b=ig.domHandler.getElementByClass("gamecenter-activator");_SETTINGS.MarketJSGameCenter.Activator.Enabled&&_SETTINGS.MarketJSGameCenter.Activator.Position&&(console.log("MarketJSGameCenter activator settings present ...."),ig.domHandler.css(b,{position:"absolute",left:_SETTINGS.MarketJSGameCenter.Activator.Position.Left,
top:_SETTINGS.MarketJSGameCenter.Activator.Position.Top,"z-index":3}));ig.domHandler.show(b)}else console.log("MarketJSGameCenter settings not defined in game settings")},finalize:function(){var b=ig.domHandler.getElementById("#play");ig.domHandler.attr(b,"onclick","ig.game.splashClick();");ig.domHandler.show(b);ig.sizeHandler.reorient()},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(b){console.log(b)}},showDebugMenu:function(){console.log("showing debug menu ...");
ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},start:function(){this.director=new ig.Director(this,[LevelOpening,LevelGameplay]);if(_SETTINGS.Branding.Splash.Enabled)try{this.branding=new ig.BrandingSplash}catch(b){console.log(b),console.log("Loading original levels ..."),this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel)},fpsCount:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()?null!=this.fpsCounter?
this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset())},endGame:function(){console.log("End game");ig.soundHandler.bgmPlayer.stop();ig.apiHandler.run("MJSEnd")},setupLocalStorage:function(){try{this.storage=new ig.Storage}catch(b){}if(this.storage)if(this.playerStats||this.resetPlayerStats(),this.storage.isSet("playerStats-spiral-stairs-marketjs")){for(var c in this.storage.get("playerStats-spiral-stairs-marketjs"))if(!(c in this.playerStats))return console.log("error loading"),
this.submitStats();for(var d in this.storage.get("playerStats-spiral-stairs-marketjs"))this.playerStats[d]=this.storage.get("playerStats-spiral-stairs-marketjs")[d]}else console.log("no localstorage before, creating..."),this.submitStats()},resetPlayerStats:function(){this.playerStats={highscore:0,themeColour:0,soundSettings:!0}},submitStats:function(){var b=this.playerStats;try{this.storage.set("playerStats-spiral-stairs-marketjs",b)}catch(c){"QUOTA_EXCEEDED_ERR"==c.name.toUpperCase()&&console.log("localstorage is not available")}},
splashClick:function(){var b=ig.domHandler.getElementById("#play");ig.domHandler.hide(b);ig.apiHandler.run("MJSFooter");ig.apiHandler.run("MJSHeader");ig.game.start()},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);console.log("Game Paused");$("#pause").show()},resumeGame:function(){ig.system.startRunLoop.call(ig.system);console.log("Game Resumed");$("#pause").hide()},showOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).show(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility=
"visible")},hideOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).hide(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility="hidden")},currentBGMVolume:1,addition:0.1,update:function(){this.paused?(this.updateWhilePaused(),this.checkEntities()):(this.parent(),ig.ua.mobile&&ig.soundHandler&&ig.soundHandler.forceLoopBGM());this.io.clear()},updateWhilePaused:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].ignorePause&&this.entities[b].update()},
draw:function(){this.parent();for(var b=0;b<this.lastDraw.length;b++)this.lastDraw[b]();this.dctf()},dctf:function(){this.COPYRIGHT},drawFPS:function(){var b=Math.round(1E3/ig.debug.debugTickAvg);ig.system.context.fillText("FPS:"+b,500,50)},clearCanvas:function(b,c,d){var e=b.canvas;b.clearRect(0,0,c,d);e.style.display="none";e.offsetHeight;e.style.display="inherit"},drawDebug:function(){if(!ig.global.wm&&(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=
0.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px troika",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(b){this.debug?(50>this.debug.length||this.debug.splice(0,1),this.debug.push(b),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(b));
console.log(b)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=this.viewDebug?!1:!0)}});ig.domHandler=null;ig.domHandler=new ig.DomHandler;ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.apiHandler=new ig.ApiHandler;ig.sizeHandler=
new ig.SizeHandler(ig.domHandler);ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,ig.sizeHandler.mobile.actualResolution.x,ig.sizeHandler.mobile.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader),ig.sizeHandler.resize()):ig.main("#canvas",MyGame,60,ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader);wgl.webglmain("#webglcanvas",60);ig.soundHandler=null;ig.soundHandler=new ig.SoundHandler;ig.sizeHandler.reorient();
this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.MJSEOB});
</script>
</head>

<body onload="setTimeout(function(){window.scrollTo(0,1)},1);">
	<!--body-->


	<div id="pause" onclick="ig.game.resumeGame();"></div>
	<div id="ajaxbar">
		<div id="game"><canvas id="canvas"></canvas></div>
		<div id="webgl"><canvas id="webglcanvas"></canvas></div>

		<div id="orientate"><img src="../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/orientate/landscape.jpg" /></div>
		<div id="play" class="play" onclick=""><img src="../cdn.marketjs.net/games/spiral-stairs/localization/en/media/graphics/splash/mobile/cover-start.jpg" /></div>
		<!--<img id="scrollDown" width="220" height="277"></img>-->

	</div>
	<!-- <div id="tempdiv"><br><br><br></div> -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117180225-25"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-117180225-25');

_SETTINGS.MoreGames.NewWindow=false;

</script>
</body>


<!-- Mirrored from smartfun.club/serve?portal_id=5763614147346432&game_id=4967995156725760&branding_id=5734046899372032&ad_id=4865470182195200&portal_localization_id=5092721263902720 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 01 Sep 2023 14:13:50 GMT -->
</html>
